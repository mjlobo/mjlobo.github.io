parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"lKFo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AxisHelper=vx,exports.BinaryTextureLoader=Mx,exports.Bone=iu,exports.BoundingBoxHelper=yx,exports.BufferAttribute=Si,exports.BufferGeometry=ji,exports.Camera=ys,exports.CanvasRenderer=Tx,exports.CompressedTextureLoader=Sd,exports.CubicInterpolant=rd,exports.Curve=Rd,exports.DataTextureLoader=Ad,exports.DiscreteInterpolant=sd,exports.DynamicBufferAttribute=lx,exports.EdgesHelper=_x,exports.EventDispatcher=In,exports.FileLoader=wd,exports.Float16BufferAttribute=Di,exports.Float32Attribute=gx,exports.Float32BufferAttribute=Ii,exports.Float64Attribute=xx,exports.Float64BufferAttribute=Bi,exports.GLBufferAttribute=Af,exports.ImageBitmapLoader=Bm,exports.ImmediateRenderObject=zf,exports.InstancedBufferAttribute=Lm,exports.InstancedBufferGeometry=Am,exports.InstancedInterleavedBuffer=Ef,exports.InstancedMesh=pu,exports.Int16Attribute=px,exports.Int16BufferAttribute=Li,exports.Int32Attribute=mx,exports.Int32BufferAttribute=Ci,exports.Int8Attribute=cx,exports.Int8BufferAttribute=Ti,exports.InterleavedBuffer=Ch,exports.InterleavedBufferAttribute=Dh,exports.Interpolant=nd,exports.JSONLoader=Ex,exports.LensFlare=Lx,exports.Line=yu,exports.LineSegments=wu,exports.LinearInterpolant=id,exports.Loader=_d,exports.LoadingManager=vd,exports.Material=di,exports.Mesh=cs,exports.MeshFaceMaterial=$g,exports.MeshPhysicalMaterial=Xp,exports.MeshStandardMaterial=qp,exports.MultiMaterial=tx,exports.Object3D=Jr,exports.ParametricGeometry=exports.ParametricBufferGeometry=Dp,exports.Particle=nx,exports.ParticleBasicMaterial=sx,exports.ParticleSystem=rx,exports.ParticleSystemMaterial=ox,exports.PerspectiveCamera=_s,exports.PointCloud=ex,exports.PointCloudMaterial=ix,exports.Points=Ru,exports.PropertyBinding=bf,exports.QuaternionLinearInterpolant=hd,exports.Raycaster=Lf,exports.ShaderMaterial=vs,exports.SkinnedMesh=ru,exports.TextureLoader=Ld,exports.Uint16Attribute=dx,exports.Uint16BufferAttribute=Ri,exports.Uint32Attribute=fx,exports.Uint32BufferAttribute=Pi,exports.Uint8Attribute=hx,exports.Uint8BufferAttribute=Ei,exports.Uint8ClampedAttribute=ux,exports.Uint8ClampedBufferAttribute=Ai,exports.Vertex=ax,exports.WebGLRenderTargetCube=Sx,exports.WebGLRenderer=Th,exports.WebGLUtils=vh,exports.WireframeHelper=bx,exports.XHRLoader=wx,exports.FlatShading=exports.FaceColors=exports.ExtrudeGeometry=exports.ExtrudeBufferGeometry=exports.Euler=exports.EquirectangularRefractionMapping=exports.EquirectangularReflectionMapping=exports.EqualStencilFunc=exports.EqualDepth=exports.EllipseCurve=exports.EdgesGeometry=exports.DynamicReadUsage=exports.DynamicDrawUsage=exports.DynamicCopyUsage=exports.DstColorFactor=exports.DstAlphaFactor=exports.DoubleSide=exports.DodecahedronGeometry=exports.DodecahedronBufferGeometry=exports.DirectionalLightHelper=exports.DirectionalLight=exports.DepthTexture=exports.DepthStencilFormat=exports.DepthFormat=exports.DefaultLoadingManager=exports.DecrementWrapStencilOp=exports.DecrementStencilOp=exports.DataUtils=exports.DataTexture3D=exports.DataTexture2DArray=exports.DataTexture=exports.Cylindrical=exports.CylinderGeometry=exports.CylinderBufferGeometry=exports.CustomToneMapping=exports.CustomBlending=exports.CurvePath=exports.CullFaceNone=exports.CullFaceFrontBack=exports.CullFaceFront=exports.CullFaceBack=exports.CubicBezierCurve3=exports.CubicBezierCurve=exports.CubeUVRefractionMapping=exports.CubeUVReflectionMapping=exports.CubeTextureLoader=exports.CubeTexture=exports.CubeRefractionMapping=exports.CubeReflectionMapping=exports.CubeCamera=exports.ConeGeometry=exports.ConeBufferGeometry=exports.CompressedTexture=exports.ColorKeyframeTrack=exports.Color=exports.Clock=exports.ClampToEdgeWrapping=exports.CircleGeometry=exports.CircleBufferGeometry=exports.CineonToneMapping=exports.CatmullRomCurve3=exports.CanvasTexture=exports.CameraHelper=exports.Cache=exports.ByteType=exports.BufferGeometryLoader=exports.BoxHelper=exports.BoxGeometry=exports.BoxBufferGeometry=exports.Box3Helper=exports.Box3=exports.Box2=exports.BooleanKeyframeTrack=exports.BasicShadowMap=exports.BasicDepthPacking=exports.BackSide=exports.AxesHelper=exports.AudioLoader=exports.AudioListener=exports.AudioContext=exports.AudioAnalyser=exports.Audio=exports.ArrowHelper=exports.ArrayCamera=exports.ArcCurve=exports.AnimationUtils=exports.AnimationObjectGroup=exports.AnimationMixer=exports.AnimationLoader=exports.AnimationClip=exports.AmbientLightProbe=exports.AmbientLight=exports.AlwaysStencilFunc=exports.AlwaysDepth=exports.AlphaFormat=exports.AdditiveBlending=exports.AdditiveAnimationBlendMode=exports.AddOperation=exports.AddEquation=exports.ACESFilmicToneMapping=void 0,exports.NumberKeyframeTrack=exports.NotEqualStencilFunc=exports.NotEqualDepth=exports.NormalBlending=exports.NormalAnimationBlendMode=exports.NoToneMapping=exports.NoColors=exports.NoBlending=exports.NeverStencilFunc=exports.NeverDepth=exports.NearestMipmapNearestFilter=exports.NearestMipmapLinearFilter=exports.NearestMipMapNearestFilter=exports.NearestMipMapLinearFilter=exports.NearestFilter=exports.MultiplyOperation=exports.MultiplyBlending=exports.MixOperation=exports.MirroredRepeatWrapping=exports.MinEquation=exports.MeshToonMaterial=exports.MeshPhongMaterial=exports.MeshNormalMaterial=exports.MeshMatcapMaterial=exports.MeshLambertMaterial=exports.MeshDistanceMaterial=exports.MeshDepthMaterial=exports.MeshBasicMaterial=exports.MaxEquation=exports.Matrix4=exports.Matrix3=exports.MathUtils=exports.Math=exports.MaterialLoader=exports.MOUSE=exports.LuminanceFormat=exports.LuminanceAlphaFormat=exports.LoopRepeat=exports.LoopPingPong=exports.LoopOnce=exports.LogLuvEncoding=exports.LoaderUtils=exports.LinearToneMapping=exports.LinearMipmapNearestFilter=exports.LinearMipmapLinearFilter=exports.LinearMipMapNearestFilter=exports.LinearMipMapLinearFilter=exports.LinearFilter=exports.LinearEncoding=exports.LineStrip=exports.LinePieces=exports.LineLoop=exports.LineDashedMaterial=exports.LineCurve3=exports.LineCurve=exports.LineBasicMaterial=exports.Line3=exports.LightProbe=exports.Light=exports.LessStencilFunc=exports.LessEqualStencilFunc=exports.LessEqualDepth=exports.LessDepth=exports.Layers=exports.LatheGeometry=exports.LatheBufferGeometry=exports.LOD=exports.KeyframeTrack=exports.KeepStencilOp=exports.InvertStencilOp=exports.InterpolateSmooth=exports.InterpolateLinear=exports.InterpolateDiscrete=exports.IntType=exports.IncrementWrapStencilOp=exports.IncrementStencilOp=exports.ImageUtils=exports.ImageLoader=exports.IcosahedronGeometry=exports.IcosahedronBufferGeometry=exports.HemisphereLightProbe=exports.HemisphereLightHelper=exports.HemisphereLight=exports.HalfFloatType=exports.Group=exports.GridHelper=exports.GreaterStencilFunc=exports.GreaterEqualStencilFunc=exports.GreaterEqualDepth=exports.GreaterDepth=exports.GammaEncoding=exports.GLSL3=exports.GLSL1=exports.Frustum=exports.FrontSide=exports.FontLoader=exports.Font=exports.FogExp2=exports.Fog=exports.FloatType=void 0,exports.Shape=exports.ShadowMaterial=exports.ShaderLib=exports.ShaderChunk=exports.SceneUtils=exports.Scene=exports.SRGB8_ALPHA8_ASTC_8x8_Format=exports.SRGB8_ALPHA8_ASTC_8x6_Format=exports.SRGB8_ALPHA8_ASTC_8x5_Format=exports.SRGB8_ALPHA8_ASTC_6x6_Format=exports.SRGB8_ALPHA8_ASTC_6x5_Format=exports.SRGB8_ALPHA8_ASTC_5x5_Format=exports.SRGB8_ALPHA8_ASTC_5x4_Format=exports.SRGB8_ALPHA8_ASTC_4x4_Format=exports.SRGB8_ALPHA8_ASTC_12x12_Format=exports.SRGB8_ALPHA8_ASTC_12x10_Format=exports.SRGB8_ALPHA8_ASTC_10x8_Format=exports.SRGB8_ALPHA8_ASTC_10x6_Format=exports.SRGB8_ALPHA8_ASTC_10x5_Format=exports.SRGB8_ALPHA8_ASTC_10x10_Format=exports.RingGeometry=exports.RingBufferGeometry=exports.ReverseSubtractEquation=exports.ReplaceStencilOp=exports.RepeatWrapping=exports.ReinhardToneMapping=exports.RedIntegerFormat=exports.RedFormat=exports.RectAreaLight=exports.Ray=exports.RawShaderMaterial=exports.RGIntegerFormat=exports.RGFormat=exports.RGB_S3TC_DXT1_Format=exports.RGB_PVRTC_4BPPV1_Format=exports.RGB_PVRTC_2BPPV1_Format=exports.RGB_ETC2_Format=exports.RGB_ETC1_Format=exports.RGBM7Encoding=exports.RGBM16Encoding=exports.RGBIntegerFormat=exports.RGBFormat=exports.RGBEFormat=exports.RGBEEncoding=exports.RGBDEncoding=exports.RGBA_S3TC_DXT5_Format=exports.RGBA_S3TC_DXT3_Format=exports.RGBA_S3TC_DXT1_Format=exports.RGBA_PVRTC_4BPPV1_Format=exports.RGBA_PVRTC_2BPPV1_Format=exports.RGBA_ETC2_EAC_Format=exports.RGBA_BPTC_Format=exports.RGBA_ASTC_8x8_Format=exports.RGBA_ASTC_8x6_Format=exports.RGBA_ASTC_8x5_Format=exports.RGBA_ASTC_6x6_Format=exports.RGBA_ASTC_6x5_Format=exports.RGBA_ASTC_5x5_Format=exports.RGBA_ASTC_5x4_Format=exports.RGBA_ASTC_4x4_Format=exports.RGBA_ASTC_12x12_Format=exports.RGBA_ASTC_12x10_Format=exports.RGBA_ASTC_10x8_Format=exports.RGBA_ASTC_10x6_Format=exports.RGBA_ASTC_10x5_Format=exports.RGBA_ASTC_10x10_Format=exports.RGBAIntegerFormat=exports.RGBAFormat=exports.RGBADepthPacking=exports.REVISION=exports.QuaternionKeyframeTrack=exports.Quaternion=exports.QuadraticBezierCurve3=exports.QuadraticBezierCurve=exports.PropertyMixer=exports.PositionalAudio=exports.PolyhedronGeometry=exports.PolyhedronBufferGeometry=exports.PolarGridHelper=exports.PointsMaterial=exports.PointLightHelper=exports.PointLight=exports.PlaneHelper=exports.PlaneGeometry=exports.PlaneBufferGeometry=exports.Plane=exports.Path=exports.PMREMGenerator=exports.PCFSoftShadowMap=exports.PCFShadowMap=exports.OrthographicCamera=exports.OneMinusSrcColorFactor=exports.OneMinusSrcAlphaFactor=exports.OneMinusDstColorFactor=exports.OneMinusDstAlphaFactor=exports.OneFactor=exports.OctahedronGeometry=exports.OctahedronBufferGeometry=exports.ObjectSpaceNormalMap=exports.ObjectLoader=void 0,exports.sRGBEncoding=exports.ZeroStencilOp=exports.ZeroSlopeEnding=exports.ZeroFactor=exports.ZeroCurvatureEnding=exports.WrapAroundEnding=exports.WireframeGeometry=exports.WebGLRenderTarget=exports.WebGLMultisampleRenderTarget=exports.WebGLCubeRenderTarget=exports.WebGL1Renderer=exports.VideoTexture=exports.VertexColors=exports.VectorKeyframeTrack=exports.Vector4=exports.Vector3=exports.Vector2=exports.VSMShadowMap=exports.UnsignedShortType=exports.UnsignedShort565Type=exports.UnsignedShort5551Type=exports.UnsignedShort4444Type=exports.UnsignedIntType=exports.UnsignedInt248Type=exports.UnsignedByteType=exports.UniformsUtils=exports.UniformsLib=exports.Uniform=exports.UVMapping=exports.TubeGeometry=exports.TubeBufferGeometry=exports.TrianglesDrawMode=exports.TriangleStripDrawMode=exports.TriangleFanDrawMode=exports.Triangle=exports.TorusKnotGeometry=exports.TorusKnotBufferGeometry=exports.TorusGeometry=exports.TorusBufferGeometry=exports.Texture=exports.TextGeometry=exports.TextBufferGeometry=exports.TetrahedronGeometry=exports.TetrahedronBufferGeometry=exports.TangentSpaceNormalMap=exports.TOUCH=exports.SubtractiveBlending=exports.SubtractEquation=exports.StringKeyframeTrack=exports.StreamReadUsage=exports.StreamDrawUsage=exports.StreamCopyUsage=exports.StereoCamera=exports.StaticReadUsage=exports.StaticDrawUsage=exports.StaticCopyUsage=exports.SrcColorFactor=exports.SrcAlphaSaturateFactor=exports.SrcAlphaFactor=exports.SpriteMaterial=exports.Sprite=exports.SpotLightHelper=exports.SpotLight=exports.SplineCurve=exports.SphericalHarmonics3=exports.Spherical=exports.SphereGeometry=exports.SphereBufferGeometry=exports.Sphere=exports.SmoothShading=exports.SkeletonHelper=exports.Skeleton=exports.ShortType=exports.ShapeUtils=exports.ShapePath=exports.ShapeGeometry=exports.ShapeBufferGeometry=void 0;const t="127";exports.REVISION="127";const e={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};exports.MOUSE=e;const n={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};exports.TOUCH=n;const r=0;exports.CullFaceNone=r;const i=1;exports.CullFaceBack=i;const s=2;exports.CullFaceFront=s;const o=3;exports.CullFaceFrontBack=3;const a=0;exports.BasicShadowMap=0;const l=1;exports.PCFShadowMap=l;const c=2;exports.PCFSoftShadowMap=c;const h=3;exports.VSMShadowMap=h;const u=0;exports.FrontSide=u;const p=1;exports.BackSide=p;const d=2;exports.DoubleSide=d;const m=1;exports.FlatShading=1;const f=2;exports.SmoothShading=2;const g=0;exports.NoBlending=g;const x=1;exports.NormalBlending=x;const v=2;exports.AdditiveBlending=v;const y=3;exports.SubtractiveBlending=y;const _=4;exports.MultiplyBlending=_;const b=5;exports.CustomBlending=b;const w=100;exports.AddEquation=w;const M=101;exports.SubtractEquation=M;const S=102;exports.ReverseSubtractEquation=S;const T=103;exports.MinEquation=T;const E=104;exports.MaxEquation=E;const A=200;exports.ZeroFactor=A;const L=201;exports.OneFactor=L;const R=202;exports.SrcColorFactor=R;const C=203;exports.OneMinusSrcColorFactor=C;const P=204;exports.SrcAlphaFactor=P;const D=205;exports.OneMinusSrcAlphaFactor=D;const I=206;exports.DstAlphaFactor=I;const B=207;exports.OneMinusDstAlphaFactor=B;const N=208;exports.DstColorFactor=N;const F=209;exports.OneMinusDstColorFactor=F;const O=210;exports.SrcAlphaSaturateFactor=O;const z=0;exports.NeverDepth=z;const G=1;exports.AlwaysDepth=G;const H=2;exports.LessDepth=H;const U=3;exports.LessEqualDepth=U;const k=4;exports.EqualDepth=k;const V=5;exports.GreaterEqualDepth=V;const W=6;exports.GreaterDepth=W;const j=7;exports.NotEqualDepth=j;const q=0;exports.MultiplyOperation=q;const X=1;exports.MixOperation=X;const Y=2;exports.AddOperation=Y;const Z=0;exports.NoToneMapping=Z;const J=1;exports.LinearToneMapping=J;const Q=2;exports.ReinhardToneMapping=Q;const K=3;exports.CineonToneMapping=K;const $=4;exports.ACESFilmicToneMapping=$;const tt=5;exports.CustomToneMapping=tt;const et=300;exports.UVMapping=et;const nt=301;exports.CubeReflectionMapping=nt;const rt=302;exports.CubeRefractionMapping=rt;const it=303;exports.EquirectangularReflectionMapping=it;const st=304;exports.EquirectangularRefractionMapping=st;const ot=306;exports.CubeUVReflectionMapping=ot;const at=307;exports.CubeUVRefractionMapping=at;const lt=1e3;exports.RepeatWrapping=lt;const ct=1001;exports.ClampToEdgeWrapping=ct;const ht=1002;exports.MirroredRepeatWrapping=ht;const ut=1003;exports.NearestFilter=ut;const pt=1004;exports.NearestMipmapNearestFilter=pt;const dt=1004;exports.NearestMipMapNearestFilter=1004;const mt=1005;exports.NearestMipmapLinearFilter=mt;const ft=1005;exports.NearestMipMapLinearFilter=1005;const gt=1006;exports.LinearFilter=gt;const xt=1007;exports.LinearMipmapNearestFilter=xt;const vt=1007;exports.LinearMipMapNearestFilter=1007;const yt=1008;exports.LinearMipmapLinearFilter=yt;const _t=1008;exports.LinearMipMapLinearFilter=1008;const bt=1009;exports.UnsignedByteType=bt;const wt=1010;exports.ByteType=wt;const Mt=1011;exports.ShortType=Mt;const St=1012;exports.UnsignedShortType=St;const Tt=1013;exports.IntType=Tt;const Et=1014;exports.UnsignedIntType=Et;const At=1015;exports.FloatType=At;const Lt=1016;exports.HalfFloatType=Lt;const Rt=1017;exports.UnsignedShort4444Type=Rt;const Ct=1018;exports.UnsignedShort5551Type=Ct;const Pt=1019;exports.UnsignedShort565Type=Pt;const Dt=1020;exports.UnsignedInt248Type=Dt;const It=1021;exports.AlphaFormat=It;const Bt=1022;exports.RGBFormat=Bt;const Nt=1023;exports.RGBAFormat=Nt;const Ft=1024;exports.LuminanceFormat=Ft;const Ot=1025;exports.LuminanceAlphaFormat=Ot;const zt=Nt;exports.RGBEFormat=zt;const Gt=1026;exports.DepthFormat=Gt;const Ht=1027;exports.DepthStencilFormat=Ht;const Ut=1028;exports.RedFormat=Ut;const kt=1029;exports.RedIntegerFormat=kt;const Vt=1030;exports.RGFormat=Vt;const Wt=1031;exports.RGIntegerFormat=Wt;const jt=1032;exports.RGBIntegerFormat=jt;const qt=1033;exports.RGBAIntegerFormat=qt;const Xt=33776;exports.RGB_S3TC_DXT1_Format=Xt;const Yt=33777;exports.RGBA_S3TC_DXT1_Format=Yt;const Zt=33778;exports.RGBA_S3TC_DXT3_Format=Zt;const Jt=33779;exports.RGBA_S3TC_DXT5_Format=Jt;const Qt=35840;exports.RGB_PVRTC_4BPPV1_Format=Qt;const Kt=35841;exports.RGB_PVRTC_2BPPV1_Format=Kt;const $t=35842;exports.RGBA_PVRTC_4BPPV1_Format=$t;const te=35843;exports.RGBA_PVRTC_2BPPV1_Format=te;const ee=36196;exports.RGB_ETC1_Format=ee;const ne=37492;exports.RGB_ETC2_Format=ne;const re=37496;exports.RGBA_ETC2_EAC_Format=re;const ie=37808;exports.RGBA_ASTC_4x4_Format=ie;const se=37809;exports.RGBA_ASTC_5x4_Format=se;const oe=37810;exports.RGBA_ASTC_5x5_Format=oe;const ae=37811;exports.RGBA_ASTC_6x5_Format=ae;const le=37812;exports.RGBA_ASTC_6x6_Format=le;const ce=37813;exports.RGBA_ASTC_8x5_Format=ce;const he=37814;exports.RGBA_ASTC_8x6_Format=he;const ue=37815;exports.RGBA_ASTC_8x8_Format=ue;const pe=37816;exports.RGBA_ASTC_10x5_Format=pe;const de=37817;exports.RGBA_ASTC_10x6_Format=de;const me=37818;exports.RGBA_ASTC_10x8_Format=me;const fe=37819;exports.RGBA_ASTC_10x10_Format=fe;const ge=37820;exports.RGBA_ASTC_12x10_Format=ge;const xe=37821;exports.RGBA_ASTC_12x12_Format=xe;const ve=36492;exports.RGBA_BPTC_Format=ve;const ye=37840;exports.SRGB8_ALPHA8_ASTC_4x4_Format=ye;const _e=37841;exports.SRGB8_ALPHA8_ASTC_5x4_Format=_e;const be=37842;exports.SRGB8_ALPHA8_ASTC_5x5_Format=be;const we=37843;exports.SRGB8_ALPHA8_ASTC_6x5_Format=we;const Me=37844;exports.SRGB8_ALPHA8_ASTC_6x6_Format=Me;const Se=37845;exports.SRGB8_ALPHA8_ASTC_8x5_Format=Se;const Te=37846;exports.SRGB8_ALPHA8_ASTC_8x6_Format=Te;const Ee=37847;exports.SRGB8_ALPHA8_ASTC_8x8_Format=Ee;const Ae=37848;exports.SRGB8_ALPHA8_ASTC_10x5_Format=Ae;const Le=37849;exports.SRGB8_ALPHA8_ASTC_10x6_Format=Le;const Re=37850;exports.SRGB8_ALPHA8_ASTC_10x8_Format=Re;const Ce=37851;exports.SRGB8_ALPHA8_ASTC_10x10_Format=Ce;const Pe=37852;exports.SRGB8_ALPHA8_ASTC_12x10_Format=Pe;const De=37853;exports.SRGB8_ALPHA8_ASTC_12x12_Format=De;const Ie=2200;exports.LoopOnce=Ie;const Be=2201;exports.LoopRepeat=Be;const Ne=2202;exports.LoopPingPong=Ne;const Fe=2300;exports.InterpolateDiscrete=Fe;const Oe=2301;exports.InterpolateLinear=Oe;const ze=2302;exports.InterpolateSmooth=ze;const Ge=2400;exports.ZeroCurvatureEnding=Ge;const He=2401;exports.ZeroSlopeEnding=He;const Ue=2402;exports.WrapAroundEnding=Ue;const ke=2500;exports.NormalAnimationBlendMode=ke;const Ve=2501;exports.AdditiveAnimationBlendMode=Ve;const We=0;exports.TrianglesDrawMode=0;const je=1;exports.TriangleStripDrawMode=1;const qe=2;exports.TriangleFanDrawMode=2;const Xe=3e3;exports.LinearEncoding=Xe;const Ye=3001;exports.sRGBEncoding=Ye;const Ze=3007;exports.GammaEncoding=Ze;const Je=3002;exports.RGBEEncoding=Je;const Qe=3003;exports.LogLuvEncoding=Qe;const Ke=3004;exports.RGBM7Encoding=Ke;const $e=3005;exports.RGBM16Encoding=$e;const tn=3006;exports.RGBDEncoding=tn;const en=3200;exports.BasicDepthPacking=en;const nn=3201;exports.RGBADepthPacking=nn;const rn=0;exports.TangentSpaceNormalMap=rn;const sn=1;exports.ObjectSpaceNormalMap=sn;const on=0;exports.ZeroStencilOp=0;const an=7680;exports.KeepStencilOp=an;const ln=7681;exports.ReplaceStencilOp=7681;const cn=7682;exports.IncrementStencilOp=7682;const hn=7683;exports.DecrementStencilOp=7683;const un=34055;exports.IncrementWrapStencilOp=34055;const pn=34056;exports.DecrementWrapStencilOp=34056;const dn=5386;exports.InvertStencilOp=5386;const mn=512;exports.NeverStencilFunc=512;const fn=513;exports.LessStencilFunc=513;const gn=514;exports.EqualStencilFunc=514;const xn=515;exports.LessEqualStencilFunc=515;const vn=516;exports.GreaterStencilFunc=516;const yn=517;exports.NotEqualStencilFunc=517;const _n=518;exports.GreaterEqualStencilFunc=518;const bn=519;exports.AlwaysStencilFunc=bn;const wn=35044;exports.StaticDrawUsage=wn;const Mn=35048;exports.DynamicDrawUsage=Mn;const Sn=35040;exports.StreamDrawUsage=35040;const Tn=35045;exports.StaticReadUsage=35045;const En=35049;exports.DynamicReadUsage=35049;const An=35041;exports.StreamReadUsage=35041;const Ln=35046;exports.StaticCopyUsage=35046;const Rn=35050;exports.DynamicCopyUsage=35050;const Cn=35042;exports.StreamCopyUsage=35042;const Pn="100";exports.GLSL1="100";const Dn="300 es";function In(){}exports.GLSL3=Dn,Object.assign(In.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}});const Bn=[];for(let Rx=0;Rx<256;Rx++)Bn[Rx]=(Rx<16?"0":"")+Rx.toString(16);let Nn=1234567;const Fn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Bn[255&t]+Bn[t>>8&255]+Bn[t>>16&255]+Bn[t>>24&255]+"-"+Bn[255&e]+Bn[e>>8&255]+"-"+Bn[e>>16&15|64]+Bn[e>>24&255]+"-"+Bn[63&n|128]+Bn[n>>8&255]+"-"+Bn[n>>16&255]+Bn[n>>24&255]+Bn[255&r]+Bn[r>>8&255]+Bn[r>>16&255]+Bn[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:function(t,e,n){return(1-n)*t+n*e},damp:function(t,e,n,r){return Fn.lerp(t,e,1-Math.exp(-n*r))},pingpong:function(t,e=1){return e-Math.abs(Fn.euclideanModulo(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Nn=t%2147483647),((Nn=16807*Nn%2147483647)-1)/2147483646},degToRad:function(t){return t*Fn.DEG2RAD},radToDeg:function(t){return t*Fn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),h=o((e+r)/2),u=s((e-r)/2),p=o((e-r)/2),d=s((r-e)/2),m=o((r-e)/2);switch(i){case"XYX":t.set(a*h,l*u,l*p,a*c);break;case"YZY":t.set(l*p,a*h,l*u,a*c);break;case"ZXZ":t.set(l*u,l*p,a*h,a*c);break;case"XZX":t.set(a*h,l*m,l*d,a*c);break;case"YXY":t.set(l*d,a*h,l*m,a*c);break;case"ZYZ":t.set(l*m,l*d,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};exports.MathUtils=exports.Math=Fn;class On{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,s=this.y-t.y;return this.x=i*n-s*r+t.x,this.y=i*r+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}exports.Vector2=On,On.prototype.isVector2=!0;class zn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,s,o,a,l){const c=this.elements;return c[0]=t,c[1]=r,c[2]=o,c[3]=e,c[4]=i,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],p=n[5],d=n[8],m=r[0],f=r[3],g=r[6],x=r[1],v=r[4],y=r[7],_=r[2],b=r[5],w=r[8];return i[0]=s*m+o*x+a*_,i[3]=s*f+o*v+a*b,i[6]=s*g+o*y+a*w,i[1]=l*m+c*x+h*_,i[4]=l*f+c*v+h*b,i[7]=l*g+c*y+h*w,i[2]=u*m+p*x+d*_,i[5]=u*f+p*v+d*b,i[8]=u*g+p*y+d*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*i*c+n*o*a+r*i*l-r*s*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=c*s-o*l,u=o*a-c*i,p=l*i-s*a,d=e*h+n*u+r*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const m=1/d;return t[0]=h*m,t[1]=(r*l-c*n)*m,t[2]=(o*n-r*s)*m,t[3]=u*m,t[4]=(c*e-r*a)*m,t[5]=(r*i-o*e)*m,t[6]=p*m,t[7]=(n*a-l*e)*m,t[8]=(s*e-n*i)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,s,o){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-r*l,r*a,-r*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],s=r[3],o=r[6],a=r[1],l=r[4],c=r[7];return r[0]=e*i+n*a,r[3]=e*s+n*l,r[6]=e*o+n*c,r[1]=-n*i+e*a,r[4]=-n*s+e*l,r[7]=-n*o+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}let Gn;exports.Matrix3=zn,zn.prototype.isMatrix3=!0;const Hn={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Gn&&(Gn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Gn.width=t.width,Gn.height=t.height;const n=Gn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Gn}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}};exports.ImageUtils=Hn;let Un=0;class kn extends In{constructor(t=kn.DEFAULT_IMAGE,e=kn.DEFAULT_MAPPING,n=ct,r=ct,i=gt,s=yt,o=Nt,a=bt,l=1,c=Xe){super(),Object.defineProperty(this,"id",{value:Un++}),this.uuid=Fn.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new On(0,0),this.repeat=new On(1,1),this.center=new On(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Fn.generateUUID()),!e&&void 0===t.images[r.uuid]){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Vn(r[t].image)):e.push(Vn(r[t]))}else e=Vn(r);t.images[r.uuid]={uuid:r.uuid,url:e}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==et)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case lt:t.x=t.x-Math.floor(t.x);break;case ct:t.x=t.x<0?0:1;break;case ht:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case lt:t.y=t.y-Math.floor(t.y);break;case ct:t.y=t.y<0?0:1;break;case ht:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function Vn(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Hn.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}exports.Texture=kn,kn.DEFAULT_IMAGE=void 0,kn.DEFAULT_MAPPING=et,kn.prototype.isTexture=!0;class Wn{constructor(t=0,e=0,n=0,r=1){this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*e+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*e+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*e+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],p=s[2],d=s[6],m=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+p)<.1&&Math.abs(u+d)<.1&&Math.abs(o+h+m-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(o+1)/2,s=(h+1)/2,f=(m+1)/2,g=(a+c)/4,x=(l+p)/4,v=(u+d)/4;return t>s&&t>f?t<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(t)),i=x/n):s>f?s<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(s)),i=v/r):f<.01?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(f)),r=v/i),this.set(n,r,i,e),this}let f=Math.sqrt((d-u)*(d-u)+(l-p)*(l-p)+(c-a)*(c-a));return Math.abs(f)<.001&&(f=1),this.x=(d-u)/f,this.y=(l-p)/f,this.z=(c-a)/f,this.w=Math.acos((o+h+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}exports.Vector4=Wn,Wn.prototype.isVector4=!0;class jn extends In{constructor(t,e,n){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Wn(0,0,t,e),this.scissorTest=!1,this.viewport=new Wn(0,0,t,e),n=n||{},this.texture=new kn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:gt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}exports.WebGLRenderTarget=jn,jn.prototype.isWebGLRenderTarget=!0;class qn extends jn{constructor(t,e,n){super(t,e,n),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}exports.WebGLMultisampleRenderTarget=qn,qn.prototype.isWebGLMultisampleRenderTarget=!0;class Xn{constructor(t=0,e=0,n=0,r=1){this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}static slerpFlat(t,e,n,r,i,s,o){let a=n[r+0],l=n[r+1],c=n[r+2],h=n[r+3];const u=i[s+0],p=i[s+1],d=i[s+2],m=i[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=c,void(t[e+3]=h);if(1===o)return t[e+0]=u,t[e+1]=p,t[e+2]=d,void(t[e+3]=m);if(h!==m||a!==u||l!==p||c!==d){let t=1-o;const e=a*u+l*p+c*d+h*m,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,e*n);t=Math.sin(t*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*t+u*i,l=l*t+p*i,c=c*t+d*i,h=h*t+m*i,t===1-o){const t=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=t,l*=t,c*=t,h*=t}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,r,i,s){const o=n[r],a=n[r+1],l=n[r+2],c=n[r+3],h=i[s],u=i[s+1],p=i[s+2],d=i[s+3];return t[e]=o*d+c*h+a*p-l*u,t[e+1]=a*d+c*u+l*h-o*p,t[e+2]=l*d+c*p+o*u-a*h,t[e+3]=c*d-o*h-a*u-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(r/2),h=o(i/2),u=a(n/2),p=a(r/2),d=a(i/2);switch(s){case"XYZ":this._x=u*c*h+l*p*d,this._y=l*p*h-u*c*d,this._z=l*c*d+u*p*h,this._w=l*c*h-u*p*d;break;case"YXZ":this._x=u*c*h+l*p*d,this._y=l*p*h-u*c*d,this._z=l*c*d-u*p*h,this._w=l*c*h+u*p*d;break;case"ZXY":this._x=u*c*h-l*p*d,this._y=l*p*h+u*c*d,this._z=l*c*d+u*p*h,this._w=l*c*h-u*p*d;break;case"ZYX":this._x=u*c*h-l*p*d,this._y=l*p*h+u*c*d,this._z=l*c*d-u*p*h,this._w=l*c*h+u*p*d;break;case"YZX":this._x=u*c*h+l*p*d,this._y=l*p*h+u*c*d,this._z=l*c*d-u*p*h,this._w=l*c*h-u*p*d;break;case"XZY":this._x=u*c*h-l*p*d,this._y=l*p*h-u*c*d,this._z=l*c*d+u*p*h,this._w=l*c*h+u*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],h=e[10],u=n+o+h;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-a)*t,this._y=(i-l)*t,this._z=(s-r)*t}else if(n>o&&n>h){const t=2*Math.sqrt(1+n-o-h);this._w=(c-a)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(i+l)/t}else if(o>h){const t=2*Math.sqrt(1+o-n-h);this._w=(i-l)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+h-n-o);this._w=(s-r)/t,this._x=(i+l)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Fn.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+r*l-i*a,this._y=r*c+s*a+i*o-n*l,this._z=i*c+s*l+n*a-r*o,this._w=s*c-n*o-r*a-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=r*h+this._y*u,this._z=i*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}exports.Quaternion=Xn,Xn.prototype.isQuaternion=!0;class Yn{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Jn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Jn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,s=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*r-o*n,c=a*n+o*e-i*r,h=a*r+i*n-s*e,u=-i*e-s*n-o*r;return this.x=l*a+u*-i+c*-o-h*-s,this.y=c*a+u*-s+h*-i-l*-o,this.z=h*a+u*-o+l*-s-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Zn.copy(this).projectOnVector(t),this.sub(Zn)}reflect(t){return this.sub(Zn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Fn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}exports.Vector3=Yn,Yn.prototype.isVector3=!0;const Zn=new Yn,Jn=new Xn;class Qn{constructor(t=new Yn(1/0,1/0,1/0),e=new Yn(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],c=t[a+1],h=t[a+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>s&&(s=c),h>o&&(o=h)}return this.min.set(e,n,r),this.max.set(i,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),c=t.getY(a),h=t.getZ(a);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>s&&(s=c),h>o&&(o=h)}return this.min.set(e,n,r),this.max.set(i,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=$n.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Yn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Yn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),tr.copy(e.boundingBox),tr.applyMatrix4(t.matrixWorld),this.union(tr));const n=t.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Yn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,$n),$n.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ar),lr.subVectors(this.max,ar),er.subVectors(t.a,ar),nr.subVectors(t.b,ar),rr.subVectors(t.c,ar),ir.subVectors(nr,er),sr.subVectors(rr,nr),or.subVectors(er,rr);let e=[0,-ir.z,ir.y,0,-sr.z,sr.y,0,-or.z,or.y,ir.z,0,-ir.x,sr.z,0,-sr.x,or.z,0,-or.x,-ir.y,ir.x,0,-sr.y,sr.x,0,-or.y,or.x,0];return!!ur(e,er,nr,rr,lr)&&(!!ur(e=[1,0,0,0,1,0,0,0,1],er,nr,rr,lr)&&(cr.crossVectors(ir,sr),ur(e=[cr.x,cr.y,cr.z],er,nr,rr,lr)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Yn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return $n.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize($n).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Kn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Kn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Kn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Kn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Kn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Kn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Kn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Kn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Kn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}exports.Box3=Qn,Qn.prototype.isBox3=!0;const Kn=[new Yn,new Yn,new Yn,new Yn,new Yn,new Yn,new Yn,new Yn],$n=new Yn,tr=new Qn,er=new Yn,nr=new Yn,rr=new Yn,ir=new Yn,sr=new Yn,or=new Yn,ar=new Yn,lr=new Yn,cr=new Yn,hr=new Yn;function ur(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){hr.fromArray(t,s);const o=i.x*Math.abs(hr.x)+i.y*Math.abs(hr.y)+i.z*Math.abs(hr.z),a=e.dot(hr),l=n.dot(hr),c=r.dot(hr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const pr=new Qn,dr=new Yn,mr=new Yn,fr=new Yn;class gr{constructor(t=new Yn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):pr.setFromPoints(t).getCenter(n);let r=0;for(let i=0,s=t.length;i<s;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Yn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Qn),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){fr.subVectors(t,this.center);const e=fr.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(fr.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return mr.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(dr.copy(t.center).add(mr)),this.expandByPoint(dr.copy(t.center).sub(mr)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}exports.Sphere=gr;const xr=new Yn,vr=new Yn,yr=new Yn,_r=new Yn,br=new Yn,wr=new Yn,Mr=new Yn;class Sr{constructor(t=new Yn,e=new Yn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Yn),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,xr)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Yn),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=xr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(xr.copy(this.direction).multiplyScalar(e).add(this.origin),xr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){vr.copy(t).add(e).multiplyScalar(.5),yr.copy(e).sub(t).normalize(),_r.copy(this.origin).sub(vr);const i=.5*t.distanceTo(e),s=-this.direction.dot(yr),o=_r.dot(this.direction),a=-_r.dot(yr),l=_r.lengthSq(),c=Math.abs(1-s*s);let h,u,p,d;if(c>0)if(u=s*o-a,d=i*c,(h=s*a-o)>=0)if(u>=-d)if(u<=d){const t=1/c;p=(h*=t)*(h+s*(u*=t)+2*o)+u*(s*h+u+2*a)+l}else u=i,p=-(h=Math.max(0,-(s*u+o)))*h+u*(u+2*a)+l;else u=-i,p=-(h=Math.max(0,-(s*u+o)))*h+u*(u+2*a)+l;else u<=-d?p=-(h=Math.max(0,-(-s*i+o)))*h+(u=h>0?-i:Math.min(Math.max(-i,-a),i))*(u+2*a)+l:u<=d?(h=0,p=(u=Math.min(Math.max(-i,-a),i))*(u+2*a)+l):p=-(h=Math.max(0,-(s*i+o)))*h+(u=h>0?i:Math.min(Math.max(-i,-a),i))*(u+2*a)+l;else u=s>0?-i:i,p=-(h=Math.max(0,-(s*u+o)))*h+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(yr).multiplyScalar(u).add(vr),p}intersectSphere(t,e){xr.subVectors(t.center,this.origin);const n=xr.dot(this.direction),r=xr.dot(xr)-n*n,i=t.radius*t.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,s,o,a;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,r=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,r=(t.min.x-u.x)*l),c>=0?(i=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(i=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||i>r?null:((i>n||n!=n)&&(n=i),(s<r||r!=r)&&(r=s),h>=0?(o=(t.min.z-u.z)*h,a=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,a=(t.min.z-u.z)*h),n>a||o>r?null:((o>n||n!=n)&&(n=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,xr)}intersectTriangle(t,e,n,r,i){br.subVectors(e,t),wr.subVectors(n,t),Mr.crossVectors(br,wr);let s,o=this.direction.dot(Mr);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}_r.subVectors(this.origin,t);const a=s*this.direction.dot(wr.crossVectors(_r,wr));if(a<0)return null;const l=s*this.direction.dot(br.cross(_r));if(l<0)return null;if(a+l>o)return null;const c=-s*_r.dot(Mr);return c<0?null:this.at(c/o,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}exports.Ray=Sr;class Tr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,s,o,a,l,c,h,u,p,d,m,f){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=p,g[7]=d,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Tr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Er.setFromMatrixColumn(t,0).length(),i=1/Er.setFromMatrixColumn(t,1).length(),s=1/Er.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===t.order){const t=s*c,n=s*h,r=o*c,i=o*h;e[0]=a*c,e[4]=-a*h,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-o*a,e[2]=i-t*l,e[6]=r+n*l,e[10]=s*a}else if("YXZ"===t.order){const t=a*c,n=a*h,r=l*c,i=l*h;e[0]=t+i*o,e[4]=r*o-n,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-o,e[2]=n*o-r,e[6]=i+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*c,n=a*h,r=l*c,i=l*h;e[0]=t-i*o,e[4]=-s*h,e[8]=r+n*o,e[1]=n+r*o,e[5]=s*c,e[9]=i-t*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*c,n=s*h,r=o*c,i=o*h;e[0]=a*c,e[4]=r*l-n,e[8]=t*l+i,e[1]=a*h,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,n=s*l,r=o*a,i=o*l;e[0]=a*c,e[4]=i-t*h,e[8]=r*h+n,e[1]=h,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=n*h+r,e[10]=t-i*h}else if("XZY"===t.order){const t=s*a,n=s*l,r=o*a,i=o*l;e[0]=a*c,e[4]=-h,e[8]=l*c,e[1]=t*h+i,e[5]=s*c,e[9]=n*h-r,e[2]=r*h-n,e[6]=o*c,e[10]=i*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Lr,t,Rr)}lookAt(t,e,n){const r=this.elements;return Dr.subVectors(t,e),0===Dr.lengthSq()&&(Dr.z=1),Dr.normalize(),Cr.crossVectors(n,Dr),0===Cr.lengthSq()&&(1===Math.abs(n.z)?Dr.x+=1e-4:Dr.z+=1e-4,Dr.normalize(),Cr.crossVectors(n,Dr)),Cr.normalize(),Pr.crossVectors(Dr,Cr),r[0]=Cr.x,r[4]=Pr.x,r[8]=Dr.x,r[1]=Cr.y,r[5]=Pr.y,r[9]=Dr.y,r[2]=Cr.z,r[6]=Pr.z,r[10]=Dr.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],p=n[13],d=n[2],m=n[6],f=n[10],g=n[14],x=n[3],v=n[7],y=n[11],_=n[15],b=r[0],w=r[4],M=r[8],S=r[12],T=r[1],E=r[5],A=r[9],L=r[13],R=r[2],C=r[6],P=r[10],D=r[14],I=r[3],B=r[7],N=r[11],F=r[15];return i[0]=s*b+o*T+a*R+l*I,i[4]=s*w+o*E+a*C+l*B,i[8]=s*M+o*A+a*P+l*N,i[12]=s*S+o*L+a*D+l*F,i[1]=c*b+h*T+u*R+p*I,i[5]=c*w+h*E+u*C+p*B,i[9]=c*M+h*A+u*P+p*N,i[13]=c*S+h*L+u*D+p*F,i[2]=d*b+m*T+f*R+g*I,i[6]=d*w+m*E+f*C+g*B,i[10]=d*M+m*A+f*P+g*N,i[14]=d*S+m*L+f*D+g*F,i[3]=x*b+v*T+y*R+_*I,i[7]=x*w+v*E+y*C+_*B,i[11]=x*M+v*A+y*P+_*N,i[15]=x*S+v*L+y*D+_*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],p=t[14];return t[3]*(+i*a*h-r*l*h-i*o*u+n*l*u+r*o*p-n*a*p)+t[7]*(+e*a*p-e*l*u+i*s*u-r*s*p+r*l*c-i*a*c)+t[11]*(+e*l*h-e*o*p-i*s*h+n*s*p+i*o*c-n*l*c)+t[15]*(-r*o*c-e*a*h+e*o*u+r*s*h-n*s*u+n*a*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],u=t[10],p=t[11],d=t[12],m=t[13],f=t[14],g=t[15],x=h*f*l-m*u*l+m*a*p-o*f*p-h*a*g+o*u*g,v=d*u*l-c*f*l-d*a*p+s*f*p+c*a*g-s*u*g,y=c*m*l-d*h*l+d*o*p-s*m*p-c*o*g+s*h*g,_=d*h*a-c*m*a-d*o*u+s*m*u+c*o*f-s*h*f,b=e*x+n*v+r*y+i*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=x*w,t[1]=(m*u*i-h*f*i-m*r*p+n*f*p+h*r*g-n*u*g)*w,t[2]=(o*f*i-m*a*i+m*r*l-n*f*l-o*r*g+n*a*g)*w,t[3]=(h*a*i-o*u*i-h*r*l+n*u*l+o*r*p-n*a*p)*w,t[4]=v*w,t[5]=(c*f*i-d*u*i+d*r*p-e*f*p-c*r*g+e*u*g)*w,t[6]=(d*a*i-s*f*i-d*r*l+e*f*l+s*r*g-e*a*g)*w,t[7]=(s*u*i-c*a*i+c*r*l-e*u*l-s*r*p+e*a*p)*w,t[8]=y*w,t[9]=(d*h*i-c*m*i-d*n*p+e*m*p+c*n*g-e*h*g)*w,t[10]=(s*m*i-d*o*i+d*n*l-e*m*l-s*n*g+e*o*g)*w,t[11]=(c*o*i-s*h*i-c*n*l+e*h*l+s*n*p-e*o*p)*w,t[12]=_*w,t[13]=(c*m*r-d*h*r+d*n*u-e*m*u-c*n*f+e*h*f)*w,t[14]=(d*o*r-s*m*r-d*n*a+e*m*a+s*n*f-e*o*f)*w,t[15]=(s*h*r-c*o*r+c*n*a-e*h*a-s*n*u+e*o*u)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,s=t.x,o=t.y,a=t.z,l=i*s,c=i*o;return this.set(l*s+n,l*o-r*a,l*a+r*o,0,l*o+r*a,c*o+n,c*a-r*s,0,l*a-r*o,c*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,s=e._y,o=e._z,a=e._w,l=i+i,c=s+s,h=o+o,u=i*l,p=i*c,d=i*h,m=s*c,f=s*h,g=o*h,x=a*l,v=a*c,y=a*h,_=n.x,b=n.y,w=n.z;return r[0]=(1-(m+g))*_,r[1]=(p+y)*_,r[2]=(d-v)*_,r[3]=0,r[4]=(p-y)*b,r[5]=(1-(u+g))*b,r[6]=(f+x)*b,r[7]=0,r[8]=(d+v)*w,r[9]=(f-x)*w,r[10]=(1-(u+m))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Er.set(r[0],r[1],r[2]).length();const s=Er.set(r[4],r[5],r[6]).length(),o=Er.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Ar.copy(this);const a=1/i,l=1/s,c=1/o;return Ar.elements[0]*=a,Ar.elements[1]*=a,Ar.elements[2]*=a,Ar.elements[4]*=l,Ar.elements[5]*=l,Ar.elements[6]*=l,Ar.elements[8]*=c,Ar.elements[9]*=c,Ar.elements[10]*=c,e.setFromRotationMatrix(Ar),n.x=i,n.y=s,n.z=o,this}makePerspective(t,e,n,r,i,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*i/(e-t),l=2*i/(n-r),c=(e+t)/(e-t),h=(n+r)/(n-r),u=-(s+i)/(s-i),p=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,r,i,s){const o=this.elements,a=1/(e-t),l=1/(n-r),c=1/(s-i),h=(e+t)*a,u=(n+r)*l,p=(s+i)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}exports.Matrix4=Tr,Tr.prototype.isMatrix4=!0;const Er=new Yn,Ar=new Tr,Lr=new Yn(0,0,0),Rr=new Yn(1,1,1),Cr=new Yn,Pr=new Yn,Dr=new Yn,Ir=new Tr,Br=new Xn;class Nr{constructor(t=0,e=0,n=0,r=Nr.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const r=Fn.clamp,i=t.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],h=i[9],u=i[2],p=i[6],d=i[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Ir.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ir,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Br.setFromEuler(this),this.setFromQuaternion(Br,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Yn(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}exports.Euler=Nr,Nr.prototype.isEuler=!0,Nr.DefaultOrder="XYZ",Nr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Fr{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}exports.Layers=Fr;let Or=0;const zr=new Yn,Gr=new Xn,Hr=new Tr,Ur=new Yn,kr=new Yn,Vr=new Yn,Wr=new Xn,jr=new Yn(1,0,0),qr=new Yn(0,1,0),Xr=new Yn(0,0,1),Yr={type:"added"},Zr={type:"removed"};function Jr(){Object.defineProperty(this,"id",{value:Or++}),this.uuid=Fn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jr.DefaultUp.clone();const t=new Yn,e=new Nr,n=new Xn,r=new Yn(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tr},normalMatrix:{value:new zn}}),this.matrix=new Tr,this.matrixWorld=new Tr,this.matrixAutoUpdate=Jr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Fr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Jr.DefaultUp=new Yn(0,1,0),Jr.DefaultMatrixAutoUpdate=!0,Jr.prototype=Object.assign(Object.create(In.prototype),{constructor:Jr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Gr.setFromAxisAngle(t,e),this.quaternion.multiply(Gr),this},rotateOnWorldAxis:function(t,e){return Gr.setFromAxisAngle(t,e),this.quaternion.premultiply(Gr),this},rotateX:function(t){return this.rotateOnAxis(jr,t)},rotateY:function(t){return this.rotateOnAxis(qr,t)},rotateZ:function(t){return this.rotateOnAxis(Xr,t)},translateOnAxis:function(t,e){return zr.copy(t).applyQuaternion(this.quaternion),this.position.add(zr.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(jr,t)},translateY:function(t){return this.translateOnAxis(qr,t)},translateZ:function(t){return this.translateOnAxis(Xr,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Hr.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?Ur.copy(t):Ur.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),kr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hr.lookAt(kr,Ur,this.up):Hr.lookAt(Ur,kr,this.up),this.quaternion.setFromRotationMatrix(Hr),r&&(Hr.extractRotation(r.matrixWorld),Gr.setFromRotationMatrix(Hr),this.quaternion.premultiply(Gr.invert()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Zr)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Zr)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Hr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Hr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Hr),this.add(t),t.updateWorldMatrix(!1,!0),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Yn),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Xn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kr,t,Vr),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Yn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kr,Wr,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Yn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=s(t.geometries),r=s(t.materials),i=s(t.textures),o=s(t.images),a=s(t.shapes),l=s(t.skeletons),c=s(t.animations);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function s(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}});const Qr=new Yn,Kr=new Yn,$r=new zn;class ti{constructor(t=new Yn(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Qr.subVectors(n,e).cross(Kr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Yn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Yn);const n=t.delta(Qr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Yn),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||$r.getNormalMatrix(t),r=this.coplanarPoint(Qr).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}exports.Plane=ti,ti.prototype.isPlane=!0;const ei=new Yn,ni=new Yn,ri=new Yn,ii=new Yn,si=new Yn,oi=new Yn,ai=new Yn,li=new Yn,ci=new Yn,hi=new Yn;class ui{constructor(t=new Yn,e=new Yn,n=new Yn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Yn),r.subVectors(n,e),ei.subVectors(t,e),r.cross(ei);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){ei.subVectors(r,e),ni.subVectors(n,e),ri.subVectors(t,e);const s=ei.dot(ei),o=ei.dot(ni),a=ei.dot(ri),l=ni.dot(ni),c=ni.dot(ri),h=s*l-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Yn),0===h)return i.set(-2,-1,-1);const u=1/h,p=(l*a-o*c)*u,d=(s*c-o*a)*u;return i.set(1-p-d,d,p)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(t,e,n,r,i,s,o,a){return this.getBarycoord(t,e,n,r,ii),a.set(0,0),a.addScaledVector(i,ii.x),a.addScaledVector(s,ii.y),a.addScaledVector(o,ii.z),a}static isFrontFacing(t,e,n,r){return ei.subVectors(n,e),ni.subVectors(t,e),ei.cross(ni).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ei.subVectors(this.c,this.b),ni.subVectors(this.a,this.b),.5*ei.cross(ni).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Yn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ui.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ti),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ui.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return ui.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return ui.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ui.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Yn);const n=this.a,r=this.b,i=this.c;let s,o;si.subVectors(r,n),oi.subVectors(i,n),li.subVectors(t,n);const a=si.dot(li),l=oi.dot(li);if(a<=0&&l<=0)return e.copy(n);ci.subVectors(t,r);const c=si.dot(ci),h=oi.dot(ci);if(c>=0&&h<=c)return e.copy(r);const u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),e.copy(n).addScaledVector(si,s);hi.subVectors(t,i);const p=si.dot(hi),d=oi.dot(hi);if(d>=0&&p<=d)return e.copy(i);const m=p*l-a*d;if(m<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(oi,o);const f=c*d-p*h;if(f<=0&&h-c>=0&&p-d>=0)return ai.subVectors(i,r),o=(h-c)/(h-c+(p-d)),e.copy(r).addScaledVector(ai,o);const g=1/(f+m+u);return s=m*g,o=u*g,e.copy(n).addScaledVector(si,s).addScaledVector(oi,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}exports.Triangle=ui;let pi=0;function di(){Object.defineProperty(this,"id",{value:pi++}),this.uuid=Fn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=x,this.side=u,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=P,this.blendDst=D,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=U,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=an,this.stencilZFail=an,this.stencilZPass=an,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}di.prototype=Object.assign(Object.create(In.prototype),{constructor:di,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),this.side!==u&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(di.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});const mi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fi={h:0,s:0,l:0},gi={h:0,s:0,l:0};function xi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function vi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function yi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class _i{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Fn.euclideanModulo(t,1),e=Fn.clamp(e,0,1),n=Fn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=xi(i,r,t+1/3),this.g=xi(i,r,t),this.b=xi(i,r,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=mi[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=vi(t.r),this.g=vi(t.g),this.b=vi(t.b),this}copyLinearToSRGB(t){return this.r=yi(t.r),this.g=yi(t.g),this.b=yi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,r=this.b,i=Math.max(e,n,r),s=Math.min(e,n,r);let o,a;const l=(s+i)/2;if(s===i)o=0,a=0;else{const t=i-s;switch(a=l<=.5?t/(i+s):t/(2-i-s),i){case e:o=(n-r)/t+(n<r?6:0);break;case n:o=(r-e)/t+2;break;case r:o=(e-n)/t+4}o/=6}return t.h=o,t.s=a,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(fi),fi.h+=t,fi.s+=e,fi.l+=n,this.setHSL(fi.h,fi.s,fi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(fi),t.getHSL(gi);const n=Fn.lerp(fi.h,gi.h,e),r=Fn.lerp(fi.s,gi.s,e),i=Fn.lerp(fi.l,gi.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}exports.Color=_i,_i.NAMES=mi,_i.prototype.isColor=!0,_i.prototype.r=1,_i.prototype.g=1,_i.prototype.b=1;class bi extends di{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new _i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this}}exports.MeshBasicMaterial=bi,bi.prototype.isMeshBasicMaterial=!0;const wi=new Yn,Mi=new On;function Si(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=wn,this.updateRange={offset:0,count:-1},this.version=0}function Ti(t,e,n){Si.call(this,new Int8Array(t),e,n)}function Ei(t,e,n){Si.call(this,new Uint8Array(t),e,n)}function Ai(t,e,n){Si.call(this,new Uint8ClampedArray(t),e,n)}function Li(t,e,n){Si.call(this,new Int16Array(t),e,n)}function Ri(t,e,n){Si.call(this,new Uint16Array(t),e,n)}function Ci(t,e,n){Si.call(this,new Int32Array(t),e,n)}function Pi(t,e,n){Si.call(this,new Uint32Array(t),e,n)}function Di(t,e,n){Si.call(this,new Uint16Array(t),e,n)}function Ii(t,e,n){Si.call(this,new Float32Array(t),e,n)}function Bi(t,e,n){Si.call(this,new Float64Array(t),e,n)}function Ni(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Object.defineProperty(Si.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Si.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new _i),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new On),e[n++]=i.x,e[n++]=i.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Yn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Wn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Mi.fromBufferAttribute(this,e),Mi.applyMatrix3(t),this.setXY(e,Mi.x,Mi.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)wi.fromBufferAttribute(this,e),wi.applyMatrix3(t),this.setXYZ(e,wi.x,wi.y,wi.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)wi.x=this.getX(e),wi.y=this.getY(e),wi.z=this.getZ(e),wi.applyMatrix4(t),this.setXYZ(e,wi.x,wi.y,wi.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)wi.x=this.getX(e),wi.y=this.getY(e),wi.z=this.getZ(e),wi.applyNormalMatrix(t),this.setXYZ(e,wi.x,wi.y,wi.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)wi.x=this.getX(e),wi.y=this.getY(e),wi.z=this.getZ(e),wi.transformDirection(t),this.setXYZ(e,wi.x,wi.y,wi.z);return this},set:function(t,e=0){return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==wn&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}),Ti.prototype=Object.create(Si.prototype),Ti.prototype.constructor=Ti,Ei.prototype=Object.create(Si.prototype),Ei.prototype.constructor=Ei,Ai.prototype=Object.create(Si.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(Si.prototype),Li.prototype.constructor=Li,Ri.prototype=Object.create(Si.prototype),Ri.prototype.constructor=Ri,Ci.prototype=Object.create(Si.prototype),Ci.prototype.constructor=Ci,Pi.prototype=Object.create(Si.prototype),Pi.prototype.constructor=Pi,Di.prototype=Object.create(Si.prototype),Di.prototype.constructor=Di,Di.prototype.isFloat16BufferAttribute=!0,Ii.prototype=Object.create(Si.prototype),Ii.prototype.constructor=Ii,Bi.prototype=Object.create(Si.prototype),Bi.prototype.constructor=Bi;const Fi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Oi(t,e){return new Fi[t](e)}let zi=0;const Gi=new Tr,Hi=new Jr,Ui=new Yn,ki=new Qn,Vi=new Qn,Wi=new Yn;function ji(){Object.defineProperty(this,"id",{value:zi++}),this.uuid=Fn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ji.prototype=Object.assign(Object.create(In.prototype),{constructor:ji,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Ni(t)>65535?Pi:Ri)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new zn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Gi.makeRotationX(t),this.applyMatrix4(Gi),this},rotateY:function(t){return Gi.makeRotationY(t),this.applyMatrix4(Gi),this},rotateZ:function(t){return Gi.makeRotationZ(t),this.applyMatrix4(Gi),this},translate:function(t,e,n){return Gi.makeTranslation(t,e,n),this.applyMatrix4(Gi),this},scale:function(t,e,n){return Gi.makeScale(t,e,n),this.applyMatrix4(Gi),this},lookAt:function(t){return Hi.lookAt(t),Hi.updateMatrix(),this.applyMatrix4(Hi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ui).negate(),this.translate(Ui.x,Ui.y,Ui.z),this},setFromPoints:function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ii(e,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Qn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Yn(-1/0,-1/0,-1/0),new Yn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];ki.setFromBufferAttribute(t),this.morphTargetsRelative?(Wi.addVectors(this.boundingBox.min,ki.min),this.boundingBox.expandByPoint(Wi),Wi.addVectors(this.boundingBox.max,ki.max),this.boundingBox.expandByPoint(Wi)):(this.boundingBox.expandByPoint(ki.min),this.boundingBox.expandByPoint(ki.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Yn,1/0);if(t){const n=this.boundingSphere.center;if(ki.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];Vi.setFromBufferAttribute(n),this.morphTargetsRelative?(Wi.addVectors(ki.min,Vi.min),ki.expandByPoint(Wi),Wi.addVectors(ki.max,Vi.max),ki.expandByPoint(Wi)):(ki.expandByPoint(Vi.min),ki.expandByPoint(Vi.max))}ki.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Wi.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Wi));if(e)for(let i=0,s=e.length;i<s;i++){const s=e[i],o=this.morphTargetsRelative;for(let e=0,i=s.count;e<i;e++)Wi.fromBufferAttribute(s,e),o&&(Ui.fromBufferAttribute(t,e),Wi.add(Ui)),r=Math.max(r,n.distanceToSquared(Wi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,s=e.uv.array,o=r.length/3;void 0===e.tangent&&this.setAttribute("tangent",new Si(new Float32Array(4*o),4));const a=e.tangent.array,l=[],c=[];for(let T=0;T<o;T++)l[T]=new Yn,c[T]=new Yn;const h=new Yn,u=new Yn,p=new Yn,d=new On,m=new On,f=new On,g=new Yn,x=new Yn;function v(t,e,n){h.fromArray(r,3*t),u.fromArray(r,3*e),p.fromArray(r,3*n),d.fromArray(s,2*t),m.fromArray(s,2*e),f.fromArray(s,2*n),u.sub(h),p.sub(h),m.sub(d),f.sub(d);const i=1/(m.x*f.y-f.x*m.y);isFinite(i)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(p,-m.y).multiplyScalar(i),x.copy(p).multiplyScalar(m.x).addScaledVector(u,-f.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(x),c[e].add(x),c[n].add(x))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let T=0,E=y.length;T<E;++T){const t=y[T],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)v(n[r+0],n[r+1],n[r+2])}const _=new Yn,b=new Yn,w=new Yn,M=new Yn;function S(t){w.fromArray(i,3*t),M.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),b.crossVectors(M,e);const n=b.dot(c[t])<0?-1:1;a[4*t]=_.x,a[4*t+1]=_.y,a[4*t+2]=_.z,a[4*t+3]=n}for(let T=0,E=y.length;T<E;++T){const t=y[T],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)S(n[r+0]),S(n[r+1]),S(n[r+2])}},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Si(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Yn,i=new Yn,s=new Yn,o=new Yn,a=new Yn,l=new Yn,c=new Yn,h=new Yn;if(t)for(let u=0,p=t.count;u<p;u+=3){const p=t.getX(u+0),d=t.getX(u+1),m=t.getX(u+2);r.fromBufferAttribute(e,p),i.fromBufferAttribute(e,d),s.fromBufferAttribute(e,m),c.subVectors(s,i),h.subVectors(r,i),c.cross(h),o.fromBufferAttribute(n,p),a.fromBufferAttribute(n,d),l.fromBufferAttribute(n,m),o.add(c),a.add(c),l.add(c),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,u=e.count;t<u;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),c.subVectors(s,i),h.subVectors(r,i),c.cross(h),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,s=t.attributes[r],o=s.array,a=s.itemSize*e,l=Math.min(o.length,i.length-a);for(let t=0,e=a;t<l;t++,e++)i[e]=o[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Wi.fromBufferAttribute(t,e),Wi.normalize(),t.setXYZ(e,Wi.x,Wi.y,Wi.z)},toNonIndexed:function(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,s=new n.constructor(e.length*r);let o=0,a=0;for(let l=0,c=e.length;l<c;l++){o=e[l]*r;for(let t=0;t<r;t++)s[a++]=n[o++]}return new Si(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ji,n=this.index.array,r=this.attributes;for(const o in r){const i=t(r[o],n);e.setAttribute(o,i)}const i=this.morphAttributes;for(const o in i){const r=[],s=i[o];for(let e=0,i=s.length;e<i;e++){const i=t(s[e],n);r.push(i)}e.morphAttributes[o]=r}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const t=s[o];e.addGroup(t.start,t.count,t.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const r={};let i=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[a]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t},clone:function(){return(new ji).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let l=0,c=s.length;l<c;l++){const t=s[l];this.addGroup(t.start,t.count,t.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const qi=new Tr,Xi=new Sr,Yi=new gr,Zi=new Yn,Ji=new Yn,Qi=new Yn,Ki=new Yn,$i=new Yn,ts=new Yn,es=new Yn,ns=new Yn,rs=new Yn,is=new On,ss=new On,os=new On,as=new Yn,ls=new Yn;function cs(t=new ji,e=new bi){Jr.call(this),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}function hs(t,e,n,r,i,s,o,a){let l;if(null===(l=e.side===p?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,e.side!==d,a)))return null;ls.copy(a),ls.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(ls);return c<n.near||c>n.far?null:{distance:c,point:ls.clone(),object:t}}function us(t,e,n,r,i,s,o,a,l,c,h,u){Zi.fromBufferAttribute(i,c),Ji.fromBufferAttribute(i,h),Qi.fromBufferAttribute(i,u);const p=t.morphTargetInfluences;if(e.morphTargets&&s&&p){es.set(0,0,0),ns.set(0,0,0),rs.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const e=p[t],n=s[t];0!==e&&(Ki.fromBufferAttribute(n,c),$i.fromBufferAttribute(n,h),ts.fromBufferAttribute(n,u),o?(es.addScaledVector(Ki,e),ns.addScaledVector($i,e),rs.addScaledVector(ts,e)):(es.addScaledVector(Ki.sub(Zi),e),ns.addScaledVector($i.sub(Ji),e),rs.addScaledVector(ts.sub(Qi),e)))}Zi.add(es),Ji.add(ns),Qi.add(rs)}t.isSkinnedMesh&&e.skinning&&(t.boneTransform(c,Zi),t.boneTransform(h,Ji),t.boneTransform(u,Qi));const d=hs(t,e,n,r,Zi,Ji,Qi,as);if(d){a&&(is.fromBufferAttribute(a,c),ss.fromBufferAttribute(a,h),os.fromBufferAttribute(a,u),d.uv=ui.getUV(as,Zi,Ji,Qi,is,ss,os,new On)),l&&(is.fromBufferAttribute(l,c),ss.fromBufferAttribute(l,h),os.fromBufferAttribute(l,u),d.uv2=ui.getUV(as,Zi,Ji,Qi,is,ss,os,new On));const t={a:c,b:h,c:u,normal:new Yn,materialIndex:0};ui.getNormal(Zi,Ji,Qi,t.normal),d.face=t}return d}cs.prototype=Object.assign(Object.create(Jr.prototype),{constructor:cs,isMesh:!0,copy:function(t){return Jr.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Yi.copy(n.boundingSphere),Yi.applyMatrix4(i),!1===t.ray.intersectsSphere(Yi))return;if(qi.copy(i).invert(),Xi.copy(t.ray).applyMatrix4(qi),null!==n.boundingBox&&!1===Xi.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,u=n.groups,p=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,d=u.length;n<d;n++){const d=u[n],m=r[d.materialIndex];for(let n=Math.max(d.start,p.start),r=Math.min(d.start+d.count,p.start+p.count);n<r;n+=3){const r=i.getX(n),u=i.getX(n+1),p=i.getX(n+2);(s=us(this,m,t,Xi,o,a,l,c,h,r,u,p))&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=d.materialIndex,e.push(s))}}else{for(let n=Math.max(0,p.start),u=Math.min(i.count,p.start+p.count);n<u;n+=3){const u=i.getX(n),p=i.getX(n+1),d=i.getX(n+2);(s=us(this,r,t,Xi,o,a,l,c,h,u,p,d))&&(s.faceIndex=Math.floor(n/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(r))for(let n=0,d=u.length;n<d;n++){const i=u[n],d=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(i.start+i.count,p.start+p.count);n<r;n+=3){(s=us(this,d,t,Xi,o,a,l,c,h,n,n+1,n+2))&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=i.materialIndex,e.push(s))}}else{for(let n=Math.max(0,p.start),i=Math.min(o.count,p.start+p.count);n<i;n+=3){(s=us(this,r,t,Xi,o,a,l,c,h,n,n+1,n+2))&&(s.faceIndex=Math.floor(n/3),e.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class ps extends ji{constructor(t=1,e=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],h=[];let u=0,p=0;function d(t,e,n,r,i,s,d,m,f,g,x){const v=s/f,y=d/g,_=s/2,b=d/2,w=m/2,M=f+1,S=g+1;let T=0,E=0;const A=new Yn;for(let o=0;o<S;o++){const s=o*y-b;for(let a=0;a<M;a++){const u=a*v-_;A[t]=u*r,A[e]=s*i,A[n]=w,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=m>0?1:-1,c.push(A.x,A.y,A.z),h.push(a/f),h.push(1-o/g),T+=1}}for(let o=0;o<g;o++)for(let t=0;t<f;t++){const e=u+t+M*o,n=u+t+M*(o+1),r=u+(t+1)+M*(o+1),i=u+(t+1)+M*o;a.push(e,n,i),a.push(n,r,i),E+=6}o.addGroup(p,E,x),p+=E,u+=T}d("z","y","x",-1,-1,n,e,t,s,i,0),d("z","y","x",1,-1,n,e,-t,s,i,1),d("x","z","y",1,1,t,n,e,r,s,2),d("x","z","y",1,-1,t,n,-e,r,s,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Ii(l,3)),this.setAttribute("normal",new Ii(c,3)),this.setAttribute("uv",new Ii(h,2))}}function ds(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ms(t){const e={};for(let n=0;n<t.length;n++){const r=ds(t[n]);for(const t in r)e[t]=r[t]}return e}exports.BoxGeometry=exports.BoxBufferGeometry=ps;const fs={clone:ds,merge:ms};exports.UniformsUtils=fs;var gs="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",xs="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function vs(t){di.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=gs,this.fragmentShader=xs,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function ys(){Jr.call(this),this.type="Camera",this.matrixWorldInverse=new Tr,this.projectionMatrix=new Tr,this.projectionMatrixInverse=new Tr}function _s(t=50,e=1,n=.1,r=2e3){ys.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}vs.prototype=Object.create(di.prototype),vs.prototype.constructor=vs,vs.prototype.isShaderMaterial=!0,vs.prototype.copy=function(t){return di.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ds(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},vs.prototype.toJSON=function(t){const e=di.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e},ys.prototype=Object.assign(Object.create(Jr.prototype),{constructor:ys,isCamera:!0,copy:function(t,e){return Jr.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Yn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Jr.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){Jr.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),_s.prototype=Object.assign(Object.create(ys.prototype),{constructor:_s,isPerspectiveCamera:!0,copy:function(t,e){return ys.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Fn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*Fn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Fn.RAD2DEG*Math.atan(Math.tan(.5*Fn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*Fn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;i+=s.offsetX*r/t,e-=s.offsetY*n/o,r*=s.width/t,n*=s.height/o}const o=this.filmOffset;0!==o&&(i+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const bs=90,ws=1;class Ms extends Jr{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new _s(bs,ws,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Yn(1,0,0)),this.add(r);const i=new _s(bs,ws,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Yn(-1,0,0)),this.add(i);const s=new _s(bs,ws,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Yn(0,1,0)),this.add(s);const o=new _s(bs,ws,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Yn(0,-1,0)),this.add(o);const a=new _s(bs,ws,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Yn(0,0,1)),this.add(a);const l=new _s(bs,ws,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Yn(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,o,a,l]=this.children,c=t.xr.enabled,h=t.getRenderTarget();t.xr.enabled=!1;const u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=u,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(h),t.xr.enabled=c}}exports.CubeCamera=Ms;class Ss extends kn{constructor(t,e,n,r,i,s,o,a,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:nt,n,r,i,s,o=void 0!==o?o:Bt,a,l,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}exports.CubeTexture=Ss,Ss.prototype.isCubeTexture=!0;class Ts extends jn{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new Ss(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:gt,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=Nt,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new ps(5,5,5),i=new vs({name:"CubemapFromEquirect",uniforms:ds(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:p,blending:g});i.uniforms.tEquirect.value=e;const s=new cs(r,i),o=e.minFilter;return e.minFilter===yt&&(e.minFilter=gt),new Ms(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,r);t.setRenderTarget(i)}}exports.WebGLCubeRenderTarget=Ts,Ts.prototype.isWebGLCubeRenderTarget=!0;class Es extends kn{constructor(t,e,n,r,i,s,o,a,l,c,h,u){super(null,s,o,a,l,c,r,i,h,u),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:ut,this.minFilter=void 0!==c?c:ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}exports.DataTexture=Es,Es.prototype.isDataTexture=!0;const As=new gr,Ls=new Yn;class Rs{constructor(t=new ti,e=new ti,n=new ti,r=new ti,i=new ti,s=new ti){this.planes=[t,e,n,r,i,s]}set(t,e,n,r,i,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],p=n[9],d=n[10],m=n[11],f=n[12],g=n[13],x=n[14],v=n[15];return e[0].setComponents(o-r,h-a,m-u,v-f).normalize(),e[1].setComponents(o+r,h+a,m+u,v+f).normalize(),e[2].setComponents(o+i,h+l,m+p,v+g).normalize(),e[3].setComponents(o-i,h-l,m-p,v-g).normalize(),e[4].setComponents(o-s,h-c,m-d,v-x).normalize(),e[5].setComponents(o+s,h+c,m+d,v+x).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),As.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(As)}intersectsSprite(t){return As.center.set(0,0,0),As.radius=.7071067811865476,As.applyMatrix4(t.matrixWorld),this.intersectsSphere(As)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Ls.x=r.normal.x>0?t.max.x:t.min.x,Ls.y=r.normal.y>0?t.max.y:t.min.y,Ls.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ls)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Cs(){let t=null,e=!1,n=null,r=null;function i(e,s){n(e,s),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Ps(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=r.get(e);void 0===s?r.set(e,function(e,r){const i=e.array,s=e.usage,o=t.createBuffer();t.bindBuffer(r,o),t.bufferData(r,i,s),e.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):s.version<e.version&&(function(e,r,i){const s=r.array,o=r.updateRange;t.bindBuffer(i,e),-1===o.count?t.bufferSubData(i,0,s):(n?t.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):t.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,e,i),s.version=e.version)}}}exports.Frustum=Rs;class Ds extends ji{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,s=e/2,o=Math.floor(n),a=Math.floor(r),l=o+1,c=a+1,h=t/o,u=e/a,p=[],d=[],m=[],f=[];for(let g=0;g<c;g++){const t=g*u-s;for(let e=0;e<l;e++){const n=e*h-i;d.push(n,-t,0),m.push(0,0,1),f.push(e/o),f.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<o;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;p.push(e,n,i),p.push(n,r,i)}this.setIndex(p),this.setAttribute("position",new Ii(d,3)),this.setAttribute("normal",new Ii(m,3)),this.setAttribute("uv",new Ii(f,2))}}exports.PlaneGeometry=exports.PlaneBufferGeometry=Ds;var Is="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Bs="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Ns="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",Fs="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",Os="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",zs="vec3 transformed = vec3( position );",Gs="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Hs="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",Us="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",ks="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Vs="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Ws="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",js="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",qs="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Xs="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Ys="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Zs="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Js="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Qs="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Ks="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",$s="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",to="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",eo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",no="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",ro="gl_FragColor = linearToOutputTexel( gl_FragColor );",io="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",so="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",oo="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",ao="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",lo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",co="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ho="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",uo="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",po="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",mo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",fo="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",go="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",xo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",vo="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",yo="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",_o="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",bo="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",wo="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Mo="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",So="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",To="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",Eo="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Ao="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",Lo="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",Ro="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Co="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Po="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Do="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Io="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Bo="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",No="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Fo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Oo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",zo="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Go="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ho="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",Uo="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",ko="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",Vo="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Wo="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",jo="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",qo="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Xo="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",Yo="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Zo="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Jo="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Qo="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Ko="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",$o="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",ta="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",ea="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",na="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ra="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",ia="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",sa="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",oa="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",aa="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",la="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",ca="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",ha="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ua="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",pa="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",da="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ma="#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",fa="#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",ga="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",xa="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",va="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",ya="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",_a="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",ba="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",wa="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Ma="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Sa="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ta="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ea="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Aa="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",La="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Ra="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Ca="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Pa="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Da="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Ia="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ba="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Na="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fa="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Oa="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",za="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ga="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ha="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ua="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ka="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Va="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Wa="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ja="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",qa="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Xa="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",Ya="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Za="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ja="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Qa="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ka="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",$a="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",tl="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";const el={alphamap_fragment:Is,alphamap_pars_fragment:Bs,alphatest_fragment:Ns,aomap_fragment:Fs,aomap_pars_fragment:Os,begin_vertex:zs,beginnormal_vertex:Gs,bsdfs:Hs,bumpmap_pars_fragment:Us,clipping_planes_fragment:ks,clipping_planes_pars_fragment:Vs,clipping_planes_pars_vertex:Ws,clipping_planes_vertex:js,color_fragment:qs,color_pars_fragment:Xs,color_pars_vertex:Ys,color_vertex:Zs,common:Js,cube_uv_reflection_fragment:Qs,defaultnormal_vertex:Ks,displacementmap_pars_vertex:$s,displacementmap_vertex:to,emissivemap_fragment:eo,emissivemap_pars_fragment:no,encodings_fragment:ro,encodings_pars_fragment:io,envmap_fragment:so,envmap_common_pars_fragment:oo,envmap_pars_fragment:ao,envmap_pars_vertex:lo,envmap_physical_pars_fragment:_o,envmap_vertex:co,fog_vertex:ho,fog_pars_vertex:uo,fog_fragment:po,fog_pars_fragment:mo,gradientmap_pars_fragment:fo,lightmap_fragment:go,lightmap_pars_fragment:xo,lights_lambert_vertex:vo,lights_pars_begin:yo,lights_toon_fragment:bo,lights_toon_pars_fragment:wo,lights_phong_fragment:Mo,lights_phong_pars_fragment:So,lights_physical_fragment:To,lights_physical_pars_fragment:Eo,lights_fragment_begin:Ao,lights_fragment_maps:Lo,lights_fragment_end:Ro,logdepthbuf_fragment:Co,logdepthbuf_pars_fragment:Po,logdepthbuf_pars_vertex:Do,logdepthbuf_vertex:Io,map_fragment:Bo,map_pars_fragment:No,map_particle_fragment:Fo,map_particle_pars_fragment:Oo,metalnessmap_fragment:zo,metalnessmap_pars_fragment:Go,morphnormal_vertex:Ho,morphtarget_pars_vertex:Uo,morphtarget_vertex:ko,normal_fragment_begin:Vo,normal_fragment_maps:Wo,normalmap_pars_fragment:jo,clearcoat_normal_fragment_begin:qo,clearcoat_normal_fragment_maps:Xo,clearcoat_pars_fragment:Yo,packing:Zo,premultiplied_alpha_fragment:Jo,project_vertex:Qo,dithering_fragment:Ko,dithering_pars_fragment:$o,roughnessmap_fragment:ta,roughnessmap_pars_fragment:ea,shadowmap_pars_fragment:na,shadowmap_pars_vertex:ra,shadowmap_vertex:ia,shadowmask_pars_fragment:sa,skinbase_vertex:oa,skinning_pars_vertex:aa,skinning_vertex:la,skinnormal_vertex:ca,specularmap_fragment:ha,specularmap_pars_fragment:ua,tonemapping_fragment:pa,tonemapping_pars_fragment:da,transmissionmap_fragment:ma,transmissionmap_pars_fragment:fa,uv_pars_fragment:ga,uv_pars_vertex:xa,uv_vertex:va,uv2_pars_fragment:ya,uv2_pars_vertex:_a,uv2_vertex:ba,worldpos_vertex:wa,background_frag:Ma,background_vert:Sa,cube_frag:Ta,cube_vert:Ea,depth_frag:Aa,depth_vert:La,distanceRGBA_frag:Ra,distanceRGBA_vert:Ca,equirect_frag:Pa,equirect_vert:Da,linedashed_frag:Ia,linedashed_vert:Ba,meshbasic_frag:Na,meshbasic_vert:Fa,meshlambert_frag:Oa,meshlambert_vert:za,meshmatcap_frag:Ga,meshmatcap_vert:Ha,meshtoon_frag:Ua,meshtoon_vert:ka,meshphong_frag:Va,meshphong_vert:Wa,meshphysical_frag:ja,meshphysical_vert:qa,normal_frag:Xa,normal_vert:Ya,points_frag:Za,points_vert:Ja,shadow_frag:Qa,shadow_vert:Ka,sprite_frag:$a,sprite_vert:tl};exports.ShaderChunk=el;const nl={common:{diffuse:{value:new _i(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new zn},uv2Transform:{value:new zn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new On(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _i(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _i(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new zn}},sprite:{diffuse:{value:new _i(15658734)},opacity:{value:1},center:{value:new On(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new zn}}};exports.UniformsLib=nl;const rl={basic:{uniforms:ms([nl.common,nl.specularmap,nl.envmap,nl.aomap,nl.lightmap,nl.fog]),vertexShader:el.meshbasic_vert,fragmentShader:el.meshbasic_frag},lambert:{uniforms:ms([nl.common,nl.specularmap,nl.envmap,nl.aomap,nl.lightmap,nl.emissivemap,nl.fog,nl.lights,{emissive:{value:new _i(0)}}]),vertexShader:el.meshlambert_vert,fragmentShader:el.meshlambert_frag},phong:{uniforms:ms([nl.common,nl.specularmap,nl.envmap,nl.aomap,nl.lightmap,nl.emissivemap,nl.bumpmap,nl.normalmap,nl.displacementmap,nl.fog,nl.lights,{emissive:{value:new _i(0)},specular:{value:new _i(1118481)},shininess:{value:30}}]),vertexShader:el.meshphong_vert,fragmentShader:el.meshphong_frag},standard:{uniforms:ms([nl.common,nl.envmap,nl.aomap,nl.lightmap,nl.emissivemap,nl.bumpmap,nl.normalmap,nl.displacementmap,nl.roughnessmap,nl.metalnessmap,nl.fog,nl.lights,{emissive:{value:new _i(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:el.meshphysical_vert,fragmentShader:el.meshphysical_frag},toon:{uniforms:ms([nl.common,nl.aomap,nl.lightmap,nl.emissivemap,nl.bumpmap,nl.normalmap,nl.displacementmap,nl.gradientmap,nl.fog,nl.lights,{emissive:{value:new _i(0)}}]),vertexShader:el.meshtoon_vert,fragmentShader:el.meshtoon_frag},matcap:{uniforms:ms([nl.common,nl.bumpmap,nl.normalmap,nl.displacementmap,nl.fog,{matcap:{value:null}}]),vertexShader:el.meshmatcap_vert,fragmentShader:el.meshmatcap_frag},points:{uniforms:ms([nl.points,nl.fog]),vertexShader:el.points_vert,fragmentShader:el.points_frag},dashed:{uniforms:ms([nl.common,nl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:el.linedashed_vert,fragmentShader:el.linedashed_frag},depth:{uniforms:ms([nl.common,nl.displacementmap]),vertexShader:el.depth_vert,fragmentShader:el.depth_frag},normal:{uniforms:ms([nl.common,nl.bumpmap,nl.normalmap,nl.displacementmap,{opacity:{value:1}}]),vertexShader:el.normal_vert,fragmentShader:el.normal_frag},sprite:{uniforms:ms([nl.sprite,nl.fog]),vertexShader:el.sprite_vert,fragmentShader:el.sprite_frag},background:{uniforms:{uvTransform:{value:new zn},t2D:{value:null}},vertexShader:el.background_vert,fragmentShader:el.background_frag},cube:{uniforms:ms([nl.envmap,{opacity:{value:1}}]),vertexShader:el.cube_vert,fragmentShader:el.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:el.equirect_vert,fragmentShader:el.equirect_frag},distanceRGBA:{uniforms:ms([nl.common,nl.displacementmap,{referencePosition:{value:new Yn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:el.distanceRGBA_vert,fragmentShader:el.distanceRGBA_frag},shadow:{uniforms:ms([nl.lights,nl.fog,{color:{value:new _i(0)},opacity:{value:1}}]),vertexShader:el.shadow_vert,fragmentShader:el.shadow_frag}};function il(t,e,n,r,i){const s=new _i(0);let o,a,l=0,c=null,h=0,d=null;function m(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return s},setClearColor:function(t,e=1){s.set(t),m(s,l=e)},getClearAlpha:function(){return l},setClearAlpha:function(t){m(s,l=t)},render:function(n,i,f,g){let x=!0===i.isScene?i.background:null;x&&x.isTexture&&(x=e.get(x));const v=t.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(x=null),null===x?m(s,l):x&&x.isColor&&(m(x,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===ot)?(void 0===a&&((a=new cs(new ps(1,1,1),new vs({name:"BackgroundCubeMaterial",uniforms:ds(rl.cube.uniforms),vertexShader:rl.cube.vertexShader,fragmentShader:rl.cube.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),a.material.uniforms.envMap.value=x,a.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x._needsFlipEnvMap?-1:1,c===x&&h===x.version&&d===t.toneMapping||(a.material.needsUpdate=!0,c=x,h=x.version,d=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):x&&x.isTexture&&(void 0===o&&((o=new cs(new Ds(2,2),new vs({name:"BackgroundMaterial",uniforms:ds(rl.background.uniforms),vertexShader:rl.background.vertexShader,fragmentShader:rl.background.fragmentShader,side:u,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=x,!0===x.matrixAutoUpdate&&x.updateMatrix(),o.material.uniforms.uvTransform.value.copy(x.matrix),c===x&&h===x.version&&d===t.toneMapping||(o.material.needsUpdate=!0,c=x,h=x.version,d=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function sl(t,e,n,r){const i=t.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},l=p(null);let c=l;function h(e){return r.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function u(e){return r.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],n=[],r=[];for(let s=0;s<i;s++)e[s]=0,n[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function d(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){f(t,0)}function f(n,i){const s=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;if(s[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),a[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function g(){const e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function x(e,n,i,s,o,a){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,s,o,a):t.vertexAttribIPointer(e,n,i,o,a)}function v(){y(),c!==l&&h((c=l).object)}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,u,v,y){let _=!1;if(o){const e=function(e,n,i){const o=!0===i.wireframe;let l=a[e.id];void 0===l&&(l={},a[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let h=c[o];return void 0===h&&(h=p(r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),c[o]=h),h}(v,u,l);c!==e&&h((c=e).object),(_=function(t,e){const n=c.attributes,r=t.attributes;let i=0;for(const s in r){const t=n[s],e=r[s];if(void 0===t)return!0;if(t.attribute!==e)return!0;if(t.data!==e.data)return!0;i++}return c.attributesNum!==i||c.index!==e}(v,y))&&function(t,e){const n={},r=t.attributes;let i=0;for(const s in r){const t=r[s],e={};e.attribute=t,t.data&&(e.data=t.data),n[s]=e,i++}c.attributes=n,c.attributesNum=i,c.index=e}(v,y)}else{const t=!0===l.wireframe;c.geometry===v.id&&c.program===u.id&&c.wireframe===t||(c.geometry=v.id,c.program=u.id,c.wireframe=t,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==y&&n.update(y,34963),_&&(function(i,s,o,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=a.attributes,c=o.getAttributes(),h=s.defaultAttributeValues;for(const e in c){const r=c[e];if(r>=0){const s=l[e];if(void 0!==s){const e=s.normalized,i=s.itemSize,o=n.get(s);if(void 0===o)continue;const l=o.buffer,c=o.type,h=o.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,o=n.stride,u=s.offset;n&&n.isInstancedInterleavedBuffer?(f(r,n.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)):m(r),t.bindBuffer(34962,l),x(r,i,c,e,o*h,u*h)}else s.isInstancedBufferAttribute?(f(r,s.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)):m(r),t.bindBuffer(34962,l),x(r,i,c,e,0,0)}else if("instanceMatrix"===e){const e=n.get(i.instanceMatrix);if(void 0===e)continue;const s=e.buffer,o=e.type;f(r+0,1),f(r+1,1),f(r+2,1),f(r+3,1),t.bindBuffer(34962,s),t.vertexAttribPointer(r+0,4,o,!1,64,0),t.vertexAttribPointer(r+1,4,o,!1,64,16),t.vertexAttribPointer(r+2,4,o,!1,64,32),t.vertexAttribPointer(r+3,4,o,!1,64,48)}else if("instanceColor"===e){const e=n.get(i.instanceColor);if(void 0===e)continue;const s=e.buffer,o=e.type;f(r,1),t.bindBuffer(34962,s),t.vertexAttribPointer(r,3,o,!1,12,0)}else if(void 0!==h){const n=h[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:t.vertexAttrib1fv(r,n)}}}}g()}(i,l,u,v),null!==y&&t.bindBuffer(34963,n.get(y).buffer))},reset:v,resetDefaultState:y,dispose:function(){v();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)u(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)u(t[e].object),delete t[e];delete e[n]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)u(r[t].object),delete r[t];delete n[t.id]}},initAttributes:d,enableAttribute:m,disableUnusedAttributes:g}}function ol(t,e,n,r){const i=r.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,r){t.drawArrays(s,e,r),n.update(r,s,1)},this.renderInstances=function(r,o,a){if(0===a)return;let l,c;if(i)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,r,o,a),n.update(o,s,a)}}function al(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),u=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),m=t.getParameter(36347),f=t.getParameter(36348),g=t.getParameter(36349),x=h>0,v=s||e.has("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:m,maxVaryings:f,maxFragmentUniforms:g,vertexTextures:x,floatFragmentTextures:v,floatVertexTextures:x&&v,maxSamples:s?t.getParameter(36183):0}}function ll(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new ti,a=new zn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(t,n,r,i){const s=null!==t?t.length:0;let c=null;if(0!==s){if(c=l.value,!0!==i||null===c){const e=r+4*s,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=r;n!==s;++n,l+=4)o.copy(t[n]).applyMatrix4(i,a),o.normal.toArray(c,l),c[l+3]=o.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const o=0!==t.length||e||0!==r||i;return i=e,n=h(t,s,0),r=t.length,o},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(e,o,a){const u=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,m=t.get(e);if(!i||null===u||0===u.length||s&&!d)s?h(null):c();else{const t=s?0:r,e=4*t;let i=m.clippingState||null;l.value=i,i=h(u,o,e,a);for(let r=0;r!==e;++r)i[r]=n[r];m.clippingState=i,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}}}function cl(t){let e=new WeakMap;function n(t,e){return e===it?t.mapping=nt:e===st&&(t.mapping=rt),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping;if(s===it||s===st){if(e.has(i))return n(e.get(i).texture,i.mapping);{const s=i.image;if(s&&s.height>0){const o=t.getRenderTarget(),a=new Ts(s.height/2);return a.fromEquirectangularTexture(t,i),e.set(i,a),t.setRenderTarget(o),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}function hl(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ul(t,e,n,r){const i={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);a.removeEventListener("dispose",o),delete i[a.id];const l=s.get(a);l&&(e.remove(l),s.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],r=t.index,i=t.attributes.position;let o=0;if(null!==r){const t=r.array;o=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],s=t[e+2];n.push(r,i,i,s,s,r)}}else{const t=i.array;o=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const a=new(Ni(n)>65535?Pi:Ri)(n,1);a.version=o;const l=s.get(t);l&&e.remove(l),s.set(t,a)}return{get:function(t,e){return!0===i[e.id]?e:(e.addEventListener("dispose",o),i[e.id]=!0,n.memory.geometries++,e)},update:function(t){const n=t.attributes;for(const i in n)e.update(n[i],34962);const r=t.morphAttributes;for(const i in r){const t=r[i];for(let n=0,r=t.length;n<r;n++)e.update(t[n],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function pl(t,e,n,r){const i=r.isWebGL2;let s,o,a;this.setMode=function(t){s=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(s,r,o,e*a),n.update(r,s,1)},this.renderInstances=function(r,l,c){if(0===c)return;let h,u;if(i)h=t,u="drawElementsInstanced";else if(u="drawElementsInstancedANGLE",null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](s,l,o,r*a,c),n.update(l,s,c)}}function dl(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ml(t,e){return t[0]-e[0]}function fl(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gl(t){const e={},n=new Float32Array(8),r=[];for(let i=0;i<8;i++)r[i]=[i,0];return{update:function(i,s,o,a){const l=i.morphTargetInfluences,c=void 0===l?0:l.length;let h=e[s.id];if(void 0===h){h=[];for(let t=0;t<c;t++)h[t]=[t,0];e[s.id]=h}for(let t=0;t<c;t++){const e=h[t];e[0]=t,e[1]=l[t]}h.sort(fl);for(let t=0;t<8;t++)t<c&&h[t][1]?(r[t][0]=h[t][0],r[t][1]=h[t][1]):(r[t][0]=Number.MAX_SAFE_INTEGER,r[t][1]=0);r.sort(ml);const u=o.morphTargets&&s.morphAttributes.position,p=o.morphNormals&&s.morphAttributes.normal;let d=0;for(let t=0;t<8;t++){const e=r[t],i=e[0],o=e[1];i!==Number.MAX_SAFE_INTEGER&&o?(u&&s.getAttribute("morphTarget"+t)!==u[i]&&s.setAttribute("morphTarget"+t,u[i]),p&&s.getAttribute("morphNormal"+t)!==p[i]&&s.setAttribute("morphNormal"+t,p[i]),n[t]=o,d+=o):(u&&!0===s.hasAttribute("morphTarget"+t)&&s.deleteAttribute("morphTarget"+t),p&&!0===s.hasAttribute("morphNormal"+t)&&s.deleteAttribute("morphNormal"+t),n[t]=0)}const m=s.morphTargetsRelative?1:1-d;a.getUniforms().setValue(t,"morphTargetBaseInfluence",m),a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function xl(t,e,n,r){let i=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const o=r.render.frame,a=t.geometry,l=e.get(t,a);return i.get(l)!==o&&(e.update(l),i.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}exports.ShaderLib=rl,rl.physical={uniforms:ms([rl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new On(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new _i(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:el.meshphysical_vert,fragmentShader:el.meshphysical_frag};class vl extends kn{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=ut,this.minFilter=ut,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}exports.DataTexture2DArray=vl,vl.prototype.isDataTexture2DArray=!0;class yl extends kn{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=ut,this.minFilter=ut,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}exports.DataTexture3D=yl,yl.prototype.isDataTexture3D=!0;const _l=new kn,bl=new vl,wl=new yl,Ml=new Ss,Sl=[],Tl=[],El=new Float32Array(16),Al=new Float32Array(9),Ll=new Float32Array(4);function Rl(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=Sl[i];if(void 0===s&&(s=new Float32Array(i),Sl[i]=s),0!==e){r.toArray(s,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(s,i)}return s}function Cl(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Pl(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Dl(t,e){let n=Tl[e];void 0===n&&(n=new Int32Array(e),Tl[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Il(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Bl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Cl(n,e))return;t.uniform2fv(this.addr,e),Pl(n,e)}}function Nl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Cl(n,e))return;t.uniform3fv(this.addr,e),Pl(n,e)}}function Fl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Cl(n,e))return;t.uniform4fv(this.addr,e),Pl(n,e)}}function Ol(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Cl(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Pl(n,e)}else{if(Cl(n,r))return;Ll.set(r),t.uniformMatrix2fv(this.addr,!1,Ll),Pl(n,r)}}function zl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Cl(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Pl(n,e)}else{if(Cl(n,r))return;Al.set(r),t.uniformMatrix3fv(this.addr,!1,Al),Pl(n,r)}}function Gl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Cl(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Pl(n,e)}else{if(Cl(n,r))return;El.set(r),t.uniformMatrix4fv(this.addr,!1,El),Pl(n,r)}}function Hl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ul(t,e){const n=this.cache;Cl(n,e)||(t.uniform2iv(this.addr,e),Pl(n,e))}function kl(t,e){const n=this.cache;Cl(n,e)||(t.uniform3iv(this.addr,e),Pl(n,e))}function Vl(t,e){const n=this.cache;Cl(n,e)||(t.uniform4iv(this.addr,e),Pl(n,e))}function Wl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function jl(t,e){const n=this.cache;Cl(n,e)||(t.uniform2uiv(this.addr,e),Pl(n,e))}function ql(t,e){const n=this.cache;Cl(n,e)||(t.uniform3uiv(this.addr,e),Pl(n,e))}function Xl(t,e){const n=this.cache;Cl(n,e)||(t.uniform4uiv(this.addr,e),Pl(n,e))}function Yl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||_l,i)}function Zl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||wl,i)}function Jl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Ml,i)}function Ql(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||bl,i)}function Kl(t){switch(t){case 5126:return Il;case 35664:return Bl;case 35665:return Nl;case 35666:return Fl;case 35674:return Ol;case 35675:return zl;case 35676:return Gl;case 5124:case 35670:return Hl;case 35667:case 35671:return Ul;case 35668:case 35672:return kl;case 35669:case 35673:return Vl;case 5125:return Wl;case 36294:return jl;case 36295:return ql;case 36296:return Xl;case 35678:case 36198:case 36298:case 36306:case 35682:return Yl;case 35679:case 36299:case 36307:return Zl;case 35680:case 36300:case 36308:case 36293:return Jl;case 36289:case 36303:case 36311:case 36292:return Ql}}function $l(t,e){t.uniform1fv(this.addr,e)}function tc(t,e){const n=Rl(e,this.size,2);t.uniform2fv(this.addr,n)}function ec(t,e){const n=Rl(e,this.size,3);t.uniform3fv(this.addr,n)}function nc(t,e){const n=Rl(e,this.size,4);t.uniform4fv(this.addr,n)}function rc(t,e){const n=Rl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ic(t,e){const n=Rl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function sc(t,e){const n=Rl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function oc(t,e){t.uniform1iv(this.addr,e)}function ac(t,e){t.uniform2iv(this.addr,e)}function lc(t,e){t.uniform3iv(this.addr,e)}function cc(t,e){t.uniform4iv(this.addr,e)}function hc(t,e){t.uniform1uiv(this.addr,e)}function uc(t,e){t.uniform2uiv(this.addr,e)}function pc(t,e){t.uniform3uiv(this.addr,e)}function dc(t,e){t.uniform4uiv(this.addr,e)}function mc(t,e,n){const r=e.length,i=Dl(n,r);t.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.safeSetTexture2D(e[s]||_l,i[s])}function fc(t,e,n){const r=e.length,i=Dl(n,r);t.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.safeSetTextureCube(e[s]||Ml,i[s])}function gc(t){switch(t){case 5126:return $l;case 35664:return tc;case 35665:return ec;case 35666:return nc;case 35674:return rc;case 35675:return ic;case 35676:return sc;case 5124:case 35670:return oc;case 35667:case 35671:return ac;case 35668:case 35672:return lc;case 35669:case 35673:return cc;case 5125:return hc;case 36294:return uc;case 36295:return pc;case 36296:return dc;case 35678:case 36198:case 36298:case 36306:case 35682:return mc;case 35680:case 36300:case 36308:case 36293:return fc}}function xc(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Kl(e.type)}function vc(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=gc(e.type)}function yc(t){this.id=t,this.seq=[],this.map={}}vc.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Pl(e,t)},yc.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(t,e[s.id],n)}};const _c=/(\w+)(\])?(\[|\.)?/g;function bc(t,e){t.seq.push(e),t.map[e.id]=e}function wc(t,e,n){const r=t.name,i=r.length;for(_c.lastIndex=0;;){const s=_c.exec(r),o=_c.lastIndex;let a=s[1];const l="]"===s[2],c=s[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===i){bc(n,void 0===c?new xc(a,t,e):new vc(a,t,e));break}{let t=n.map[a];void 0===t&&bc(n,t=new yc(a)),n=t}}}function Mc(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);wc(n,t.getUniformLocation(e,n.name),this)}}function Sc(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Mc.prototype.setValue=function(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Mc.prototype.setOptional=function(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)},Mc.upload=function(t,e,n,r){for(let i=0,s=e.length;i!==s;++i){const s=e[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,r)}},Mc.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n};let Tc=0;function Ec(t){const e=t.split("\n");for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Ac(t){switch(t){case Xe:return["Linear","( value )"];case Ye:return["sRGB","( value )"];case Je:return["RGBE","( value )"];case Ke:return["RGBM","( value, 7.0 )"];case $e:return["RGBM","( value, 16.0 )"];case tn:return["RGBD","( value, 256.0 )"];case Ze:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Qe:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Lc(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+Ec(t.getShaderSource(e))}function Rc(t,e){const n=Ac(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Cc(t,e){const n=Ac(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Pc(t,e){let n;switch(e){case J:n="Linear";break;case Q:n="Reinhard";break;case K:n="OptimizedCineon";break;case $:n="ACESFilmic";break;case tt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Dc(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nc).join("\n")}function Ic(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Bc(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i).name;n[r]=t.getAttribLocation(e,r)}return n}function Nc(t){return""!==t}function Fc(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Oc(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zc=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gc(t){return t.replace(zc,Hc)}function Hc(t,e){const n=el[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Gc(n)}const Uc=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,kc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Vc(t){return t.replace(kc,jc).replace(Uc,Wc)}function Wc(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),jc(t,e,n,r)}function jc(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function qc(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Xc(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===l?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===h&&(e="SHADOWMAP_TYPE_VSM"),e}function Yc(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case nt:case rt:e="ENVMAP_TYPE_CUBE";break;case ot:case at:e="ENVMAP_TYPE_CUBE_UV"}return e}function Zc(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case rt:case at:e="ENVMAP_MODE_REFRACTION"}return e}function Jc(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case q:e="ENVMAP_BLENDING_MULTIPLY";break;case X:e="ENVMAP_BLENDING_MIX";break;case Y:e="ENVMAP_BLENDING_ADD"}return e}function Qc(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Xc(n),c=Yc(n),h=Zc(n),u=Jc(n),p=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":Dc(n),m=Ic(s),f=i.createProgram();let g,x,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((g=[m].filter(Nc).join("\n")).length>0&&(g+="\n"),(x=[d,m].filter(Nc).join("\n")).length>0&&(x+="\n")):(g=[qc(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nc).join("\n"),x=[d,qc(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Z?"#define TONE_MAPPING":"",n.toneMapping!==Z?el.tonemapping_pars_fragment:"",n.toneMapping!==Z?Pc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",el.encodings_pars_fragment,n.map?Rc("mapTexelToLinear",n.mapEncoding):"",n.matcap?Rc("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Rc("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Rc("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Rc("lightMapTexelToLinear",n.lightMapEncoding):"",Cc("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Nc).join("\n")),o=Oc(o=Fc(o=Gc(o),n),n),a=Oc(a=Fc(a=Gc(a),n),n),o=Vc(o),a=Vc(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,x=["#define varying in",n.glslVersion===Dn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Dn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const y=v+x+a,_=Sc(i,35633,v+g+o),b=Sc(i,35632,y);if(i.attachShader(f,_),i.attachShader(f,b),void 0!==n.index0AttributeName?i.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(f,0,"position"),i.linkProgram(f),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(f).trim(),e=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(b).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(f,35714)){r=!1;const e=Lc(i,_,"vertex"),n=Lc(i,b,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(f,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:x}})}let w,M;return i.deleteShader(_),i.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new Mc(i,f)),w},this.getAttributes=function(){return void 0===M&&(M=Bc(i,f)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(f),this.program=void 0},this.name=n.shaderName,this.id=Tc++,this.cacheKey=e,this.usedTimes=1,this.program=f,this.vertexShader=_,this.fragmentShader=b,this}function Kc(t,e,n,r,i,s){const o=[],a=r.isWebGL2,l=r.logarithmicDepthBuffer,c=r.floatVertexTextures,h=r.maxVertexUniforms,u=r.vertexTextures;let m=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function x(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Xe,e}return{getParameters:function(i,o,g,v,y){const _=v.fog,b=i.isMeshStandardMaterial?v.environment:null,w=e.get(i.envMap||b),M=f[i.type],S=y.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(c)return 1024;{const t=h,n=Math.floor((t-20)/4),r=Math.min(n,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}}(y):0;let T,E;if(null!==i.precision&&(m=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",m,"instead."),M){const t=rl[M];T=t.vertexShader,E=t.fragmentShader}else T=i.vertexShader,E=i.fragmentShader;const A=t.getRenderTarget();return{isWebGL2:a,shaderID:M,shaderName:i.type,vertexShader:T,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:m,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:u,outputEncoding:null!==A?x(A.texture):t.outputEncoding,map:!!i.map,mapEncoding:x(i.map),matcap:!!i.matcap,matcapEncoding:x(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:x(w),envMapCubeUV:!!w&&(w.mapping===ot||w.mapping===at),lightMap:!!i.lightMap,lightMapEncoding:x(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:x(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===sn,tangentSpaceNormalMap:i.normalMapType===rn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!_,useFog:i.fog,fogExp2:_&&_.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:l,skinning:i.skinning&&S>0,maxBones:S,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&g.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:Z,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===d,flipSided:i.side===p,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<g.length;t++)n.push(e[g[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=rl[e];n=fs.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,i=o.length;t<i;t++){const e=o[t];if(e.cacheKey===n){++(r=e).usedTimes;break}}return void 0===r&&(r=new Qc(t,n,e,i),o.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},programs:o}}function $c(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function th(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function eh(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function nh(t){const e=[];let n=0;const r=[],i=[],s={id:-1};function o(r,i,o,a,l,c){let h=e[n];const u=t.get(o);return void 0===h?(h={id:r.id,object:r,geometry:i,material:o,program:u.program||s,groupOrder:a,renderOrder:r.renderOrder,z:l,group:c},e[n]=h):(h.id=r.id,h.object=r,h.geometry=i,h.material=o,h.program=u.program||s,h.groupOrder=a,h.renderOrder=r.renderOrder,h.z=l,h.group=c),n++,h}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,s,a,l){const c=o(t,e,n,s,a,l);(!0===n.transparent?i:r).push(c)},unshift:function(t,e,n,s,a,l){const c=o(t,e,n,s,a,l);(!0===n.transparent?i:r).unshift(c)},finish:function(){for(let t=n,r=e.length;t<r;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){r.length>1&&r.sort(t||th),i.length>1&&i.sort(e||eh)}}}function rh(t){let e=new WeakMap;return{get:function(n,r){let i;return!1===e.has(n)?(i=new nh(t),e.set(n,[i])):r>=e.get(n).length?(i=new nh(t),e.get(n).push(i)):i=e.get(n)[r],i},dispose:function(){e=new WeakMap}}}function ih(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Yn,color:new _i};break;case"SpotLight":n={position:new Yn,direction:new Yn,color:new _i,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Yn,color:new _i,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Yn,skyColor:new _i,groundColor:new _i};break;case"RectAreaLight":n={color:new _i,position:new Yn,halfWidth:new Yn,halfHeight:new Yn}}return t[e.id]=n,n}}}function sh(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}let oh=0;function ah(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function lh(t,e){const n=new ih,r=sh(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new Yn);const s=new Yn,o=new Tr,a=new Tr;return{setup:function(s){let o=0,a=0,l=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,h=0,u=0,p=0,d=0,m=0,f=0,g=0;s.sort(ah);for(let t=0,e=s.length;t<e;t++){const e=s[t],x=e.color,v=e.intensity,y=e.distance,_=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=x.r*v,a+=x.g*v,l+=x.b*v;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],v);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=_,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(x).multiplyScalar(v),t.distance=y,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[u]=n,i.spotShadowMap[u]=_,i.spotShadowMatrix[u]=e.shadow.matrix,g++}i.spot[u]=t,u++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(x).multiplyScalar(v),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=_,i.pointShadowMatrix[h]=e.shadow.matrix,f++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(v),t.groundColor.copy(e.groundColor).multiplyScalar(v),i.hemi[d]=t,d++}}p>0&&(e.isWebGL2?(i.rectAreaLTC1=nl.LTC_FLOAT_1,i.rectAreaLTC2=nl.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=nl.LTC_FLOAT_1,i.rectAreaLTC2=nl.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=nl.LTC_HALF_1,i.rectAreaLTC2=nl.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=a,i.ambient[2]=l;const x=i.hash;x.directionalLength===c&&x.pointLength===h&&x.spotLength===u&&x.rectAreaLength===p&&x.hemiLength===d&&x.numDirectionalShadows===m&&x.numPointShadows===f&&x.numSpotShadows===g||(i.directional.length=c,i.spot.length=u,i.rectArea.length=p,i.point.length=h,i.hemi.length=d,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=f,i.pointShadowMap.length=f,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=f,i.spotShadowMatrix.length=g,x.directionalLength=c,x.pointLength=h,x.spotLength=u,x.rectAreaLength=p,x.hemiLength=d,x.numDirectionalShadows=m,x.numPointShadows=f,x.numSpotShadows=g,i.version=oh++)},setupView:function(t,e){let n=0,r=0,l=0,c=0,h=0;const u=e.matrixWorldInverse;for(let p=0,d=t.length;p<d;p++){const e=t[p];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(e.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),c++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),r++}else if(e.isHemisphereLight){const t=i.hemi[h];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(u),t.direction.normalize(),h++}}},state:i}}function ch(t,e){const n=new lh(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function hh(t,e){let n=new WeakMap;return{get:function(r,i=0){let s;return!1===n.has(r)?(s=new ch(t,e),n.set(r,[s])):i>=n.get(r).length?(s=new ch(t,e),n.get(r).push(s)):s=n.get(r)[i],s},dispose:function(){n=new WeakMap}}}class uh extends di{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=en,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}exports.MeshDepthMaterial=uh,uh.prototype.isMeshDepthMaterial=!0;class ph extends di{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Yn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}exports.MeshDistanceMaterial=ph,ph.prototype.isMeshDistanceMaterial=!0;var dh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",mh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function fh(t,e,n){let r=new Rs;const i=new On,s=new On,o=new Wn,a=[],c=[],m={},f=n.maxTextureSize,x={0:p,1:u,2:d},v=new vs({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new On},radius:{value:4}},vertexShader:mh,fragmentShader:dh}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const _=new ji;_.setAttribute("position",new Si(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new cs(_,v),w=this;function M(n,r){const i=e.update(b);v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,v,b,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,y,b,null)}function S(t,e,n){const r=t<<0|e<<1|n<<2;let i=a[r];return void 0===i&&(i=new uh({depthPacking:nn,morphTargets:t,skinning:e}),a[r]=i),i}function T(t,e,n){const r=t<<0|e<<1|n<<2;let i=c[r];return void 0===i&&(i=new ph({morphTargets:t,skinning:e}),c[r]=i),i}function E(e,n,r,i,s,o,a){let l=null,c=S,u=e.customDepthMaterial;if(!0===i.isPointLight&&(c=T,u=e.customDistanceMaterial),void 0===u){let t=!1;!0===r.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),l=c(t,i,!0===e.isInstancedMesh)}else l=u;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const t=l.uuid,e=r.uuid;let n=m[t];void 0===n&&(n={},m[t]=n);let i=n[e];void 0===i&&(i=l.clone(),n[e]=i),l=i}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=a===h?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:x[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=s,l.farDistance=o),l}function A(n,i,s,o,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===h)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],h=i[c.materialIndex];if(h&&h.visible){const e=E(n,r,h,o,s.near,s.far,a);t.renderBufferDirect(s,null,r,e,n,c)}}}else if(i.visible){const e=E(n,r,i,o,s.near,s.far,a);t.renderBufferDirect(s,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)A(l[t],i,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=l,this.render=function(e,n,a){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(g),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let d=0,m=e.length;d<m;d++){const l=e[d],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const u=c.getFrameExtents();if(i.multiply(u),s.copy(c.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(s.x=Math.floor(f/u.x),i.x=s.x*u.x,c.mapSize.x=s.x),i.y>f&&(s.y=Math.floor(f/u.y),i.y=s.y*u.y,c.mapSize.y=s.y)),null===c.map&&!c.isPointLightShadow&&this.type===h){const t={minFilter:gt,magFilter:gt,format:Nt};c.map=new jn(i.x,i.y,t),c.map.texture.name=l.name+".shadowMap",c.mapPass=new jn(i.x,i.y,t),c.camera.updateProjectionMatrix()}if(null===c.map){const t={minFilter:ut,magFilter:ut,format:Nt};c.map=new jn(i.x,i.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const m=c.getViewportCount();for(let t=0;t<m;t++){const e=c.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),p.viewport(o),c.updateMatrices(l,t),r=c.getFrustum(),A(n,a,c.camera,l,this.type)}c.isPointLightShadow||this.type!==h||M(c,a),c.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(l,c,u)}}function gh(t,e,n){const o=n.isWebGL2;const a=new function(){let e=!1;const n=new Wn;let r=null;const i=new Wn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,s,o,a){!0===a&&(e*=o,r*=o,s*=o),n.set(e,r,s,o),!1===i.equals(n)&&(t.clearColor(e,r,s,o),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},l=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?gt(2929):xt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case z:t.depthFunc(512);break;case G:t.depthFunc(519);break;case H:t.depthFunc(513);break;case U:t.depthFunc(515);break;case k:t.depthFunc(514);break;case V:t.depthFunc(518);break;case W:t.depthFunc(516);break;case j:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},c=new function(){let e=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(t){e||(t?gt(2960):xt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,o){r===e&&i===n&&s===o||(t.stencilFunc(e,n,o),r=e,i=n,s=o)},setOp:function(e,n,r){o===e&&a===n&&l===r||(t.stencilOp(e,n,r),o=e,a=n,l=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null}}};let h={},u=null,m={},f=null,q=!1,X=null,Y=null,Z=null,J=null,Q=null,K=null,$=null,tt=!1,et=null,nt=null,rt=null,it=null,st=null;const ot=t.getParameter(35661);let at=!1,lt=0;const ct=t.getParameter(7938);-1!==ct.indexOf("WebGL")?(lt=parseFloat(/^WebGL (\d)/.exec(ct)[1]),at=lt>=1):-1!==ct.indexOf("OpenGL ES")&&(lt=parseFloat(/^OpenGL ES (\d)/.exec(ct)[1]),at=lt>=2);let ht=null,ut={};const pt=new Wn(0,0,t.canvas.width,t.canvas.height),dt=new Wn(0,0,t.canvas.width,t.canvas.height);function mt(e,n,r){const i=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let o=0;o<r;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return s}const ft={};function gt(e){!0!==h[e]&&(t.enable(e),h[e]=!0)}function xt(e){!1!==h[e]&&(t.disable(e),h[e]=!1)}ft[3553]=mt(3553,3553,1),ft[34067]=mt(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),gt(2929),l.setFunc(U),bt(!1),wt(i),gt(2884),_t(g);const vt={[w]:32774,[M]:32778,[S]:32779};if(o)vt[T]=32775,vt[E]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(vt[T]=t.MIN_EXT,vt[E]=t.MAX_EXT)}const yt={[A]:0,[L]:1,[R]:768,[P]:770,[O]:776,[N]:774,[I]:772,[C]:769,[D]:771,[F]:775,[B]:773};function _t(e,n,r,i,s,o,a,l){if(e!==g){if(!1===q&&(gt(3042),q=!0),e===b)s=s||n,o=o||r,a=a||i,n===Y&&s===Q||(t.blendEquationSeparate(vt[n],vt[s]),Y=n,Q=s),r===Z&&i===J&&o===K&&a===$||(t.blendFuncSeparate(yt[r],yt[i],yt[o],yt[a]),Z=r,J=i,K=o,$=a),X=e,tt=null;else if(e!==X||l!==tt){if(Y===w&&Q===w||(t.blendEquation(32774),Y=w,Q=w),l)switch(e){case x:t.blendFuncSeparate(1,771,1,771);break;case v:t.blendFunc(1,1);break;case y:t.blendFuncSeparate(0,0,769,771);break;case _:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case x:t.blendFuncSeparate(770,771,1,771);break;case v:t.blendFunc(770,1);break;case y:t.blendFunc(0,769);break;case _:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}Z=null,J=null,K=null,$=null,X=e,tt=l}}else!0===q&&(xt(3042),q=!1)}function bt(e){et!==e&&(e?t.frontFace(2304):t.frontFace(2305),et=e)}function wt(e){e!==r?(gt(2884),e!==nt&&(e===i?t.cullFace(1029):e===s?t.cullFace(1028):t.cullFace(1032))):xt(2884),nt=e}function Mt(e,n,r){e?(gt(32823),it===n&&st===r||(t.polygonOffset(n,r),it=n,st=r)):xt(32823)}function St(e){void 0===e&&(e=33984+ot-1),ht!==e&&(t.activeTexture(e),ht=e)}return{buffers:{color:a,depth:l,stencil:c},enable:gt,disable:xt,bindFramebuffer:function(e,n){null===n&&null!==u&&(n=u),m[e]!==n&&(t.bindFramebuffer(e,n),m[e]=n)},bindXRFramebuffer:function(e){e!==u&&(t.bindFramebuffer(36160,e),u=e)},useProgram:function(e){return f!==e&&(t.useProgram(e),f=e,!0)},setBlending:_t,setMaterial:function(t,e){t.side===d?xt(2884):gt(2884);let n=t.side===p;e&&(n=!n),bt(n),t.blending===x&&!1===t.transparent?_t(g):_t(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),l.setFunc(t.depthFunc),l.setTest(t.depthTest),l.setMask(t.depthWrite),a.setMask(t.colorWrite);const r=t.stencilWrite;c.setTest(r),r&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Mt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?gt(32926):xt(32926)},setFlipSided:bt,setCullFace:wt,setLineWidth:function(e){e!==rt&&(at&&t.lineWidth(e),rt=e)},setPolygonOffset:Mt,setScissorTest:function(t){t?gt(3089):xt(3089)},activeTexture:St,bindTexture:function(e,n){null===ht&&St();let r=ut[ht];void 0===r&&(r={type:void 0,texture:void 0},ut[ht]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||ft[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=ut[ht];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===pt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),pt.copy(e))},viewport:function(e){!1===dt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),dt.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===o&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},ht=null,ut={},u=null,m={},f=null,q=!1,X=null,Y=null,Z=null,J=null,Q=null,K=null,$=null,tt=!1,et=null,nt=null,rt=null,it=null,st=null,pt.set(0,0,t.canvas.width,t.canvas.height),dt.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}}}function xh(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,u=i.maxSamples,p=new WeakMap;let d,m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function f(t,e){return m?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?Fn.floorPowerOfTwo:Math.floor,s=r(i*t.width),o=r(i*t.height);void 0===d&&(d=f(s,o));const a=n?f(s,o):d;return a.width=s,a.height=o,a.getContext("2d").drawImage(t,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function x(t){return Fn.isPowerOfTwo(t.width)&&Fn.isPowerOfTwo(t.height)}function v(t,e){return t.generateMipmaps&&e&&t.minFilter!==ut&&t.minFilter!==gt}function y(e,n,i,s){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log2(Math.max(i,s))}function _(n,r,i){if(!1===a)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),6407===r&&(5126===i&&(s=34837),5131===i&&(s=34843),5121===i&&(s=32849)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||e.get("EXT_color_buffer_float"),s}function b(t){return t===ut||t===pt||t===mt?9728:9729}function w(e){const n=e.target;n.removeEventListener("dispose",w),function(e){const n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&p.delete(n),o.memory.textures--}function M(e){const n=e.target;n.removeEventListener("dispose",M),function(e){const n=e.texture,i=r.get(e),s=r.get(n);if(!e)return;void 0!==s.__webglTexture&&t.deleteTexture(s.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);r.remove(n),r.remove(e)}(n),o.memory.textures--}let S=0;function T(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function E(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;C(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,h=[];for(let t=0;t<6;t++)h[t]=o||l?l?r.image[t].image:r.image[t]:g(r.image[t],!1,!0,c);const u=h[0],p=x(u)||a,d=s.convert(r.format),m=s.convert(r.type),f=_(r.internalFormat,d,m);let b;if(R(34067,r,p),o){for(let t=0;t<6;t++){b=h[t].mipmaps;for(let e=0;e<b.length;e++){const i=b[e];r.format!==Nt&&r.format!==Bt?null!==d?n.compressedTexImage2D(34069+t,e,f,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,f,i.width,i.height,0,d,m,i.data)}}e.__maxMipLevel=b.length-1}else{b=r.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,f,h[t].width,h[t].height,0,d,m,h[t].data);for(let e=0;e<b.length;e++){const r=b[e],i=r.image[t].image;n.texImage2D(34069+t,e+1,f,i.width,i.height,0,d,m,i.data)}}else{n.texImage2D(34069+t,0,f,d,m,h[t]);for(let e=0;e<b.length;e++){const r=b[e];n.texImage2D(34069+t,e+1,f,d,m,r.image[t])}}e.__maxMipLevel=b.length}v(r,p)&&y(34067,r,u.width,u.height);e.__version=r.version,r.onUpdate&&r.onUpdate(r)}(o,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}const A={[lt]:10497,[ct]:33071,[ht]:33648},L={[ut]:9728,[pt]:9984,[mt]:9986,[gt]:9729,[xt]:9985,[yt]:9987};function R(n,s,o){if(o?(t.texParameteri(n,10242,A[s.wrapS]),t.texParameteri(n,10243,A[s.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,A[s.wrapR]),t.texParameteri(n,10240,L[s.magFilter]),t.texParameteri(n,10241,L[s.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),s.wrapS===ct&&s.wrapT===ct||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,b(s.magFilter)),t.texParameteri(n,10241,b(s.minFilter)),s.minFilter!==ut&&s.minFilter!==gt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(s.type===At&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Lt&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function C(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",w),e.__webglTexture=t.createTexture(),o.memory.textures++)}function P(e,r,i){let o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),C(e,r),n.activeTexture(33984+i),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const l=function(t){return!a&&(t.wrapS!==ct||t.wrapT!==ct||t.minFilter!==ut&&t.minFilter!==gt)}(r)&&!1===x(r.image),c=g(r.image,l,!1,h),u=x(c)||a,p=s.convert(r.format);let d,m=s.convert(r.type),f=_(r.internalFormat,p,m);R(o,r,u);const b=r.mipmaps;if(r.isDepthTexture)f=6402,a?f=r.type===At?36012:r.type===Et?33190:r.type===Dt?35056:33189:r.type===At&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Gt&&6402===f&&r.type!==St&&r.type!==Et&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=St,m=s.convert(r.type)),r.format===Ht&&6402===f&&(f=34041,r.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Dt,m=s.convert(r.type))),n.texImage2D(3553,0,f,c.width,c.height,0,p,m,null);else if(r.isDataTexture)if(b.length>0&&u){for(let t=0,e=b.length;t<e;t++)d=b[t],n.texImage2D(3553,t,f,d.width,d.height,0,p,m,d.data);r.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,f,c.width,c.height,0,p,m,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(let t=0,e=b.length;t<e;t++)d=b[t],r.format!==Nt&&r.format!==Bt?null!==p?n.compressedTexImage2D(3553,t,f,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,f,d.width,d.height,0,p,m,d.data);e.__maxMipLevel=b.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,f,c.width,c.height,c.depth,0,p,m,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,f,c.width,c.height,c.depth,0,p,m,c.data),e.__maxMipLevel=0;else if(b.length>0&&u){for(let t=0,e=b.length;t<e;t++)d=b[t],n.texImage2D(3553,t,f,p,m,d);r.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,f,p,m,c),e.__maxMipLevel=0;v(r,u)&&y(o,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function D(e,i,o,a){const l=i.texture,c=s.convert(l.format),h=s.convert(l.type),u=_(l.internalFormat,c,h);32879===a||35866===a?n.texImage3D(a,0,u,i.width,i.height,i.depth,0,c,h,null):n.texImage2D(a,0,u,i.width,i.height,0,c,h,null),n.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,a,r.get(l).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===At?i=36012:e.type===Et&&(i=33190));const r=N(n);t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const e=N(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=n.texture,i=s.convert(e.format),o=s.convert(e.type),a=_(e.internalFormat,i,o);if(r){const e=N(n);t.renderbufferStorageMultisample(36161,e,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function B(e){const i=r.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Gt)t.framebufferTexture2D(36160,36096,3553,s,0);else{if(i.depthTexture.format!==Ht)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,s,0)}}(i.__webglFramebuffer,e)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),I(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),I(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function N(t){return a&&t.isWebGLMultisampleRenderTarget?Math.min(u,t.samples):0}let F=!1,O=!1;this.allocateTextureUnit=function(){const t=S;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?P(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?P(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(e){const i=e.texture,l=r.get(e),c=r.get(i);e.addEventListener("dispose",M),c.__webglTexture=t.createTexture(),c.__version=i.version,o.memory.textures++;const h=!0===e.isWebGLCubeRenderTarget,u=!0===e.isWebGLMultisampleRenderTarget,p=i.isDataTexture3D||i.isDataTexture2DArray,d=x(e)||a;if(!a||i.format!==Bt||i.type!==At&&i.type!==Lt||(i.format=Nt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){l.__webglFramebuffer=[];for(let e=0;e<6;e++)l.__webglFramebuffer[e]=t.createFramebuffer()}else if(l.__webglFramebuffer=t.createFramebuffer(),u)if(a){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const r=s.convert(i.format),o=s.convert(i.type),a=_(i.internalFormat,r,o),c=N(e);t.renderbufferStorageMultisample(36161,c,a,e.width,e.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),I(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),R(34067,i,d);for(let t=0;t<6;t++)D(l.__webglFramebuffer[t],e,36064,34069+t);v(i,d)&&y(34067,i,e.width,e.height),n.bindTexture(34067,null)}else{let t=3553;p&&(a?t=i.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(t,c.__webglTexture),R(t,i,d),D(l.__webglFramebuffer,e,36064,t),v(i,d)&&y(3553,i,e.width,e.height),n.bindTexture(3553,null)}e.depthBuffer&&B(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(v(e,x(t)||a)){const i=t.isWebGLCubeRenderTarget?34067:3553,s=r.get(e).__webglTexture;n.bindTexture(i,s),y(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(a){const i=r.get(e);n.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,i.__webglFramebuffer);const s=e.width,o=e.height;let a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,s,o,0,0,s,o,a,9728),n.bindFramebuffer(36160,i.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),E(t,e)}}function vh(t,e,n){const r=n.isWebGL2;return{convert:function(t){let n;if(t===bt)return 5121;if(t===Rt)return 32819;if(t===Ct)return 32820;if(t===Pt)return 33635;if(t===wt)return 5120;if(t===Mt)return 5122;if(t===St)return 5123;if(t===Tt)return 5124;if(t===Et)return 5125;if(t===At)return 5126;if(t===Lt)return r?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(t===It)return 6406;if(t===Bt)return 6407;if(t===Nt)return 6408;if(t===Ft)return 6409;if(t===Ot)return 6410;if(t===Gt)return 6402;if(t===Ht)return 34041;if(t===Ut)return 6403;if(t===kt)return 36244;if(t===Vt)return 33319;if(t===Wt)return 33320;if(t===jt)return 36248;if(t===qt)return 36249;if(t===Xt||t===Yt||t===Zt||t===Jt){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===Xt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Yt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Zt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Jt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Qt||t===Kt||t===$t||t===te){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===Qt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Kt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===$t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===te)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ee)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===ne||t===re)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(t===ne)return n.COMPRESSED_RGB8_ETC2;if(t===re)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===ie||t===se||t===oe||t===ae||t===le||t===ce||t===he||t===ue||t===pe||t===de||t===me||t===fe||t===ge||t===xe||t===ye||t===_e||t===be||t===we||t===Me||t===Se||t===Te||t===Ee||t===Ae||t===Le||t===Re||t===Ce||t===Pe||t===De?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:t===ve?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:t===Dt?r?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}class yh extends _s{constructor(t=[]){super(),this.cameras=t}}exports.ArrayCamera=yh,yh.prototype.isArrayCamera=!0;class _h extends Jr{constructor(){super(),this.type="Group"}}function bh(){this._targetRay=null,this._grip=null,this._hand=null}function wh(t,e){const n=this,r=t.state;let i=null,s=1,o=null,a="local-floor",l=null;const c=[],h=new Map,u=new _s;u.layers.enable(1),u.viewport=new Wn;const p=new _s;p.layers.enable(2),p.viewport=new Wn;const d=[u,p],m=new yh;m.layers.enable(1),m.layers.enable(2);let f=null,g=null;function x(t){const e=h.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function v(){h.forEach(function(t,e){t.disconnect(e)}),h.clear(),f=null,g=null,r.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(t){const e=i.inputSources;for(let n=0;n<c.length;n++)h.set(e[n],c[n]);for(let n=0;n<t.removed.length;n++){const e=t.removed[n],r=h.get(e);r&&(r.dispatchEvent({type:"disconnected",data:e}),h.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],r=h.get(e);r&&r.dispatchEvent({type:"connected",data:e})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=c[t];return void 0===e&&(e=new bh,c[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=c[t];return void 0===e&&(e=new bh,c[t]=e),e.getGripSpace()},this.getHand=function(t){let e=c[t];return void 0===e&&(e=new bh,c[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=async function(t){if(null!==(i=t)){i.addEventListener("select",x),i.addEventListener("selectstart",x),i.addEventListener("selectend",x),i.addEventListener("squeeze",x),i.addEventListener("squeezestart",x),i.addEventListener("squeezeend",x),i.addEventListener("end",v),i.addEventListener("inputsourceschange",y);const t=e.getContextAttributes();!0!==t.xrCompatible&&await e.makeXRCompatible();const r={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:s},l=new XRWebGLLayer(i,e,r);i.updateRenderState({baseLayer:l}),o=await i.requestReferenceSpace(a),S.setContext(i),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const _=new Yn,b=new Yn;function w(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){m.near=p.near=u.near=t.near,m.far=p.far=u.far=t.far,f===m.near&&g===m.far||(i.updateRenderState({depthNear:m.near,depthFar:m.far}),f=m.near,g=m.far);const e=t.parent,n=m.cameras;w(m,e);for(let i=0;i<n.length;i++)w(n[i],e);t.matrixWorld.copy(m.matrixWorld),t.matrix.copy(m.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const r=t.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){_.setFromMatrixPosition(e.matrixWorld),b.setFromMatrixPosition(n.matrixWorld);const r=_.distanceTo(b),i=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],h=(i[8]-1)/i[0],u=(s[8]+1)/s[0],p=o*h,d=o*u,m=r/(-h+u),f=m*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(m),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+m,x=a+m,v=p-f,y=d+(r-f),w=l*a/x*g,M=c*a/x*g;t.projectionMatrix.makePerspective(v,y,w,M,g,x)}(m,u,p):m.projectionMatrix.copy(u.projectionMatrix),m};let M=null;const S=new Cs;S.setAnimationLoop(function(t,e){if(null!==(l=e.getViewerPose(o))){const t=l.views,e=i.renderState.baseLayer;r.bindXRFramebuffer(e.framebuffer);let n=!1;t.length!==m.cameras.length&&(m.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r],s=e.getViewport(i),o=d[r];o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&m.matrix.copy(o.matrix),!0===n&&m.cameras.push(o)}}const n=i.inputSources;for(let r=0;r<c.length;r++){const t=c[r],i=n[r];t.update(i,e,o)}M&&M(t,e)}),this.setAnimationLoop=function(t){M=t},this.dispose=function(){}}function Mh(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const r=t.get(n).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const i=t.get(r).__maxMipLevel;void 0!==i&&(e.maxMipLevel.value=i)}let i,s;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uv2Transform.value.copy(s.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===p&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===p&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,s){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===p&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,s):r.isSpriteMaterial?function(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Sh(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}function Th(t){const e=void 0!==(t=t||{}).canvas?t.canvas:Sh(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let u=null,p=null;const d=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Xe,this.physicallyCorrectLights=!1,this.toneMapping=Z,this.toneMappingExposure=1;const f=this;let g=!1,x=0,v=0,y=null,_=-1,b=null;const w=new Wn,M=new Wn;let S=null,T=e.width,E=e.height,A=1,L=null,R=null;const C=new Wn(0,0,T,E),P=new Wn(0,0,T,E);let D=!1;const I=new Rs;let B=!1,N=!1;const F=new Tr,O=new Yn,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===y?A:1}let H,U,k,V,W,j,q,X,Y,J,Q,K,$,tt,et,nt,rt,it,st,ot,at,lt,ct=n;function ht(t,n){for(let r=0;r<t.length;r++){const i=t[r],s=e.getContext(i,n);if(null!==s)return s}return null}try{const t={alpha:r,depth:i,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if(e.addEventListener("webglcontextlost",dt,!1),e.addEventListener("webglcontextrestored",mt,!1),null===ct){const e=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&e.shift(),null===(ct=ht(e,t)))throw ht(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Et){throw console.error("THREE.WebGLRenderer: "+Et.message),Et}function ut(){H=new hl(ct),U=new al(ct,H,t),H.init(U),at=new vh(ct,H,U),k=new gh(ct,H,U),V=new dl(ct),W=new $c,j=new xh(ct,H,k,W,U,at,V),q=new cl(f),X=new Ps(ct,U),lt=new sl(ct,H,X,U),Y=new ul(ct,X,V,lt),J=new xl(ct,Y,X,V),it=new gl(ct),et=new ll(W),Q=new Kc(f,q,H,U,lt,et),K=new Mh(W),$=new rh(W),tt=new hh(H,U),rt=new il(f,q,k,J,a),nt=new fh(f,J,U),st=new ol(ct,H,V,U),ot=new pl(ct,H,V,U),V.programs=Q.programs,f.capabilities=U,f.extensions=H,f.properties=W,f.renderLists=$,f.shadowMap=nt,f.state=k,f.info=V}ut();const pt=new wh(f,ct);function dt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function mt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=V.autoReset,e=nt.enabled,n=nt.autoUpdate,r=nt.needsUpdate,i=nt.type;ut(),V.autoReset=t,nt.enabled=e,nt.autoUpdate=n,nt.needsUpdate=r,nt.type=i}function ft(t){const e=t.target;e.removeEventListener("dispose",ft),function(t){(function(t){const e=W.get(t).programs;void 0!==e&&e.forEach(function(t){Q.releaseProgram(t)})})(t),W.remove(t)}(e)}this.xr=pt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(t){void 0!==t&&(A=t,this.setSize(T,E,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new On),t.set(T,E)},this.setSize=function(t,n,r){pt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,E=n,e.width=Math.floor(t*A),e.height=Math.floor(n*A),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new On),t.set(T*A,E*A).floor()},this.setDrawingBufferSize=function(t,n,r){T=t,E=n,A=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Wn),t.copy(w)},this.getViewport=function(t){return t.copy(C)},this.setViewport=function(t,e,n,r){t.isVector4?C.set(t.x,t.y,t.z,t.w):C.set(t,e,n,r),k.viewport(w.copy(C).multiplyScalar(A).floor())},this.getScissor=function(t){return t.copy(P)},this.setScissor=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),k.scissor(M.copy(P).multiplyScalar(A).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(t){k.setScissorTest(D=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){R=t},this.getClearColor=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),t=new _i),t.copy(rt.getClearColor())},this.setClearColor=function(){rt.setClearColor.apply(rt,arguments)},this.getClearAlpha=function(){return rt.getClearAlpha()},this.setClearAlpha=function(){rt.setClearAlpha.apply(rt,arguments)},this.clear=function(t,e,n){let r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),ct.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",dt,!1),e.removeEventListener("webglcontextrestored",mt,!1),$.dispose(),tt.dispose(),W.dispose(),q.dispose(),J.dispose(),lt.dispose(),pt.dispose(),pt.removeEventListener("sessionstart",xt),pt.removeEventListener("sessionend",vt),yt.stop()},this.renderBufferImmediate=function(t,e){lt.initAttributes();const n=W.get(t);t.hasPositions&&!n.position&&(n.position=ct.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ct.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ct.createBuffer()),t.hasColors&&!n.color&&(n.color=ct.createBuffer());const r=e.getAttributes();t.hasPositions&&(ct.bindBuffer(34962,n.position),ct.bufferData(34962,t.positionArray,35048),lt.enableAttribute(r.position),ct.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(ct.bindBuffer(34962,n.normal),ct.bufferData(34962,t.normalArray,35048),lt.enableAttribute(r.normal),ct.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(ct.bindBuffer(34962,n.uv),ct.bufferData(34962,t.uvArray,35048),lt.enableAttribute(r.uv),ct.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(ct.bindBuffer(34962,n.color),ct.bufferData(34962,t.colorArray,35048),lt.enableAttribute(r.color),ct.vertexAttribPointer(r.color,3,5126,!1,0,0)),lt.disableUnusedAttributes(),ct.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,s){null===e&&(e=z);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=Tt(t,e,r,i);k.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let h,u=1;!0===r.wireframe&&(l=Y.getWireframeAttribute(n),u=2),(r.morphTargets||r.morphNormals)&&it.update(i,n,r,a),lt.setup(i,r,a,n,l);let p=st;null!==l&&(h=X.get(l),(p=ot).setIndex(h));const d=null!==l?l.count:c.count,m=n.drawRange.start*u,f=n.drawRange.count*u,g=null!==s?s.start*u:0,x=null!==s?s.count*u:1/0,v=Math.max(m,g),y=Math.min(d,m+f,g+x)-1,_=Math.max(0,y-v+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(k.setLineWidth(r.wireframeLinewidth*G()),p.setMode(1)):p.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),k.setLineWidth(t*G()),i.isLineSegments?p.setMode(1):i.isLineLoop?p.setMode(2):p.setMode(3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);if(i.isInstancedMesh)p.renderInstances(v,_,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(v,_,t)}else p.render(v,_)}},this.compile=function(t,e){(p=tt.get(t)).init(),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))}),p.setupLights(),t.traverse(function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Mt(n[r],t,e)}else Mt(n,t,e)})};let gt=null;function xt(){yt.stop()}function vt(){yt.start()}const yt=new Cs;function _t(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,s=t.length;i<s;i++){const s=t[i],o=s.object,a=s.geometry,l=null===r?s.material:r,c=s.group;if(n.isArrayCamera){const t=n.cameras;for(let n=0,r=t.length;n<r;n++){const r=t[n];o.layers.test(r.layers)&&(k.viewport(w.copy(r.viewport)),p.setupLightsView(r),wt(o,e,r,a,l,c))}}else wt(o,e,n,a,l,c)}}function wt(t,e,n,r,i,s){if(t.onBeforeRender(f,e,n,r,i,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const r=Tt(n,e,i,t);k.setMaterial(i),lt.reset(),function(t,e){t.render(function(t){f.renderBufferImmediate(t,e)})}(t,r)}else f.renderBufferDirect(n,e,r,i,t,s);t.onAfterRender(f,e,n,r,i,s)}function Mt(t,e,n){!0!==e.isScene&&(e=z);const r=W.get(t),i=p.state.lights,s=p.state.shadowsArray,o=i.state.version,a=Q.getParameters(t,i.state,s,e,n),l=Q.getProgramCacheKey(a);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=q.get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",ft),c=new Map,r.programs=c);let h=c.get(l);if(void 0!==h){if(r.currentProgram===h&&r.lightsStateVersion===o)return St(t,a),h}else a.uniforms=Q.getUniforms(t),t.onBeforeCompile(a,f),h=Q.acquireProgram(a,l),c.set(l,h),r.uniforms=a.uniforms;const u=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=et.uniform),St(t,a),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=o,r.needsLights&&(u.ambientLightColor.value=i.state.ambient,u.lightProbe.value=i.state.probe,u.directionalLights.value=i.state.directional,u.directionalLightShadows.value=i.state.directionalShadow,u.spotLights.value=i.state.spot,u.spotLightShadows.value=i.state.spotShadow,u.rectAreaLights.value=i.state.rectArea,u.ltc_1.value=i.state.rectAreaLTC1,u.ltc_2.value=i.state.rectAreaLTC2,u.pointLights.value=i.state.point,u.pointLightShadows.value=i.state.pointShadow,u.hemisphereLights.value=i.state.hemi,u.directionalShadowMap.value=i.state.directionalShadowMap,u.directionalShadowMatrix.value=i.state.directionalShadowMatrix,u.spotShadowMap.value=i.state.spotShadowMap,u.spotShadowMatrix.value=i.state.spotShadowMatrix,u.pointShadowMap.value=i.state.pointShadowMap,u.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=h.getUniforms(),m=Mc.seqWithValue(d.seq,u);return r.currentProgram=h,r.uniformsList=m,h}function St(t,e){const n=W.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas}function Tt(t,e,n,r){!0!==e.isScene&&(e=z),j.resetTextureUnits();const i=e.fog,s=n.isMeshStandardMaterial?e.environment:null,o=null===y?f.outputEncoding:y.texture.encoding,a=q.get(n.envMap||s),l=!0===n.vertexColors&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,c=W.get(n),h=p.state.lights;if(!0===B&&(!0===N||t!==b)){const e=t===b&&n.id===_;et.setState(n,t,e)}let u=!1;n.version===c.__version?c.needsLights&&c.lightsStateVersion!==h.state.version?u=!0:c.outputEncoding!==o?u=!0:r.isInstancedMesh&&!1===c.instancing?u=!0:r.isInstancedMesh||!0!==c.instancing?c.envMap!==a?u=!0:n.fog&&c.fog!==i?u=!0:void 0===c.numClippingPlanes||c.numClippingPlanes===et.numPlanes&&c.numIntersection===et.numIntersection?c.vertexAlphas!==l&&(u=!0):u=!0:u=!0:(u=!0,c.__version=n.version);let d=c.currentProgram;!0===u&&(d=Mt(n,e,r));let m=!1,g=!1,x=!1;const v=d.getUniforms(),w=c.uniforms;if(k.useProgram(d.program)&&(m=!0,g=!0,x=!0),n.id!==_&&(_=n.id,g=!0),m||b!==t){if(v.setValue(ct,"projectionMatrix",t.projectionMatrix),U.logarithmicDepthBuffer&&v.setValue(ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,g=!0,x=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=v.map.cameraPosition;void 0!==e&&e.setValue(ct,O.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&v.setValue(ct,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&v.setValue(ct,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){v.setOptional(ct,r,"bindMatrix"),v.setOptional(ct,r,"bindMatrixInverse");const t=r.skeleton;if(t){const e=t.bones;if(U.floatVertexTextures){if(null===t.boneTexture){let n=Math.sqrt(4*e.length);n=Fn.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(t.boneMatrices);const i=new Es(r,n,n,Nt,At);t.boneMatrices=r,t.boneTexture=i,t.boneTextureSize=n}v.setValue(ct,"boneTexture",t.boneTexture,j),v.setValue(ct,"boneTextureSize",t.boneTextureSize)}else v.setOptional(ct,t,"boneMatrices")}}var M,S;return(g||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,v.setValue(ct,"receiveShadow",r.receiveShadow)),g&&(v.setValue(ct,"toneMappingExposure",f.toneMappingExposure),c.needsLights&&(S=x,(M=w).ambientLightColor.needsUpdate=S,M.lightProbe.needsUpdate=S,M.directionalLights.needsUpdate=S,M.directionalLightShadows.needsUpdate=S,M.pointLights.needsUpdate=S,M.pointLightShadows.needsUpdate=S,M.spotLights.needsUpdate=S,M.spotLightShadows.needsUpdate=S,M.rectAreaLights.needsUpdate=S,M.hemisphereLights.needsUpdate=S),i&&n.fog&&K.refreshFogUniforms(w,i),K.refreshMaterialUniforms(w,n,A,E),Mc.upload(ct,c.uniformsList,w,j)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Mc.upload(ct,c.uniformsList,w,j),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(ct,"center",r.center),v.setValue(ct,"modelViewMatrix",r.modelViewMatrix),v.setValue(ct,"normalMatrix",r.normalMatrix),v.setValue(ct,"modelMatrix",r.matrixWorld),d}yt.setAnimationLoop(function(t){gt&&gt(t)}),"undefined"!=typeof window&&yt.setContext(window),this.setAnimationLoop=function(t){gt=t,pt.setAnimationLoop(t),null===t?yt.stop():yt.start()},pt.addEventListener("sessionstart",xt),pt.addEventListener("sessionend",vt),this.render=function(t,e){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===pt.enabled&&!0===pt.isPresenting&&(e=pt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(f,t,e,n||y),(p=tt.get(t,m.length)).init(),m.push(p),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),I.setFromProjectionMatrix(F),N=this.localClippingEnabled,B=et.init(this.clippingPlanes,N,e),(u=$.get(t,d.length)).init(),d.push(u),function t(e,n,r,i){if(!1===e.visible)return;const s=e.layers.test(n.layers);if(s)if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){i&&O.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=J.update(e),n=e.material;n.visible&&u.push(e,t,n,r,O.z,null)}}else if(e.isImmediateRenderObject)i&&O.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F),u.push(e,null,e.material,r,O.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==V.render.frame&&(e.skeleton.update(),e.skeleton.frame=V.render.frame),!e.frustumCulled||I.intersectsObject(e))){i&&O.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=J.update(e),n=e.material;if(Array.isArray(n)){const i=t.groups;for(let s=0,o=i.length;s<o;s++){const o=i[s],a=n[o.materialIndex];a&&a.visible&&u.push(e,t,a,r,O.z,o)}}else n.visible&&u.push(e,t,n,r,O.z,null)}const o=e.children;for(let a=0,l=o.length;a<l;a++)t(o[a],n,r,i)}(t,e,0,f.sortObjects),u.finish(),!0===f.sortObjects&&u.sort(L,R),!0===B&&et.beginShadows();const i=p.state.shadowsArray;nt.render(i,t,e),p.setupLights(),p.setupLightsView(e),!0===B&&et.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),rt.render(u,t,e,r);const s=u.opaque,o=u.transparent;s.length>0&&_t(s,t,e),o.length>0&&_t(o,t,e),null!==y&&(j.updateRenderTargetMipmap(y),j.updateMultisampleRenderTarget(y)),!0===t.isScene&&t.onAfterRender(f,t,e),k.buffers.depth.setTest(!0),k.buffers.depth.setMask(!0),k.buffers.color.setMask(!0),k.setPolygonOffset(!1),lt.resetDefaultState(),_=-1,b=null,m.pop(),p=m.length>0?m[m.length-1]:null,d.pop(),u=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTarget=function(t,e=0,n=0){y=t,x=e,v=n,t&&void 0===W.get(t).__webglFramebuffer&&j.setupRenderTarget(t);let r=null,i=!1,s=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(s=!0);const o=W.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=o[e],i=!0):r=t.isWebGLMultisampleRenderTarget?W.get(t).__webglMultisampledFramebuffer:o,w.copy(t.viewport),M.copy(t.scissor),S=t.scissorTest}else w.copy(C).multiplyScalar(A).floor(),M.copy(P).multiplyScalar(A).floor(),S=D;if(k.bindFramebuffer(36160,r),k.viewport(w),k.scissor(M),k.setScissorTest(S),i){const r=W.get(t.texture);ct.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(s){const r=W.get(t.texture),i=e||0;ct.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(t,e,n,r,i,s,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=W.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){k.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,l=o.type;if(a!==Nt&&at.convert(a)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Lt&&(H.has("EXT_color_buffer_half_float")||U.isWebGL2&&H.has("EXT_color_buffer_float"));if(!(l===bt||at.convert(l)===ct.getParameter(35738)||l===At&&(U.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&ct.readPixels(e,n,r,i,at.convert(a),at.convert(l),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==y?W.get(y).__webglFramebuffer:null;k.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),s=Math.floor(e.image.height*r),o=at.convert(e.format);j.setTexture2D(e,0),ct.copyTexImage2D(3553,n,o,t.x,t.y,i,s,0),k.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,s=e.image.height,o=at.convert(n.format),a=at.convert(n.type);j.setTexture2D(n,0),ct.pixelStorei(37440,n.flipY),ct.pixelStorei(37441,n.premultiplyAlpha),ct.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ct.texSubImage2D(3553,r,t.x,t.y,i,s,o,a,e.image.data):e.isCompressedTexture?ct.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ct.texSubImage2D(3553,r,t.x,t.y,o,a,e.image),0===r&&n.generateMipmaps&&ct.generateMipmap(3553),k.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(f.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:s,height:o,data:a}=n.image,l=at.convert(r.format),c=at.convert(r.type);let h;if(r.isDataTexture3D)j.setTexture3D(r,0),h=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");j.setTexture2DArray(r,0),h=35866}ct.pixelStorei(37440,r.flipY),ct.pixelStorei(37441,r.premultiplyAlpha),ct.pixelStorei(3317,r.unpackAlignment);const u=ct.getParameter(3314),p=ct.getParameter(32878),d=ct.getParameter(3316),m=ct.getParameter(3315),g=ct.getParameter(32877);ct.pixelStorei(3314,s),ct.pixelStorei(32878,o),ct.pixelStorei(3316,t.min.x),ct.pixelStorei(3315,t.min.y),ct.pixelStorei(32877,t.min.z),ct.texSubImage3D(h,i,e.x,e.y,e.z,t.max.x-t.min.x+1,t.max.y-t.min.y+1,t.max.z-t.min.z+1,l,c,a),ct.pixelStorei(3314,u),ct.pixelStorei(32878,p),ct.pixelStorei(3316,d),ct.pixelStorei(3315,m),ct.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ct.generateMipmap(h),k.unbindTexture()},this.initTexture=function(t){j.setTexture2D(t,0),k.unbindTexture()},this.resetState=function(){x=0,v=0,y=null,k.reset(),lt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}exports.Group=_h,_h.prototype.isGroup=!0,Object.assign(bh.prototype,{constructor:bh,getHandSpace:function(){return null===this._hand&&(this._hand=new _h,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new _h,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new _h,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let r=null,i=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&null!==(r=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),l&&t.hand){s=!0;for(const s of t.hand.values()){const t=e.getJointPose(s,n);if(void 0===l.joints[s.jointName]){const t=new _h;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[s.jointName]=t,l.add(t)}const r=l.joints[s.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&null!==(i=e.getPose(t.gripSpace,n))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale));return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==s),this}}),Object.assign(wh.prototype,In.prototype);class Eh extends Th{}exports.WebGL1Renderer=Eh,Eh.prototype.isWebGL1Renderer=!0;class Ah{constructor(t,e=25e-5){this.name="",this.color=new _i(t),this.density=e}clone(){return new Ah(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}exports.FogExp2=Ah,Ah.prototype.isFogExp2=!0;class Lh{constructor(t,e=1,n=1e3){this.name="",this.color=new _i(t),this.near=e,this.far=n}clone(){return new Lh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}exports.Fog=Lh,Lh.prototype.isFog=!0;class Rh extends Jr{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Ch(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=wn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fn.generateUUID()}exports.Scene=Rh,Rh.prototype.isScene=!0,Object.defineProperty(Ch.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ch.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e=0){return this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new Ch(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ph=new Yn;function Dh(t,e,n,r){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}Object.defineProperties(Dh.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(Dh.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Ph.x=this.getX(e),Ph.y=this.getY(e),Ph.z=this.getZ(e),Ph.applyMatrix4(t),this.setXYZ(e,Ph.x,Ph.y,Ph.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Ph.x=this.getX(e),Ph.y=this.getY(e),Ph.z=this.getZ(e),Ph.applyNormalMatrix(t),this.setXYZ(e,Ph.x,Ph.y,Ph.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Ph.x=this.getX(e),Ph.y=this.getY(e),Ph.z=this.getZ(e),Ph.transformDirection(t),this.setXYZ(e,Ph.x,Ph.y,Ph.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Si(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Dh(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class Ih extends di{constructor(t){super(),this.type="SpriteMaterial",this.color=new _i(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Bh;exports.SpriteMaterial=Ih,Ih.prototype.isSpriteMaterial=!0;const Nh=new Yn,Fh=new Yn,Oh=new Yn,zh=new On,Gh=new On,Hh=new Tr,Uh=new Yn,kh=new Yn,Vh=new Yn,Wh=new On,jh=new On,qh=new On;class Xh extends Jr{constructor(t){if(super(),this.type="Sprite",void 0===Bh){Bh=new ji;const t=new Ch(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Bh.setIndex([0,1,2,0,2,3]),Bh.setAttribute("position",new Dh(t,3,0,!1)),Bh.setAttribute("uv",new Dh(t,2,3,!1))}this.geometry=Bh,this.material=void 0!==t?t:new Ih,this.center=new On(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fh.setFromMatrixScale(this.matrixWorld),Hh.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Oh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fh.multiplyScalar(-Oh.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;Yh(Uh.set(-.5,-.5,0),Oh,s,Fh,r,i),Yh(kh.set(.5,-.5,0),Oh,s,Fh,r,i),Yh(Vh.set(.5,.5,0),Oh,s,Fh,r,i),Wh.set(0,0),jh.set(1,0),qh.set(1,1);let o=t.ray.intersectTriangle(Uh,kh,Vh,!1,Nh);if(null===o&&(Yh(kh.set(-.5,.5,0),Oh,s,Fh,r,i),jh.set(0,1),null===(o=t.ray.intersectTriangle(Uh,Vh,kh,!1,Nh))))return;const a=t.ray.origin.distanceTo(Nh);a<t.near||a>t.far||e.push({distance:a,point:Nh.clone(),uv:ui.getUV(Nh,Uh,kh,Vh,Wh,jh,qh,new On),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Yh(t,e,n,r,i,s){zh.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Gh.x=s*zh.x-i*zh.y,Gh.y=i*zh.x+s*zh.y):Gh.copy(zh),t.copy(e),t.x+=Gh.x,t.y+=Gh.y,t.applyMatrix4(Hh)}exports.Sprite=Xh,Xh.prototype.isSprite=!0;const Zh=new Yn,Jh=new Yn;class Qh extends Jr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,r=e.length;n<r;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const n=this.levels;let r;for(r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){Zh.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Zh);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Zh.setFromMatrixPosition(t.matrixWorld),Jh.setFromMatrixPosition(this.matrixWorld);const n=Zh.distanceTo(Jh)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const t=n[r];e.object.levels.push({object:t.object.uuid,distance:t.distance})}return e}}exports.LOD=Qh;const Kh=new Yn,$h=new Wn,tu=new Wn,eu=new Yn,nu=new Tr;function ru(t,e){cs.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Tr,this.bindMatrixInverse=new Tr}function iu(){Jr.call(this),this.type="Bone"}ru.prototype=Object.assign(Object.create(cs.prototype),{constructor:ru,isSkinnedMesh:!0,copy:function(t){return cs.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new Wn,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){cs.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(t,e){const n=this.skeleton,r=this.geometry;$h.fromBufferAttribute(r.attributes.skinIndex,t),tu.fromBufferAttribute(r.attributes.skinWeight,t),Kh.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=tu.getComponent(i);if(0!==t){const r=$h.getComponent(i);nu.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(eu.copy(Kh).applyMatrix4(nu),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}),iu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:iu,isBone:!0});const su=new Tr,ou=new Tr;class au{constructor(t=[],e=[]){this.uuid=Fn.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Tr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Tr;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=t.length;i<s;i++){const r=t[i]?t[i].matrixWorld:ou;su.multiplyMatrices(r,e[i]),su.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new au(this.bones,this.boneInverses)}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new iu),this.bones.push(i),this.boneInverses.push((new Tr).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const s=n[r];t.boneInverses.push(s.toArray())}return t}}exports.Skeleton=au;const lu=new Tr,cu=new Tr,hu=[],uu=new cs;function pu(t,e,n){cs.call(this,t,e),this.instanceMatrix=new Si(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}pu.prototype=Object.assign(Object.create(cs.prototype),{constructor:pu,isInstancedMesh:!0,copy:function(t){return cs.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,r=this.count;if(uu.geometry=this.geometry,uu.material=this.material,void 0!==uu.material)for(let i=0;i<r;i++){this.getMatrixAt(i,lu),cu.multiplyMatrices(n,lu),uu.matrixWorld=cu,uu.raycast(t,hu);for(let t=0,n=hu.length;t<n;t++){const n=hu[t];n.instanceId=i,n.object=this,e.push(n)}hu.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Si(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class du extends di{constructor(t){super(),this.type="LineBasicMaterial",this.color=new _i(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}exports.LineBasicMaterial=du,du.prototype.isLineBasicMaterial=!0;const mu=new Yn,fu=new Yn,gu=new Tr,xu=new Sr,vu=new gr;function yu(t=new ji,e=new du){Jr.call(this),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}yu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:yu,isLine:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)mu.fromBufferAttribute(e,t-1),fu.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=mu.distanceTo(fu);t.setAttribute("lineDistance",new Ii(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vu.copy(n.boundingSphere),vu.applyMatrix4(r),vu.radius+=i,!1===t.ray.intersectsSphere(vu))return;gu.copy(r).invert(),xu.copy(t.ray).applyMatrix4(gu);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new Yn,c=new Yn,h=new Yn,u=new Yn,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,s.start),o=Math.min(r.count,s.start+s.count)-1;n<o;n+=p){const s=r.getX(n),o=r.getX(n+1);if(l.fromBufferAttribute(i,s),c.fromBufferAttribute(i,o),xu.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(u);p<t.near||p>t.far||e.push({distance:p,point:h.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),r=Math.min(i.count,s.start+s.count)-1;n<r;n+=p){if(l.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1),xu.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(u);r<t.near||r>t.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const _u=new Yn,bu=new Yn;function wu(t,e){yu.call(this,t,e),this.type="LineSegments"}wu.prototype=Object.assign(Object.create(yu.prototype),{constructor:wu,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)_u.fromBufferAttribute(e,t),bu.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+_u.distanceTo(bu);t.setAttribute("lineDistance",new Ii(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Mu extends yu{constructor(t,e){super(t,e),this.type="LineLoop"}}exports.LineLoop=Mu,Mu.prototype.isLineLoop=!0;class Su extends di{constructor(t){super(),this.type="PointsMaterial",this.color=new _i(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}exports.PointsMaterial=Su,Su.prototype.isPointsMaterial=!0;const Tu=new Tr,Eu=new Sr,Au=new gr,Lu=new Yn;function Ru(t=new ji,e=new Su){Jr.call(this),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}function Cu(t,e,n,r,i,s,o){const a=Eu.distanceSqToPoint(t);if(a<n){const n=new Yn;Eu.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:o})}}Ru.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Ru,isPoints:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Au.copy(n.boundingSphere),Au.applyMatrix4(r),Au.radius+=i,!1===t.ray.intersectsSphere(Au))return;Tu.copy(r).invert(),Eu.copy(t.ray).applyMatrix4(Tu);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position;if(null!==i){for(let n=Math.max(0,s.start),l=Math.min(i.count,s.start+s.count);n<l;n++){const s=i.getX(n);Lu.fromBufferAttribute(o,s),Cu(Lu,s,a,r,t,e,this)}}else{for(let n=Math.max(0,s.start),i=Math.min(o.count,s.start+s.count);n<i;n++)Lu.fromBufferAttribute(o,n),Cu(Lu,n,a,r,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class Pu extends kn{constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r,i,s,o,a,l),this.format=void 0!==o?o:Bt,this.minFilter=void 0!==s?s:gt,this.magFilter=void 0!==i?i:gt,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}exports.VideoTexture=Pu,Pu.prototype.isVideoTexture=!0;class Du extends kn{constructor(t,e,n,r,i,s,o,a,l,c,h,u){super(null,s,o,a,l,c,r,i,h,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}exports.CompressedTexture=Du,Du.prototype.isCompressedTexture=!0;class Iu extends kn{constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r,i,s,o,a,l),this.needsUpdate=!0}}exports.CanvasTexture=Iu,Iu.prototype.isCanvasTexture=!0;class Bu extends kn{constructor(t,e,n,r,i,s,o,a,l,c){if((c=void 0!==c?c:Gt)!==Gt&&c!==Ht)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Gt&&(n=St),void 0===n&&c===Ht&&(n=Dt),super(null,r,i,s,o,a,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:ut,this.minFilter=void 0!==a?a:ut,this.flipY=!1,this.generateMipmaps=!1}}exports.DepthTexture=Bu,Bu.prototype.isDepthTexture=!0;class Nu extends ji{constructor(t=1,e=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],s=[],o=[],a=[],l=new Yn,c=new On;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let h=0,u=3;h<=e;h++,u+=3){const i=n+h/e*r;l.x=t*Math.cos(i),l.y=t*Math.sin(i),s.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(s[u]/t+1)/2,c.y=(s[u+1]/t+1)/2,a.push(c.x,c.y)}for(let h=1;h<=e;h++)i.push(h,h+1,0);this.setIndex(i),this.setAttribute("position",new Ii(s,3)),this.setAttribute("normal",new Ii(o,3)),this.setAttribute("uv",new Ii(a,2))}}exports.CircleGeometry=exports.CircleBufferGeometry=Nu;class Fu extends ji{constructor(t=1,e=1,n=1,r=8,i=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],h=[],u=[],p=[];let d=0;const m=[],f=n/2;let g=0;function x(n){const i=d,s=new On,m=new Yn;let x=0;const v=!0===n?t:e,y=!0===n?1:-1;for(let t=1;t<=r;t++)h.push(0,f*y,0),u.push(0,y,0),p.push(.5,.5),d++;const _=d;for(let t=0;t<=r;t++){const e=t/r*a+o,n=Math.cos(e),i=Math.sin(e);m.x=v*i,m.y=f*y,m.z=v*n,h.push(m.x,m.y,m.z),u.push(0,y,0),s.x=.5*n+.5,s.y=.5*i*y+.5,p.push(s.x,s.y),d++}for(let t=0;t<r;t++){const e=i+t,r=_+t;!0===n?c.push(r,r+1,e):c.push(r+1,r,e),x+=3}l.addGroup(g,x,!0===n?1:2),g+=x}!function(){const s=new Yn,x=new Yn;let v=0;const y=(e-t)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,v=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+o,l=Math.sin(i),m=Math.cos(i);x.x=v*l,x.y=-g*n+f,x.z=v*m,h.push(x.x,x.y,x.z),s.set(l,y,m).normalize(),u.push(s.x,s.y,s.z),p.push(e,1-g),c.push(d++)}m.push(c)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=m[e][t],r=m[e+1][t],i=m[e+1][t+1],s=m[e][t+1];c.push(n,r,s),c.push(r,i,s),v+=6}l.addGroup(g,v,0),g+=v}(),!1===s&&(t>0&&x(!0),e>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new Ii(h,3)),this.setAttribute("normal",new Ii(u,3)),this.setAttribute("uv",new Ii(p,2))}}exports.CylinderGeometry=exports.CylinderBufferGeometry=Fu;class Ou extends Fu{constructor(t=1,e=1,n=8,r=1,i=!1,s=0,o=2*Math.PI){super(0,t,e,n,r,i,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:o}}}exports.ConeGeometry=exports.ConeBufferGeometry=Ou;class zu extends ji{constructor(t,e,n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],s=[];function o(t,e,n,r){const i=r+1,s=[];for(let o=0;o<=i;o++){s[o]=[];const r=t.clone().lerp(n,o/i),a=e.clone().lerp(n,o/i),l=i-o;for(let t=0;t<=l;t++)s[o][t]=0===t&&o===i?r:r.clone().lerp(a,t/l)}for(let o=0;o<i;o++)for(let t=0;t<2*(i-o)-1;t++){const e=Math.floor(t/2);t%2==0?(a(s[o][e+1]),a(s[o+1][e]),a(s[o][e])):(a(s[o][e+1]),a(s[o+1][e+1]),a(s[o+1][e]))}}function a(t){i.push(t.x,t.y,t.z)}function l(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function c(t,e,n,r){r<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=r/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new Yn,r=new Yn,i=new Yn;for(let s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],r),l(e[s+2],i),o(n,r,i,t)}(r),function(t){const e=new Yn;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new Yn;for(let n=0;n<i.length;n+=3){t.x=i[n+0],t.y=i[n+1],t.z=i[n+2];const r=h(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);s.push(r,1-o)}var e;(function(){const t=new Yn,e=new Yn,n=new Yn,r=new Yn,o=new On,a=new On,l=new On;for(let u=0,p=0;u<i.length;u+=9,p+=6){t.set(i[u+0],i[u+1],i[u+2]),e.set(i[u+3],i[u+4],i[u+5]),n.set(i[u+6],i[u+7],i[u+8]),o.set(s[p+0],s[p+1]),a.set(s[p+2],s[p+3]),l.set(s[p+4],s[p+5]),r.copy(t).add(e).add(n).divideScalar(3);const d=h(r);c(o,p+0,t,d),c(a,p+2,e,d),c(l,p+4,n,d)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],n=s[t+2],r=s[t+4],i=Math.max(e,n,r),o=Math.min(e,n,r);i>.9&&o<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),r<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new Ii(i,3)),this.setAttribute("normal",new Ii(i.slice(),3)),this.setAttribute("uv",new Ii(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}exports.PolyhedronGeometry=exports.PolyhedronBufferGeometry=zu;class Gu extends zu{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}}exports.DodecahedronGeometry=exports.DodecahedronBufferGeometry=Gu;const Hu=new Yn,Uu=new Yn,ku=new Yn,Vu=new ui;class Wu extends ji{constructor(t,e){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,!0===t.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=Math.pow(10,4),r=Math.cos(Fn.DEG2RAD*e),i=t.getIndex(),s=t.getAttribute("position"),o=i?i.count:s.count,a=[0,0,0],l=["a","b","c"],c=new Array(3),h={},u=[];for(let p=0;p<o;p+=3){i?(a[0]=i.getX(p),a[1]=i.getX(p+1),a[2]=i.getX(p+2)):(a[0]=p,a[1]=p+1,a[2]=p+2);const{a:t,b:e,c:o}=Vu;if(t.fromBufferAttribute(s,a[0]),e.fromBufferAttribute(s,a[1]),o.fromBufferAttribute(s,a[2]),Vu.getNormal(ku),c[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,c[1]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,c[2]=`${Math.round(o.x*n)},${Math.round(o.y*n)},${Math.round(o.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let n=0;n<3;n++){const t=(n+1)%3,e=c[n],i=c[t],s=Vu[l[n]],o=Vu[l[t]],p=`${e}_${i}`,d=`${i}_${e}`;d in h&&h[d]?(ku.dot(h[d].normal)<=r&&(u.push(s.x,s.y,s.z),u.push(o.x,o.y,o.z)),h[d]=null):p in h||(h[p]={index0:a[n],index1:a[t],normal:ku.clone()})}}for(const p in h)if(h[p]){const{index0:t,index1:e}=h[p];Hu.fromBufferAttribute(s,t),Uu.fromBufferAttribute(s,e),u.push(Hu.x,Hu.y,Hu.z),u.push(Uu.x,Uu.y,Uu.z)}this.setAttribute("position",new Ii(u,3))}}exports.EdgesGeometry=Wu;const ju={triangulate:function(t,e,n){n=n||2;const r=e&&e.length,i=r?e[0]*n:t.length;let s=qu(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,p,d;if(r&&(s=$u(t,e,s,n)),t.length>80*n){a=c=t[0],l=h=t[1];for(let e=n;e<i;e+=n)(u=t[e])<a&&(a=u),(p=t[e+1])<l&&(l=p),u>c&&(c=u),p>h&&(h=p);d=0!==(d=Math.max(c-a,h-l))?1/d:0}return Yu(s,o,n,a,l,d),o}};function qu(t,e,n,r,i){let s,o;if(i===wp(t,e,n,r)>0)for(s=e;s<n;s+=r)o=yp(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=yp(s,t[s],t[s+1],o);return o&&up(o,o.next)&&(_p(o),o=o.next),o}function Xu(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!up(r,r.next)&&0!==hp(r.prev,r,r.next))r=r.next;else{if(_p(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Yu(t,e,n,r,i,s,o){if(!t)return;!o&&s&&ip(t,r,i,s);let a,l,c=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Ju(t,r,i,s):Zu(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),_p(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?Yu(t=Qu(Xu(t),e,n),e,n,r,i,s,2):2===o&&Ku(t,e,n,r,i,s):Yu(Xu(t),e,n,r,i,s,1);break}}function Zu(t){const e=t.prev,n=t,r=t.next;if(hp(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(lp(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&hp(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ju(t,e,n,r){const i=t.prev,s=t,o=t.next;if(hp(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,c=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,h=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,u=op(a,l,e,n,r),p=op(c,h,e,n,r);let d=t.prevZ,m=t.nextZ;for(;d&&d.z>=u&&m&&m.z<=p;){if(d!==t.prev&&d!==t.next&&lp(i.x,i.y,s.x,s.y,o.x,o.y,d.x,d.y)&&hp(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&lp(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&hp(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&lp(i.x,i.y,s.x,s.y,o.x,o.y,d.x,d.y)&&hp(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==t.prev&&m!==t.next&&lp(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&hp(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function Qu(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!up(i,s)&&pp(i,r,r.next,s)&&gp(i,s)&&gp(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),_p(r),_p(r.next),r=t=s),r=r.next}while(r!==t);return Xu(r)}function Ku(t,e,n,r,i,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&cp(o,t)){let a=vp(o,t);return o=Xu(o,o.next),a=Xu(a,a.next),Yu(o,e,n,r,i,s),void Yu(a,e,n,r,i,s)}t=t.next}o=o.next}while(o!==t)}function $u(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)(c=qu(t,a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,r,!1))===c.next&&(c.steiner=!0),i.push(ap(c));for(i.sort(tp),s=0;s<i.length;s++)ep(i[s],n),n=Xu(n,n.next);return n}function tp(t,e){return t.x-e.x}function ep(t,e){if(e=np(t,e)){const n=vp(e,t);Xu(e,e.next),Xu(n,n.next)}}function np(t,e){let n=e;const r=t.x,i=t.y;let s,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>o){if(o=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(r===o)return s;const a=s,l=s.x,c=s.y;let h,u=1/0;n=s;do{r>=n.x&&n.x>=l&&r!==n.x&&lp(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),gp(n,t)&&(h<u||h===u&&(n.x>s.x||n.x===s.x&&rp(s,n)))&&(s=n,u=h)),n=n.next}while(n!==a);return s}function rp(t,e){return hp(t.prev,t,e.prev)<0&&hp(e.next,t,t.next)<0}function ip(t,e,n,r){let i=t;do{null===i.z&&(i.z=op(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,sp(i)}function sp(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function op(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ap(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function lp(t,e,n,r,i,s,o,a){return(i-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function cp(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!fp(t,e)&&(gp(t,e)&&gp(e,t)&&xp(t,e)&&(hp(t.prev,t,e.prev)||hp(t,e.prev,e))||up(t,e)&&hp(t.prev,t,t.next)>0&&hp(e.prev,e,e.next)>0)}function hp(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function up(t,e){return t.x===e.x&&t.y===e.y}function pp(t,e,n,r){const i=mp(hp(t,e,n)),s=mp(hp(t,e,r)),o=mp(hp(n,r,t)),a=mp(hp(n,r,e));return i!==s&&o!==a||(!(0!==i||!dp(t,n,e))||(!(0!==s||!dp(t,r,e))||(!(0!==o||!dp(n,t,r))||!(0!==a||!dp(n,e,r)))))}function dp(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mp(t){return t>0?1:t<0?-1:0}function fp(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&pp(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function gp(t,e){return hp(t.prev,t,t.next)<0?hp(t,e,t.next)>=0&&hp(t,t.prev,e)>=0:hp(t,e,t.prev)<0||hp(t,t.next,e)<0}function xp(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function vp(t,e){const n=new bp(t.i,t.x,t.y),r=new bp(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function yp(t,e,n,r){const i=new bp(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function _p(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function bp(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wp(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}const Mp={area:function(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Mp.area(t)<0},triangulateShape:function(t,e){const n=[],r=[],i=[];Sp(t),Tp(n,t);let s=t.length;e.forEach(Sp);for(let a=0;a<e.length;a++)r.push(s),s+=e[a].length,Tp(n,e[a]);const o=ju.triangulate(n,r);for(let a=0;a<o.length;a+=3)i.push(o.slice(a,a+3));return i}};function Sp(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Tp(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}exports.ShapeUtils=Mp;class Ep extends ji{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let o=0,a=t.length;o<a;o++){s(t[o])}function s(t){const s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:h-2,p=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const m=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:Ap;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,x,v,y,_,b=!1;m&&(g=m.getSpacedPoints(a),b=!0,c=!1,x=m.computeFrenetFrames(a,!1),v=new Yn,y=new Yn,_=new Yn),c||(d=0,h=0,u=0,p=0);const w=t.extractPoints(o);let M=w.shape;const S=w.holes;if(!Mp.isClockWise(M)){M=M.reverse();for(let t=0,e=S.length;t<e;t++){const e=S[t];Mp.isClockWise(e)&&(S[t]=e.reverse())}}const T=Mp.triangulateShape(M,S),E=M;for(let e=0,n=S.length;e<n;e++){const t=S[e];M=M.concat(t)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const L=M.length,R=T.length;function C(t,e,n){let r,i,s;const o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=o*o+a*a,u=o*c-a*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(h),p=Math.sqrt(l*l+c*c),d=e.x-a/u,m=e.y+o/u,f=((n.x-c/p-d)*c-(n.y+l/p-m)*l)/(o*c-a*l),g=(r=d+o*f-t.x)*r+(i=m+a*f-t.y)*i;if(g<=2)return new On(r,i);s=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?l>Number.EPSILON&&(t=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(c)&&(t=!0),t?(r=-a,i=o,s=Math.sqrt(h)):(r=o,i=a,s=Math.sqrt(h/2))}return new On(r/s,i/s)}const P=[];for(let e=0,n=E.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[e]=C(E[e],E[r],E[i]);const D=[];let I,B=P.concat();for(let e=0,n=S.length;e<n;e++){const t=S[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=C(t[e],t[r],t[i]);D.push(I),B=B.concat(I)}for(let e=0;e<d;e++){const t=e/d,n=h*Math.cos(t*Math.PI/2),r=u*Math.sin(t*Math.PI/2)+p;for(let e=0,i=E.length;e<i;e++){const t=A(E[e],P[e],r);O(t.x,t.y,-n)}for(let e=0,i=S.length;e<i;e++){const t=S[e];I=D[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],I[e],r);O(i.x,i.y,-n)}}}const N=u+p;for(let e=0;e<L;e++){const t=c?A(M[e],B[e],N):M[e];b?(y.copy(x.normals[0]).multiplyScalar(t.x),v.copy(x.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(y).add(v),O(_.x,_.y,_.z)):O(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<L;t++){const n=c?A(M[t],B[t],N):M[t];b?(y.copy(x.normals[e]).multiplyScalar(n.x),v.copy(x.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(y).add(v),O(_.x,_.y,_.z)):O(n.x,n.y,l/a*e)}for(let e=d-1;e>=0;e--){const t=e/d,n=h*Math.cos(t*Math.PI/2),r=u*Math.sin(t*Math.PI/2)+p;for(let e=0,i=E.length;e<i;e++){const t=A(E[e],P[e],r);O(t.x,t.y,l+n)}for(let e=0,i=S.length;e<i;e++){const t=S[e];I=D[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],I[e],r);b?O(i.x,i.y+g[a-1].y,g[a-1].x+n):O(i.x,i.y,l+n)}}}function F(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=a+2*d;t<n;t++){const n=L*t,s=L*(t+1);G(e+r+n,e+i+n,e+i+s,e+r+s)}}}function O(t,e,n){s.push(t),s.push(e),s.push(n)}function z(t,e,i){H(t),H(e),H(i);const s=r.length/3,o=f.generateTopUV(n,r,s-3,s-2,s-1);U(o[0]),U(o[1]),U(o[2])}function G(t,e,i,s){H(t),H(e),H(s),H(e),H(i),H(s);const o=r.length/3,a=f.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[3]),U(a[1]),U(a[2]),U(a[3])}function H(t){r.push(s[3*t+0]),r.push(s[3*t+1]),r.push(s[3*t+2])}function U(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(c){let t=0,e=L*t;for(let n=0;n<R;n++){const t=T[n];z(t[2]+e,t[1]+e,t[0]+e)}e=L*(t=a+2*d);for(let n=0;n<R;n++){const t=T[n];z(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<R;t++){const e=T[t];z(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=T[t];z(e[0]+L*a,e[1]+L*a,e[2]+L*a)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;F(E,e),e+=E.length;for(let n=0,r=S.length;n<r;n++){const t=S[n];F(t,e),e+=t.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Ii(r,3)),this.setAttribute("uv",new Ii(i,2)),this.computeVertexNormals()}toJSON(){const t=ji.prototype.toJSON.call(this);return Lp(this.parameters.shapes,this.parameters.options,t)}}exports.ExtrudeGeometry=exports.ExtrudeBufferGeometry=Ep;const Ap={generateTopUV:function(t,e,n,r,i){const s=e[3*n],o=e[3*n+1],a=e[3*r],l=e[3*r+1],c=e[3*i],h=e[3*i+1];return[new On(s,o),new On(a,l),new On(c,h)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[3*n],a=e[3*n+1],l=e[3*n+2],c=e[3*r],h=e[3*r+1],u=e[3*r+2],p=e[3*i],d=e[3*i+1],m=e[3*i+2],f=e[3*s],g=e[3*s+1],x=e[3*s+2];return Math.abs(a-h)<.01?[new On(o,1-l),new On(c,1-u),new On(p,1-m),new On(f,1-x)]:[new On(a,1-l),new On(h,1-u),new On(d,1-m),new On(g,1-x)]}};function Lp(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const e=t[r];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Rp extends zu{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}}exports.IcosahedronGeometry=exports.IcosahedronBufferGeometry=Rp;class Cp extends ji{constructor(t,e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=Fn.clamp(r,0,2*Math.PI);const i=[],s=[],o=[],a=1/e,l=new Yn,c=new On;for(let h=0;h<=e;h++){const i=n+h*a*r,u=Math.sin(i),p=Math.cos(i);for(let n=0;n<=t.length-1;n++)l.x=t[n].x*u,l.y=t[n].y,l.z=t[n].x*p,s.push(l.x,l.y,l.z),c.x=h/e,c.y=n/(t.length-1),o.push(c.x,c.y)}for(let h=0;h<e;h++)for(let e=0;e<t.length-1;e++){const n=e+h*t.length,r=n,s=n+t.length,o=n+t.length+1,a=n+1;i.push(r,s,a),i.push(s,o,a)}if(this.setIndex(i),this.setAttribute("position",new Ii(s,3)),this.setAttribute("uv",new Ii(o,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new Yn,i=new Yn,s=new Yn,o=e*t.length*3;for(let e=0,a=0;e<t.length;e++,a+=3)r.x=n[a+0],r.y=n[a+1],r.z=n[a+2],i.x=n[o+a+0],i.y=n[o+a+1],i.z=n[o+a+2],s.addVectors(r,i).normalize(),n[a+0]=n[o+a+0]=s.x,n[a+1]=n[o+a+1]=s.y,n[a+2]=n[o+a+2]=s.z}}}exports.LatheGeometry=exports.LatheBufferGeometry=Cp;class Pp extends zu{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}}function Dp(t,e,n){ji.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};const r=[],i=[],s=[],o=[],a=new Yn,l=new Yn,c=new Yn,h=new Yn,u=new Yn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=e+1;for(let d=0;d<=n;d++){const r=d/n;for(let n=0;n<=e;n++){const p=n/e;t(p,r,l),i.push(l.x,l.y,l.z),p-1e-5>=0?(t(p-1e-5,r,c),h.subVectors(l,c)):(t(p+1e-5,r,c),h.subVectors(c,l)),r-1e-5>=0?(t(p,r-1e-5,c),u.subVectors(l,c)):(t(p,r+1e-5,c),u.subVectors(c,l)),a.crossVectors(h,u).normalize(),s.push(a.x,a.y,a.z),o.push(p,r)}}for(let d=0;d<n;d++)for(let t=0;t<e;t++){const e=d*p+t,n=d*p+t+1,i=(d+1)*p+t+1,s=(d+1)*p+t;r.push(e,n,s),r.push(n,i,s)}this.setIndex(r),this.setAttribute("position",new Ii(i,3)),this.setAttribute("normal",new Ii(s,3)),this.setAttribute("uv",new Ii(o,2))}exports.OctahedronGeometry=exports.OctahedronBufferGeometry=Pp,Dp.prototype=Object.create(ji.prototype),Dp.prototype.constructor=Dp;class Ip extends ji{constructor(t=.5,e=1,n=8,r=1,i=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n);const o=[],a=[],l=[],c=[];let h=t;const u=(e-t)/(r=Math.max(1,r)),p=new Yn,d=new On;for(let m=0;m<=r;m++){for(let t=0;t<=n;t++){const r=i+t/n*s;p.x=h*Math.cos(r),p.y=h*Math.sin(r),a.push(p.x,p.y,p.z),l.push(0,0,1),d.x=(p.x/e+1)/2,d.y=(p.y/e+1)/2,c.push(d.x,d.y)}h+=u}for(let m=0;m<r;m++){const t=m*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,s=r+n+1,a=r+n+2,l=r+1;o.push(i,s,l),o.push(s,a,l)}}this.setIndex(o),this.setAttribute("position",new Ii(a,3)),this.setAttribute("normal",new Ii(l,3)),this.setAttribute("uv",new Ii(c,2))}}exports.RingGeometry=exports.RingBufferGeometry=Ip;class Bp extends ji{constructor(t,e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(o,a,c),o+=a,a=0;function l(t){const o=r.length/3,l=t.extractPoints(e);let c=l.shape;const h=l.holes;!1===Mp.isClockWise(c)&&(c=c.reverse());for(let e=0,n=h.length;e<n;e++){const t=h[e];!0===Mp.isClockWise(t)&&(h[e]=t.reverse())}const u=Mp.triangulateShape(c,h);for(let e=0,n=h.length;e<n;e++){const t=h[e];c=c.concat(t)}for(let e=0,n=c.length;e<n;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),s.push(t.x,t.y)}for(let e=0,r=u.length;e<r;e++){const t=u[e],r=t[0]+o,i=t[1]+o,s=t[2]+o;n.push(r,i,s),a+=3}}this.setIndex(n),this.setAttribute("position",new Ii(r,3)),this.setAttribute("normal",new Ii(i,3)),this.setAttribute("uv",new Ii(s,2))}toJSON(){const t=ji.prototype.toJSON.call(this);return Np(this.parameters.shapes,t)}}function Np(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}exports.ShapeGeometry=exports.ShapeBufferGeometry=Bp;class Fp extends ji{constructor(t=1,e=8,n=6,r=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const c=[],h=new Yn,u=new Yn,p=[],d=[],m=[],f=[];for(let g=0;g<=n;g++){const p=[],x=g/n;let v=0;0==g&&0==s?v=.5/e:g==n&&a==Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const a=n/e;h.x=-t*Math.cos(r+a*i)*Math.sin(s+x*o),h.y=t*Math.cos(s+x*o),h.z=t*Math.sin(r+a*i)*Math.sin(s+x*o),d.push(h.x,h.y,h.z),u.copy(h).normalize(),m.push(u.x,u.y,u.z),f.push(a+v,1-x),p.push(l++)}c.push(p)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=c[g][t+1],r=c[g][t],i=c[g+1][t],o=c[g+1][t+1];(0!==g||s>0)&&p.push(e,r,o),(g!==n-1||a<Math.PI)&&p.push(r,i,o)}this.setIndex(p),this.setAttribute("position",new Ii(d,3)),this.setAttribute("normal",new Ii(m,3)),this.setAttribute("uv",new Ii(f,2))}}exports.SphereGeometry=exports.SphereBufferGeometry=Fp;class Op extends zu{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}}exports.TetrahedronGeometry=exports.TetrahedronBufferGeometry=Op;class zp extends Ep{constructor(t,e={}){const n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ji;const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e),this.type="TextGeometry"}}exports.TextGeometry=exports.TextBufferGeometry=zp;class Gp extends ji{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],a=[],l=[],c=new Yn,h=new Yn,u=new Yn;for(let p=0;p<=n;p++)for(let s=0;s<=r;s++){const d=s/r*i,m=p/n*Math.PI*2;h.x=(t+e*Math.cos(m))*Math.cos(d),h.y=(t+e*Math.cos(m))*Math.sin(d),h.z=e*Math.sin(m),o.push(h.x,h.y,h.z),c.x=t*Math.cos(d),c.y=t*Math.sin(d),u.subVectors(h,c).normalize(),a.push(u.x,u.y,u.z),l.push(s/r),l.push(p/n)}for(let p=1;p<=n;p++)for(let t=1;t<=r;t++){const e=(r+1)*p+t-1,n=(r+1)*(p-1)+t-1,i=(r+1)*(p-1)+t,o=(r+1)*p+t;s.push(e,n,o),s.push(n,i,o)}this.setIndex(s),this.setAttribute("position",new Ii(o,3)),this.setAttribute("normal",new Ii(a,3)),this.setAttribute("uv",new Ii(l,2))}}exports.TorusGeometry=exports.TorusBufferGeometry=Gp;class Hp extends ji{constructor(t=1,e=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new Yn,u=new Yn,p=new Yn,d=new Yn,m=new Yn,f=new Yn,g=new Yn;for(let v=0;v<=n;++v){const o=v/n*i*Math.PI*2;x(o,i,s,t,p),x(o+.01,i,s,t,d),f.subVectors(d,p),g.addVectors(d,p),m.crossVectors(f,g),g.crossVectors(m,f),m.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,s=-e*Math.cos(i),o=e*Math.sin(i);h.x=p.x+(s*g.x+o*m.x),h.y=p.y+(s*g.y+o*m.y),h.z=p.z+(s*g.z+o*m.z),a.push(h.x,h.y,h.z),u.subVectors(h,p).normalize(),l.push(u.x,u.y,u.z),c.push(v/n),c.push(t/r)}}for(let v=1;v<=n;v++)for(let t=1;t<=r;t++){const e=(r+1)*(v-1)+(t-1),n=(r+1)*v+(t-1),i=(r+1)*v+t,s=(r+1)*(v-1)+t;o.push(e,n,s),o.push(n,i,s)}function x(t,e,n,r,i){const s=Math.cos(t),o=Math.sin(t),a=n/e*t,l=Math.cos(a);i.x=r*(2+l)*.5*s,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new Ii(a,3)),this.setAttribute("normal",new Ii(l,3)),this.setAttribute("uv",new Ii(c,2))}}exports.TorusKnotGeometry=exports.TorusKnotBufferGeometry=Hp;class Up extends ji{constructor(t,e=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const s=t.computeFrenetFrames(e,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new Yn,a=new Yn,l=new On;let c=new Yn;const h=[],u=[],p=[],d=[];function m(i){c=t.getPointAt(i/e,c);const l=s.normals[i],p=s.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),s=-Math.cos(e);a.x=s*l.x+i*p.x,a.y=s*l.y+i*p.y,a.z=s*l.z+i*p.z,a.normalize(),u.push(a.x,a.y,a.z),o.x=c.x+n*a.x,o.y=c.y+n*a.y,o.z=c.z+n*a.z,h.push(o.x,o.y,o.z)}}!function(){for(let t=0;t<e;t++)m(t);m(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)l.x=t/e,l.y=n/r,p.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),s=(r+1)*t+e,o=(r+1)*(t-1)+e;d.push(n,i,o),d.push(i,s,o)}}()}(),this.setIndex(d),this.setAttribute("position",new Ii(h,3)),this.setAttribute("normal",new Ii(u,3)),this.setAttribute("uv",new Ii(p,2))}toJSON(){const t=ji.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}exports.TubeGeometry=exports.TubeBufferGeometry=Up;class kp extends ji{constructor(t){if(super(),this.type="WireframeGeometry",!0===t.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const e=[],n=[0,0],r={},i=new Yn;if(null!==t.index){const s=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,e=a.length;t<e;++t){const e=a[t],i=e.start;for(let t=i,s=i+e.count;t<s;t+=3)for(let e=0;e<3;e++){const i=o.getX(t+e),s=o.getX(t+(e+1)%3);n[0]=Math.min(i,s),n[1]=Math.max(i,s);const a=n[0]+","+n[1];void 0===r[a]&&(r[a]={index1:n[0],index2:n[1]})}}for(const t in r){const n=r[t];i.fromBufferAttribute(s,n.index1),e.push(i.x,i.y,i.z),i.fromBufferAttribute(s,n.index2),e.push(i.x,i.y,i.z)}}else{const n=t.attributes.position;for(let t=0,r=n.count/3;t<r;t++)for(let s=0;s<3;s++){const r=3*t+s;i.fromBufferAttribute(n,r),e.push(i.x,i.y,i.z);const o=3*t+(s+1)%3;i.fromBufferAttribute(n,o),e.push(i.x,i.y,i.z)}}this.setAttribute("position",new Ii(e,3))}}exports.WireframeGeometry=kp;var Vp=Object.freeze({__proto__:null,BoxGeometry:ps,BoxBufferGeometry:ps,CircleGeometry:Nu,CircleBufferGeometry:Nu,ConeGeometry:Ou,ConeBufferGeometry:Ou,CylinderGeometry:Fu,CylinderBufferGeometry:Fu,DodecahedronGeometry:Gu,DodecahedronBufferGeometry:Gu,EdgesGeometry:Wu,ExtrudeGeometry:Ep,ExtrudeBufferGeometry:Ep,IcosahedronGeometry:Rp,IcosahedronBufferGeometry:Rp,LatheGeometry:Cp,LatheBufferGeometry:Cp,OctahedronGeometry:Pp,OctahedronBufferGeometry:Pp,ParametricGeometry:Dp,ParametricBufferGeometry:Dp,PlaneGeometry:Ds,PlaneBufferGeometry:Ds,PolyhedronGeometry:zu,PolyhedronBufferGeometry:zu,RingGeometry:Ip,RingBufferGeometry:Ip,ShapeGeometry:Bp,ShapeBufferGeometry:Bp,SphereGeometry:Fp,SphereBufferGeometry:Fp,TetrahedronGeometry:Op,TetrahedronBufferGeometry:Op,TextGeometry:zp,TextBufferGeometry:zp,TorusGeometry:Gp,TorusBufferGeometry:Gp,TorusKnotGeometry:Hp,TorusKnotBufferGeometry:Hp,TubeGeometry:Up,TubeBufferGeometry:Up,WireframeGeometry:kp});class Wp extends di{constructor(t){super(),this.type="ShadowMaterial",this.color=new _i(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}exports.ShadowMaterial=Wp,Wp.prototype.isShadowMaterial=!0;class jp extends vs{constructor(t){super(t),this.type="RawShaderMaterial"}}function qp(t){di.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _i(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rn,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(t)}function Xp(t){qp.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new On(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Fn.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}exports.RawShaderMaterial=jp,jp.prototype.isRawShaderMaterial=!0,qp.prototype=Object.create(di.prototype),qp.prototype.constructor=qp,qp.prototype.isMeshStandardMaterial=!0,qp.prototype.copy=function(t){return di.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this},Xp.prototype=Object.create(qp.prototype),Xp.prototype.constructor=Xp,Xp.prototype.isMeshPhysicalMaterial=!0,Xp.prototype.copy=function(t){return qp.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new _i).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this};class Yp extends di{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new _i(16777215),this.specular=new _i(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rn,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}exports.MeshPhongMaterial=Yp,Yp.prototype.isMeshPhongMaterial=!0;class Zp extends di{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _i(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rn,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}exports.MeshToonMaterial=Zp,Zp.prototype.isMeshToonMaterial=!0;class Jp extends di{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rn,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}exports.MeshNormalMaterial=Jp,Jp.prototype.isMeshNormalMaterial=!0;class Qp extends di{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new _i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}exports.MeshLambertMaterial=Qp,Qp.prototype.isMeshLambertMaterial=!0;class Kp extends di{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _i(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rn,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}exports.MeshMatcapMaterial=Kp,Kp.prototype.isMeshMatcapMaterial=!0;class $p extends du{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}exports.LineDashedMaterial=$p,$p.prototype.isLineDashedMaterial=!0;var td=Object.freeze({__proto__:null,ShadowMaterial:Wp,SpriteMaterial:Ih,RawShaderMaterial:jp,ShaderMaterial:vs,PointsMaterial:Su,MeshPhysicalMaterial:Xp,MeshStandardMaterial:qp,MeshPhongMaterial:Yp,MeshToonMaterial:Zp,MeshNormalMaterial:Jp,MeshLambertMaterial:Qp,MeshDepthMaterial:uh,MeshDistanceMaterial:ph,MeshBasicMaterial:bi,MeshMatcapMaterial:Kp,LineDashedMaterial:$p,LineBasicMaterial:du,Material:di});const ed={arraySlice:function(t,e,n){return ed.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const r=n[s]*e;for(let n=0;n!==e;++n)i[o++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,s=t[0];for(;void 0!==s&&void 0===s[r];)s=t[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=s[r])&&(e.push(s.time),n.push.apply(n,o)),s=t[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{void 0!==(o=s[r])&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++]}while(void 0!==s);else do{void 0!==(o=s[r])&&(e.push(s.time),n.push(o)),s=t[i++]}while(void 0!==s)},subclip:function(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const t=s.tracks[l],e=t.getValueSize(),a=[],c=[];for(let s=0;s<t.times.length;++s){const o=t.times[s]*i;if(!(o<n||o>=r)){a.push(t.times[s]);for(let n=0;n<e;++n)c.push(t.values[s*e+n])}}0!==a.length&&(t.times=ed.convertArray(a,t.times.constructor),t.values=ed.convertArray(c,t.values.constructor),o.push(t))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const e=n.tracks[o],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find(function(t){return t.name===e.name&&t.ValueTypeName===r});if(void 0===i)continue;let a=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const h=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);const u=e.times.length-1;let p;if(s<=e.times[0]){const t=a,n=l-a;p=ed.arraySlice(e.values,t,n)}else if(s>=e.times[u]){const t=u*l+a,n=t+l-a;p=ed.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=a,r=l-a;t.evaluate(s),p=ed.arraySlice(t.resultBuffer,n,r)}if("quaternion"===r){(new Xn).fromArray(p).normalize().conjugate().toArray(p)}const d=i.times.length;for(let t=0;t<d;++t){const e=t*h+c;if("quaternion"===r)Xn.multiplyQuaternionsFlat(i.values,e,p,0,i.values,e);else{const t=h-2*c;for(let n=0;n<t;++n)i.values[e+n]-=p[n]}}}return t.blendMode=Ve,t}};function nd(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function rd(t,e,n,r){nd.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function id(t,e,n,r){nd.call(this,t,e,n,r)}function sd(t,e,n,r){nd.call(this,t,e,n,r)}exports.AnimationUtils=ed,Object.assign(nd.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let s;n:{r:if(!(t<r)){for(let s=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===s)break;if(i=r,t<(r=e[++n]))break e}s=e.length;break n}if(t>=i)break t;{const o=e[1];t<o&&(n=2,i=o);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===s)break;if(r=i,t>=(i=e[--n-1]))break e}s=n,n=0}}for(;n<s;){const r=n+s>>>1;t<e[r]?s=r:n=r+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let s=0;s!==r;++s)e[s]=n[i+s];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(nd.prototype,{beforeStart_:nd.prototype.copySampleValue_,afterEnd_:nd.prototype.copySampleValue_}),rd.prototype=Object.assign(Object.create(nd.prototype),{constructor:rd,DefaultSettings_:{endingStart:Ge,endingEnd:Ge},intervalChanged_:function(t,e,n){const r=this.parameterPositions;let i=t-2,s=t+1,o=r[i],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case He:i=t,o=2*e-n;break;case Ue:o=e+r[i=r.length-2]-r[i+1];break;default:i=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case He:s=t,a=2*n-e;break;case Ue:s=1,a=n+r[1]-r[0];break;default:s=t-1,a=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=s*c},interpolate_:function(t,e,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(n-e)/(r-e),m=d*d,f=m*d,g=-u*f+2*u*m-u*d,x=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*d+1,v=(-1-p)*f+(1.5+p)*m+.5*d,y=p*f-p*m;for(let _=0;_!==o;++_)i[_]=g*s[c+_]+x*s[l+_]+v*s[a+_]+y*s[h+_];return i}}),id.prototype=Object.assign(Object.create(nd.prototype),{constructor:id,interpolate_:function(t,e,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=(n-e)/(r-e),h=1-c;for(let u=0;u!==o;++u)i[u]=s[l+u]*h+s[a+u]*c;return i}}),sd.prototype=Object.assign(Object.create(nd.prototype),{constructor:sd,interpolate_:function(t){return this.copySampleValue_(t-1)}});class od{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ed.convertArray(e,this.TimeBufferType),this.values=ed.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:ed.convertArray(t.times,Array),values:ed.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new sd(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new id(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new rd(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Fe:e=this.InterpolantFactoryMethodDiscrete;break;case Oe:e=this.InterpolantFactoryMethodLinear;break;case ze:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fe;case this.InterpolantFactoryMethodLinear:return Oe;case this.InterpolantFactoryMethodSmooth:return ze}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==i||s!==r){i>=s&&(i=(s=Math.max(s,1))-1);const t=this.getValueSize();this.times=ed.arraySlice(n,i,s),this.values=ed.arraySlice(this.values,i*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let o=0;o!==i;o++){const e=n[o];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,e),t=!1;break}if(null!==s&&s>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,e,s),t=!1;break}s=e}if(void 0!==r&&ed.isTypedArray(r))for(let o=0,a=r.length;o!==a;++o){const e=r[o];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,e),t=!1;break}}return t}optimize(){const t=ed.arraySlice(this.times),e=ed.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===ze,i=t.length-1;let s=1;for(let o=1;o<i;++o){let i=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(r)i=!0;else{const t=o*n,r=t-n,s=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[r+o]||n!==e[s+o]){i=!0;break}}}if(i){if(o!==s){t[s]=t[o];const r=o*n,i=s*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++s}}if(i>0){t[s]=t[i];for(let t=i*n,r=s*n,o=0;o!==n;++o)e[r+o]=e[t+o];++s}return s!==t.length?(this.times=ed.arraySlice(t,0,s),this.values=ed.arraySlice(e,0,s*n)):(this.times=t,this.values=e),this}clone(){const t=ed.arraySlice(this.times,0),e=ed.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}exports.KeyframeTrack=od,od.prototype.TimeBufferType=Float32Array,od.prototype.ValueBufferType=Float32Array,od.prototype.DefaultInterpolation=Oe;class ad extends od{}exports.BooleanKeyframeTrack=ad,ad.prototype.ValueTypeName="bool",ad.prototype.ValueBufferType=Array,ad.prototype.DefaultInterpolation=Fe,ad.prototype.InterpolantFactoryMethodLinear=void 0,ad.prototype.InterpolantFactoryMethodSmooth=void 0;class ld extends od{}exports.ColorKeyframeTrack=ld,ld.prototype.ValueTypeName="color";class cd extends od{}function hd(t,e,n,r){nd.call(this,t,e,n,r)}exports.NumberKeyframeTrack=cd,cd.prototype.ValueTypeName="number",hd.prototype=Object.assign(Object.create(nd.prototype),{constructor:hd,interpolate_:function(t,e,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-e)/(r-e);let l=t*o;for(let c=l+o;l!==c;l+=4)Xn.slerpFlat(i,0,s,l-o,s,l,a);return i}});class ud extends od{InterpolantFactoryMethodLinear(t){return new hd(this.times,this.values,this.getValueSize(),t)}}exports.QuaternionKeyframeTrack=ud,ud.prototype.ValueTypeName="quaternion",ud.prototype.DefaultInterpolation=Oe,ud.prototype.InterpolantFactoryMethodSmooth=void 0;class pd extends od{}exports.StringKeyframeTrack=pd,pd.prototype.ValueTypeName="string",pd.prototype.ValueBufferType=Array,pd.prototype.DefaultInterpolation=Fe,pd.prototype.InterpolantFactoryMethodLinear=void 0,pd.prototype.InterpolantFactoryMethodSmooth=void 0;class dd extends od{}exports.VectorKeyframeTrack=dd,dd.prototype.ValueTypeName="vector";class md{constructor(t,e=-1,n,r=ke){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=Fn.generateUUID(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let s=0,o=n.length;s!==o;++s)e.push(gd(n[s]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,s=n.length;i!==s;++i)e.push(od.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,s=[];for(let o=0;o<i;o++){let t=[],a=[];t.push((o+i-1)%i,o,(o+1)%i),a.push(0,1,0);const l=ed.getKeyframeOrder(t);t=ed.sortedArray(t,1,l),a=ed.sortedArray(a,1,l),r||0!==t[0]||(t.push(i),a.push(a[0])),s.push(new cd(".morphTargetInfluences["+e[o].name+"]",t,a).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let o=0,a=t.length;o<a;o++){const e=t[o],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],e,n));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const s=[],o=[];ed.flattenJSON(n,s,o,r),0!==s.length&&i.push(new t(e,s,o))}},r=[],i=t.name||"default",s=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],s=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),s.push(r.morphTarget===i?1:0)}r.push(new cd(".morphTargetInfluence["+i+"]",e,s))}a=e.length*(s||1)}else{const i=".bones["+e[c].name+"]";n(dd,i+".position",t,"pos",r),n(ud,i+".quaternion",t,"rot",r),n(dd,i+".scale",t,"scl",r)}}return 0===r.length?null:new this(i,a,r,o)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fd(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cd;case"vector":case"vector2":case"vector3":case"vector4":return dd;case"color":return ld;case"quaternion":return ud;case"bool":case"boolean":return ad;case"string":return pd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function gd(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fd(t.type);if(void 0===t.times){const e=[],n=[];ed.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}exports.AnimationClip=md;const xd={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function vd(t,e,n){const r=this;let i=!1,s=0,o=0,a=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===i&&void 0!==r.onStart&&r.onStart(t,s,o),i=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,o),s===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}exports.Cache=xd;const yd=new vd;function _d(t){this.manager=void 0!==t?t:yd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}exports.DefaultLoadingManager=yd,Object.assign(_d.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise(function(r,i){n.load(t,r,e,i)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const bd={};function wd(t){_d.call(this,t)}wd.prototype=Object.assign(Object.create(_d.prototype),{constructor:wd,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,s=xd.get(t);if(void 0!==s)return i.manager.itemStart(t),setTimeout(function(){e&&e(s),i.manager.itemEnd(t)},0),s;if(void 0!==bd[t])return void bd[t].push({onLoad:e,onProgress:n,onError:r});const o=t.match(/^data:(.*?)(;base64)?,(.*)$/);let a;if(o){const n=o[1],s=!!o[2];let a=o[3];a=decodeURIComponent(a),s&&(a=atob(a));try{let s;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const t=new Uint8Array(a.length);for(let n=0;n<a.length;n++)t[n]=a.charCodeAt(n);s="blob"===o?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;s=e.parseFromString(a,n);break;case"json":s=JSON.parse(a);break;default:s=a}setTimeout(function(){e&&e(s),i.manager.itemEnd(t)},0)}catch(l){setTimeout(function(){r&&r(l),i.manager.itemError(t),i.manager.itemEnd(t)},0)}}else{bd[t]=[],bd[t].push({onLoad:e,onProgress:n,onError:r}),(a=new XMLHttpRequest).open("GET",t,!0),a.addEventListener("load",function(e){const n=this.response,r=bd[t];if(delete bd[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),xd.add(t,n);for(let t=0,e=r.length;t<e;t++){const e=r[t];e.onLoad&&e.onLoad(n)}i.manager.itemEnd(t)}else{for(let t=0,n=r.length;t<n;t++){const n=r[t];n.onError&&n.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}},!1),a.addEventListener("progress",function(e){const n=bd[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onProgress&&r.onProgress(e)}},!1),a.addEventListener("error",function(e){const n=bd[t];delete bd[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),a.addEventListener("abort",function(e){const n=bd[t];delete bd[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)a.setRequestHeader(t,this.requestHeader[t]);a.send(null)}return i.manager.itemStart(t),a},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}});class Md extends _d{constructor(t){super(t)}load(t,e,n,r){const i=this,s=new wd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(n){try{e(i.parse(JSON.parse(n)))}catch(s){r?r(s):console.error(s),i.manager.itemError(t)}},n,r)}parse(t){const e=[];for(let n=0;n<t.length;n++){const r=md.parse(t[n]);e.push(r)}return e}}function Sd(t){_d.call(this,t)}exports.AnimationLoader=Md,Sd.prototype=Object.assign(Object.create(_d.prototype),{constructor:Sd,load:function(t,e,n,r){const i=this,s=[],o=new Du,a=new wd(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let l=0;function c(c){a.load(t[c],function(t){const n=i.parse(t,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=gt),o.image=s,o.format=n.format,o.needsUpdate=!0,e&&e(o))},n,r)}if(Array.isArray(t))for(let h=0,u=t.length;h<u;++h)c(h);else a.load(t,function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){s[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)s[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),s[e].format=n.format,s[e].width=n.width,s[e].height=n.height}o.image=s}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=gt),o.format=n.format,o.needsUpdate=!0,e&&e(o)},n,r);return o}});class Td extends _d{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,s=xd.get(t);if(void 0!==s)return i.manager.itemStart(t),setTimeout(function(){e&&e(s),i.manager.itemEnd(t)},0),s;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),xd.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o}}exports.ImageLoader=Td;class Ed extends _d{constructor(t){super(t)}load(t,e,n,r){const i=new Ss,s=new Td(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(t[n],function(t){i.images[n]=t,6===++o&&(i.needsUpdate=!0,e&&e(i))},void 0,r)}for(let l=0;l<t.length;++l)a(l);return i}}function Ad(t){_d.call(this,t)}function Ld(t){_d.call(this,t)}function Rd(){this.type="Curve",this.arcLengthDivisions=200}exports.CubeTextureLoader=Ed,Ad.prototype=Object.assign(Object.create(_d.prototype),{constructor:Ad,load:function(t,e,n,r){const i=this,s=new Es,o=new wd(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(t,function(t){const n=i.parse(t);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:ct,s.wrapT=void 0!==n.wrapT?n.wrapT:ct,s.magFilter=void 0!==n.magFilter?n.magFilter:gt,s.minFilter=void 0!==n.minFilter?n.minFilter:gt,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=yt),1===n.mipmapCount&&(s.minFilter=gt),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,e&&e(s,n))},n,r),s}}),Ld.prototype=Object.assign(Object.create(_d.prototype),{constructor:Ld,load:function(t,e,n,r){const i=new kn,s=new Td(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(n){i.image=n;const r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Bt:Nt,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i}}),Object.assign(Rd.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let s=1;s<=t;s++)i+=(n=this.getPoint(s/t)).distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let r=0;const i=n.length;let s;s=e||t*n[i-1];let o,a=0,l=i-1;for(;a<=l;)if((o=n[r=Math.floor(a+(l-a)/2)]-s)<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(n[r=l]===s)return r/(i-1);const c=n[r];return(r+(s-c)/(n[r+1]-c))/(i-1)},getTangent:function(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),s=this.getPoint(r),o=e||(i.isVector2?new On:new Yn);return o.copy(s).sub(i).normalize(),o},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new Yn,r=[],i=[],s=[],o=new Yn,a=new Tr;for(let p=0;p<=t;p++){const e=p/t;r[p]=this.getTangentAt(e,new Yn),r[p].normalize()}i[0]=new Yn,s[0]=new Yn;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),h=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let p=1;p<=t;p++){if(i[p]=i[p-1].clone(),s[p]=s[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(Fn.clamp(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(a.makeRotationAxis(o,t))}s[p].crossVectors(r[p],i[p])}if(!0===e){let e=Math.acos(Fn.clamp(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(o.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});class Cd extends Rd{constructor(t=0,e=0,n=1,r=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const n=e||new On,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const o=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*t-r*e+this.aX,l=n*e+r*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}exports.EllipseCurve=Cd,Cd.prototype.isEllipseCurve=!0;class Pd extends Cd{constructor(t,e,n,r,i,s){super(t,e,n,n,r,i,s),this.type="ArcCurve"}}function Dd(){let t=0,e=0,n=0,r=0;function i(i,s,o,a){t=i,e=o,n=-3*i+3*s-2*o-a,r=2*i-2*s+o+a}return{initCatmullRom:function(t,e,n,r,s){i(e,n,s*(n-t),s*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,s,o,a){let l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,c=(n-e)/o-(r-e)/(o+a)+(r-n)/a;i(e,n,l*=o,c*=o)},calc:function(i){const s=i*i;return t+e*i+n*s+r*(s*i)}}}exports.ArcCurve=Pd,Pd.prototype.isArcCurve=!0;const Id=new Yn,Bd=new Dd,Nd=new Dd,Fd=new Dd;class Od extends Rd{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Yn){const n=e,r=this.points,i=r.length,s=(i-(this.closed?0:1))*t;let o,a,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(Id.subVectors(r[0],r[1]).add(r[0]),o=Id);const h=r[l%i],u=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(Id.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Id),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(h),t),n=Math.pow(h.distanceToSquared(u),t),r=Math.pow(u.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Bd.initNonuniformCatmullRom(o.x,h.x,u.x,a.x,e,n,r),Nd.initNonuniformCatmullRom(o.y,h.y,u.y,a.y,e,n,r),Fd.initNonuniformCatmullRom(o.z,h.z,u.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(Bd.initCatmullRom(o.x,h.x,u.x,a.x,this.tension),Nd.initCatmullRom(o.y,h.y,u.y,a.y,this.tension),Fd.initCatmullRom(o.z,h.z,u.z,a.z,this.tension));return n.set(Bd.calc(c),Nd.calc(c),Fd.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Yn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function zd(t,e,n,r,i){const s=.5*(r-e),o=.5*(i-n),a=t*t;return(2*n-2*r+s+o)*(t*a)+(-3*n+3*r-2*s-o)*a+s*t+n}function Gd(t,e){const n=1-t;return n*n*e}function Hd(t,e){return 2*(1-t)*t*e}function Ud(t,e){return t*t*e}function kd(t,e,n,r){return Gd(t,e)+Hd(t,n)+Ud(t,r)}function Vd(t,e){const n=1-t;return n*n*n*e}function Wd(t,e){const n=1-t;return 3*n*n*t*e}function jd(t,e){return 3*(1-t)*t*t*e}function qd(t,e){return t*t*t*e}function Xd(t,e,n,r,i){return Vd(t,e)+Wd(t,n)+jd(t,r)+qd(t,i)}exports.CatmullRomCurve3=Od,Od.prototype.isCatmullRomCurve3=!0;class Yd extends Rd{constructor(t=new On,e=new On,n=new On,r=new On){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new On){const n=e,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(Xd(t,r.x,i.x,s.x,o.x),Xd(t,r.y,i.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}exports.CubicBezierCurve=Yd,Yd.prototype.isCubicBezierCurve=!0;class Zd extends Rd{constructor(t=new Yn,e=new Yn,n=new Yn,r=new Yn){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Yn){const n=e,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(Xd(t,r.x,i.x,s.x,o.x),Xd(t,r.y,i.y,s.y,o.y),Xd(t,r.z,i.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}exports.CubicBezierCurve3=Zd,Zd.prototype.isCubicBezierCurve3=!0;class Jd extends Rd{constructor(t=new On,e=new On){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new On){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new On;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}exports.LineCurve=Jd,Jd.prototype.isLineCurve=!0;class Qd extends Rd{constructor(t=new Yn,e=new Yn){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Yn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}exports.LineCurve3=Qd;class Kd extends Rd{constructor(t=new On,e=new On,n=new On){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new On){const n=e,r=this.v0,i=this.v1,s=this.v2;return n.set(kd(t,r.x,i.x,s.x),kd(t,r.y,i.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}exports.QuadraticBezierCurve=Kd,Kd.prototype.isQuadraticBezierCurve=!0;class $d extends Rd{constructor(t=new Yn,e=new Yn,n=new Yn){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Yn){const n=e,r=this.v0,i=this.v1,s=this.v2;return n.set(kd(t,r.x,i.x,s.x),kd(t,r.y,i.y,s.y),kd(t,r.z,i.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}exports.QuadraticBezierCurve3=$d,$d.prototype.isQuadraticBezierCurve3=!0;class tm extends Rd{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new On){const n=e,r=this.points,i=(r.length-1)*t,s=Math.floor(i),o=i-s,a=r[0===s?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return n.set(zd(o,a.x,l.x,c.x,h.x),zd(o,a.y,l.y,c.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new On).fromArray(n))}return this}}exports.SplineCurve=tm,tm.prototype.isSplineCurve=!0;var em=Object.freeze({__proto__:null,ArcCurve:Pd,CatmullRomCurve3:Od,CubicBezierCurve:Yd,CubicBezierCurve3:Zd,EllipseCurve:Cd,LineCurve:Jd,LineCurve3:Qd,QuadraticBezierCurve:Kd,QuadraticBezierCurve3:$d,SplineCurve:tm});class nm extends Rd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Jd(e,t))}getPoint(t){const e=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=e){const t=n[r]-e,i=this.curves[r],s=i.getLength(),o=0===s?0:1-t/s;return i.getPointAt(o)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const r=a[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new em[n.type]).fromJSON(n))}return this}}exports.CurvePath=nm;class rm extends nm{constructor(t){super(),this.type="Path",this.currentPoint=new On,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Jd(this.currentPoint.clone(),new On(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new Kd(this.currentPoint.clone(),new On(t,e),new On(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,s){const o=new Yd(this.currentPoint.clone(),new On(t,e),new On(n,r),new On(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new tm(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,r,i,s),this}absarc(t,e,n,r,i,s){return this.absellipse(t,e,n,n,r,i,s),this}ellipse(t,e,n,r,i,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,r,i,s,o,a),this}absellipse(t,e,n,r,i,s,o,a){const l=new Cd(t,e,n,r,i,s,o,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}exports.Path=rm;class im extends rm{constructor(t){super(t),this.uuid=Fn.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new rm).fromJSON(n))}return this}}exports.Shape=im;class sm extends Jr{constructor(t,e=1){super(),this.type="Light",this.color=new _i(t),this.intensity=e}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}exports.Light=sm,sm.prototype.isLight=!0;class om extends sm{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.groundColor=new _i(e)}copy(t){return sm.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}exports.HemisphereLight=om,om.prototype.isHemisphereLight=!0;const am=new Tr,lm=new Yn,cm=new Yn;class hm{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new On(512,512),this.map=null,this.mapPass=null,this.matrix=new Tr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rs,this._frameExtents=new On(1,1),this._viewportCount=1,this._viewports=[new Wn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;lm.setFromMatrixPosition(t.matrixWorld),e.position.copy(lm),cm.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(cm),e.updateMatrixWorld(),am.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(am),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class um extends hm{constructor(){super(new _s(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*Fn.RAD2DEG*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}um.prototype.isSpotLightShadow=!0;class pm extends sm{constructor(t,e,n=0,r=Math.PI/3,i=0,s=1){super(t,e),this.type="SpotLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.shadow=new um}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}exports.SpotLight=pm,pm.prototype.isSpotLight=!0;const dm=new Tr,mm=new Yn,fm=new Yn;class gm extends hm{constructor(){super(new _s(90,1,.5,500)),this._frameExtents=new On(4,2),this._viewportCount=6,this._viewports=[new Wn(2,1,1,1),new Wn(0,1,1,1),new Wn(3,1,1,1),new Wn(1,1,1,1),new Wn(3,0,1,1),new Wn(1,0,1,1)],this._cubeDirections=[new Yn(1,0,0),new Yn(-1,0,0),new Yn(0,0,1),new Yn(0,0,-1),new Yn(0,1,0),new Yn(0,-1,0)],this._cubeUps=[new Yn(0,1,0),new Yn(0,1,0),new Yn(0,1,0),new Yn(0,1,0),new Yn(0,0,1),new Yn(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),mm.setFromMatrixPosition(t.matrixWorld),n.position.copy(mm),fm.copy(n.position),fm.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(fm),n.updateMatrixWorld(),r.makeTranslation(-mm.x,-mm.y,-mm.z),dm.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dm)}}gm.prototype.isPointLightShadow=!0;class xm extends sm{constructor(t,e,n=0,r=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new gm}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}exports.PointLight=xm,xm.prototype.isPointLight=!0;class vm extends ys{constructor(t=-1,e=1,n=1,r=-1,i=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,s=n+t,o=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s=(i+=t*this.view.offsetX)+t*this.view.width,a=(o-=e*this.view.offsetY)-e*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}exports.OrthographicCamera=vm,vm.prototype.isOrthographicCamera=!0;class ym extends hm{constructor(){super(new vm(-5,5,5,-5,.5,500))}}ym.prototype.isDirectionalLightShadow=!0;class _m extends sm{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr,this.shadow=new ym}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}exports.DirectionalLight=_m,_m.prototype.isDirectionalLight=!0;class bm extends sm{constructor(t,e){super(t,e),this.type="AmbientLight"}}exports.AmbientLight=bm,bm.prototype.isAmbientLight=!0;class wm extends sm{constructor(t,e,n=10,r=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=r}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}exports.RectAreaLight=wm,wm.prototype.isRectAreaLight=!0;class Mm{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Yn)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*r),e.addScaledVector(s[2],.488603*i),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*r*1.092548),e.addScaledVector(s[5],r*i*1.092548),e.addScaledVector(s[6],.315392*(3*i*i-1)),e.addScaledVector(s[7],n*i*1.092548),e.addScaledVector(s[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*r),e.addScaledVector(s[2],1.023328*i),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*r),e.addScaledVector(s[5],.858086*r*i),e.addScaledVector(s[6],.743125*i*i-.247708),e.addScaledVector(s[7],.858086*n*i),e.addScaledVector(s[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}exports.SphericalHarmonics3=Mm,Mm.prototype.isSphericalHarmonics3=!0;class Sm extends sm{constructor(t=new Mm,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}exports.LightProbe=Sm,Sm.prototype.isLightProbe=!0;class Tm extends _d{constructor(t){super(t),this.textures={}}load(t,e,n,r){const i=this,s=new wd(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(t,function(n){try{e(i.parse(JSON.parse(n)))}catch(s){r?r(s):console.error(s),i.manager.itemError(t)}},n,r)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=new td[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new _i).setHex(t.sheen)),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const i in t.uniforms){const e=t.uniforms[i];switch(r.uniforms[i]={},e.type){case"t":r.uniforms[i].value=n(e.value);break;case"c":r.uniforms[i].value=(new _i).setHex(e.value);break;case"v2":r.uniforms[i].value=(new On).fromArray(e.value);break;case"v3":r.uniforms[i].value=(new Yn).fromArray(e.value);break;case"v4":r.uniforms[i].value=(new Wn).fromArray(e.value);break;case"m3":r.uniforms[i].value=(new zn).fromArray(e.value);break;case"m4":r.uniforms[i].value=(new Tr).fromArray(e.value);break;default:r.uniforms[i].value=e.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const i in t.extensions)r.extensions[i]=t.extensions[i];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new On).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new On).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),r}setTextures(t){return this.textures=t,this}}exports.MaterialLoader=Tm;const Em={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let r=0,i=t.length;r<i;r++)e+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(e))}catch(n){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Am(){ji.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Lm(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Si.call(this,t,e,n),this.meshPerAttribute=r||1}exports.LoaderUtils=Em,Am.prototype=Object.assign(Object.create(ji.prototype),{constructor:Am,isInstancedBufferGeometry:!0,copy:function(t){return ji.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=ji.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Lm.prototype=Object.assign(Object.create(Si.prototype),{constructor:Lm,isInstancedBufferAttribute:!0,copy:function(t){return Si.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Si.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});class Rm extends _d{constructor(t){super(t)}load(t,e,n,r){const i=this,s=new wd(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(t,function(n){try{e(i.parse(JSON.parse(n)))}catch(s){r?r(s):console.error(s),i.manager.itemError(t)}},n,r)}parse(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],s=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers[e],i=new Uint32Array(r).buffer;return n[e]=i,i}(t,i.buffer),o=new Ch(Oi(i.type,s),i.stride);return o.uuid=i.uuid,e[r]=o,o}const i=t.isInstancedBufferGeometry?new Am:new ji,s=t.data.index;if(void 0!==s){const t=Oi(s.type,s.array);i.setIndex(new Si(t,1))}const o=t.data.attributes;for(const h in o){const e=o[h];let n;if(e.isInterleavedBufferAttribute){n=new Dh(r(t.data,e.data),e.itemSize,e.offset,e.normalized)}else{const t=Oi(e.type,e.array);n=new(e.isInstancedBufferAttribute?Lm:Si)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),void 0!==e.updateRange&&(n.updateRange.offset=e.updateRange.offset,n.updateRange.count=e.updateRange.count),i.setAttribute(h,n)}const a=t.data.morphAttributes;if(a)for(const h in a){const e=a[h],n=[];for(let i=0,s=e.length;i<s;i++){const s=e[i];let o;if(s.isInterleavedBufferAttribute){o=new Dh(r(t.data,s.data),s.itemSize,s.offset,s.normalized)}else{o=new Si(Oi(s.type,s.array),s.itemSize,s.normalized)}void 0!==s.name&&(o.name=s.name),n.push(o)}i.morphAttributes[h]=n}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let h=0,u=l.length;h!==u;++h){const t=l[h];i.addGroup(t.start,t.count,t.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new Yn;void 0!==c.center&&t.fromArray(c.center),i.boundingSphere=new gr(t,c.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}}exports.BufferGeometryLoader=Rm;class Cm extends _d{constructor(t){super(t)}load(t,e,n,r){const i=this,s=""===this.path?Em.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const o=new wd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(n){let s=null;try{s=JSON.parse(n)}catch(a){return void 0!==r&&r(a),void console.error("THREE:ObjectLoader: Can't parse "+t+".",a.message)}const o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(s,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,r)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),s=this.parseImages(t.images,function(){void 0!==e&&e(l)}),o=this.parseTextures(t.textures,s),a=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,i,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in s)if(s[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new im).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse(function(t){t.isBone&&(r[t.uuid]=t)}),void 0!==t)for(let i=0,s=t.length;i<s;i++){const e=(new au).fromJSON(t[i],r);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};let r;if(void 0!==t){const i=new Rm;for(let s=0,o=t.length;s<o;s++){let o;const a=t[s];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Vp[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":o=new Vp[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Vp[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Vp[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Vp[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Vp[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Vp[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Vp[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Vp[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Vp[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new Vp[a.type]((new em[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Vp[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Vp[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let n=0,i=a.shapes.length;n<i;n++){const t=e[a.shapes[n]];r.push(t)}o=new Vp[a.type](r,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let n=0,i=a.shapes.length;n<i;n++){const t=e[a.shapes[n]];r.push(t)}const t=a.options.extrudePath;void 0!==t&&(a.options.extrudePath=(new em[t.type]).fromJSON(t)),o=new Vp[a.type](r,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new Tm;i.setTextures(e);for(let e=0,s=t.length;e<s;e++){const s=t[e];if("MultiMaterial"===s.type){const t=[];for(let e=0;e<s.materials.length;e++){const r=s.materials[e];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),t.push(n[r.uuid])}r[s.uuid]=t}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=t[n],i=md.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const n=this,r={};let i;function s(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:Oi(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new vd(e);(i=new Td(n)).setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const n=t[e],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let t=0,e=i.length;t<e;t++){const e=s(i[t]);null!==e&&(e instanceof HTMLImageElement?r[n.uuid].push(e):r[n.uuid].push(new Es(e.data,e.width,e.height)))}}else{const t=s(n.url);null!==t&&(r[n.uuid]=t)}}}return r}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,s=t.length;i<s;i++){const s=t[i];let o;void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=e[s.image];Array.isArray(a)?(o=new Ss(a),6===a.length&&(o.needsUpdate=!0)):(o=a&&a.data?new Es(a.data,a.width,a.height):new kn(a),a&&(o.needsUpdate=!0)),o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,Pm)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Dm),o.wrapT=n(s.wrap[1],Dm)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Im)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Im)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),r[s.uuid]=o}return r}parseObject(t,e,n,r){let i,s,o;function a(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new Rh,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new _i(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new Lh(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Ah(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new _s(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new vm(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new bm(t.color,t.intensity);break;case"DirectionalLight":i=new _m(t.color,t.intensity);break;case"PointLight":i=new xm(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new wm(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new pm(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new om(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=(new Sm).fromJSON(t);break;case"SkinnedMesh":i=new ru(s=a(t.geometry),o=l(t.material)),void 0!==t.bindMode&&(i.bindMode=t.bindMode),void 0!==t.bindMatrix&&i.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(i.skeleton=t.skeleton);break;case"Mesh":i=new cs(s=a(t.geometry),o=l(t.material));break;case"InstancedMesh":s=a(t.geometry),o=l(t.material);const e=t.count,n=t.instanceMatrix,r=t.instanceColor;(i=new pu(s,o,e)).instanceMatrix=new Si(new Float32Array(n.array),16),void 0!==r&&(i.instanceColor=new Si(new Float32Array(r.array),r.itemSize));break;case"LOD":i=new Qh;break;case"Line":i=new yu(a(t.geometry),l(t.material));break;case"LineLoop":i=new Mu(a(t.geometry),l(t.material));break;case"LineSegments":i=new wu(a(t.geometry),l(t.material));break;case"PointCloud":case"Points":i=new Ru(a(t.geometry),l(t.material));break;case"Sprite":i=new Xh(l(t.material));break;case"Group":i=new _h;break;case"Bone":i=new iu;break;default:i=new Jr}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(i.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children){const s=t.children;for(let t=0;t<s.length;t++)i.add(this.parseObject(s[t],e,n,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];i.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse(function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}})}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}exports.ObjectLoader=Cm;const Pm={UVMapping:et,CubeReflectionMapping:nt,CubeRefractionMapping:rt,EquirectangularReflectionMapping:it,EquirectangularRefractionMapping:st,CubeUVReflectionMapping:ot,CubeUVRefractionMapping:at},Dm={RepeatWrapping:lt,ClampToEdgeWrapping:ct,MirroredRepeatWrapping:ht},Im={NearestFilter:ut,NearestMipmapNearestFilter:pt,NearestMipmapLinearFilter:mt,LinearFilter:gt,LinearMipmapNearestFilter:xt,LinearMipmapLinearFilter:yt};function Bm(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),_d.call(this,t),this.options={premultiplyAlpha:"none"}}Bm.prototype=Object.assign(Object.create(_d.prototype),{constructor:Bm,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,s=xd.get(t);if(void 0!==s)return i.manager.itemStart(t),setTimeout(function(){e&&e(s),i.manager.itemEnd(t)},0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){xd.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),i.manager.itemStart(t)}});class Nm{constructor(){this.type="ShapePath",this.color=new _i,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new rm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,s){return this.currentPath.bezierCurveTo(t,e,n,r,i,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new im;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=e[i],o=e[s],a=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[s],a=-a,o=e[i],l=-l),t.y<n.y||t.y>o.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-a*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(o.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=o.x)return!0}}return r}const i=Mp.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);let o,a,l;const c=[];if(1===s.length)return a=s[0],(l=new im).curves=a.curves,c.push(l),c;let h=!i(s[0].getPoints());h=t?!h:h;const u=[],p=[];let d,m,f=[],g=0;p[g]=void 0,f[g]=[];for(let x=0,v=s.length;x<v;x++)o=i(d=(a=s[x]).getPoints()),(o=t?!o:o)?(!h&&p[g]&&g++,p[g]={s:new im,p:d},p[g].s.curves=a.curves,h&&g++,f[g]=[]):f[g].push({h:a,p:d[0]});if(!p[0])return n(s);if(p.length>1){let t=!1;const e=[];for(let n=0,r=p.length;n<r;n++)u[n]=[];for(let n=0,i=p.length;n<i;n++){const i=f[n];for(let s=0;s<i.length;s++){const o=i[s];let a=!0;for(let i=0;i<p.length;i++)r(o.p,p[i].p)&&(n!==i&&e.push({froms:n,tos:i,hole:s}),a?(a=!1,u[i].push(o)):t=!0);a&&u[n].push(o)}}e.length>0&&(t||(f=u))}for(let x=0,v=p.length;x<v;x++){l=p[x].s,c.push(l);for(let t=0,e=(m=f[x]).length;t<e;t++)l.holes.push(m[t].h)}return c}}exports.ShapePath=Nm;class Fm{constructor(t){this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=Om(t,e,this.data);for(let i=0,s=r.length;i<s;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}function Om(t,e,n){const r=Array.from(t),i=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[];let a=0,l=0;for(let c=0;c<r.length;c++){const t=r[c];if("\n"===t)a=0,l-=s;else{const e=zm(t,i,a,l,n);a+=e.offsetX,o.push(e.path)}}return o}function zm(t,e,n,r,i){const s=i.glyphs[t]||i.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");const o=new Nm;let a,l,c,h,u,p,d,m;if(s.o){const t=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let i=0,s=t.length;i<s;){switch(t[i++]){case"m":a=t[i++]*e+n,l=t[i++]*e+r,o.moveTo(a,l);break;case"l":a=t[i++]*e+n,l=t[i++]*e+r,o.lineTo(a,l);break;case"q":c=t[i++]*e+n,h=t[i++]*e+r,u=t[i++]*e+n,p=t[i++]*e+r,o.quadraticCurveTo(u,p,c,h);break;case"b":c=t[i++]*e+n,h=t[i++]*e+r,u=t[i++]*e+n,p=t[i++]*e+r,d=t[i++]*e+n,m=t[i++]*e+r,o.bezierCurveTo(u,p,d,m,c,h)}}}return{offsetX:s.ha*e,path:o}}exports.Font=Fm,Fm.prototype.isFont=!0;class Gm extends _d{constructor(t){super(t)}load(t,e,n,r){const i=this,s=new wd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials),s.load(t,function(t){let n;try{n=JSON.parse(t)}catch(s){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const r=i.parse(n);e&&e(r)},n,r)}parse(t){return new Fm(t)}}let Hm;exports.FontLoader=Gm;const Um={getContext:function(){return void 0===Hm&&(Hm=new(window.AudioContext||window.webkitAudioContext)),Hm},setContext:function(t){Hm=t}};exports.AudioContext=Um;class km extends _d{constructor(t){super(t)}load(t,e,n,r){const i=this,s=new wd(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(n){try{const o=n.slice(0);Um.getContext().decodeAudioData(o,function(t){e(t)})}catch(s){r?r(s):console.error(s),i.manager.itemError(t)}},n,r)}}exports.AudioLoader=km;class Vm extends Sm{constructor(t,e,n=1){super(void 0,n);const r=(new _i).set(t),i=(new _i).set(e),s=new Yn(r.r,r.g,r.b),o=new Yn(i.r,i.g,i.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}}exports.HemisphereLightProbe=Vm,Vm.prototype.isHemisphereLightProbe=!0;class Wm extends Sm{constructor(t,e=1){super(void 0,e);const n=(new _i).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}exports.AmbientLightProbe=Wm,Wm.prototype.isAmbientLightProbe=!0;const jm=new Tr,qm=new Tr;class Xm{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _s,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _s,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),r=e.eyeSep/2,i=r*e.near/e.focus,s=e.near*Math.tan(Fn.DEG2RAD*e.fov*.5)/e.zoom;let o,a;qm.elements[12]=-r,jm.elements[12]=r,o=-s*e.aspect+i,a=s*e.aspect+i,n.elements[0]=2*e.near/(a-o),n.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(n),o=-s*e.aspect-i,a=s*e.aspect-i,n.elements[0]=2*e.near/(a-o),n.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(qm),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(jm)}}exports.StereoCamera=Xm;class Ym{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Zm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Zm();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Zm(){return("undefined"==typeof performance?Date:performance).now()}exports.Clock=Ym;const Jm=new Yn,Qm=new Xn,Km=new Yn,$m=new Yn;class tf extends Jr{constructor(){super(),this.type="AudioListener",this.context=Um.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ym}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Jm,Qm,Km),$m.set(0,0,-1).applyQuaternion(Qm),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Jm.x,t),e.positionY.linearRampToValueAtTime(Jm.y,t),e.positionZ.linearRampToValueAtTime(Jm.z,t),e.forwardX.linearRampToValueAtTime($m.x,t),e.forwardY.linearRampToValueAtTime($m.y,t),e.forwardZ.linearRampToValueAtTime($m.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Jm.x,Jm.y,Jm.z),e.setOrientation($m.x,$m.y,$m.z,n.x,n.y,n.z)}}exports.AudioListener=tf;class ef extends Jr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}exports.Audio=ef;const nf=new Yn,rf=new Xn,sf=new Yn,of=new Yn;class af extends ef{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(nf,rf,sf),of.set(0,0,1).applyQuaternion(rf);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(nf.x,t),e.positionY.linearRampToValueAtTime(nf.y,t),e.positionZ.linearRampToValueAtTime(nf.z,t),e.orientationX.linearRampToValueAtTime(of.x,t),e.orientationY.linearRampToValueAtTime(of.y,t),e.orientationZ.linearRampToValueAtTime(of.z,t)}else e.setPosition(nf.x,nf.y,nf.z),e.setOrientation(of.x,of.y,of.z)}}exports.PositionalAudio=af;class lf{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}exports.AudioAnalyser=lf;class cf{constructor(t,e,n){let r,i,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==r;++t)n[i+t]=n[t];s=e}else{const t=e/(s+=e);this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){o.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,s=r;i!==s;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let s=0;s!==i;++s)t[e+s]=t[n+s]}_slerp(t,e,n,r){Xn.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const s=this._workIndex*i;Xn.multiplyQuaternionsFlat(t,s,t,e,t,n),Xn.slerpFlat(t,e,t,e,t,s,r)}_lerp(t,e,n,r,i){const s=1-r;for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]*s+t[n+o]*r}}_lerpAdditive(t,e,n,r,i){for(let s=0;s!==i;++s){const i=e+s;t[i]=t[i]+t[n+s]*r}}}exports.PropertyMixer=cf;const hf="\\[\\]\\.:\\/",uf=new RegExp("[\\[\\]\\.:\\/]","g"),pf="[^\\[\\]\\.:\\/]",df="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",mf=/((?:WC+[\/:])*)/.source.replace("WC",pf),ff=/(WCOD+)?/.source.replace("WCOD",df),gf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pf),xf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pf),vf=new RegExp("^"+mf+ff+gf+xf+"$"),yf=["material","materials","bones"];function _f(t,e,n){const r=n||bf.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function bf(t,e,n){this.path=e,this.parsedPath=n||bf.parseTrackName(e),this.node=bf.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(_f.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(bf,{Composite:_f,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new bf.Composite(t,e,n):new bf(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(uf,"")},parseTrackName:function(t){const e=vf.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==yf.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const s=n(i.children);if(s)return s}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(bf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=bf.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const s=t[r];if(void 0===s){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(bf.prototype,{_getValue_unbound:bf.prototype.getValue,_setValue_unbound:bf.prototype.setValue});class wf{constructor(){this.uuid=Fn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let o=void 0,a=t.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const h=arguments[c],u=h.uuid;let p=e[u];if(void 0===p){p=a++,e[u]=p,t.push(h);for(let t=0,e=s;t!==e;++t)i[t].push(new bf(h,n[t],r[t]))}else if(p<l){o=t[p];const a=--l,c=t[a];e[c.uuid]=p,t[p]=c,e[u]=a,t[a]=h;for(let t=0,e=s;t!==e;++t){const e=i[t],s=e[a];let o=e[p];e[p]=s,void 0===o&&(o=new bf(h,n[t],r[t])),e[a]=o}}else t[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,l=e[a];if(void 0!==l&&l>=i){const s=i++,c=t[s];e[c.uuid]=l,t[l]=c,e[a]=s,t[s]=o;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[s],i=e[l];e[l]=r,e[s]=i}}}this.nCachedObjects_=i}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=t.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,l=e[a];if(void 0!==l)if(delete e[a],l<i){const o=--i,a=t[o],c=--s,h=t[c];e[a.uuid]=l,t[l]=a,e[h.uuid]=o,t[o]=h,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[o],i=e[c];e[l]=r,e[o]=i,e.pop()}}else{const i=--s,o=t[i];i>0&&(e[o.uuid]=l),t[l]=o,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[l]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const s=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,h=new Array(l);r=i.length,n[t]=r,s.push(t),o.push(e),i.push(h);for(let u=c,p=a.length;u!==p;++u){const n=a[u];h[u]=new bf(n,t,e)}return h}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];e[t[o]]=n,s[n]=a,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}exports.AnimationObjectGroup=wf,wf.prototype.isAnimationObjectGroup=!0;class Mf{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,s=i.length,o=new Array(s),a={endingStart:Ge,endingEnd:Ge};for(let l=0;l!==s;++l){const t=i[l].createInterpolant(null);o[l]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Be,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,s=n/r;t.warp(1,i,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=i,a[1]=i+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const s=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Ve:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulateAdditive(o);break;case ke:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulate(r,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const s=n===Ne;if(0===t)return-1===i?r:s&&1==(1&i)?e-r:r;if(n===Ie){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=He,r.endingEnd=He):(r.endingStart=t?this.zeroSlopeAtStart?He:Ge:Ue,r.endingEnd=e?this.zeroSlopeAtEnd?He:Ge:Ue)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=i,a[0]=e,o[1]=i+t,a[1]=n,this}}class Sf extends In{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let h=0;h!==i;++h){const t=r[h],i=t.name;let l=c[i];if(void 0!==l)s[h]=l;else{if(void 0!==(l=s[h])){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,i));continue}const r=e&&e._propertyBindings[h].binding.parsedPath;++(l=new cf(bf.create(n,i,r),t.ValueTypeName,t.getValueSize())).referenceCount,this._addInactiveBinding(l,a,i),s[h]=l}o[h].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let s=i[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,s=this._actionsByClip,o=s[i],a=o.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const t=e[n];0==--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[e];void 0===s&&(s={},r[e]=s),s[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[i],0===Object.keys(o).length&&delete s[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&((n=new id(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let s="string"==typeof t?md.findByName(r,t):t;const o=null!==s?s.uuid:t,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:ke),void 0!==a){const t=a.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Mf(this,s,e,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?md.findByName(n,t):t,s=i?i.uuid:t,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),s=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(r,t,i,s)}const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,s=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,e[i]=s,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const i in n){const t=n[i].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const i in r){const t=r[i];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}exports.AnimationMixer=Sf,Sf.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Tf{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Tf(void 0===this.value.clone?this.value:this.value.clone())}}function Ef(t,e,n){Ch.call(this,t,e),this.meshPerAttribute=n||1}function Af(t,e,n,r,i){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function Lf(t,e,n=0,r=1/0){this.ray=new Sr(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Fr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Rf(t,e){return t.distance-e.distance}function Cf(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Cf(r[t],e,n,!0)}}exports.Uniform=Tf,Ef.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Ef,isInstancedInterleavedBuffer:!0,copy:function(t){return Ch.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Ch.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Ch.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(Af.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Af.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(Lf.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(t,e=!1,n=[]){return Cf(t,this,n,e),n.sort(Rf),n},intersectObjects:function(t,e=!1,n=[]){for(let r=0,i=t.length;r<i;r++)Cf(t[r],this,n,e);return n.sort(Rf),n}});class Pf{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Fn.clamp(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}exports.Spherical=Pf;class Df{constructor(t=1,e=0,n=0){return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}exports.Cylindrical=Df;const If=new On;class Bf{constructor(t=new On(1/0,1/0),e=new On(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=If.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new On),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new On),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new On),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new On),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return If.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}exports.Box2=Bf,Bf.prototype.isBox2=!0;const Nf=new Yn,Ff=new Yn;class Of{constructor(t=new Yn,e=new Yn){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Yn),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Yn),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Yn),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Nf.subVectors(t,this.start),Ff.subVectors(this.end,this.start);const n=Ff.dot(Ff);let r=Ff.dot(Nf)/n;return e&&(r=Fn.clamp(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Yn),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}function zf(t){Jr.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}exports.Line3=Of,zf.prototype=Object.create(Jr.prototype),zf.prototype.constructor=zf,zf.prototype.isImmediateRenderObject=!0;const Gf=new Yn;class Hf extends Jr{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new ji,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){const t=s/a*Math.PI*2,e=o/a*Math.PI*2;r.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new Ii(r,3));const i=new du({fog:!1,toneMapped:!1});this.cone=new wu(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Gf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Gf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}exports.SpotLightHelper=Hf;const Uf=new Yn,kf=new Tr,Vf=new Tr;class Wf extends wu{constructor(t){const e=jf(t),n=new ji,r=[],i=[],s=new _i(0,0,1),o=new _i(0,1,0);for(let a=0;a<e.length;a++){const t=e[a];t.parent&&t.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Ii(r,3)),n.setAttribute("color",new Ii(i,3)),super(n,new du({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");Vf.copy(this.root.matrixWorld).invert();for(let i=0,s=0;i<e.length;i++){const t=e[i];t.parent&&t.parent.isBone&&(kf.multiplyMatrices(Vf,t.matrixWorld),Uf.setFromMatrixPosition(kf),r.setXYZ(s,Uf.x,Uf.y,Uf.z),kf.multiplyMatrices(Vf,t.parent.matrixWorld),Uf.setFromMatrixPosition(kf),r.setXYZ(s+1,Uf.x,Uf.y,Uf.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function jf(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,jf(t.children[n]));return e}exports.SkeletonHelper=Wf;class qf extends cs{constructor(t,e,n){super(new Fp(e,4,2),new bi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}exports.PointLightHelper=qf;const Xf=new Yn,Yf=new _i,Zf=new _i;class Jf extends Jr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Pp(e);r.rotateY(.5*Math.PI),this.material=new bi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(3*i.count);r.setAttribute("color",new Si(s,3)),this.add(new cs(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Yf.copy(this.light.color),Zf.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?Yf:Zf;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Xf.setFromMatrixPosition(this.light.matrixWorld).negate())}}exports.HemisphereLightHelper=Jf;class Qf extends wu{constructor(t=10,e=10,n=4473924,r=8947848){n=new _i(n),r=new _i(r);const i=e/2,s=t/e,o=t/2,a=[],l=[];for(let h=0,u=0,p=-o;h<=e;h++,p+=s){a.push(-o,0,p,o,0,p),a.push(p,0,-o,p,0,o);const t=h===i?n:r;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const c=new ji;c.setAttribute("position",new Ii(a,3)),c.setAttribute("color",new Ii(l,3)),super(c,new du({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}exports.GridHelper=Qf;class Kf extends wu{constructor(t=10,e=16,n=8,r=64,i=4473924,s=8947848){i=new _i(i),s=new _i(s);const o=[],a=[];for(let c=0;c<=e;c++){const n=c/e*(2*Math.PI),r=Math.sin(n)*t,l=Math.cos(n)*t;o.push(0,0,0),o.push(r,0,l);const h=1&c?i:s;a.push(h.r,h.g,h.b),a.push(h.r,h.g,h.b)}for(let c=0;c<=n;c++){const e=1&c?i:s,l=t-t/n*c;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),i=Math.sin(n)*l,s=Math.cos(n)*l;o.push(i,0,s),a.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),i=Math.sin(n)*l,s=Math.cos(n)*l,o.push(i,0,s),a.push(e.r,e.g,e.b)}}const l=new ji;l.setAttribute("position",new Ii(o,3)),l.setAttribute("color",new Ii(a,3)),super(l,new du({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}exports.PolarGridHelper=Kf;const $f=new Yn,tg=new Yn,eg=new Yn;class ng extends Jr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new ji;r.setAttribute("position",new Ii([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new du({fog:!1,toneMapped:!1});this.lightPlane=new yu(r,i),this.add(this.lightPlane),(r=new ji).setAttribute("position",new Ii([0,0,0,0,0,1],3)),this.targetLine=new yu(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){$f.setFromMatrixPosition(this.light.matrixWorld),tg.setFromMatrixPosition(this.light.target.matrixWorld),eg.subVectors(tg,$f),this.lightPlane.lookAt(tg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tg),this.targetLine.scale.z=eg.length()}}exports.DirectionalLightHelper=ng;const rg=new Yn,ig=new ys;class sg extends wu{constructor(t){const e=new ji,n=new du({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={},o=new _i(16755200),a=new _i(16711680),l=new _i(43775),c=new _i(16777215),h=new _i(3355443);function u(t,e,n){p(t,n),p(e,n)}function p(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(r.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",a),u("p","n2",a),u("p","n3",a),u("p","n4",a),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",c),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),e.setAttribute("position",new Ii(r,3)),e.setAttribute("color",new Ii(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const t=this.geometry,e=this.pointMap;ig.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),og("c",e,t,ig,0,0,-1),og("t",e,t,ig,0,0,1),og("n1",e,t,ig,-1,-1,-1),og("n2",e,t,ig,1,-1,-1),og("n3",e,t,ig,-1,1,-1),og("n4",e,t,ig,1,1,-1),og("f1",e,t,ig,-1,-1,1),og("f2",e,t,ig,1,-1,1),og("f3",e,t,ig,-1,1,1),og("f4",e,t,ig,1,1,1),og("u1",e,t,ig,.7,1.1,-1),og("u2",e,t,ig,-.7,1.1,-1),og("u3",e,t,ig,0,2,-1),og("cf1",e,t,ig,-1,0,1),og("cf2",e,t,ig,1,0,1),og("cf3",e,t,ig,0,-1,1),og("cf4",e,t,ig,0,1,1),og("cn1",e,t,ig,-1,0,-1),og("cn2",e,t,ig,1,0,-1),og("cn3",e,t,ig,0,-1,-1),og("cn4",e,t,ig,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function og(t,e,n,r,i,s,o){rg.set(i,s,o).unproject(r);const a=e[t];if(void 0!==a){const t=n.getAttribute("position");for(let e=0,n=a.length;e<n;e++)t.setXYZ(a[e],rg.x,rg.y,rg.z)}}exports.CameraHelper=sg;const ag=new Qn;class lg extends wu{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new ji;i.setIndex(new Si(n,1)),i.setAttribute("position",new Si(r,3)),super(i,new du({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ag.setFromObject(this.object),ag.isEmpty())return;const e=ag.min,n=ag.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return wu.prototype.copy.call(this,t),this.object=t.object,this}}exports.BoxHelper=lg;class cg extends wu{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ji;r.setIndex(new Si(n,1)),r.setAttribute("position",new Ii([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new du({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}exports.Box3Helper=cg;class hg extends yu{constructor(t,e=1,n=16776960){const r=n,i=new ji;i.setAttribute("position",new Ii([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new du({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const s=new ji;s.setAttribute("position",new Ii([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new cs(s,new bi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?p:u,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}exports.PlaneHelper=hg;const ug=new Yn;let pg,dg;class mg extends Jr{constructor(t=new Yn(0,0,1),e=new Yn(0,0,0),n=1,r=16776960,i=.2*n,s=.2*i){super(),this.type="ArrowHelper",void 0===pg&&((pg=new ji).setAttribute("position",new Ii([0,0,0,0,1,0],3)),(dg=new Fu(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new yu(pg,new du({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new cs(dg,new bi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{ug.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(ug,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}exports.ArrowHelper=mg;class fg extends wu{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ji;n.setAttribute("position",new Ii(e,3)),n.setAttribute("color",new Ii([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new du({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}exports.AxesHelper=fg;const gg=new Float32Array(1),xg=new Int32Array(gg.buffer),vg={toHalfFloat:function(t){gg[0]=t;const e=xg[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&e):i<113?n|=((r|=2048)>>114-i)+(r>>113-i&1):(n|=i-112<<10|r>>1,n+=1&r)}};exports.DataUtils=vg;const yg=4,_g=8,bg=Math.pow(2,_g),wg=[.125,.215,.35,.446,.526,.582],Mg=_g-yg+1+wg.length,Sg=20,Tg={[Xe]:0,[Ye]:1,[Je]:2,[Ke]:3,[$e]:4,[tn]:5,[Ze]:6},Eg=new bi({side:p,depthWrite:!1,depthTest:!1}),Ag=new cs(new ps,Eg),Lg=new vm,{_lodPlanes:Rg,_sizeLods:Cg,_sigmas:Pg}=Hg(),Dg=new _i;let Ig=null;const Bg=(1+Math.sqrt(5))/2,Ng=1/Bg,Fg=[new Yn(1,1,1),new Yn(-1,1,1),new Yn(1,1,-1),new Yn(-1,1,-1),new Yn(0,Bg,Ng),new Yn(0,Bg,-Ng),new Yn(Ng,0,Bg),new Yn(-Ng,0,Bg),new Yn(Bg,Ng,0),new Yn(-Bg,Ng,0)];function Og(t){const e=Math.max(t.r,t.g,t.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);return t.multiplyScalar(Math.pow(2,-n)),(n+128)/255}class zg{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=Vg(Sg),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Ig=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=jg(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Wg(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Rg.length;t++)Rg[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Ig),t.scissorTest=!1,kg(t,0,0,t.width,t.height)}_fromTexture(t){Ig=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:ut,minFilter:ut,generateMipmaps:!1,type:bt,format:zt,encoding:Gg(t)?t.encoding:Je,depthBuffer:!1},n=Ug(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Ug(e),n}_compileMaterial(t){const e=new cs(Rg[0],t);this._renderer.compile(e,Lg)}_sceneToCubeUV(t,e,n,r){const i=new _s(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.outputEncoding,h=a.toneMapping;a.getClearColor(Dg),a.toneMapping=Z,a.outputEncoding=Xe,a.autoClear=!1;let u=!1;const p=t.background;if(p){if(p.isColor){Eg.color.copy(p).convertSRGBToLinear(),t.background=null;const e=Og(Eg.color);Eg.opacity=e,u=!0}}else{Eg.color.copy(Dg).convertSRGBToLinear();const t=Og(Eg.color);Eg.opacity=t,u=!0}for(let d=0;d<6;d++){const e=d%3;0==e?(i.up.set(0,s[d],0),i.lookAt(o[d],0,0)):1==e?(i.up.set(0,0,s[d]),i.lookAt(0,o[d],0)):(i.up.set(0,s[d],0),i.lookAt(0,0,o[d])),kg(r,e*bg,d>2?bg:0,bg,bg),a.setRenderTarget(r),u&&a.render(Ag,i),a.render(t,i)}a.toneMapping=h,a.outputEncoding=c,a.autoClear=l}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=jg()):null==this._equirectShader&&(this._equirectShader=Wg());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,i=new cs(Rg[0],r),s=r.uniforms;s.envMap.value=t,t.isCubeTexture||s.texelSize.value.set(1/t.image.width,1/t.image.height),s.inputEncoding.value=Tg[t.encoding],s.outputEncoding.value=Tg[e.texture.encoding],kg(e,0,0,3*bg,2*bg),n.setRenderTarget(e),n.render(i,Lg)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<Mg;r++){const e=Math.sqrt(Pg[r]*Pg[r]-Pg[r-1]*Pg[r-1]),n=Fg[(r-1)%Fg.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,r,"latitudinal",i),this._halfBlur(s,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new cs(Rg[r],l),h=l.uniforms,u=Cg[n]-1,p=isFinite(i)?Math.PI/(2*u):2*Math.PI/(2*Sg-1),d=i/p,m=isFinite(i)?1+Math.floor(3*d):Sg;m>Sg&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Sg}`);const f=[];let g=0;for(let v=0;v<Sg;++v){const t=v/d,e=Math.exp(-t*t/2);f.push(e),0==v?g+=e:v<m&&(g+=2*e)}for(let v=0;v<f.length;v++)f[v]=f[v]/g;h.envMap.value=t.texture,h.samples.value=m,h.weights.value=f,h.latitudinal.value="latitudinal"===s,o&&(h.poleAxis.value=o),h.dTheta.value=p,h.mipInt.value=_g-n,h.inputEncoding.value=Tg[t.texture.encoding],h.outputEncoding.value=Tg[t.texture.encoding];const x=Cg[r];kg(e,3*Math.max(0,bg-2*x),(0===r?0:2*bg)+2*x*(r>_g-yg?r-_g+yg:0),3*x,2*x),a.setRenderTarget(e),a.render(c,Lg)}}function Gg(t){return void 0!==t&&t.type===bt&&(t.encoding===Xe||t.encoding===Ye||t.encoding===Ze)}function Hg(){const t=[],e=[],n=[];let r=_g;for(let i=0;i<Mg;i++){const s=Math.pow(2,r);e.push(s);let o=1/s;i>_g-yg?o=wg[i-_g+yg-1]:0==i&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,h=[l,l,c,l,c,c,l,l,c,c,l,c],u=6,p=6,d=3,m=2,f=1,g=new Float32Array(d*p*u),x=new Float32Array(m*p*u),v=new Float32Array(f*p*u);for(let t=0;t<u;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(r,d*p*t),x.set(h,m*p*t);const i=[t,t,t,t,t,t];v.set(i,f*p*t)}const y=new ji;y.setAttribute("position",new Si(g,d)),y.setAttribute("uv",new Si(x,m)),y.setAttribute("faceIndex",new Si(v,f)),t.push(y),r>yg&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Ug(t){const e=new jn(3*bg,3*bg,t);return e.texture.mapping=ot,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function kg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Vg(t){const e=new Float32Array(t),n=new Yn(0,1,0);return new jp({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Tg[Xe]},outputEncoding:{value:Tg[Xe]}},vertexShader:qg(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Xg()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:g,depthTest:!1,depthWrite:!1})}function Wg(){const t=new On(1,1);return new jp({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Tg[Xe]},outputEncoding:{value:Tg[Xe]}},vertexShader:qg(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Xg()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:g,depthTest:!1,depthWrite:!1})}function jg(){return new jp({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Tg[Xe]},outputEncoding:{value:Tg[Xe]}},vertexShader:qg(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Xg()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:g,depthTest:!1,depthWrite:!1})}function qg(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Xg(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}exports.PMREMGenerator=zg;const Yg=0;exports.LineStrip=0;const Zg=1;exports.LinePieces=1;const Jg=0;exports.NoColors=0;const Qg=1;exports.FaceColors=1;const Kg=2;function $g(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function tx(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function ex(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ru(t,e)}function nx(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Xh(t)}function rx(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ru(t,e)}function ix(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Su(t)}function sx(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Su(t)}function ox(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Su(t)}function ax(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Yn(t,e,n)}function lx(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Si(t,e).setUsage(Mn)}function cx(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ti(t,e)}function hx(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ei(t,e)}function ux(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ai(t,e)}function px(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Li(t,e)}function dx(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ri(t,e)}function mx(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ci(t,e)}function fx(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Pi(t,e)}function gx(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ii(t,e)}function xx(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Bi(t,e)}function vx(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fg(t)}function yx(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new lg(t,e)}function _x(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new wu(new Wu(t.geometry),new du({color:void 0!==e?e:16777215}))}function bx(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new wu(new kp(t.geometry),new du({color:void 0!==e?e:16777215}))}function wx(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new wd(t)}function Mx(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ad(t)}function Sx(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Ts(t,n)}function Tx(){console.error("THREE.CanvasRenderer has been removed")}function Ex(){console.error("THREE.JSONLoader has been removed.")}exports.VertexColors=2,Rd.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Rd.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},rm.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},Qf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Wf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},_d.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Em.extractUrlBase(t)},_d.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Bf.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Bf.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Bf.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Bf.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Qn.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Qn.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Qn.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Qn.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Qn.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},gr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Rs.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Of.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Fn.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},Fn.nearestPowerOfTwo=function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Fn.floorPowerOfTwo(t)},Fn.nextPowerOfTwo=function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Fn.ceilPowerOfTwo(t)},zn.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},zn.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},zn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},zn.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},zn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},zn.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Tr.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Tr.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Tr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Yn).setFromMatrixColumn(this,3)},Tr.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Tr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Tr.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tr.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Tr.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Tr.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Tr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Tr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Tr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Tr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Tr.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Tr.prototype.makeFrustum=function(t,e,n,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,s)},Tr.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},ti.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Xn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Xn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Sr.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Sr.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},Sr.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},ui.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ui.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},ui.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},ui.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},ui.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},ui.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ui.getBarycoord(t,e,n,r,i)},ui.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ui.getNormal(t,e,n,r)},im.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},im.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ep(this,t)},im.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Bp(this,t)},On.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},On.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},On.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Yn.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Yn.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Yn.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Yn.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Yn.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Yn.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Yn.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Yn.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Yn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Wn.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Wn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Jr.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Jr.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Jr.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Jr.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Jr.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Jr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),cs.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(cs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ru.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Rd.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),_s.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(sm.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Si.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Mn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Mn)}}}),Si.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Mn:wn),this},Si.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Si.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ji.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},ji.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Si(arguments[1],arguments[2])))},ji.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},ji.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ji.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ji.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},ji.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(ji.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Am.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(Lf.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Ch.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Mn},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Ch.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Mn:wn),this},Ch.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ep.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ep.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ep.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Rh.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Tf.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(di.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _i}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Xp.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(vs.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Th.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},Th.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},Th.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Th.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Th.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Th.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Th.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Th.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Th.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Th.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Th.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Th.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Th.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Th.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Th.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},Th.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Th.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Th.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Th.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Th.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Th.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Th.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Th.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Th.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Th.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Th.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Ye:Xe}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(fh.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(jn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),ef.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new km).load(t,function(t){e.setBuffer(t)}),this},lf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ms.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Ms.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},Hn.crossOrigin=void 0,Hn.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Ld;i.setCrossOrigin(this.crossOrigin);const s=i.load(t,n,void 0,r);return e&&(s.mapping=e),s},Hn.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Ed;i.setCrossOrigin(this.crossOrigin);const s=i.load(t,n,void 0,r);return e&&(s.mapping=e),s},Hn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Hn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Ax={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Lx(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}exports.SceneUtils=Ax,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"127"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="127");
},{}],"HdUX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferGeometryUtils=void 0;var e=require("../../../build/three.module.js"),t={computeTangents:function(e){e.computeTangents(),console.warn("THREE.BufferGeometryUtils: .computeTangents() has been removed. Use BufferGeometry.computeTangents() instead.")},mergeBufferGeometries:function(t,r){for(var o=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),n=new Set(Object.keys(t[0].morphAttributes)),a={},u={},s=t[0].morphTargetsRelative,f=new e.BufferGeometry,l=0,m=0;m<t.length;++m){var g=t[m],c=0;if(o!==(null!==g.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var d in g.attributes){if(!i.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[d]&&(a[d]=[]),a[d].push(g.attributes[d]),c++}if(c!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". Make sure all geometries have the same number of attributes."),null;if(s!==g.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var d in g.morphAttributes){if(!n.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===u[d]&&(u[d]=[]),u[d].push(g.morphAttributes[d])}if(f.userData.mergedUserData=f.userData.mergedUserData||[],f.userData.mergedUserData.push(g.userData),r){var h;if(o)h=g.index.count;else{if(void 0===g.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". The geometry must have either an index or a position attribute"),null;h=g.attributes.position.count}f.addGroup(l,h,m),l+=h}}if(o){var b=0,p=[];for(m=0;m<t.length;++m){for(var v=t[m].index,y=0;y<v.count;++y)p.push(v.getX(y)+b);b+=t[m].attributes.position.count}f.setIndex(p)}for(var d in a){var A=this.mergeBufferAttributes(a[d]);if(!A)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;f.setAttribute(d,A)}for(var d in u){var B=u[d][0].length;if(0===B)break;f.morphAttributes=f.morphAttributes||{},f.morphAttributes[d]=[];for(m=0;m<B;++m){var w=[];for(y=0;y<u[d].length;++y)w.push(u[d][y][m]);var E=this.mergeBufferAttributes(w);if(!E)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;f.morphAttributes[d].push(E)}}return f},mergeBufferAttributes:function(t){for(var r,o,i,n=0,a=0;a<t.length;++a){var u=t[a];if(u.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===r&&(r=u.array.constructor),r!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===o&&(o=u.itemSize),o!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=u.normalized),i!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=u.array.length}var s=new r(n),f=0;for(a=0;a<t.length;++a)s.set(t[a].array,f),f+=t[a].array.length;return new e.BufferAttribute(s,o,i)},interleaveAttributes:function(t){for(var r,o=0,i=0,n=0,a=t.length;n<a;++n){var u=t[n];if(void 0===r&&(r=u.array.constructor),r!==u.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;o+=u.array.length,i+=u.itemSize}var s=new e.InterleavedBuffer(new r(o),i),f=0,l=[],m=["getX","getY","getZ","getW"],g=["setX","setY","setZ","setW"],c=0;for(a=t.length;c<a;c++){var d=(u=t[c]).itemSize,h=u.count,b=new e.InterleavedBufferAttribute(s,d,f,u.normalized);l.push(b),f+=d;for(var p=0;p<h;p++)for(var v=0;v<d;v++)b[g[v]](p,u[m[v]](p))}return l},estimateBytesUsed:function(e){var t=0;for(var r in e.attributes){var o=e.getAttribute(r);t+=o.count*o.itemSize*o.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0},mergeVertices:function(t,r=1e-4){r=Math.max(r,Number.EPSILON);for(var o={},i=t.getIndex(),n=t.getAttribute("position"),a=i?i.count:n.count,u=0,s=Object.keys(t.attributes),f={},l={},m=[],g=["getX","getY","getZ","getW"],c=0,d=s.length;c<d;c++){f[A=s[c]]=[],(T=t.morphAttributes[A])&&(l[A]=new Array(T.length).fill().map(()=>[]))}var h=Math.log10(1/r),b=Math.pow(10,h);for(c=0;c<a;c++){var p=i?i.getX(c):c,v="",y=0;for(d=s.length;y<d;y++)for(var A=s[y],B=(E=t.getAttribute(A)).itemSize,w=0;w<B;w++)v+=`${~~(E[g[w]](p)*b)},`;if(v in o)m.push(o[v]);else{for(y=0,d=s.length;y<d;y++){A=s[y];var E=t.getAttribute(A),T=t.morphAttributes[A],G=(B=E.itemSize,f[A]),x=l[A];for(w=0;w<B;w++){var U=g[w];if(G.push(E[U](p)),T)for(var M=0,S=T.length;M<S;M++)x[M].push(T[M][U](p))}}o[v]=u,m.push(u),u++}}const R=t.clone();for(c=0,d=s.length;c<d;c++){A=s[c];var z=t.getAttribute(A),X=new z.array.constructor(f[A]);E=new e.BufferAttribute(X,z.itemSize,z.normalized);if(R.setAttribute(A,E),A in l)for(y=0;y<l[A].length;y++){var H=t.morphAttributes[A][y],D=(X=new H.array.constructor(l[A][y]),new e.BufferAttribute(X,H.itemSize,H.normalized));R.morphAttributes[A][y]=D}}return R.setIndex(m),R},toTrianglesDrawMode:function(t,r){if(r===e.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(r===e.TriangleFanDrawMode||r===e.TriangleStripDrawMode){var o=t.getIndex();if(null===o){var i=[],n=t.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var a=0;a<n.count;a++)i.push(a);t.setIndex(i),o=t.getIndex()}var u=o.count-2,s=[];if(r===e.TriangleFanDrawMode)for(a=1;a<=u;a++)s.push(o.getX(0)),s.push(o.getX(a)),s.push(o.getX(a+1));else for(a=0;a<u;a++)a%2==0?(s.push(o.getX(a)),s.push(o.getX(a+1)),s.push(o.getX(a+2))):(s.push(o.getX(a+2)),s.push(o.getX(a+1)),s.push(o.getX(a)));s.length/3!==u&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var f=t.clone();return f.setIndex(s),f.clearGroups(),f}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",r),t},computeMorphedAttributes:function(t){if(!0!==t.geometry.isBufferGeometry)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;var r=new e.Vector3,o=new e.Vector3,i=new e.Vector3,n=new e.Vector3,a=new e.Vector3,u=new e.Vector3,s=new e.Vector3,f=new e.Vector3,l=new e.Vector3;function m(e,t,m,g,c,d,h,b,p){r.fromBufferAttribute(m,d),o.fromBufferAttribute(m,h),i.fromBufferAttribute(m,b);var v=e.morphTargetInfluences;if(t.morphTargets&&g&&v){s.set(0,0,0),f.set(0,0,0),l.set(0,0,0);for(var y=0,A=g.length;y<A;y++){var B=v[y],w=g[y];0!==B&&(n.fromBufferAttribute(w,d),a.fromBufferAttribute(w,h),u.fromBufferAttribute(w,b),c?(s.addScaledVector(n,B),f.addScaledVector(a,B),l.addScaledVector(u,B)):(s.addScaledVector(n.sub(r),B),f.addScaledVector(a.sub(o),B),l.addScaledVector(u.sub(i),B)))}r.add(s),o.add(f),i.add(l)}e.isSkinnedMesh&&(e.boneTransform(d,r),e.boneTransform(h,o),e.boneTransform(b,i)),p[3*d+0]=r.x,p[3*d+1]=r.y,p[3*d+2]=r.z,p[3*h+0]=o.x,p[3*h+1]=o.y,p[3*h+2]=o.z,p[3*b+0]=i.x,p[3*b+1]=i.y,p[3*b+2]=i.z}var g,c,d,h,b,p,v,y,A,B=t.geometry,w=t.material,E=B.index,T=B.attributes.position,G=B.morphAttributes.position,x=B.morphTargetsRelative,U=B.attributes.normal,M=B.morphAttributes.position,S=B.groups,R=B.drawRange,z=new Float32Array(T.count*T.itemSize),X=new Float32Array(U.count*U.itemSize);if(null!==E)if(Array.isArray(w))for(h=0,p=S.length;h<p;h++)for(A=w[(y=S[h]).materialIndex],b=Math.max(y.start,R.start),v=Math.min(y.start+y.count,R.start+R.count);b<v;b+=3)m(t,A,T,G,x,g=E.getX(b),c=E.getX(b+1),d=E.getX(b+2),z),m(t,A,U,M,x,g,c,d,X);else for(h=Math.max(0,R.start),p=Math.min(E.count,R.start+R.count);h<p;h+=3)m(t,w,T,G,x,g=E.getX(h),c=E.getX(h+1),d=E.getX(h+2),z),m(t,w,U,M,x,g,c,d,X);else if(void 0!==T)if(Array.isArray(w))for(h=0,p=S.length;h<p;h++)for(A=w[(y=S[h]).materialIndex],b=Math.max(y.start,R.start),v=Math.min(y.start+y.count,R.start+R.count);b<v;b+=3)m(t,A,T,G,x,g=b,c=b+1,d=b+2,z),m(t,A,U,M,x,g,c,d,X);else for(h=Math.max(0,R.start),p=Math.min(T.count,R.start+R.count);h<p;h+=3)m(t,w,T,G,x,g=h,c=h+1,d=h+2,z),m(t,w,U,M,x,g,c,d,X);return{positionAttribute:T,normalAttribute:U,morphedPositionAttribute:new e.Float32BufferAttribute(z,3),morphedNormalAttribute:new e.Float32BufferAttribute(X,3)}}};exports.BufferGeometryUtils=t;
},{"../../../build/three.module.js":"lKFo"}],"WECn":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var a in r)"default"!==a&&Object.hasOwnProperty.call(r,a)&&e(i,r,a);return t(i,r),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrbitCamera=void 0;var i=r(require("three")),a=require("three"),n=function(){function e(e){this.camera=e,this.sphericalDelta=new a.Spherical,this.position=new i.Vector3,this.target=new i.Vector3}return e.prototype.update=function(){var e=new i.Vector3,t=new i.Spherical,r=(new i.Quaternion).setFromUnitVectors(this.camera.up,new i.Vector3(0,1,0)),a=r.clone().invert(),n=this.position;e.copy(n).sub(this.target),e.applyQuaternion(r),t.setFromVector3(e),t.phi+=this.sphericalDelta.phi,t.theta+=this.sphericalDelta.theta,this.sphericalDelta=new i.Spherical,t.makeSafe(),e.setFromSpherical(t),e.applyQuaternion(a),this.camera.position.copy(this.target).add(e),this.camera.lookAt(this.target)},e.prototype.rotateUp=function(e){this.sphericalDelta.phi=e},e}();exports.OrbitCamera=n;
},{"three":"lKFo"}],"mwtM":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,a,i){void 0===i&&(i=a),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[a]}})}:function(t,e,a,i){void 0===i&&(i=a),t[i]=e[a]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var i={};if(null!=a)for(var o in a)"default"!==o&&Object.hasOwnProperty.call(a,o)&&t(i,a,o);return e(i,a),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStates=exports.PlanarControls=exports.STATE=void 0;var i=a(require("three"));exports.STATE={NONE:-1,DRAG:0,PAN:1,ROTATE:2,TRAVEL:3,ORTHO_ZOOM:4};var o={LEFTCLICK:i.MOUSE.LEFT,MIDDLECLICK:i.MOUSE.MIDDLE,RIGHTCLICK:i.MOUSE.RIGHT},s=function(){function t(t,e,a){this.camera=t,this.renderer=e,this.objects=a,this.state=exports.STATE.NONE,this.floorPlane=new i.Plane(new i.Vector3(0,0,-1)),this.target=new i.Vector3,this.groundLevel=0,this.maxAltitude=1e3,this.zoomInFactor=2,this.zoomOutFactor=.5,this.zoomTravelTime=.2,this.autoTravelTimeMax=4,this.autoTravelTimeMin=1.5,this.autoTravelTimeDist=5e4,this.rotateSpeed=1,this.minZenithAngle=-1/0,this.maxZenithAngle=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI/2,this.instantTravel=!1,this.enableRotation=!0,this.enabled=!0,this.deltaMousePosition=new i.Vector2(0,0),this.lastMousePosition=new i.Vector2,this.mousePosition=new i.Vector2,this.dragStart=new i.Vector3,this.dragEnd=new i.Vector3,this.dragDelta=new i.Vector3(0,0,0),this.pointUnderCursor=new i.Vector3,this.centerPoint=new i.Vector3,this.phi=0,this.rotationVect=new i.Vector3,this.rotationQuat=new i.Quaternion,this.vectorZero=new i.Vector3,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.spherical=new i.Spherical,this.sphericalDelta=new i.Spherical,this.panStart=new i.Vector2,this.panDelta=new i.Vector2,this.panEnd=new i.Vector2,this.panSpeed=1,this.panOffset=new i.Vector3,this.travelParams={endPos:new i.Vector3,startPos:new i.Vector3,startRot:new i.Quaternion,endRot:new i.Quaternion,alpha:0,duration:0,useRotation:!1,useSmooth:!1},this.raycaster=new i.Raycaster,this._handlerOnMouseDown=this.onMouseDown.bind(this),this._handlerOnMouseUp=this.onMouseUp.bind(this),this._handlerOnMouseMove=this.onMouseMove.bind(this),this._handlerOnMouseWheel=this.onMouseWheel.bind(this),this._handlerContextMenu=this.onContextMenu.bind(this),this._handlerOnKeyDown=this.onKeyDown.bind(this)}return t.prototype.updateMousePositionAndDelta=function(t){this.mousePosition=this.getScreenCords(t),this.deltaMousePosition.copy(this.mousePosition).sub(this.lastMousePosition),this.lastMousePosition.copy(this.mousePosition)},t.prototype.initiateDrag=function(t){this.updateMousePositionAndDelta(t),this.state=exports.STATE.DRAG,this.dragStart.copy(this.getWorldPointAtScreenXY(this.mousePosition)),this.dragDelta.set(0,0,0),this.panStart.set(t.clientX,t.clientY)},t.prototype.initiateZoom=function(t){var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),this.pointUnderCursor.copy(this.getWorldPointAtScreenXY(this.mousePosition));var a=new i.Vector3;if(e>0||e<0&&this.maxAltitude>this.camera.position.z){var o=e>0?this.zoomInFactor:this.zoomOutFactor;a.lerpVectors(this.camera.position,this.pointUnderCursor,1-1/o),this.initiateTravel(a,this.zoomTravelTime,null,!1)}},t.prototype.initiateTravel=function(t,e,a,o){if(this.state=exports.STATE.TRAVEL,this.travelParams.alpha=0,this.travelParams.useRotation=this.enableRotation&&a&&(a.isQuaternion||a.isVector3),this.travelParams.useSmooth=o,this.travelParams.startPos.copy(this.camera.position),this.travelParams.startRot.copy(this.camera.quaternion),this.travelParams.useRotation&&(a.isQuaternion?this.travelParams.endRot.copy(a):a.isQuaternion&&(t==a?(this.camera.lookAt(a),this.travelParams.endRot.copy(this.camera.quaternion),this.camera.quaternion.copy(this.travelParams.startRot)):(this.camera.position.copy(t),this.camera.lookAt(a),this.travelParams.endRot.copy(this.camera.quaternion),this.camera.quaternion.copy(this.travelParams.startRot),this.camera.position.copy(this.travelParams.startPos)))),this.travelParams.endPos.copy(t),this.instantTravel)this.travelParams.duration=0;else if("auto"===e){var s=Math.min(1,t.distanceTo(this.camera.position)/this.autoTravelTimeDist);if(this.travelParams.duration=i.MathUtils.lerp(this.autoTravelTimeMin,this.autoTravelTimeMax,s),this.travelParams.useRotation){var n=.5-.5*this.travelParams.endRot.normalize().dot(this.camera.quaternion.normalize());this.travelParams.duration*=1+2*n,this.travelParams.duration=Math.min(this.travelParams.duration,this.autoTravelTimeMax)}}else this.travelParams.duration=e},t.prototype.initiateRotation=function(t){this.state=exports.STATE.ROTATE,this.centerPoint.copy(this.getWorldPointAtScreenXY(new i.Vector2(0,0)));var e=this.camera.position.distanceTo(this.centerPoint);this.phi=Math.acos((this.camera.position.z-this.centerPoint.z)/e),this.rotateStart.set(t.clientX,t.clientY)},t.prototype.handleTravel=function(t){this.travelParams.alpha=Math.min(this.travelParams.alpha+t/1e3/this.travelParams.duration,1);var e=this.travelParams.useSmooth?this.smooth(this.travelParams.alpha):this.travelParams.alpha;this.camera.position.lerpVectors(this.travelParams.startPos,this.travelParams.endPos,e),!0===this.travelParams.useRotation&&this.camera.quaternion.slerpQuaternions(this.travelParams.startRot,this.travelParams.endRot,e),this.testAnimationEnd()},t.prototype.testAnimationEnd=function(){1===this.travelParams.alpha&&(this.state=exports.STATE.NONE)},t.prototype.smooth=function(t){return Math.pow(Math.pow(t,2)*(3-2*t),1.2)},t.prototype.onMouseDown=function(t){this.enabled&&(console.log("mouse down"),t.preventDefault(),exports.STATE.NONE==this.state&&(this.currentPressedButton=t.button,this.updateMousePositionAndDelta(t),o.LEFTCLICK==t.button&&(t.ctrlKey?this.enableRotation&&this.initiateRotation(t):this.initiateDrag(t))))},t.prototype.onMouseUp=function(t){this.enabled&&(t.preventDefault(),exports.STATE.TRAVEL!==this.state&&exports.STATE.ORTHO_ZOOM!==this.state&&(this.state=exports.STATE.NONE))},t.prototype.onMouseMove=function(t){this.enabled&&(t.preventDefault(),this.updateMousePositionAndDelta(t),this.state==exports.STATE.ROTATE&&this.mouseMoveRotation(t),this.state==exports.STATE.DRAG&&this.mouseMovePan(t))},t.prototype.onMouseWheel=function(t){console.log("wheel planar!"),this.enabled&&(t.preventDefault(),t.stopPropagation(),exports.STATE.NONE==this.state&&this.initiateZoom(t))},t.prototype.onKeyDown=function(t){},t.prototype.getScreenCords=function(t){var e=(t.clientX-this.renderer.domElement.offsetLeft)/this.renderer.domElement.clientWidth*2-1,a=-(t.clientY-this.renderer.domElement.offsetTop)/this.renderer.domElement.clientHeight*2+1;return new i.Vector2(e,a)},t.prototype.getWorldPointAtScreenXY=function(t){this.raycaster.setFromCamera(t,this.camera);var e=this.raycaster.intersectObjects(this.objects);return e.length>0?e[0].point:this.getWorldPointFromMathPlaneAtScreenXY(t,0)},t.prototype.getWorldPointFromMathPlaneAtScreenXY=function(t,e){this.raycaster.setFromCamera(t,this.camera);var a=new i.Vector3;return this.floorPlane.constant=e,this.raycaster.ray.intersectPlane(this.floorPlane,a),a},t.prototype.handleDragMovement=function(){this.dragEnd=this.getWorldPointFromMathPlaneAtScreenXY(this.mousePosition,this.dragStart.z),this.dragDelta.subVectors(this.dragStart,this.dragEnd),this.camera.position.add(this.dragDelta),this.dragDelta.set(0,0,0)},t.prototype.mouseMoveRotation=function(t){this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed),this.sphericalDelta.theta-=2*Math.PI*this.rotateDelta.x/this.renderer.domElement.clientHeight,this.sphericalDelta.phi-=2*Math.PI*this.rotateDelta.y/this.renderer.domElement.clientHeight,this.rotateStart.copy(this.rotateEnd)},t.prototype.mouseMovePan=function(t){this.updateMousePositionAndDelta(t),this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed);var e=new i.Vector3,a=this.camera.position;e.copy(a).sub(this.target);var o=e.length();o*=Math.tan(this.camera.fov/2*Math.PI/180);var s=new i.Vector3;s.setFromMatrixColumn(this.camera.matrix,0),s.multiplyScalar(-2*this.panDelta.x*o/this.renderer.domElement.clientHeight),this.panOffset.add(s),s.setFromMatrixColumn(this.camera.matrix,1),s.multiplyScalar(2*this.panDelta.y*o/this.renderer.domElement.clientHeight),this.panOffset.add(s),this.panStart.copy(this.panEnd)},t.prototype.handleRotationOrbit=function(){var t=(new i.Quaternion).setFromUnitVectors(this.camera.up,new i.Vector3(0,1,0)),e=t.clone().invert(),a=(new i.Quaternion,2*Math.PI),o=new i.Vector3,s=this.camera.position;o.copy(s).sub(this.centerPoint),o.applyQuaternion(t),this.spherical.setFromVector3(o),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi;var n=this.minZenithAngle,r=this.maxZenithAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=a:n>Math.PI&&(n-=a),r<-Math.PI?r+=a:r>Math.PI&&(r-=a),this.spherical.theta=n<=r?Math.max(n,Math.min(r,this.spherical.theta)):this.spherical.theta>(n+r)/2?Math.max(n,this.spherical.theta):Math.min(r,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.target.add(this.panOffset),o.setFromSpherical(this.spherical),o.applyQuaternion(e),this.camera.position.copy(o),this.camera.lookAt(new i.Vector3(0,0,0)),this.camera.position.add(this.centerPoint),this.camera.updateMatrixWorld(),this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0)},t.prototype.onContextMenu=function(t){t.preventDefault()},t}();exports.PlanarControls=s;var n="state_drag",r="state_travel",h="state_rotate",l="state_idle",c="rotate_event",u="drag_event";function p(t){var e;return{states:{initial:l,states:(e={},e[l]={on:{contextmenu:[{actions:["preventDefault"]}],mousedown:[{target:h,cond:function(t,e){return o.LEFTCLICK==e.button&&e.ctrlKey}},{target:n,cond:function(t,e){return o.LEFTCLICK==e.button}}],wheel:[{target:r}]}},e[n]={entry:[function(t,e){console.log("drag!")},"initiateDrag"],on:{mouseup:{target:l},mousemove:{actions:["moveDrag"]},update:{actions:["updateDrag"]}}},e[r]={entry:["initiateZoom"],on:{update:{target:l,actions:["updateTravel"]}}},e[h]={entry:[function(t,e){console.log("rotate!")},"initiateRotate"],on:{mouseup:{target:l},contextmenu:[{actions:["preventDefault"]}],mousemove:{actions:["moveRotate"]},update:{actions:["updateRotate"]}}},e)},actions:{initiateDrag:function(e,a){t.initiateDrag(a)},moveDrag:function(e,a){t.mouseMovePan(a)},updateDrag:function(e,a){t.handleDragMovement()},initiateRotate:function(e,a){t.initiateRotation(a)},moveRotate:function(e,a){t.mouseMoveRotation(a)},updateRotate:function(e,a){t.handleRotationOrbit()},initiateZoom:function(e,a){t.initiateZoom(a)},preventDefault:function(t,e){e.contextMenuEvent.preventDefault()},updateTravel:function(e,a){t.handleTravel(a.t)}}}}exports.createStates=p;
},{"three":"lKFo"}],"jvJt":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(null!=o)for(var r in o)"default"!==r&&Object.hasOwnProperty.call(o,r)&&e(n,o,r);return t(n,o),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStates=exports.StreetControls=exports.STATE=void 0;var n=o(require("three")),r=require("three"),s=Math.PI/2;exports.STATE={NONE:-1,DRAG:0};var i={LEFTCLICK:n.MOUSE.LEFT,MIDDLECLICK:n.MOUSE.MIDDLE,RIGHTCLICK:n.MOUSE.RIGHT},a={ArrowUp:{method:"translateZ",sign:-1},ArrowDown:{method:"translateZ",sign:1},ArrowLeft:{method:"translateX",sign:-1},ArrowRight:{method:"translateX",sign:1}},h=function(){function e(e,t,o){this.camera=e,this.renderer=t,this.scene=o,this.minPolarAngle=0,this.maxPolarAngle=2*Math.PI,this.moveSpeed=1,this.euler=new r.Euler(0,0,0),this.eulerDown=new r.Euler(0,0,0),this.vector=new n.Vector3,this.target=new n.Vector3,this.state=exports.STATE.NONE,this.enabled=!0,this.updateState={rotateX:0,rotateY:0,snapshot:function(){return{rotateX:this.rotateX,rotateY:this.rotateY}}},this.axisY=new n.Vector3(0,1,0),this.verticalFOV=180,this.downQuaternion=new n.Quaternion,this.startQuaternion=new n.Quaternion,this.startQuaternion.copy(this.camera.quaternion),this.handlerOnMouseMove=this.onMouseMove.bind(this),this.handlerOnMouseDown=this.onMouseDown.bind(this),this.handlerOnMouseUp=this.onMouseUp.bind(this),this.handlerOnMouseLeave=this.onMouseLeave.bind(this),this.handlerOnMouseWheel=this.onMouseWheel.bind(this),this.handleKeyDown=this.onKeyDown.bind(this)}return e.prototype.getScreenCords=function(e){var t=(e.clientX-this.renderer.domElement.offsetLeft)/this.renderer.domElement.clientWidth*2-1,o=-(e.clientY-this.renderer.domElement.offsetTop)/this.renderer.domElement.clientHeight*2+1;return new n.Vector2(t,o)},e.prototype.onMouseDown=function(e){this.enabled&&(this.onMouseDownX=e.clientX,this.onMouseDownY=e.clientY,this.stateOnMouseDown=this.updateState.snapshot(),this.eulerDown.setFromQuaternion(this.camera.quaternion)),this.downQuaternion.copy(this.camera.quaternion)},e.prototype.onMouseUp=function(e){this.enabled&&(e.preventDefault(),this.state==exports.STATE.DRAG&&(this.state=exports.STATE.NONE))},e.prototype.mouseMoveDrag2=function(e){var t=n.MathUtils.degToRad(this.camera.fov)/this.renderer.domElement.clientHeight,o=new n.Vector2(e.clientX,e.clientY);this.updateState.rotateY=(o.x-this.onMouseDownX)*t+this.stateOnMouseDown.rotateY,this.updateState.rotateX=this.limitRotation(this.camera,(o.y-this.onMouseDownY)*t+this.stateOnMouseDown.rotateX,this.verticalFOV),this.applyRotation(this.camera,this.updateState)},e.prototype.onMouseMove=function(e){this.enabled&&this.state==exports.STATE.DRAG&&this.mouseMoveDrag2(e)},e.prototype.limitRotation=function(e,t,o){var r=.5*n.MathUtils.degToRad(o-e.fov);return n.MathUtils.clamp(t,-r,r)},e.prototype.applyRotation=function(e,t){new n.Vector3;e.quaternion.copy(this.startQuaternion),e.rotateY(t.rotateY),e.rotateX(t.rotateX)},e.prototype.onMouseLeave=function(e){this.enabled&&(e.preventDefault(),this.state==exports.STATE.DRAG&&(this.state=exports.STATE.NONE))},e.prototype.onMouseWheel=function(e){if(this.enabled){var t=0;void 0!==e.wheelDelta?t=-e.wheelDelta:void 0!==e.detail&&(t=e.detail),this.camera.fov=n.MathUtils.clamp(this.camera.fov+Math.sign(t),10,Math.min(100,this.verticalFOV)),this.camera.updateProjectionMatrix()}},e.prototype.onKeyDown=function(e){"j"==e.key&&this.startQuaternion.copy(this.camera.quaternion);var t=a[e.key];null!=t&&this.camera[t.method](t.sign*this.moveSpeed)},e.prototype.addInputListeners=function(){this.renderer.domElement.addEventListener("mousemove",this.handlerOnMouseMove),this.renderer.domElement.addEventListener("mousedown",this.handlerOnMouseDown),this.renderer.domElement.addEventListener("mouseup",this.handlerOnMouseUp),window.addEventListener("keydown",this.handleKeyDown),this.renderer.domElement.addEventListener("mouseleave",this.handlerOnMouseLeave),this.renderer.domElement.addEventListener("wheel",this.handlerOnMouseWheel)},e.prototype.removeInputListeners=function(){this.renderer.domElement.removeEventListener("mousemove",this.handlerOnMouseMove),this.renderer.domElement.removeEventListener("mousedown",this.handlerOnMouseDown),this.renderer.domElement.removeEventListener("mouseup",this.handlerOnMouseUp),this.renderer.domElement.removeEventListener("wheel",this.handlerOnMouseWheel),this.renderer.domElement.removeEventListener("mouseleave",this.handlerOnMouseLeave),window.removeEventListener("keydown",this.handleKeyDown)},e.prototype.getDirection=function(){var e=new r.Vector3(0,0,-1),t=this;return function(o){return o.copy(e).applyQuaternion(t.camera.quaternion)}},e.prototype.moveForward=function(e){this.vector.setFromMatrixColumn(this.camera.matrix,0),this.vector.crossVectors(this.camera.up,this.vector),this.camera.position.addScaledVector(this.vector,e)},e.prototype.moveRight=function(e){this.vector.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(this.vector,e)},e.prototype.update=function(){},e.prototype.start=function(){console.log("start street!"),this.startQuaternion.copy(this.camera.quaternion)},e}();exports.StreetControls=h;var u="state_drag",d="state_idle",l="state_out";function c(e){var t;return{states:{initial:d,states:(t={},t[l]={on:{mouseenter:[{target:d}]}},t[d]={on:{mousedown:[{target:u,cond:function(e,t){return t.button==i.LEFTCLICK}}],keydown:[{actions:["moveKey"]}],wheel:[{actions:["mouseWheel"]}],mouseleave:[{target:l}]}},t[u]={entry:["startMoveDrag"],on:{mouseup:{target:d},mousemove:{actions:["moveDragStreet"]}}},t)},actions:{mouseWheel:function(t,o){e.onMouseWheel(o)},moveDragStreet:function(t,o){e.mouseMoveDrag2(o)},moveKey:function(t,o){e.onKeyDown(o)},startMoveDrag:function(t,o){e.onMouseDown(o)}}}}exports.createStates=c;
},{"three":"lKFo"}],"Aa7a":[function(require,module,exports) {
module.exports = `varying vec2 texCoord;

void main()
{
    texCoord = uv;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
}`
},{}],"RnaW":[function(require,module,exports) {
module.exports = `#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D fromTexture;
uniform sampler2D toTexture;
uniform float t;

varying vec2 texCoord;

void main(void)
{
    vec3 result;
    vec4 colorFrom = texture2D(fromTexture, texCoord);
    vec4 colorTo = texture2D(toTexture, texCoord);
    result = colorFrom.rgb * (1.0-t) + colorTo.rgb * t; 
     // blending equation
    gl_FragColor= vec4(result, colorFrom.a*(1.0-t)+colorTo.a*t);
    //gl_FragColor = colorFrom;
}`
},{}],"Hq4L":[function(require,module,exports) {
module.exports = `#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D tex;
uniform vec4 color;
uniform float t;

varying vec2 texCoord;

void main(void)
{
    vec3 result;
    vec4 colorText = texture2D(tex, texCoord);
    result = colorText.rgb * (1.0-t) + color.rgb * t; 
     // blending equation
    gl_FragColor= vec4(result, colorText.a*(1.0-t)+color.a*t);
    //gl_FragColor=vec4(t,0,0,1);
}`
},{}],"xmXH":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&t(a,e,i);return r(a,e),a},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],n=0,o=s.length;n<o;n++,i++)a[i]=s[n];return a},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VTThreeViewer=exports.MATERIAL_TYPE=exports.CONTROLS_TYPE=exports.RENDER_MODE=void 0;var n,o,h,l=a(require("three")),p=require("three/examples/jsm/utils/BufferGeometryUtils"),u=require("./OrbitCamera"),c=require("./controls/PlanarControlsLiteXState"),d=require("./controls/StreetControlsXState"),m=s(require("./shaders/basic_tex_vert.glsl")),f=s(require("./shaders/mix_textures.glsl")),v=s(require("./shaders/mix_color_texture.glsl"));!function(e){e[e.MERGED=0]="MERGED",e[e.SINGLE=1]="SINGLE"}(n=exports.RENDER_MODE||(exports.RENDER_MODE={})),function(e){e[e.PLANAR=0]="PLANAR",e[e.STREET=1]="STREET"}(o=exports.CONTROLS_TYPE||(exports.CONTROLS_TYPE={})),function(e){e[e.MIX_TWO_TEXTURES=0]="MIX_TWO_TEXTURES",e[e.MIX_TEXTURE_COLOR=1]="MIX_TEXTURE_COLOR",e[e.COLOR=2]="COLOR",e[e.TEXTURE=3]="TEXTURE"}(h=exports.MATERIAL_TYPE||(exports.MATERIAL_TYPE={}));var g={planeTexture:null,planeMaterial:null,planeColor:null,buildingsHeight:0,buildingsOpacity:0,colorBuildings:0},C=[],y=function(){function t(e,t,r,a,i){this.width=e,this.height=t,this.mapCenter=a,this.zoomFactor=i,this.planes=new l.Group,this.featuresAllGroup=[],this.featuresGroup=new Map,this.controlsMap=new Map,this.clock=new l.Clock,this.animationClock=new l.Clock,this.animationClock.autoStart=!1,this.materialsMap=new Map,this.rayCaster=new l.Raycaster,this.graphicParams=g,this.cameraListeners=[],this.animate=this.animate.bind(this),this.getRealCoords=this.getRealCoords.bind(this),this.getWorldCoords=this.getWorldCoords.bind(this),this.initThree(r),this.addHemisphereLights()}return t.prototype.initThree=function(e){this.renderer=new l.WebGLRenderer({logarithmicDepthBuffer:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.scene=new l.Scene,this.scene.background=new l.Color(e);var t=2*Math.tan(37.5*Math.PI/180),r=this.height/t;this.orthoCamera=new l.OrthographicCamera(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.orthoCamera.position.set(0,0,r),this.perspectiveCamera=new l.PerspectiveCamera(75,this.width/this.height,1,1500),this.perspectiveCamera.up.set(0,0,1),this.perspectiveCamera.position.set(0,0,400),this.orbitCamera=new u.OrbitCamera(this.perspectiveCamera),this.scene.add(this.planes),this.currentCamera=this.perspectiveCamera,this.scene.add(this.currentCamera);var a=new c.PlanarControls(this.perspectiveCamera,this.renderer,i(this.featuresAllGroup,this.planes.children));this.controlsMap.set(o.PLANAR,a);var s=new d.StreetControls(this.perspectiveCamera,this.renderer,this.scene);this.controlsMap.set(o.STREET,s),this.createMaterials()},t.prototype.addHemisphereLights=function(){var e=new l.HemisphereLight(15854811,7829384,1);e.position.set(5,7.5,10),this.scene.add(e)},t.prototype.createPlane=function(e,t,r,a){var i=new l.PlaneBufferGeometry(e,t,100),s=new l.MeshBasicMaterial({transparent:!0});s.depthWrite=!1;var n=new l.Mesh(i,s);n.position.set(r[0],r[1],0),this.currentCamera.position.setX(r[0]),this.currentCamera.position.setY(r[1]),this.planes.add(n)},t.prototype.setPlaneTexture=function(e){for(var t=0,r=this.planes.children;t<r.length;t++){var a=r[t];a.material.map=e,a.material.transparent=!1,null!=e&&(a.material.map.anisotropy=0,a.material.map.magFilter=l.LinearFilter,a.material.map.minFilter=l.LinearFilter,a.material.needsUpdate=!0)}},t.prototype.setPlaneColor=function(e){for(var t=0,r=this.planes.children;t<r.length;t++){r[t].material.color.setHex(e)}},t.prototype.setPlaneMaterialType=function(e){for(var t=0,r=this.planes.children;t<r.length;t++){r[t].material=this.materialsMap.get(e)}},t.prototype.setPlaneMaterial=function(e){for(var t=0,r=this.planes.children;t<r.length;t++){r[t].material=e}},t.prototype.addFeatures=function(e,t,r,a,i,s,o,h,u,c,d){this.mapCenter=t,this.zoomFactor=r;var m=new l.MeshStandardMaterial({color:15854811,flatShading:!0,side:l.DoubleSide}),f={steps:2,depth:1,bevelEnabled:!1,bevelThickness:1,bevelSize:0,bevelOffset:0,bevelSegments:1};if(this.featuresGroup.has(a)||(this.featuresGroup.set(a,new l.Group),this.scene.add(this.featuresGroup.get(a))),i==n.MERGED){for(var v=[],g=0,C=e;g<C.length;g++){var y=C[g];v.push(this.createGeometryForMergedMesh(y,r,f,s))}var M=p.BufferGeometryUtils.mergeBufferGeometries(v,!1),E=new l.Mesh(M,m);null!=E&&this.featuresGroup.get(a).add(E),this.featuresAllGroup.push(E)}else if(i==n.SINGLE)for(var w=0,T=e;w<T.length;w++){y=T[w];this.addFeature(y,a,s,h,u,c,d)}},t.prototype.createGeometryForMergedMesh=function(t,r,a,i){for(var s=[],n=0,o=t.getGeometry().getCoordinates()[0];n<o.length;n++){var h=i(o[n]);s.push(new l.Vector2(h[0],h[1]))}for(var p=new l.Shape(s),u=1;u<t.getGeometry().getCoordinates().length;u++){for(var c=[],d=0,m=t.getGeometry().getCoordinates()[u];d<m.length;d++){h=i(m[d]);c.push(new l.Vector2(h[0],h[1]))}var f=new l.Shape(c);p.holes.push(f)}return new l.ExtrudeBufferGeometry(p,e(e({},a),{depth:null!=t.getProperties().hauteur?t.getProperties().hauteur/r:0}))},t.prototype.addFeature=function(e,t,r,a,i,s,n){var o=new l.MeshStandardMaterial({color:15854811,flatShading:!0,side:l.DoubleSide});o.transparent=!0,o.opacity=1;var h=s(i(e))[0];Array.isArray(h[0][0])&&(h=h[0]);for(var p=[],u=0,c=h;u<c.length;u++){var d=r(c[u]);p.push(new l.Vector2(d[0],d[1]))}for(var m=new l.Shape(p),f=s(i(e)).length,v=1;v<f;v++){var g=[],C=s(i(e))[v];Array.isArray(C[0][0])&&(C=C[0]);for(var y=0,M=C;y<M.length;y++){d=r(M[y]);g.push(new l.Vector2(d[0],d[1]))}var E=new l.Shape(g);m.holes.push(E)}var w=new l.ExtrudeBufferGeometry(m,{steps:2,depth:1,bevelEnabled:!1,bevelThickness:1,bevelSize:0,bevelOffset:0,bevelSegments:1});w.computeBoundingBox();var T=new l.Vector3;w.boundingBox.getCenter(T),w.center(),w.translate(0,0,.5),w.verticesNeedUpdate=!0;var b=new l.Mesh(w,o);b.position.copy(T),b.scale.set(1,1,n(e).hauteur),b.renderOrder=2,b.userData.height=n(e).hauteur,b.userData.color=a[Math.floor(5*Math.random())],b.position.setZ(.1),this.featuresGroup.get(t).add(b),this.featuresAllGroup.push(b)},t.prototype.createTextureFromCanvas=function(e){var t=new l.CanvasTexture(e);return t.anisotropy=0,t.magFilter=l.LinearFilter,t.minFilter=l.LinearFilter,t.needsUpdate=!0,t},t.prototype.createMaterials=function(){var e={fromTexture:{type:"t",value:null},toTexture:{type:"t",value:null},t:{type:"f",value:0}};[].push(e);var t=new l.ShaderMaterial({vertexShader:m.default,fragmentShader:f.default,uniforms:e});this.materialsMap.set(h.MIX_TWO_TEXTURES,t);var r=new l.ShaderMaterial({vertexShader:m.default,fragmentShader:v.default,uniforms:{tex:{type:"t",value:null},color:{value:null},t:{type:"f",value:0}}});this.materialsMap.set(h.MIX_TEXTURE_COLOR,r),this.materialsMap.set(h.TEXTURE,new l.MeshBasicMaterial({transparent:!0})),this.materialsMap.set(h.COLOR,new l.MeshStandardMaterial({color:15854811,flatShading:!0,side:l.DoubleSide}))},t.prototype.getIntersectionPoint=function(e,t){this.rayCaster.setFromCamera(new l.Vector2(e,t),this.currentCamera);var r=this.rayCaster.intersectObjects(this.planes.children);return null!=r[0]?r[0].point:null},t.prototype.getIntersectionPointPlane=function(e,t,r){this.rayCaster.setFromCamera(new l.Vector2(e,t),this.currentCamera);var a=new l.Vector3;return this.rayCaster.ray.intersectPlane(r,a),a},t.prototype.getIntersectionPointPlaneCamera=function(e,t,r,a){this.rayCaster.setFromCamera(new l.Vector2(e,t),a);var i=new l.Vector3;return this.rayCaster.ray.intersectPlane(r,i),i},t.prototype.getIntersectionPointRaycaster=function(e,t,r,a){r.setFromCamera(new l.Vector2(e,t),a);var i=r.intersectObjects(this.planes.children);return null!=i[0]?i[0].point:null},t.prototype.getWorldCoords=function(e){return[(e[0]-this.mapCenter[0])/this.zoomFactor,(e[1]-this.mapCenter[1])/this.zoomFactor]},t.prototype.getRealCoords=function(e){return[e[0]*this.zoomFactor+this.mapCenter[0],e[1]*this.zoomFactor+this.mapCenter[1]]},t.prototype.addCameraListener=function(e){this.cameraListeners.push(e)},t.prototype.animate=function(){for(var e=0,t=this.cameraListeners;e<t.length;e++){(0,t[e])(this.currentCamera,this.animationClock)}this.renderer.render(this.scene,this.currentCamera)},t.prototype.enableControls=function(){this.controls.enabled=!0},t.prototype.disableControls=function(){this.controls.enabled=!1},t}();exports.VTThreeViewer=y;
},{"three":"lKFo","three/examples/jsm/utils/BufferGeometryUtils":"HdUX","./OrbitCamera":"WECn","./controls/PlanarControlsLiteXState":"mwtM","./controls/StreetControlsXState":"jvJt","./shaders/basic_tex_vert.glsl":"Aa7a","./shaders/mix_textures.glsl":"RnaW","./shaders/mix_color_texture.glsl":"Hq4L"}],"zNor":[function(require,module,exports) {

},{}],"nie2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),t=e;exports.default=t;
},{}],"u3be":[function(require,module,exports) {
"use strict";function r(r,n,t){for(var u,o,i=t||e,f=0,a=r.length,s=!1;f<a;)(o=+i(r[u=f+(a-f>>1)],n))<0?f=u+1:(a=u,s=!o);return s?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r.indexOf(e)>=0}function t(r,e,n){var t=r.length;if(r[0]<=e)return 0;if(e<=r[t-1])return t-1;var u=void 0;if(n>0){for(u=1;u<t;++u)if(r[u]<e)return u-1}else if(n<0){for(u=1;u<t;++u)if(r[u]<=e)return u}else for(u=1;u<t;++u){if(r[u]==e)return u;if(r[u]<e)return r[u-1]-e<e-r[u]?u-1:u}return t-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function i(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){for(var n,t=r.length>>>0,u=0;u<t;u++)if(e(n=r[u],u,r))return n;return null}function a(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function s(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function l(r,e){var n;return!r.every(function(t,u){return n=u,!e(t,u,r)})?n:-1}function v(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var o=u(r[n-1],e);return!(o>0||t&&0===o)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.numberSafeCompareFunction=e,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=u,exports.extend=o,exports.remove=i,exports.find=f,exports.equals=a,exports.stableSort=s,exports.findIndex=l,exports.isSorted=v;
},{}],"caQH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=e,exports.FALSE=t,exports.VOID=n,exports.memoizeOne=o;var r=require("./array.js");function e(){return!0}function t(){return!1}function n(){}function o(e){var t,n,o,s=!1;return function(){var u=Array.prototype.slice.call(arguments);return s&&this===o&&(0,r.equals)(u,n)||(s=!0,o=this,n=u,t=e.apply(this,arguments)),t}}
},{"./array.js":"u3be"}],"bmrL":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.getUid=r,exports.VERSION=void 0;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="6.5.0";exports.VERSION=o;
},{}],"cI7L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),r=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),e=function(e){function o(r){var o=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===t.VERSION?t.VERSION:"v"+t.VERSION.split("-")[0])+"/doc/errors/#"+r+" for details.";return(o=e.call(this,n)||this).code=r,o.name="AssertionError",o.message=n,o}return r(o,e),o}(Error),o=e;exports.default=o;
},{"./util.js":"bmrL"}],"hgi2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"cI7L"}],"ePpI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.reset=n,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=a,exports.rotate=i,exports.scale=c,exports.makeScale=p,exports.translate=f,exports.compose=x,exports.composeCssTransform=v,exports.invert=m,exports.makeInverse=l,exports.determinant=y,exports.toString=M;var r=require("./asserts.js"),t=new Array(6);function e(){return[1,0,0,1,0,0]}function n(r){return s(r,1,0,0,1,0,0)}function o(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],v=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*v+u,r[5]=n*x+s*v+a,r}function s(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function u(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function a(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function i(r,e){var n=Math.cos(e),u=Math.sin(e);return o(r,s(t,n,u,-u,n,0,0))}function c(r,e,n){return o(r,s(t,e,0,0,n,0,0))}function p(r,t,e){return s(r,t,0,0,e,0,0)}function f(r,e,n){return o(r,s(t,1,0,0,1,e,n))}function x(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function v(r,t,n,o,s,u,a){return M(x(e(),r,t,n,o,s,u,a))}function m(r){return l(r,r)}function l(t,e){var n=y(e);(0,r.assert)(0!==n,32);var o=e[0],s=e[1],u=e[2],a=e[3],i=e[4],c=e[5];return t[0]=a/n,t[1]=-s/n,t[2]=-u/n,t[3]=o/n,t[4]=(u*c-a*i)/n,t[5]=-(o*c-s*i)/n,t}function y(r){return r[0]*r[3]-r[1]*r[2]}function M(r){return"matrix("+r.join(", ")+")"}
},{"./asserts.js":"hgi2"}],"kDDr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"oVOB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"pbFF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=i,exports.closestSquaredDistanceXY=s,exports.containsCoordinate=f,exports.containsExtent=p,exports.containsXY=c,exports.coordinateRelationship=x,exports.createEmpty=l,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=g,exports.createOrUpdateFromCoordinates=m,exports.createOrUpdateFromFlatCoordinates=M,exports.createOrUpdateFromRings=E,exports.equals=T,exports.approximatelyEquals=v,exports.extend=O,exports.extendCoordinate=C,exports.extendCoordinates=R,exports.extendFlatCoordinates=F,exports.extendRings=I,exports.extendXY=N,exports.forEachCorner=y,exports.getArea=B,exports.getBottomLeft=L,exports.getBottomRight=U,exports.getCenter=G,exports.getCorner=_,exports.getEnlargedArea=b,exports.getForViewAndSize=A,exports.getHeight=S,exports.getIntersectionArea=W,exports.getIntersection=q,exports.getMargin=H,exports.getSize=X,exports.getTopLeft=j,exports.getTopRight=V,exports.getWidth=P,exports.intersects=Y,exports.isEmpty=w,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=D,exports.applyTransform=k,exports.wrapX=J;var t=n(require("./extent/Corner.js")),e=n(require("./extent/Relationship.js")),r=require("./asserts.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=l(),r=0,n=t.length;r<n;++r)C(e,t[r]);return e}function u(t,e,r){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}function a(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function i(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function s(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function f(t,e){return c(t,e[0],e[1])}function p(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function c(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function x(t,r){var n=t[0],o=t[1],u=t[2],a=t[3],i=r[0],s=r[1],f=e.default.UNKNOWN;return i<n?f|=e.default.LEFT:i>u&&(f|=e.default.RIGHT),s<o?f|=e.default.BELOW:s>a&&(f|=e.default.ABOVE),f===e.default.UNKNOWN&&(f=e.default.INTERSECTING),f}function l(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function g(t,e){var r=t[0],n=t[1];return d(r,n,r,n,e)}function m(t,e){return R(h(e),t)}function M(t,e,r,n,o){return F(h(o),t,e,r,n)}function E(t,e){return I(h(e),t)}function T(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function v(t,e,r){return Math.abs(t[0]-e[0])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[3]-e[3])<r}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function R(t,e){for(var r=0,n=e.length;r<n;++r)C(t,e[r]);return t}function F(t,e,r,n,o){for(;r<n;r+=o)N(t,e[r],e[r+1]);return t}function I(t,e){for(var r=0,n=e.length;r<n;++r)R(t,e[r]);return t}function N(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function y(t,e){var r;return(r=e(L(t)))?r:(r=e(U(t)))?r:(r=e(V(t)))?r:(r=e(j(t)))||!1}function B(t){var e=0;return w(t)||(e=P(t)*S(t)),e}function L(t){return[t[0],t[1]]}function U(t){return[t[2],t[1]]}function G(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function _(e,n){var o;return n===t.default.BOTTOM_LEFT?o=L(e):n===t.default.BOTTOM_RIGHT?o=U(e):n===t.default.TOP_LEFT?o=j(e):n===t.default.TOP_RIGHT?o=V(e):(0,r.assert)(!1,13),o}function b(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)}function A(t,e,r,n,o){var u=e*n[0]/2,a=e*n[1]/2,i=Math.cos(r),s=Math.sin(r),f=u*i,p=u*s,c=a*i,x=a*s,l=t[0],h=t[1],g=l-f+x,m=l-f-x,M=l+f-x,E=l+f+x,T=h-p-c,v=h-p+c,O=h+p+c,C=h+p-c;return d(Math.min(g,m,M,E),Math.min(T,v,O,C),Math.max(g,m,M,E),Math.max(T,v,O,C),o)}function S(t){return t[3]-t[1]}function W(t,e){return B(q(t,e))}function q(t,e,r){var n=r||l();return Y(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):h(n),n}function H(t){return P(t)+S(t)}function X(t){return[t[2]-t[0],t[3]-t[1]]}function j(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function P(t){return t[2]-t[0]}function Y(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function w(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function D(t,r,n){var o=!1,u=x(t,r),a=x(t,n);if(u===e.default.INTERSECTING||a===e.default.INTERSECTING)o=!0;else{var i=t[0],s=t[1],f=t[2],p=t[3],c=r[0],l=r[1],d=n[0],h=n[1],g=(h-l)/(d-c),m=void 0,M=void 0;a&e.default.ABOVE&&!(u&e.default.ABOVE)&&(o=(m=d-(h-p)/g)>=i&&m<=f),o||!(a&e.default.RIGHT)||u&e.default.RIGHT||(o=(M=h-(d-f)*g)>=s&&M<=p),o||!(a&e.default.BELOW)||u&e.default.BELOW||(o=(m=d-(h-s)/g)>=i&&m<=f),o||!(a&e.default.LEFT)||u&e.default.LEFT||(o=(M=h-(d-i)*g)>=s&&M<=p)}return o}function k(t,e,r,n){var o=[];if(n>1)for(var a=t[2]-t[0],i=t[3]-t[1],s=0;s<n;++s)o.push(t[0]+a*s/n,t[1],t[2],t[1]+i*s/n,t[2]-a*s/n,t[3],t[0],t[3]-i*s/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var f=[],p=[],c=(s=0,o.length);s<c;s+=2)f.push(o[s]),p.push(o[s+1]);return u(f,p,r)}function J(t,e){var r=e.getExtent(),n=G(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var o=P(r),u=Math.floor((n[0]-r[0])/o)*o;t[0]-=u,t[2]-=u}return t}
},{"./extent/Corner.js":"kDDr","./extent/Relationship.js":"oVOB","./asserts.js":"hgi2"}],"cgU2":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=r,exports.squaredSegmentDistance=o,exports.squaredDistance=n,exports.solveLinearSystem=a,exports.toDegrees=s,exports.toRadians=u,exports.modulo=i,exports.lerp=c,exports.log2=exports.cosh=void 0;var t="cosh"in Math?Math.cosh:function(r){var t=Math.exp(r);return(t+1/t)/2};exports.cosh=t;var e="log2"in Math?Math.log2:function(r){return Math.log(r)*Math.LOG2E};function o(r,t,e,o,a,s){var u=a-e,i=s-o;if(0!==u||0!==i){var c=((r-e)*u+(t-o)*i)/(u*u+i*i);c>1?(e=a,o=s):c>0&&(e+=u*c,o+=i*c)}return n(r,t,e,o)}function n(r,t,e,o){var n=e-r,a=o-t;return n*n+a*a}function a(r){for(var t=r.length,e=0;e<t;e++){for(var o=e,n=Math.abs(r[e][e]),a=e+1;a<t;a++){var s=Math.abs(r[a][e]);s>n&&(n=s,o=a)}if(0===n)return null;var u=r[o];r[o]=r[e],r[e]=u;for(var i=e+1;i<t;i++)for(var c=-r[i][e]/r[e][e],f=e;f<t+1;f++)e==f?r[i][f]=0:r[i][f]+=c*r[e][f]}for(var h=new Array(t),v=t-1;v>=0;v--){h[v]=r[v][t]/r[v][v];for(var p=v-1;p>=0;p--)r[p][t]-=r[p][v]*h[v]}return h}function s(r){return 180*r/Math.PI}function u(r){return r*Math.PI/180}function i(r,t){var e=r%t;return e*t<0?e+t:e}function c(r,t,e){return r+e*(t-r)}exports.log2=e;
},{}],"g5uZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=s,exports.asArray=i,exports.normalize=p,exports.toString=c,exports.isStringColor=l,exports.fromString=void 0;var r=require("./asserts.js"),e=require("./math.js"),t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(r){return"string"==typeof r?r:c(r)}function a(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}var o=function(){var r={},e=0;return function(t){var n;if(r.hasOwnProperty(t))n=r[t];else{if(e>=1024){var s=0;for(var a in r)0==(3&s++)&&(delete r[a],--e)}n=u(t),r[t]=n,++e}return n}}();function i(r){return Array.isArray(r)?r:o(r)}function u(e){var s,o,i,u,c;if(n.exec(e)&&(e=a(e)),t.exec(e)){var l=e.length-1,f=void 0;f=l<=4?1:2;var d=4===l||8===l;s=parseInt(e.substr(1+0*f,f),16),o=parseInt(e.substr(1+1*f,f),16),i=parseInt(e.substr(1+2*f,f),16),u=d?parseInt(e.substr(1+3*f,f),16):255,1==f&&(s=(s<<4)+s,o=(o<<4)+o,i=(i<<4)+i,d&&(u=(u<<4)+u)),c=[s,o,i,u/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,e.clamp)(r[0]+.5|0,0,255),r[1]=(0,e.clamp)(r[1]+.5|0,0,255),r[2]=(0,e.clamp)(r[2]+.5|0,0,255),r[3]=(0,e.clamp)(r[3],0,1),r}function c(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var n=r[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===r[3]?1:r[3])+")"}function l(r){return n.test(r)&&(r=a(r)),t.test(r)||0===r.indexOf("rgba(")||0===r.indexOf("rgb(")}exports.fromString=o;
},{"./asserts.js":"hgi2","./math.js":"cgU2"}],"n3wd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js"),t=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,c){var r=i(e,t,c);return r in this.cache_?this.cache_[r]:null},e.prototype.set=function(e,t,c,r){var a=i(e,t,c);this.cache_[a]=r,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function i(t,i,c){return i+":"+t+":"+(c?(0,e.asString)(c):"null")}var c=t;exports.default=c;var r=new t;exports.shared=r;
},{"../color.js":"g5uZ"}],"aj10":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=e,exports.default=void 0;var t=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function o(t){t.stopPropagation()}function e(t){t.preventDefault()}var p=t;exports.default=p;
},{}],"rU8L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"lPyT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.isEmpty=n,exports.getValues=exports.assign=void 0;var e="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var s=arguments[n];if(null!=s)for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u])}return t};function r(e){for(var r in e)delete e[r]}exports.assign=e;var t="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function n(e){var r;for(r in e)return!1;return!r}exports.getValues=t;
},{}],"zWyV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../Disposable.js")),t=s(require("./Event.js")),n=require("../functions.js"),i=require("../obj.js");function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function s(t){var n=e.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return r(s,e),s.prototype.addEventListener=function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);-1===i.indexOf(t)&&i.push(t)}},s.prototype.dispatchEvent=function(e){var i="string"==typeof e?new t.default(e):e,s=i.type;i.target||(i.target=this.eventTarget_||this);var r,o=this.listeners_&&this.listeners_[s];if(o){var l=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});s in l||(l[s]=0,a[s]=0),++l[s];for(var p=0,u=o.length;p<u;++p)if(!1===(r="handleEvent"in o[p]?o[p].handleEvent(i):o[p].call(this,i))||i.propagationStopped){r=!1;break}if(--l[s],0===l[s]){var h=a[s];for(delete a[s];h--;)this.removeEventListener(s,n.VOID);delete l[s]}return r}},s.prototype.disposeInternal=function(){this.listeners_&&(0,i.clear)(this.listeners_)},s.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},s.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},s.prototype.removeEventListener=function(e,t){var i=this.listeners_&&this.listeners_[e];if(i){var s=i.indexOf(t);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=n.VOID,++this.pendingRemovals_[e]):(i.splice(s,1),0===i.length&&delete this.listeners_[e]))}},s}(e.default),l=o;exports.default=l;
},{"../Disposable.js":"nie2","./Event.js":"aj10","../functions.js":"caQH","../obj.js":"lPyT"}],"lUmy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"E9xa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=r,exports.unlistenByKey=n;var e=require("./obj.js");function t(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var s=r;r=function(){e.removeEventListener(t,r),s.apply(this,arguments)}}var o={target:e,type:t,listener:r};return e.addEventListener(t,r),o}function r(e,r,n,i){return t(e,r,n,i,!0)}function n(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"lPyT"}],"YGGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=s,exports.default=void 0;var e=n(require("./events/Target.js")),t=n(require("./events/EventType.js")),r=require("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(e){function n(){var t=e.call(this)||this;return t.revision_=0,t}return o(n,e),n.prototype.changed=function(){++this.revision_,this.dispatchEvent(t.default.CHANGE)},n.prototype.getRevision=function(){return this.revision_},n.prototype.on=function(e,t){if(Array.isArray(e)){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,r.listen)(this,e[i],t);return o}return(0,r.listen)(this,e,t)},n.prototype.once=function(e,t){var n;if(Array.isArray(e)){var o=e.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=(0,r.listenOnce)(this,e[i],t)}else n=(0,r.listenOnce)(this,e,t);return t.ol_key=n,n},n.prototype.un=function(e,t){var r=t.ol_key;if(r)s(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)},n}(e.default);function s(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)(0,r.unlistenByKey)(e[t]);else(0,r.unlistenByKey)(e)}var u=i;exports.default=u;
},{"./events/Target.js":"zWyV","./events/EventType.js":"lUmy","./events.js":"E9xa"}],"YrNp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=l,exports.default=exports.ObjectEvent=void 0;var t=o(require("./events/Event.js")),e=o(require("./ObjectEventType.js")),r=o(require("./Observable.js")),s=require("./obj.js"),n=require("./util.js");function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),u=function(t){function e(e,r,s){var n=t.call(this,e)||this;return n.key=r,n.oldValue=s,n}return i(e,t),e}(t.default);exports.ObjectEvent=u;var a=function(t){function r(e){var r=t.call(this)||this;return(0,n.getUid)(r),r.values_=null,void 0!==e&&r.setProperties(e),r}return i(r,t),r.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},r.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},r.prototype.getProperties=function(){return this.values_&&(0,s.assign)({},this.values_)||{}},r.prototype.hasProperties=function(){return!!this.values_},r.prototype.notify=function(t,r){var s;s=l(t),this.dispatchEvent(new u(s,t,r)),s=e.default.PROPERTYCHANGE,this.dispatchEvent(new u(s,t,r))},r.prototype.set=function(t,e,r){var s=this.values_||(this.values_={});if(r)s[t]=e;else{var n=s[t];s[t]=e,n!==e&&this.notify(t,n)}},r.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},r.prototype.applyProperties=function(t){t.values_&&(0,s.assign)(this.values_||(this.values_={}),t.values_)},r.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],(0,s.isEmpty)(this.values_)&&(this.values_=null),e||this.notify(t,r)}},r}(r.default),p={};function l(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}var v=a;exports.default=v;
},{"./events/Event.js":"aj10","./ObjectEventType.js":"rU8L","./Observable.js":"YGGN","./obj.js":"lPyT","./util.js":"bmrL"}],"Vn14":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};exports.default=e;
},{}],"SWye":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../Object.js")),e=s(require("./Property.js")),o=require("../util.js"),i=require("../asserts.js"),n=require("../obj.js"),r=require("../math.js");function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),u=function(t){function s(o){var r=t.call(this)||this,s=(0,n.assign)({},o);return s[e.default.OPACITY]=void 0!==o.opacity?o.opacity:1,(0,i.assert)("number"==typeof s[e.default.OPACITY],64),s[e.default.VISIBLE]=void 0===o.visible||o.visible,s[e.default.Z_INDEX]=o.zIndex,s[e.default.MAX_RESOLUTION]=void 0!==o.maxResolution?o.maxResolution:1/0,s[e.default.MIN_RESOLUTION]=void 0!==o.minResolution?o.minResolution:0,s[e.default.MIN_ZOOM]=void 0!==o.minZoom?o.minZoom:-1/0,s[e.default.MAX_ZOOM]=void 0!==o.maxZoom?o.maxZoom:1/0,r.className_=void 0!==s.className?o.className:"ol-layer",delete s.className,r.setProperties(s),r.state_=null,r}return a(s,t),s.prototype.getClassName=function(){return this.className_},s.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},o=this.getZIndex();return e.opacity=(0,r.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==o?o:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},s.prototype.getLayersArray=function(t){return(0,o.abstract)()},s.prototype.getLayerStatesArray=function(t){return(0,o.abstract)()},s.prototype.getExtent=function(){return this.get(e.default.EXTENT)},s.prototype.getMaxResolution=function(){return this.get(e.default.MAX_RESOLUTION)},s.prototype.getMinResolution=function(){return this.get(e.default.MIN_RESOLUTION)},s.prototype.getMinZoom=function(){return this.get(e.default.MIN_ZOOM)},s.prototype.getMaxZoom=function(){return this.get(e.default.MAX_ZOOM)},s.prototype.getOpacity=function(){return this.get(e.default.OPACITY)},s.prototype.getSourceState=function(){return(0,o.abstract)()},s.prototype.getVisible=function(){return this.get(e.default.VISIBLE)},s.prototype.getZIndex=function(){return this.get(e.default.Z_INDEX)},s.prototype.setExtent=function(t){this.set(e.default.EXTENT,t)},s.prototype.setMaxResolution=function(t){this.set(e.default.MAX_RESOLUTION,t)},s.prototype.setMinResolution=function(t){this.set(e.default.MIN_RESOLUTION,t)},s.prototype.setMaxZoom=function(t){this.set(e.default.MAX_ZOOM,t)},s.prototype.setMinZoom=function(t){this.set(e.default.MIN_ZOOM,t)},s.prototype.setOpacity=function(t){(0,i.assert)("number"==typeof t,64),this.set(e.default.OPACITY,t)},s.prototype.setVisible=function(t){this.set(e.default.VISIBLE,t)},s.prototype.setZIndex=function(t){this.set(e.default.Z_INDEX,t)},s.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},s}(t.default),l=u;exports.default=l;
},{"../Object.js":"YrNp","./Property.js":"Vn14","../util.js":"bmrL","../asserts.js":"hgi2","../obj.js":"lPyT","../math.js":"cgU2"}],"mlMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"r4JV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"hYy3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inView=h,exports.default=void 0;var e=p(require("./Base.js")),t=p(require("../events/EventType.js")),r=p(require("./Property.js")),n=p(require("../render/EventType.js")),o=p(require("../source/State.js")),s=require("../asserts.js"),u=require("../obj.js"),a=require("../Object.js"),i=require("../events.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(e){function p(t){var n=this,o=(0,u.assign)({},t);delete o.source,(n=e.call(this,o)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addEventListener((0,a.getChangeEventType)(r.default.SOURCE),n.handleSourcePropertyChange_);var s=t.source?t.source:null;return n.setSource(s),n}return c(p,e),p.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},p.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},p.prototype.getSource=function(){return this.get(r.default.SOURCE)||null},p.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():o.default.UNDEFINED},p.prototype.handleSourceChange_=function(){this.changed()},p.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,i.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=(0,i.listen)(e,t.default.CHANGE,this.handleSourceChange_,this)),this.changed()},p.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},p.prototype.render=function(e,t){var r=this.getRenderer();if(r.prepareFrame(e))return r.renderFrame(e,t)},p.prototype.setMap=function(e){this.mapPrecomposeKey_&&((0,i.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,i.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,i.listen)(e,n.default.PRECOMPOSE,function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,s.assert)(!t.some(function(e){return e.layer===r.layer}),67),t.push(r)},this),this.mapRenderKey_=(0,i.listen)(this,t.default.CHANGE,e.render,e),this.changed())},p.prototype.setSource=function(e){this.set(r.default.SOURCE,e)},p.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},p.prototype.hasRenderer=function(){return!!this.renderer_},p.prototype.createRenderer=function(){return null},p.prototype.disposeInternal=function(){this.setSource(null),e.prototype.disposeInternal.call(this)},p}(e.default);function h(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var y=l;exports.default=y;
},{"./Base.js":"SWye","../events/EventType.js":"lUmy","./Property.js":"Vn14","../render/EventType.js":"mlMP","../source/State.js":"r4JV","../asserts.js":"hgi2","../obj.js":"lPyT","../Object.js":"YrNp","../events.js":"E9xa"}],"EcHH":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=r;
},{}],"uZ8Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=a,exports.createStringXY=u,exports.degreesToStringHDMS=s,exports.format=i,exports.equals=c,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.distance=d,exports.squaredDistanceToSegment=g,exports.toStringHDMS=l,exports.toStringXY=h,exports.wrapX=M,exports.getWorldsAway=v;var t=require("./extent.js"),r=require("./math.js"),e=require("./string.js");function n(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function o(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],a=n[1],u=t[0]-o,s=t[1]-a;0===u&&0===s&&(u=1);var i=Math.sqrt(u*u+s*s);return[o+e*u/i,a+e*s/i]}function a(t,r){var e,n,o=t[0],a=t[1],u=r[0],s=r[1],i=u[0],c=u[1],f=s[0],p=s[1],x=f-i,d=p-c,g=0===x&&0===d?0:(x*(o-i)+d*(a-c))/(x*x+d*d||0);return g<=0?(e=i,n=c):g>=1?(e=f,n=p):(e=i+g*x,n=c+g*d),[e,n]}function u(t){return function(r){return h(r,t)}}function s(t,n,o){var a=(0,r.modulo)(n+180,360)-180,u=Math.abs(3600*a),s=o||0,i=Math.pow(10,s),c=Math.floor(u/3600),f=Math.floor((u-3600*c)/60),p=u-3600*c-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,c+=1),c+" "+(0,e.padNumber)(f,2)+" "+(0,e.padNumber)(p,2,s)+""+(0==a?"":" "+t.charAt(a<0?1:0))}function i(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function c(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function f(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,a=t[1]*e+t[0]*n;return t[0]=o,t[1]=a,t}function p(t,r){return t[0]*=r,t[1]*=r,t}function x(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function d(t,r){return Math.sqrt(x(t,r))}function g(t,r){return x(t,a(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return i(t,"{x}, {y}",r)}function M(r,e){if(e.canWrapX()){var n=(0,t.getWidth)(e.getExtent()),o=v(r,e,n);o&&(r[0]-=o*n)}return r}function v(r,e,n){var o=e.getExtent(),a=0;if(e.canWrapX()&&(r[0]<o[0]||r[0]>o[2])){var u=n||(0,t.getWidth)(o);a=Math.floor((r[0]-o[0])/u)}return a}
},{"./extent.js":"pbFF","./math.js":"cgU2","./string.js":"EcHH"}],"B11z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../Disposable.js")),t=require("../functions.js"),r=require("../util.js"),n=require("../transform.js"),o=require("../extent.js"),a=require("../style/IconImageCache.js"),i=require("../layer/Layer.js"),u=require("../coordinate.js");function c(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(e){function c(t){var r=e.call(this)||this;return r.map_=t,r}return s(c,e),c.prototype.dispatchRenderEvent=function(e,t){(0,r.abstract)()},c.prototype.calculateMatrices2D=function(e){var t=e.viewState,r=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;(0,n.compose)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,n.makeInverse)(o,r)},c.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,a,c,s,p){var f,l=t.viewState;function d(e,t,r,n){return a.call(c,t,e?r:null,n)}var h=l.projection,y=(0,u.wrapX)(e.slice(),h),v=[[0,0]];if(h.canWrapX()&&n){var _=h.getExtent(),g=(0,o.getWidth)(_);v.push([-g,0],[g,0])}for(var j=t.layerStatesArray,m=j.length,q=[],x=[],b=0;b<v.length;b++)for(var E=m-1;E>=0;--E){var C=j[E],A=C.layer;if(A.hasRenderer()&&(0,i.inView)(C,l)&&s.call(p,A)){var S=A.getRenderer(),w=A.getSource();if(S&&w){var F=w.getWrapX()?y:e,O=d.bind(null,C.managed);x[0]=F[0]+v[b][0],x[1]=F[1]+v[b][1],f=S.forEachFeatureAtCoordinate(x,t,r,O,q)}if(f)return f}}if(0!==q.length){var P=1/q.length;return q.forEach(function(e,t){return e.distanceSq+=t*P}),q.sort(function(e,t){return e.distanceSq-t.distanceSq}),q.some(function(e){return f=e.callback(e.feature,e.layer,e.geometry)}),f}},c.prototype.forEachLayerAtPixel=function(e,t,n,o,a){return(0,r.abstract)()},c.prototype.hasFeatureAtCoordinate=function(e,r,n,o,a,i){return void 0!==this.forEachFeatureAtCoordinate(e,r,n,o,t.TRUE,this,a,i)},c.prototype.getMap=function(){return this.map_},c.prototype.renderFrame=function(e){(0,r.abstract)()},c.prototype.scheduleExpireIconCache=function(e){a.shared.canExpireCache()&&e.postRenderFunctions.push(f)},c}(e.default);function f(e,t){a.shared.expire()}var l=p;exports.default=l;
},{"../Disposable.js":"nie2","../functions.js":"caQH","../util.js":"bmrL","../transform.js":"ePpI","../extent.js":"pbFF","../style/IconImageCache.js":"n3wd","../layer/Layer.js":"hYy3","../coordinate.js":"uZ8Y"}],"ORJF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),o=function(t){function e(e,r,o,n){var u=t.call(this,e)||this;return u.inversePixelTransform=r,u.frameState=o,u.context=n,u}return r(e,t),e}(t.default),n=o;exports.default=n;
},{"../events/Event.js":"aj10"}],"by11":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var r="ol-selectable";exports.CLASS_SELECTABLE=r;var t="ol-unselectable";exports.CLASS_UNSELECTABLE=t;var s="ol-unsupported";exports.CLASS_UNSUPPORTED=s;var l="ol-control";exports.CLASS_CONTROL=l;var a="ol-collapsed";exports.CLASS_COLLAPSED=a;var o=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],i=function(e){var r=e.match(o);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},s=0,l=S.length;s<l;++s){var a=r[s+1];void 0!==a&&(t[S[s]]=a)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"ZGSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PASSIVE_EVENT_LISTENERS=exports.IMAGE_DECODE=exports.WORKER_OFFSCREEN_CANVAS=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;var e="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==e.indexOf("firefox");exports.FIREFOX=r;var o=-1!==e.indexOf("safari")&&-1==e.indexOf("chrom");exports.SAFARI=o;var t=-1!==e.indexOf("webkit")&&-1==e.indexOf("edge");exports.WEBKIT=t;var n=-1!==e.indexOf("macintosh");exports.MAC=n;var i="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=i;var E="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=E;var a="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=a;var s=function(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,r),window.removeEventListener("_",null,r)}catch(o){}return e}();exports.PASSIVE_EVENT_LISTENERS=s;
},{}],"N5LR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerWidth=r,exports.outerHeight=n,exports.replaceNode=o,exports.removeNode=a,exports.removeChildren=i,exports.replaceChildren=s;var e=require("./has.js");function t(t,r,n){var o=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas");return t&&(o.width=t),r&&(o.height=r),o.getContext("2d")}function r(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function n(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function a(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function s(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],a=t[n];if(!o&&!a)break;o!==a&&(o?a?e.insertBefore(a,o):(e.removeChild(o),--n):e.appendChild(a))}}
},{"./has.js":"ZGSM"}],"s2Hb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=w,exports.measureAndCacheTextWidth=O,exports.measureTextWidths=H,exports.rotateAtOffset=I,exports.drawImageOrLabel=M,exports.createTransformString=_,exports.measureTextHeight=exports.registerFont=exports.textHeights=exports.labelCache=exports.checkedFonts=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var e=i(require("../Object.js")),t=i(require("../events/Target.js")),r=require("../has.js"),a=require("../obj.js"),n=require("../dom.js"),s=require("../css.js"),o=require("../transform.js");function i(e){return e&&e.__esModule?e:{default:e}}var l="10px sans-serif";exports.defaultFont=l;var u="#000";exports.defaultFillStyle=u;var f="round";exports.defaultLineCap=f;var d=[];exports.defaultLineDash=d;var p=0;exports.defaultLineDashOffset=p;var x="round";exports.defaultLineJoin=x;var c=10;exports.defaultMiterLimit=c;var v="#000";exports.defaultStrokeStyle=v;var g="center";exports.defaultTextAlign=g;var h="middle";exports.defaultTextBaseline=h;var m=[0,0,0,0];exports.defaultPadding=m;var y=1;exports.defaultLineWidth=y;var C=new e.default;exports.checkedFonts=C;var L=new t.default;exports.labelCache=L,L.setSize=function(){console.warn("labelCache is deprecated.")};var T,F=null,S={};exports.textHeights=S;var b=function(){var e,t,r=100,n="32px ",o=["monospace","serif"],i=o.length,l="wmytzilWMYTZIL@#/&?$%10";function u(e,r,a){for(var s=!0,u=0;u<i;++u){var f=o[u];if(t=w(e+" "+r+" "+n+f,l),a!=f){var d=w(e+" "+r+" "+n+a+","+f,l);s=s&&d!=t}}return!!s}function f(){for(var t=!0,n=C.getKeys(),s=0,o=n.length;s<o;++s){var i=n[s];C.get(i)<r&&(u.apply(this,i.split("\n"))?((0,a.clear)(S),F=null,T=void 0,C.set(i,r)):(C.set(i,C.get(i)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var a=(0,s.getFontParameters)(t);if(a)for(var n=a.families,o=0,i=n.length;o<i;++o){var l=n[o],d=a.style+"\n"+a.weight+"\n"+l;void 0===C.get(d)&&(C.set(d,r,!0),u(a.style,a.weight,l)||(C.set(d,0,!0),void 0===e&&(e=setInterval(f,32))))}}}();exports.registerFont=b;var A=function(){var e;return function(t){var a=S[t];if(null==a){if(r.WORKER_OFFSCREEN_CANVAS){var n=(0,s.getFontParameters)(t),o=j(t,"g");a=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=t,document.body.appendChild(e),a=e.offsetHeight,document.body.removeChild(e);S[t]=a}return a}}();function j(e,t){return F||(F=(0,n.createCanvasContext2D)(1,1)),e!=T&&(F.font=e,T=F.font),F.measureText(t)}function w(e,t){return j(e,t).width}function O(e,t,r){if(t in r)return r[t];var a=w(e,t);return r[t]=a,a}function H(e,t,r){for(var a=t.length,n=0,s=0;s<a;++s){var o=w(e,t[s]);n=Math.max(n,o),r.push(o)}return n}function I(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}function M(e,t,r,a,n,s,o,i,l,u,f){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(f[0],f[1]),N(a,e)):f[0]<0||f[1]<0?(e.translate(l,u),e.scale(f[0],f[1]),e.drawImage(a,n,s,o,i,0,0,o,i)):e.drawImage(a,n,s,o,i,l,u,o*f[0],i*f[1]),e.restore()}function N(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}exports.measureTextHeight=A;var W=null;function _(e){return r.WORKER_OFFSCREEN_CANVAS?(0,o.toString)(e):(W||(W=(0,n.createCanvasContext2D)(1,1).canvas),W.style.transform=(0,o.toString)(e),W.style.transform)}
},{"../Object.js":"YrNp","../events/Target.js":"zWyV","../has.js":"ZGSM","../obj.js":"lPyT","../dom.js":"N5LR","../css.js":"by11","../transform.js":"ePpI"}],"BPpB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Map.js")),t=u(require("../ObjectEventType.js")),r=u(require("../render/Event.js")),n=u(require("../render/EventType.js")),i=u(require("../source/State.js")),s=require("../css.js"),a=require("../render/canvas.js"),l=require("../layer/Layer.js"),o=require("../events.js"),d=require("../dom.js");function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(e){function u(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=(0,o.listen)(a.checkedFonts,t.default.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=s.CLASS_UNSELECTABLE+" ol-layers";var l=r.getViewport();return l.insertBefore(n.element_,l.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return c(u,e),u.prototype.dispatchRenderEvent=function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}},u.prototype.disposeInternal=function(){(0,o.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},u.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var t=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),r=e.viewState;this.children_.length=0;for(var s=[],a=null,o=0,u=t.length;o<u;++o){var c=t[o];if(e.layerIndex=o,(0,l.inView)(c,r)&&(c.sourceState==i.default.READY||c.sourceState==i.default.UNDEFINED)){var h=c.layer,p=h.render(e,a);p&&(p!==a&&(this.children_.push(p),a=p),"getDeclutter"in h&&s.push(h))}}for(o=s.length-1;o>=0;--o)s[o].renderDeclutter(e);(0,d.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},u.prototype.forEachLayerAtPixel=function(e,t,r,n,i){for(var s=t.viewState,a=t.layerStatesArray,o=a.length-1;o>=0;--o){var d=a[o],u=d.layer;if(u.hasRenderer()&&(0,l.inView)(d,s)&&i(u)){var c=u.getRenderer().getDataAtPixel(e,t,r);if(c){var h=n(u,c);if(h)return h}}}},u}(e.default),p=h;exports.default=p;
},{"./Map.js":"B11z","../ObjectEventType.js":"rU8L","../render/Event.js":"ORJF","../render/EventType.js":"mlMP","../source/State.js":"r4JV","../css.js":"by11","../render/canvas.js":"s2Hb","../layer/Layer.js":"hYy3","../events.js":"E9xa","../dom.js":"N5LR"}],"gqQq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"UC92":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./Object.js")),r=i(require("./CollectionEventType.js")),n=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s={LENGTH:"length"},u=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return o(e,t),e}(n.default);exports.CollectionEvent=u;var a=function(e){function n(t,r){var n=e.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=t||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return o(n,e),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},n.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},n.prototype.getArray=function(){return this.array_},n.prototype.item=function(t){return this.array_[t]},n.prototype.getLength=function(){return this.get(s.LENGTH)},n.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(r.default.ADD,e,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},n.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},n.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(r.default.REMOVE,e,t)),e},n.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(r.default.REMOVE,i,t)),this.dispatchEvent(new u(r.default.ADD,e,t))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},n.prototype.updateLength_=function(){this.set(s.LENGTH,this.array_.length)},n.prototype.assertUnique_=function(e,r){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)},n}(e.default),h=a;exports.default=h;
},{"./AssertionError.js":"cI7L","./Object.js":"YrNp","./CollectionEventType.js":"gqQq","./events/Event.js":"aj10"}],"rZ6Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./Base.js")),t=c(require("../Collection.js")),r=c(require("../CollectionEventType.js")),n=c(require("../events/EventType.js")),s=c(require("../ObjectEventType.js")),i=c(require("../source/State.js")),a=require("../asserts.js"),o=require("../obj.js"),l=require("../Object.js"),y=require("../extent.js"),u=require("../util.js"),h=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f={LAYERS:"layers"},p=function(e){function c(r){var n=this,s=r||{},i=(0,o.assign)({},s);delete i.layers;var y=s.layers;return(n=e.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener((0,l.getChangeEventType)(f.LAYERS),n.handleLayersChanged_),y?Array.isArray(y)?y=new t.default(y.slice(),{unique:!0}):(0,a.assert)("function"==typeof y.getArray,43):y=new t.default(void 0,{unique:!0}),n.setLayers(y),n}return d(c,e),c.prototype.handleLayerChange_=function(){this.changed()},c.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(h.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push((0,h.listen)(e,r.default.ADD,this.handleLayersAdd_,this),(0,h.listen)(e,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(h.unlistenByKey);(0,o.clear)(this.listenerKeys_);for(var i=e.getArray(),a=0,l=i.length;a<l;a++){var y=i[a];this.listenerKeys_[(0,u.getUid)(y)]=[(0,h.listen)(y,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.listen)(y,n.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},c.prototype.handleLayersAdd_=function(e){var t=e.element;this.listenerKeys_[(0,u.getUid)(t)]=[(0,h.listen)(t,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.listen)(t,n.default.CHANGE,this.handleLayerChange_,this)],this.changed()},c.prototype.handleLayersRemove_=function(e){var t=e.element,r=(0,u.getUid)(t);this.listenerKeys_[r].forEach(h.unlistenByKey),delete this.listenerKeys_[r],this.changed()},c.prototype.getLayers=function(){return this.get(f.LAYERS)},c.prototype.setLayers=function(e){this.set(f.LAYERS,e)},c.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},c.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var n=this.getLayerState(),s=r,i=t.length;s<i;s++){var a=t[s];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=(0,y.getIntersection)(a.extent,n.extent):a.extent=n.extent)}return t},c.prototype.getSourceState=function(){return i.default.READY},c}(e.default),g=p;exports.default=g;
},{"./Base.js":"SWye","../Collection.js":"UC92","../CollectionEventType.js":"gqQq","../events/EventType.js":"lUmy","../ObjectEventType.js":"rU8L","../source/State.js":"r4JV","../asserts.js":"hgi2","../obj.js":"lPyT","../Object.js":"YrNp","../extent.js":"pbFF","../util.js":"bmrL","../events.js":"E9xa"}],"NwQQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),o=function(t){function e(e,r,o){var n=t.call(this,e)||this;return n.map=r,n.frameState=void 0!==o?o:null,n}return r(e,t),e}(t.default),n=o;exports.default=n;
},{"./events/Event.js":"aj10"}],"LhPi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),n=function(t){function e(e,o,n,r,i){var p=t.call(this,e,o,i)||this;return p.originalEvent=n,p.pixel_=null,p.coordinate_=null,p.dragging=void 0!==r&&r,p}return o(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(t.default),r=n;exports.default=r;
},{"./MapEvent.js":"NwQQ"}],"oGpv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"lUmy"}],"YM5Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"n5H5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./events/Target.js")),t=a(require("./events/EventType.js")),i=a(require("./MapBrowserEvent.js")),n=a(require("./MapBrowserEventType.js")),s=a(require("./pointer/EventType.js")),o=require("./has.js"),r=require("./events.js");function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(e){function a(i,n){var a=e.call(this,i)||this;a.map_=i,a.clickTimeoutId_,a.emulateClicks_=!1,a.dragging_=!1,a.dragListenerKeys_=[],a.moveTolerance_=n?n*o.DEVICE_PIXEL_RATIO:o.DEVICE_PIXEL_RATIO,a.down_=null;var l=a.map_.getViewport();return a.activePointers_=0,a.trackedTouches_={},a.element_=l,a.pointerdownListenerKey_=(0,r.listen)(l,s.default.POINTERDOWN,a.handlePointerDown_,a),a.originalPointerMoveEvent_,a.relayedListenerKey_=(0,r.listen)(l,s.default.POINTERMOVE,a.relayEvent_,a),a.boundHandleTouchMove_=a.handleTouchMove_.bind(a),a.element_.addEventListener(t.default.TOUCHMOVE,a.boundHandleTouchMove_,!!o.PASSIVE_EVENT_LISTENERS&&{passive:!1}),a}return l(a,e),a.prototype.emulateClick_=function(e){var t=new i.default(n.default.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new i.default(n.default.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new i.default(n.default.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},a.prototype.updateActivePointers_=function(e){var t=e;t.type==n.default.POINTERUP||t.type==n.default.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==n.default.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},a.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new i.default(n.default.POINTERUP,this.map_,e);this.dispatchEvent(t),this.emulateClicks_&&!t.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(r.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},a.prototype.isMouseActionButton_=function(e){return 0===e.button},a.prototype.handlePointerDown_=function(e){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(e);var t=new i.default(n.default.POINTERDOWN,this.map_,e);if(this.dispatchEvent(t),this.down_=e,0===this.dragListenerKeys_.length){var s=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,r.listen)(s,n.default.POINTERMOVE,this.handlePointerMove_,this),(0,r.listen)(s,n.default.POINTERUP,this.handlePointerUp_,this),(0,r.listen)(this.element_,n.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push((0,r.listen)(this.element_.getRootNode(),n.default.POINTERUP,this.handlePointerUp_,this))}},a.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new i.default(n.default.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}},a.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new i.default(e.type,this.map_,e,t))},a.prototype.handleTouchMove_=function(e){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||e.preventDefault()},a.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},a.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,r.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(t.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,r.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(r.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},a}(e.default),d=h;exports.default=d;
},{"./events/Target.js":"zWyV","./events/EventType.js":"lUmy","./MapBrowserEvent.js":"LhPi","./MapBrowserEventType.js":"oGpv","./pointer/EventType.js":"YM5Z","./has.js":"ZGSM","./events.js":"E9xa"}],"SHXd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"HiWl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"m4HJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var t=require("../asserts.js"),e=require("../obj.js"),i=1/0;exports.DROP=i;var n=function(){function n(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,e.clear)(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},n.prototype.enqueue=function(e){(0,t.assert)(!(this.keyFunction_(e)in this.queuedElements_),31);var n=this.priorityFunction_(e);return n!=i&&(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=s,i[t]=r,this.siftDown_(o,t)},n.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,s=i[e],r=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>r))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=s,n[e]=r},n.prototype.reprioritize=function(){var t,e,n,s=this.priorityFunction_,r=this.elements_,o=this.priorities_,u=0,h=r.length;for(e=0;e<h;++e)(n=s(t=r[e]))==i?delete this.queuedElements_[this.keyFunction_(t)]:(o[u]=n,r[u++]=t);r.length=u,o.length=u,this.heapify_()},n}(),s=n;exports.default=s;
},{"../asserts.js":"hgi2","../obj.js":"lPyT"}],"TPVv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"LiN4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTilePriority=s,exports.default=void 0;var e=o(require("./events/EventType.js")),t=i(require("./structs/PriorityQueue.js")),n=o(require("./TileState.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function r(e,n){var r=t.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return a(r,t),r.prototype.enqueue=function(n){var r=t.prototype.enqueue.call(this,n);r&&n[0].addEventListener(e.default.CHANGE,this.boundHandleTileChange_);return r},r.prototype.getTilesLoading=function(){return this.tilesLoading_},r.prototype.handleTileChange=function(t){var r=t.target,i=r.getState();if(r.hifi&&i===n.default.LOADED||i===n.default.ERROR||i===n.default.EMPTY){r.removeEventListener(e.default.CHANGE,this.boundHandleTileChange_);var o=r.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},r.prototype.loadMoreTiles=function(e,t){for(var r,i,o=0;this.tilesLoading_<e&&o<t&&this.getCount()>0;)i=(r=this.dequeue()[0]).getKey(),r.getState()!==n.default.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,r.load())},r}(t.default),l=u;function s(e,n,r,i,o){if(!(e&&r in e.wantedTiles))return t.DROP;if(!e.wantedTiles[r][n.getKey()])return t.DROP;var a=e.viewState.center,u=i[0]-a[0],l=i[1]-a[1];return 65536*Math.log(o)+Math.sqrt(u*u+l*l)/o}exports.default=l;
},{"./events/EventType.js":"lUmy","./structs/PriorityQueue.js":"m4HJ","./TileState.js":"TPVv"}],"qBtD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"IrdK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;var E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"ht2c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"vDt9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"tJwZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"xIXc":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js"),n=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),i=n;exports.default=i;
},{"./Units.js":"IrdK"}],"rWjA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=E,exports.toEPSG4326=f,exports.PROJECTIONS=exports.MAX_SAFE_Y=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var t=o(require("./Projection.js")),r=o(require("./Units.js")),e=require("../math.js");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),a=6378137;exports.RADIUS=a;var s=Math.PI*a;exports.HALF_SIZE=s;var u=[-s,-s,s,s];exports.EXTENT=u;var i=[-180,-85,180,85];exports.WORLD_EXTENT=i;var p=a*Math.log(Math.tan(Math.PI/2));exports.MAX_SAFE_Y=p;var c=function(t){function o(o){return t.call(this,{code:o,units:r.default.METERS,extent:u,global:!0,worldExtent:i,getPointResolution:function(t,r){return t/(0,e.cosh)(r[1]/a)}})||this}return n(o,t),o}(t.default),l=[new c("EPSG:3857"),new c("EPSG:102100"),new c("EPSG:102113"),new c("EPSG:900913"),new c("http://www.opengis.net/gml/srs/epsg.xml#3857")];function E(t,r,e){var o=t.length,n=e>1?e:2,u=r;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=0;i<o;i+=n){u[i]=s*t[i]/180;var c=a*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));c>p?c=p:c<-p&&(c=-p),u[i+1]=c}return u}function f(t,r,e){var o=t.length,n=e>1?e:2,u=r;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=0;i<o;i+=n)u[i]=180*t[i]/s,u[i+1]=360*Math.atan(Math.exp(t[i+1]/a))/Math.PI-90;return u}exports.PROJECTIONS=l;
},{"./Projection.js":"xIXc","./Units.js":"IrdK","../math.js":"cgU2"}],"Xe7Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var t=r(require("./Projection.js")),e=r(require("./Units.js"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=6378137;exports.RADIUS=o;var s=[-180,-90,180,90];exports.EXTENT=s;var u=Math.PI*o/180;exports.METERS_PER_UNIT=u;var i=function(t){function r(r,n){return t.call(this,{code:r,units:e.default.DEGREES,extent:s,axisOrientation:n,global:!0,metersPerUnit:u,worldExtent:s})||this}return n(r,t),r}(t.default),c=[new i("CRS:84"),new i("EPSG:4326","neu"),new i("urn:ogc:def:crs:OGC:1.3:CRS84"),new i("urn:ogc:def:crs:OGC:2:84"),new i("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")];exports.PROJECTIONS=c;
},{"./Projection.js":"xIXc","./Units.js":"IrdK"}],"AumW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.get=t,exports.add=n;var e={};function r(){e={}}function t(r){return e[r]||e[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function n(r,t){e[r]=t}
},{}],"zFpU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.add=o,exports.remove=n,exports.get=i;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"lPyT"}],"cmAE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=s,exports.getLength=n,exports.getArea=u,exports.offset=h,exports.DEFAULT_RADIUS=void 0;var e=a(require("./geom/GeometryType.js")),t=require("./math.js");function a(e){return e&&e.__esModule?e:{default:e}}var r=6371008.8;function s(e,a,s){var o=s||r,n=(0,t.toRadians)(e[1]),i=(0,t.toRadians)(a[1]),u=(i-n)/2,h=(0,t.toRadians)(a[0]-e[0])/2,f=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(i);return 2*o*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function o(e,t){for(var a=0,r=0,o=e.length;r<o-1;++r)a+=s(e[r],e[r+1],t);return a}function n(t,a){var s=a||{},i=s.radius||r,u=s.projection||"EPSG:3857",h=t.getType();h!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(u,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case e.default.POINT:case e.default.MULTI_POINT:break;case e.default.LINE_STRING:case e.default.LINEAR_RING:I=o(f=t.getCoordinates(),i);break;case e.default.MULTI_LINE_STRING:case e.default.POLYGON:for(M=0,c=(f=t.getCoordinates()).length;M<c;++M)I+=o(f[M],i);break;case e.default.MULTI_POLYGON:for(M=0,c=(f=t.getCoordinates()).length;M<c;++M)for(l=0,g=(d=f[M]).length;l<g;++l)I+=o(d[l],i);break;case e.default.GEOMETRY_COLLECTION:var L=t.getGeometries();for(M=0,c=L.length;M<c;++M)I+=n(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function i(e,a){for(var r=0,s=e.length,o=e[s-1][0],n=e[s-1][1],i=0;i<s;i++){var u=e[i][0],h=e[i][1];r+=(0,t.toRadians)(u-o)*(2+Math.sin((0,t.toRadians)(n))+Math.sin((0,t.toRadians)(h))),o=u,n=h}return r*a*a/2}function u(t,a){var s=a||{},o=s.radius||r,n=s.projection||"EPSG:3857",h=t.getType();h!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(n,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case e.default.POINT:case e.default.MULTI_POINT:case e.default.LINE_STRING:case e.default.MULTI_LINE_STRING:case e.default.LINEAR_RING:break;case e.default.POLYGON:for(f=t.getCoordinates(),I=Math.abs(i(f[0],o)),M=1,c=f.length;M<c;++M)I-=Math.abs(i(f[M],o));break;case e.default.MULTI_POLYGON:for(M=0,c=(f=t.getCoordinates()).length;M<c;++M)for(d=f[M],I+=Math.abs(i(d[0],o)),l=1,g=d.length;l<g;++l)I-=Math.abs(i(d[l],o));break;case e.default.GEOMETRY_COLLECTION:var L=t.getGeometries();for(M=0,c=L.length;M<c;++M)I+=u(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function h(e,a,s,o){var n=o||r,i=(0,t.toRadians)(e[1]),u=(0,t.toRadians)(e[0]),h=a/n,f=Math.asin(Math.sin(i)*Math.cos(h)+Math.cos(i)*Math.sin(h)*Math.cos(s)),d=u+Math.atan2(Math.sin(s)*Math.sin(h)*Math.cos(i),Math.cos(h)-Math.sin(i)*Math.sin(f));return[(0,t.toDegrees)(d),(0,t.toDegrees)(f)]}exports.DEFAULT_RADIUS=r;
},{"./geom/GeometryType.js":"qBtD","./math.js":"cgU2"}],"bkYg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=l,exports.identityTransform=E,exports.addProjection=g,exports.addProjections=P,exports.get=x,exports.getPointResolution=j,exports.addEquivalentProjections=v,exports.addEquivalentTransforms=m,exports.clearAllProjections=T,exports.createProjection=S,exports.createTransformFromCoordinateTransform=O,exports.addCoordinateTransforms=U,exports.fromLonLat=y,exports.toLonLat=h,exports.equivalent=R,exports.getTransformFromProjections=C,exports.getTransform=_,exports.transform=q,exports.transformExtent=G,exports.transformWithProjections=M,exports.setUserProjection=I,exports.clearUserProjection=N,exports.getUserProjection=W,exports.useGeographic=D,exports.toUserCoordinate=w,exports.fromUserCoordinate=J,exports.toUserExtent=L,exports.fromUserExtent=A,exports.createSafeCoordinateTransform=F,exports.addCommon=k,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return r.METERS_PER_UNIT}});var e=d(require("./proj/Projection.js")),r=p(require("./proj/Units.js")),t=require("./proj/epsg3857.js"),n=require("./proj/epsg4326.js"),o=require("./proj/projections.js"),i=require("./proj/transforms.js"),u=require("./extent.js"),s=require("./math.js"),a=require("./sphere.js"),f=require("./coordinate.js");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function d(e){return e&&e.__esModule?e:{default:e}}function l(e,r,t){var n;if(void 0!==r){for(var o=0,i=e.length;o<i;++o)r[o]=e[o];n=r}else n=e.slice();return n}function E(e,r,t){if(void 0!==r&&e!==r){for(var n=0,o=e.length;n<o;++n)r[n]=e[n];e=r}return e}function g(e){(0,o.add)(e.getCode(),e),(0,i.add)(e,e,l)}function P(e){e.forEach(g)}function x(e){return"string"==typeof e?(0,o.get)(e):e||null}function j(e,t,n,o){var i,u=(e=x(e)).getPointResolutionFunc();if(u){if(i=u(t,n),o&&o!==e.getUnits())(f=e.getMetersPerUnit())&&(i=i*f/r.METERS_PER_UNIT[o])}else{var s=e.getUnits();if(s==r.default.DEGREES&&!o||o==r.default.DEGREES)i=t;else{var f,c=C(e,x("EPSG:4326"));if(c===E&&s!==r.default.DEGREES)i=t*e.getMetersPerUnit();else{var p=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];p=c(p,p,2),i=((0,a.getDistance)(p.slice(0,2),p.slice(2,4))+(0,a.getDistance)(p.slice(4,6),p.slice(6,8)))/2}void 0!==(f=o?r.METERS_PER_UNIT[o]:e.getMetersPerUnit())&&(i/=f)}}return i}function v(e){P(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,i.add)(r,e,l)})})}function m(e,r,t,n){e.forEach(function(e){r.forEach(function(r){(0,i.add)(e,r,t),(0,i.add)(r,e,n)})})}function T(){(0,o.clear)(),(0,i.clear)()}function S(e,r){return e?"string"==typeof e?x(e):e:x(r)}function O(e){return function(r,t,n){for(var o=r.length,i=void 0!==n?n:2,u=void 0!==t?t:new Array(o),s=0;s<o;s+=i){var a=e([r[s],r[s+1]]);u[s]=a[0],u[s+1]=a[1];for(var f=i-1;f>=2;--f)u[s+f]=r[s+f]}return u}}function U(e,r,t,n){var o=x(e),u=x(r);(0,i.add)(o,u,O(t)),(0,i.add)(u,o,O(n))}function y(e,r){return q(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function h(e,r){var t=q(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),n=t[0];return(n<-180||n>180)&&(t[0]=(0,s.modulo)(n+180,360)-180),t}function R(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:C(e,r)===l&&t}function C(e,r){var t=e.getCode(),n=r.getCode(),o=(0,i.get)(t,n);return o||(o=E),o}function _(e,r){return C(x(e),x(r))}function q(e,r,t){return _(r,t)(e,void 0,e.length)}function G(e,r,t,n){var o=_(r,t);return(0,u.applyTransform)(e,o,void 0,n)}function M(e,r,t){return C(r,t)(e)}var b=null;function I(e){b=x(e)}function N(){b=null}function W(){return b}function D(){I("EPSG:4326")}function w(e,r){return b?q(e,r,b):e}function J(e,r){return b?q(e,b,r):e}function L(e,r){return b?G(e,r,b):e}function A(e,r){return b?G(e,b,r):e}function F(e,r,t){return function(n){var o,i,a=n[0],c=n[1];if(e.canWrapX()){var p=e.getExtent(),d=(0,u.getWidth)(p);(i=(0,f.getWorldsAway)(n,e,d))&&(a-=i*d),a=(0,s.clamp)(a,p[0],p[2]),c=(0,s.clamp)(c,p[1],p[3]),o=t([a,c])}else o=t(n);return i&&r.canWrapX()&&(o[0]+=i*(0,u.getWidth)(r.getExtent())),o}}function k(){v(t.PROJECTIONS),v(n.PROJECTIONS),m(n.PROJECTIONS,t.PROJECTIONS,t.fromEPSG4326,t.toEPSG4326)}k();
},{"./proj/Projection.js":"xIXc","./proj/Units.js":"IrdK","./proj/epsg3857.js":"rWjA","./proj/epsg4326.js":"Xe7Z","./proj/projections.js":"AumW","./proj/transforms.js":"zFpU","./extent.js":"pbFF","./math.js":"cgU2","./sphere.js":"cmAE","./coordinate.js":"uZ8Y"}],"Y6WP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h,M){if(n){var c=e?0:u[0]*o,l=e?0:u[1]*o,x=M?M[0]:0,i=M?M[1]:0,m=a[0]+c/2+x,s=a[2]-c/2+x,p=a[1]+l/2+i,f=a[3]-l/2+i;m>s&&(s=m=(s+m)/2),p>f&&(f=p=(f+p)/2);var g=(0,t.clamp)(n[0],m,s),v=(0,t.clamp)(n[1],p,f),d=30*o;return h&&r&&(g+=-d*Math.log(1+Math.max(0,m-n[0])/d)+d*Math.log(1+Math.max(0,n[0]-s)/d),v+=-d*Math.log(1+Math.max(0,p-n[1])/d)+d*Math.log(1+Math.max(0,n[1]-f)/d)),[g,v]}}}function e(t){return t}
},{"./math.js":"cgU2"}],"NMT5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=i,exports.createSnapToPower=o,exports.createMinMaxResolution=h;var t=require("./math.js"),a=require("./extent.js"),r=require("./array.js");function e(t,r,e,n){var i=(0,a.getWidth)(r)/e[0],o=(0,a.getHeight)(r)/e[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function n(a,r,e){var n=Math.min(a,r);return n*=Math.log(1+50*Math.max(0,a/r-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/a-1))/50+1),(0,t.clamp)(n,e/2,2*r)}function i(a,i,o,h){return function(u,M,l,c){if(void 0!==u){var m=a[0],f=a[a.length-1],v=o?e(m,o,l,h):m;if(c)return void 0===i||i?n(u,v,f):(0,t.clamp)(u,f,v);var s=Math.min(v,u),p=Math.floor((0,r.linearFindNearest)(a,s,M));return a[p]>v&&p<a.length-1?a[p+1]:a[p]}}}function o(a,r,i,o,h,u){return function(M,l,c,m){if(void 0!==M){var f=h?e(r,h,c,u):r,v=void 0!==i?i:0;if(m)return void 0===o||o?n(M,f,v):(0,t.clamp)(M,v,f);var s=Math.ceil(Math.log(r/f)/Math.log(a)-1e-9),p=-l*(.5-1e-9)+.5,d=Math.min(f,M),g=Math.floor(Math.log(r/d)/Math.log(a)+p),x=Math.max(s,g),j=r/Math.pow(a,x);return(0,t.clamp)(j,v,f)}}}function h(a,r,i,o,h){return function(u,M,l,c){if(void 0!==u){var m=o?e(a,o,l,h):a;return(void 0===i||i)&&c?n(u,m,r):(0,t.clamp)(u,r,m)}}}
},{"./math.js":"cgU2","./extent.js":"pbFF","./array.js":"u3be"}],"qBux":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=e,exports.none=o,exports.createSnapToN=t,exports.createSnapToZero=n;var r=require("./math.js");function e(r){return void 0!==r?0:void 0}function o(r){return void 0!==r?r:void 0}function t(r){var e=2*Math.PI/r;return function(r,o){return o?r:void 0!==r?r=Math.floor(r/e+.5)*e:void 0}}function n(e){var o=e||(0,r.toRadians)(5);return function(r,e){return e?r:void 0!==r?Math.abs(r)<=o?0:r:void 0}}
},{"./math.js":"cgU2"}],"tqAS":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"fUWX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"FOrd":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){for(var f=a||[],s=0,l=t;l<e;l+=n){var u=r[l],v=r[l+1];f[s++]=o[0]*u+o[2]*v+o[4],f[s++]=o[1]*u+o[3]*v+o[5]}return a&&f.length!=s&&(f.length=s),f}function t(r,t,e,n,o,a,f){for(var s=f||[],l=Math.cos(o),u=Math.sin(o),v=a[0],h=a[1],c=0,g=t;g<e;g+=n){var i=r[g]-v,p=r[g+1]-h;s[c++]=v+i*l-p*u,s[c++]=h+i*u+p*l;for(var x=g+2;x<g+n;++x)s[c++]=r[x]}return f&&s.length!=c&&(s.length=c),s}function e(r,t,e,n,o,a,f,s){for(var l=s||[],u=f[0],v=f[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;l[h++]=u+o*g,l[h++]=v+a*i;for(var p=c+2;p<c+n;++p)l[h++]=r[p]}return s&&l.length!=h&&(l.length=h),l}function n(r,t,e,n,o,a,f){for(var s=f||[],l=0,u=t;u<e;u+=n){s[l++]=r[u]+o,s[l++]=r[u+1]+a;for(var v=u+2;v<u+n;++v)s[l++]=r[v]}return f&&s.length!=l&&(s.length=l),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=r,exports.rotate=t,exports.scale=e,exports.translate=n;
},{}],"QKR7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../Object.js")),e=p(require("../proj/Units.js")),r=require("../util.js"),n=require("../transform.js"),o=require("../extent.js"),i=require("../proj.js"),s=require("../functions.js"),a=require("./flat/transform.js");function p(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=(0,n.create)(),f=function(t){function p(){var e=t.call(this)||this;return e.extent_=(0,o.createEmpty)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=(0,s.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)}),e}return u(p,t),p.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},p.prototype.clone=function(){return(0,r.abstract)()},p.prototype.closestPointXY=function(t,e,n,o){return(0,r.abstract)()},p.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},p.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},p.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},p.prototype.computeExtent=function(t){return(0,r.abstract)()},p.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,o.createOrUpdateEmpty)(e),this.extentRevision_=this.getRevision()}return(0,o.returnOrUpdate)(this.extent_,t)},p.prototype.rotate=function(t,e){(0,r.abstract)()},p.prototype.scale=function(t,e,n){(0,r.abstract)()},p.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},p.prototype.getSimplifiedGeometry=function(t){return(0,r.abstract)()},p.prototype.getType=function(){return(0,r.abstract)()},p.prototype.applyTransform=function(t){(0,r.abstract)()},p.prototype.intersectsExtent=function(t){return(0,r.abstract)()},p.prototype.translate=function(t,e){(0,r.abstract)()},p.prototype.transform=function(t,r){var s=(0,i.get)(t),p=s.getUnits()==e.default.TILE_PIXELS?function(t,e,p){var u=s.getExtent(),f=s.getWorldExtent(),l=(0,o.getHeight)(f)/(0,o.getHeight)(u);return(0,n.compose)(c,f[0],f[3],l,-l,0,0,0),(0,a.transform2D)(t,0,t.length,p,c,e),(0,i.getTransform)(s,r)(t,e,p)}:(0,i.getTransform)(s,r);return this.applyTransform(p),this},p}(t.default),l=f;exports.default=l;
},{"../Object.js":"YrNp","../proj/Units.js":"IrdK","../util.js":"bmrL","../transform.js":"ePpI","../extent.js":"pbFF","../proj.js":"bkYg","../functions.js":"caQH","./flat/transform.js":"FOrd"}],"Ya1f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=l,exports.transformGeom2D=f,exports.default=void 0;var t=n(require("./Geometry.js")),e=n(require("./GeometryLayout.js")),r=require("../util.js"),i=require("../extent.js"),o=require("./flat/transform.js");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),s=function(t){function n(){var r=t.call(this)||this;return r.layout=e.default.XY,r.stride=2,r.flatCoordinates=null,r}return a(n,t),n.prototype.computeExtent=function(t){return(0,i.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return(0,r.abstract)()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e},n.prototype.setCoordinates=function(t,e){(0,r.abstract)()},n.prototype.setLayout=function(t,r,i){var o;if(t)o=l(t);else{for(var n=0;n<i;++n){if(0===r.length)return this.layout=e.default.XY,void(this.stride=2);r=r[0]}t=u(o=r.length)}this.layout=t,this.stride=o},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,o.rotate)(r,0,r.length,i,t,e,r),this.changed()}},n.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var a=r;a||(a=(0,i.getCenter)(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();(0,o.scale)(s,0,s.length,u,t,n,a,s),this.changed()}},n.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,o.translate)(r,0,r.length,i,t,e,r),this.changed()}},n}(t.default);function u(t){var r;return 2==t?r=e.default.XY:3==t?r=e.default.XYZ:4==t&&(r=e.default.XYZM),r}function l(t){var r;return t==e.default.XY?r=2:t==e.default.XYZ||t==e.default.XYM?r=3:t==e.default.XYZM&&(r=4),r}function f(t,e,r){var i=t.getFlatCoordinates();if(i){var n=t.getStride();return(0,o.transform2D)(i,0,i.length,n,e,r)}return null}var d=s;exports.default=d;
},{"./Geometry.js":"QKR7","./GeometryLayout.js":"fUWX","../util.js":"bmrL","../extent.js":"pbFF","./flat/transform.js":"FOrd"}],"jEO8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=t,exports.arrayMaxSquaredDelta=a,exports.multiArrayMaxSquaredDelta=n,exports.assignClosestPoint=s,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(c=0;c<n;++c)i[c]=e[u+c];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}for(var N=h||[NaN,NaN],x=a+s;x<n;)if(e(t,x-s,x,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s,x+=s}else x+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=s(r,e,N,a,n,o,i,u,f,l,h),e=N}return l}function i(r,e,t,a,n,s,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=o(r,e,N,a,n,s,i,u,f,l,h),e=N[N.length-1]}return l}
},{"../../math.js":"cgU2"}],"km8t":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var f=t[o],l=0;l<n;++l)e[r++]=f[l];return r}function t(e,t,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=r(e,t,n[u],o);f[l++]=s,t=s}return f.length=l,f}function n(e,r,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=t(e,r,n[u],o,f[l]);f[l++]=s,r=s[s.length-1]}return f.length=l,f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"EHBi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.radialDistance=a,exports.snap=o,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f;var r=require("../../math.js");function e(r,e,n,u,o,i,s){var f=void 0!==s?s:[];return i||(n=a(r,e,n,u,o,f,0),r=f,e=0,u=2),f.length=t(r,e,n,u,o,f,0),f}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(q=0;q<s;++q)f[q]&&(o[i++]=e[t+q*u],o[i++]=e[t+q*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"cgU2"}],"ZGP2":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){for(var i=void 0!==o?o:[],a=0,l=r;l<t;l+=n)i[a++]=e.slice(l,l+n);return i.length=a,i}function r(r,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=e(r,t,u,o,a[l]),t=u}return a.length=l,a}function t(e,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=r(e,t,u,o,a[l]),t=u[u.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"lXVo":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"r8wC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./GeometryLayout.js")),e=u(require("./GeometryType.js")),o=u(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),i=require("../extent.js"),s=require("./flat/deflate.js"),n=require("./flat/simplify.js"),a=require("./flat/inflate.js"),l=require("./flat/area.js");function u(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),d=function(o){function u(t,e){var r=o.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?r.setCoordinates(t,e):r.setFlatCoordinates(e,t),r}return f(u,o),u.prototype.clone=function(){return new u(this.flatCoordinates.slice(),this.layout)},u.prototype.closestPointXY=function(t,e,o,s){return s<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,o,s))},u.prototype.getArea=function(){return(0,l.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getCoordinates=function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getSimplifiedGeometryInternal=function(e){var o=[];return o.length=(0,n.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o,0),new u(o,t.default.XY)},u.prototype.getType=function(){return e.default.LINEAR_RING},u.prototype.intersectsExtent=function(t){return!1},u.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},u}(o.default),h=d;exports.default=h;
},{"./GeometryLayout.js":"fUWX","./GeometryType.js":"qBtD","./SimpleGeometry.js":"Ya1f","./flat/closest.js":"jEO8","../extent.js":"pbFF","./flat/deflate.js":"km8t","./flat/simplify.js":"EHBi","./flat/inflate.js":"ZGP2","./flat/area.js":"lXVo"}],"fTqU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./GeometryType.js")),e=i(require("./SimpleGeometry.js")),o=require("../extent.js"),r=require("./flat/deflate.js"),n=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),a=function(e){function i(t,o){var r=e.call(this)||this;return r.setCoordinates(t,o),r}return s(i,e),i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,e,o,r){var i=this.flatCoordinates,s=(0,n.squaredDistance)(t,e,i[0],i[1]);if(s<r){for(var a=this.stride,u=0;u<a;++u)o[u]=i[u];return o.length=a,s}return r},i.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},i.prototype.computeExtent=function(t){return(0,o.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},i.prototype.getType=function(){return t.default.POINT},i.prototype.intersectsExtent=function(t){return(0,o.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},i.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},i}(e.default),u=a;exports.default=u;
},{"./GeometryType.js":"qBtD","./SimpleGeometry.js":"Ya1f","../extent.js":"pbFF","./flat/deflate.js":"km8t","../math.js":"cgU2"}],"g4sO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"pbFF"}],"Q2uF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("./contains.js"),e=require("../../array.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(e.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,r.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"./contains.js":"g4sO","../../array.js":"u3be"}],"UyND":[function(require,module,exports) {
"use strict";function e(e,r,t,o,u){for(var f,n=[e[r],e[r+1]],s=[];r+o<t;r+=o){if(s[0]=e[r+o],s[1]=e[r+o+1],f=u(n,s))return f;n[0]=s[0],n[1]=s[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"sHvJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./segments.js"),r=require("./contains.js");function t(r,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),r,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,e.forEach)(r,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,e,i,s,a){return!!t(n,e,i,s,a)||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[1])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[3])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[1])||!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[3]))))}function a(n,e,i,a,o){if(!s(n,e,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,r.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"pbFF","./segments.js":"UyND","./contains.js":"g4sO"}],"NFjB":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"ApPt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var a=r[e],u=r[e+1];i+=(a-o)*(u+s),o=a,s=u}return 0===i?void 0:i>0}function n(r,n,t,i,o){for(var s=void 0!==o&&o,a=0,u=t.length;a<u;++a){var f=t[a],v=e(r,n,f,i);if(0===a){if(s&&v||!s&&!v)return!1}else if(s&&!v||!s&&v)return!1;n=f}return!0}function t(r,e,t,i,o){for(var s=0,a=t.length;s<a;++s){var u=t[s];if(!n(r,e,u,i,o))return!1;u.length&&(e=u[u.length-1])}return!0}function i(n,t,i,o,s){for(var a=void 0!==s&&s,u=0,f=i.length;u<f;++u){var v=i[u],l=e(n,t,v,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&(0,r.coordinates)(n,t,v,o),t=v}return t}function o(r,e,n,t,o){for(var s=0,a=n.length;s<a;++s)e=i(r,e,n[s],t,o);return e}
},{"./reverse.js":"NFjB"}],"kEvS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=j,exports.fromExtent=x,exports.fromCircle=P,exports.makeRegular=m,exports.default=void 0;var t=C(require("./GeometryLayout.js")),e=C(require("./GeometryType.js")),i=C(require("./LinearRing.js")),r=C(require("./Point.js")),n=C(require("./SimpleGeometry.js")),s=require("./flat/closest.js"),o=require("../extent.js"),a=require("./flat/deflate.js"),l=require("../array.js"),d=require("./flat/interiorpoint.js"),h=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),p=require("./flat/area.js"),c=require("./flat/contains.js"),g=require("../math.js"),_=require("./flat/simplify.js"),y=require("../sphere.js");function C(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),R=function(n){function g(t,e,i){var r=n.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==e&&i?(r.setFlatCoordinates(e,t),r.ends_=i):r.setCoordinates(t,e),r}return v(g,n),g.prototype.appendLinearRing=function(t){this.flatCoordinates?(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g.prototype.clone=function(){var t=new g(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},g.prototype.closestPointXY=function(t,e,i,r){return r<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))},g.prototype.containsXY=function(t,e){return(0,c.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},g.prototype.getArea=function(){return(0,p.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},g.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,h.inflateCoordinatesArray)(e,0,this.ends_,this.stride)},g.prototype.getEnds=function(){return this.ends_},g.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,o.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,d.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},g.prototype.getInteriorPoint=function(){return new r.default(this.getFlatInteriorPoint(),t.default.XYM)},g.prototype.getLinearRingCount=function(){return this.ends_.length},g.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new i.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},g.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],s=0,o=0,a=r.length;o<a;++o){var l=r[o],d=new i.default(e.slice(s,l),t);n.push(d),s=l}return n},g.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},g.prototype.getSimplifiedGeometryInternal=function(e){var i=[],r=[];return i.length=(0,_.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),i,0,r),new g(i,t.default.XY,r)},g.prototype.getType=function(){return e.default.POLYGON},g.prototype.intersectsExtent=function(t){return(0,u.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},g.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,a.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},g}(n.default),q=R;function j(e,i,r,n){for(var s=r||32,o=[],a=0;a<s;++a)(0,l.extend)(o,(0,y.offset)(e,i,2*Math.PI*a/s,n));return o.push(o[0],o[1]),new R(o,t.default.XY,[o.length])}function x(e){var i=e[0],r=e[1],n=e[2],s=e[3],o=[i,r,i,s,n,s,n,r,i,r];return new R(o,t.default.XY,[o.length])}function P(t,e,i){for(var r=e||32,n=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=n*(r+1),l=new Array(a),d=0;d<a;d+=n){l[d]=0,l[d+1]=0;for(var h=2;h<n;h++)l[d+h]=o[h]}var u=[l.length],f=new R(l,s,u);return m(f,o,t.getRadius(),i),f}function m(t,e,i,r){for(var n=t.getFlatCoordinates(),s=t.getStride(),o=n.length/s-1,a=r||0,l=0;l<=o;++l){var d=l*s,h=a+2*(0,g.modulo)(l,o)*Math.PI/o;n[d]=e[0]+i*Math.cos(h),n[d+1]=e[1]+i*Math.sin(h)}t.changed()}exports.default=q;
},{"./GeometryLayout.js":"fUWX","./GeometryType.js":"qBtD","./LinearRing.js":"r8wC","./Point.js":"fTqU","./SimpleGeometry.js":"Ya1f","./flat/closest.js":"jEO8","../extent.js":"pbFF","./flat/deflate.js":"km8t","../array.js":"u3be","./flat/interiorpoint.js":"Q2uF","./flat/inflate.js":"ZGP2","./flat/intersectsextent.js":"sHvJ","./flat/orient.js":"ApPt","./flat/area.js":"lXVo","./flat/contains.js":"g4sO","../math.js":"cgU2","./flat/simplify.js":"EHBi","../sphere.js":"cmAE"}],"OW7R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=j,exports.createResolutionConstraint=x,exports.createRotationConstraint=A,exports.isNoopAnimation=E,exports.default=void 0;var t=v(require("./Object.js")),e=v(require("./geom/GeometryType.js")),o=v(require("./proj/Units.js")),n=v(require("./ViewHint.js")),i=v(require("./ViewProperty.js")),r=require("./tilegrid/common.js"),s=require("./proj.js"),a=require("./functions.js"),u=require("./coordinate.js"),h=require("./asserts.js"),l=require("./obj.js"),c=require("./centerconstraint.js"),p=require("./math.js"),g=require("./resolutionconstraint.js"),m=require("./rotationconstraint.js"),d=require("./easing.js"),f=require("./extent.js"),_=require("./array.js"),R=require("./geom/Polygon.js");function v(t){return t&&t.__esModule?t:{default:t}}var y=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),C=0,I=function(t){function o(e){var o=t.call(this)||this,n=(0,l.assign)({},e);return o.hints_=[0,0],o.animations_=[],o.updateAnimationKey_,o.projection_=(0,s.createProjection)(n.projection,"EPSG:3857"),o.viewportSize_=[100,100],o.targetCenter_=null,o.targetResolution_,o.targetRotation_,o.cancelAnchor_=void 0,n.center&&(n.center=(0,s.fromUserCoordinate)(n.center,o.projection_)),n.extent&&(n.extent=(0,s.fromUserExtent)(n.extent,o.projection_)),o.applyOptions_(n),o}return y(o,t),o.prototype.applyOptions_=function(t){var e=x(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding=t.padding,this.minZoom_=e.minZoom;var o=j(t),n=e.constraint,i=A(t);this.constraints_={center:o,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},o.prototype.getUpdatedOptions_=function(t){var e=(0,l.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),(0,l.assign)({},e,t)},o.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),o=0;o<e.length;++o){var n=arguments[o];n.center&&((n=(0,l.assign)({},n)).center=(0,s.fromUserCoordinate)(n.center,this.getProjection())),n.anchor&&((n=(0,l.assign)({},n)).anchor=(0,s.fromUserCoordinate)(n.anchor,this.getProjection())),e[o]=n}this.animateInternal.apply(this,e)},o.prototype.animateInternal=function(t){var e,o=arguments.length;if(o>1&&"function"==typeof arguments[o-1]&&(e=arguments[o-1],--o),!this.isDef()){var i=arguments[o-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&M(e,!0))}for(var r=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,u=this.targetRotation_,h=[],l=0;l<o;++l){var c=arguments[l],g={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||d.inAndOut,callback:e};if(c.center&&(g.sourceCenter=s,g.targetCenter=c.center.slice(),s=g.targetCenter),void 0!==c.zoom?(g.sourceResolution=a,g.targetResolution=this.getResolutionForZoom(c.zoom),a=g.targetResolution):c.resolution&&(g.sourceResolution=a,g.targetResolution=c.resolution,a=g.targetResolution),void 0!==c.rotation){g.sourceRotation=u;var m=(0,p.modulo)(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=u+m,u=g.targetRotation}E(g)?g.complete=!0:r+=g.duration,h.push(g)}this.animations_.push(h),this.setHint(n.default.ANIMATING,1),this.updateAnimations_()},o.prototype.getAnimating=function(){return this.hints_[n.default.ANIMATING]>0},o.prototype.getInteracting=function(){return this.hints_[n.default.INTERACTING]>0},o.prototype.cancelAnimations=function(){var t;this.setHint(n.default.ANIMATING,-this.hints_[n.default.ANIMATING]);for(var e=0,o=this.animations_.length;e<o;++e){var i=this.animations_[e];if(i[0].callback&&M(i[0].callback,!1),!t)for(var r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},o.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],r=!0,s=0,a=i.length;s<a;++s){var u=i[s];if(!u.complete){var h=t-u.start,l=u.duration>0?h/u.duration:1;l>=1?(u.complete=!0,l=1):r=!1;var c=u.easing(l);if(u.sourceCenter){var g=u.sourceCenter[0],m=u.sourceCenter[1],d=g+c*(u.targetCenter[0]-g),f=m+c*(u.targetCenter[1]-m);this.targetCenter_=[d,f]}if(u.sourceResolution&&u.targetResolution){var _=1===c?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);if(u.anchor){var R=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(_,0,R,!0);this.targetCenter_=this.calculateCenterZoom(v,u.anchor)}this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var y=1===c?(0,p.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);if(u.anchor){var C=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(C,u.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!u.complete)break}}if(r){this.animations_[o]=null,this.setHint(n.default.ANIMATING,-1);var I=i[0].callback;I&&M(I,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},o.prototype.calculateCenterRotate=function(t,e){var o,n=this.getCenterInternal();return void 0!==n&&(o=[n[0]-e[0],n[1]-e[1]],(0,u.rotate)(o,t-this.getRotation()),(0,u.add)(o,e)),o},o.prototype.calculateCenterZoom=function(t,e){var o,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(o=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]);return o},o.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var o=e[0],n=e[1];return[Math.abs(o*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(o*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},o.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},o.prototype.getCenter=function(){var t=this.getCenterInternal();return t?(0,s.toUserCoordinate)(t,this.getProjection()):t},o.prototype.getCenterInternal=function(){return this.get(i.default.CENTER)},o.prototype.getConstraints=function(){return this.constraints_},o.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},o.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},o.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return(0,s.toUserExtent)(e,this.getProjection())},o.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),o=this.getCenterInternal();(0,h.assert)(o,1);var n=this.getResolution();(0,h.assert)(void 0!==n,2);var i=this.getRotation();return(0,h.assert)(void 0!==i,3),(0,f.getForViewAndSize)(o,n,i,e)},o.prototype.getMaxResolution=function(){return this.maxResolution_},o.prototype.getMinResolution=function(){return this.minResolution_},o.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},o.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},o.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},o.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},o.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},o.prototype.getProjection=function(){return this.projection_},o.prototype.getResolution=function(){return this.get(i.default.RESOLUTION)},o.prototype.getResolutions=function(){return this.resolutions_},o.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal((0,s.fromUserExtent)(t,this.getProjection()),e)},o.prototype.getResolutionForExtentInternal=function(t,e){var o=e||this.getViewportSize_(),n=(0,f.getWidth)(t)/o[0],i=(0,f.getHeight)(t)/o[1];return Math.max(n,i)},o.prototype.getResolutionForValueFunction=function(t){var e=t||2,o=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(o/n)/Math.log(e);return function(t){return o/Math.pow(e,t*i)}},o.prototype.getRotation=function(){return this.get(i.default.ROTATION)},o.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),o=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(o/n)/e;return function(t){return Math.log(o/t)/e/i}},o.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),o=this.padding;return o&&(e=[e[0]-o[1]-o[3],e[1]-o[0]-o[2]]),e},o.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),o=this.getRotation(),n=this.getCenterInternal(),i=this.padding;if(i){var r=this.getViewportSizeMinusPadding_();n=S(n,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,o)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:o,zoom:this.getZoom()}},o.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},o.prototype.getZoomForResolution=function(t){var e,o,n=this.minZoom_||0;if(this.resolutions_){var i=(0,_.linearFindNearest)(this.resolutions_,t,1);n=i,e=this.resolutions_[i],o=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(e/t)/Math.log(o)},o.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,p.clamp)(Math.floor(t),0,this.resolutions_.length-2),o=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(o,(0,p.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},o.prototype.fit=function(t,o){var n;if((0,h.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,h.assert)(!(0,f.isEmpty)(t),25);var i=(0,s.fromUserExtent)(t,this.getProjection());n=(0,R.fromExtent)(i)}else if(t.getType()===e.default.CIRCLE){i=(0,s.fromUserExtent)(t.getExtent(),this.getProjection());(n=(0,R.fromExtent)(i)).rotate(this.getRotation(),(0,f.getCenter)(i))}else{var r=(0,s.getUserProjection)();n=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(n,o)},o.prototype.fitInternal=function(t,e){var o=e||{},n=o.size;n||(n=this.getViewportSizeMinusPadding_());var i,r=void 0!==o.padding?o.padding:[0,0,0,0],s=void 0!==o.nearest&&o.nearest;i=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.getResolutionForZoom(o.maxZoom):0;for(var u=t.getFlatCoordinates(),h=this.getRotation(),l=Math.cos(-h),c=Math.sin(-h),p=1/0,g=1/0,m=-1/0,d=-1/0,f=t.getStride(),_=0,R=u.length;_<R;_+=f){var v=u[_]*l-u[_+1]*c,y=u[_]*c+u[_+1]*l;p=Math.min(p,v),g=Math.min(g,y),m=Math.max(m,v),d=Math.max(d,y)}var C=this.getResolutionForExtentInternal([p,g,m,d],[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);C=isNaN(C)?i:Math.max(C,i),C=this.getConstrainedResolution(C,s?0:1),c=-c;var I=(p+m)/2,j=(g+d)/2,x=(I+=(r[1]-r[3])/2*C)*l-(j+=(r[0]-r[2])/2*C)*c,A=j*l+I*c,E=this.getConstrainedCenter([x,A],C),S=o.callback?o.callback:a.VOID;void 0!==o.duration?this.animateInternal({resolution:C,center:E,duration:o.duration,easing:o.easing},S):(this.targetResolution_=C,this.targetCenter_=E,this.applyTargetState_(!1,!0),M(S,!0))},o.prototype.centerOn=function(t,e,o){this.centerOnInternal((0,s.fromUserCoordinate)(t,this.getProjection()),e,o)},o.prototype.centerOnInternal=function(t,e,o){this.setCenterInternal(S(t,e,o,this.getResolution(),this.getRotation()))},o.prototype.calculateCenterShift=function(t,e,o,n){var i,r=this.padding;if(r&&t){var s=this.getViewportSizeMinusPadding_(-o),a=S(t,n,[s[0]/2+r[3],s[1]/2+r[0]],e,o);i=[t[0]-a[0],t[1]-a[1]]}return i},o.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},o.prototype.adjustCenter=function(t){var e=(0,s.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},o.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},o.prototype.adjustResolution=function(t,e){var o=e&&(0,s.fromUserCoordinate)(e,this.getProjection());this.adjustResolutionInternal(t,o)},o.prototype.adjustResolutionInternal=function(t,e){var o=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,o);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},o.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},o.prototype.adjustRotation=function(t,e){e&&(e=(0,s.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)},o.prototype.adjustRotationInternal=function(t,e){var o=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,o);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},o.prototype.setCenter=function(t){this.setCenterInternal((0,s.fromUserCoordinate)(t,this.getProjection()))},o.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},o.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},o.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},o.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},o.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},o.prototype.applyTargetState_=function(t,e){var o=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,o),r=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,r,o),a=this.constraints_.center(this.targetCenter_,s,r,o,this.calculateCenterShift(this.targetCenter_,s,n,r));this.get(i.default.ROTATION)!==n&&this.set(i.default.ROTATION,n),this.get(i.default.RESOLUTION)!==s&&this.set(i.default.RESOLUTION,s),this.get(i.default.CENTER)&&(0,u.equals)(this.get(i.default.CENTER),a)||this.set(i.default.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},o.prototype.resolveConstraints=function(t,e,o){var n=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),h=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=h,void this.applyTargetState_();var l=o||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&(0,u.equals)(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:a,duration:n,easing:d.easeOut,anchor:l}))},o.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(n.default.INTERACTING,1)},o.prototype.endInteraction=function(t,e,o){var n=o&&(0,s.fromUserCoordinate)(o,this.getProjection());this.endInteractionInternal(t,e,n)},o.prototype.endInteractionInternal=function(t,e,o){this.setHint(n.default.INTERACTING,-1),this.resolveConstraints(t,e,o)},o.prototype.getConstrainedCenter=function(t,e){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),o)},o.prototype.getConstrainedZoom=function(t,e){var o=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(o,e))},o.prototype.getConstrainedResolution=function(t,e){var o=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,o,n)},o}(t.default);function M(t,e){setTimeout(function(){t(e)},0)}function j(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,c.createExtent)(t.extent,t.constrainOnlyCenter,e)}var o=(0,s.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&o.isGlobal()){var n=o.getExtent().slice();return n[0]=-1/0,n[2]=1/0,(0,c.createExtent)(n,!1,!1)}return c.none}function x(t){var e,n,i,a=void 0!==t.minZoom?t.minZoom:C,u=void 0!==t.maxZoom?t.maxZoom:28,h=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,m=(0,s.createProjection)(t.projection,"EPSG:3857"),d=m.getExtent(),_=t.constrainOnlyCenter,R=t.extent;if(l||R||!m.isGlobal()||(_=!1,R=d),void 0!==t.resolutions){var v=t.resolutions;n=v[a],i=void 0!==v[u]?v[u]:v[v.length-1],e=t.constrainResolution?(0,g.createSnapToResolutions)(v,c,!_&&R,p):(0,g.createMinMaxResolution)(n,i,c,!_&&R,p)}else{var y=(d?Math.max((0,f.getWidth)(d),(0,f.getHeight)(d)):360*s.METERS_PER_UNIT[o.default.DEGREES]/m.getMetersPerUnit())/r.DEFAULT_TILE_SIZE/Math.pow(2,C),I=y/Math.pow(2,28-C);void 0!==(n=t.maxResolution)?a=0:n=y/Math.pow(h,a),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(h,u):y/Math.pow(h,u):I),u=a+Math.floor(Math.log(n/i)/Math.log(h)),i=n/Math.pow(h,u-a),e=t.constrainResolution?(0,g.createSnapToPower)(h,n,i,c,!_&&R,p):(0,g.createMinMaxResolution)(n,i,c,!_&&R,p)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:a,zoomFactor:h}}function A(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,m.createSnapToZero)():!1===e?m.none:"number"==typeof e?(0,m.createSnapToN)(e):m.none}return m.disable}function E(t){return!(t.sourceCenter&&t.targetCenter&&!(0,u.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function S(t,e,o,n,i){var r=Math.cos(-i),s=Math.sin(-i),a=t[0]*r-t[1]*s,u=t[1]*r+t[0]*s;return[(a+=(e[0]/2-o[0])*n)*r-(u+=(o[1]-e[1]/2)*n)*(s=-s),u*r+a*s]}var T=I;exports.default=T;
},{"./Object.js":"YrNp","./geom/GeometryType.js":"qBtD","./proj/Units.js":"IrdK","./ViewHint.js":"ht2c","./ViewProperty.js":"vDt9","./tilegrid/common.js":"tJwZ","./proj.js":"bkYg","./functions.js":"caQH","./coordinate.js":"uZ8Y","./asserts.js":"hgi2","./obj.js":"lPyT","./centerconstraint.js":"Y6WP","./math.js":"cgU2","./resolutionconstraint.js":"NMT5","./rotationconstraint.js":"qBux","./easing.js":"tqAS","./extent.js":"pbFF","./array.js":"u3be","./geom/Polygon.js":"kEvS"}],"XzjU":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"xloC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=x(require("./Object.js")),t=S(require("./Collection.js")),r=S(require("./CollectionEventType.js")),n=S(require("./events/EventType.js")),i=S(require("./layer/Group.js")),o=S(require("./MapBrowserEvent.js")),a=S(require("./MapBrowserEventHandler.js")),s=S(require("./MapBrowserEventType.js")),l=S(require("./MapEvent.js")),d=S(require("./MapEventType.js")),u=S(require("./MapProperty.js")),p=S(require("./ObjectEventType.js")),h=S(require("./pointer/EventType.js")),y=S(require("./render/EventType.js")),v=x(require("./TileQueue.js")),f=S(require("./View.js")),c=S(require("./ViewHint.js")),_=require("./has.js"),g=require("./functions.js"),E=require("./transform.js"),m=require("./asserts.js"),w=require("./extent.js"),T=require("./proj.js"),C=require("./size.js"),L=require("./events.js"),R=require("./dom.js");function S(e){return e&&e.__esModule?e:{default:e}}function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var I=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=function(i){function f(n){var o=i.call(this)||this,a=O(n);return o.boundHandleBrowserEvent_=o.handleBrowserEvent.bind(o),o.maxTilesLoading_=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,o.pixelRatio_=void 0!==n.pixelRatio?n.pixelRatio:_.DEVICE_PIXEL_RATIO,o.postRenderTimeoutHandle_,o.animationDelayKey_,o.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(o),o.coordinateToPixelTransform_=(0,E.create)(),o.pixelToCoordinateTransform_=(0,E.create)(),o.frameIndex_=0,o.frameState_=null,o.previousExtent_=null,o.viewPropertyListenerKey_=null,o.viewChangeListenerKey_=null,o.layerGroupPropertyListenerKeys_=null,o.viewport_=document.createElement("div"),o.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),o.viewport_.style.position="relative",o.viewport_.style.overflow="hidden",o.viewport_.style.width="100%",o.viewport_.style.height="100%",o.overlayContainer_=document.createElement("div"),o.overlayContainer_.style.position="absolute",o.overlayContainer_.style.zIndex="0",o.overlayContainer_.style.width="100%",o.overlayContainer_.style.height="100%",o.overlayContainer_.style.pointerEvents="none",o.overlayContainer_.className="ol-overlaycontainer",o.viewport_.appendChild(o.overlayContainer_),o.overlayContainerStopEvent_=document.createElement("div"),o.overlayContainerStopEvent_.style.position="absolute",o.overlayContainerStopEvent_.style.zIndex="0",o.overlayContainerStopEvent_.style.width="100%",o.overlayContainerStopEvent_.style.height="100%",o.overlayContainerStopEvent_.style.pointerEvents="none",o.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",o.viewport_.appendChild(o.overlayContainerStopEvent_),o.mapBrowserEventHandler_=null,o.moveTolerance_=n.moveTolerance,o.keyboardEventTarget_=a.keyboardEventTarget,o.keyHandlerKeys_=null,o.controls=a.controls||new t.default,o.interactions=a.interactions||new t.default,o.overlays_=a.overlays,o.overlayIdIndex_={},o.renderer_=null,o.handleResize_,o.postRenderFunctions_=[],o.tileQueue_=new v.default(o.getTilePriority.bind(o),o.handleTileChange_.bind(o)),o.addEventListener((0,e.getChangeEventType)(u.default.LAYERGROUP),o.handleLayerGroupChanged_),o.addEventListener((0,e.getChangeEventType)(u.default.VIEW),o.handleViewChanged_),o.addEventListener((0,e.getChangeEventType)(u.default.SIZE),o.handleSizeChanged_),o.addEventListener((0,e.getChangeEventType)(u.default.TARGET),o.handleTargetChanged_),o.setProperties(a.values),o.controls.forEach(function(e){e.setMap(this)}.bind(o)),o.controls.addEventListener(r.default.ADD,function(e){e.element.setMap(this)}.bind(o)),o.controls.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.interactions.forEach(function(e){e.setMap(this)}.bind(o)),o.interactions.addEventListener(r.default.ADD,function(e){e.element.setMap(this)}.bind(o)),o.interactions.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.overlays_.forEach(o.addOverlayInternal_.bind(o)),o.overlays_.addEventListener(r.default.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(o)),o.overlays_.addEventListener(r.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(o)),o}return I(f,i),f.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},f.prototype.addControl=function(e){this.getControls().push(e)},f.prototype.addInteraction=function(e){this.getInteractions().push(e)},f.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},f.prototype.addOverlay=function(e){this.getOverlays().push(e)},f.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},f.prototype.disposeInternal=function(){this.setTarget(null),i.prototype.disposeInternal.call(this)},f.prototype.forEachFeatureAtPixel=function(e,t,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,o=void 0!==r.layerFilter?r.layerFilter:g.TRUE,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,t,null,o,null)}},f.prototype.getFeaturesAtPixel=function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r},f.prototype.forEachLayerAtPixel=function(e,t,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance:0,o=n.layerFilter||g.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,i,t,o)}},f.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:g.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},f.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},f.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},f.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]},f.prototype.getTarget=function(){return this.get(u.default.TARGET)},f.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},f.prototype.getCoordinateFromPixel=function(e){return(0,T.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},f.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?(0,E.apply)(t.pixelToCoordinateTransform,e.slice()):null},f.prototype.getControls=function(){return this.controls},f.prototype.getOverlays=function(){return this.overlays_},f.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},f.prototype.getInteractions=function(){return this.interactions},f.prototype.getLayerGroup=function(){return this.get(u.default.LAYERGROUP)},f.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},f.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer.getSource();if(n&&n.loading)return!0}return!1},f.prototype.getPixelFromCoordinate=function(e){var t=(0,T.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},f.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?(0,E.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null},f.prototype.getRenderer=function(){return this.renderer_},f.prototype.getSize=function(){return this.get(u.default.SIZE)},f.prototype.getView=function(){return this.get(u.default.VIEW)},f.prototype.getViewport=function(){return this.viewport_},f.prototype.getOverlayContainer=function(){return this.overlayContainer_},f.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},f.prototype.getOwnerDocument=function(){return this.getTargetElement()?this.getTargetElement().ownerDocument:document},f.prototype.getTilePriority=function(e,t,r,n){return(0,v.getTilePriority)(this.frameState_,e,t,r,n)},f.prototype.handleBrowserEvent=function(e,t){var r=t||e.type,n=new o.default(r,this,e);this.handleMapBrowserEvent(n)},f.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===h.default.POINTERDOWN||r===n.default.WHEEL||r===n.default.KEYDOWN){var i=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a="host"in o?o.elementFromPoint(t.clientX,t.clientY):t.target;if(this.overlayContainerStopEvent_.contains(a)||!(o===i?i.documentElement:o).contains(a))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var s=this.getInteractions().getArray().slice(),l=s.length-1;l>=0;l--){var d=s[l];if(d.getMap()===this&&d.getActive()&&this.getTargetElement())if(!d.handleEvent(e)||e.propagationStopped)break}}},f.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[c.default.ANIMATING]||i[c.default.INTERACTING]){var o=!_.IMAGE_DECODE&&Date.now()-e.time>8;r=o?0:8,n=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}!e||!this.hasListener(y.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(y.default.RENDERCOMPLETE,e);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,e);a.length=0},f.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},f.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(var t=0,r=this.keyHandlerKeys_.length;t<r;++t)(0,L.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(n.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(n.default.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(n.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,R.removeNode)(this.viewport_)}if(e){for(var i in e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new a.default(this,this.moveTolerance_),s.default)this.mapBrowserEventHandler_.addEventListener(s.default[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(n.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(n.default.WHEEL,this.boundHandleBrowserEvent_,!!_.PASSIVE_EVENT_LISTENERS&&{passive:!1});var o=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,L.listen)(o,n.default.KEYDOWN,this.handleBrowserEvent,this),(0,L.listen)(o,n.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(n.default.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},f.prototype.handleTileChange_=function(){this.render()},f.prototype.handleViewPropertyChanged_=function(){this.render()},f.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,L.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,L.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,L.listen)(e,p.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,L.listen)(e,n.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},f.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(L.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,L.listen)(e,p.default.PROPERTYCHANGE,this.render,this),(0,L.listen)(e,n.default.CHANGE,this.render,this)]),this.render()},f.prototype.isRendered=function(){return!!this.frameState_},f.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},f.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},f.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},f.prototype.removeControl=function(e){return this.getControls().remove(e)},f.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},f.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},f.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},f.prototype.renderFrame_=function(e){var t=this,r=this.getSize(),n=this.getView(),i=this.frameState_,o=null;if(void 0!==r&&(0,C.hasArea)(r)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,w.getForViewAndSize)(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{}}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i)(!this.previousExtent_||!(0,w.isEmpty)(this.previousExtent_)&&!(0,w.equals)(o.extent,this.previousExtent_))&&(this.dispatchEvent(new l.default(d.default.MOVESTART,this,i)),this.previousExtent_=(0,w.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!o.viewHints[c.default.ANIMATING]&&!o.viewHints[c.default.INTERACTING]&&!(0,w.equals)(o.extent,this.previousExtent_)&&(this.dispatchEvent(new l.default(d.default.MOVEEND,this,o)),(0,w.clone)(o.extent,this.previousExtent_))}this.dispatchEvent(new l.default(d.default.POSTRENDER,this,o)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()},0))},f.prototype.setLayerGroup=function(e){this.set(u.default.LAYERGROUP,e)},f.prototype.setSize=function(e){this.set(u.default.SIZE,e)},f.prototype.setTarget=function(e){this.set(u.default.TARGET,e)},f.prototype.setView=function(e){this.set(u.default.VIEW,e)},f.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},f.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}},f}(e.default);function O(e){var r=null;void 0!==e.keyboardEventTarget&&(r="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n,o,a,s={},l=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new i.default({layers:e.layers});return s[u.default.LAYERGROUP]=l,s[u.default.TARGET]=e.target,s[u.default.VIEW]=void 0!==e.view?e.view:new f.default,void 0!==e.controls&&(Array.isArray(e.controls)?n=new t.default(e.controls.slice()):((0,m.assert)("function"==typeof e.controls.getArray,47),n=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?o=new t.default(e.interactions.slice()):((0,m.assert)("function"==typeof e.interactions.getArray,48),o=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?a=new t.default(e.overlays.slice()):((0,m.assert)("function"==typeof e.overlays.getArray,49),a=e.overlays):a=new t.default,{controls:n,interactions:o,keyboardEventTarget:r,overlays:a,values:s}}var b=A;exports.default=b;
},{"./Object.js":"YrNp","./Collection.js":"UC92","./CollectionEventType.js":"gqQq","./events/EventType.js":"lUmy","./layer/Group.js":"rZ6Q","./MapBrowserEvent.js":"LhPi","./MapBrowserEventHandler.js":"n5H5","./MapBrowserEventType.js":"oGpv","./MapEvent.js":"NwQQ","./MapEventType.js":"SHXd","./MapProperty.js":"HiWl","./ObjectEventType.js":"rU8L","./pointer/EventType.js":"YM5Z","./render/EventType.js":"mlMP","./TileQueue.js":"LiN4","./View.js":"OW7R","./ViewHint.js":"ht2c","./has.js":"ZGSM","./functions.js":"caQH","./transform.js":"ePpI","./asserts.js":"hgi2","./extent.js":"pbFF","./proj.js":"bkYg","./size.js":"XzjU","./events.js":"E9xa","./dom.js":"N5LR"}],"EXc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../Object.js")),t=s(require("../MapEventType.js")),r=require("../functions.js"),n=require("../events.js"),o=require("../dom.js");function s(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(e){function s(t){var r=e.call(this)||this,n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}return i(s,e),s.prototype.disposeInternal=function(){(0,o.removeNode)(this.element),e.prototype.disposeInternal.call(this)},s.prototype.getMap=function(){return this.map_},s.prototype.setMap=function(e){this.map_&&(0,o.removeNode)(this.element);for(var s=0,i=this.listenerKeys.length;s<i;++s)(0,n.unlistenByKey)(this.listenerKeys[s]);(this.listenerKeys.length=0,this.map_=e,this.map_)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.VOID&&this.listenerKeys.push((0,n.listen)(e,t.default.POSTRENDER,this.render,this)),e.render())},s.prototype.render=function(e){},s.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},s}(e.default),u=p;exports.default=u;
},{"../Object.js":"YrNp","../MapEventType.js":"SHXd","../functions.js":"caQH","../events.js":"E9xa","../dom.js":"N5LR"}],"xW3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Control.js")),l=i(require("../events/EventType.js")),t=require("../css.js"),s=require("../array.js"),o=require("../layer/Layer.js"),a=require("../dom.js");function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])})(l,t)};return function(l,t){function s(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),n=function(e){function i(s){var o=this,a=s||{};(o=e.call(this,{element:document.createElement("div"),render:a.render,target:a.target})||this).ulElement_=document.createElement("ul"),o.collapsed_=void 0===a.collapsed||a.collapsed,o.userCollapsed_=o.collapsed_,o.overrideCollapsible_=void 0!==a.collapsible,o.collapsible_=void 0===a.collapsible||a.collapsible,o.collapsible_||(o.collapsed_=!1);var i=void 0!==a.className?a.className:"ol-attribution",r=void 0!==a.tipLabel?a.tipLabel:"Attributions",n=void 0!==a.expandClassName?a.expandClassName:i+"-expand",p=void 0!==a.collapseLabel?a.collapseLabel:"",c=void 0!==a.collapseClassName?a.collapseClassName:i+"-collpase";"string"==typeof p?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=p,o.collapseLabel_.className=c):o.collapseLabel_=p;var d=void 0!==a.label?a.label:"i";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d,o.label_.className=n):o.label_=d;var u=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_,_=document.createElement("button");_.setAttribute("type","button"),_.title=r,_.appendChild(u),_.addEventListener(l.default.CLICK,o.handleClick_.bind(o),!1);var b=i+" "+t.CLASS_UNSELECTABLE+" "+t.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+t.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),h=o.element;return h.className=b,h.appendChild(o.ulElement_),h.appendChild(_),o.renderedAttributions_=[],o.renderedVisible_=!0,o}return r(i,e),i.prototype.collectSourceAttributions_=function(e){for(var l={},t=[],s=!0,a=e.layerStatesArray,i=0,r=a.length;i<r;++i){var n=a[i];if((0,o.inView)(n,e.viewState)){var p=n.layer.getSource();if(p){var c=p.getAttributions();if(c){var d=c(e);if(d)if(s=s&&!1!==p.getAttributionsCollapsible(),Array.isArray(d))for(var u=0,_=d.length;u<_;++u)d[u]in l||(t.push(d[u]),l[d[u]]=!0);else d in l||(t.push(d),l[d]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(s),t},i.prototype.updateElement_=function(e){if(e){var l=this.collectSourceAttributions_(e),t=l.length>0;if(this.renderedVisible_!=t&&(this.element.style.display=t?"":"none",this.renderedVisible_=t),!(0,s.equals)(l,this.renderedAttributions_)){(0,a.removeChildren)(this.ulElement_);for(var o=0,i=l.length;o<i;++o){var r=document.createElement("li");r.innerHTML=l[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=l}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},i.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},i.prototype.handleToggle_=function(){this.element.classList.toggle(t.CLASS_COLLAPSED),this.collapsed_?(0,a.replaceNode)(this.collapseLabel_,this.label_):(0,a.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},i.prototype.getCollapsible=function(){return this.collapsible_},i.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},i.prototype.setCollapsed=function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},i.prototype.getCollapsed=function(){return this.collapsed_},i.prototype.render=function(e){this.updateElement_(e.frameState)},i}(e.default),p=n;exports.default=p;
},{"./Control.js":"EXc7","../events/EventType.js":"lUmy","../css.js":"by11","../array.js":"u3be","../layer/Layer.js":"hYy3","../dom.js":"N5LR"}],"v3F6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Control.js")),e=r(require("../events/EventType.js")),a=require("../css.js"),o=require("../easing.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(e,a)};return function(e,a){function o(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(o.prototype=a.prototype,new o)}}(),n=function(t){function r(o){var r=this,i=o||{};r=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var n=void 0!==i.className?i.className:"ol-rotate",s=void 0!==i.label?i.label:"",l=void 0!==i.compassClassName?i.compassClassName:"ol-compass";r.label_=null,"string"==typeof s?(r.label_=document.createElement("span"),r.label_.className=l,r.label_.textContent=s):(r.label_=s,r.label_.classList.add(l));var d=i.tipLabel?i.tipLabel:"Reset rotation",u=document.createElement("button");u.className=n+"-reset",u.setAttribute("type","button"),u.title=d,u.appendChild(r.label_),u.addEventListener(e.default.CLICK,r.handleClick_.bind(r),!1);var c=n+" "+a.CLASS_UNSELECTABLE+" "+a.CLASS_CONTROL,_=r.element;return _.className=c,_.appendChild(u),r.callResetNorth_=i.resetNorth?i.resetNorth:void 0,r.duration_=void 0!==i.duration?i.duration:250,r.autoHide_=void 0===i.autoHide||i.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(a.CLASS_HIDDEN),r}return i(r,t),r.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},r.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))}},r.prototype.render=function(t){var e=t.frameState;if(e){var o=e.viewState.rotation;if(o!=this.rotation_){var r="rotate("+o+"rad)";if(this.autoHide_){var i=this.element.classList.contains(a.CLASS_HIDDEN);i||0!==o?i&&0!==o&&this.element.classList.remove(a.CLASS_HIDDEN):this.element.classList.add(a.CLASS_HIDDEN)}this.label_.style.transform=r}this.rotation_=o}},r}(t.default),s=n;exports.default=s;
},{"./Control.js":"EXc7","../events/EventType.js":"lUmy","../css.js":"by11","../easing.js":"tqAS"}],"LwaP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Control.js")),e=a(require("../events/EventType.js")),o=require("../css.js"),n=require("../easing.js");function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function a(n){var a=this,i=n||{};a=t.call(this,{element:document.createElement("div"),target:i.target})||this;var r=void 0!==i.className?i.className:"ol-zoom",u=void 0!==i.delta?i.delta:1,l=void 0!==i.zoomInClassName?i.zoomInClassName:r+"-in",s=void 0!==i.zoomOutClassName?i.zoomOutClassName:r+"-out",d=void 0!==i.zoomInLabel?i.zoomInLabel:"+",c=void 0!==i.zoomOutLabel?i.zoomOutLabel:"",m=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",p=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=l,v.setAttribute("type","button"),v.title=m,v.appendChild("string"==typeof d?document.createTextNode(d):d),v.addEventListener(e.default.CLICK,a.handleClick_.bind(a,u),!1);var f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=p,f.appendChild("string"==typeof c?document.createTextNode(c):c),f.addEventListener(e.default.CLICK,a.handleClick_.bind(a,-u),!1);var _=r+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,C=a.element;return C.className=_,C.appendChild(v),C.appendChild(f),a.duration_=void 0!==i.duration?i.duration:250,a}return i(a,t),a.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},a.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var o=e.getZoom();if(void 0!==o){var a=e.getConstrainedZoom(o+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:a,duration:this.duration_,easing:n.easeOut})):e.setZoom(a)}}},a}(t.default),u=r;exports.default=u;
},{"./Control.js":"EXc7","../events/EventType.js":"lUmy","../css.js":"by11","../easing.js":"tqAS"}],"lEoQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),s=require("../css.js"),l=require("../events.js"),n=require("../dom.js");function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(t,s)};return function(t,s){function l(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(l.prototype=s.prototype,new l)}}(),u=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],c={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},i=function(e){function r(l){var n=this,r=l||{};(n=e.call(this,{element:document.createElement("div"),target:r.target})||this).cssClassName_=void 0!==r.className?r.className:"ol-full-screen",n.activeClassName_=void 0!==r.activeClassName?r.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var a=void 0!==r.label?r.label:"";n.labelNode_="string"==typeof a?document.createTextNode(a):a;var u=void 0!==r.labelActive?r.labelActive:"";n.labelActiveNode_="string"==typeof u?document.createTextNode(u):u,n.button_=document.createElement("button");var c=r.tipLabel?r.tipLabel:"Toggle full-screen";n.setClassName_(n.button_,d()),n.button_.setAttribute("type","button"),n.button_.title=c,n.button_.appendChild(n.labelNode_),n.button_.addEventListener(t.default.CLICK,n.handleClick_.bind(n),!1);var i=n.cssClassName_+" "+s.CLASS_UNSELECTABLE+" "+s.CLASS_CONTROL+" "+(o()?"":s.CLASS_UNSUPPORTED),p=n.element;return p.className=i,p.appendChild(n.button_),n.keys_=void 0!==r.keys&&r.keys,n.source_=r.source,n}return a(r,e),r.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},r.prototype.handleFullScreen_=function(){if(o()){var e=this.getMap();if(e)if(d())m();else{var t=void 0;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?_(t):p(t)}}},r.prototype.handleFullScreenChange_=function(){var e=this.getMap();d()?(this.setClassName_(this.button_,!0),(0,n.replaceNode)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(c.ENTERFULLSCREEN)):(this.setClassName_(this.button_,!1),(0,n.replaceNode)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(c.LEAVEFULLSCREEN)),e&&e.updateSize()},r.prototype.setClassName_=function(e,t){var s,l,n,r=this.activeClassName_,a=this.inactiveClassName_,u=t?r:a;(s=e.classList).remove.apply(s,r),(l=e.classList).remove.apply(l,a),(n=e.classList).add.apply(n,u)},r.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t)for(var s=0,n=u.length;s<n;++s)this.listenerKeys.push((0,l.listen)(document,u[s],this.handleFullScreenChange_,this))},r}(e.default);function o(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function d(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function p(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function _(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():p(e)}function m(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var v=i;exports.default=v;
},{"./Control.js":"EXc7","../events/EventType.js":"lUmy","../css.js":"by11","../events.js":"E9xa","../dom.js":"N5LR"}],"JiK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Control.js")),e=i(require("../pointer/EventType.js")),o=require("../Object.js"),r=require("../proj.js"),n=require("../events.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),a="projection",u="coordinateFormat",p=function(t){function i(e){var r=this,n=e||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render,target:n.target})||this).addEventListener((0,o.getChangeEventType)(a),r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection),r.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return s(i,t),i.prototype.handleProjectionChanged_=function(){this.transform_=null},i.prototype.getCoordinateFormat=function(){return this.get(u)},i.prototype.getProjection=function(){return this.get(a)},i.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},i.prototype.handleMouseOut=function(t){this.updateHTML_(null)},i.prototype.setMap=function(o){if(t.prototype.setMap.call(this,o),o){var r=o.getViewport();this.listenerKeys.push((0,n.listen)(r,e.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,n.listen)(r,e.default.POINTEROUT,this.handleMouseOut,this))}},i.prototype.setCoordinateFormat=function(t){this.set(u,t)},i.prototype.setProjection=function(t){this.set(a,(0,r.get)(t))},i.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var o=this.getProjection();this.transform_=o?(0,r.getTransformFromProjections)(this.mapProjection_,o):r.identityTransform}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=(0,r.getUserProjection)();i&&(this.transform_=(0,r.getTransformFromProjections)(this.mapProjection_,i)),this.transform_(n,n);var s=this.getCoordinateFormat();e=s?s(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},i.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},i}(t.default),c=p;exports.default=c;
},{"./Control.js":"EXc7","../pointer/EventType.js":"YM5Z","../Object.js":"YrNp","../proj.js":"bkYg","../events.js":"E9xa"}],"XEOx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"yGCf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Object.js")),t=a(require("./MapEventType.js")),n=a(require("./OverlayPositioning.js")),i=require("./css.js"),o=require("./extent.js"),r=require("./events.js"),s=require("./dom.js");function a(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},f=function(a){function p(t){var o=a.call(this)||this;o.options=t,o.id=t.id,o.insertFirst=void 0===t.insertFirst||t.insertFirst,o.stopEvent=void 0===t.stopEvent||t.stopEvent,o.element=document.createElement("div"),o.element.className=void 0!==t.className?t.className:"ol-overlay-container "+i.CLASS_SELECTABLE,o.element.style.position="absolute",o.element.style.pointerEvents="auto";var r=t.autoPan;return r&&"object"!=typeof r&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),o.autoPan=r||!1,o.rendered={transform_:"",visible:!0},o.mapPostrenderListenerKey=null,o.addEventListener((0,e.getChangeEventType)(l.ELEMENT),o.handleElementChanged),o.addEventListener((0,e.getChangeEventType)(l.MAP),o.handleMapChanged),o.addEventListener((0,e.getChangeEventType)(l.OFFSET),o.handleOffsetChanged),o.addEventListener((0,e.getChangeEventType)(l.POSITION),o.handlePositionChanged),o.addEventListener((0,e.getChangeEventType)(l.POSITIONING),o.handlePositioningChanged),void 0!==t.element&&o.setElement(t.element),o.setOffset(void 0!==t.offset?t.offset:[0,0]),o.setPositioning(void 0!==t.positioning?t.positioning:n.default.TOP_LEFT),void 0!==t.position&&o.setPosition(t.position),o}return d(p,a),p.prototype.getElement=function(){return this.get(l.ELEMENT)},p.prototype.getId=function(){return this.id},p.prototype.getMap=function(){return this.get(l.MAP)},p.prototype.getOffset=function(){return this.get(l.OFFSET)},p.prototype.getPosition=function(){return this.get(l.POSITION)},p.prototype.getPositioning=function(){return this.get(l.POSITIONING)},p.prototype.handleElementChanged=function(){(0,s.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)},p.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,s.removeNode)(this.element),(0,r.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,r.listen)(e,t.default.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},p.prototype.render=function(){this.updatePixelPosition()},p.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},p.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},p.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},p.prototype.setElement=function(e){this.set(l.ELEMENT,e)},p.prototype.setMap=function(e){this.set(l.MAP,e)},p.prototype.setOffset=function(e){this.set(l.OFFSET,e)},p.prototype.setPosition=function(e){this.set(l.POSITION,e)},p.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},p.prototype.panIntoView=function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(l.POSITION)){var n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[(0,s.outerWidth)(i),(0,s.outerHeight)(i)]),a=e||{},p=void 0===a.margin?20:a.margin;if(!(0,o.containsExtent)(n,r)){var u=r[0]-n[0],d=n[2]-r[2],f=r[1]-n[1],h=n[3]-r[3],g=[0,0];if(u<0?g[0]=u-p:d<0&&(g[0]=Math.abs(d)+p),f<0?g[1]=f-p:h<0&&(g[1]=Math.abs(h)+p),0!==g[0]||0!==g[1]){var c=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(c);if(!E)return;var P=[E[0]+g[0],E[1]+g[1]],y=a.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(P),duration:y.duration,easing:y.easing})}}}},p.prototype.getRect=function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]},p.prototype.setPositioning=function(e){this.set(l.POSITIONING,e)},p.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},p.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},p.prototype.updateRenderedPosition=function(e,t){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var s=Math.round(e[0]+o[0])+"px",a=Math.round(e[1]+o[1])+"px",p="0%",u="0%";r==n.default.BOTTOM_RIGHT||r==n.default.CENTER_RIGHT||r==n.default.TOP_RIGHT?p="-100%":r!=n.default.BOTTOM_CENTER&&r!=n.default.CENTER_CENTER&&r!=n.default.TOP_CENTER||(p="-50%"),r==n.default.BOTTOM_LEFT||r==n.default.BOTTOM_CENTER||r==n.default.BOTTOM_RIGHT?u="-100%":r!=n.default.CENTER_LEFT&&r!=n.default.CENTER_CENTER&&r!=n.default.CENTER_RIGHT||(u="-50%");var d="translate("+p+", "+u+") translate("+s+", "+a+")";this.rendered.transform_!=d&&(this.rendered.transform_=d,i.transform=d,i.msTransform=d)},p.prototype.getOptions=function(){return this.options},p}(e.default),h=f;exports.default=h;
},{"./Object.js":"YrNp","./MapEventType.js":"SHXd","./OverlayPositioning.js":"XEOx","./css.js":"by11","./extent.js":"pbFF","./events.js":"E9xa","./dom.js":"N5LR"}],"E4zp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../renderer/Composite.js")),t=f(require("./Control.js")),i=f(require("../events/EventType.js")),o=f(require("../MapEventType.js")),n=f(require("../MapProperty.js")),a=f(require("../ObjectEventType.js")),l=f(require("../Overlay.js")),r=f(require("../OverlayPositioning.js")),s=f(require("../PluggableMap.js")),p=f(require("../View.js")),d=f(require("../ViewProperty.js")),h=require("../css.js"),u=require("../extent.js"),c=require("../Object.js"),v=require("../events.js"),_=require("../geom/Polygon.js"),g=require("../dom.js");function f(e){return e&&e.__esModule?e:{default:e}}var w=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),m=.75,b=.1,y=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.createRenderer=function(){return new e.default(this)},i}(s.default),E=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).boundHandleRotationChanged_=o.handleRotationChanged_.bind(o),o.collapsed_=void 0===n.collapsed||n.collapsed,o.collapsible_=void 0===n.collapsible||n.collapsible,o.collapsible_||(o.collapsed_=!1),o.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,o.viewExtent_=void 0;var a=void 0!==n.className?n.className:"ol-overviewmap",s=void 0!==n.tipLabel?n.tipLabel:"Overview map",p=void 0!==n.collapseLabel?n.collapseLabel:"";"string"==typeof p?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=p):o.collapseLabel_=p;var d=void 0!==n.label?n.label:"";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d):o.label_=d;var u=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=s,c.appendChild(u),c.addEventListener(i.default.CLICK,o.handleClick_.bind(o),!1),o.ovmapDiv_=document.createElement("div"),o.ovmapDiv_.className="ol-overviewmap-map",o.view_=n.view,o.ovmap_=new y({view:n.view});var v=o.ovmap_;n.layers&&n.layers.forEach(function(e){v.addLayer(e)});var _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",o.boxOverlay_=new l.default({position:[0,0],positioning:r.default.CENTER_CENTER,element:_}),o.ovmap_.addOverlay(o.boxOverlay_);var g=a+" "+h.CLASS_UNSELECTABLE+" "+h.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+h.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),f=o.element;f.className=g,f.appendChild(o.ovmapDiv_),f.appendChild(c);var w=o,m=o.boxOverlay_,b=o.boxOverlay_.getElement(),E=function(e){var t,i={clientX:(t=e).clientX,clientY:t.clientY},o=v.getEventCoordinateInternal(i);m.setPosition(o)},C=function(e){var t=v.getEventCoordinateInternal(e);w.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)};return b.addEventListener("mousedown",function(){window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)}),o}return w(t,e),t.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,v.listen)(t,a.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var n=t.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===n.default.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}},t.prototype.bindView_=function(e){if(!this.view_){var t=new p.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addEventListener((0,c.getChangeEventType)(d.default.ROTATION),this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeEventListener((0,c.getChangeEventType)(d.default.ROTATION),this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtentInternal(i);if(!this.viewExtent_||!(0,u.equals)(o,this.viewExtent_)){this.viewExtent_=o;var n=t.getSize(),a=t.getView().calculateExtentInternal(n),l=t.getPixelFromCoordinateInternal((0,u.getTopLeft)(o)),r=t.getPixelFromCoordinateInternal((0,u.getBottomRight)(o)),s=Math.abs(l[0]-r[0]),p=Math.abs(l[1]-r[1]),d=n[0],h=n[1];s<d*b||p<h*b||s>d*m||p>h*m?this.resetExtent_():(0,u.containsExtent)(a,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){if(0!==m&&0!==b){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtentInternal(i),n=t.getView(),a=Math.log(m/b)/Math.LN2,l=1/(Math.pow(2,a/2)*b);(0,u.scaleFromCenter)(o,l),n.fitInternal((0,_.fromExtent)(o))}},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-o.getRotation(),l=this.boxOverlay_,r=this.boxOverlay_.getElement(),s=o.getCenterInternal(),p=o.getResolution(),d=n.getResolution(),h=i[0]*p/d,u=i[1]*p/d;if(l.setPosition(s),r){r.style.width=h+"px",r.style.height=u+"px";var c="rotate("+a+"rad)";r.style.transform=c}}},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(h.CLASS_COLLAPSED),this.collapsed_?(0,g.replaceNode)(this.collapseLabel_,this.label_):(0,g.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),(0,v.listenOnce)(e,o.default.POSTRENDER,function(e){this.updateBox_()},this)}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t.prototype.render=function(e){this.validateExtent_(),this.updateBox_()},t}(t.default),C=E;exports.default=C;
},{"../renderer/Composite.js":"BPpB","./Control.js":"EXc7","../events/EventType.js":"lUmy","../MapEventType.js":"SHXd","../MapProperty.js":"HiWl","../ObjectEventType.js":"rU8L","../Overlay.js":"yGCf","../OverlayPositioning.js":"XEOx","../PluggableMap.js":"xloC","../View.js":"OW7R","../ViewProperty.js":"vDt9","../css.js":"by11","../extent.js":"pbFF","../Object.js":"YrNp","../events.js":"E9xa","../geom/Polygon.js":"kEvS","../dom.js":"N5LR"}],"OVap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Units=void 0;var e=a(require("./Control.js")),t=a(require("../proj/Units.js")),i=require("../css.js"),r=require("../proj.js"),s=require("../asserts.js"),n=require("../Object.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l="units",d={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};exports.Units=d;var p=[1,2,5],c=25.4/.28,h=function(e){function a(t){var r=this,s=t||{},a=void 0!==s.className?s.className:s.bar?"ol-scale-bar":"ol-scale-line";return(r=e.call(this,{element:document.createElement("div"),render:s.render,target:s.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=a+"-inner",r.element.className=a+" "+i.CLASS_UNSELECTABLE,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==s.minWidth?s.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener((0,n.getChangeEventType)(l),r.handleUnitsChanged_),r.setUnits(s.units||d.METRIC),r.scaleBar_=s.bar||!1,r.scaleBarSteps_=s.steps||4,r.scaleBarText_=s.text||!1,r.dpi_=s.dpi||void 0,r}return o(a,e),a.prototype.getUnits=function(){return this.get(l)},a.prototype.handleUnitsChanged_=function(){this.updateElement_()},a.prototype.setUnits=function(e){this.set(l,e)},a.prototype.setDpi=function(e){this.dpi_=e},a.prototype.updateElement_=function(){var e=this.viewState_;if(e){var i=e.center,n=e.projection,a=this.getUnits(),o=a==d.DEGREES?t.default.DEGREES:t.default.METERS,l=(0,r.getPointResolution)(n,e.resolution,i,o),h=this.minWidth_*(this.dpi_||c)/c,u=h*l,f="";if(a==d.DEGREES){var _=r.METERS_PER_UNIT[t.default.DEGREES];(u*=_)<_/60?(f="",l*=3600):u<_?(f="",l*=60):f=""}else a==d.IMPERIAL?u<.9144?(f="in",l/=.0254):u<1609.344?(f="ft",l/=.3048):(f="mi",l/=1609.344):a==d.NAUTICAL?(l/=1852,f="nm"):a==d.METRIC?u<.001?(f="m",l*=1e6):u<1?(f="mm",l*=1e3):u<1e3?f="m":(f="km",l/=1e3):a==d.US?u<.9144?(f="in",l*=39.37):u<1609.344?(f="ft",l/=.30480061):(f="mi",l/=1609.3472):(0,s.assert)(!1,33);for(var v,m,E,S,y=3*Math.floor(Math.log(h*l)/Math.log(10));;){E=Math.floor(y/3);var M=Math.pow(10,E);if(v=p[(y%3+3)%3]*M,m=Math.round(v/l),isNaN(m))return this.element.style.display="none",void(this.renderedVisible_=!1);if(m>=h)break;++y}S=this.scaleBar_?this.createScaleBar(m,v,f):v.toFixed(E<0?-E:0)+" "+f,this.renderedHTML_!=S&&(this.innerElement_.innerHTML=S,this.renderedHTML_=S),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},a.prototype.createScaleBar=function(e,t,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],n=e/this.scaleBarSteps_,a="#ffffff",o=0;o<this.scaleBarSteps_;o++)0===o&&s.push(this.createMarker("absolute",o)),s.push('<div><div class="ol-scale-singlebar" style="width: '+n+"px;background-color: "+a+';"></div>'+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,i):"")+"</div>"),o===this.scaleBarSteps_-1&&s.push(this.createStepText(o+1,e,!0,t,i)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+r+"</div>":"")+s.join("")+"</div>"},a.prototype.createMarker=function(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'},a.prototype.createStepText=function(e,t,i,r,s){var n=(0===e?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+s);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(i?t+"px":"unset")+';">'+n+"</div>"},a.prototype.getScaleForResolution=function(){var e=(0,r.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),t=this.dpi_||c,i=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*i*(1e3/25.4)*t},a.prototype.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},a}(e.default),u=h;exports.default=u;
},{"./Control.js":"EXc7","../proj/Units.js":"IrdK","../css.js":"by11","../proj.js":"bkYg","../asserts.js":"hgi2","../Object.js":"YrNp"}],"ZYrH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./Control.js")),e=l(require("../events/EventType.js")),i=l(require("../pointer/EventType.js")),r=require("../css.js"),n=require("../math.js"),o=require("../easing.js"),s=require("../events.js"),a=require("../events/Event.js");function l(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d={VERTICAL:0,HORIZONTAL:1},u=function(t){function l(n){var o=this,s=n||{};(o=t.call(this,{element:document.createElement("div"),render:s.render})||this).dragListenerKeys_=[],o.currentResolution_=void 0,o.direction_=d.VERTICAL,o.dragging_,o.heightLimit_=0,o.widthLimit_=0,o.startX_,o.startY_,o.thumbSize_=null,o.sliderInitialized_=!1,o.duration_=void 0!==s.duration?s.duration:200;var l=void 0!==s.className?s.className:"ol-zoomslider",h=document.createElement("button");h.setAttribute("type","button"),h.className=l+"-thumb "+r.CLASS_UNSELECTABLE;var u=o.element;return u.className=l+" "+r.CLASS_UNSELECTABLE+" "+r.CLASS_CONTROL,u.appendChild(h),u.addEventListener(i.default.POINTERDOWN,o.handleDraggerStart_.bind(o),!1),u.addEventListener(i.default.POINTERMOVE,o.handleDraggerDrag_.bind(o),!1),u.addEventListener(i.default.POINTERUP,o.handleDraggerEnd_.bind(o),!1),u.addEventListener(e.default.CLICK,o.handleContainerClick_.bind(o),!1),h.addEventListener(e.default.CLICK,a.stopPropagation,!1),o}return h(l,t),l.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},l.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;var r=t.firstElementChild,n=getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),s=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);return this.thumbSize_=[o,s],e>i?(this.direction_=d.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=d.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0},l.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),n=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:n,duration:this.duration_,easing:o.easeOut})},l.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_,o=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,s.listen)(o,i.default.POINTERMOVE,r,this),(0,s.listen)(o,i.default.POINTERUP,n,this))}}},l.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,r=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}},l.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0)},l.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==d.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},l.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===d.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,n.clamp)(i,0,1)},l.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},l.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return(0,n.clamp)(1-e(t),0,1)},l.prototype.render=function(t){if(t.frameState&&(this.sliderInitialized_||this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},l}(t.default),g=u;exports.default=g;
},{"./Control.js":"EXc7","../events/EventType.js":"lUmy","../pointer/EventType.js":"YM5Z","../css.js":"by11","../math.js":"cgU2","../easing.js":"tqAS","../events.js":"E9xa","../events/Event.js":"aj10"}],"JRkg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Control.js")),e=r(require("../events/EventType.js")),n=require("../css.js"),o=require("../geom/Polygon.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function r(o){var r=this,i=o||{};(r=t.call(this,{element:document.createElement("div"),target:i.target})||this).extent=i.extent?i.extent:null;var a=void 0!==i.className?i.className:"ol-zoom-extent",l=void 0!==i.label?i.label:"E",u=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",c=document.createElement("button");c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof l?document.createTextNode(l):l),c.addEventListener(e.default.CLICK,r.handleClick_.bind(r),!1);var s=a+" "+n.CLASS_UNSELECTABLE+" "+n.CLASS_CONTROL,p=r.element;return p.className=s,p.appendChild(c),r}return i(r,t),r.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},r.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal((0,o.fromExtent)(e))},r}(t.default),l=a;exports.default=l;
},{"./Control.js":"EXc7","../events/EventType.js":"lUmy","../css.js":"by11","../geom/Polygon.js":"kEvS"}],"L9cz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=d,Object.defineProperty(exports,"Attribution",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Rotate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"FullScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MousePosition",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"OverviewMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ScaleLine",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ZoomSlider",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ZoomToExtent",{enumerable:!0,get:function(){return f.default}});var e=s(require("./control/Attribution.js")),t=s(require("./Collection.js")),r=s(require("./control/Rotate.js")),o=s(require("./control/Zoom.js")),n=s(require("./control/Control.js")),u=s(require("./control/FullScreen.js")),i=s(require("./control/MousePosition.js")),l=s(require("./control/OverviewMap.js")),a=s(require("./control/ScaleLine.js")),c=s(require("./control/ZoomSlider.js")),f=s(require("./control/ZoomToExtent.js"));function s(e){return e&&e.__esModule?e:{default:e}}function d(n){var u=n||{},i=new t.default;return(void 0===u.zoom||u.zoom)&&i.push(new o.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new r.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new e.default(u.attributionOptions)),i}
},{"./control/Attribution.js":"xW3p","./Collection.js":"UC92","./control/Rotate.js":"v3F6","./control/Zoom.js":"LwaP","./control/Control.js":"EXc7","./control/FullScreen.js":"lEoQ","./control/MousePosition.js":"JiK6","./control/OverviewMap.js":"E4zp","./control/ScaleLine.js":"OVap","./control/ZoomSlider.js":"ZYrH","./control/ZoomToExtent.js":"JRkg"}],"HUCB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"nZtJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=a,exports.zoomByDelta=u,exports.default=void 0;var t=o(require("../Object.js")),e=o(require("./Property.js")),n=require("../easing.js");function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(t){function n(e){var n=t.call(this)||this;return e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return r(n,t),n.prototype.getActive=function(){return this.get(e.default.ACTIVE)},n.prototype.getMap=function(){return this.map_},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(e.default.ACTIVE,t)},n.prototype.setMap=function(t){this.map_=t},n}(t.default);function a(t,e,o){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==o?o:250,easing:n.linear,center:t.getConstrainedCenter(i)})}}function u(t,e,o,r){var i=t.getZoom();if(void 0!==i){var a=t.getConstrainedZoom(i+e),u=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:o,duration:void 0!==r?r:250,easing:n.easeOut})}}var s=i;exports.default=s;
},{"../Object.js":"YrNp","./Property.js":"HUCB","../easing.js":"tqAS"}],"xizh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var a=o?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(r,u,a):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(r){function n(t){var e=r.call(this)||this,n=t||{};return e.delta_=n.delta?n.delta:1,e.duration_=void 0!==n.duration?n.duration:250,e}return u(n,r),n.prototype.handleEvent=function(r){var n=!1;if(r.type==e.default.DBLCLICK){var o=r.originalEvent,u=r.map,a=r.coordinate,i=o.shiftKey?-this.delta_:this.delta_,f=u.getView();(0,t.zoomByDelta)(f,i,a,this.duration_),o.preventDefault(),n=!0}return!n},n}(t.default),i=a;exports.default=i;
},{"./Interaction.js":"nZtJ","../MapBrowserEventType.js":"oGpv"}],"tjXK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=a,exports.default=void 0;var t=r(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js")),n=require("../obj.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(t){function r(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return o(r,t),r.prototype.getPointerCount=function(){return this.targetPointers.length},r.prototype.handleDownEvent=function(t){return!1},r.prototype.handleDragEvent=function(t){},r.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==e.default.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==e.default.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==e.default.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==e.default.POINTERMOVE&&this.handleMoveEvent(t);return!n},r.prototype.handleMoveEvent=function(t){},r.prototype.handleUpEvent=function(t){return!1},r.prototype.stopDown=function(t){return t},r.prototype.updateTrackedPointers_=function(t){if(u(t)){var r=t.originalEvent,o=r.pointerId.toString();t.type==e.default.POINTERUP?delete this.trackedPointers_[o]:t.type==e.default.POINTERDOWN?this.trackedPointers_[o]=r:o in this.trackedPointers_&&(this.trackedPointers_[o]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}},r}(t.default);function a(t){for(var e=t.length,n=0,r=0,o=0;o<e;o++)n+=t[o].clientX,r+=t[o].clientY;return[n/e,r/e]}function u(t){var n=t.type;return n===e.default.POINTERDOWN||n===e.default.POINTERDRAG||n===e.default.POINTERUP}var l=i;exports.default=l;
},{"./Interaction.js":"nZtJ","../MapBrowserEventType.js":"oGpv","../obj.js":"lPyT"}],"geXY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=i,exports.primaryAction=exports.penOnly=exports.touchOnly=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focusWithTabindex=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../functions.js"),r=require("../has.js"),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments;return function(e){for(var r=!0,n=0,o=t.length;n<o&&(r=r&&t[n](e));++n);return r}}var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=a;var s=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=s;var u=function(e){return e.target.getTargetElement().contains(document.activeElement)};exports.focus=u;var l=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||u(e)};exports.focusWithTabindex=l;var p=t.TRUE;exports.always=p;var y=function(t){return t.type==e.default.CLICK};exports.click=y;var v=function(e){var t=e.originalEvent;return 0==t.button&&!(r.WEBKIT&&r.MAC&&t.ctrlKey)};exports.mouseActionButton=v;var c=t.FALSE;exports.never=c;var f=function(e){return"pointermove"==e.type};exports.pointerMove=f;var x=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=x;var K=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=K;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=E;var d=function(e){var t=e.originalEvent;return!t.altKey&&(r.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=d;var g=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=g;var m=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};exports.targetNotEditable=m;var h=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"mouse"==t.pointerType};exports.mouseOnly=h;var O=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"touch"===t.pointerType};exports.touchOnly=O;var T=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"pen"===t.pointerType};exports.penOnly=T;var C=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),t.isPrimary&&0===t.button};exports.primaryAction=C;
},{"../MapBrowserEventType.js":"oGpv","../functions.js":"caQH","../has.js":"ZGSM","../asserts.js":"hgi2"}],"V6e2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),i=require("../easing.js"),r=require("../coordinate.js");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}var s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(o){function a(t){var i=o.call(this,{stopDown:e.FALSE})||this,r=t||{};i.kinetic_=r.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=r.condition?r.condition:(0,n.all)(n.noModifierKeys,n.primaryAction);return i.condition_=r.onFocusOnly?(0,n.all)(n.focusWithTabindex,a):a,i.noKinetic_=!1,i}return s(a,o),a.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=(0,t.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();(0,r.scale)(o,a.getResolution()),(0,r.rotate)(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()},a.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(a),c=e.getCoordinateFromPixelInternal([s[0]-r*Math.cos(o),s[1]-r*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:i.easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},a.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},a}(t.default),l=c;exports.default=l;
},{"./Pointer.js":"tjXK","../functions.js":"caQH","../events/condition.js":"geXY","../easing.js":"tqAS","../coordinate.js":"uZ8Y"}],"obBp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Pointer.js")),n=require("../functions.js"),e=require("../events/condition.js"),o=require("../rotationconstraint.js");function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),a=function(t){function i(o){var i=this,r=o||{};return(i=t.call(this,{stopDown:n.FALSE})||this).condition_=r.condition?r.condition:e.altShiftKeysOnly,i.lastAngle_=void 0,i.duration_=void 0!==r.duration?r.duration:250,i}return r(i,t),i.prototype.handleDragEvent=function(t){if((0,e.mouseOnly)(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==o.disable){var r=n.getSize(),a=t.pixel,u=Math.atan2(r[1]/2-a[1],a[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=u-this.lastAngle_;i.adjustRotationInternal(-s)}this.lastAngle_=u}}},i.prototype.handleUpEvent=function(t){return!(0,e.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)},i.prototype.handleDownEvent=function(t){return!!(0,e.mouseOnly)(t)&&(!(!(0,e.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},i}(t.default),u=a;exports.default=u;
},{"./Pointer.js":"tjXK","../functions.js":"caQH","../events/condition.js":"geXY","../rotationconstraint.js":"qBux"}],"i3iV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../Disposable.js")),e=i(require("../geom/Polygon.js"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function i(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return n(i,t),i.prototype.disposeInternal=function(){this.setMap(null)},i.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},i.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},i.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},i.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,n=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new e.default([n])},i.prototype.getGeometry=function(){return this.geometry_},i}(t.default),o=r;exports.default=o;
},{"../Disposable.js":"nie2","../geom/Polygon.js":"kEvS"}],"EzQG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DragBoxEvent=void 0;var t=i(require("../events/Event.js")),n=i(require("./Pointer.js")),o=i(require("../render/Box.js")),e=require("../events/condition.js");function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),s={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},a=function(t){function n(n,o,e){var i=t.call(this,n)||this;return i.coordinate=o,i.mapBrowserEvent=e,i}return r(n,t),n}(t.default);exports.DragBoxEvent=a;var u=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.box_=new o.default(r.className||"ol-dragbox"),i.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.startPixel_=null,i.condition_=r.condition?r.condition:e.mouseActionButton,i.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return r(n,t),n.prototype.defaultBoxEndCondition=function(t,n,o){var e=o[0]-n[0],i=o[1]-n[1];return e*e+i*i>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new a(s.BOXDRAG,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.box_.setMap(null);var n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new a(n?s.BOXEND:s.BOXCANCEL,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new a(s.BOXSTART,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(n.default),d=u;exports.default=d;
},{"../events/Event.js":"aj10","./Pointer.js":"tjXK","../render/Box.js":"i3iV","../events/condition.js":"geXY"}],"DwY2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./DragBox.js")),e=require("../extent.js"),o=require("../easing.js"),n=require("../events/condition.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=function(t){function r(e){var o=this,r=e||{},i=r.condition?r.condition:n.shiftKeyOnly;return(o=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,o.out_=void 0!==r.out&&r.out,o}return i(r,t),r.prototype.onBoxEnd=function(t){var n=this.getMap(),r=n.getView(),i=n.getSize(),a=this.getGeometry().getExtent();if(this.out_){var u=r.calculateExtentInternal(i),s=(0,e.createOrUpdateFromCoordinates)([n.getPixelFromCoordinateInternal((0,e.getBottomLeft)(a)),n.getPixelFromCoordinateInternal((0,e.getTopRight)(a))]),c=r.getResolutionForExtentInternal(s,i);(0,e.scaleFromCenter)(u,1/c),a=u}var l=r.getConstrainedResolution(r.getResolutionForExtentInternal(a,i)),d=r.getConstrainedCenter((0,e.getCenter)(a),l);r.animateInternal({resolution:l,center:d,duration:this.duration_,easing:o.easeOut})},r}(t.default),u=a;exports.default=u;
},{"./DragBox.js":"EzQG","../extent.js":"pbFF","../easing.js":"tqAS","../events/condition.js":"geXY"}],"W5Qt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"FSZj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../events/EventType.js")),e=u(require("./Interaction.js")),r=a(require("../events/KeyCode.js")),n=require("../events/condition.js"),o=require("../coordinate.js");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=n?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function a(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(i){function u(t){var e=i.call(this)||this,r=t||{};return e.defaultCondition_=function(t){return(0,n.noModifierKeys)(t)&&(0,n.targetNotEditable)(t)},e.condition_=void 0!==r.condition?r.condition:e.defaultCondition_,e.duration_=void 0!==r.duration?r.duration:100,e.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,e}return f(u,i),u.prototype.handleEvent=function(n){var i=!1;if(n.type==t.default.KEYDOWN){var u=n.originalEvent,a=u.keyCode;if(this.condition_(n)&&(a==r.default.DOWN||a==r.default.LEFT||a==r.default.RIGHT||a==r.default.UP)){var f=n.map.getView(),l=f.getResolution()*this.pixelDelta_,c=0,d=0;a==r.default.DOWN?d=-l:a==r.default.LEFT?c=-l:a==r.default.RIGHT?c=l:d=l;var p=[c,d];(0,o.rotate)(p,f.getRotation()),(0,e.pan)(f,p,this.duration_),u.preventDefault(),i=!0}}return!i},u}(e.default),c=l;exports.default=c;
},{"../events/EventType.js":"lUmy","./Interaction.js":"nZtJ","../events/KeyCode.js":"W5Qt","../events/condition.js":"geXY","../coordinate.js":"uZ8Y"}],"AcPt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=o(require("./Interaction.js")),r=require("../events/condition.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(n){function o(t){var e=n.call(this)||this,o=t||{};return e.condition_=o.condition?o.condition:r.targetNotEditable,e.delta_=o.delta?o.delta:1,e.duration_=void 0!==o.duration?o.duration:100,e}return a(o,n),o.prototype.handleEvent=function(r){var n=!1;if(r.type==t.default.KEYDOWN||r.type==t.default.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var a=r.map,u=i=="+".charCodeAt(0)?this.delta_:-this.delta_,c=a.getView();(0,e.zoomByDelta)(c,u,void 0,this.duration_),o.preventDefault(),n=!0}}return!n},o}(e.default),c=u;exports.default=c;
},{"../events/EventType.js":"lUmy","./Interaction.js":"nZtJ","../events/condition.js":"geXY"}],"z1mr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),i=t;exports.default=i;
},{}],"pPS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Mode=void 0;var t=s(require("../events/EventType.js")),e=a(require("./Interaction.js")),o=require("../has.js"),i=require("../events/condition.js"),n=require("../math.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=t[n]}return o.default=t,e&&e.set(t,o),o}function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),l={TRACKPAD:"trackpad",WHEEL:"wheel"};exports.Mode=l;var c=function(r){function a(t){var e=this,o=t||{};(e=r.call(this,o)||this).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,e.duration_=void 0!==o.duration?o.duration:250,e.timeout_=void 0!==o.timeout?o.timeout:80,e.useAnchor_=void 0===o.useAnchor||o.useAnchor,e.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var n=o.condition?o.condition:i.always;return e.condition_=o.onFocusOnly?(0,i.all)(i.focusWithTabindex,n):n,e.lastAnchor_=null,e.startTime_=void 0,e.timeoutId_,e.mode_=void 0,e.trackpadEventGap_=400,e.trackpadTimeoutId_,e.deltaPerZoom_=300,e}return u(a,r),a.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},a.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;if(e.type!==t.default.WHEEL)return!0;var i,n=e.map,r=e.originalEvent;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==t.default.WHEEL&&(i=r.deltaY,o.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=o.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?l.TRACKPAD:l.WHEEL);var s=n.getView();if(this.mode_===l.TRACKPAD&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=i;var u=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),u),!1},a.prototype.handleWheelZoom_=function(t){var o=t.getView();o.getAnimating()&&o.cancelAnimations();var i=-(0,n.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),(0,e.zoomByDelta)(o,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},a.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},a}(e.default),_=c;exports.default=_;
},{"../events/EventType.js":"lUmy","./Interaction.js":"nZtJ","../has.js":"ZGSM","../events/condition.js":"geXY","../math.js":"cgU2"}],"YK7p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),n=require("../rotationconstraint.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(r){function o(t){var n=this,o=t||{},i=o;return i.stopDown||(i.stopDown=e.FALSE),(n=r.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return i(o,r),o.prototype.handleDragEvent=function(e){var r=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=s}this.lastAngle_=a;var l=e.map,u=l.getView();if(u.getConstraints().rotation!==n.disable){var c=l.getViewport().getBoundingClientRect(),h=(0,t.centroid)(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(h),this.rotating_&&(l.render(),u.adjustRotationInternal(r,this.anchor_))}},o.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},o.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},o}(t.default),s=a;exports.default=s;
},{"./Pointer.js":"tjXK","../functions.js":"caQH","../rotationconstraint.js":"qBux"}],"G1vw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Pointer.js")),e=require("../functions.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(n){function r(t){var r=this,o=t||{},i=o;return i.stopDown||(i.stopDown=e.FALSE),(r=n.call(this,i)||this).anchor_=null,r.duration_=void 0!==o.duration?o.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return o(r,n),r.prototype.handleDragEvent=function(e){var n=1,r=this.targetPointers[0],o=this.targetPointers[1],i=r.clientX-o.clientX,a=r.clientY-o.clientY,s=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/s),this.lastDistance_=s;var c=e.map,l=c.getView();1!=n&&(this.lastScaleDelta_=n);var u=c.getViewport().getBoundingClientRect(),p=(0,t.centroid)(this.targetPointers);p[0]-=u.left,p[1]-=u.top,this.anchor_=c.getCoordinateFromPixelInternal(p),c.render(),l.adjustResolutionInternal(n,this.anchor_)},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},r}(t.default),a=i;exports.default=a;
},{"./Pointer.js":"tjXK","../functions.js":"caQH"}],"xICm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"dWrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DragAndDropEvent=void 0;var t=a(require("../events/Event.js")),e=a(require("../events/EventType.js")),r=a(require("../format/FormatType.js")),s=a(require("./Interaction.js")),n=require("../functions.js"),o=require("../proj.js"),i=require("../events.js");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),p={ADD_FEATURES:"addfeatures"},f=function(t){function e(e,r,s,n){var o=t.call(this,e)||this;return o.features=s,o.file=r,o.projection=n,o}return u(e,t),e}(t.default);exports.DragAndDropEvent=f;var l=function(t){function s(e){var s=this,i=e||{};(s=t.call(this,{handleEvent:n.TRUE})||this).readAsBuffer_=!1,s.formats_=[];for(var a=i.formatConstructors?i.formatConstructors:[],u=0,p=a.length;u<p;++u){var f=a[u];"function"==typeof f&&(f=new f),s.formats_.push(f),s.readAsBuffer_=s.readAsBuffer_||f.getType()===r.default.ARRAY_BUFFER}return s.projection_=i.projection?(0,o.get)(i.projection):null,s.dropListenKeys_=null,s.source_=i.source||null,s.target=i.target?i.target:null,s}return u(s,t),s.prototype.handleResult_=function(t,e){var s,n=e.target.result,o=this.getMap(),i=this.projection_;i||(i=o.getView().getProjection());for(var a=this.formats_,u=0,l=a.length;u<l;++u){var c=a[u],h=n;this.readAsBuffer_&&c.getType()!==r.default.ARRAY_BUFFER&&(void 0===s&&(s=(new TextDecoder).decode(n)),h=s);var d=this.tryReadFeatures_(c,h,{featureProjection:i});if(d&&d.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(d)),this.dispatchEvent(new f(p.ADD_FEATURES,t,d,i));break}}},s.prototype.registerListeners_=function(){var t=this.getMap();if(t){var r=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,i.listen)(r,e.default.DROP,this.handleDrop,this),(0,i.listen)(r,e.default.DRAGENTER,this.handleStop,this),(0,i.listen)(r,e.default.DRAGOVER,this.handleStop,this),(0,i.listen)(r,e.default.DROP,this.handleStop,this)]}},s.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},s.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},s.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(s){return null}},s.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(i.unlistenByKey),this.dropListenKeys_=null)},s.prototype.handleDrop=function(t){for(var r=t.dataTransfer.files,s=0,n=r.length;s<n;++s){var o=r.item(s),i=new FileReader;i.addEventListener(e.default.LOAD,this.handleResult_.bind(this,o)),this.readAsBuffer_?i.readAsArrayBuffer(o):i.readAsText(o)}},s.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},s}(s.default),c=l;exports.default=c;
},{"../events/Event.js":"aj10","../events/EventType.js":"lUmy","../format/FormatType.js":"xICm","./Interaction.js":"nZtJ","../functions.js":"caQH","../proj.js":"bkYg","../events.js":"E9xa"}],"AWYO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Pointer.js")),e=require("../events/condition.js");function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(t){function n(n){var i=this,o=n||{};return(i=t.call(this,o)||this).condition_=o.condition?o.condition:e.shiftKeyOnly,i.lastAngle_=void 0,i.lastMagnitude_=void 0,i.lastScaleDelta_=0,i.duration_=void 0!==o.duration?o.duration:400,i}return i(n,t),n.prototype.handleDragEvent=function(t){if((0,e.mouseOnly)(t)){var n=t.map,i=n.getSize(),o=t.pixel,a=o[0]-i[0]/2,r=i[1]/2-o[1],s=Math.atan2(r,a),l=Math.sqrt(a*a+r*r),u=n.getView();if(void 0!==this.lastAngle_){var d=this.lastAngle_-s;u.adjustRotationInternal(d)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}},n.prototype.handleUpEvent=function(t){if(!(0,e.mouseOnly)(t))return!0;var n=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1},n.prototype.handleDownEvent=function(t){return!!(0,e.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},n}(t.default),a=o;exports.default=a;
},{"./Pointer.js":"tjXK","../events/condition.js":"geXY"}],"HPlQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./GeometryType.js")),e=s(require("./SimpleGeometry.js")),r=require("../extent.js"),o=require("./flat/deflate.js"),i=require("./flat/transform.js");function s(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function s(t,r,o){var i=e.call(this)||this;if(void 0!==o&&void 0===r)i.setFlatCoordinates(o,t);else{var s=r||0;i.setCenterAndRadius(t,s,o)}return i}return n(s,e),s.prototype.clone=function(){var t=new s(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},s.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var d=this.getRadius()/Math.sqrt(a);r[0]=i[0]+d*s,r[1]=i[1]+d*n;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,a}return o},s.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},s.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},s.prototype.computeExtent=function(t){var e=this.flatCoordinates,o=e[this.stride]-e[0];return(0,r.createOrUpdate)(e[0]-o,e[1]-o,e[0]+o,e[1]+o,t)},s.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},s.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},s.prototype.getType=function(){return t.default.CIRCLE},s.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,r.intersects)(t,e)){var o=this.getCenter();return t[0]<=o[0]&&t[2]>=o[0]||(t[1]<=o[1]&&t[3]>=o[1]||(0,r.forEachCorner)(t,this.intersectsCoordinate.bind(this)))}return!1},s.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},s.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,s=(0,o.deflateCoordinate)(i,0,t,this.stride);i[s++]=i[0]+e;for(var n=1,a=this.stride;n<a;++n)i[s++]=i[n];i.length=s,this.changed()},s.prototype.getCoordinates=function(){return null},s.prototype.setCoordinates=function(t,e){},s.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},s.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,i.rotate)(r,0,r.length,o,t,e,r)),this.changed()},s.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,i.translate)(r,0,r.length,o,t,e,r)),this.changed()},s}(e.default);a.prototype.transform;var u=a;exports.default=u;
},{"./GeometryType.js":"qBtD","./SimpleGeometry.js":"Ya1f","../extent.js":"pbFF","./flat/deflate.js":"km8t","./flat/transform.js":"FOrd"}],"cEtg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=u,exports.default=void 0;var e=s(require("./Object.js")),t=o(require("./events/EventType.js")),r=require("./asserts.js"),n=require("./events.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var y=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(r){function o(t){var n=r.call(this)||this;if(n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addEventListener((0,e.getChangeEventType)(n.geometryName_),n.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var o=t;n.setGeometry(o)}else{var i=t;n.setProperties(i)}return n}return y(o,r),o.prototype.clone=function(){var e=new o(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e},o.prototype.getGeometry=function(){return this.get(this.geometryName_)},o.prototype.getId=function(){return this.id_},o.prototype.getGeometryName=function(){return this.geometryName_},o.prototype.getStyle=function(){return this.style_},o.prototype.getStyleFunction=function(){return this.styleFunction_},o.prototype.handleGeometryChange_=function(){this.changed()},o.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,n.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,n.listen)(e,t.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},o.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},o.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?u(e):void 0,this.changed()},o.prototype.setId=function(e){this.id_=e,this.changed()},o.prototype.setGeometryName=function(t){this.removeEventListener((0,e.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener((0,e.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},o}(e.default);function u(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:((0,r.assert)("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}var h=a;exports.default=h;
},{"./Object.js":"YrNp","./events/EventType.js":"lUmy","./asserts.js":"hgi2","./events.js":"E9xa"}],"uaOF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a,f){var o,s,v=(i-t)/l;if(1===v)o=t;else if(2===v)o=t,s=u;else if(0!==v){for(var c=n[t],p=n[t+1],h=0,d=[0],g=t+l;g<i;g+=l){var x=n[g],y=n[g+1];h+=Math.sqrt((x-c)*(x-c)+(y-p)*(y-p)),d.push(h),c=x,p=y}var M=u*h,j=(0,r.binarySearch)(d,M);j<0?(s=(M-d[-j-2])/(d[-j-1]-d[-j-2]),o=t+(-j-2)*l):o=t+j*l}var q=f>1?f:2,A=a||new Array(q);for(g=0;g<q;++g)A[g]=void 0===o?NaN:void 0===s?n[o+g]:(0,e.lerp)(n[o+g],n[o+l+g],s);return A}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,o=t/i;f<o;){var s=f+o>>1;l<r[(s+1)*i-1]?o=s:f=s+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var o=0,s=n.length;o<s;++o){var v=n[o];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"u3be","../../math.js":"cgU2"}],"bsYm":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"ArTU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("./GeometryLayout.js")),e=p(require("./GeometryType.js")),i=p(require("./SimpleGeometry.js")),o=require("./flat/closest.js"),r=require("../extent.js"),n=require("./flat/deflate.js"),s=require("./flat/simplify.js"),a=require("../array.js"),l=require("./flat/segments.js"),f=require("./flat/inflate.js"),h=require("./flat/interpolate.js"),d=require("./flat/intersectsextent.js"),u=require("./flat/length.js");function p(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),C=function(i){function p(t,e){var o=i.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?o.setCoordinates(t,e):o.setFlatCoordinates(e,t),o}return c(p,i),p.prototype.appendCoordinate=function(t){this.flatCoordinates?(0,a.extend)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},p.prototype.clone=function(){var t=new p(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},p.prototype.closestPointXY=function(t,e,i,n){return n<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},p.prototype.forEachSegment=function(t){return(0,l.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.getCoordinateAtM=function(e,i){if(this.layout!=t.default.XYM&&this.layout!=t.default.XYZM)return null;var o=void 0!==i&&i;return(0,h.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)},p.prototype.getCoordinates=function(){return(0,f.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getCoordinateAt=function(t,e){return(0,h.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},p.prototype.getLength=function(){return(0,u.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},p.prototype.getSimplifiedGeometryInternal=function(e){var i=[];return i.length=(0,s.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new p(i,t.default.XY)},p.prototype.getType=function(){return e.default.LINE_STRING},p.prototype.intersectsExtent=function(t){return(0,d.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},p}(i.default),y=C;exports.default=y;
},{"./GeometryLayout.js":"fUWX","./GeometryType.js":"qBtD","./SimpleGeometry.js":"Ya1f","./flat/closest.js":"jEO8","../extent.js":"pbFF","./flat/deflate.js":"km8t","./flat/simplify.js":"EHBi","../array.js":"u3be","./flat/segments.js":"UyND","./flat/inflate.js":"ZGP2","./flat/interpolate.js":"uaOF","./flat/intersectsextent.js":"sHvJ","./flat/length.js":"bsYm"}],"YkYz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("./GeometryLayout.js")),e=f(require("./GeometryType.js")),i=f(require("./LineString.js")),r=f(require("./SimpleGeometry.js")),s=require("./flat/closest.js"),n=require("../extent.js"),o=require("./flat/deflate.js"),a=require("./flat/simplify.js"),l=require("../array.js"),d=require("./flat/inflate.js"),u=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js");function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(r){function f(t,e,i){var s=r.call(this)||this;if(s.ends_=[],s.maxDelta_=-1,s.maxDeltaRevision_=-1,Array.isArray(t[0]))s.setCoordinates(t,e);else if(void 0!==e&&i)s.setFlatCoordinates(e,t),s.ends_=i;else{for(var n=s.getLayout(),o=t,a=[],d=[],u=0,h=o.length;u<h;++u){var f=o[u];0===u&&(n=f.getLayout()),(0,l.extend)(a,f.getFlatCoordinates()),d.push(a.length)}s.setFlatCoordinates(n,a),s.ends_=d}return s}return p(f,r),f.prototype.appendLineString=function(t){this.flatCoordinates?(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},f.prototype.clone=function(){var t=new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},f.prototype.closestPointXY=function(t,e,i,r){return r<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},f.prototype.getCoordinateAtM=function(e,i,r){if(this.layout!=t.default.XYM&&this.layout!=t.default.XYZM||0===this.flatCoordinates.length)return null;var s=void 0!==i&&i,n=void 0!==r&&r;return(0,u.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,e,s,n)},f.prototype.getCoordinates=function(){return(0,d.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)},f.prototype.getEnds=function(){return this.ends_},f.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new i.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},f.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,s=[],n=0,o=0,a=e.length;o<a;++o){var l=e[o],d=new i.default(t.slice(n,l),r);s.push(d),n=l}return s},f.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,s=this.stride,n=0,o=r.length;n<o;++n){var a=r[n],d=(0,u.interpolatePoint)(e,i,a,s,.5);(0,l.extend)(t,d),i=a}return t},f.prototype.getSimplifiedGeometryInternal=function(e){var i=[],r=[];return i.length=(0,a.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,e,i,0,r),new f(i,t.default.XY,r)},f.prototype.getType=function(){return e.default.MULTI_LINE_STRING},f.prototype.intersectsExtent=function(t){return(0,h.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)},f.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},f}(r.default),y=c;exports.default=y;
},{"./GeometryLayout.js":"fUWX","./GeometryType.js":"qBtD","./LineString.js":"ArTU","./SimpleGeometry.js":"Ya1f","./flat/closest.js":"jEO8","../extent.js":"pbFF","./flat/deflate.js":"km8t","./flat/simplify.js":"EHBi","../array.js":"u3be","./flat/inflate.js":"ZGP2","./flat/interpolate.js":"uaOF","./flat/intersectsextent.js":"sHvJ"}],"UXVJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./GeometryType.js")),e=l(require("./Point.js")),r=l(require("./SimpleGeometry.js")),o=require("../extent.js"),i=require("./flat/deflate.js"),n=require("../array.js"),s=require("./flat/inflate.js"),a=require("../math.js");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),f=function(r){function l(t,e){var o=r.call(this)||this;return e&&!Array.isArray(t[0])?o.setFlatCoordinates(e,t):o.setCoordinates(t,e),o}return u(l,r),l.prototype.appendPoint=function(t){this.flatCoordinates?(0,n.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},l.prototype.clone=function(){var t=new l(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},l.prototype.closestPointXY=function(t,e,r,i){if(i<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e))return i;for(var n=this.flatCoordinates,s=this.stride,l=0,u=n.length;l<u;l+=s){var f=(0,a.squaredDistance)(t,e,n[l],n[l+1]);if(f<i){i=f;for(var d=0;d<s;++d)r[d]=n[l+d];r.length=s}}return i},l.prototype.getCoordinates=function(){return(0,s.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getPoint=function(t){var r=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||r<=t?null:new e.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},l.prototype.getPoints=function(){for(var t=this.flatCoordinates,r=this.layout,o=this.stride,i=[],n=0,s=t.length;n<s;n+=o){var a=new e.default(t.slice(n,n+o),r);i.push(a)}return i},l.prototype.getType=function(){return t.default.MULTI_POINT},l.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,i=0,n=e.length;i<n;i+=r){var s=e[i],a=e[i+1];if((0,o.containsXY)(t,s,a))return!0}return!1},l.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,i.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},l}(r.default),d=f;exports.default=d;
},{"./GeometryType.js":"qBtD","./Point.js":"fTqU","./SimpleGeometry.js":"Ya1f","../extent.js":"pbFF","./flat/deflate.js":"km8t","../array.js":"u3be","./flat/inflate.js":"ZGP2","../math.js":"cgU2"}],"Vkwe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"pbFF"}],"ZcrM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=y(require("./GeometryLayout.js")),e=y(require("./GeometryType.js")),i=y(require("./MultiPoint.js")),s=y(require("./Polygon.js")),r=y(require("./SimpleGeometry.js")),n=require("./flat/closest.js"),o=require("../extent.js"),a=require("./flat/deflate.js"),l=require("../array.js"),d=require("./flat/interiorpoint.js"),h=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),g=require("./flat/area.js"),p=require("./flat/center.js"),c=require("./flat/contains.js"),_=require("./flat/simplify.js");function y(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),C=function(r){function y(t,e,i){var s=r.call(this)||this;if(s.endss_=[],s.flatInteriorPointsRevision_=-1,s.flatInteriorPoints_=null,s.maxDelta_=-1,s.maxDeltaRevision_=-1,s.orientedRevision_=-1,s.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var n=s.getLayout(),o=t,a=[],d=[],h=0,u=o.length;h<u;++h){var f=o[h];0===h&&(n=f.getLayout());for(var g=a.length,p=f.getEnds(),c=0,_=p.length;c<_;++c)p[c]+=g;(0,l.extend)(a,f.getFlatCoordinates()),d.push(p)}e=n,t=a,i=d}return void 0!==e&&i?(s.setFlatCoordinates(e,t),s.endss_=i):s.setCoordinates(t,e),s}return v(y,r),y.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates());for(var s=0,r=(e=t.getEnds().slice()).length;s<r;++s)e[s]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},y.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();var s=new y(this.flatCoordinates.slice(),this.layout,e);return s.applyProperties(this),s},y.prototype.closestPointXY=function(t,e,i,s){return s<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,n.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,n.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))},y.prototype.containsXY=function(t,e){return(0,c.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},y.prototype.getArea=function(){return(0,g.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},y.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,h.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)},y.prototype.getEndss=function(){return this.endss_},y.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,p.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,d.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},y.prototype.getInteriorPoints=function(){return new i.default(this.getFlatInteriorPoints().slice(),t.default.XYM)},y.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},y.prototype.getSimplifiedGeometryInternal=function(e){var i=[],s=[];return i.length=(0,_.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),i,0,s),new y(i,t.default.XY,s)},y.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new s.default(this.flatCoordinates.slice(e,n),this.layout,r)},y.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,a=i.length;o<a;++o){var l=i[o].slice(),d=l[l.length-1];if(0!==n)for(var h=0,u=l.length;h<u;++h)l[h]-=n;var f=new s.default(e.slice(n,d),t,l);r.push(f),n=d}return r},y.prototype.getType=function(){return e.default.MULTI_POLYGON},y.prototype.intersectsExtent=function(t){return(0,u.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},y.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,a.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var s=i[i.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()},y}(r.default),q=C;exports.default=q;
},{"./GeometryLayout.js":"fUWX","./GeometryType.js":"qBtD","./MultiPoint.js":"UXVJ","./Polygon.js":"kEvS","./SimpleGeometry.js":"Ya1f","./flat/closest.js":"jEO8","../extent.js":"pbFF","./flat/deflate.js":"km8t","../array.js":"u3be","./flat/interiorpoint.js":"Q2uF","./flat/inflate.js":"ZGP2","./flat/intersectsextent.js":"sHvJ","./flat/orient.js":"ApPt","./flat/area.js":"lXVo","./flat/center.js":"Vkwe","./flat/contains.js":"g4sO","./flat/simplify.js":"EHBi"}],"HLkW":[function(require,module,exports) {
var define;
var t;!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var m=n[r],c=e,p=a;for(i(n,e,r),h(n[a],m)>0&&i(n,e,a);c<p;){for(i(n,c,p),c++,p--;h(n[c],m)<0;)c++;for(;h(n[p],m)>0;)p--}0===h(n[e],m)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"yVAM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=require("../size.js"),o=function(){function o(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,e.toSize)(t.scale),this.displacement_=t.displacement}return o.prototype.clone=function(){var t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},o.prototype.getOpacity=function(){return this.opacity_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getScaleArray=function(){return this.scaleArray_},o.prototype.getDisplacement=function(){return this.displacement_},o.prototype.getAnchor=function(){return(0,t.abstract)()},o.prototype.getImage=function(e){return(0,t.abstract)()},o.prototype.getHitDetectionImage=function(){return(0,t.abstract)()},o.prototype.getPixelRatio=function(t){return 1},o.prototype.getImageState=function(){return(0,t.abstract)()},o.prototype.getImageSize=function(){return(0,t.abstract)()},o.prototype.getHitDetectionImageSize=function(){return(0,t.abstract)()},o.prototype.getOrigin=function(){return(0,t.abstract)()},o.prototype.getSize=function(){return(0,t.abstract)()},o.prototype.setOpacity=function(t){this.opacity_=t},o.prototype.setRotateWithView=function(t){this.rotateWithView_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(t)},o.prototype.listenImageChange=function(e){(0,t.abstract)()},o.prototype.load=function(){(0,t.abstract)()},o.prototype.unlistenImageChange=function(e){(0,t.abstract)()},o}(),i=o;exports.default=i;
},{"../util.js":"bmrL","../size.js":"XzjU"}],"cfXT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"g5uZ"}],"sVMX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../ImageState.js")),e=o(require("./Image.js")),i=require("../color.js"),s=require("../colorlike.js"),n=require("../dom.js"),r=require("../render/canvas.js");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=function(e){function o(t){var i=this,s=void 0!==t.rotateWithView&&t.rotateWithView;return(i=e.call(this,{opacity:1,rotateWithView:s,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]})||this).canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==t.fill?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=void 0!==t.radius?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=void 0!==t.angle?t.angle:0,i.stroke_=void 0!==t.stroke?t.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return a(o,e),o.prototype.clone=function(){var t=this.getScale(),e=new o({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e},o.prototype.getAnchor=function(){return this.anchor_},o.prototype.getAngle=function(){return this.angle_},o.prototype.getFill=function(){return this.fill_},o.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},o.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=(0,n.createCanvasContext2D)(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},o.prototype.getPixelRatio=function(t){return t},o.prototype.getImageSize=function(){return this.imageSize_},o.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},o.prototype.getImageState=function(){return t.default.LOADED},o.prototype.getOrigin=function(){return this.origin_},o.prototype.getPoints=function(){return this.points_},o.prototype.getRadius=function(){return this.radius_},o.prototype.getRadius2=function(){return this.radius2_},o.prototype.getSize=function(){return this.size_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.listenImageChange=function(t){},o.prototype.load=function(){},o.prototype.unlistenImageChange=function(t){},o.prototype.createRenderOptions=function(){var t,e=r.defaultLineCap,i=r.defaultLineJoin,n=0,o=null,a=0,l=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=r.defaultStrokeStyle),t=(0,s.asColorLike)(t),void 0===(l=this.stroke_.getWidth())&&(l=r.defaultLineWidth),o=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=r.defaultLineJoin),void 0===(e=this.stroke_.getLineCap())&&(e=r.defaultLineCap),void 0===(n=this.stroke_.getMiterLimit())&&(n=r.defaultMiterLimit)),{strokeStyle:t,strokeWidth:l,size:2*(this.radius_+l)+1,lineCap:e,lineDash:o,lineDashOffset:a,lineJoin:i,miterLimit:n}},o.prototype.render=function(){var t=this.createRenderOptions(),e=(0,n.createCanvasContext2D)(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_={},this.canvas_[1]=e.canvas;var i=e.canvas.width,s=i,r=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-r[0],i/2+r[1]],this.size_=[i,i],this.imageSize_=[s,s]},o.prototype.draw_=function(t,e,i,n,o){var a,l,h;e.setTransform(o,0,0,o,0,0),e.translate(i,n),e.beginPath();var u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(u*=2),a=0;a<=u;a++)l=2*a*Math.PI/u-Math.PI/2+this.angle_,h=a%2==0?this.radius_:c,e.lineTo(t.size/2+h*Math.cos(l),t.size/2+h*Math.sin(l))}if(this.fill_){var d=this.fill_.getColor();null===d&&(d=r.defaultFillStyle),e.fillStyle=(0,s.asColorLike)(d),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},o.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),s=0;if("string"==typeof e&&(e=(0,i.asArray)(e)),null===e?s=1:Array.isArray(e)&&(s=4===e.length?e[3]:1),0===s){var r=(0,n.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r,0,0)}}},o.prototype.drawHitDetectionCanvas_=function(t,e,i,s){e.translate(i,s),e.beginPath();var n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(n*=2);var a=void 0,l=void 0,h=void 0;for(a=0;a<=n;a++)h=2*a*Math.PI/n-Math.PI/2+this.angle_,l=a%2==0?this.radius_:o,e.lineTo(t.size/2+l*Math.cos(h),t.size/2+l*Math.sin(h))}e.fillStyle=r.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},o}(e.default),h=l;exports.default=h;
},{"../ImageState.js":"TPVv","./Image.js":"yVAM","../color.js":"g5uZ","../colorlike.js":"cfXT","../dom.js":"N5LR","../render/canvas.js":"s2Hb"}],"j2Vo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),o=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return i(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(t.default),r=o;exports.default=r;
},{"./RegularShape.js":"sVMX"}],"wPtA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}(),r=o;exports.default=r;
},{}],"v50a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),i=t;exports.default=i;
},{}],"ERCw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=l,exports.createDefaultStyle=f,exports.createEditingStyle=d,exports.default=void 0;var e=i(require("./Circle.js")),t=i(require("./Fill.js")),o=i(require("../geom/GeometryType.js")),r=i(require("./Stroke.js")),n=require("../asserts.js");function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=a,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=a,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function l(e){var t;if("function"==typeof e)t=e;else{var o;if(Array.isArray(e))o=e;else(0,n.assert)("function"==typeof e.getZIndex,41),o=[e];t=function(){return o}}return t}var s=null;function f(o,n){if(!s){var i=new t.default({color:"rgba(255,255,255,0.4)"}),l=new r.default({color:"#3399CC",width:1.25});s=[new u({image:new e.default({fill:i,stroke:l,radius:5}),fill:i,stroke:l})]}return s}function d(){var n={},i=[255,255,255,1],l=[0,153,255,1];return n[o.default.POLYGON]=[new u({fill:new t.default({color:[255,255,255,.5]})})],n[o.default.MULTI_POLYGON]=n[o.default.POLYGON],n[o.default.LINE_STRING]=[new u({stroke:new r.default({color:i,width:5})}),new u({stroke:new r.default({color:l,width:3})})],n[o.default.MULTI_LINE_STRING]=n[o.default.LINE_STRING],n[o.default.CIRCLE]=n[o.default.POLYGON].concat(n[o.default.LINE_STRING]),n[o.default.POINT]=[new u({image:new e.default({radius:6,fill:new t.default({color:l}),stroke:new r.default({color:i,width:1.5})}),zIndex:1/0})],n[o.default.MULTI_POINT]=n[o.default.POINT],n[o.default.GEOMETRY_COLLECTION]=n[o.default.POLYGON].concat(n[o.default.LINE_STRING],n[o.default.POINT]),n}function a(e){return e.getGeometry()}var c=u;exports.default=c;
},{"./Circle.js":"j2Vo","./Fill.js":"wPtA","../geom/GeometryType.js":"qBtD","./Stroke.js":"v50a","../asserts.js":"hgi2"}],"NMOS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Layer.js")),t=i(require("rbush")),r=require("../obj.js"),n=require("../style/Style.js");function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u={RENDER_ORDER:"renderOrder"},l=function(e){function i(t){var n=this,i=t||{},o=(0,r.assign)({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(n=e.call(this,o)||this).declutter_=void 0!==i.declutter&&i.declutter,n.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,n.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,n}return o(i,e),i.prototype.getDeclutter=function(){return this.declutter_},i.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},i.prototype.getRenderBuffer=function(){return this.renderBuffer_},i.prototype.getRenderOrder=function(){return this.get(u.RENDER_ORDER)},i.prototype.getStyle=function(){return this.style_},i.prototype.getStyleFunction=function(){return this.styleFunction_},i.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},i.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},i.prototype.renderDeclutter=function(e){e.declutterTree||(e.declutterTree=new t.default(9)),this.getRenderer().renderDeclutter(e)},i.prototype.setRenderOrder=function(e){this.set(u.RENDER_ORDER,e)},i.prototype.setStyle=function(e){this.style_=void 0!==e?e:n.createDefaultStyle,this.styleFunction_=null===e?void 0:(0,n.toFunction)(this.style_),this.changed()},i}(e.default),c=l;exports.default=c;
},{"./Layer.js":"hYy3","rbush":"HLkW","../obj.js":"lPyT","../style/Style.js":"ERCw"}],"MRHt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"wszj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(){}return t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}(),o=t;exports.default=o;
},{}],"IQ3v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./Instruction.js")),e=l(require("../../geom/GeometryType.js")),i=l(require("../../extent/Relationship.js")),n=l(require("../VectorContext.js")),r=require("../../colorlike.js"),o=require("../../extent.js"),s=require("../canvas.js"),a=require("../../array.js"),u=require("../../geom/flat/inflate.js");function l(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(n){function l(t,e,i,r){var o=n.call(this)||this;return o.tolerance=t,o.maxExtent=e,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=i,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return h(l,n),l.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},l.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates,s=r.length,a=0,u=t.length;a<u;a+=e)n[0]=t[a],n[1]=t[a+1],(0,o.containsCoordinate)(i,n)&&(r[s++]=n[0],r[s++]=n[1]);return s},l.prototype.appendFlatLineCoordinates=function(t,e,n,r,s,a){var u=this.coordinates,l=u.length,h=this.getBufferedMaxExtent();a&&(e+=r);var d,f,c,p=t[e],y=t[e+1],L=this.tmpCoordinate_,v=!0;for(d=e+r;d<n;d+=r)L[0]=t[d],L[1]=t[d+1],(c=(0,o.coordinateRelationship)(h,L))!==f?(v&&(u[l++]=p,u[l++]=y,v=!1),u[l++]=L[0],u[l++]=L[1]):c===i.default.INTERSECTING?(u[l++]=L[0],u[l++]=L[1],v=!1):v=!0,p=L[0],y=L[1],f=c;return(s&&v||d===e+r)&&(u[l++]=p,u[l++]=y),l},l.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e},l.prototype.drawCustom=function(i,n,r){this.beginGeometry(i,n);var o,s,a,l,h,d=i.getType(),f=i.getStride(),c=this.coordinates.length;if(d==e.default.MULTI_POLYGON){o=i.getOrientedFlatCoordinates(),l=[];var p=i.getEndss();h=0;for(var y=0,L=p.length;y<L;++y){var v=[];h=this.drawCustomCoordinates_(o,h,p[y],f,v),l.push(v)}this.instructions.push([t.default.CUSTOM,c,l,i,r,u.inflateMultiCoordinatesArray])}else d==e.default.POLYGON||d==e.default.MULTI_LINE_STRING?(a=[],o=d==e.default.POLYGON?i.getOrientedFlatCoordinates():i.getFlatCoordinates(),h=this.drawCustomCoordinates_(o,0,i.getEnds(),f,a),this.instructions.push([t.default.CUSTOM,c,a,i,r,u.inflateCoordinatesArray])):d==e.default.LINE_STRING||d==e.default.CIRCLE?(o=i.getFlatCoordinates(),s=this.appendFlatLineCoordinates(o,0,o.length,f,!1,!1),this.instructions.push([t.default.CUSTOM,c,s,i,r,u.inflateCoordinates])):d==e.default.MULTI_POINT?(o=i.getFlatCoordinates(),(s=this.appendFlatPointCoordinates(o,f))>c&&this.instructions.push([t.default.CUSTOM,c,s,i,r,u.inflateCoordinates])):d==e.default.POINT&&(o=i.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),s=this.coordinates.length,this.instructions.push([t.default.CUSTOM,c,s,i,r]));this.endGeometry(n)},l.prototype.beginGeometry=function(e,i){this.beginGeometryInstruction1_=[t.default.BEGIN_GEOMETRY,i,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[t.default.BEGIN_GEOMETRY,i,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},l.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},l.prototype.reverseHitDetectionInstructions=function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,s=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==t.default.END_GEOMETRY?s=e:r==t.default.BEGIN_GEOMETRY&&(n[2]=e,(0,a.reverseSubArray)(this.hitDetectionInstructions,s,e),s=-1)},l.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=(0,r.asColorLike)(n||s.defaultFillStyle)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=(0,r.asColorLike)(o||s.defaultStrokeStyle);var a=e.getLineCap();i.lineCap=void 0!==a?a:s.defaultLineCap;var u=e.getLineDash();i.lineDash=u?u.slice():s.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||s.defaultLineDashOffset;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:s.defaultLineJoin;var d=e.getWidth();i.lineWidth=void 0!==d?d:s.defaultLineWidth;var f=e.getMiterLimit();i.miterLimit=void 0!==f?f:s.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},l.prototype.createFill=function(e){var i=e.fillStyle,n=[t.default.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},l.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},l.prototype.createStroke=function(e){return[t.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},l.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},l.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,a.equals)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=l)},l.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[t.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},l.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,o.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,o.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},l}(n.default),f=d;exports.default=f;
},{"./Instruction.js":"MRHt","../../geom/GeometryType.js":"qBtD","../../extent/Relationship.js":"oVOB","../VectorContext.js":"wszj","../../colorlike.js":"cfXT","../../extent.js":"pbFF","../canvas.js":"s2Hb","../../array.js":"u3be","../../geom/flat/inflate.js":"ZGP2"}],"kmdY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Builder.js")),i=e(require("./Instruction.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),h=function(t){function e(i,e,o,h){var s=t.call(this,i,e,o,h)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterImageWithText_=void 0,s}return o(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),h=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,h);this.instructions.push([i.default.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),h=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,h);this.instructions.push([i.default.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),o=t.getSize(),h=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=h,this.image_=s,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterImageWithText_=i},e}(t.default),s=h;exports.default=s;
},{"./Builder.js":"IQ3v","./Instruction.js":"MRHt"}],"KHHG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Builder.js")),e=n(require("./Instruction.js"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function i(e,i,n,r){return t.call(this,e,i,n,r)||this}return o(i,t),i.prototype.drawFlatCoordinates_=function(t,i,n,r){var o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,i,n,r,!1,!1),u=[e.default.MOVE_TO_LINE_TO,o,s];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n},i.prototype.drawLineString=function(t,i){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],e.beginPathInstruction);var s=t.getFlatCoordinates(),u=t.getStride();this.drawFlatCoordinates_(s,0,s.length,u),this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(i)}},i.prototype.drawMultiLineString=function(t,i){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],e.beginPathInstruction);for(var s=t.getEnds(),u=t.getFlatCoordinates(),a=t.getStride(),l=0,h=0,c=s.length;h<c;++h)l=this.drawFlatCoordinates_(u,l,s[h],a);this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(i)}},i.prototype.finish=function(){var i=this.state;return null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&this.instructions.push(e.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(e.strokeInstruction),i.lastStroke=this.coordinates.length),i.lastStroke=0,t.prototype.applyStroke.call(this,i),this.instructions.push(e.beginPathInstruction)},i}(t.default),u=s;exports.default=u;
},{"./Builder.js":"IQ3v","./Instruction.js":"MRHt"}],"DthK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Builder.js")),e=o(require("./Instruction.js")),i=require("../canvas.js"),n=require("../../geom/flat/simplify.js");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=n?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function r(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(t){function s(e,i,n,s){return t.call(this,e,i,n,s)||this}return l(s,t),s.prototype.drawFlatCoordinatess_=function(t,i,n,s){var o=this.state,r=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=n.length;this.instructions.push(e.beginPathInstruction),this.hitDetectionInstructions.push(e.beginPathInstruction);for(var h=0;h<u;++h){var a=n[h],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,i,a,s,!0,!l),p=[e.default.MOVE_TO_LINE_TO,c,f];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(e.closePathInstruction),this.hitDetectionInstructions.push(e.closePathInstruction)),i=a}return r&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),l&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),i},s.prototype.drawCircle=function(t,n){var s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);var a=[e.default.CIRCLE,h];this.instructions.push(e.beginPathInstruction,a),this.hitDetectionInstructions.push(e.beginPathInstruction,a),void 0!==s.fillStyle&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),void 0!==s.strokeStyle&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),this.endGeometry(n)}},s.prototype.drawPolygon=function(t,n){var s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(u,0,l,h),this.endGeometry(n)}},s.prototype.drawMultiPolygon=function(t,n){var s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),h=t.getStride(),a=0,c=0,f=l.length;c<f;++c)a=this.drawFlatCoordinatess_(u,a,l[c],h);this.endGeometry(n)}},s.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,s=0,o=i.length;s<o;++s)i[s]=(0,n.snap)(i[s],e);return t.prototype.finish.call(this)},s.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},s}(t.default),h=u;exports.default=h;
},{"./Builder.js":"IQ3v","./Instruction.js":"MRHt","../canvas.js":"s2Hb","../../geom/flat/simplify.js":"EHBi"}],"hi8c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"sTJs":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"llfE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=h(require("./Builder.js")),e=h(require("./Instruction.js")),i=h(require("../../geom/GeometryType.js")),s=h(require("../../style/TextPlacement.js")),a=require("../../colorlike.js"),l=require("../canvas.js"),r=require("../../util.js"),n=require("../../extent.js"),o=require("../../geom/flat/straightchunk.js");function h(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),u={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=u;var d=function(t){function h(e,i,s,a){var l=t.call(this,e,i,s,a)||this;return l.labels_=null,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=void 0,l.textRotation_=0,l.textFillState_=null,l.fillStates={},l.textStrokeState_=null,l.strokeStates={},l.textState_={},l.textStates={},l.textKey_="",l.fillKey_="",l.strokeKey_="",l.declutterImageWithText_=void 0,l}return f(h,t),h.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},h.prototype.drawText=function(t,a){var r=this.textFillState_,h=this.textStrokeState_,f=this.textState_;if(""!==this.text_&&f&&(r||h)){var u=this.coordinates,d=u.length,g=t.getType(),_=null,x=t.getStride();if(f.placement!==s.default.LINE||g!=i.default.LINE_STRING&&g!=i.default.MULTI_LINE_STRING&&g!=i.default.POLYGON&&g!=i.default.MULTI_POLYGON){var c=f.overflow?null:[];switch(g){case i.default.POINT:case i.default.MULTI_POINT:_=t.getFlatCoordinates();break;case i.default.LINE_STRING:_=t.getFlatMidpoint();break;case i.default.CIRCLE:_=t.getCenter();break;case i.default.MULTI_LINE_STRING:_=t.getFlatMidpoints(),x=2;break;case i.default.POLYGON:_=t.getFlatInteriorPoint(),f.overflow||c.push(_[2]/this.resolution),x=3;break;case i.default.MULTI_POLYGON:var S=t.getFlatInteriorPoints();_=[];for(m=0,F=S.length;m<F;m+=3)f.overflow||c.push(S[m+2]/this.resolution),_.push(S[m],S[m+1]);if(0===_.length)return;x=2}if((D=this.appendFlatPointCoordinates(_,x))===d)return;this.saveTextStates_(),(f.backgroundFill||f.backgroundStroke)&&(this.setFillStrokeStyle(f.backgroundFill,f.backgroundStroke),f.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),f.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,a);var p=f.padding;if(p!=l.defaultPadding&&(f.scale[0]<0||f.scale[1]<0)){var y=f.padding[0],k=f.padding[1],v=f.padding[2],L=f.padding[3];f.scale[0]<0&&(k=-k,L=-L),f.scale[1]<0&&(y=-y,v=-v),p=[y,k,v,L]}var N=this.pixelRatio;this.instructions.push([e.default.DRAW_IMAGE,d,D,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,p==l.defaultPadding?l.defaultPadding:p.map(function(t){return t*N}),!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var I=1/N;this.hitDetectionInstructions.push([e.default.DRAW_IMAGE,d,D,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[I,I],NaN,this.declutterImageWithText_,p,!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(a)}else{if(!(0,n.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var O=void 0;if(_=t.getFlatCoordinates(),g==i.default.LINE_STRING)O=[_.length];else if(g==i.default.MULTI_LINE_STRING)O=t.getEnds();else if(g==i.default.POLYGON)O=t.getEnds().slice(0,1);else if(g==i.default.MULTI_POLYGON){var T=t.getEndss();O=[];for(var m=0,F=T.length;m<F;++m)O.push(T[m][0])}this.beginGeometry(t,a);for(var b=f.textAlign,R=0,A=void 0,C=0,G=O.length;C<G;++C){if(null==b){var P=(0,o.matchingChunk)(f.maxAngle,_,R,O[C],x);R=P[0],A=P[1]}else A=O[C];for(var m=R;m<A;m+=x)u.push(_[m],_[m+1]);var D=u.length;R=O[C],this.drawChars_(d,D),d=D}this.endGeometry(a)}}},h.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:e.font,textAlign:e.textAlign||l.defaultTextAlign,textBaseline:e.textBaseline||l.defaultTextBaseline,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))},h.prototype.drawChars_=function(t,i){var s=this.textStrokeState_,a=this.textState_,l=this.strokeKey_,r=this.textKey_,n=this.fillKey_;this.saveTextStates_();var o=this.pixelRatio,h=u[a.textBaseline],f=this.textOffsetY_*o,d=this.text_,g=s?s.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([e.default.DRAW_CHARS,t,i,h,a.overflow,n,a.maxAngle,o,f,l,g*o,d,r,1]),this.hitDetectionInstructions.push([e.default.DRAW_CHARS,t,i,h,a.overflow,n,a.maxAngle,1,f,l,g,d,r,1/o])},h.prototype.setTextStyle=function(t,e){var i,s,n;if(t){var o=t.getFill();o?((s=this.textFillState_)||(s={},this.textFillState_=s),s.fillStyle=(0,a.asColorLike)(o.getColor()||l.defaultFillStyle)):(s=null,this.textFillState_=s);var h=t.getStroke();if(h){(n=this.textStrokeState_)||(n={},this.textStrokeState_=n);var f=h.getLineDash(),u=h.getLineDashOffset(),d=h.getWidth(),g=h.getMiterLimit();n.lineCap=h.getLineCap()||l.defaultLineCap,n.lineDash=f?f.slice():l.defaultLineDash,n.lineDashOffset=void 0===u?l.defaultLineDashOffset:u,n.lineJoin=h.getLineJoin()||l.defaultLineJoin,n.lineWidth=void 0===d?l.defaultLineWidth:d,n.miterLimit=void 0===g?l.defaultMiterLimit:g,n.strokeStyle=(0,a.asColorLike)(h.getColor()||l.defaultStrokeStyle)}else n=null,this.textStrokeState_=n;i=this.textState_;var _=t.getFont()||l.defaultFont;(0,l.registerFont)(_);var x=t.getScaleArray();i.overflow=t.getOverflow(),i.font=_,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||l.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||l.defaultPadding,i.scale=void 0===x?[1,1]:x;var c=t.getOffsetX(),S=t.getOffsetY(),p=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===c?0:c,this.textOffsetY_=void 0===S?0:S,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===y?0:y,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,r.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,r.getUid)(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},h}(t.default),g=d;exports.default=g;
},{"./Builder.js":"IQ3v","./Instruction.js":"MRHt","../../geom/GeometryType.js":"qBtD","../../style/TextPlacement.js":"hi8c","../../colorlike.js":"cfXT","../canvas.js":"s2Hb","../../util.js":"bmrL","../../extent.js":"pbFF","../../geom/flat/straightchunk.js":"sTJs"}],"biGG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Builder.js")),t=n(require("./ImageBuilder.js")),i=n(require("./LineStringBuilder.js")),r=n(require("./PolygonBuilder.js")),u=n(require("./TextBuilder.js"));function n(e){return e&&e.__esModule?e:{default:e}}var o={Circle:r.default,Default:e.default,Image:t.default,LineString:i.default,Polygon:r.default,Text:u.default},s=function(){function e(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return e.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var i=this.buildersByZIndex_[t];for(var r in i){var u=i[r].finish();e[t][r]=u}}return e},e.prototype.getBuilder=function(e,t){var i=void 0!==e?e.toString():"0",r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);var u=r[t];void 0===u&&(u=new(0,o[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=u);return u},e}(),l=s;exports.default=l;
},{"./Builder.js":"IQ3v","./ImageBuilder.js":"kmdY","./LineStringBuilder.js":"KHHG","./PolygonBuilder.js":"DthK","./TextBuilder.js":"llfE"}],"PRCg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../events/EventType.js")),e=a(require("../ImageState.js")),r=a(require("../Observable.js")),n=a(require("../source/State.js")),o=require("../util.js");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(r){function a(t){var e=r.call(this)||this;return e.boundHandleImageChange_=e.handleImageChange_.bind(e),e.layer_=t,e.declutterExecutorGroup=null,e}return u(a,r),a.prototype.getFeatures=function(t){return(0,o.abstract)()},a.prototype.prepareFrame=function(t){return(0,o.abstract)()},a.prototype.renderFrame=function(t,e){return(0,o.abstract)()},a.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},a.prototype.createLoadedTileFinder=function(t,e,r){return function(n,o){var a=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,o,a)}.bind(this)},a.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o){},a.prototype.getDataAtPixel=function(t,e,r){return(0,o.abstract)()},a.prototype.getLayer=function(){return this.layer_},a.prototype.handleFontsChanged=function(){},a.prototype.handleImageChange_=function(t){t.target.getState()===e.default.LOADED&&this.renderIfReadyAndVisible()},a.prototype.loadImage=function(r){var n=r.getState();return n!=e.default.LOADED&&n!=e.default.ERROR&&r.addEventListener(t.default.CHANGE,this.boundHandleImageChange_),n==e.default.IDLE&&(r.load(),n=r.getState()),n==e.default.LOADED},a.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==n.default.READY&&t.changed()},a}(r.default),d=i;exports.default=d;
},{"../events/EventType.js":"lUmy","../ImageState.js":"TPVv","../Observable.js":"YGGN","../source/State.js":"r4JV","../util.js":"bmrL"}],"wBoL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../Layer.js")),e=s(require("../../render/Event.js")),r=s(require("../../render/EventType.js")),n=require("../../transform.js"),o=require("../../extent.js"),a=require("../../dom.js"),i=require("../../render/canvas.js");function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(t){function s(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=(0,n.create)(),r.pixelTransform=(0,n.create)(),r.inversePixelTransform=(0,n.create)(),r.context=null,r.containerReused=!1,r}return l(s,t),s.prototype.useContainer=function(t,e,r){var n,o,i=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===i&&((l=t.firstElementChild)instanceof HTMLCanvasElement&&(o=l.getContext("2d")));if(!o||0!==o.canvas.width&&o.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=o,this.containerReused=!0),!this.container){(n=document.createElement("div")).className=i;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var l=(o=(0,a.createCanvasContext2D)()).canvas;n.appendChild(l),(s=l.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=o}},s.prototype.clip=function(t,e,r){var a=e.pixelRatio,s=e.size[0]*a/2,l=e.size[1]*a/2,p=e.viewState.rotation,c=(0,o.getTopLeft)(r),u=(0,o.getTopRight)(r),d=(0,o.getBottomRight)(r),f=(0,o.getBottomLeft)(r);(0,n.apply)(e.coordinateToPixelTransform,c),(0,n.apply)(e.coordinateToPixelTransform,u),(0,n.apply)(e.coordinateToPixelTransform,d),(0,n.apply)(e.coordinateToPixelTransform,f),t.save(),(0,i.rotateAtOffset)(t,-p,s,l),t.beginPath(),t.moveTo(c[0]*a,c[1]*a),t.lineTo(u[0]*a,u[1]*a),t.lineTo(d[0]*a,d[1]*a),t.lineTo(f[0]*a,f[1]*a),t.clip(),(0,i.rotateAtOffset)(t,p,s,l)},s.prototype.clipUnrotated=function(t,e,r){var a=(0,o.getTopLeft)(r),i=(0,o.getTopRight)(r),s=(0,o.getBottomRight)(r),l=(0,o.getBottomLeft)(r);(0,n.apply)(e.coordinateToPixelTransform,a),(0,n.apply)(e.coordinateToPixelTransform,i),(0,n.apply)(e.coordinateToPixelTransform,s),(0,n.apply)(e.coordinateToPixelTransform,l);var p=this.inversePixelTransform;(0,n.apply)(p,a),(0,n.apply)(p,i),(0,n.apply)(p,s),(0,n.apply)(p,l),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()},s.prototype.dispatchRenderEvent_=function(t,r,n){var o=this.getLayer();if(o.hasListener(t)){var a=new e.default(t,this.inversePixelTransform,n,r);o.dispatchEvent(a)}},s.prototype.preRender=function(t,e){this.dispatchRenderEvent_(r.default.PRERENDER,t,e)},s.prototype.postRender=function(t,e){this.dispatchRenderEvent_(r.default.POSTRENDER,t,e)},s.prototype.getRenderTransform=function(t,e,r,o,a,i,s){var l=a/2,p=i/2,c=o/e,u=-c,d=-t[0]+s,f=-t[1];return(0,n.compose)(this.tempTransform,l,p,c,u,-r,d,f)},s.prototype.getDataAtPixel=function(t,e,r){var a,i=(0,n.apply)(this.inversePixelTransform,t.slice()),s=this.context,l=this.getLayer().getExtent();if(l){var p=(0,n.apply)(e.pixelToCoordinateTransform,t.slice());if(!(0,o.containsCoordinate)(l,p))return null}try{var c=Math.round(i[0]),u=Math.round(i[1]),d=document.createElement("canvas"),f=d.getContext("2d");d.width=1,d.height=1,f.clearRect(0,0,1,1),f.drawImage(s.canvas,c,u,1,1,0,0,1,1),a=f.getImageData(0,0,1,1).data}catch(h){return"SecurityError"===h.name?new Uint8Array:a}return 0===a[3]?null:a},s}(t.default),c=p;exports.default=c;
},{"../Layer.js":"PRCg","../../render/Event.js":"ORJF","../../render/EventType.js":"mlMP","../../transform.js":"ePpI","../../extent.js":"pbFF","../../dom.js":"N5LR","../../render/canvas.js":"s2Hb"}],"PoZV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"zlwb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=e;var r=require("../../math.js"),a=require("./transform.js");function e(e,t,i,n,s,v,u,f,l,o,h,p){var M=e[t],b=e[t+1],d=0,c=0,g=0,j=0;function q(){d=M,c=b,M=e[t+=n],b=e[t+1],j+=g,g=Math.sqrt((M-d)*(M-d)+(b-c)*(b-c))}do{q()}while(t<i-n&&j+g<v);for(var x=(v-j)/g,P=(0,r.lerp)(d,M,x),m=(0,r.lerp)(c,b,x),w=t-n,O=j,_=v+f*l(o,s,h);t<i-n&&j+g<_;)q();x=(_-j)/g;var k,y=(0,r.lerp)(d,M,x),I=(0,r.lerp)(c,b,x);if(p){var T=[P,m,y,I];(0,a.rotate)(T,0,4,2,p,T,T),k=T[0]>T[2]}else k=P>y;var z,A=Math.PI,B=[],C=w+n===t;if(g=0,j=O,M=e[t=w],b=e[t+1],C){q();var D=Math.atan2(b-c,M-d);k&&(D+=D>0?-A:A);var E=(y+P)/2,F=(I+m)/2;return B[0]=[E,F,(_-v)/2,D,s],B}for(var G=0,H=s.length;G<H;){q();var J=Math.atan2(b-c,M-d);if(k&&(J+=J>0?-A:A),void 0!==z){var K=J-z;if(K+=K>A?-2*A:K<-A?2*A:0,Math.abs(K)>u)return null}z=J;for(var L=G,N=0;G<H;++G){var Q=f*l(o,s[k?H-G-1:G],h);if(t+n<i&&j+g<v+N+Q/2)break;N+=Q}if(G!==L){var R=k?s.substring(H-L,H-G):s.substring(L,G);x=(v+N/2-j)/g;E=(0,r.lerp)(d,M,x),F=(0,r.lerp)(c,b,x);B.push([E,F,N/2,J,R]),v+=N}}return B}
},{"../../math.js":"cgU2","./transform.js":"FOrd"}],"xBgu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=d(require("./Instruction.js")),e=require("./TextBuilder.js"),i=require("../../has.js"),a=require("../../transform.js"),r=require("../../extent.js"),s=require("../canvas.js"),l=require("../../geom/flat/textpath.js"),n=require("../../array.js"),o=require("../../geom/flat/length.js"),h=require("../../geom/flat/transform.js");function d(t){return t&&t.__esModule?t:{default:t}}var u=(0,r.createEmpty)(),c=[],f=[],p=[],g=[];function m(t){return t[3].declutterBox}var _=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function v(t,i){return"start"!==i&&"end"!==i||_.test(t)||(i="start"===i?"left":"right"),e.TEXT_ALIGN[i]}var x=function(){function d(t,e,i,r,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderBuffer_=s,this.renderedTransform_=(0,a.create)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return d.prototype.createLabel=function(t,e,a,r){var l=t+e+a+r;if(this.labels_[l])return this.labels_[l];var n=r?this.strokeStates[r]:null,o=a?this.fillStates[a]:null,h=this.textStates[e],d=this.pixelRatio,u=[h.scale[0]*d,h.scale[1]*d],c=v(t,h.textAlign||s.defaultTextAlign),f=r&&n.lineWidth?n.lineWidth:0,p=t.split("\n"),g=p.length,m=[],_=(0,s.measureTextWidths)(h.font,p,m),x=(0,s.measureTextHeight)(h.font),S=_+f,T=[],y=(S+2)*u[0],C=(x*g+f)*u[1],b={width:y<0?Math.floor(y):Math.ceil(y),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:T};(1==u[0]&&1==u[1]||T.push("scale",u),T.push("font",h.font),r)&&(T.push("strokeStyle",n.strokeStyle),T.push("lineWidth",f),T.push("lineCap",n.lineCap),T.push("lineJoin",n.lineJoin),T.push("miterLimit",n.miterLimit),(i.WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(T.push("setLineDash",[n.lineDash]),T.push("lineDashOffset",n.lineDashOffset)));a&&T.push("fillStyle",o.fillStyle),T.push("textBaseline","middle"),T.push("textAlign","center");var L,k=.5-c,w=c*S+k*f;if(r)for(L=0;L<g;++L)T.push("strokeText",[p[L],w+k*m[L],.5*(f+x)+L*x]);if(a)for(L=0;L<g;++L)T.push("fillText",[p[L],w+k*m[L],.5*(f+x)+L*x]);return this.labels_[l]=b,b},d.prototype.replayTextBackground_=function(t,e,i,a,r,s,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,r),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())},d.prototype.calculateImageOrLabelDimensions_=function(t,e,i,s,l,n,o,h,d,m,_,v,x,S,T,y){var C,b=i-(o*=v[0]),L=s-(h*=v[1]),k=l+d>t?t-d:l,w=n+m>e?e-m:n,I=S[3]+k*v[0]+S[1],R=S[0]+w*v[1]+S[2],O=b-S[3],E=L-S[0];return(T||0!==_)&&(c[0]=O,g[0]=O,c[1]=E,f[1]=E,f[0]=O+I,p[0]=f[0],p[1]=E+R,g[1]=p[1]),0!==_?(C=(0,a.compose)((0,a.create)(),i,s,1,1,_,-i,-s),(0,a.apply)(C,c),(0,a.apply)(C,f),(0,a.apply)(C,p),(0,a.apply)(C,g),(0,r.createOrUpdate)(Math.min(c[0],f[0],p[0],g[0]),Math.min(c[1],f[1],p[1],g[1]),Math.max(c[0],f[0],p[0],g[0]),Math.max(c[1],f[1],p[1],g[1]),u)):(0,r.createOrUpdate)(Math.min(O,O+I),Math.min(E,E+R),Math.max(O,O+I),Math.max(E,E+R),u),x&&(b=Math.round(b),L=Math.round(L)),{drawImageX:b,drawImageY:L,drawImageW:k,drawImageH:w,originX:d,originY:m,declutterBox:{minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:y},canvasTransform:C,scale:v}},d.prototype.replayImageOrLabel_=function(t,e,i,a,r,l,n){var o=!(!l&&!n),h=a.declutterBox,d=t.canvas,u=n?n[2]*a.scale[0]/2:0;return h.minX-u<=d.width/e&&h.maxX+u>=0&&h.minY-u<=d.height/e&&h.maxY+u>=0&&(o&&this.replayTextBackground_(t,c,f,p,g,l,n),(0,s.drawImageOrLabel)(t,a.canvasTransform,r,i,a.originX,a.originY,a.drawImageW,a.drawImageH,a.drawImageX,a.drawImageY,a.scale)),!0},d.prototype.fill_=function(t){if(this.alignFill_){var e=(0,a.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},d.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},d.prototype.drawLabelWithPointPlacement_=function(t,i,a,r){var l=this.textStates[i],n=this.createLabel(t,i,r,a),o=this.strokeStates[a],h=this.pixelRatio,d=v(t,l.textAlign||s.defaultTextAlign),u=e.TEXT_ALIGN[l.textBaseline||s.defaultTextBaseline],c=o&&o.lineWidth?o.lineWidth:0;return{label:n,anchorX:d*(n.width/h-2*l.scale[0])+2*(.5-d)*c,anchorY:u*n.height/h+2*(.5-u)*c}},d.prototype.execute_=function(i,d,u,c,f,p,g,_){var v;this.pixelCoordinates_&&(0,n.equals)(u,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=(0,h.transform2D)(this.coordinates,0,this.coordinates.length,2,u,this.pixelCoordinates_),(0,a.setFromArray)(this.renderedTransform_,u));for(var x,S,T,y,C,b,L,k,w,I,R,O,E,M,D,A,B=0,W=c.length,P=0,Y=0,N=0,X=null,q=null,j=this.coordinateCache_,F=this.viewRotation_,G=Math.round(1e12*Math.atan2(-u[1],u[0]))/1e12,H={context:i,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},J=this.instructions!=c||this.overlaps?0:200;B<W;){var K=c[B];switch(K[0]){case t.default.BEGIN_GEOMETRY:E=K[1],A=K[3],E.getGeometry()?void 0===g||(0,r.intersects)(g,A.getExtent())?++B:B=K[2]+1:B=K[2];break;case t.default.BEGIN_PATH:Y>J&&(this.fill_(i),Y=0),N>J&&(i.stroke(),N=0),Y||N||(i.beginPath(),y=NaN,C=NaN),++B;break;case t.default.CIRCLE:var U=v[P=K[1]],V=v[P+1],z=v[P+2]-U,Q=v[P+3]-V,Z=Math.sqrt(z*z+Q*Q);i.moveTo(U+Z,V),i.arc(U,V,Z,0,2*Math.PI,!0),++B;break;case t.default.CLOSE_PATH:i.closePath(),++B;break;case t.default.CUSTOM:P=K[1],x=K[2];var $=K[3],tt=K[4],et=6==K.length?K[5]:void 0;H.geometry=$,H.feature=E,B in j||(j[B]=[]);var it=j[B];et?et(v,P,x,2,it):(it[0]=v[P],it[1]=v[P+1],it.length=2),tt(it,H),++B;break;case t.default.DRAW_IMAGE:P=K[1],x=K[2],k=K[3],S=K[4],T=K[5];var at=K[6],rt=K[7],st=K[8],lt=K[9],nt=K[10],ot=K[11],ht=K[12],dt=K[13],ut=K[14];if(!k&&K.length>=19){w=K[18],I=K[19],R=K[20],O=K[21];var ct=this.drawLabelWithPointPlacement_(w,I,R,O);k=ct.label,K[3]=k;var ft=K[22];S=(ct.anchorX-ft)*this.pixelRatio,K[4]=S;var pt=K[23];T=(ct.anchorY-pt)*this.pixelRatio,K[5]=T,at=k.height,K[6]=at,dt=k.width,K[13]=dt}var gt=void 0;K.length>24&&(gt=K[24]);var mt=void 0,_t=void 0,vt=void 0;K.length>16?(mt=K[15],_t=K[16],vt=K[17]):(mt=s.defaultPadding,_t=!1,vt=!1),nt&&G?ot+=F:nt||G||(ot-=F);for(var xt=0;P<x;P+=2)if(!(gt&&gt[xt++]<dt/this.pixelRatio)){var St=[i,d,k,Kt=this.calculateImageOrLabelDimensions_(k.width,k.height,v[P],v[P+1],dt,at,S,T,st,lt,ot,ht,f,mt,_t||vt,E),rt,_t?X:null,vt?q:null],Tt=void 0,yt=void 0;if(_&&ut){if(!ut[P]){ut[P]=St;continue}if(Tt=ut[P],delete ut[P],yt=m(Tt),_.collides(yt))continue}_&&_.collides(Kt.declutterBox)||(Tt&&(_&&_.insert(yt),this.replayImageOrLabel_.apply(this,Tt)),_&&_.insert(Kt.declutterBox),this.replayImageOrLabel_.apply(this,St))}++B;break;case t.default.DRAW_CHARS:var Ct=K[1],bt=K[2],Lt=K[3],kt=K[4];O=K[5];var wt=K[6],It=K[7],Rt=K[8];R=K[9];var Ot=K[10];w=K[11],I=K[12];var Et=[K[13],K[13]],Mt=this.textStates[I],Dt=Mt.font,At=[Mt.scale[0]*It,Mt.scale[1]*It],Bt=void 0;Dt in this.widths_?Bt=this.widths_[Dt]:(Bt={},this.widths_[Dt]=Bt);var Wt=(0,o.lineStringLength)(v,Ct,bt,2),Pt=Math.abs(At[0])*(0,s.measureAndCacheTextWidth)(Dt,w,Bt);if(kt||Pt<=Wt){var Yt=this.textStates[I].textAlign,Nt=(Wt-Pt)*e.TEXT_ALIGN[Yt],Xt=(0,l.drawTextOnPath)(v,Ct,bt,2,w,Nt,wt,Math.abs(At[0]),s.measureAndCacheTextWidth,Dt,Bt,G?0:this.viewRotation_);t:if(Xt){var qt=[],jt=void 0,Ft=void 0,Gt=void 0,Ht=void 0,Jt=void 0;if(R)for(jt=0,Ft=Xt.length;jt<Ft;++jt){Gt=(Jt=Xt[jt])[4],Ht=this.createLabel(Gt,I,"",R),S=Jt[2]+(At[0]<0?-Ot:Ot),T=Lt*Ht.height+2*(.5-Lt)*Ot*At[1]/At[0]-Rt;var Kt=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Jt[0],Jt[1],Ht.width,Ht.height,S,T,0,0,Jt[3],Et,!1,s.defaultPadding,!1,E);if(_&&_.collides(Kt.declutterBox))break t;qt.push([i,d,Ht,Kt,1,null,null])}if(O)for(jt=0,Ft=Xt.length;jt<Ft;++jt){Gt=(Jt=Xt[jt])[4],Ht=this.createLabel(Gt,I,O,""),S=Jt[2],T=Lt*Ht.height-Rt;Kt=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Jt[0],Jt[1],Ht.width,Ht.height,S,T,0,0,Jt[3],Et,!1,s.defaultPadding,!1,E);if(_&&_.collides(Kt.declutterBox))break t;qt.push([i,d,Ht,Kt,1,null,null])}_&&_.load(qt.map(m));for(var Ut=0,Vt=qt.length;Ut<Vt;++Ut)this.replayImageOrLabel_.apply(this,qt[Ut])}}++B;break;case t.default.END_GEOMETRY:if(void 0!==p){var zt=p(E=K[1],A);if(zt)return zt}++B;break;case t.default.FILL:J?Y++:this.fill_(i),++B;break;case t.default.MOVE_TO_LINE_TO:for(P=K[1],x=K[2],M=v[P],L=(D=v[P+1])+.5|0,(b=M+.5|0)===y&&L===C||(i.moveTo(M,D),y=b,C=L),P+=2;P<x;P+=2)b=(M=v[P])+.5|0,L=(D=v[P+1])+.5|0,P!=x-2&&b===y&&L===C||(i.lineTo(M,D),y=b,C=L);++B;break;case t.default.SET_FILL_STYLE:X=K,this.alignFill_=K[2],Y&&(this.fill_(i),Y=0,N&&(i.stroke(),N=0)),i.fillStyle=K[1],++B;break;case t.default.SET_STROKE_STYLE:q=K,N&&(i.stroke(),N=0),this.setStrokeStyle_(i,K),++B;break;case t.default.STROKE:J?N++:i.stroke(),++B;break;default:++B}}Y&&this.fill_(i),N&&i.stroke()},d.prototype.execute=function(t,e,i,a,r,s){this.viewRotation_=a,this.execute_(t,e,i,this.instructions,r,void 0,void 0,s)},d.prototype.executeHitDetection=function(t,e,i,a,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,a,r)},d}(),S=x;exports.default=S;
},{"./Instruction.js":"MRHt","./TextBuilder.js":"llfE","../../has.js":"ZGSM","../../transform.js":"ePpI","../../extent.js":"pbFF","../canvas.js":"s2Hb","../../geom/flat/textpath.js":"zlwb","../../array.js":"u3be","../../geom/flat/length.js":"bsYm","../../geom/flat/transform.js":"FOrd"}],"FMfm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPixelIndexArray=x,exports.default=void 0;var e=u(require("./BuilderType.js")),t=u(require("./Executor.js")),r=require("../../extent.js"),o=require("../../transform.js"),i=require("../../dom.js"),n=require("../../obj.js"),a=require("../../array.js"),s=require("../../geom/flat/transform.js");function u(e){return e&&e.__esModule?e:{default:e}}var f=[e.default.POLYGON,e.default.CIRCLE,e.default.LINE_STRING,e.default.IMAGE,e.default.TEXT,e.default.DEFAULT],h=function(){function u(e,t,r,i,n,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,o.create)(),this.createExecutors_(n)}return u.prototype.clip=function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()},u.prototype.createExecutors_=function(e){for(var r in e){var o=this.executorsByZIndex_[r];void 0===o&&(o={},this.executorsByZIndex_[r]=o);var i=e[r],n=[this.renderBuffer_||0,this.renderBuffer_||0];for(var a in i){var s=i[a];o[a]=new t.default(this.resolution_,this.pixelRatio_,this.overlaps_,s,n)}}},u.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],o=0,i=e.length;o<i;++o)if(e[o]in r)return!0;return!1},u.prototype.forEachFeatureAtCoordinate=function(t,n,s,u,h,c){var d=2*(u=Math.round(u))+1,l=(0,o.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/n,-1/n,-s,-t[0],-t[1]),v=!this.hitDetectionContext_;v&&(this.hitDetectionContext_=(0,i.createCanvasContext2D)(d,d));var p,_=this.hitDetectionContext_;_.canvas.width!==d||_.canvas.height!==d?(_.canvas.width=d,_.canvas.height=d):v||_.clearRect(0,0,d,d),void 0!==this.renderBuffer_&&(p=(0,r.createEmpty)(),(0,r.extendCoordinate)(p,t),(0,r.buffer)(p,n*(this.renderBuffer_+u),p));var y,m=x(u);function E(t,r){for(var o=_.getImageData(0,0,d,d).data,i=0,n=m.length;i<n;i++)if(o[m[i]]>0){if(!c||y!==e.default.IMAGE&&y!==e.default.TEXT||-1!==c.indexOf(t)){var a=(m[i]-3)/4,s=u-a%d,f=u-(a/d|0),x=h(t,r,s*s+f*f);if(x)return x}_.clearRect(0,0,d,d);break}}var g,I,B,C,T,b=Object.keys(this.executorsByZIndex_).map(Number);for(b.sort(a.numberSafeCompareFunction),g=b.length-1;g>=0;--g){var j=b[g].toString();for(B=this.executorsByZIndex_[j],I=f.length-1;I>=0;--I)if(void 0!==(C=B[y=f[I]])&&(T=C.executeHitDetection(_,l,s,E,p)))return T}},u.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],o=t[1],i=t[2],n=t[3],a=[r,o,r,n,i,n,i,o];return(0,s.transform2D)(a,0,8,2,e,a),a},u.prototype.isEmpty=function(){return(0,n.isEmpty)(this.executorsByZIndex_)},u.prototype.execute=function(e,t,r,o,i,n,s){var u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(a.numberSafeCompareFunction),this.maxExtent_&&(e.save(),this.clip(e,r));var h,c,x,d,l,v,p=n||f;for(s&&u.reverse(),h=0,c=u.length;h<c;++h){var _=u[h].toString();for(l=this.executorsByZIndex_[_],x=0,d=p.length;x<d;++x){void 0!==(v=l[p[x]])&&v.execute(e,t,r,o,i,s)}}this.maxExtent_&&e.restore()},u}(),c={};function x(e){if(void 0!==c[e])return c[e];for(var t=2*e+1,r=e*e,o=new Array(r+1),i=0;i<=e;++i)for(var n=0;n<=e;++n){var a=i*i+n*n;if(a>r)break;var s=o[a];s||(s=[],o[a]=s),s.push(4*((e+i)*t+(e+n))+3),i>0&&s.push(4*((e-i)*t+(e+n))+3),n>0&&(s.push(4*((e+i)*t+(e-n))+3),i>0&&s.push(4*((e-i)*t+(e-n))+3))}for(var u=[],f=(i=0,o.length);i<f;++i)o[i]&&u.push.apply(u,o[i]);return c[e]=u,u}var d=h;exports.default=d;
},{"./BuilderType.js":"PoZV","./Executor.js":"xBgu","../../extent.js":"pbFF","../../transform.js":"ePpI","../../dom.js":"N5LR","../../obj.js":"lPyT","../../array.js":"u3be","../../geom/flat/transform.js":"FOrd"}],"deZJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../../geom/GeometryType.js")),e=h(require("../VectorContext.js")),i=require("../../colorlike.js"),s=require("../../transform.js"),a=require("../canvas.js"),o=require("../../array.js"),r=require("../../extent.js"),n=require("../../geom/flat/transform.js"),l=require("../../geom/SimpleGeometry.js");function h(t){return t&&t.__esModule?t:{default:t}}var _=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),f=function(e){function h(t,i,a,o,r,n,l){var h=e.call(this)||this;return h.context_=t,h.pixelRatio_=i,h.extent_=a,h.transform_=o,h.viewRotation_=r,h.squaredTolerance_=n,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,s.create)(),h}return _(h,e),h.prototype.drawImages_=function(t,e,i,a){if(this.image_){var o=(0,n.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,h=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=h*this.imageOpacity_);var _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(var f=0,g=o.length;f<g;f+=2){var x=o[f]-this.imageAnchorX_,S=o[f+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=x+this.imageAnchorX_,d=S+this.imageAnchorY_;(0,s.compose)(l,m,d,1,1,_,-m,-d),r.setTransform.apply(r,l),r.translate(m,d),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,S,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=h)}},h.prototype.drawText_=function(t,e,i,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=(0,n.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);e<i;e+=a){var h=o[e]+this.textOffsetX_,_=o[e+1]+this.textOffsetY_;if(0!==l||1!=this.textScale_[0]||1!=this.textScale_[1]){var f=(0,s.compose)(this.tmpLocalTransform_,h,_,1,1,l,-h,-_);r.setTransform.apply(r,f),r.translate(h,_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&r.strokeText(this.text_,h,_),this.textFillState_&&r.fillText(this.text_,h,_)}}},h.prototype.moveToLineTo_=function(t,e,i,s,a){var o=this.context_,r=(0,n.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);var l=r.length;a&&(l-=2);for(var h=2;h<l;h+=2)o.lineTo(r[h],r[h+1]);return a&&o.closePath(),i},h.prototype.drawRings_=function(t,e,i,s){for(var a=0,o=i.length;a<o;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e},h.prototype.drawCircle=function(t){if((0,r.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,l.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],a=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},h.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},h.prototype.setTransform=function(t){this.transform_=t},h.prototype.drawGeometry=function(e){switch(e.getType()){case t.default.POINT:this.drawPoint(e);break;case t.default.LINE_STRING:this.drawLineString(e);break;case t.default.POLYGON:this.drawPolygon(e);break;case t.default.MULTI_POINT:this.drawMultiPoint(e);break;case t.default.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case t.default.MULTI_POLYGON:this.drawMultiPolygon(e);break;case t.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case t.default.CIRCLE:this.drawCircle(e)}},h.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,r.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},h.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])},h.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},h.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},h.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var s=t.getFlatMidpoint();this.drawText_(s,0,2,2)}}},h.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,r.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,s=t.getFlatCoordinates(),a=0,o=t.getEnds(),n=t.getStride();i.beginPath();for(var l=0,h=o.length;l<h;++l)a=this.moveToLineTo_(s,a,o[l],n,!1);i.stroke()}if(""!==this.text_){var _=t.getFlatMidpoints();this.drawText_(_,0,_.length,2)}}},h.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},h.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),s=0,a=t.getEndss(),o=t.getStride();e.beginPath();for(var n=0,l=a.length;n<l;++n){var h=a[n];s=this.drawRings_(i,s,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var _=t.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}},h.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},h.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&((0,o.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},h.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:a.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})},h.prototype.setFillStrokeStyle=function(t,e){if(t){var s=t.getColor();this.fillState_={fillStyle:(0,i.asColorLike)(s||a.defaultFillStyle)}}else this.fillState_=null;if(e){var o=e.getColor(),r=e.getLineCap(),n=e.getLineDash(),l=e.getLineDashOffset(),h=e.getLineJoin(),_=e.getWidth(),f=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:a.defaultLineCap,lineDash:n||a.defaultLineDash,lineDashOffset:l||a.defaultLineDashOffset,lineJoin:void 0!==h?h:a.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==_?_:a.defaultLineWidth),miterLimit:void 0!==f?f:a.defaultMiterLimit,strokeStyle:(0,i.asColorLike)(o||a.defaultStrokeStyle)}}else this.strokeState_=null},h.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),s=t.getImage(1),a=t.getOrigin(),o=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*o[0],this.pixelRatio_*o[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},h.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var s=e.getColor();this.textFillState_={fillStyle:(0,i.asColorLike)(s||a.defaultFillStyle)}}else this.textFillState_=null;var o=t.getStroke();if(o){var r=o.getColor(),n=o.getLineCap(),l=o.getLineDash(),h=o.getLineDashOffset(),_=o.getLineJoin(),f=o.getWidth(),g=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:a.defaultLineCap,lineDash:l||a.defaultLineDash,lineDashOffset:h||a.defaultLineDashOffset,lineJoin:void 0!==_?_:a.defaultLineJoin,lineWidth:void 0!==f?f:a.defaultLineWidth,miterLimit:void 0!==g?g:a.defaultMiterLimit,strokeStyle:(0,i.asColorLike)(r||a.defaultStrokeStyle)}}else this.textStrokeState_=null;var x=t.getFont(),S=t.getOffsetX(),m=t.getOffsetY(),d=t.getRotateWithView(),c=t.getRotation(),u=t.getScaleArray(),p=t.getText(),y=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:void 0!==x?x:a.defaultFont,textAlign:void 0!==y?y:a.defaultTextAlign,textBaseline:void 0!==T?T:a.defaultTextBaseline},this.text_=void 0!==p?p:"",this.textOffsetX_=void 0!==S?this.pixelRatio_*S:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""},h}(e.default),g=f;exports.default=g;
},{"../../geom/GeometryType.js":"qBtD","../VectorContext.js":"wszj","../../colorlike.js":"cfXT","../../transform.js":"ePpI","../canvas.js":"s2Hb","../../array.js":"u3be","../../extent.js":"pbFF","../../geom/flat/transform.js":"FOrd","../../geom/SimpleGeometry.js":"Ya1f"}],"qd9X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={FRACTION:"fraction",PIXELS:"pixels"};exports.default=e;
},{}],"KnGD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./events/Target.js")),e=r(require("./events/EventType.js")),o=require("./util.js");function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),u=function(t){function r(e,o,r,n){var u=t.call(this)||this;return u.extent=e,u.pixelRatio_=r,u.resolution=o,u.state=n,u}return n(r,t),r.prototype.changed=function(){this.dispatchEvent(e.default.CHANGE)},r.prototype.getExtent=function(){return this.extent},r.prototype.getImage=function(){return(0,o.abstract)()},r.prototype.getPixelRatio=function(){return this.pixelRatio_},r.prototype.getResolution=function(){return this.resolution},r.prototype.getState=function(){return this.state},r.prototype.load=function(){(0,o.abstract)()},r}(t.default),i=u;exports.default=i;
},{"./events/Target.js":"zWyV","./events/EventType.js":"lUmy","./util.js":"bmrL"}],"GllS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listenImage=l,exports.default=void 0;var t=o(require("./events/EventType.js")),e=o(require("./ImageBase.js")),n=o(require("./ImageState.js")),i=require("./has.js"),r=require("./extent.js"),s=require("./events.js");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=function(t){function e(e,i,r,s,o,a){var u=t.call(this,e,i,r,n.default.IDLE)||this;return u.src_=s,u.image_=new Image,null!==o&&(u.image_.crossOrigin=o),u.unlisten_=null,u.state=n.default.IDLE,u.imageLoadFunction_=a,u}return a(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=n.default.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=n.default.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=n.default.IDLE&&this.state!=n.default.ERROR||(this.state=n.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=l(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(e.default);function l(e,n,r){var o=e;if(o.src&&i.IMAGE_DECODE){var a=o.decode(),u=!0;return a.then(function(){u&&n()}).catch(function(t){u&&("EncodingError"===t.name&&"Invalid image type."===t.message?n():r())}),function(){u=!1}}var l=[(0,s.listenOnce)(o,t.default.LOAD,n),(0,s.listenOnce)(o,t.default.ERROR,r)];return function(){l.forEach(s.unlistenByKey)}}var c=u;exports.default=c;
},{"./events/EventType.js":"lUmy","./ImageBase.js":"KnGD","./ImageState.js":"TPVv","./has.js":"ZGSM","./extent.js":"pbFF","./events.js":"E9xa"}],"p2yO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=c,exports.default=void 0;var t=r(require("../events/Target.js")),e=r(require("../events/EventType.js")),i=r(require("../ImageState.js")),a=require("../color.js"),n=require("../dom.js"),s=require("./IconImageCache.js"),o=require("../Image.js");function r(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),_=null,l=function(t){function s(e,i,a,n,s,o){var r=t.call(this)||this;return r.hitDetectionImage_=null,r.image_=e||new Image,null!==n&&(r.image_.crossOrigin=n),r.canvas_={},r.color_=o,r.unlisten_=null,r.imageState_=s,r.size_=a,r.src_=i,r.tainted_,r}return h(s,t),s.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===i.default.LOADED){_||(_=(0,n.createCanvasContext2D)(1,1)),_.drawImage(this.image_,0,0);try{_.getImageData(0,0,1,1),this.tainted_=!1}catch(t){_=null,this.tainted_=!0}}return!0===this.tainted_},s.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(e.default.CHANGE)},s.prototype.handleImageError_=function(){this.imageState_=i.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},s.prototype.handleImageLoad_=function(){this.imageState_=i.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},s.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},s.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},s.prototype.getImageState=function(){return this.imageState_},s.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,n.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},s.prototype.getSize=function(){return this.size_},s.prototype.getSrc=function(){return this.src_},s.prototype.load=function(){if(this.imageState_==i.default.IDLE){this.imageState_=i.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,o.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},s.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=(0,a.asString)(this.color_),i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var n=i.getImageData(0,0,e.width,e.height),s=n.data,o=this.color_[0]/255,r=this.color_[1]/255,h=this.color_[2]/255,_=this.color_[3],l=0,c=s.length;l<c;l+=4)s[l]*=o,s[l+1]*=r,s[l+2]*=h,s[l+3]*=_;i.putImageData(n,0,0)}}},s.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},s}(t.default);function c(t,e,i,a,n,o){var r=s.shared.get(e,a,o);return r||(r=new l(t,e,i,a,n,o),s.shared.set(e,a,o,r)),r}var u=l;exports.default=u;
},{"../events/Target.js":"zWyV","../events/EventType.js":"lUmy","../ImageState.js":"TPVv","../color.js":"g5uZ","../dom.js":"N5LR","./IconImageCache.js":"n3wd","../Image.js":"GllS"}],"NUxy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../events/EventType.js")),i=h(require("./IconAnchorUnits.js")),e=h(require("./IconOrigin.js")),o=h(require("../ImageState.js")),r=h(require("./Image.js")),n=require("../color.js"),s=require("../asserts.js"),a=require("./IconImage.js"),c=require("../util.js");function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),u=function(r){function h(t){var h=this,l=t||{},u=void 0!==l.opacity?l.opacity:1,g=void 0!==l.rotation?l.rotation:0,f=void 0!==l.scale?l.scale:1,_=void 0!==l.rotateWithView&&l.rotateWithView;(h=r.call(this,{opacity:u,rotation:g,scale:f,displacement:void 0!==l.displacement?l.displacement:[0,0],rotateWithView:_})||this).anchor_=void 0!==l.anchor?l.anchor:[.5,.5],h.normalizedAnchor_=null,h.anchorOrigin_=void 0!==l.anchorOrigin?l.anchorOrigin:e.default.TOP_LEFT,h.anchorXUnits_=void 0!==l.anchorXUnits?l.anchorXUnits:i.default.FRACTION,h.anchorYUnits_=void 0!==l.anchorYUnits?l.anchorYUnits:i.default.FRACTION,h.crossOrigin_=void 0!==l.crossOrigin?l.crossOrigin:null;var d=void 0!==l.img?l.img:null,O=void 0!==l.imgSize?l.imgSize:null,p=l.src;(0,s.assert)(!(void 0!==p&&d),4),(0,s.assert)(!d||d&&O,5),void 0!==p&&0!==p.length||!d||(p=d.src||(0,c.getUid)(d)),(0,s.assert)(void 0!==p&&p.length>0,6);var I=void 0!==l.src?o.default.IDLE:o.default.LOADED;return h.color_=void 0!==l.color?(0,n.asArray)(l.color):null,h.iconImage_=(0,a.get)(d,p,O,h.crossOrigin_,I,h.color_),h.offset_=void 0!==l.offset?l.offset:[0,0],h.offsetOrigin_=void 0!==l.offsetOrigin?l.offsetOrigin:e.default.TOP_LEFT,h.origin_=null,h.size_=void 0!==l.size?l.size:null,h}return l(h,r),h.prototype.clone=function(){var t=this.getScale();return new h({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},h.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,o=this.getSize();if(this.anchorXUnits_==i.default.FRACTION||this.anchorYUnits_==i.default.FRACTION){if(!o)return null;t=this.anchor_.slice(),this.anchorXUnits_==i.default.FRACTION&&(t[0]*=o[0]),this.anchorYUnits_==i.default.FRACTION&&(t[1]*=o[1])}if(this.anchorOrigin_!=e.default.TOP_LEFT){if(!o)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=e.default.TOP_RIGHT&&this.anchorOrigin_!=e.default.BOTTOM_RIGHT||(t[0]=-t[0]+o[0]),this.anchorOrigin_!=e.default.BOTTOM_LEFT&&this.anchorOrigin_!=e.default.BOTTOM_RIGHT||(t[1]=-t[1]+o[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},h.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},h.prototype.getColor=function(){return this.color_},h.prototype.getImage=function(t){return this.iconImage_.getImage(t)},h.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},h.prototype.getImageSize=function(){return this.iconImage_.getSize()},h.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},h.prototype.getImageState=function(){return this.iconImage_.getImageState()},h.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},h.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,i=this.getDisplacement();if(this.offsetOrigin_!=e.default.TOP_LEFT){var o=this.getSize(),r=this.iconImage_.getSize();if(!o||!r)return null;t=t.slice(),this.offsetOrigin_!=e.default.TOP_RIGHT&&this.offsetOrigin_!=e.default.BOTTOM_RIGHT||(t[0]=r[0]-o[0]-t[0]),this.offsetOrigin_!=e.default.BOTTOM_LEFT&&this.offsetOrigin_!=e.default.BOTTOM_RIGHT||(t[1]=r[1]-o[1]-t[1])}return t[0]+=i[0],t[1]+=i[1],this.origin_=t,this.origin_},h.prototype.getSrc=function(){return this.iconImage_.getSrc()},h.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},h.prototype.listenImageChange=function(i){this.iconImage_.addEventListener(t.default.CHANGE,i)},h.prototype.load=function(){this.iconImage_.load()},h.prototype.unlistenImageChange=function(i){this.iconImage_.removeEventListener(t.default.CHANGE,i)},h}(r.default),g=u;exports.default=g;
},{"../events/EventType.js":"lUmy","./IconAnchorUnits.js":"qd9X","./IconOrigin.js":"kDDr","../ImageState.js":"TPVv","./Image.js":"yVAM","../color.js":"g5uZ","../asserts.js":"hgi2","./IconImage.js":"p2yO","../util.js":"bmrL"}],"AXF6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=i(require("./TextPlacement.js")),o=require("../size.js");function i(t){return t&&t.__esModule?t:{default:t}}var n="#333",r=function(){function i(i){var r=i||{};this.font_=r.font,this.rotation_=r.rotation,this.rotateWithView_=r.rotateWithView,this.scale_=r.scale,this.scaleArray_=(0,o.toSize)(void 0!==r.scale?r.scale:1),this.text_=r.text,this.textAlign_=r.textAlign,this.textBaseline_=r.textBaseline,this.fill_=void 0!==r.fill?r.fill:new t.default({color:n}),this.maxAngle_=void 0!==r.maxAngle?r.maxAngle:Math.PI/4,this.placement_=void 0!==r.placement?r.placement:e.default.POINT,this.overflow_=!!r.overflow,this.stroke_=void 0!==r.stroke?r.stroke:null,this.offsetX_=void 0!==r.offsetX?r.offsetX:0,this.offsetY_=void 0!==r.offsetY?r.offsetY:0,this.backgroundFill_=r.backgroundFill?r.backgroundFill:null,this.backgroundStroke_=r.backgroundStroke?r.backgroundStroke:null,this.padding_=void 0===r.padding?null:r.padding}return i.prototype.clone=function(){var t=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},i.prototype.getOverflow=function(){return this.overflow_},i.prototype.getFont=function(){return this.font_},i.prototype.getMaxAngle=function(){return this.maxAngle_},i.prototype.getPlacement=function(){return this.placement_},i.prototype.getOffsetX=function(){return this.offsetX_},i.prototype.getOffsetY=function(){return this.offsetY_},i.prototype.getFill=function(){return this.fill_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.getText=function(){return this.text_},i.prototype.getTextAlign=function(){return this.textAlign_},i.prototype.getTextBaseline=function(){return this.textBaseline_},i.prototype.getBackgroundFill=function(){return this.backgroundFill_},i.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},i.prototype.getPadding=function(){return this.padding_},i.prototype.setOverflow=function(t){this.overflow_=t},i.prototype.setFont=function(t){this.font_=t},i.prototype.setMaxAngle=function(t){this.maxAngle_=t},i.prototype.setOffsetX=function(t){this.offsetX_=t},i.prototype.setOffsetY=function(t){this.offsetY_=t},i.prototype.setPlacement=function(t){this.placement_=t},i.prototype.setRotateWithView=function(t){this.rotateWithView_=t},i.prototype.setFill=function(t){this.fill_=t},i.prototype.setRotation=function(t){this.rotation_=t},i.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,o.toSize)(void 0!==t?t:1)},i.prototype.setStroke=function(t){this.stroke_=t},i.prototype.setText=function(t){this.text_=t},i.prototype.setTextAlign=function(t){this.textAlign_=t},i.prototype.setTextBaseline=function(t){this.textBaseline_=t},i.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},i.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},i.prototype.setPadding=function(t){this.padding_=t},i}(),s=r;exports.default=s;
},{"./Fill.js":"wPtA","./TextPlacement.js":"hi8c","../size.js":"XzjU"}],"RO46":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"j2Vo","./style/Fill.js":"wPtA","./style/Icon.js":"NUxy","./style/IconImage.js":"p2yO","./style/Image.js":"yVAM","./style/RegularShape.js":"sVMX","./style/Stroke.js":"v50a","./style/Style.js":"ERCw","./style/Text.js":"AXF6"}],"mHP4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHitDetectionImageData=s,exports.hitDetect=g;var e=l(require("./Immediate.js")),t=l(require("../../geom/GeometryType.js")),r=l(require("../../style/IconAnchorUnits.js")),a=require("../../style.js"),i=require("../../dom.js"),n=require("../../extent.js"),o=require("../../array.js");function l(e){return e&&e.__esModule?e:{default:e}}function s(l,s,g,u,c,h,f){var d=l[0]/2,v=l[1]/2,m=(0,i.createCanvasContext2D)(d,v);m.imageSmoothingEnabled=!1;for(var y=m.canvas,I=new e.default(m,.5,c,null,f),p=g.length,S=Math.floor(16777215/p),w={},x=1;x<=p;++x){var C=g[x-1],j=C.getStyleFunction()||u;if(u){var q=j(C,h);if(q){Array.isArray(q)||(q=[q]);for(var E="#"+("000000"+(x*S).toString(16)).slice(-6),M=0,O=q.length;M<O;++M){var b=q[M],D=b.clone(),N=D.getFill();N&&N.setColor(E);var T=D.getStroke();T&&T.setColor(E),D.setText(void 0);var G=b.getImage();if(G){var L=G.getImageSize();if(!L)continue;var P=document.createElement("canvas");P.width=L[0],P.height=L[1];var R=P.getContext("2d",{alpha:!1});R.fillStyle=E;var _=R.canvas;R.fillRect(0,0,_.width,_.height);var z=L?L[0]:_.width,A=L?L[1]:_.height;(0,i.createCanvasContext2D)(z,A).drawImage(_,0,0),D.setImage(new a.Icon({img:_,imgSize:L,anchor:G.getAnchor(),anchorXUnits:r.default.PIXELS,anchorYUnits:r.default.PIXELS,offset:G.getOrigin(),size:G.getSize(),opacity:G.getOpacity(),scale:G.getScale(),rotation:G.getRotation(),rotateWithView:G.getRotateWithView()}))}var F=Number(D.getZIndex());(V=w[F])||(V={},w[F]=V,V[t.default.POLYGON]=[],V[t.default.CIRCLE]=[],V[t.default.LINE_STRING]=[],V[t.default.POINT]=[]);var U=D.getGeometryFunction()(C);U&&(0,n.intersects)(c,U.getExtent())&&V[U.getType().replace("Multi","")].push(U,D)}}}}for(var X=Object.keys(w).map(Number).sort(o.numberSafeCompareFunction),k=(x=0,X.length);x<k;++x){var V=w[X[x]];for(var W in V){var Y=V[W];for(M=0,O=Y.length;M<O;M+=2){I.setStyle(Y[M+1]);for(var H=0,Z=s.length;H<Z;++H)I.setTransform(s[H]),I.drawGeometry(Y[M])}}}return m.getImageData(0,0,y.width,y.height)}function g(e,t,r){var a=[];if(r){var i=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*r.width),n=r.data[i],o=r.data[i+1],l=r.data[i+2]+256*(o+256*n),s=Math.floor(16777215/t.length);l&&l%s==0&&a.push(t[l/s-1])}return a}
},{"./Immediate.js":"deZJ","../../geom/GeometryType.js":"qBtD","../../style/IconAnchorUnits.js":"qd9X","../../style.js":"RO46","../../dom.js":"N5LR","../../extent.js":"pbFF","../../array.js":"u3be"}],"y0oq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=n,exports.getSquaredTolerance=d,exports.getTolerance=u,exports.renderFeature=o;var e=l(require("../render/canvas/BuilderType.js")),t=l(require("../geom/GeometryType.js")),r=l(require("../ImageState.js")),a=require("../util.js");function l(e){return e&&e.__esModule?e:{default:e}}var g=.5,i={Point:y,LineString:v,Polygon:m,MultiPoint:c,MultiLineString:I,MultiPolygon:S,GeometryCollection:s,Circle:f};function n(e,t){return parseInt((0,a.getUid)(e),10)-parseInt((0,a.getUid)(t),10)}function d(e,t){var r=u(e,t);return r*r}function u(e,t){return g*e/t}function f(t,r,a,l,g){var i=a.getFill(),n=a.getStroke();if(i||n){var d=t.getBuilder(a.getZIndex(),e.default.CIRCLE);d.setFillStrokeStyle(i,n),d.drawCircle(r,l)}var u=a.getText();if(u&&u.getText()){var f=(g||t).getBuilder(a.getZIndex(),e.default.TEXT);f.setTextStyle(u),f.drawText(r,l)}}function o(e,t,a,l,g,i,n){var d=!1,u=a.getImage();if(u){var f=u.getImageState();f==r.default.LOADED||f==r.default.ERROR?u.unlistenImageChange(g):(f==r.default.IDLE&&u.load(),f=u.getImageState(),u.listenImageChange(g),d=!0)}return T(e,t,a,l,i,n),d}function T(e,t,r,a,l,g){var n=r.getGeometryFunction()(t);if(n){var d=n.simplifyTransformed(a,l);if(r.getRenderer())x(e,d,r,t);else(0,i[d.getType()])(e,d,r,t,g)}}function x(r,a,l,g){if(a.getType()!=t.default.GEOMETRY_COLLECTION)r.getBuilder(l.getZIndex(),e.default.DEFAULT).drawCustom(a,g,l.getRenderer());else for(var i=a.getGeometries(),n=0,d=i.length;n<d;++n)x(r,i[n],l,g)}function s(e,t,r,a,l){var g,n,d=t.getGeometriesArray();for(g=0,n=d.length;g<n;++g){(0,i[d[g].getType()])(e,d[g],r,a,l)}}function v(t,r,a,l,g){var i=a.getStroke();if(i){var n=t.getBuilder(a.getZIndex(),e.default.LINE_STRING);n.setFillStrokeStyle(null,i),n.drawLineString(r,l)}var d=a.getText();if(d&&d.getText()){var u=(g||t).getBuilder(a.getZIndex(),e.default.TEXT);u.setTextStyle(d),u.drawText(r,l)}}function I(t,r,a,l,g){var i=a.getStroke();if(i){var n=t.getBuilder(a.getZIndex(),e.default.LINE_STRING);n.setFillStrokeStyle(null,i),n.drawMultiLineString(r,l)}var d=a.getText();if(d&&d.getText()){var u=(g||t).getBuilder(a.getZIndex(),e.default.TEXT);u.setTextStyle(d),u.drawText(r,l)}}function S(t,r,a,l,g){var i=a.getFill(),n=a.getStroke();if(n||i){var d=t.getBuilder(a.getZIndex(),e.default.POLYGON);d.setFillStrokeStyle(i,n),d.drawMultiPolygon(r,l)}var u=a.getText();if(u&&u.getText()){var f=(g||t).getBuilder(a.getZIndex(),e.default.TEXT);f.setTextStyle(u),f.drawText(r,l)}}function y(t,a,l,g,i){var n,d=l.getImage(),u=l.getText();if(i&&(t=i,n=d&&u&&u.getText()?{}:void 0),d){if(d.getImageState()!=r.default.LOADED)return;var f=t.getBuilder(l.getZIndex(),e.default.IMAGE);f.setImageStyle(d,n),f.drawPoint(a,g)}if(u&&u.getText()){var o=t.getBuilder(l.getZIndex(),e.default.TEXT);o.setTextStyle(u,n),o.drawText(a,g)}}function c(t,a,l,g,i){var n,d=l.getImage(),u=l.getText();if(i&&(t=i,n=d&&u&&u.getText()?{}:void 0),d){if(d.getImageState()!=r.default.LOADED)return;var f=t.getBuilder(l.getZIndex(),e.default.IMAGE);f.setImageStyle(d,n),f.drawMultiPoint(a,g)}if(u&&u.getText()){var o=(i||t).getBuilder(l.getZIndex(),e.default.TEXT);o.setTextStyle(u,n),o.drawText(a,g)}}function m(t,r,a,l,g){var i=a.getFill(),n=a.getStroke();if(i||n){var d=t.getBuilder(a.getZIndex(),e.default.POLYGON);d.setFillStrokeStyle(i,n),d.drawPolygon(r,l)}var u=a.getText();if(u&&u.getText()){var f=(g||t).getBuilder(a.getZIndex(),e.default.TEXT);f.setTextStyle(u),f.drawText(r,l)}}
},{"../render/canvas/BuilderType.js":"PoZV","../geom/GeometryType.js":"qBtD","../ImageState.js":"TPVv","../util.js":"bmrL"}],"VJOV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../../render/canvas/BuilderGroup.js")),t=h(require("./Layer.js")),r=h(require("../../render/canvas/ExecutorGroup.js")),n=h(require("../../ViewHint.js")),i=require("../../transform.js"),a=require("../../extent.js"),o=require("../../render/canvas/hitdetect.js"),s=require("../vector.js"),u=require("../../proj.js"),d=require("../../util.js"),l=require("../../coordinate.js");function h(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(t){function h(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=(0,a.createEmpty)(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r}return c(h,t),h.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},h.prototype.renderWorlds=function(e,t,r){var i=t.extent,o=t.viewState,s=o.center,u=o.resolution,d=o.projection,l=o.rotation,h=d.getExtent(),c=this.getLayer().getSource(),p=t.pixelRatio,f=t.viewHints,g=!(f[n.default.ANIMATING]||f[n.default.INTERACTING]),y=this.context,_=Math.round(t.size[0]*p),v=Math.round(t.size[1]*p),x=c.getWrapX()&&d.canWrapX(),m=x?(0,a.getWidth)(h):null,R=x?Math.ceil((i[2]-h[2])/m)+1:1,E=x?Math.floor((i[0]-h[0])/m):0;do{var I=this.getRenderTransform(s,u,l,p,_,v,E*m);e.execute(y,1,I,l,g,void 0,r)}while(++E<R)},h.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree)},h.prototype.renderFrame=function(e,t){var r=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];(0,i.makeScale)(this.pixelTransform,1/r,1/r),(0,i.makeInverse)(this.inversePixelTransform,this.pixelTransform);var o=(0,i.toString)(this.pixelTransform);this.useContainer(t,o,n.opacity);var s=this.context,d=s.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!h||h.isEmpty()))return!this.containerReused&&d.width>0&&(d.width=0),this.container;var c=Math.round(e.size[0]*r),p=Math.round(e.size[1]*r);d.width!=c||d.height!=p?(d.width=c,d.height=p,d.style.transform!==o&&(d.style.transform=o)):this.containerReused||s.clearRect(0,0,c,p),this.preRender(s,e);var f=e.viewState,g=f.projection,y=!1;if(n.extent&&this.clipping){var _=(0,u.fromUserExtent)(n.extent,g);(y=!(0,a.containsExtent)(_,e.extent)&&(0,a.intersects)(_,e.extent))&&this.clipUnrotated(s,e,_)}this.renderWorlds(l,e),y&&s.restore(),this.postRender(s,e);var v=n.opacity,x=this.container;return v!==parseFloat(x.style.opacity)&&(x.style.opacity=1===v?"":String(v)),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},h.prototype.getFeatures=function(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];(0,i.apply)(this.pixelTransform,r);var n=this.renderedCenter_,s=this.renderedResolution_,u=this.renderedRotation_,d=this.renderedProjection_,l=this.renderedExtent_,h=this.getLayer(),c=[],p=r[0]/2,f=r[1]/2;c.push(this.getRenderTransform(n,s,u,.5,p,f,0).slice());var g=h.getSource(),y=d.getExtent();if(g.getWrapX()&&d.canWrapX()&&!(0,a.containsExtent)(y,l)){for(var _=l[0],v=(0,a.getWidth)(y),x=0,m=void 0;_<y[0];)m=v*--x,c.push(this.getRenderTransform(n,s,u,.5,p,f,m).slice()),_+=v;for(x=0,_=l[2];_>y[2];)m=v*++x,c.push(this.getRenderTransform(n,s,u,.5,p,f,m).slice()),_-=v}this.hitDetectionImageData_=(0,o.createHitDetectionImageData)(r,c,this.renderedFeatures_,h.getStyleFunction(),l,s,u)}t((0,o.hitDetect)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},h.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,i){var a=this;if(this.replayGroup_){var o,s=t.viewState.resolution,u=t.viewState.rotation,l=this.getLayer(),h={},c=function(e,t,r){var a=(0,d.getUid)(e),o=h[a];if(o){if(!0!==o&&r<o.distanceSq){if(0===r)return h[a]=!0,i.splice(i.lastIndexOf(o),1),n(e,l,t);o.geometry=t,o.distanceSq=r}}else{if(0===r)return h[a]=!0,n(e,l,t);i.push(h[a]={feature:e,layer:l,geometry:t,distanceSq:r,callback:n})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(function(n){return o=n.forEachFeatureAtCoordinate(e,s,u,r,c,n===a.declutterExecutorGroup?t.declutterTree.all().map(function(e){return e.value}):null)}),o}},h.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},h.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},h.prototype.prepareFrame=function(t){var i=this.getLayer(),o=i.getSource();if(!o)return!1;var d=t.viewHints[n.default.ANIMATING],h=t.viewHints[n.default.INTERACTING],c=i.getUpdateWhileAnimating(),p=i.getUpdateWhileInteracting();if(!this.dirty_&&!c&&d||!p&&h)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var f=t.extent,g=t.viewState,y=g.projection,_=g.resolution,v=t.pixelRatio,x=i.getRevision(),m=i.getRenderBuffer(),R=i.getRenderOrder();void 0===R&&(R=s.defaultOrder);var E=g.center.slice(),I=(0,a.buffer)(f,m*_),j=[I.slice()],w=y.getExtent();if(o.getWrapX()&&y.canWrapX()&&!(0,a.containsExtent)(w,t.extent)){var G=(0,a.getWidth)(w),S=Math.max((0,a.getWidth)(I)/2,G);I[0]=w[0]-S,I[2]=w[2]+S,(0,l.wrapX)(E,y);var F=(0,a.wrapX)(j[0],y);F[0]<w[0]&&F[2]<w[2]?j.push([F[0]+G,F[1],F[2]+G,F[3]]):F[0]>w[0]&&F[2]>w[2]&&j.push([F[0]-G,F[1],F[2]-G,F[3]])}if(!this.dirty_&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==R&&(0,a.containsExtent)(this.renderedExtent_,I))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var T,C=new e.default((0,s.getTolerance)(_,v),I,_,v);this.getLayer().getDeclutter()&&(T=new e.default((0,s.getTolerance)(_,v),I,_,v));var O,D=(0,u.getUserProjection)();if(D){for(var q=0,W=j.length;q<W;++q)o.loadFeatures((0,u.toUserExtent)(j[q],y),_,D);O=(0,u.getTransformFromProjections)(D,y)}else for(q=0,W=j.length;q<W;++q)o.loadFeatures(j[q],_,y);var b=(0,s.getSquaredTolerance)(_,v),A=function(e){var t,r=e.getStyleFunction()||i.getStyleFunction();if(r&&(t=r(e,_)),t){var n=this.renderFeature(e,b,t,C,O,T);this.dirty_=this.dirty_||n}}.bind(this),M=(0,u.toUserExtent)(I,y),N=o.getFeaturesInExtent(M);R&&N.sort(R);for(q=0,W=N.length;q<W;++q)A(N[q]);this.renderedFeatures_=N;var P=C.finish(),H=new r.default(I,_,v,o.getOverlaps(),P,i.getRenderBuffer());return T&&(this.declutterExecutorGroup=new r.default(I,_,v,o.getOverlaps(),T.finish(),i.getRenderBuffer())),this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=R,this.renderedExtent_=I,this.renderedCenter_=E,this.renderedProjection_=y,this.replayGroup_=H,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},h.prototype.renderFeature=function(e,t,r,n,i,a){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var u=0,d=r.length;u<d;++u)o=(0,s.renderFeature)(n,e,r[u],t,this.boundHandleStyleImageChange_,i,a)||o;else o=(0,s.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i,a);return o},h}(t.default),f=p;exports.default=f;
},{"../../render/canvas/BuilderGroup.js":"biGG","./Layer.js":"wBoL","../../render/canvas/ExecutorGroup.js":"FMfm","../../ViewHint.js":"ht2c","../../transform.js":"ePpI","../../extent.js":"pbFF","../../render/canvas/hitdetect.js":"mHP4","../vector.js":"y0oq","../../proj.js":"bkYg","../../util.js":"bmrL","../../coordinate.js":"uZ8Y"}],"BGzd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function r(e){return t.call(this,e)||this}return o(r,t),r.prototype.createRenderer=function(){return new e.default(this)},r}(t.default),u=n;exports.default=u;
},{"./BaseVector.js":"NMOS","../renderer/canvas/VectorLayer.js":"VJOV"}],"y5YV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("rbush")),e=require("../extent.js"),r=require("../util.js"),i=require("../obj.js");function n(t){return t&&t.__esModule?t:{default:t}}var o=function(){function n(e){this.rbush_=new t.default(e),this.items_={}}return n.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,r.getUid)(e)]=i},n.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var s=t[n],u=e[n],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[n]=a,this.items_[(0,r.getUid)(u)]=a}this.rbush_.load(i)},n.prototype.remove=function(t){var e=(0,r.getUid)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},n.prototype.update=function(t,i){var n=this.items_[(0,r.getUid)(i)],o=[n.minX,n.minY,n.maxX,n.maxY];(0,e.equals)(o,t)||(this.remove(i),this.insert(t,i))},n.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},n.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},n.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},n.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},n.prototype.forEach_=function(t,e){for(var r,i=0,n=t.length;i<n;i++)if(r=e(t[i]))return r;return r},n.prototype.isEmpty=function(){return(0,i.isEmpty)(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(t){var r=this.rbush_.toJSON();return(0,e.createOrUpdate)(r.minX,r.minY,r.maxX,r.maxY,t)},n.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},n}(),s=o;exports.default=s;
},{"rbush":"HLkW","../extent.js":"pbFF","../util.js":"bmrL","../obj.js":"lPyT"}],"IT41":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../Object.js")),o=n(require("./State.js")),r=require("../util.js"),e=require("../proj.js");function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(o,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(o,r)};return function(o,r){function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),u=function(t){function n(r){var n=t.call(this)||this;return n.projection_=(0,e.get)(r.projection),n.attributions_=s(r.attributions),n.attributionsCollapsible_=void 0===r.attributionsCollapsible||r.attributionsCollapsible,n.loading=!1,n.state_=void 0!==r.state?r.state:o.default.READY,n.wrapX_=void 0!==r.wrapX&&r.wrapX,n}return i(n,t),n.prototype.getAttributions=function(){return this.attributions_},n.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},n.prototype.getProjection=function(){return this.projection_},n.prototype.getResolutions=function(){return(0,r.abstract)()},n.prototype.getState=function(){return this.state_},n.prototype.getWrapX=function(){return this.wrapX_},n.prototype.getContextOptions=function(){},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.attributions_=s(t),this.changed()},n.prototype.setState=function(t){this.state_=t,this.changed()},n}(t.default);function s(t){return t?Array.isArray(t)?function(o){return t}:"function"==typeof t?t:function(o){return[t]}:null}var a=u;exports.default=a;
},{"../Object.js":"YrNp","./State.js":"r4JV","../util.js":"bmrL","../proj.js":"bkYg"}],"OVHJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};exports.default=e;
},{}],"vavr":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function r(e){return function(t,r){var n=e.getZForResolution(r),o=e.getTileRangeForExtentAndZ(t,n),u=[],i=[n,0,0];for(i[1]=o.minX;i[1]<=o.maxX;++i[1])for(i[2]=o.minY;i[2]<=o.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=r;
},{}],"zAQH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=s,exports.xhr=o,exports.setWithCredentials=a;var e=r(require("./format/FormatType.js")),t=require("./functions.js");function r(e){return e&&e.__esModule?e:{default:e}}var n=!1;function s(t,r,s,o,a,u,i){var f=new XMLHttpRequest;f.open("GET","function"==typeof t?t(s,o,a):t,!0),r.getType()==e.default.ARRAY_BUFFER&&(f.responseType="arraybuffer"),f.withCredentials=n,f.onload=function(t){if(!f.status||f.status>=200&&f.status<300){var n=r.getType(),o=void 0;n==e.default.JSON||n==e.default.TEXT?o=f.responseText:n==e.default.XML?(o=f.responseXML)||(o=(new DOMParser).parseFromString(f.responseText,"application/xml")):n==e.default.ARRAY_BUFFER&&(o=f.response),o?u(r.readFeatures(o,{extent:s,featureProjection:a}),r.readProjection(o)):i()}else i()},f.onerror=i,f.send()}function o(e,r){return function(n,o,a,u,i){var f=this;s(e,r,n,o,a,function(e,t){void 0!==u&&u(e),f.addFeatures(e)},i||t.VOID)}}function a(e){n=e}
},{"./format/FormatType.js":"xICm","./functions.js":"caQH"}],"s9D1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=y(require("../Collection.js")),t=y(require("../CollectionEventType.js")),r=y(require("../events/Event.js")),n=y(require("../events/EventType.js")),i=y(require("../ObjectEventType.js")),o=y(require("../structs/RBush.js")),s=y(require("./Source.js")),a=y(require("./State.js")),u=y(require("./VectorEventType.js")),d=require("../functions.js"),h=require("../loadingstrategy.js"),l=require("../asserts.js"),f=require("../extent.js"),c=require("../array.js"),_=require("../util.js"),p=require("../obj.js"),v=require("../events.js"),E=require("../featureloader.js");function y(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.feature=r,i.features=n,i}return g(t,e),t}(r.default);exports.VectorSourceEvent=F;var x=function(r){function s(t){var n=this,i=t||{};(n=r.call(this,{attributions:i.attributions,projection:void 0,state:a.default.READY,wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=d.VOID,n.format_=i.format,n.overlaps_=void 0===i.overlaps||i.overlaps,n.url_=i.url,void 0!==i.loader?n.loader_=i.loader:void 0!==n.url_&&((0,l.assert)(n.format_,7),n.loader_=(0,E.xhr)(n.url_,n.format_)),n.strategy_=void 0!==i.strategy?i.strategy:h.all;var s,u,f=void 0===i.useSpatialIndex||i.useSpatialIndex;return n.featuresRtree_=f?new o.default:null,n.loadedExtentsRtree_=new o.default,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(i.features)?u=i.features:i.features&&(u=(s=i.features).getArray()),f||void 0!==s||(s=new e.default(u)),void 0!==u&&n.addFeaturesInternal(u),void 0!==s&&n.bindFeaturesCollection_(s),n}return g(s,r),s.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},s.prototype.addFeatureInternal=function(e){var t=(0,_.getUid)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new F(u.default.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},s.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[(0,v.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this),(0,v.listen)(t,i.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},s.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,l.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},s.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},s.prototype.addFeaturesInternal=function(e){for(var t=[],r=[],n=[],i=0,o=e.length;i<o;i++){var s=e[i],a=(0,_.getUid)(s);this.addToIndex_(a,s)&&r.push(s)}i=0;for(var d=r.length;i<d;i++){s=r[i],a=(0,_.getUid)(s);this.setupChangeEvents_(a,s);var h=s.getGeometry();if(h){var l=h.getExtent();t.push(l),n.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(t,n);i=0;for(var f=r.length;i<f;i++)this.dispatchEvent(new F(u.default.ADDFEATURE,r[i]))},s.prototype.bindFeaturesCollection_=function(e){var r=!1;this.addEventListener(u.default.ADDFEATURE,function(t){r||(r=!0,e.push(t.feature),r=!1)}),this.addEventListener(u.default.REMOVEFEATURE,function(t){r||(r=!0,e.remove(t.feature),r=!1)}),e.addEventListener(t.default.ADD,function(e){r||(r=!0,this.addFeature(e.element),r=!1)}.bind(this)),e.addEventListener(t.default.REMOVE,function(e){r||(r=!0,this.removeFeature(e.element),r=!1)}.bind(this)),this.featuresCollection_=e},s.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(v.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new F(u.default.CLEAR);this.dispatchEvent(n),this.changed()},s.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},s.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},s.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},s.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},s.prototype.getFeaturesCollection=function(){return this.featuresCollection_},s.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,p.isEmpty)(this.nullGeometryFeatures_)||(0,c.extend)(e,(0,p.getValues)(this.nullGeometryFeatures_))),e},s.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},s.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},s.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],i=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||d.TRUE;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),d=s;if((s=t.closestPointXY(r,n,o,s))<d){i=e;var h=Math.sqrt(s);a[0]=r-h,a[1]=n-h,a[2]=r+h,a[3]=n+h}}}),i},s.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},s.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},s.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},s.prototype.getFormat=function(){return this.format_},s.prototype.getOverlaps=function(){return this.overlaps_},s.prototype.getUrl=function(){return this.url_},s.prototype.handleFeatureChange_=function(e){var t=e.target,r=(0,_.getUid)(t),n=t.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var o=t.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new F(u.default.CHANGEFEATURE,t))},s.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,_.getUid)(e)in this.uidIndex_},s.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,p.isEmpty)(this.nullGeometryFeatures_)},s.prototype.loadFeatures=function(e,t,r){var n=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(var o=function(e,o){var a=i[e];n.forEachInExtent(a,function(e){return(0,f.containsExtent)(e.extent,a)})||(s.dispatchEvent(new F(u.default.FEATURESLOADSTART)),s.loader_.call(s,a,t,r,function(e){this.dispatchEvent(new F(u.default.FEATURESLOADEND,void 0,e))}.bind(s),function(){this.dispatchEvent(new F(u.default.FEATURESLOADERROR))}.bind(s)),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==d.VOID)},s=this,a=0,h=i.length;a<h;++a)o(a)},s.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},s.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,f.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)},s.prototype.removeFeature=function(e){var t=(0,_.getUid)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},s.prototype.removeFeatureInternal=function(e){var t=(0,_.getUid)(e);this.featureChangeKeys_[t].forEach(v.unlistenByKey),delete this.featureChangeKeys_[t];var r=e.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new F(u.default.REMOVEFEATURE,e))},s.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},s.prototype.setLoader=function(e){this.loader_=e},s.prototype.setUrl=function(e){(0,l.assert)(this.format_,7),this.setLoader((0,E.xhr)(e,this.format_))},s}(s.default),I=x;exports.default=I;
},{"../Collection.js":"UC92","../CollectionEventType.js":"gqQq","../events/Event.js":"aj10","../events/EventType.js":"lUmy","../ObjectEventType.js":"rU8L","../structs/RBush.js":"y5YV","./Source.js":"IT41","./State.js":"r4JV","./VectorEventType.js":"OVHJ","../functions.js":"caQH","../loadingstrategy.js":"vavr","../asserts.js":"hgi2","../extent.js":"pbFF","../array.js":"u3be","../util.js":"bmrL","../obj.js":"lPyT","../events.js":"E9xa","../featureloader.js":"zAQH"}],"rTwf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=F,exports.createBox=j,exports.default=exports.DrawEvent=void 0;var e=L(require("../geom/Circle.js")),t=L(require("../events/Event.js")),i=L(require("../events/EventType.js")),o=L(require("../Feature.js")),s=L(require("../geom/GeometryType.js")),r=L(require("./Property.js")),n=L(require("../geom/LineString.js")),a=L(require("../MapBrowserEvent.js")),h=L(require("../MapBrowserEventType.js")),d=L(require("../geom/MultiLineString.js")),u=L(require("../geom/MultiPoint.js")),_=L(require("../geom/MultiPolygon.js")),c=L(require("../geom/Point.js")),l=L(require("./Pointer.js")),f=O(require("../geom/Polygon.js")),p=L(require("../layer/Vector.js")),g=L(require("../source/Vector.js")),y=require("../functions.js"),m=require("../events/condition.js"),C=require("../extent.js"),v=require("../style/Style.js"),k=require("../proj.js"),P=require("../Object.js"),T=require("../coordinate.js");function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(i,s,r):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function L(e){return e&&e.__esModule?e:{default:e}}var N=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),E={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},D={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},I=function(e){function t(t,i){var o=e.call(this,t)||this;return o.feature=i,o}return N(t,e),t}(t.default);exports.DrawEvent=I;var G=function(t){function l(i){var o=this,s=i;s.stopDown||(s.stopDown=y.FALSE),(o=t.call(this,s)||this).shouldHandle_=!1,o.downPx_=null,o.downTimeout_,o.lastDragTime_,o.pointerType_,o.freehand_=!1,o.source_=i.source?i.source:null,o.features_=i.features?i.features:null,o.snapTolerance_=i.snapTolerance?i.snapTolerance:12,o.type_=i.type,o.mode_=M(o.type_),o.stopClick_=!!i.stopClick,o.minPoints_=i.minPoints?i.minPoints:o.mode_===E.POLYGON?3:2,o.maxPoints_=o.mode_===E.CIRCLE?2:i.maxPoints?i.maxPoints:1/0,o.finishCondition_=i.finishCondition?i.finishCondition:y.TRUE;var a=i.geometryFunction;if(!a){var h,d=o.mode_;if(d===E.CIRCLE)a=function(t,i,o){var s=i||new e.default([NaN,NaN]),r=(0,k.fromUserCoordinate)(t[0],o),n=(0,T.squaredDistance)(r,(0,k.fromUserCoordinate)(t[t.length-1],o));s.setCenterAndRadius(r,Math.sqrt(n));var a=(0,k.getUserProjection)();return a&&s.transform(o,a),s};else d===E.POINT?h=c.default:d===E.LINE_STRING?h=n.default:d===E.POLYGON&&(h=f.default),a=function(e,t,i){return t?d===E.POLYGON?e[0].length?t.setCoordinates([e[0].concat([e[0][0]])]):t.setCoordinates([]):t.setCoordinates(e):t=new h(e),t}}return o.geometryFunction_=a,o.dragVertexDelay_=void 0!==i.dragVertexDelay?i.dragVertexDelay:500,o.finishCoordinate_=null,o.sketchFeature_=null,o.sketchPoint_=null,o.sketchCoords_=null,o.sketchLine_=null,o.sketchLineCoords_=null,o.squaredClickTolerance_=i.clickTolerance?i.clickTolerance*i.clickTolerance:36,o.overlay_=new p.default({source:new g.default({useSpatialIndex:!1,wrapX:!!i.wrapX&&i.wrapX}),style:i.style?i.style:R(),updateWhileInteracting:!0}),o.geometryName_=i.geometryName,o.condition_=i.condition?i.condition:m.noModifierKeys,o.freehandCondition_,i.freehand?o.freehandCondition_=m.always:o.freehandCondition_=i.freehandCondition?i.freehandCondition:m.shiftKeyOnly,o.addEventListener((0,P.getChangeEventType)(r.default.ACTIVE),o.updateState_),o}return N(l,t),l.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},l.prototype.getOverlay=function(){return this.overlay_},l.prototype.handleEvent=function(e){e.originalEvent.type===i.default.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==E.POINT&&this.freehandCondition_(e);var o=e.type===h.default.POINTERMOVE,s=!0;!this.freehand_&&this.lastDragTime_&&e.type===h.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,o=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===h.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),s=!1):this.freehand_&&e.type===h.default.POINTERDOWN?s=!1:o&&this.getPointerCount()<2?(s=e.type===h.default.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===h.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===h.default.DBLCLICK&&(s=!1),t.prototype.handleEvent.call(this,e)&&s},l.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.default(h.default.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},l.prototype.handleUpEvent=function(e){var t=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),this.shouldHandle_){switch(!0){case!this.finishCoordinate_:if(this.startDrawing_(e.coordinate),this.mode_!==E.POINT)break;case this.freehand_||this.atFinish_(e.pixel)&&this.finishCondition_(e):this.finishDrawing();break;case!this.freehand_:this.addToDrawing_(e.coordinate)}t=!1}else this.freehand_&&this.abortDrawing();return!t&&this.stopClick_&&e.originalEvent.stopPropagation(),t},l.prototype.handlePointerMove_=function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,o=t[0]-i[0],s=t[1]-i[1],r=o*o+s*s;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e.coordinate):this.createOrUpdateSketchPoint_(e)},l.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],s=this.mode_;if(s===E.POINT)t=!0;else if(s===E.CIRCLE)t=2===this.sketchCoords_.length;else if(s===E.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(s===E.POLYGON){var r=this.sketchCoords_;i=r[0].length>this.minPoints_,o=[r[0][0],r[0][r[0].length-2]]}if(i)for(var n=this.getMap(),a=0,h=o.length;a<h;a++){var d=o[a],u=n.getPixelFromCoordinate(d),_=e[0]-u[0],c=e[1]-u[1],l=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(_*_+c*c)<=l){this.finishCoordinate_=d;break}}}return t},l.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new o.default(new c.default(t)),this.updateSketchFeatures_())},l.prototype.createOrUpdateCustomSketchLine_=function(e){this.sketchLine_||(this.sketchLine_=new o.default);var t=e.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new n.default(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))},l.prototype.startDrawing_=function(e){var t=this.getMap().getView().getProjection();this.finishCoordinate_=e,this.mode_===E.POINT?this.sketchCoords_=e.slice():this.mode_===E.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.default(new n.default(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new I(D.DRAWSTART,this.sketchFeature_))},l.prototype.modifyDrawing_=function(e){var t,i,o=this.getMap(),r=this.sketchFeature_.getGeometry(),n=o.getView().getProjection();(this.mode_===E.POINT?i=this.sketchCoords_:this.mode_===E.POLYGON?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(o.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=e[0],i[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(e);if(r.getType()===s.default.POLYGON&&this.mode_!==E.POLYGON)this.createOrUpdateCustomSketchLine_(r);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},l.prototype.addToDrawing_=function(e){var t,i,o=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection(),r=this.mode_;r===E.LINE_STRING||r===E.CIRCLE?(this.finishCoordinate_=e.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),this.geometryFunction_(i,o,s)):r===E.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o,s)),this.updateSketchFeatures_(),t&&this.finishDrawing()},l.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;if(o===E.LINE_STRING||o===E.CIRCLE){if((e=this.sketchCoords_).splice(-2,1),e.length>=2){this.finishCoordinate_=e[e.length-2].slice();var r=this.finishCoordinate_.slice();e[e.length-1]=r,this.sketchPoint_.setGeometry(new c.default(r))}this.geometryFunction_(e,t,i),t.getType()===s.default.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(o===E.POLYGON){(e=this.sketchCoords_[0]).splice(-2,1);var n=this.sketchLine_.getGeometry();if(e.length>=2){r=e[e.length-2].slice();e[e.length-1]=r,this.sketchPoint_.setGeometry(new c.default(r))}n.setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t,i)}1===e.length&&this.abortDrawing(),this.updateSketchFeatures_()}},l.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===E.LINE_STRING?(t.pop(),this.geometryFunction_(t,i,o)):this.mode_===E.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i,o),t=i.getCoordinates()),this.type_===s.default.MULTI_POINT?e.setGeometry(new u.default([t])):this.type_===s.default.MULTI_LINE_STRING?e.setGeometry(new d.default([t])):this.type_===s.default.MULTI_POLYGON&&e.setGeometry(new _.default([t])),this.dispatchEvent(new I(D.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},l.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},l.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new I(D.DRAWABORT,e))},l.prototype.appendCoordinates=function(e){var t,i=this.mode_,o=!this.sketchFeature_;if(o&&this.startDrawing_(e[0]),i===E.LINE_STRING||i===E.CIRCLE)t=this.sketchCoords_;else{if(i!==E.POLYGON)return;t=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}o&&t.shift(),t.pop();for(var s=0;s<e.length;s++)this.addToDrawing_(e[s]);var r=e[e.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)},l.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new o.default(new c.default(i)),this.updateSketchFeatures_(),this.dispatchEvent(new I(D.DRAWSTART,this.sketchFeature_))},l.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},l.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)},l}(l.default);function R(){var e=(0,v.createEditingStyle)();return function(t,i){return e[t.getGeometry().getType()]}}function F(t,i){return function(o,s,r){var n=(0,k.fromUserCoordinate)(o[0],r),a=(0,k.fromUserCoordinate)(o[o.length-1],r),h=Math.sqrt((0,T.squaredDistance)(n,a)),d=s||(0,f.fromCircle)(new e.default(n),t),u=i;if(!i&&0!==i){var _=a[0]-n[0],c=a[1]-n[1];u=Math.atan2(c,_)}(0,f.makeRegular)(d,n,h,u);var l=(0,k.getUserProjection)();return l&&d.transform(r,l),d}}function j(){return function(e,t,i){var o=(0,C.boundingExtent)([e[0],e[e.length-1]].map(function(e){return(0,k.fromUserCoordinate)(e,i)})),s=[[(0,C.getBottomLeft)(o),(0,C.getBottomRight)(o),(0,C.getTopRight)(o),(0,C.getTopLeft)(o),(0,C.getBottomLeft)(o)]],r=t;r?r.setCoordinates(s):r=new f.default(s);var n=(0,k.getUserProjection)();return n&&r.transform(i,n),r}}function M(e){var t;return e===s.default.POINT||e===s.default.MULTI_POINT?t=E.POINT:e===s.default.LINE_STRING||e===s.default.MULTI_LINE_STRING?t=E.LINE_STRING:e===s.default.POLYGON||e===s.default.MULTI_POLYGON?t=E.POLYGON:e===s.default.CIRCLE&&(t=E.CIRCLE),t}var S=G;exports.default=S;
},{"../geom/Circle.js":"HPlQ","../events/Event.js":"aj10","../events/EventType.js":"lUmy","../Feature.js":"cEtg","../geom/GeometryType.js":"qBtD","./Property.js":"HUCB","../geom/LineString.js":"ArTU","../MapBrowserEvent.js":"LhPi","../MapBrowserEventType.js":"oGpv","../geom/MultiLineString.js":"YkYz","../geom/MultiPoint.js":"UXVJ","../geom/MultiPolygon.js":"ZcrM","../geom/Point.js":"fTqU","./Pointer.js":"tjXK","../geom/Polygon.js":"kEvS","../layer/Vector.js":"BGzd","../source/Vector.js":"s9D1","../functions.js":"caQH","../events/condition.js":"geXY","../extent.js":"pbFF","../style/Style.js":"ERCw","../proj.js":"bkYg","../Object.js":"YrNp","../coordinate.js":"uZ8Y"}],"cN7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ExtentEvent=void 0;var e=h(require("../events/Event.js")),t=h(require("../Feature.js")),n=h(require("../geom/GeometryType.js")),r=h(require("../MapBrowserEventType.js")),o=h(require("../geom/Point.js")),i=h(require("./Pointer.js")),a=h(require("../layer/Vector.js")),u=h(require("../source/Vector.js")),l=require("../events/condition.js"),s=require("../extent.js"),p=require("../coordinate.js"),c=require("../style/Style.js"),d=require("../geom/Polygon.js"),x=require("../proj.js");function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_={EXTENTCHANGED:"extentchanged"},v=function(e){function t(t){var n=e.call(this,_.EXTENTCHANGED)||this;return n.extent=t,n}return f(t,e),t}(e.default);exports.ExtentEvent=v;var y=function(e){function n(t){var n=this,r=t||{};return(n=e.call(this,r)||this).condition_=r.condition?r.condition:l.always,n.extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,t||(t={}),n.extentOverlay_=new a.default({source:new u.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:E(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new a.default({source:new u.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:g(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&n.setExtent(t.extent),n}return f(n,e),n.prototype.snapToVertex_=function(e,t){var n=t.getCoordinateFromPixelInternal(e),r=this.getExtentInternal();if(r){var o=P(r);o.sort(function(e,t){return(0,p.squaredDistanceToSegment)(n,e)-(0,p.squaredDistanceToSegment)(n,t)});var i=o[0],a=(0,p.closestOnSegment)(n,i),u=t.getPixelFromCoordinateInternal(a);if((0,p.distance)(e,u)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),s=t.getPixelFromCoordinateInternal(i[1]),c=(0,p.squaredDistance)(u,l),d=(0,p.squaredDistance)(u,s),x=Math.sqrt(Math.min(c,d));return this.snappedToVertex_=x<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>d?i[1]:i[0]),a}}return null},n.prototype.handlePointerMove_=function(e){var t=e.pixel,n=e.map,r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(r)},n.prototype.createOrUpdateExtentFeature_=function(e){var n=this.extentFeature_;return n?e?n.setGeometry((0,d.fromExtent)(e)):n.setGeometry(void 0):(n=e?new t.default((0,d.fromExtent)(e)):new t.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n},n.prototype.createOrUpdatePointerFeature_=function(e){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(e):(n=new t.default(new o.default(e)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n));return n},n.prototype.handleEvent=function(t){return!t.originalEvent||!this.condition_(t)||(t.type!=r.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},n.prototype.handleDownEvent=function(e){var t=e.pixel,n=e.map,r=this.getExtentInternal(),o=this.snapToVertex_(t,n),i=function(e){var t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(o&&r){var a=o[0]==r[0]||o[0]==r[2]?o[0]:null,u=o[1]==r[1]||o[1]==r[3]?o[1]:null;null!==a&&null!==u?this.pointerHandler_=m(i(o)):null!==a?this.pointerHandler_=O(i([a,r[1]]),i([a,r[3]])):null!==u&&(this.pointerHandler_=O(i([r[0],u]),i([r[2],u])))}else o=n.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=m(o);return!0},n.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},n.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,s.getArea)(t)||this.setExtent(null),!1},n.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},n.prototype.getExtent=function(){return(0,x.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.extent_},n.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new v(this.extent_))},n}(i.default);function E(){var e=(0,c.createEditingStyle)();return function(t,r){return e[n.default.POLYGON]}}function g(){var e=(0,c.createEditingStyle)();return function(t,r){return e[n.default.POINT]}}function m(e){return function(t){return(0,s.boundingExtent)([e,t])}}function O(e,t){return e[0]==t[0]?function(n){return(0,s.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,s.boundingExtent)([e,[t[0],n[1]]])}:null}function P(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var T=y;exports.default=T;
},{"../events/Event.js":"aj10","../Feature.js":"cEtg","../geom/GeometryType.js":"qBtD","../MapBrowserEventType.js":"oGpv","../geom/Point.js":"fTqU","./Pointer.js":"tjXK","../layer/Vector.js":"BGzd","../source/Vector.js":"s9D1","../events/condition.js":"geXY","../extent.js":"pbFF","../coordinate.js":"uZ8Y","../style/Style.js":"ERCw","../geom/Polygon.js":"kEvS","../proj.js":"bkYg"}],"HUDJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModifyEvent=void 0;var e=C(require("../Collection.js")),t=C(require("../CollectionEventType.js")),r=C(require("../events/Event.js")),i=C(require("../events/EventType.js")),n=C(require("../Feature.js")),o=C(require("../geom/GeometryType.js")),a=C(require("../MapBrowserEventType.js")),s=C(require("../geom/Point.js")),u=C(require("./Pointer.js")),d=C(require("../structs/RBush.js")),g=C(require("../source/VectorEventType.js")),l=C(require("../layer/Vector.js")),h=C(require("../source/Vector.js")),f=require("../events/condition.js"),_=require("../extent.js"),c=require("../coordinate.js"),p=require("../style/Style.js"),m=require("../array.js"),v=require("../geom/Polygon.js"),y=require("../proj.js"),x=require("../util.js");function C(e){return e&&e.__esModule?e:{default:e}}var E=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),S=0,F=1,P=[0,0,0,0],T=[],M={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},I=function(e){function t(t,r,i){var n=e.call(this,t)||this;return n.features=r,n.mapBrowserEvent=i,n}return E(t,e),t}(r.default);exports.ModifyEvent=I;var w=function(r){function u(i){var n,o=r.call(this,i)||this;if(o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=i.condition?i.condition:f.primaryAction,o.defaultDeleteCondition_=function(e){return(0,f.altKeyOnly)(e)&&(0,f.singleClick)(e)},o.deleteCondition_=i.deleteCondition?i.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=i.insertVertexCondition?i.insertVertexCondition:f.always,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.featuresBeingModified_=null,o.rBush_=new d.default,o.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new l.default({source:new h.default({useSpatialIndex:!1,wrapX:!!i.wrapX}),style:i.style?i.style:U(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,o.hitDetection_=null,i.features?n=i.features:i.source&&(o.source_=i.source,n=new e.default(o.source_.getFeatures()),o.source_.addEventListener(g.default.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(g.default.REMOVEFEATURE,o.handleSourceRemove_.bind(o))),!n)throw new Error("The modify interaction requires features, a source or a layer");return i.hitDetection&&(o.hitDetection_=i.hitDetection),o.features_=n,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(t.default.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(t.default.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o.delta_=[0,0],o}return E(u,r),u.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(i.default.CHANGE,this.boundHandleFeatureChange_)},u.prototype.willModifyFeatures_=function(t,r){if(!this.featuresBeingModified_){this.featuresBeingModified_=new e.default;for(var i=this.featuresBeingModified_.getArray(),n=0,o=r.length;n<o;++n){var a=r[n][0].feature;-1===i.indexOf(a)&&this.featuresBeingModified_.push(a)}this.dispatchEvent(new I(M.MODIFYSTART,this.featuresBeingModified_,t))}},u.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(i.default.CHANGE,this.boundHandleFeatureChange_)},u.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var i=r.length-1;i>=0;--i){for(var n=r[i],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===n&&this.dragSegments_.splice(o,1);t.remove(n)}},u.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.prototype.setActive.call(this,e)},u.prototype.setMap=function(e){this.overlay_.setMap(e),r.prototype.setMap.call(this,e)},u.prototype.getOverlay=function(){return this.overlay_},u.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},u.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},u.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},u.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},u.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},u.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)},u.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i){var o=r[i],a={feature:e,geometry:t,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}},u.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),a={feature:e,geometry:t,index:i,segment:o};this.rBush_.insert((0,_.boundingExtent)(o),a)}},u.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),d={feature:e,geometry:t,depth:[i],index:a,segment:u};this.rBush_.insert((0,_.boundingExtent)(u),d)}},u.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),d={feature:e,geometry:t,depth:[i],index:a,segment:u};this.rBush_.insert((0,_.boundingExtent)(u),d)}},u.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],a=0,s=o.length;a<s;++a)for(var u=o[a],d=0,g=u.length-1;d<g;++d){var l=u.slice(d,d+2),h={feature:e,geometry:t,depth:[a,i],index:d,segment:l};this.rBush_.insert((0,_.boundingExtent)(l),h)}},u.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),i={feature:e,geometry:t,index:S,segment:[r,r]},n={feature:e,geometry:t,index:F,segment:[r,r]},o=[i,n];i.featureSegments=o,n.featureSegments=o,this.rBush_.insert((0,_.createOrUpdateFromCoordinate)(r),i);var a=t,s=(0,y.getUserProjection)();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=a.clone().transform(s,u),a=(0,v.fromCircle)(a).transform(u,s)}this.rBush_.insert(a.getExtent(),n)},u.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),i=0;i<r.length;++i){var n=r[i];(0,this.SEGMENT_WRITERS_[n.getType()])(e,n)}},u.prototype.createOrUpdateVertexFeature_=function(e,t,r){var i=this.vertexFeature_;i?i.getGeometry().setCoordinates(e):(i=new n.default(new s.default(e)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i));return i.set("features",t),i.set("geometries",r),i},u.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=a.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),r.prototype.handleEvent.call(this,e)&&!t);var t},u.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[],n=0,a=this.dragSegments_.length;n<a;++n){var s=this.dragSegments_[n],u=s[0],d=u.feature;-1===r.indexOf(d)&&r.push(d);var g=u.geometry;-1===i.indexOf(g)&&i.push(g);for(var l=u.depth,h=void 0,f=u.segment,_=s[1];t.length<g.getStride();)t.push(f[_][t.length]);switch(g.getType()){case o.default.POINT:h=t,f[0]=t,f[1]=t;break;case o.default.MULTI_POINT:(h=g.getCoordinates())[u.index]=t,f[0]=t,f[1]=t;break;case o.default.LINE_STRING:(h=g.getCoordinates())[u.index+_]=t,f[_]=t;break;case o.default.MULTI_LINE_STRING:case o.default.POLYGON:(h=g.getCoordinates())[l[0]][u.index+_]=t,f[_]=t;break;case o.default.MULTI_POLYGON:(h=g.getCoordinates())[l[1]][l[0]][u.index+_]=t,f[_]=t;break;case o.default.CIRCLE:if(f[0]=t,f[1]=t,u.index===S)this.changingFeature_=!0,g.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var p=e.map.getView().getProjection(),m=(0,c.distance)((0,y.fromUserCoordinate)(g.getCenter(),p),(0,y.fromUserCoordinate)(t,p)),v=(0,y.getUserProjection)();if(v){var x=g.clone().transform(v,p);x.setRadius(m),m=x.transform(p,v).getRadius()}g.setRadius(m),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(g,h)}this.createOrUpdateVertexFeature_(t,r,i)},u.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var i=e.map.getView().getProjection(),n=[],a=r.getGeometry().getCoordinates(),s=(0,_.boundingExtent)([a]),u=this.rBush_.getInExtent(s),d={};u.sort(G);for(var g=0,l=u.length;g<l;++g){var h=u[g],f=h.segment,p=(0,x.getUid)(h.geometry),m=h.depth;if(m&&(p+="-"+m.join("-")),d[p]||(d[p]=new Array(2)),h.geometry.getType()!==o.default.CIRCLE||h.index!==F)if(!(0,c.equals)(f[0],a)||d[p][0])if(!(0,c.equals)(f[1],a)||d[p][1])(0,x.getUid)(f)in this.vertexSegments_&&!d[p][0]&&!d[p][1]&&this.insertVertexCondition_(e)&&n.push(h);else{if((h.geometry.getType()===o.default.LINE_STRING||h.geometry.getType()===o.default.MULTI_LINE_STRING)&&d[p][0]&&0===d[p][0].index)continue;this.dragSegments_.push([h,1]),d[p][1]=h}else this.dragSegments_.push([h,0]),d[p][0]=h;else{var v=O(t,h,i);(0,c.equals)(v,a)&&!d[p][0]&&(this.dragSegments_.push([h,0]),d[p][0]=h)}}n.length&&this.willModifyFeatures_(e,[n]);for(var y=n.length-1;y>=0;--y)this.insertVertex_(n[y],a)}return!!this.vertexFeature_},u.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],i=r.geometry;if(i.getType()===o.default.CIRCLE){var n=i.getCenter(),a=r.featureSegments[0],s=r.featureSegments[1];a.segment[0]=n,a.segment[1]=n,s.segment[0]=n,s.segment[1]=n,this.rBush_.update((0,_.createOrUpdateFromCoordinate)(n),a);var u=i,d=(0,y.getUserProjection)();if(d){var g=e.map.getView().getProjection();u=u.clone().transform(d,g),u=(0,v.fromCircle)(u).transform(g,d)}this.rBush_.update(u.getExtent(),s)}else this.rBush_.update((0,_.boundingExtent)(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new I(M.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1},u.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},u.prototype.handlePointerAtPixel_=function(e,t,r){var i,n,a=this,s=r||t.getCoordinateFromPixel(e),u=t.getView().getProjection();if(this.hitDetection_){var d="object"==typeof this.hitDetection_?function(e){return e===a.hitDetection_}:void 0;t.forEachFeatureAtPixel(e,function(e,t,r){if((r=r||e.getGeometry()).getType()===o.default.POINT){n=r;var a=r.getCoordinates();i=[{feature:e,geometry:r,segment:[a,a]}]}return!0},{layerFilter:d})}if(!i){var g=(0,y.fromUserExtent)((0,_.createOrUpdateFromCoordinate)(s,P),u),l=t.getView().getResolution()*this.pixelTolerance_,h=(0,y.toUserExtent)((0,_.buffer)(g,l,P),u);i=this.rBush_.getInExtent(h)}if(i&&i.length>0){var f=i.sort(function(e,t){return L(s,e,u)-L(s,t,u)})[0],p=f.segment,m=O(s,f,u),v=t.getPixelFromCoordinate(m),C=(0,c.distance)(e,v);if(n||C<=this.pixelTolerance_){var E={};if(E[(0,x.getUid)(p)]=!0,this.delta_[0]=m[0]-s[0],this.delta_[1]=m[1]-s[1],f.geometry.getType()===o.default.CIRCLE&&f.index===F)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(m,[f.feature],[f.geometry]);else{var S=t.getPixelFromCoordinate(p[0]),T=t.getPixelFromCoordinate(p[1]),M=(0,c.squaredDistance)(v,S),I=(0,c.squaredDistance)(v,T);C=Math.sqrt(Math.min(M,I)),this.snappedToVertex_=C<=this.pixelTolerance_,this.snappedToVertex_&&(m=M>I?p[1]:p[0]),this.createOrUpdateVertexFeature_(m,[f.feature],[f.geometry]);var w={};w[(0,x.getUid)(f.geometry)]=!0;for(var G=1,U=i.length;G<U;++G){var b=i[G].segment;if(!((0,c.equals)(p[0],b[0])&&(0,c.equals)(p[1],b[1])||(0,c.equals)(p[0],b[1])&&(0,c.equals)(p[1],b[0])))break;var N=(0,x.getUid)(i[G].geometry);N in w||(w[N]=!0,E[(0,x.getUid)(b)]=!0)}}return void(this.vertexSegments_=E)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},u.prototype.insertVertex_=function(e,t){for(var r,i=e.segment,n=e.feature,a=e.geometry,s=e.depth,u=e.index;t.length<a.getStride();)t.push(0);switch(a.getType()){case o.default.MULTI_LINE_STRING:case o.default.POLYGON:(r=a.getCoordinates())[s[0]].splice(u+1,0,t);break;case o.default.MULTI_POLYGON:(r=a.getCoordinates())[s[1]][s[0]].splice(u+1,0,t);break;case o.default.LINE_STRING:(r=a.getCoordinates()).splice(u+1,0,t);break;default:return}this.setGeometryCoordinates_(a,r);var d=this.rBush_;d.remove(e),this.updateSegmentIndices_(a,u,s,1);var g={segment:[i[0],t],feature:n,geometry:a,depth:s,index:u};d.insert((0,_.boundingExtent)(g.segment),g),this.dragSegments_.push([g,1]);var l={segment:[t,i[1]],feature:n,geometry:a,depth:s,index:u+1};d.insert((0,_.boundingExtent)(l.segment),l),this.dragSegments_.push([l,0]),this.ignoreNextSingleClick_=!0},u.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.default.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var t=this.removeVertex_();return this.dispatchEvent(new I(M.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1},u.prototype.removeVertex_=function(){var e,t,r,i,n,a,s,u,d,g,l,h=this.dragSegments_,f={},c=!1;for(n=h.length-1;n>=0;--n)g=(r=h[n])[0],l=(0,x.getUid)(g.feature),g.depth&&(l+="-"+g.depth.join("-")),l in f||(f[l]={}),0===r[1]?(f[l].right=g,f[l].index=g.index):1==r[1]&&(f[l].left=g,f[l].index=g.index+1);for(l in f){switch(d=f[l].right,s=f[l].left,(u=(a=f[l].index)-1)<0&&(u=0),e=t=(i=(g=void 0!==s?s:d).geometry).getCoordinates(),c=!1,i.getType()){case o.default.MULTI_LINE_STRING:t[g.depth[0]].length>2&&(t[g.depth[0]].splice(a,1),c=!0);break;case o.default.LINE_STRING:t.length>2&&(t.splice(a,1),c=!0);break;case o.default.MULTI_POLYGON:e=e[g.depth[1]];case o.default.POLYGON:(e=e[g.depth[0]]).length>4&&(a==e.length-1&&(a=0),e.splice(a,1),c=!0,0===a&&(e.pop(),e.push(e[0]),u=e.length-1))}if(c){this.setGeometryCoordinates_(i,t);var p=[];if(void 0!==s&&(this.rBush_.remove(s),p.push(s.segment[0])),void 0!==d&&(this.rBush_.remove(d),p.push(d.segment[1])),void 0!==s&&void 0!==d){var m={depth:g.depth,feature:g.feature,geometry:g.geometry,index:u,segment:p};this.rBush_.insert((0,_.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(i,a,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return c},u.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},u.prototype.updateSegmentIndices_=function(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(n){n.geometry===e&&(void 0===r||void 0===n.depth||(0,m.equals)(n.depth,r))&&n.index>t&&(n.index+=i)})},u}(u.default);function G(e,t){return e.index-t.index}function L(e,t,r){var i=t.geometry;if(i.getType()===o.default.CIRCLE){var n=i;if(t.index===F){var a=(0,y.getUserProjection)();a&&(n=n.clone().transform(a,r));var s=(0,c.squaredDistance)(n.getCenter(),(0,y.fromUserCoordinate)(e,r)),u=Math.sqrt(s)-n.getRadius();return u*u}}var d=(0,y.fromUserCoordinate)(e,r);return T[0]=(0,y.fromUserCoordinate)(t.segment[0],r),T[1]=(0,y.fromUserCoordinate)(t.segment[1],r),(0,c.squaredDistanceToSegment)(d,T)}function O(e,t,r){var i=t.geometry;if(i.getType()===o.default.CIRCLE&&t.index===F){var n=i,a=(0,y.getUserProjection)();return a&&(n=n.clone().transform(a,r)),(0,y.toUserCoordinate)(n.getClosestPoint((0,y.fromUserCoordinate)(e,r)),r)}var s=(0,y.fromUserCoordinate)(e,r);return T[0]=(0,y.fromUserCoordinate)(t.segment[0],r),T[1]=(0,y.fromUserCoordinate)(t.segment[1],r),(0,y.toUserCoordinate)((0,c.closestOnSegment)(s,T),r)}function U(){var e=(0,p.createEditingStyle)();return function(t,r){return e[o.default.POINT]}}var b=w;exports.default=b;
},{"../Collection.js":"UC92","../CollectionEventType.js":"gqQq","../events/Event.js":"aj10","../events/EventType.js":"lUmy","../Feature.js":"cEtg","../geom/GeometryType.js":"qBtD","../MapBrowserEventType.js":"oGpv","../geom/Point.js":"fTqU","./Pointer.js":"tjXK","../structs/RBush.js":"y5YV","../source/VectorEventType.js":"OVHJ","../layer/Vector.js":"BGzd","../source/Vector.js":"s9D1","../events/condition.js":"geXY","../extent.js":"pbFF","../coordinate.js":"uZ8Y","../style/Style.js":"ERCw","../array.js":"u3be","../geom/Polygon.js":"kEvS","../proj.js":"bkYg","../util.js":"bmrL"}],"NbMs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.SelectEvent=void 0;var e=c(require("../Collection.js")),t=c(require("../CollectionEventType.js")),r=c(require("../events/Event.js")),i=c(require("../geom/GeometryType.js")),n=c(require("./Interaction.js")),o=require("../functions.js"),s=require("../obj.js"),a=require("../style/Style.js"),u=require("../array.js"),l=require("../util.js"),d=require("../events/condition.js");function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),h={SELECT:"select"},y=function(e){function t(t,r,i,n){var o=e.call(this,t)||this;return o.selected=r,o.deselected=i,o.mapBrowserEvent=n,o}return f(t,e),t}(r.default);exports.SelectEvent=y;var _={},p=function(r){function i(t){var i,n=r.call(this)||this,s=t||{};if(n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=s.condition?s.condition:d.singleClick,n.addCondition_=s.addCondition?s.addCondition:d.never,n.removeCondition_=s.removeCondition?s.removeCondition:d.never,n.toggleCondition_=s.toggleCondition?s.toggleCondition:d.shiftKeyOnly,n.multi_=!!s.multi&&s.multi,n.filter_=s.filter?s.filter:o.TRUE,n.hitTolerance_=s.hitTolerance?s.hitTolerance:0,n.style_=void 0!==s.style?s.style:v(),n.features_=s.features||new e.default,s.layers)if("function"==typeof s.layers)i=s.layers;else{var a=s.layers;i=function(e){return(0,u.includes)(a,e)}}else i=o.TRUE;return n.layerFilter_=i,n.featureLayerAssociation_={},n}return f(i,r),i.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[(0,l.getUid)(e)]=t},i.prototype.getFeatures=function(){return this.features_},i.prototype.getHitTolerance=function(){return this.hitTolerance_},i.prototype.getLayer=function(e){return this.featureLayerAssociation_[(0,l.getUid)(e)]},i.prototype.setHitTolerance=function(e){this.hitTolerance_=e},i.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),r.prototype.setMap.call(this,e),e?(this.features_.addEventListener(t.default.ADD,this.boundAddFeature_),this.features_.addEventListener(t.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(t.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(t.default.REMOVE,this.boundRemoveFeature_))},i.prototype.addFeature_=function(e){var t=e.element;this.style_&&this.applySelectedStyle_(t)},i.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.restorePreviousStyle_(t)},i.prototype.getStyle=function(){return this.style_},i.prototype.applySelectedStyle_=function(e){var t=(0,l.getUid)(e);t in _||(_[t]=e.getStyle()),e.setStyle(this.style_)},i.prototype.restorePreviousStyle_=function(e){for(var t=this.getMap().getInteractions().getArray(),r=t.length-1;r>=0;--r){var n=t[r];if(n!==this&&n instanceof i&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(n.getStyle())}var o=(0,l.getUid)(e);e.setStyle(_[o]),delete _[o]},i.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[(0,l.getUid)(e)]},i.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),n=!t&&!r&&!i,o=e.map,a=this.getFeatures(),l=[],d=[];if(n){(0,s.clear)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return d.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=a.getLength()-1;c>=0;--c){var f=a.item(c),_=d.indexOf(f);_>-1?d.splice(_,1):(a.remove(f),l.push(f))}0!==d.length&&a.extend(d)}else{o.forEachFeatureAtPixel(e.pixel,function(e,n){if(this.filter_(e,n))return!t&&!i||(0,u.includes)(a.getArray(),e)?(r||i)&&(0,u.includes)(a.getArray(),e)&&(l.push(e),this.removeFeatureLayerAssociation_(e)):(d.push(e),this.addFeatureLayerAssociation_(e,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=l.length-1;p>=0;--p)a.remove(l[p]);a.extend(d)}return(d.length>0||l.length>0)&&this.dispatchEvent(new y(h.SELECT,d,l,e)),!0},i}(n.default);function v(){var e=(0,a.createEditingStyle)();return(0,u.extend)(e[i.default.POLYGON],e[i.default.LINE_STRING]),(0,u.extend)(e[i.default.GEOMETRY_COLLECTION],e[i.default.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}var g=p;exports.default=g;
},{"../Collection.js":"UC92","../CollectionEventType.js":"gqQq","../events/Event.js":"aj10","../geom/GeometryType.js":"qBtD","./Interaction.js":"nZtJ","../functions.js":"caQH","../obj.js":"lPyT","../style/Style.js":"ERCw","../array.js":"u3be","../util.js":"bmrL","../events/condition.js":"geXY"}],"n3mN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../CollectionEventType.js")),t=p(require("../events/EventType.js")),r=p(require("../geom/GeometryType.js")),n=p(require("./Pointer.js")),i=p(require("../structs/RBush.js")),o=p(require("../source/VectorEventType.js")),s=require("../functions.js"),a=require("../extent.js"),u=require("../coordinate.js"),l=require("../geom/Polygon.js"),h=require("../proj.js"),d=require("../util.js"),f=require("../obj.js"),g=require("../events.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function _(e){return e.feature?e.feature:e.element?e.element:void 0}var v=[],y=function(n){function p(e){var t=this,r=e||{},o=r;return o.handleDownEvent||(o.handleDownEvent=s.TRUE),o.stopDown||(o.stopDown=s.FALSE),(t=n.call(this,o)||this).source_=r.source?r.source:null,t.vertex_=void 0===r.vertex||r.vertex,t.edge_=void 0===r.edge||r.edge,t.features_=r.features?r.features:null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,t.rBush_=new i.default,t.SEGMENT_WRITERS_={Point:t.writePointGeometry_.bind(t),LineString:t.writeLineStringGeometry_.bind(t),LinearRing:t.writeLineStringGeometry_.bind(t),Polygon:t.writePolygonGeometry_.bind(t),MultiPoint:t.writeMultiPointGeometry_.bind(t),MultiLineString:t.writeMultiLineStringGeometry_.bind(t),MultiPolygon:t.writeMultiPolygonGeometry_.bind(t),GeometryCollection:t.writeGeometryCollectionGeometry_.bind(t),Circle:t.writeCircleGeometry_.bind(t)},t}return c(p,n),p.prototype.addFeature=function(e,r){var n=void 0===r||r,i=(0,d.getUid)(e),o=e.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[i]=o.getExtent((0,a.createEmpty)()),s(e,o))}n&&(this.featureChangeListenerKeys_[i]=(0,g.listen)(e,t.default.CHANGE,this.handleFeatureChange_,this))},p.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},p.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},p.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},p.prototype.handleEvent=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),n.prototype.handleEvent.call(this,e)},p.prototype.handleFeatureAdd_=function(e){var t=_(e);this.addFeature(t)},p.prototype.handleFeatureRemove_=function(e){var t=_(e);this.removeFeature(t)},p.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=(0,d.getUid)(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},p.prototype.handleUpEvent=function(e){var t=(0,f.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},p.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=(0,d.getUid)(e),i=this.indexedFeaturesExtents_[n];if(i){var o=this.rBush_,s=[];o.forEachInExtent(i,function(t){e===t.feature&&s.push(t)});for(var a=s.length-1;a>=0;--a)o.remove(s[a])}r&&((0,g.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},p.prototype.setMap=function(t){var r=this.getMap(),i=this.featuresListenerKeys_,s=this.getFeatures_();r&&(i.forEach(g.unlistenByKey),i.length=0,s.forEach(this.forEachFeatureRemove_.bind(this))),n.prototype.setMap.call(this,t),t&&(this.features_?i.push((0,g.listen)(this.features_,e.default.ADD,this.handleFeatureAdd_,this),(0,g.listen)(this.features_,e.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push((0,g.listen)(this.source_,o.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,g.listen)(this.source_,o.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),s.forEach(this.forEachFeatureAdd_.bind(this)))},p.prototype.snapTo=function(e,t,n){var i=n.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=n.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),s=(0,a.boundingExtent)([i,o]),l=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(l=l.filter(function(e){return e.feature.getGeometry().getType()!==r.default.CIRCLE}));var d=!1,f=null,g=null;if(0===l.length)return{snapped:d,vertex:f,vertexPixel:g};for(var p,c=n.getView().getProjection(),_=(0,h.fromUserCoordinate)(t,c),y=1/0,m=0;m<l.length;++m){var x=l[m];v[0]=(0,h.fromUserCoordinate)(x.segment[0],c),v[1]=(0,h.fromUserCoordinate)(x.segment[1],c);var E=(0,u.squaredDistanceToSegment)(_,v);E<y&&(p=x,y=E)}var F=p.segment;if(this.vertex_&&!this.edge_){var C=n.getPixelFromCoordinate(F[0]),P=n.getPixelFromCoordinate(F[1]),G=(0,u.squaredDistance)(e,C),T=(0,u.squaredDistance)(e,P);Math.sqrt(Math.min(G,T))<=this.pixelTolerance_&&(d=!0,f=G>T?F[1]:F[0],g=n.getPixelFromCoordinate(f))}else if(this.edge_){var w=p.feature.getGeometry().getType()===r.default.CIRCLE;if(w){var M=p.feature.getGeometry(),j=(0,h.getUserProjection)();j&&(M=M.clone().transform(j,c)),f=(0,h.toUserCoordinate)((0,u.closestOnCircle)(_,M),c)}else v[0]=(0,h.fromUserCoordinate)(F[0],c),v[1]=(0,h.fromUserCoordinate)(F[1],c),f=(0,h.toUserCoordinate)((0,u.closestOnSegment)(_,v),c);if(g=n.getPixelFromCoordinate(f),(0,u.distance)(e,g)<=this.pixelTolerance_&&(d=!0,this.vertex_&&!w)){C=n.getPixelFromCoordinate(F[0]),P=n.getPixelFromCoordinate(F[1]),G=(0,u.squaredDistance)(g,C),T=(0,u.squaredDistance)(g,P);Math.sqrt(Math.min(G,T))<=this.pixelTolerance_&&(f=G>T?F[1]:F[0],g=n.getPixelFromCoordinate(f))}}return d&&(g=[Math.round(g[0]),Math.round(g[1])]),{snapped:d,vertex:f,vertexPixel:g}},p.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},p.prototype.writeCircleGeometry_=function(e,t){var r=this.getMap().getView().getProjection(),n=t,i=(0,h.getUserProjection)();i&&(n=n.clone().transform(i,r));var o=(0,l.fromCircle)(n);i&&o.transform(r,i);for(var s=o.getCoordinates()[0],u=0,d=s.length-1;u<d;++u){var f=s.slice(u,u+2),g={feature:e,segment:f};this.rBush_.insert((0,a.boundingExtent)(f),g)}},p.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(e,r[n])}},p.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),s={feature:e,segment:o};this.rBush_.insert((0,a.boundingExtent)(o),s)}},p.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,u=o.length-1;s<u;++s){var l=o.slice(s,s+2),h={feature:e,segment:l};this.rBush_.insert((0,a.boundingExtent)(l),h)}},p.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],s={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},p.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,u=o.length;s<u;++s)for(var l=o[s],h=0,d=l.length-1;h<d;++h){var f=l.slice(h,h+2),g={feature:e,segment:f};this.rBush_.insert((0,a.boundingExtent)(f),g)}},p.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},p.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,u=o.length-1;s<u;++s){var l=o.slice(s,s+2),h={feature:e,segment:l};this.rBush_.insert((0,a.boundingExtent)(l),h)}},p}(n.default),m=y;exports.default=m;
},{"../CollectionEventType.js":"gqQq","../events/EventType.js":"lUmy","../geom/GeometryType.js":"qBtD","./Pointer.js":"tjXK","../structs/RBush.js":"y5YV","../source/VectorEventType.js":"OVHJ","../functions.js":"caQH","../extent.js":"pbFF","../coordinate.js":"uZ8Y","../geom/Polygon.js":"kEvS","../proj.js":"bkYg","../util.js":"bmrL","../obj.js":"lPyT","../events.js":"E9xa"}],"fNik":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TranslateEvent=void 0;var t=s(require("../Collection.js")),e=s(require("../events/Event.js")),r=s(require("./Property.js")),a=s(require("./Pointer.js")),n=require("../functions.js"),i=require("../Object.js"),o=require("../array.js");function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),u={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},h=function(t){function e(e,r,a,n,i){var o=t.call(this,e)||this;return o.features=r,o.coordinate=a,o.startCoordinate=n,o.mapBrowserEvent=i,o}return l(e,t),e}(e.default);exports.TranslateEvent=h;var c=function(e){function a(t){var a,s=this,l=t||{};if((s=e.call(this,l)||this).lastCoordinate_=null,s.startCoordinate_=null,s.features_=void 0!==l.features?l.features:null,l.layers)if("function"==typeof l.layers)a=l.layers;else{var u=l.layers;a=function(t){return(0,o.includes)(u,t)}}else a=n.TRUE;return s.layerFilter_=a,s.filter_=l.filter?l.filter:n.TRUE,s.hitTolerance_=l.hitTolerance?l.hitTolerance:0,s.lastFeature_=null,s.addEventListener((0,i.getChangeEventType)(r.default.ACTIVE),s.handleActiveChanged_),s}return l(a,e),a.prototype.handleDownEvent=function(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATESTART,r,e.coordinate,this.startCoordinate_,e)),!0}return!1},a.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATEEND,r,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1},a.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var r=e.coordinate,a=r[0]-this.lastCoordinate_[0],n=r[1]-this.lastCoordinate_[1],i=this.features_||new t.default([this.lastFeature_]);i.forEach(function(t){var e=t.getGeometry();e.translate(a,n),t.setGeometry(e)}),this.lastCoordinate_=r,this.dispatchEvent(new h(u.TRANSLATING,i,r,this.startCoordinate_,e))}},a.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},a.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||(0,o.includes)(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},a.prototype.getHitTolerance=function(){return this.hitTolerance_},a.prototype.setHitTolerance=function(t){this.hitTolerance_=t},a.prototype.setMap=function(t){var r=this.getMap();e.prototype.setMap.call(this,t),this.updateState_(r)},a.prototype.handleActiveChanged_=function(){this.updateState_(null)},a.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},a}(a.default),f=c;exports.default=f;
},{"../Collection.js":"UC92","../events/Event.js":"aj10","./Property.js":"HUCB","./Pointer.js":"tjXK","../functions.js":"caQH","../Object.js":"YrNp","../array.js":"u3be"}],"F9gD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=O,Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return x.default}});var e=h(require("./Collection.js")),t=h(require("./interaction/DoubleClickZoom.js")),r=h(require("./interaction/DragPan.js")),n=h(require("./interaction/DragRotate.js")),o=h(require("./interaction/DragZoom.js")),u=h(require("./interaction/KeyboardPan.js")),i=h(require("./interaction/KeyboardZoom.js")),a=h(require("./Kinetic.js")),c=h(require("./interaction/MouseWheelZoom.js")),d=h(require("./interaction/PinchRotate.js")),l=h(require("./interaction/PinchZoom.js")),f=h(require("./interaction/DragAndDrop.js")),s=h(require("./interaction/DragBox.js")),p=h(require("./interaction/DragRotateAndZoom.js")),b=h(require("./interaction/Draw.js")),m=h(require("./interaction/Extent.js")),j=h(require("./interaction/Interaction.js")),g=h(require("./interaction/Modify.js")),y=h(require("./interaction/Pointer.js")),P=h(require("./interaction/Select.js")),D=h(require("./interaction/Snap.js")),x=h(require("./interaction/Translate.js"));function h(e){return e&&e.__esModule?e:{default:e}}function O(f){var s=f||{},p=new e.default,b=new a.default(-.005,.05,100);return(void 0===s.altShiftDragRotate||s.altShiftDragRotate)&&p.push(new n.default),(void 0===s.doubleClickZoom||s.doubleClickZoom)&&p.push(new t.default({delta:s.zoomDelta,duration:s.zoomDuration})),(void 0===s.dragPan||s.dragPan)&&p.push(new r.default({onFocusOnly:s.onFocusOnly,kinetic:b})),(void 0===s.pinchRotate||s.pinchRotate)&&p.push(new d.default),(void 0===s.pinchZoom||s.pinchZoom)&&p.push(new l.default({duration:s.zoomDuration})),(void 0===s.keyboard||s.keyboard)&&(p.push(new u.default),p.push(new i.default({delta:s.zoomDelta,duration:s.zoomDuration}))),(void 0===s.mouseWheelZoom||s.mouseWheelZoom)&&p.push(new c.default({onFocusOnly:s.onFocusOnly,duration:s.zoomDuration})),(void 0===s.shiftDragZoom||s.shiftDragZoom)&&p.push(new o.default({duration:s.zoomDuration})),p}
},{"./Collection.js":"UC92","./interaction/DoubleClickZoom.js":"xizh","./interaction/DragPan.js":"V6e2","./interaction/DragRotate.js":"obBp","./interaction/DragZoom.js":"DwY2","./interaction/KeyboardPan.js":"FSZj","./interaction/KeyboardZoom.js":"AcPt","./Kinetic.js":"z1mr","./interaction/MouseWheelZoom.js":"pPS1","./interaction/PinchRotate.js":"YK7p","./interaction/PinchZoom.js":"G1vw","./interaction/DragAndDrop.js":"dWrq","./interaction/DragBox.js":"EzQG","./interaction/DragRotateAndZoom.js":"AWYO","./interaction/Draw.js":"rTwf","./interaction/Extent.js":"cN7j","./interaction/Interaction.js":"nZtJ","./interaction/Modify.js":"HUDJ","./interaction/Pointer.js":"tjXK","./interaction/Select.js":"NbMs","./interaction/Snap.js":"n3mN","./interaction/Translate.js":"fNik"}],"Xu49":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./renderer/Composite.js")),e=u(require("./PluggableMap.js")),r=require("./obj.js"),o=require("./control.js"),n=require("./interaction.js");function u(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),s=function(e){function u(t){return(t=(0,r.assign)({},t)).controls||(t.controls=(0,o.defaults)()),t.interactions||(t.interactions=(0,n.defaults)({onFocusOnly:!0})),e.call(this,t)||this}return i(u,e),u.prototype.createRenderer=function(){return new t.default(this)},u}(e.default),c=s;exports.default=c;
},{"./renderer/Composite.js":"BPpB","./PluggableMap.js":"xloC","./obj.js":"lPyT","./control.js":"L9cz","./interaction.js":"F9gD"}],"ks5W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.default=void 0;var t=function(){function t(t,i,n,m){this.minX=t,this.maxX=i,this.minY=n,this.maxY=m}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function i(i,n,m,e,s){return void 0!==s?(s.minX=i,s.maxX=n,s.minY=m,s.maxY=e,s):new t(i,n,m,e)}var n=t;exports.default=n;
},{}],"swyo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Layer.js")),t=u(require("../../TileRange.js")),r=u(require("../../TileState.js")),i=require("../../transform.js"),n=require("../../obj.js"),o=require("../../extent.js"),a=require("../../render/canvas.js"),s=require("../../proj.js"),l=require("../../util.js"),d=require("../../array.js");function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),p=function(e){function u(r){var i=e.call(this,r)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=(0,o.createEmpty)(),i.tmpTileRange_=new t.default(0,0,0,0),i}return h(u,e),u.prototype.isDrawableTile=function(e){var t=this.getLayer(),i=e.getState(),n=t.getUseInterimTilesOnError();return i==r.default.LOADED||i==r.default.EMPTY||i==r.default.ERROR&&!n},u.prototype.getTile=function(e,t,i,n){var o=n.pixelRatio,a=n.viewState.projection,s=this.getLayer(),l=s.getSource().getTile(e,t,i,o,a);return l.getState()==r.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):l.setState(r.default.LOADED)),this.isDrawableTile(l)||(l=l.getInterimTile()),l},u.prototype.loadedTileCallback=function(t,r,i){return!!this.isDrawableTile(i)&&e.prototype.loadedTileCallback.call(this,t,r,i)},u.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},u.prototype.renderFrame=function(e,t){var u=e.layerStatesArray[e.layerIndex],h=e.viewState,p=h.projection,c=h.resolution,g=h.center,T=h.rotation,f=e.pixelRatio,m=this.getLayer(),v=m.getSource(),x=v.getRevision(),y=v.getTileGridForProjection(p),R=y.getZForResolution(c,v.zDirection),j=y.getResolution(R),w=e.extent,C=u.extent&&(0,s.fromUserExtent)(u.extent,p);C&&(w=(0,o.getIntersection)(w,(0,s.fromUserExtent)(u.extent,p)));var E=v.getTilePixelRatio(f),_=Math.round(e.size[0]*E),P=Math.round(e.size[1]*E);if(T){var S=Math.round(Math.sqrt(_*_+P*P));_=S,P=S}var b=j*_/2/E,O=j*P/2/E,q=[g[0]-b,g[1]-O,g[0]+b,g[1]+O],I=y.getTileRangeForExtentAndZ(w,R),A={};A[R]={};var U=this.createLoadedTileFinder(v,p,A),D=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;for(var M=I.minX;M<=I.maxX;++M)for(var F=I.minY;F<=I.maxY;++F){var z=this.getTile(R,M,F,e);if(this.isDrawableTile(z)){var Y=(0,l.getUid)(this);if(z.getState()==r.default.LOADED){A[R][z.tileCoord.toString()]=z;var Z=z.inTransition(Y);this.newTiles_||!Z&&-1!==this.renderedTiles.indexOf(z)||(this.newTiles_=!0)}if(1===z.getAlpha(Y,e.time))continue}var k=y.getTileCoordChildTileRange(z.tileCoord,L,D),K=!1;k&&(K=U(R+1,k)),K||y.forEachTileCoordParentTileRange(z.tileCoord,U,L,D)}var X=j/c;(0,i.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/E,1/E,T,-_/2,-P/2);var G=(0,a.createTransformString)(this.pixelTransform);this.useContainer(t,G,u.opacity);var Q=this.context,N=Q.canvas;(0,i.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,i.compose)(this.tempTransform,_/2,P/2,X,X,0,-_/2,-P/2),N.width!=_||N.height!=P?(N.width=_,N.height=P):this.containerReused||Q.clearRect(0,0,_,P),C&&this.clipUnrotated(Q,e,C),(0,n.assign)(Q,v.getContextOptions()),this.preRender(Q,e),this.renderedTiles.length=0;var B,H,J,V=Object.keys(A).map(Number);V.sort(d.numberSafeCompareFunction),1!==u.opacity||this.containerReused&&!v.getOpaque(e.viewState.projection)?(B=[],H=[]):V=V.reverse();for(var W=V.length-1;W>=0;--W){var $=V[W],ee=v.getTilePixelSize($,f,p),te=y.getResolution($)/j,re=ee[0]*te*X,ie=ee[1]*te*X,ne=y.getTileCoordForCoordAndZ((0,o.getTopLeft)(q),$),oe=y.getTileCoordExtent(ne),ae=(0,i.apply)(this.tempTransform,[E*(oe[0]-q[0])/j,E*(q[3]-oe[3])/j]),se=E*v.getGutterForProjection(p),le=A[$];for(var de in le){var ue=(z=le[de]).tileCoord,he=ae[0]-(ne[1]-ue[1])*re,pe=Math.round(he+re),ce=ae[1]-(ne[2]-ue[2])*ie,ge=Math.round(ce+ie),Te=pe-(M=Math.round(he)),fe=ge-(F=Math.round(ce)),me=R===$;if(!(Z=me&&1!==z.getAlpha((0,l.getUid)(this),e.time)))if(B){Q.save(),J=[M,F,M+Te,F,M+Te,F+fe,M,F+fe];for(var ve=0,xe=B.length;ve<xe;++ve)if(R!==$&&$<H[ve]){var ye=B[ve];Q.beginPath(),Q.moveTo(J[0],J[1]),Q.lineTo(J[2],J[3]),Q.lineTo(J[4],J[5]),Q.lineTo(J[6],J[7]),Q.moveTo(ye[6],ye[7]),Q.lineTo(ye[4],ye[5]),Q.lineTo(ye[2],ye[3]),Q.lineTo(ye[0],ye[1]),Q.clip()}B.push(J),H.push($)}else Q.clearRect(M,F,Te,fe);this.drawTileImage(z,e,M,F,Te,fe,se,me,u.opacity),B&&!Z&&Q.restore(),this.renderedTiles.push(z),this.updateUsedTiles(e.usedTiles,v,z)}}return this.renderedRevision=x,this.renderedResolution=j,this.extentChanged=!this.renderedExtent_||!(0,o.equals)(this.renderedExtent_,q),this.renderedExtent_=q,this.renderedPixelRatio=f,this.renderedProjection=p,this.manageTilePyramid(e,v,y,f,p,w,R,m.getPreload()),this.scheduleExpireCache(e,v),this.postRender(Q,e),u.extent&&Q.restore(),G!==N.style.transform&&(N.style.transform=G),this.container},u.prototype.drawTileImage=function(e,t,r,i,n,o,a,s,d){var u=this.getTileImage(e);if(u){var h=(0,l.getUid)(this),p=s?e.getAlpha(h,t.time):1,c=d*p,g=c!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,i,n,o),g&&this.context.restore(),1!==p?t.animate=!0:s&&e.endTransition(h)}},u.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},u.prototype.getTileImage=function(e){return e.getImage()},u.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=(0,l.getUid)(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}},u.prototype.updateUsedTiles=function(e,t,r){var i=(0,l.getUid)(t);i in e||(e[i]={}),e[i][r.getKey()]=!0},u.prototype.manageTilePyramid=function(e,t,i,n,o,a,s,d,u){var h=(0,l.getUid)(t);h in e.wantedTiles||(e.wantedTiles[h]={});var p,c,g,T,f,m,v=e.wantedTiles[h],x=e.tileQueue,y=0;for(m=i.getMinZoom();m<=s;++m)for(c=i.getTileRangeForExtentAndZ(a,m,c),g=i.getResolution(m),T=c.minX;T<=c.maxX;++T)for(f=c.minY;f<=c.maxY;++f)s-m<=d?(++y,(p=t.getTile(m,T,f,n,o)).getState()==r.default.IDLE&&(v[p.getKey()]=!0,x.isKeyQueued(p.getKey())||x.enqueue([p,h,i.getTileCoordCenter(p.tileCoord),g])),void 0!==u&&u(p)):t.useTile(m,T,f,o);t.updateCacheSize(y,o)},u}(e.default);p.prototype.getLayer;var c=p;exports.default=c;
},{"./Layer.js":"wBoL","../../TileRange.js":"ks5W","../../TileState.js":"TPVv","../../transform.js":"ePpI","../../obj.js":"lPyT","../../extent.js":"pbFF","../../render/canvas.js":"s2Hb","../../proj.js":"bkYg","../../util.js":"bmrL","../../array.js":"u3be"}],"OpTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};exports.default=e;
},{}],"ZtGK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=v(require("../../render/canvas/BuilderGroup.js")),t=v(require("../../render/canvas/ExecutorGroup.js")),r=v(require("./TileLayer.js")),i=v(require("../../events/EventType.js")),n=v(require("../../render/canvas/BuilderType.js")),o=v(require("../../TileState.js")),a=v(require("../../layer/VectorTileRenderType.js")),d=v(require("../../ViewHint.js")),l=require("../../transform.js"),u=require("../../extent.js"),s=require("../../obj.js"),g=require("../../render/canvas/hitdetect.js"),c=require("../vector.js"),f=require("../../util.js"),p=require("../../events.js"),h=require("../../size.js"),T=require("../../coordinate.js");function v(e){return e&&e.__esModule?e:{default:e}}var y=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),R={image:[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT],hybrid:[n.default.POLYGON,n.default.LINE_STRING],vector:[]},m={image:[n.default.DEFAULT],hybrid:[n.default.IMAGE,n.default.TEXT,n.default.DEFAULT],vector:[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT,n.default.DEFAULT]},_=function(r){function n(e){var t=r.call(this,e)||this;return t.boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(t),t.dirty_=!1,t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.renderTileImageQueue_={},t.tileListenerKeys_={},t.tmpTransform_=(0,l.create)(),t}return y(n,r),n.prototype.prepareTile=function(e,t,r,i){var n,a=(0,f.getUid)(e),d=e.getState();return(d===o.default.LOADED&&e.hifi||d===o.default.ERROR)&&a in this.tileListenerKeys_&&((0,p.unlistenByKey)(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),d!==o.default.LOADED&&d!==o.default.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e,t,r)&&(n=!0,i&&(this.renderTileImageQueue_[a]=e))),n},n.prototype.getTile=function(e,t,n,l){var u=l.pixelRatio,s=l.viewState,g=s.resolution,c=s.projection,h=this.getLayer(),T=h.getSource().getTile(e,t,n,u,c);if(T.getState()<o.default.LOADED){T.wantedResolution=g;var v=(0,f.getUid)(T);if(!(v in this.tileListenerKeys_)){var y=(0,p.listen)(T,i.default.CHANGE,this.prepareTile.bind(this,T,u,c,!0));this.tileListenerKeys_[v]=y}}else{var R=l.viewHints;!!(R[d.default.ANIMATING]||R[d.default.INTERACTING])&&T.wantedResolution||(T.wantedResolution=g),this.prepareTile(T,u,c,!1)&&h.getRenderMode()!==a.default.VECTOR&&this.renderTileImage_(T,l)}return r.prototype.getTile.call(this,e,t,n,l)},n.prototype.isDrawableTile=function(e){var t=this.getLayer();return r.prototype.isDrawableTile.call(this,e)&&(t.getRenderMode()===a.default.VECTOR?(0,f.getUid)(t)in e.executorGroups:e.hasContext(t))},n.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},n.prototype.prepareFrame=function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!=t&&(this.renderedTiles.length=0),this.renderedLayerRevision_=t,r.prototype.prepareFrame.call(this,e)},n.prototype.updateExecutorGroup_=function(r,i,n){var d=this.getLayer(),l=d.getRevision(),s=d.getRenderOrder()||null,g=r.wantedResolution,p=r.getReplayState(d);if(p.dirty||p.renderedResolution!==g||p.renderedRevision!=l||p.renderedRenderOrder!=s||p.renderedZ!==r.sourceZ){var h=d.getSource(),T=d.getDeclutter(),v=h.getTileGrid(),y=h.getTileGridForProjection(n).getTileCoordExtent(r.wrappedTileCoord),R=h.getSourceTiles(i,n,r),m=(0,f.getUid)(d);delete r.hitDetectionImageData[m],r.executorGroups[m]=[],T&&(r.declutterExecutorGroups[m]=[]);for(var _=function(n,l){var f=R[n];if(f.getState()!=o.default.LOADED)return"continue";var _=f.tileCoord,I=v.getTileCoordExtent(_),x=(0,u.getIntersection)(y,I),C=(0,u.equals)(I,x)?null:(0,u.buffer)(x,d.getRenderBuffer()*g,E.tmpExtent);p.dirty=!1;var S=new e.default(0,x,g,i),L=T?new e.default(0,x,g,i):void 0,w=(0,c.getSquaredTolerance)(g,i),G=function(e){var t,r=e.getStyleFunction()||d.getStyleFunction();if(r&&(t=r(e,g)),t){var i=this.renderFeature(e,w,t,S,L);this.dirty_=this.dirty_||i,p.dirty=p.dirty||i}},j=f.getFeatures();s&&s!==p.renderedRenderOrder&&j.sort(s);for(var O=0,A=j.length;O<A;++O){var D=j[O];C&&!(0,u.intersects)(C,D.getGeometry().getExtent())||G.call(E,D)}var F=S.finish(),b=d.getRenderMode()!==a.default.VECTOR&&T&&1===R.length?null:x,N=new t.default(b,g,i,h.getOverlaps(),F,d.getRenderBuffer());if(r.executorGroups[m].push(N),L){var q=new t.default(b,g,i,h.getOverlaps(),L.finish(),d.getRenderBuffer());r.declutterExecutorGroups[m].push(q)}},E=this,I=0,x=R.length;I<x;++I)_(I);p.renderedRevision=l,p.renderedZ=r.sourceZ,p.renderedRenderOrder=s,p.renderedResolution=g}},n.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){var o=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var d=this.getLayer(),l=d.getSource().getTileGridForProjection(t.viewState.projection),s=(0,u.boundingExtent)([e]);(0,u.buffer)(s,o*r,s);for(var g,c={},p=function(e,t,r){var o=e.getId();void 0===o&&(o=(0,f.getUid)(e));var a=c[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[o]=!0,n.splice(n.lastIndexOf(a),1),i(e,d,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return c[o]=!0,i(e,d,t);n.push(c[o]={feature:e,layer:d,geometry:t,distanceSq:r,callback:i})}},h=this.renderedTiles,T=function(i,n){var c=h[i],T=l.getTileCoordExtent(c.wrappedTileCoord);if(!(0,u.intersects)(T,s))return"continue";var v=(0,f.getUid)(d),y=[c.executorGroups[v]],R=c.declutterExecutorGroups[v];R&&y.push(R),y.some(function(i){for(var n=i===R?t.declutterTree.all().map(function(e){return e.value}):null,d=0,l=i.length;d<l;++d){var u=i[d];if(g=u.forEachFeatureAtCoordinate(e,o,a,r,p,n))return!0}})},v=0,y=h.length;!g&&v<y;++v)T(v);return g},n.prototype.getFeatures=function(e){return new Promise(function(t,r){for(var i,n=this.getLayer(),a=(0,f.getUid)(n),d=n.getSource(),s=this.renderedProjection,c=s.getExtent(),p=this.renderedResolution,v=d.getTileGridForProjection(s),y=(0,l.apply)(this.renderedPixelToCoordinateTransform_,e.slice()),R=v.getTileCoordForCoordAndResolution(y,p),m=0,_=this.renderedTiles.length;m<_;++m)if(R.toString()===this.renderedTiles[m].tileCoord.toString()){if((i=this.renderedTiles[m]).getState()===o.default.LOADED&&i.hifi){var E=v.getTileCoordExtent(i.tileCoord);d.getWrapX()&&s.canWrapX()&&!(0,u.containsExtent)(c,E)&&(0,T.wrapX)(y,s);break}i=void 0}if(!i||i.loadingSourceTiles>0)t([]);else{var I=v.getTileCoordExtent(i.wrappedTileCoord),x=(0,u.getTopLeft)(I),C=[(y[0]-x[0])/p,(x[1]-y[1])/p],S=i.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),L=i.hitDetectionImageData[a];if(!L&&!this.animatingOrInteracting_){var w=(0,h.toSize)(v.getTileSize(v.getZForResolution(p))),G=[w[0]/2,w[1]/2],j=this.renderedRotation_,O=[this.getRenderTransform(v.getTileCoordCenter(i.wrappedTileCoord),p,0,.5,G[0],G[1],0)];L=(0,g.createHitDetectionImageData)(w,O,S,n.getStyleFunction(),v.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(n).renderedResolution,j),i.hitDetectionImageData[a]=L}t((0,g.hitDetect)(C,S,L))}}.bind(this))},n.prototype.handleFontsChanged=function(){(0,s.clear)(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},n.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},n.prototype.renderDeclutter=function(e){for(var t=e.viewHints,r=!(t[d.default.ANIMATING]||t[d.default.INTERACTING]),i=this.renderedTiles,n=0,o=i.length;n<o;++n){var a=i[n],l=a.declutterExecutorGroups[(0,f.getUid)(this.getLayer())];if(l)for(var u=l.length-1;u>=0;--u)l[u].execute(this.context,1,this.getTileRenderTransform(a,e),e.viewState.rotation,r,void 0,e.declutterTree)}},n.prototype.getTileRenderTransform=function(e,t){var r=t.pixelRatio,i=t.viewState,n=i.center,o=i.resolution,a=i.rotation,d=t.size,u=Math.round(d[0]*r),s=Math.round(d[1]*r),g=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),c=e.tileCoord,f=g.getTileCoordExtent(e.wrappedTileCoord),p=g.getTileCoordExtent(c,this.tmpExtent)[0]-f[0];return(0,l.multiply)((0,l.scale)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(n,o,a,r,u,s,p))},n.prototype.renderFrame=function(e,t){var i=e.viewHints,n=!(i[d.default.ANIMATING]||i[d.default.INTERACTING]);this.renderQueuedTileImages_(n,e),r.prototype.renderFrame.call(this,e,t),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),l=o.getRenderMode();if(l===a.default.IMAGE)return this.container;var u=o.getSource(),s=e.usedTiles[(0,f.getUid)(u)];for(var g in this.renderTileImageQueue_)s&&g in s||delete this.renderTileImageQueue_[g];for(var c=this.context,p=m[l],h=e.viewState.rotation,T=this.renderedTiles,v=[],y=[],R=T.length-1;R>=0;--R)for(var _=T[R],E=this.getTileRenderTransform(_,e),I=_.executorGroups[(0,f.getUid)(o)],x=!1,C=0,S=I.length;C<S;++C){var L=I[C];if(L.hasExecutors(p)){var w=_.tileCoord[0],G=void 0;if(!x&&(G=L.getClipCoords(E))){c.save();for(var j=0,O=v.length;j<O;++j){var A=v[j];w<y[j]&&(c.beginPath(),c.moveTo(G[0],G[1]),c.lineTo(G[2],G[3]),c.lineTo(G[4],G[5]),c.lineTo(G[6],G[7]),c.moveTo(A[6],A[7]),c.lineTo(A[4],A[5]),c.lineTo(A[2],A[3]),c.lineTo(A[0],A[1]),c.clip())}}L.execute(c,1,E,h,n,p),!x&&G&&(c.restore(),v.push(G),y.push(w),x=!0)}}return this.container},n.prototype.renderQueuedTileImages_=function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}},n.prototype.renderFeature=function(e,t,r,i,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,d=r.length;a<d;++a)o=(0,c.renderFeature)(i,e,r[a],t,this.boundHandleStyleImageChange_,void 0,n)||o;else o=(0,c.renderFeature)(i,e,r,t,this.boundHandleStyleImageChange_,void 0,n);return o},n.prototype.tileImageNeedsRender_=function(e,t,r){var i=this.getLayer(),n=e.getReplayState(i),o=i.getRevision(),a=e.sourceZ,d=e.wantedResolution;return n.renderedTileResolution!==d||n.renderedTileRevision!==o||n.renderedTileZ!==a},n.prototype.renderTileImage_=function(e,t){var r=this.getLayer(),i=e.getReplayState(r),n=r.getRevision(),o=e.executorGroups[(0,f.getUid)(r)];i.renderedTileRevision=n,i.renderedTileZ=e.sourceZ;var a=e.wrappedTileCoord,d=a[0],u=r.getSource(),s=t.pixelRatio,g=t.viewState.projection,c=u.getTileGridForProjection(g),p=c.getResolution(e.tileCoord[0]),h=t.pixelRatio/e.wantedResolution*p,T=c.getResolution(d),v=e.getContext(r);s=Math.round(Math.max(s,h/s));var y=u.getTilePixelSize(d,s,g);v.canvas.width=y[0],v.canvas.height=y[1];var m=s/h;if(1!==m){var _=(0,l.reset)(this.tmpTransform_);(0,l.scale)(_,m,m),v.setTransform.apply(v,_)}var E=c.getTileCoordExtent(a,this.tmpExtent),I=h/T,x=(0,l.reset)(this.tmpTransform_);(0,l.scale)(x,I,-I),(0,l.translate)(x,-E[0],-E[3]);for(var C=0,S=o.length;C<S;++C){o[C].execute(v,m,x,0,!0,R[r.getRenderMode()])}i.renderedTileResolution=e.wantedResolution},n}(r.default),E=_;exports.default=E;
},{"../../render/canvas/BuilderGroup.js":"biGG","../../render/canvas/ExecutorGroup.js":"FMfm","./TileLayer.js":"swyo","../../events/EventType.js":"lUmy","../../render/canvas/BuilderType.js":"PoZV","../../TileState.js":"TPVv","../../layer/VectorTileRenderType.js":"OpTq","../../ViewHint.js":"ht2c","../../transform.js":"ePpI","../../extent.js":"pbFF","../../obj.js":"lPyT","../../render/canvas/hitdetect.js":"mHP4","../vector.js":"y0oq","../../util.js":"bmrL","../../events.js":"E9xa","../../size.js":"XzjU","../../coordinate.js":"uZ8Y"}],"MkpP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"o5wK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./BaseVector.js")),t=u(require("../renderer/canvas/VectorTileLayer.js")),r=u(require("./TileProperty.js")),o=u(require("./VectorTileRenderType.js")),n=require("../asserts.js"),s=require("../obj.js");function u(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function u(t){var r=this,u=t||{},i=(0,s.assign)({},u);delete i.preload,delete i.useInterimTilesOnError,r=e.call(this,i)||this;var a=u.renderMode||o.default.HYBRID;return(0,n.assert)(null==a||a==o.default.IMAGE||a==o.default.HYBRID||a==o.default.VECTOR,28),r.renderMode_=a,r.setPreload(u.preload?u.preload:0),r.setUseInterimTilesOnError(void 0===u.useInterimTilesOnError||u.useInterimTilesOnError),r}return i(u,e),u.prototype.createRenderer=function(){return new t.default(this)},u.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},u.prototype.getRenderMode=function(){return this.renderMode_},u.prototype.getPreload=function(){return this.get(r.default.PRELOAD)},u.prototype.getUseInterimTilesOnError=function(){return this.get(r.default.USE_INTERIM_TILES_ON_ERROR)},u.prototype.setPreload=function(e){this.set(r.default.PRELOAD,e)},u.prototype.setUseInterimTilesOnError=function(e){this.set(r.default.USE_INTERIM_TILES_ON_ERROR,e)},u}(e.default),l=a;exports.default=l;
},{"./BaseVector.js":"NMOS","../renderer/canvas/VectorTileLayer.js":"ZtGK","./TileProperty.js":"MkpP","./VectorTileRenderType.js":"OpTq","../asserts.js":"hgi2","../obj.js":"lPyT"}],"lLEG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./events/Target.js")),e=o(require("./events/EventType.js")),i=o(require("./TileState.js")),r=require("./util.js"),n=require("./easing.js");function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(t){function o(e,i,r){var n=t.call(this)||this,o=r||{};return n.tileCoord=e,n.state=i,n.interimTile=null,n.hifi=!0,n.key="",n.transition_=void 0===o.transition?250:o.transition,n.transitionStarts_={},n}return s(o,t),o.prototype.changed=function(){this.dispatchEvent(e.default.CHANGE)},o.prototype.release=function(){},o.prototype.getKey=function(){return this.key+"/"+this.tileCoord},o.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==i.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},o.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==i.default.LOADED){t.interimTile=null;break}t.getState()==i.default.LOADING?e=t:t.getState()==i.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},o.prototype.getTileCoord=function(){return this.tileCoord},o.prototype.getState=function(){return this.state},o.prototype.setState=function(t){if(this.state!==i.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},o.prototype.load=function(){(0,r.abstract)()},o.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:(0,n.easeIn)(r/this.transition_)},o.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},o.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},o}(t.default),u=a;exports.default=u;
},{"./events/Target.js":"zWyV","./events/EventType.js":"lUmy","./TileState.js":"TPVv","./util.js":"bmrL","./easing.js":"tqAS"}],"bj7C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Tile.js")),e=o(require("./TileState.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=function(t){function o(e,o,r,n,u,i){var s=t.call(this,e,o,i)||this;return s.extent=null,s.format_=n,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=u,s.url_=r,s.key=r,s}return r(o,t),o.prototype.getFormat=function(){return this.format_},o.prototype.getFeatures=function(){return this.features_},o.prototype.load=function(){this.state==e.default.IDLE&&(this.setState(e.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},o.prototype.onLoad=function(t,e){this.setFeatures(t)},o.prototype.onError=function(){this.setState(e.default.ERROR)},o.prototype.setFeatures=function(t){this.features_=t,this.setState(e.default.LOADED)},o.prototype.setLoader=function(t){this.loader_=t},o}(t.default),u=n;exports.default=u;
},{"./Tile.js":"lLEG","./TileState.js":"TPVv"}],"NILn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=function(){function t(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},t.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},t.prototype.get=function(t,s){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},t.prototype.remove=function(t){var s=this.entries_[t];return(0,e.assert)(void 0!==s,15),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[t],--this.count_,s.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var e,t=new Array(this.count_),s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.key_;return t},t.prototype.getValues=function(){var e,t=new Array(this.count_),s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.value_;return t},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},t.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},t.prototype.set=function(t,s){(0,e.assert)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(e){this.highWaterMark=e},t}(),s=t;exports.default=s;
},{"../asserts.js":"hgi2"}],"GpvC":[function(require,module,exports) {
"use strict";function e(e,t,r,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function t(e,t,r){return e+"/"+t+"/"+r}function r(e){return t(e[0],e[1],e[2])}function n(e){return e.split("/").map(Number)}function o(e){return(e[1]<<e[0])+e[2]}function u(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var u=t.getFullTileRange(r);return!u||u.containsXY(n,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=e,exports.getKeyZXY=t,exports.getKey=r,exports.fromKey=n,exports.hash=o,exports.withinExtentAndZ=u;
},{}],"g4cv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./structs/LRUCache.js")),e=require("./tilecoord.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},r.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),r=(0,e.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==r&&(this.remove((0,e.getKey)(t.tileCoord)),t.release())}.bind(this))}},r}(t.default),i=n;exports.default=i;
},{"./structs/LRUCache.js":"NILn","./tilecoord.js":"GpvC"}],"odY2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"hVkI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../TileRange.js")),e=require("./common.js"),i=require("../asserts.js"),o=require("../math.js"),r=require("../extent.js"),n=require("../tilecoord.js"),s=require("../array.js"),l=require("../size.js");function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function h(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=o?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}var u=[0,0,0],g=function(){function a(o){var n;if(this.minZoom=void 0!==o.minZoom?o.minZoom:0,this.resolutions_=o.resolutions,(0,i.assert)((0,s.isSorted)(this.resolutions_,function(t,e){return e-t},!0),17),!o.origins)for(var l=0,a=this.resolutions_.length-1;l<a;++l)if(n){if(this.resolutions_[l]/this.resolutions_[l+1]!==n){n=void 0;break}}else n=this.resolutions_[l]/this.resolutions_[l+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==o.origin?o.origin:null,this.origins_=null,void 0!==o.origins&&(this.origins_=o.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var h=o.extent;void 0===h||this.origin_||this.origins_||(this.origin_=(0,r.getTopLeft)(h)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==o.tileSizes&&(this.tileSizes_=o.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==o.tileSize?o.tileSize:this.tileSizes_?null:e.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==o.sizes?this.fullTileRanges_=o.sizes.map(function(e,i){var o=new t.default(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(h){var r=this.getTileRangeForExtentAndZ(h,i);o.minX=Math.max(r.minX,o.minX),o.maxX=Math.min(r.maxX,o.maxX),o.minY=Math.max(r.minY,o.minY),o.maxY=Math.min(r.maxY,o.maxY)}return o},this):h&&this.calculateTileRanges_(h)}return a.prototype.forEachTileCoord=function(t,e,i){for(var o=this.getTileRangeForExtentAndZ(t,e),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)i([e,r,s])},a.prototype.forEachTileCoordParentTileRange=function(e,i,o,r){var n,s,l,a=null,h=e[0]-1;for(2===this.zoomFactor_?(s=e[1],l=e[2]):a=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),n=(0,t.createOrUpdate)(s,s,l,l,o)):n=this.getTileRangeForExtentAndZ(a,h,o),i(h,n))return!0;--h}return!1},a.prototype.getExtent=function(){return this.extent_},a.prototype.getMaxZoom=function(){return this.maxZoom},a.prototype.getMinZoom=function(){return this.minZoom},a.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},a.prototype.getResolution=function(t){return this.resolutions_[t]},a.prototype.getResolutions=function(){return this.resolutions_},a.prototype.getTileCoordChildTileRange=function(e,i,o){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*e[1],n=2*e[2];return(0,t.createOrUpdate)(r,r+1,n,n+1,i)}var s=this.getTileCoordExtent(e,o);return this.getTileRangeForExtentAndZ(s,e[0]+1,i)}return null},a.prototype.getTileRangeExtent=function(t,e,i){var o=this.getOrigin(t),n=this.getResolution(t),s=(0,l.toSize)(this.getTileSize(t),this.tmpSize_),a=o[0]+e.minX*s[0]*n,h=o[0]+(e.maxX+1)*s[0]*n,u=o[1]+e.minY*s[1]*n,g=o[1]+(e.maxY+1)*s[1]*n;return(0,r.createOrUpdate)(a,u,h,g,i)},a.prototype.getTileRangeForExtentAndZ=function(e,i,o){var r=u;this.getTileCoordForXYAndZ_(e[0],e[3],i,!1,r);var n=r[1],s=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],i,!0,r),(0,t.createOrUpdate)(n,r[1],s,r[2],o)},a.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=(0,l.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]-(t[2]+.5)*o[1]*i]},a.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),o=this.getResolution(t[0]),n=(0,l.toSize)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*n[0]*o,a=i[1]-(t[2]+1)*n[1]*o,h=s+n[0]*o,u=a+n[1]*o;return(0,r.createOrUpdate)(s,a,h,u,e)},a.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},a.prototype.getTileCoordForXYAndResolution_=function(t,e,i,o,r){var s=this.getZForResolution(i),a=i/this.getResolution(s),h=this.getOrigin(s),u=(0,l.toSize)(this.getTileSize(s),this.tmpSize_),g=o?.5:0,f=o?.5:0,p=Math.floor((t-h[0])/i+g),_=Math.floor((h[1]-e)/i+f),m=a*p/u[0],c=a*_/u[1];return o?(m=Math.ceil(m)-1,c=Math.ceil(c)-1):(m=Math.floor(m),c=Math.floor(c)),(0,n.createOrUpdate)(s,m,c,r)},a.prototype.getTileCoordForXYAndZ_=function(t,e,i,o,r){var s=this.getOrigin(i),a=this.getResolution(i),h=(0,l.toSize)(this.getTileSize(i),this.tmpSize_),u=o?.5:0,g=o?.5:0,f=Math.floor((t-s[0])/a+u),p=Math.floor((s[1]-e)/a+g),_=f/h[0],m=p/h[1];return o?(_=Math.ceil(_)-1,m=Math.ceil(m)-1):(_=Math.floor(_),m=Math.floor(m)),(0,n.createOrUpdate)(i,_,m,r)},a.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},a.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},a.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},a.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},a.prototype.getZForResolution=function(t,e){var i=(0,s.linearFindNearest)(this.resolutions_,t,e||0);return(0,o.clamp)(i,this.minZoom,this.maxZoom)},a.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i},a}(),f=g;exports.default=f;
},{"../TileRange.js":"ks5W","./common.js":"tJwZ","../asserts.js":"hgi2","../math.js":"cgU2","../extent.js":"pbFF","../tilecoord.js":"GpvC","../array.js":"u3be","../size.js":"XzjU"}],"zlz6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getForProjection=s,exports.wrapX=l,exports.createForExtent=d,exports.createXYZ=c,exports.createForProjection=x,exports.extentFromProjection=g;var e=a(require("./extent/Corner.js")),t=a(require("./tilegrid/TileGrid.js")),r=a(require("./proj/Units.js")),o=require("./tilegrid/common.js"),i=require("./proj.js"),n=require("./extent.js"),u=require("./size.js");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.getDefaultTileGrid();return t||(t=x(e),e.setDefaultTileGrid(t)),t}function l(e,t,r){var o=t[0],i=e.getTileCoordCenter(t),u=g(r);if((0,n.containsCoordinate)(u,i))return t;var a=(0,n.getWidth)(u),s=Math.ceil((u[0]-i[0])/a);return i[0]+=a*s,e.getTileCoordForCoordAndZ(i,o)}function d(r,o,i,u){var a=void 0!==u?u:e.default.TOP_LEFT,s=f(r,o,i);return new t.default({extent:r,origin:(0,n.getCorner)(r,a),resolutions:s,tileSize:i})}function c(e){var r=e||{},o=r.extent||(0,i.get)("EPSG:3857").getExtent(),n={extent:o,minZoom:r.minZoom,tileSize:r.tileSize,resolutions:f(o,r.maxZoom,r.tileSize,r.maxResolution)};return new t.default(n)}function f(e,t,r,i){for(var a=void 0!==t?t:o.DEFAULT_MAX_ZOOM,s=(0,n.getHeight)(e),l=(0,n.getWidth)(e),d=(0,u.toSize)(void 0!==r?r:o.DEFAULT_TILE_SIZE),c=i>0?i:Math.max(l/d[0],s/d[1]),f=a+1,x=new Array(f),g=0;g<f;++g)x[g]=c/Math.pow(2,g);return x}function x(e,t,r,o){return d(g(e),t,r,o)}function g(e){var t=(e=(0,i.get)(e)).getExtent();if(!t){var o=180*i.METERS_PER_UNIT[r.default.DEGREES]/e.getMetersPerUnit();t=(0,n.createOrUpdate)(-o,-o,o,o)}return t}
},{"./extent/Corner.js":"kDDr","./tilegrid/TileGrid.js":"hVkI","./proj/Units.js":"IrdK","./tilegrid/common.js":"tJwZ","./proj.js":"bkYg","./extent.js":"pbFF","./size.js":"XzjU"}],"L7OL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var t=s(require("../events/Event.js")),e=s(require("./Source.js")),i=s(require("../TileCache.js")),r=s(require("../TileState.js")),o=require("../util.js"),n=require("../asserts.js"),a=require("../proj.js"),u=require("../tilecoord.js"),c=require("../tilegrid.js"),l=require("../size.js");function s(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&(0,l.toSize)(o.getTileSize(o.getMinZoom()),[256,256]),r.tileCache=new i.default(e.cacheSize||0),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return p(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,o){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var a,c,l,s=!0,p=i.minX;p<=i.maxX;++p)for(var h=i.minY;h<=i.maxY;++h)c=(0,u.getKeyZXY)(e,p,h),l=!1,n.containsKey(c)&&(l=(a=n.get(c)).getState()===r.default.LOADED)&&(l=!1!==o(a)),l||(s=!1);return s},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,n){return(0,o.abstract)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:(0,c.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){return(0,n.assert)((0,a.equivalent)(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),n=(0,l.toSize)(r.getTileSize(t),this.tmpSize);return 1==o?n:(0,l.scale)(n,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,c.wrapX)(r,t,i)),(0,u.withinExtentAndZ)(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,e,i,r){},e}(e.default),f=function(t){function e(e,i){var r=t.call(this,e)||this;return r.tile=i,r}return p(e,t),e}(t.default);exports.TileSourceEvent=f;var y=h;exports.default=y;
},{"../events/Event.js":"aj10","./Source.js":"IT41","../TileCache.js":"g4cv","../TileState.js":"TPVv","../util.js":"bmrL","../asserts.js":"hgi2","../proj.js":"bkYg","../tilecoord.js":"GpvC","../tilegrid.js":"zlz6","../size.js":"XzjU"}],"WLnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.nullTileUrlFunction=i,exports.expandUrl=u;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,i=/\{-y\}/g;return function(u,c,l){return u?e.replace(n,u[0].toString()).replace(o,u[1].toString()).replace(a,u[2].toString()).replace(i,function(){var e=u[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-u[2]-1).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),i=0;i<t;++i)o[i]=n(r[i],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var i=(0,t.hash)(n),u=(0,e.modulo)(i,r.length);return r[u](n,o,a)}}}function i(r,e,t){}function u(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),o=t[2].charCodeAt(0),a=void 0;for(a=n;a<=o;++a)e.push(r.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var i=parseInt(t[2],10),u=parseInt(t[1],10);u<=i;u++)e.push(r.replace(t[0],u.toString()));return e}return e.push(r),e}
},{"./asserts.js":"hgi2","./math.js":"cgU2","./tilecoord.js":"GpvC"}],"kKjj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./TileEventType.js")),e=u(require("./Tile.js")),i=s(require("../TileState.js")),n=require("../tileurlfunction.js"),r=require("../tilecoord.js"),o=require("../util.js");function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=n?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(l){function u(t){var e=l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return e.generateTileUrlFunction_=e.tileUrlFunction===u.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return c(u,l),u.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},u.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},u.prototype.getUrls=function(){return this.urls},u.prototype.handleTileChange=function(n){var r,l=n.target,u=(0,o.getUid)(l),s=l.getState();s==i.default.LOADING?(this.tileLoadingKeys_[u]=!0,r=t.default.TILELOADSTART):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],r=s==i.default.ERROR?t.default.TILELOADERROR:s==i.default.LOADED?t.default.TILELOADEND:void 0),null!=r&&this.dispatchEvent(new e.TileSourceEvent(r,l))},u.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},u.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},u.prototype.setUrl=function(t){var e=(0,n.expandUrl)(t);this.urls=e,this.setUrls(e)},u.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,n.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)},u.prototype.tileUrlFunction=function(t,e,i){},u.prototype.useTile=function(t,e,i){var n=(0,r.getKeyZXY)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},u}(e.default),p=a;exports.default=p;
},{"./TileEventType.js":"odY2","./Tile.js":"L7OL","../TileState.js":"TPVv","../tileurlfunction.js":"WLnk","../tilecoord.js":"GpvC","../util.js":"bmrL"}],"kmg8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Tile.js")),t=require("./dom.js"),r=require("./util.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=[],u=function(e){function o(t,r,o,n){var i=e.call(this,t,r,{transition:0})||this;return i.context_={},i.executorGroups={},i.declutterExecutorGroups={},i.loadingSourceTiles=0,i.errorSourceTileKeys={},i.hitDetectionImageData={},i.replayState_={},i.sourceTiles=null,i.wantedResolution,i.getSourceTiles=n.bind(void 0,i),i.sourceZ=-1,i.hifi=!1,i.wrappedTileCoord=o,i}return n(o,e),o.prototype.getContext=function(e){var o=(0,r.getUid)(e);return o in this.context_||(this.context_[o]=(0,t.createCanvasContext2D)(1,1,i)),this.context_[o]},o.prototype.hasContext=function(e){return(0,r.getUid)(e)in this.context_},o.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},o.prototype.getReplayState=function(e){var t=(0,r.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[t]},o.prototype.load=function(){this.getSourceTiles()},o.prototype.release=function(){for(var t in this.context_)i.push(this.context_[t].canvas),delete this.context_[t];e.prototype.release.call(this)},o}(e.default),s=u;exports.default=s;
},{"./Tile.js":"lLEG","./dom.js":"N5LR","./util.js":"bmrL"}],"LtzO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultLoadFunction=T,exports.default=void 0;var e=f(require("../events/EventType.js")),t=f(require("../VectorTile.js")),i=f(require("../TileCache.js")),r=f(require("../TileState.js")),o=f(require("./UrlTile.js")),n=f(require("../VectorRenderTile.js")),l=require("../extent.js"),a=require("../tilegrid.js"),s=require("../array.js"),u=require("../tilecoord.js"),c=require("../featureloader.js"),d=require("../size.js");function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(o){function c(e){var r=this,n=e.projection||"EPSG:3857",l=e.extent||(0,a.extentFromProjection)(n),s=e.tileGrid||(0,a.createXYZ)({extent:l,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=o.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:T,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new i.default(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:t.default,r.tileGrids_={},r}return h(c,o),c.prototype.getFeaturesInExtent=function(e){var t=[],i=this.tileCache;if(0===i.getCount())return t;var o=(0,u.fromKey)(i.peekFirstKey())[0],n=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]===o&&i.getState()===r.default.LOADED)for(var a=i.getSourceTiles(),s=0,u=a.length;s<u;++s){var c=a[s],d=c.tileCoord;if((0,l.intersects)(e,n.getTileCoordExtent(d))){var f=c.getFeatures();if(f)for(var h=0,p=f.length;h<p;++h){var g=f[h],T=g.getGeometry();(0,l.intersects)(e,T.getExtent())&&t.push(g)}}}}),t},c.prototype.getOverlaps=function(){return this.overlaps_},c.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},c.prototype.expireCache=function(e,t){o.prototype.expireCache.call(this,e,t),this.sourceTileCache.expireCache({})},c.prototype.getSourceTiles=function(t,i,o){var n=o.wrappedTileCoord,a=this.getTileGridForProjection(i),u=a.getTileCoordExtent(n),c=n[0],d=a.getResolution(c);(0,l.buffer)(u,-d,u);var f=this.tileGrid,h=f.getExtent();h&&(0,l.getIntersection)(u,h,u);var p,g,T,v=f.getZForResolution(d,1),C=f.getMinZoom(),E=o.sourceTiles;if(E&&E.length>0&&E[0].tileCoord[0]===v)p=E,g=!0,T=v;else{p=[],T=v+1;do{--T,g=!0,f.forEachTileCoord(u,T,function(n){var l,a=this.tileUrlFunction(n,t,i);if(void 0!==a)if(this.sourceTileCache.containsKey(a)){var s=(l=this.sourceTileCache.get(a)).getState();if(s===r.default.LOADED||s===r.default.ERROR||s===r.default.EMPTY)return void p.push(l)}else T===v&&((l=new this.tileClass(n,r.default.IDLE,a,this.format_,this.tileLoadFunction)).extent=f.getTileCoordExtent(n),l.projection=i,l.resolution=f.getResolution(n[0]),this.sourceTileCache.set(a,l),l.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),l.load());g=g&&l&&l.getState()===r.default.LOADED,l&&l.getState()!==r.default.EMPTY&&o.getState()===r.default.IDLE&&(o.loadingSourceTiles++,l.addEventListener(e.default.CHANGE,function t(){var i=l.getState(),n=l.getKey();if(i===r.default.LOADED||i===r.default.ERROR){i===r.default.LOADED?(l.removeEventListener(e.default.CHANGE,t),o.loadingSourceTiles--,delete o.errorSourceTileKeys[n]):i===r.default.ERROR&&(o.errorSourceTileKeys[n]=!0);var a=Object.keys(o.errorSourceTileKeys).length;o.loadingSourceTiles-a==0&&(o.hifi=0===a,o.sourceZ=v,o.setState(r.default.LOADED))}}))}.bind(this)),g||(p.length=0)}while(!g&&T>C)}return o.getState()===r.default.IDLE&&o.setState(r.default.LOADING),g&&(o.hifi=v===T,o.sourceZ=T,o.getState()<r.default.LOADED?o.setState(r.default.LOADED):E&&(0,s.equals)(p,E)||(o.sourceTiles=p)),p},c.prototype.getTile=function(e,t,i,o,a){var s,c=(0,u.getKeyZXY)(e,t,i),d=this.getKey();if(this.tileCache.containsKey(c)&&(s=this.tileCache.get(c)).key===d)return s;var f=[e,t,i],h=this.getTileCoordForTileUrlFunction(f,a),p=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(a);if(h&&p){var T=g.getTileCoordExtent(h);(0,l.buffer)(T,-g.getResolution(e),T),(0,l.intersects)(p,T)||(h=null)}var v=!0;if(null!==h){var C=this.tileGrid,E=g.getResolution(e),y=C.getZForResolution(E,1),S=g.getTileCoordExtent(h);(0,l.buffer)(S,-E,S),C.forEachTileCoord(S,y,function(e){v=v&&!this.tileUrlFunction(e,o,a)}.bind(this))}var x=new n.default(f,v?r.default.EMPTY:r.default.IDLE,h,this.getSourceTiles.bind(this,o,a));return x.key=d,s?(x.interimTile=s,x.refreshInterimChain(),this.tileCache.replace(c,x)):this.tileCache.set(c,x),x},c.prototype.getTileGridForProjection=function(e){var t=e.getCode(),i=this.tileGrids_[t];if(!i){var r=this.tileGrid;i=(0,a.createForProjection)(e,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.tileGrids_[t]=i}return i},c.prototype.getTilePixelRatio=function(e){return e},c.prototype.getTilePixelSize=function(e,t,i){var r=this.getTileGridForProjection(i),o=(0,d.toSize)(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]},c.prototype.updateCacheSize=function(e,t){o.prototype.updateCacheSize.call(this,2*e,t)},c}(o.default),g=p;function T(e,t){e.setLoader(function(i,r,o){(0,c.loadFeaturesXhr)(t,e.getFormat(),i,r,o,e.onLoad.bind(e),e.onError.bind(e))})}exports.default=g;
},{"../events/EventType.js":"lUmy","../VectorTile.js":"bj7C","../TileCache.js":"g4cv","../TileState.js":"TPVv","./UrlTile.js":"kKjj","../VectorRenderTile.js":"kmg8","../extent.js":"pbFF","../tilegrid.js":"zlz6","../array.js":"u3be","../tilecoord.js":"GpvC","../featureloader.js":"zAQH","../size.js":"XzjU"}],"y5uw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformGeometryWithOptions=u,exports.transformExtentWithOptions=c,exports.default=void 0;var t=n(require("../proj/Units.js")),e=require("../util.js"),r=require("../obj.js"),o=require("../proj.js");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function n(){this.dataProjection=null,this.defaultFeatureProjection=null}return n.prototype.getReadOptions=function(e,r){var n;if(r){var a=r.dataProjection?(0,o.get)(r.dataProjection):this.readProjection(e);r.extent&&a&&a.getUnits()===t.default.TILE_PIXELS&&(a=(0,o.get)(a)).setWorldExtent(r.extent),n={dataProjection:a,featureProjection:r.featureProjection}}return this.adaptOptions(n)},n.prototype.adaptOptions=function(t){return(0,r.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},n.prototype.getType=function(){return(0,e.abstract)()},n.prototype.readFeature=function(t,r){return(0,e.abstract)()},n.prototype.readFeatures=function(t,r){return(0,e.abstract)()},n.prototype.readGeometry=function(t,r){return(0,e.abstract)()},n.prototype.readProjection=function(t){return(0,e.abstract)()},n.prototype.writeFeature=function(t,r){return(0,e.abstract)()},n.prototype.writeFeatures=function(t,r){return(0,e.abstract)()},n.prototype.writeGeometry=function(t,r){return(0,e.abstract)()},n}(),i=a;function u(t,e,r){var n,a=r?(0,o.get)(r.featureProjection):null,i=r?(0,o.get)(r.dataProjection):null;if(n=a&&i&&!(0,o.equivalent)(a,i)?(e?t.clone():t).transform(e?a:i,e?i:a):t,e&&r&&void 0!==r.decimals){var u=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t})}return n}function c(t,e){var r=e?(0,o.get)(e.featureProjection):null,n=e?(0,o.get)(e.dataProjection):null;return r&&n&&!(0,o.equivalent)(r,n)?(0,o.transformExtent)(t,n,r):t}exports.default=i;
},{"../proj/Units.js":"IrdK","../util.js":"bmrL","../obj.js":"lPyT","../proj.js":"bkYg"}],"O1Qa":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"vAY4":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"O1Qa"}],"AUmC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("../geom/GeometryType.js")),e=require("../transform.js"),r=require("../extent.js"),i=require("../array.js"),o=require("../geom/flat/interiorpoint.js"),n=require("../proj.js"),s=require("../geom/flat/interpolate.js"),a=require("../geom/flat/center.js"),p=require("../geom/flat/transform.js");function f(t){return t&&t.__esModule?t:{default:t}}var l=(0,e.create)(),d=function(){function f(t,e,r,i,o){this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i}return f.prototype.get=function(t){return this.properties_[t]},f.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===t.default.POINT?(0,r.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,r.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},f.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=(0,r.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,o.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},f.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=(0,a.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,o.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},f.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,s.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},f.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,o=0,n=r.length;o<n;++o){var a=r[o],p=(0,s.interpolatePoint)(t,e,a,2,.5);(0,i.extend)(this.flatMidpoints_,p),e=a}}return this.flatMidpoints_},f.prototype.getId=function(){return this.id_},f.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},f.prototype.getGeometry=function(){return this},f.prototype.getSimplifiedGeometry=function(t){return this},f.prototype.simplifyTransformed=function(t,e){return this},f.prototype.getProperties=function(){return this.properties_},f.prototype.getStride=function(){return 2},f.prototype.getStyleFunction=function(){},f.prototype.getType=function(){return this.type_},f.prototype.transform=function(t){var i=(t=(0,n.get)(t)).getExtent(),o=t.getWorldExtent();if(i&&o){var s=(0,r.getHeight)(o)/(0,r.getHeight)(i);(0,e.compose)(l,o[0],o[3],s,-s,0,0,0),(0,p.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,l,this.flatCoordinates_)}},f.prototype.getEnds=function(){return this.ends_},f}();d.prototype.getEndss=d.prototype.getEnds,d.prototype.getFlatCoordinates=d.prototype.getOrientedFlatCoordinates;var u=d;exports.default=u;
},{"../geom/GeometryType.js":"qBtD","../transform.js":"ePpI","../extent.js":"pbFF","../array.js":"u3be","../geom/flat/interiorpoint.js":"Q2uF","../proj.js":"bkYg","../geom/flat/interpolate.js":"uaOF","../geom/flat/center.js":"Vkwe","../geom/flat/transform.js":"FOrd"}],"o3S5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=m(require("./Feature.js")),r=v(require("./FormatType.js")),t=v(require("../geom/GeometryLayout.js")),a=v(require("../geom/GeometryType.js")),n=v(require("../geom/LineString.js")),o=v(require("../geom/MultiLineString.js")),i=v(require("../geom/MultiPoint.js")),u=v(require("../geom/MultiPolygon.js")),s=v(require("pbf")),l=v(require("../geom/Point.js")),f=v(require("../geom/Polygon.js")),d=v(require("../proj/Projection.js")),p=v(require("../render/Feature.js")),y=v(require("../proj/Units.js")),c=require("../asserts.js"),_=require("../proj.js"),h=require("../geom/flat/orient.js");function v(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}var j=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(r,t)};return function(r,t){function a(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),P=function(v){function g(e){var r=v.call(this)||this,t=e||{};return r.dataProjection=new d.default({code:"",units:y.default.TILE_PIXELS}),r.featureClass_=t.featureClass?t.featureClass:p.default,r.geometryName_=t.geometryName,r.layerName_=t.layerName?t.layerName:"layer",r.layers_=t.layers?t.layers:null,r.idProperty_=t.idProperty,r}return j(g,v),g.prototype.readRawGeometry_=function(e,r,t,a){e.pos=r.geometry;for(var n=e.readVarint()+e.pos,o=1,i=0,u=0,s=0,l=0,f=0;e.pos<n;){if(!i){var d=e.readVarint();o=7&d,i=d>>3}i--,1===o||2===o?(u+=e.readSVarint(),s+=e.readSVarint(),1===o&&l>f&&(a.push(l),f=l),t.push(u,s),l+=2):7===o?l>f&&(t.push(t[f],t[f+1]),l+=2):(0,c.assert)(!1,59)}l>f&&(a.push(l),f=l)},g.prototype.createFeature_=function(r,s,d){var y,c=s.type;if(0===c)return null;var _,v=s.properties;this.idProperty_?(_=v[this.idProperty_],delete v[this.idProperty_]):_=s.id,v[this.layerName_]=s.layer.name;var g=[],m=[];this.readRawGeometry_(r,s,g,m);var j=V(c,m.length);if(this.featureClass_===p.default)(y=new this.featureClass_(j,g,m,v,_)).transform(d.dataProjection);else{var P=void 0;if(j==a.default.POLYGON){for(var O=[],N=0,w=0,I=0,q=m.length;I<q;++I){var L=m[I];if((0,h.linearRingIsClockwise)(g,N,L,2)){if(0===O.length)continue;O[O.length-1].push(m[w])}else O.push(m.slice(w,I+1));w=I+1,N=L}P=O.length>1?new u.default(g,t.default.XY,O):new f.default(g,t.default.XY,m)}else P=j===a.default.POINT?new l.default(g,t.default.XY):j===a.default.LINE_STRING?new n.default(g,t.default.XY):j===a.default.POLYGON?new f.default(g,t.default.XY,m):j===a.default.MULTI_POINT?new i.default(g,t.default.XY):j===a.default.MULTI_LINE_STRING?new o.default(g,t.default.XY,m):null;y=new(0,this.featureClass_),this.geometryName_&&y.setGeometryName(this.geometryName_);var T=(0,e.transformGeometryWithOptions)(P,!1,d);y.setGeometry(T),y.setId(_),y.setProperties(v,!0)}return y},g.prototype.getType=function(){return r.default.ARRAY_BUFFER},g.prototype.readFeatures=function(e,r){var t=this.layers_,a=this.adaptOptions(r),n=(0,_.get)(a.dataProjection);n.setWorldExtent(a.extent),a.dataProjection=n;var o=new s.default(e),i=o.readFields(O,{}),u=[];for(var l in i)if(!t||-1!=t.indexOf(l)){var f=i[l],d=f?[0,0,f.extent,f.extent]:null;n.setExtent(d);for(var p=0,y=f.length;p<y;++p){var c=I(o,f,p);u.push(this.createFeature_(o,c,a))}}return u},g.prototype.readProjection=function(e){return this.dataProjection},g.prototype.setLayers=function(e){this.layers_=e},g}(e.default);function O(e,r,t){if(3===e){var a={keys:[],values:[],features:[]},n=t.readVarint()+t.pos;t.readFields(N,a,n),a.length=a.features.length,a.length&&(r[a.name]=a)}}function N(e,r,t){if(15===e)r.version=t.readVarint();else if(1===e)r.name=t.readString();else if(5===e)r.extent=t.readVarint();else if(2===e)r.features.push(t.pos);else if(3===e)r.keys.push(t.readString());else if(4===e){for(var a=null,n=t.readVarint()+t.pos;t.pos<n;)a=1===(e=t.readVarint()>>3)?t.readString():2===e?t.readFloat():3===e?t.readDouble():4===e?t.readVarint64():5===e?t.readVarint():6===e?t.readSVarint():7===e?t.readBoolean():null;r.values.push(a)}}function w(e,r,t){if(1==e)r.id=t.readVarint();else if(2==e)for(var a=t.readVarint()+t.pos;t.pos<a;){var n=r.layer.keys[t.readVarint()],o=r.layer.values[t.readVarint()];r.properties[n]=o}else 3==e?r.type=t.readVarint():4==e&&(r.geometry=t.pos)}function I(e,r,t){e.pos=r.features[t];var a=e.readVarint()+e.pos,n={layer:r,type:0,properties:{}};return e.readFields(w,n,a),n}function V(e,r){var t;return 1===e?t=1===r?a.default.POINT:a.default.MULTI_POINT:2===e?t=1===r?a.default.LINE_STRING:a.default.MULTI_LINE_STRING:3===e&&(t=a.default.POLYGON),t}var q=P;exports.default=q;
},{"./Feature.js":"y5uw","./FormatType.js":"xICm","../geom/GeometryLayout.js":"fUWX","../geom/GeometryType.js":"qBtD","../geom/LineString.js":"ArTU","../geom/MultiLineString.js":"YkYz","../geom/MultiPoint.js":"UXVJ","../geom/MultiPolygon.js":"ZcrM","pbf":"vAY4","../geom/Point.js":"fTqU","../geom/Polygon.js":"kEvS","../proj/Projection.js":"xIXc","../render/Feature.js":"AUmC","../proj/Units.js":"IrdK","../asserts.js":"hgi2","../proj.js":"bkYg","../geom/flat/orient.js":"ApPt"}],"z0v0":[function(require,module,exports) {
var a={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},e=" ",r=/(italic|oblique)$/i,l={};module.exports=function(o,t,i){var n=l[o];if(!n){Array.isArray(o)||(o=[o]);for(var p=400,b="normal",c=[],h=0,s=o.length;h<s;++h){var u=o[h].split(" "),d=u[u.length-1].toLowerCase();for(var m in"normal"==d||"italic"==d||"oblique"==d?(b=d,u.pop(),d=u[u.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),b=u[u.length-1].replace(d,"")),a)if(d==m||d==m.replace("-","")||d==m.replace("-",e)){p=a[m],u.pop();break}"number"==typeof d&&(p=d);var f=u.join(e).replace("Klokantech Noto Sans","Noto Sans");-1!==f.indexOf(e)&&(f='"'+f+'"'),c.push(f)}n=l[o]=[b,p,c]}return n[0]+e+n[1]+e+t+"px"+(i?"/"+i:"")+e+n[2]};
},{}],"QAnv":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"ZCp3":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"fe91":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"QAnv","ieee754":"O1Qa","isarray":"ZCp3","buffer":"fe91"}],"tVGL":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.composite=_n,exports.convertFilter=vn,exports.derefLayers=In,exports.diff=Un,exports.featureFilter=cn,exports.format=H,exports.migrate=Tn,exports.validate=Si,exports.validateMapboxApiSupported=Ei,exports.visit=exports.v8=exports.latest=exports.function=exports.expression=exports.ValidationError=exports.ParsingError=exports.Color=void 0;var o=8,r={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},n={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},i=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],a={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},s={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},l={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},u={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},c={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},p={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},d={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},h=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],f={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},y={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"constant"}},m={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},g={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},b={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},v={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},x={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},w={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},k={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},j={type:"array",value:"*",doc:"A filter selects specific features from a layer."},z={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},S={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},T={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},_={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},$={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},A={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},I={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},q={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},O=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],C={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},E={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},M={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},N={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},P={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},R={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},D={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},L={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},F={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0 is directly above, at zenith, and 90 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0 is directly above, at zenith, and 90 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},U={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},J={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},G={$version:o,$root:r,sources:n,source:i,source_vector:a,source_raster:s,source_raster_dem:l,source_geojson:u,source_video:c,source_image:p,layer:d,layout:h,layout_background:f,layout_sky:y,layout_fill:m,layout_circle:g,layout_heatmap:b,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:v,layout_symbol:x,layout_raster:w,layout_hillshade:k,filter:j,filter_operator:z,geometry_type:S,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:T,expression:_,expression_name:$,fog:A,light:I,terrain:q,paint:O,paint_fill:C,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:E,paint_circle:M,paint_heatmap:N,paint_symbol:P,paint_raster:R,paint_hillshade:D,paint_background:L,paint_sky:F,transition:U,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:J};exports.v8=exports.latest=G;var W=/("(?:[^\\"]|\\.)*")|[:,]/g,B=function(e,t){var o,r,n;return t=t||{},o=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),r=""===o?1/0:void 0===t.maxLength?80:t.maxLength,n=t.replacer,function e(t,i,a){var s,l,u,c,p,d,h,f,y,m,g,b;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(g=JSON.stringify(t,n)))return g;if(h=r-i.length-a,g.length<=h&&(y=g.replace(W,function(e,t){return t||e+" "})).length<=h)return y;if(null!=n&&(t=JSON.parse(g),n=void 0),"object"==typeof t&&null!==t){if(f=i+o,u=[],l=0,Array.isArray(t))for(m="[",s="]",h=t.length;l<h;l++)u.push(e(t[l],f,l===h-1?0:1)||"null");else for(m="{",s="}",h=(d=Object.keys(t)).length;l<h;l++)c=d[l],p=JSON.stringify(c)+": ",void 0!==(b=e(t[c],f,p.length+(l===h-1?0:1)))&&u.push(p+b);if(u.length>0)return[m,o+u.join(",\n"+f),s].join("\n"+i)}return g}(e,"",0)};function V(e,t){const o={};for(const r in t)void 0!==e[r]&&(o[r]=e[r]);for(const r in e)void 0===o[r]&&(o[r]=e[r]);return o}function H(e,t=2){return(e=V(e,G.$root)).layers&&(e.layers=e.layers.map(e=>V(e,G.layer))),B(e,{indent:t})}var Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function X(e){var t={exports:{}};return e(t,t.exports),t.exports}function K(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var Y=X(function(e,t){!function(o){var r=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,i="object"==typeof Z&&Z;i.global!==i&&i.window!==i&&i.self!==i||(o=i);var a,s,l=2147483647,u=36,c=1,p=26,d=38,h=700,f=72,y=128,m="-",g=/^xn--/,b=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-c,k=Math.floor,j=String.fromCharCode;function z(e){throw RangeError(x[e])}function S(e,t){for(var o=e.length,r=[];o--;)r[o]=t(e[o]);return r}function T(e,t){var o=e.split("@"),r="";return o.length>1&&(r=o[0]+"@",e=o[1]),r+S((e=e.replace(v,".")).split("."),t).join(".")}function _(e){for(var t,o,r=[],n=0,i=e.length;n<i;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i?56320==(64512&(o=e.charCodeAt(n++)))?r.push(((1023&t)<<10)+(1023&o)+65536):(r.push(t),n--):r.push(t);return r}function $(e){return S(e,function(e){var t="";return e>65535&&(t+=j((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,o){var r=0;for(e=o?k(e/h):e>>1,e+=k(e/t);e>w*p>>1;r+=u)e=k(e/w);return k(r+(w+1)*e/(e+d))}function q(e){var t,o,r,n,i,a,s,d,h,g,b,v=[],x=e.length,w=0,j=y,S=f;for((o=e.lastIndexOf(m))<0&&(o=0),r=0;r<o;++r)e.charCodeAt(r)>=128&&z("not-basic"),v.push(e.charCodeAt(r));for(n=o>0?o+1:0;n<x;){for(i=w,a=1,s=u;n>=x&&z("invalid-input"),((d=(b=e.charCodeAt(n++))-48<10?b-22:b-65<26?b-65:b-97<26?b-97:u)>=u||d>k((l-w)/a))&&z("overflow"),w+=d*a,!(d<(h=s<=S?c:s>=S+p?p:s-S));s+=u)a>k(l/(g=u-h))&&z("overflow"),a*=g;S=I(w-i,t=v.length+1,0==i),k(w/t)>l-j&&z("overflow"),j+=k(w/t),w%=t,v.splice(w++,0,j)}return $(v)}function O(e){var t,o,r,n,i,a,s,d,h,g,b,v,x,w,S,T=[];for(v=(e=_(e)).length,t=y,o=0,i=f,a=0;a<v;++a)(b=e[a])<128&&T.push(j(b));for(r=n=T.length,n&&T.push(m);r<v;){for(s=l,a=0;a<v;++a)(b=e[a])>=t&&b<s&&(s=b);for(s-t>k((l-o)/(x=r+1))&&z("overflow"),o+=(s-t)*x,t=s,a=0;a<v;++a)if((b=e[a])<t&&++o>l&&z("overflow"),b==t){for(d=o,h=u;!(d<(g=h<=i?c:h>=i+p?p:h-i));h+=u)S=d-g,w=u-g,T.push(j(A(g+S%w,0))),d=k(S/w);T.push(j(A(d,0))),i=I(o,x,r==n),o=0,++r}++o,++t}return T.join("")}if(a={version:"1.3.2",ucs2:{decode:_,encode:$},decode:q,encode:O,toASCII:function(e){return T(e,function(e){return b.test(e)?"xn--"+O(e):e})},toUnicode:function(e){return T(e,function(e){return g.test(e)?q(e.slice(4).toLowerCase()):e})}},r&&n)if(e.exports==r)n.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else o.punycode=a}(Z)}),Q={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}};function ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var te=function(e,t,o,r){t=t||"&",o=o||"=";var n={};if("string"!=typeof e||0===e.length)return n;var i=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u,c,p,d,h=e[l].replace(i,"%20"),f=h.indexOf(o);f>=0?(u=h.substr(0,f),c=h.substr(f+1)):(u=h,c=""),p=decodeURIComponent(u),d=decodeURIComponent(c),ee(n,p)?Array.isArray(n[p])?n[p].push(d):n[p]=[n[p],d]:n[p]=d}return n},oe=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},re=function(e,t,o,r){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(r){var n=encodeURIComponent(oe(r))+o;return Array.isArray(e[r])?e[r].map(function(e){return n+encodeURIComponent(oe(e))}).join(t):n+encodeURIComponent(oe(e[r]))}).join(t):r?encodeURIComponent(oe(r))+o+encodeURIComponent(oe(e)):""},ne=X(function(e,t){t.decode=t.parse=te,t.encode=t.stringify=re}),ie=Se,ae=_e,se=$e,le=Te,ue=ce;function ce(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var pe=/^([a-z0-9.+-]+:)/i,de=/:[0-9]*$/,he=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fe=["<",">",'"',"`"," ","\r","\n","\t"],ye=["{","}","|","\\","^","`"].concat(fe),me=["'"].concat(ye),ge=["%","/","?",";","#"].concat(me),be=["/","?","#"],ve=255,xe=/^[+a-z0-9A-Z_-]{0,63}$/,we=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ke={javascript:!0,"javascript:":!0},je={javascript:!0,"javascript:":!0},ze={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Se(e,t,o){if(e&&Q.isObject(e)&&e instanceof ce)return e;var r=new ce;return r.parse(e,t,o),r}function Te(e){return Q.isString(e)&&(e=Se(e)),e instanceof ce?e.format():ce.prototype.format.call(e)}function _e(e,t){return Se(e,!1,!0).resolve(t)}function $e(e,t){return e?Se(e,!1,!0).resolveObject(t):t}ce.prototype.parse=function(e,t,o){if(!Q.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),n=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var a=e=i.join(n);if(a=a.trim(),!o&&1===e.split("#").length){var s=he.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?ne.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=pe.exec(a);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,a=a.substr(l.length)}if(o||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||l&&je[l]||(a=a.substr(2),this.slashes=!0)}if(!je[l]&&(c||l&&!ze[l])){for(var p,d,h=-1,f=0;f<be.length;f++){-1!==(y=a.indexOf(be[f]))&&(-1===h||y<h)&&(h=y)}-1!==(d=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(p=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(p)),h=-1;for(f=0;f<ge.length;f++){var y;-1!==(y=a.indexOf(ge[f]))&&(-1===h||y<h)&&(h=y)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),b=(f=0,g.length);f<b;f++){var v=g[f];if(v&&!v.match(xe)){for(var x="",w=0,k=v.length;w<k;w++)v.charCodeAt(w)>127?x+="x":x+=v[w];if(!x.match(xe)){var j=g.slice(0,f),z=g.slice(f+1),S=v.match(we);S&&(j.push(S[1]),z.unshift(S[2])),z.length&&(a="/"+z.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>ve?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=Y.toASCII(this.hostname));var T=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+T,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!ke[u])for(f=0,b=me.length;f<b;f++){var $=me[f];if(-1!==a.indexOf($)){var A=encodeURIComponent($);A===$&&(A=escape($)),a=a.split($).join(A)}}var I=a.indexOf("#");-1!==I&&(this.hash=a.substr(I),a=a.slice(0,I));var q=a.indexOf("?");if(-1!==q?(this.search=a.substr(q),this.query=a.substr(q+1),t&&(this.query=ne.parse(this.query)),a=a.slice(0,q)):t&&(this.search="",this.query={}),a&&(this.pathname=a),ze[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var O=this.search||"";this.path=T+O}return this.href=this.format(),this},ce.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",o=this.pathname||"",r=this.hash||"",n=!1,i="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Q.isObject(this.query)&&Object.keys(this.query).length&&(i=ne.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||ze[t])&&!1!==n?(n="//"+(n||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+n+(o=o.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},ce.prototype.resolve=function(e){return this.resolveObject(Se(e,!1,!0)).format()},ce.prototype.resolveObject=function(e){if(Q.isString(e)){var t=new ce;t.parse(e,!1,!0),e=t}for(var o=new ce,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];o[i]=this[i]}if(o.hash=e.hash,""===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(o[l]=e[l])}return ze[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!ze[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var p=u[c];o[p]=e[p]}return o.href=o.format(),o}if(o.protocol=e.protocol,e.host||je[e.protocol])o.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),o.pathname=d.join("/")}if(o.search=e.search,o.query=e.query,o.host=e.host||"",o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,o.pathname||o.search){var h=o.pathname||"",f=o.search||"";o.path=h+f}return o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var y=o.pathname&&"/"===o.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=m||y||o.host&&e.pathname,b=g,v=o.pathname&&o.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],o.protocol&&!ze[o.protocol]);if(x&&(o.hostname="",o.port=null,o.host&&(""===v[0]?v[0]=o.host:v.unshift(o.host)),o.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),g=g&&(""===d[0]||""===v[0])),m)o.host=e.host||""===e.host?e.host:o.host,o.hostname=e.hostname||""===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,v=d;else if(d.length)v||(v=[]),v.pop(),v=v.concat(d),o.search=e.search,o.query=e.query;else if(!Q.isNullOrUndefined(e.search)){if(x)o.hostname=o.host=v.shift(),(S=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=S.shift(),o.host=o.hostname=S.shift());return o.search=e.search,o.query=e.query,Q.isNull(o.pathname)&&Q.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o}if(!v.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var w=v.slice(-1)[0],k=(o.host||e.host||v.length>1)&&("."===w||".."===w)||""===w,j=0,z=v.length;z>=0;z--)"."===(w=v[z])?v.splice(z,1):".."===w?(v.splice(z,1),j++):j&&(v.splice(z,1),j--);if(!g&&!b)for(;j--;j)v.unshift("..");!g||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),k&&"/"!==v.join("/").substr(-1)&&v.push("");var S,T=""===v[0]||v[0]&&"/"===v[0].charAt(0);x&&(o.hostname=o.host=T?"":v.length?v.shift():"",(S=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=S.shift(),o.host=o.hostname=S.shift()));return(g=g||o.host&&v.length)&&!T&&v.unshift(""),v.length?o.pathname=v.join("/"):(o.pathname=null,o.path=null),Q.isNull(o.pathname)&&Q.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},ce.prototype.parseHost=function(){var e=this.host,t=de.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Ae={parse:ie,resolve:ae,resolveObject:se,format:le,Url:ue};function Ie(e){for(let t=0;t<G.layout.length;t++)for(const o in G[G.layout[t]])if(o===e)return G[G.layout[t]][o];for(let t=0;t<G.paint.length;t++)for(const o in G[G.paint[t]])if(o===e)return G[G.paint[t]][o];return null}function qe(e,t){for(const o in e.sources)t(e.sources[o])}function Oe(e,t){for(const o of e.layers)t(o)}function Ce(e,t,o){function r(e,t){const r=e[t];r&&Object.keys(r).forEach(n=>{o({path:[e.id,t,n],key:n,value:r[n],reference:Ie(n),set(e){r[n]=e}})})}Oe(e,e=>{t.paint&&r(e,"paint"),t.layout&&r(e,"layout")})}function Ee(e,t){for(const o in e)0===o.indexOf("layout")&&t(e[o],o)}function Me(e,t){for(const o in e)0===o.indexOf("paint")&&t(e[o],o)}function Ne(e,t){return"string"==typeof t&&"@"===t[0]?Ne(e,e.constants[t]):t}function Pe(e){return Array.isArray(e.stops)}function Re(e,t,o){e[o]=e[t],delete e[t]}function De(e){e.version=8,qe(e,e=>{"video"===e.type&&void 0!==e.url&&Re(e,"url","urls"),"video"===e.type&&e.coordinates.forEach(e=>e.reverse())}),Oe(e,e=>{Ee(e,e=>{void 0!==e["symbol-min-distance"]&&Re(e,"symbol-min-distance","symbol-spacing")}),Me(e,e=>{void 0!==e["background-image"]&&Re(e,"background-image","background-pattern"),void 0!==e["line-image"]&&Re(e,"line-image","line-pattern"),void 0!==e["fill-image"]&&Re(e,"fill-image","fill-pattern")})}),Ce(e,{paint:!0,layout:!0},t=>{const o=Ne(e,t.value);Pe(o)&&o.stops.forEach(t=>{t[1]=Ne(e,t[1])}),t.set(o)}),delete e.constants,Oe(e,e=>{Ee(e,e=>{delete e["text-max-size"],delete e["icon-max-size"]}),Me(e,t=>{t["text-size"]&&(e.layout||(e.layout={}),e.layout["text-size"]=t["text-size"],delete t["text-size"]),t["icon-size"]&&(e.layout||(e.layout={}),e.layout["icon-size"]=t["icon-size"],delete t["icon-size"])})}),e.glyphs&&(e.glyphs=function(e){const t=Ae.parse(e),o=t.pathname.split("/");return"mapbox:"!==t.protocol?e:"fontstack"===t.hostname?"mapbox://fonts/mapbox/{fontstack}/{range}.pbf":"fonts"===t.hostname?`mapbox://fonts/${o[2]}/{fontstack}/{range}.pbf`:void 0}(e.glyphs)),Oe(e,e=>{Ee(e,e=>{e["text-font"]&&(e["text-font"]=function(e){function t(e){return e.split(",").map(e=>e.trim())}if(Array.isArray(e))return e;if("string"==typeof e)return t(e);if("object"==typeof e)return e.stops.forEach(e=>{e[1]=t(e[1])}),e;throw new Error("unexpected font value")}(e["text-font"]))})});let t=0;for(let r=e.layers.length-1;r>=0;r--){if("symbol"!==e.layers[r].type){t=r+1;break}}const o=e.layers.splice(t);return o.reverse(),e.layers=e.layers.concat(o),e}function Le(e,...t){for(const o of t)for(const t in o)e[t]=o[t];return e}class Fe extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Ue{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[o,r]of t)this.bindings[o]=r}concat(e){return new Ue(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Je={kind:"null"},Ge={kind:"number"},We={kind:"string"},Be={kind:"boolean"},Ve={kind:"color"},He={kind:"object"},Ze={kind:"value"},Xe={kind:"error"},Ke={kind:"collator"},Ye={kind:"formatted"},Qe={kind:"resolvedImage"};function et(e,t){return{kind:"array",itemType:e,N:t}}function tt(e){if("array"===e.kind){const t=tt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const ot=[Je,Ge,We,Be,Ve,Ye,He,et(Ze),Qe];function rt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!rt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of ot)if(!rt(e,t))return null}return`Expected ${tt(e)} but found ${tt(t)} instead.`}function nt(e,t){return t.some(t=>t.kind===e.kind)}function it(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}var at=X(function(e,t){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function n(e){return e<0?0:e>1?1:e}function i(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function a(e){return"%"===e[e.length-1]?n(parseFloat(e)/100):n(parseFloat(e))}function s(e,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?e+(t-e)*o*6:2*o<1?t:3*o<2?e+(t-e)*(2/3-o)*6:e}try{t.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in o)return o[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var c=n.substr(0,l),p=n.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==p.length)return null;d=a(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),d];case"hsla":if(4!==p.length)return null;d=a(p.pop());case"hsl":if(3!==p.length)return null;var h=(parseFloat(p[0])%360+360)%360/360,f=a(p[1]),y=a(p[2]),m=y<=.5?y*(f+1):y+f-y*f,g=2*y-m;return[r(255*s(g,m,h+1/3)),r(255*s(g,m,h)),r(255*s(g,m,h-1/3)),d];default:return null}}return null}}catch(l){}});class st{constructor(e,t,o,r=1){this.r=e,this.g=t,this.b=o,this.a=r}static parse(e){if(!e)return;if(e instanceof st)return e;if("string"!=typeof e)return;const t=at.parseCSSColor(e);return t?new st(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,o,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(o)},${r})`}toArray(){const{r:e,g:t,b:o,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*o/r,r]}}exports.Color=st,st.black=new st(0,0,0,1),st.white=new st(1,1,1,1),st.transparent=new st(0,0,0,0),st.red=new st(1,0,0,1),st.blue=new st(0,0,1,1);class lt{constructor(e,t,o){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ut{constructor(e,t,o,r,n){this.text=e,this.image=t,this.scale=o,this.fontStack=r,this.textColor=n}}class ct{constructor(e){this.sections=e}static fromString(e){return new ct([new ut(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof ct?e:ct.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const o={};t.fontStack&&(o["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(o["font-scale"]=t.scale),t.textColor&&(o["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(o)}return e}}class pt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new pt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function dt(e,t,o,r){if(!("number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof o&&o>=0&&o<=255)){return`Invalid rgba value [${("number"==typeof r?[e,t,o,r]:[e,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,o,r].join(", ")}]: 'a' must be between 0 and 1.`}function ht(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof st)return!0;if(e instanceof lt)return!0;if(e instanceof ct)return!0;if(e instanceof pt)return!0;if(Array.isArray(e)){for(const t of e)if(!ht(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!ht(e[t]))return!1;return!0}return!1}function ft(e){if(null===e)return Je;if("string"==typeof e)return We;if("boolean"==typeof e)return Be;if("number"==typeof e)return Ge;if(e instanceof st)return Ve;if(e instanceof lt)return Ke;if(e instanceof ct)return Ye;if(e instanceof pt)return Qe;if(Array.isArray(e)){const t=e.length;let o;for(const r of e){const e=ft(r);if(o){if(o===e)continue;o=Ze;break}o=e}return et(o||Ze,t)}return He}function yt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof st||e instanceof ct||e instanceof pt?e.toString():JSON.stringify(e)}class mt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ht(e[1]))return t.error("invalid value");const o=e[1];let r=ft(o);const n=t.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new mt(r,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof st?["rgba"].concat(this.value.toArray()):this.value instanceof ct?this.value.serialize():this.value}}class gt{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const bt={string:We,number:Ge,boolean:Be,object:He};class vt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let o,r=1;const n=e[0];if("array"===n){let n,i;if(e.length>2){const o=e[1];if("string"!=typeof o||!(o in bt)||"object"===o)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=bt[o],r++}else n=Ze;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);i=e[2],r++}o=et(n,i)}else o=bt[n];const i=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Ze);if(!o)return null;i.push(o)}return new vt(o,i)}evaluate(e){for(let t=0;t<this.args.length;t++){const o=this.args[t].evaluate(e);if(!rt(this.type,ft(o)))return o;if(t===this.args.length-1)throw new gt(`Expected value to be of type ${tt(this.type)}, but found ${tt(ft(o))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const o=e.itemType;if("string"===o.kind||"number"===o.kind||"boolean"===o.kind){t.push(o.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map(e=>e.serialize()))}}class xt{constructor(e){this.type=Ye,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&"object"==typeof o)return t.error("First argument must be an image or text section.");const r=[];let n=!1;for(let i=1;i<=e.length-1;++i){const o=e[i];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;let e=null;if(o["font-scale"]&&!(e=t.parse(o["font-scale"],1,Ge)))return null;let i=null;if(o["text-font"]&&!(i=t.parse(o["text-font"],1,et(We))))return null;let a=null;if(o["text-color"]&&!(a=t.parse(o["text-color"],1,Ve)))return null;const s=r[r.length-1];s.scale=e,s.font=i,s.textColor=a}else{const o=t.parse(e[i],1,Ze);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new xt(r)}evaluate(e){return new ct(this.sections.map(t=>{const o=t.content.evaluate(e);return ft(o)===Qe?new ut("",o,null,null,null):new ut(yt(o),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const o={};t.scale&&(o["font-scale"]=t.scale.serialize()),t.font&&(o["text-font"]=t.font.serialize()),t.textColor&&(o["text-color"]=t.textColor.serialize()),e.push(o)}return e}}class wt{constructor(e){this.type=Qe,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const o=t.parse(e[1],1,We);return o?new wt(o):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),o=pt.fromString(t);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(t)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const kt={"to-boolean":Be,"to-color":Ve,"to-number":Ge,"to-string":We};class jt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[0];if(("to-boolean"===o||"to-string"===o)&&2!==e.length)return t.error("Expected one argument.");const r=kt[o],n=[];for(let i=1;i<e.length;i++){const o=t.parse(e[i],i,Ze);if(!o)return null;n.push(o)}return new jt(r,n)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,o;for(const r of this.args){if(t=r.evaluate(e),o=null,t instanceof st)return t;if("string"==typeof t){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(o=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:dt(t[0],t[1],t[2],t[3])))return new st(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new gt(o||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const o of this.args){if(null===(t=o.evaluate(e)))return 0;const r=Number(t);if(!isNaN(r))return r}throw new gt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?ct.fromString(yt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?pt.fromString(yt(this.args[0].evaluate(e))):yt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new xt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new wt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}const zt=["Unknown","Point","LineString","Polygon"];class St{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=st.parse(e)),t}}class Tt{constructor(e,t,o,r){this.name=e,this.type=t,this._evaluate=o,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const o=e[0],r=Tt.definitions[o];if(!r)return t.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(r)?r[0]:r.type,i=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=i.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let s=null;for(const[l,u]of a){s=new no(t.registry,t.path,null,t.scope);const r=[];let i=!1;for(let t=1;t<e.length;t++){const o=e[t],n=Array.isArray(l)?l[t-1]:l.type,a=s.parse(o,1+r.length,n);if(!a){i=!0;break}r.push(a)}if(!i)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,o=r[e];s.concat(e+1).checkSubtype(t,o.type)}if(0===s.errors.length)return new Tt(o,n,u,r)}}if(1===a.length)t.errors.push(...s.errors);else{const o=(a.length?a:i).map(([e])=>_t(e)).join(" | "),r=[];for(let n=1;n<e.length;n++){const o=t.parse(e[n],1+r.length);if(!o)return null;r.push(tt(o.type))}t.error(`Expected arguments of type ${o}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Tt.definitions=t;for(const o in t)e[o]=Tt}}function _t(e){return Array.isArray(e)?`(${e.map(tt).join(", ")})`:`(${tt(e.type)}...)`}class $t{constructor(e,t,o){this.type=Ke,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const o=e[1];if("object"!=typeof o||Array.isArray(o))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==o["case-sensitive"]&&o["case-sensitive"],1,Be);if(!r)return null;const n=t.parse(void 0!==o["diacritic-sensitive"]&&o["diacritic-sensitive"],1,Be);if(!n)return null;let i=null;return o.locale&&!(i=t.parse(o.locale,1,We))?null:new $t(r,n,i)}evaluate(e){return new lt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const At=8192;function It(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function qt(e){return(180+e)/360}function Ot(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Ct(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function Et(e,t){const o=qt(e[0]),r=Ot(e[1]),n=Math.pow(2,t.z);return[Math.round(o*n*At),Math.round(r*n*At)]}function Mt(e,t,o){const r=e[0]-t[0],n=e[1]-t[1],i=e[0]-o[0],a=e[1]-o[1];return r*a-i*n==0&&r*i<=0&&n*a<=0}function Nt(e,t,o){return t[1]>e[1]!=o[1]>e[1]&&e[0]<(o[0]-t[0])*(e[1]-t[1])/(o[1]-t[1])+t[0]}function Pt(e,t){let o=!1;for(let r=0,n=t.length;r<n;r++){const n=t[r];for(let t=0,r=n.length;t<r-1;t++){if(Mt(e,n[t],n[t+1]))return!1;Nt(e,n[t],n[t+1])&&(o=!o)}}return o}function Rt(e,t){for(let o=0;o<t.length;o++)if(Pt(e,t[o]))return!0;return!1}function Dt(e,t){return e[0]*t[1]-e[1]*t[0]}function Lt(e,t,o,r){const n=e[0]-o[0],i=e[1]-o[1],a=t[0]-o[0],s=t[1]-o[1],l=r[0]-o[0],u=r[1]-o[1],c=n*u-l*i,p=a*u-l*s;return c>0&&p<0||c<0&&p>0}function Ft(e,t,o,r){const n=[t[0]-e[0],t[1]-e[1]];return 0!==Dt([r[0]-o[0],r[1]-o[1]],n)&&!(!Lt(e,t,o,r)||!Lt(o,r,e,t))}function Ut(e,t,o){for(const r of o)for(let o=0;o<r.length-1;++o)if(Ft(e,t,r[o],r[o+1]))return!0;return!1}function Jt(e,t){for(let o=0;o<e.length;++o)if(!Pt(e[o],t))return!1;for(let o=0;o<e.length-1;++o)if(Ut(e[o],e[o+1],t))return!1;return!0}function Gt(e,t){for(let o=0;o<t.length;o++)if(Jt(e,t[o]))return!0;return!1}function Wt(e,t,o){const r=[];for(let n=0;n<e.length;n++){const i=[];for(let r=0;r<e[n].length;r++){const a=Et(e[n][r],o);It(t,a),i.push(a)}r.push(i)}return r}function Bt(e,t,o){const r=[];for(let n=0;n<e.length;n++){const i=Wt(e[n],t,o);r.push(i)}return r}function Vt(e,t,o,r){if(e[0]<o[0]||e[0]>o[2]){const t=.5*r;let n=e[0]-o[0]>t?-r:o[0]-e[0]>t?r:0;0===n&&(n=e[0]-o[2]>t?-r:o[2]-e[0]>t?r:0),e[0]+=n}It(t,e)}function Ht(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function Zt(e,t,o,r){const n=Math.pow(2,r.z)*At,i=[r.x*At,r.y*At],a=[];for(const s of e)for(const e of s){const r=[e.x+i[0],e.y+i[1]];Vt(r,t,o,n),a.push(r)}return a}function Xt(e,t,o,r){const n=Math.pow(2,r.z)*At,i=[r.x*At,r.y*At],a=[];for(const s of e){const e=[];for(const o of s){const r=[o.x+i[0],o.y+i[1]];It(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=n/2){Ht(t);for(const e of a)for(const r of e)Vt(r,t,o,n)}return a}function Kt(e,t){const o=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const i=Wt(t.coordinates,r,n),a=Zt(e.geometry(),o,r,n);if(!Ct(o,r))return!1;for(const e of a)if(!Pt(e,i))return!1}if("MultiPolygon"===t.type){const i=Bt(t.coordinates,r,n),a=Zt(e.geometry(),o,r,n);if(!Ct(o,r))return!1;for(const e of a)if(!Rt(e,i))return!1}return!0}function Yt(e,t){const o=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const i=Wt(t.coordinates,r,n),a=Xt(e.geometry(),o,r,n);if(!Ct(o,r))return!1;for(const e of a)if(!Jt(e,i))return!1}if("MultiPolygon"===t.type){const i=Bt(t.coordinates,r,n),a=Xt(e.geometry(),o,r,n);if(!Ct(o,r))return!1;for(const e of a)if(!Gt(e,i))return!1}return!0}class Qt{constructor(e,t){this.type=Be,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ht(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const o=t.features[e].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Qt(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Qt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Qt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return Kt(e,this.geometries);if("LineString"===e.geometryType())return Yt(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function eo(e){if(e instanceof Tt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Qt)return!1;let t=!0;return e.eachChild(e=>{t&&!eo(e)&&(t=!1)}),t}function to(e){if(e instanceof Tt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!to(e)&&(t=!1)}),t}function oo(e,t){if(e instanceof Tt&&t.indexOf(e.name)>=0)return!1;let o=!0;return e.eachChild(e=>{o&&!oo(e,t)&&(o=!1)}),o}class ro{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const o=e[1];return t.scope.has(o)?new ro(o,t.scope.get(o)):t.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class no{constructor(e,t=[],o,r=new Ue,n=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=r,this.errors=n,this.expectedType=o}parse(e,t,o,r,n={}){return t?this.concat(t,o,r)._parse(e,n):this._parse(e,n)}_parse(e,t){function o(e,t,o){return"assert"===o?new vt(t,[e]):"coerce"===o?new jt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,r=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(e,r))return null}else n=o(n,e,t.typeAnnotation||"coerce");else n=o(n,e,t.typeAnnotation||"assert")}if(!(n instanceof mt)&&"resolvedImage"!==n.type.kind&&io(n)){const e=new St;try{n=new mt(n.type,n.evaluate(e))}catch(r){return this.error(r.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,o){const r="number"==typeof e?this.path.concat(e):this.path,n=o?this.scope.concat(o):this.scope;return new no(this.registry,r,t||null,n,this.errors)}error(e,...t){const o=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new Fe(o,e))}checkSubtype(e,t){const o=rt(e,t);return o&&this.error(o),o}}function io(e){if(e instanceof ro)return io(e.boundExpression);if(e instanceof Tt&&"error"===e.name)return!1;if(e instanceof $t)return!1;if(e instanceof Qt)return!1;const t=e instanceof jt||e instanceof vt;let o=!0;return e.eachChild(e=>{o=t?o&&io(e):o&&e instanceof mt}),!!o&&(eo(e)&&oo(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"]))}function ao(e,t){const o=e.length-1;let r,n,i=0,a=o,s=0;for(;i<=a;)if(r=e[s=Math.floor((i+a)/2)],n=e[s+1],r<=t){if(s===o||t<n)return s;i=s+1}else{if(!(r>t))throw new gt("Input is not a number.");a=s-1}return 0}class so{constructor(e,t,o){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,n]of o)this.labels.push(r),this.outputs.push(n)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const o=t.parse(e[1],1,Ge);if(!o)return null;const r=[];let n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let i=1;i<e.length;i+=2){const o=1===i?-1/0:e[i],a=e[i+1],s=i,l=i+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=t.parse(a,l,n);if(!u)return null;n=n||u.type,r.push([o,u])}return new so(n,o,r)}evaluate(e){const t=this.labels,o=this.outputs;if(1===t.length)return o[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return o[0].evaluate(e);const n=t.length;return r>=t[n-1]?o[n-1].evaluate(e):o[ao(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var lo=uo;function uo(e,t,o,r){this.cx=3*e,this.bx=3*(o-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=o,this.p2y=r}function co(e,t,o){return e*(1-o)+t*o}function po(e,t,o){return new st(co(e.r,t.r,o),co(e.g,t.g,o),co(e.b,t.b,o),co(e.a,t.a,o))}function ho(e,t,o){return e.map((e,r)=>co(e,t[r],o))}uo.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},uo.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},uo.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},uo.prototype.solveCurveX=function(e,t){var o,r,n,i,a;for(void 0===t&&(t=1e-6),n=e,a=0;a<8;a++){if(i=this.sampleCurveX(n)-e,Math.abs(i)<t)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=i/s}if((n=e)<(o=0))return o;if(n>(r=1))return r;for(;o<r;){if(i=this.sampleCurveX(n),Math.abs(i-e)<t)return n;e>i?o=n:r=n,n=.5*(r-o)+o}return n},uo.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var fo=Object.freeze({__proto__:null,number:co,color:po,array:ho});const yo=.95047,mo=1,go=1.08883,bo=4/29,vo=6/29,xo=3*vo*vo,wo=vo*vo*vo,ko=Math.PI/180,jo=180/Math.PI;function zo(e){return e>wo?Math.pow(e,1/3):e/xo+bo}function So(e){return e>vo?e*e*e:xo*(e-bo)}function To(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _o(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $o(e){const t=_o(e.r),o=_o(e.g),r=_o(e.b),n=zo((.4124564*t+.3575761*o+.1804375*r)/yo),i=zo((.2126729*t+.7151522*o+.072175*r)/mo);return{l:116*i-16,a:500*(n-i),b:200*(i-zo((.0193339*t+.119192*o+.9503041*r)/go)),alpha:e.a}}function Ao(e){let t=(e.l+16)/116,o=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=mo*So(t),o=yo*So(o),r=go*So(r),new st(To(3.2404542*o-1.5371385*t-.4985314*r),To(-.969266*o+1.8760108*t+.041556*r),To(.0556434*o-.2040259*t+1.0572252*r),e.alpha)}function Io(e,t,o){return{l:co(e.l,t.l,o),a:co(e.a,t.a,o),b:co(e.b,t.b,o),alpha:co(e.alpha,t.alpha,o)}}function qo(e){const{l:t,a:o,b:r}=$o(e),n=Math.atan2(r,o)*jo;return{h:n<0?n+360:n,c:Math.sqrt(o*o+r*r),l:t,alpha:e.a}}function Oo(e){const t=e.h*ko,o=e.c;return Ao({l:e.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:e.alpha})}function Co(e,t,o){const r=t-e;return e+o*(r>180||r<-180?r-360*Math.round(r/360):r)}function Eo(e,t,o){return{h:Co(e.h,t.h,o),c:co(e.c,t.c,o),l:co(e.l,t.l,o),alpha:co(e.alpha,t.alpha,o)}}const Mo={forward:$o,reverse:Ao,interpolate:Io},No={forward:qo,reverse:Oo,interpolate:Eo};var Po=Object.freeze({__proto__:null,lab:Mo,hcl:No});class Ro{constructor(e,t,o,r,n){this.type=e,this.operator=t,this.interpolation=o,this.input=r,this.labels=[],this.outputs=[];for(const[i,a]of n)this.labels.push(i),this.outputs.push(a)}static interpolationFactor(e,t,o,r){let n=0;if("exponential"===e.name)n=Do(t,e.base,o,r);else if("linear"===e.name)n=Do(t,1,o,r);else if("cubic-bezier"===e.name){const i=e.controlPoints;n=new lo(i[0],i[1],i[2],i[3]).solve(Do(t,1,o,r))}return n}static parse(e,t){let[o,r,n,...i]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,2,Ge)))return null;const a=[];let s=null;"interpolate-hcl"===o||"interpolate-lab"===o?s=Ve:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<i.length;l+=2){const e=i[l],o=i[l+1],r=l+3,n=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const u=t.parse(o,n,s);if(!u)return null;s=s||u.type,a.push([e,u])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Ro(s,o,r,n,a):t.error(`Type ${tt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,o=this.outputs;if(1===t.length)return o[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return o[0].evaluate(e);const n=t.length;if(r>=t[n-1])return o[n-1].evaluate(e);const i=ao(t,r),a=t[i],s=t[i+1],l=Ro.interpolationFactor(this.interpolation,r,a,s),u=o[i].evaluate(e),c=o[i+1].evaluate(e);return"interpolate"===this.operator?fo[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?No.reverse(No.interpolate(No.forward(u),No.forward(c),l)):Mo.reverse(Mo.interpolate(Mo.forward(u),Mo.forward(c),l))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)t.push(this.labels[o],this.outputs[o].serialize());return t}}function Do(e,t,o,r){const n=r-o,i=e-o;return 0===n?0:1===t?i/n:(Math.pow(t,i)-1)/(Math.pow(t,n)-1)}class Lo{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let o=null;const r=t.expectedType;r&&"value"!==r.kind&&(o=r);const n=[];for(const a of e.slice(1)){const e=t.parse(a,1+n.length,o,void 0,{typeAnnotation:"omit"});if(!e)return null;o=o||e.type,n.push(e)}const i=r&&n.some(e=>rt(r,e.type));return new Lo(i?Ze:o,n)}evaluate(e){let t,o=null,r=0;for(const n of this.args)if(r++,(o=n.evaluate(e))&&o instanceof pt&&!o.available&&(t||(t=o.name),o=null,r===this.args.length&&(o=t)),null!==o)break;return o}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class Fo{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let n=1;n<e.length-1;n+=2){const r=e[n];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,n);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const i=t.parse(e[n+1],n+1);if(!i)return null;o.push([r,i])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,o);return r?new Fo(o,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,o]of this.bindings)e.push(t,o.serialize());return e.push(this.result.serialize()),e}}class Uo{constructor(e,t,o){this.type=e,this.index=t,this.input=o}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,Ge),r=t.parse(e[2],2,et(t.expectedType||Ze));if(!o||!r)return null;const n=r.type;return new Uo(n.itemType,o,r)}evaluate(e){const t=this.index.evaluate(e),o=this.input.evaluate(e);if(t<0)throw new gt(`Array index out of bounds: ${t} < 0.`);if(t>=o.length)throw new gt(`Array index out of bounds: ${t} > ${o.length-1}.`);if(t!==Math.floor(t))throw new gt(`Array index must be an integer, but found ${t} instead.`);return o[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Jo{constructor(e,t){this.type=Be,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,Ze),r=t.parse(e[2],2,Ze);return o&&r?nt(o.type,[Be,We,Ge,Je,Ze])?new Jo(o,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(o.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!o)return!1;if(!it(t,["boolean","string","number","null"]))throw new gt(`Expected first argument to be of type boolean, string, number or null, but found ${tt(ft(t))} instead.`);if(!it(o,["string","array"]))throw new gt(`Expected second argument to be of type array or string, but found ${tt(ft(o))} instead.`);return o.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Go{constructor(e,t,o){this.type=Ge,this.needle=e,this.haystack=t,this.fromIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,Ze),r=t.parse(e[2],2,Ze);if(!o||!r)return null;if(!nt(o.type,[Be,We,Ge,Je,Ze]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(o.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,Ge);return n?new Go(o,r,n):null}return new Go(o,r)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!it(t,["boolean","string","number","null"]))throw new gt(`Expected first argument to be of type boolean, string, number or null, but found ${tt(ft(t))} instead.`);if(!it(o,["string","array"]))throw new gt(`Expected second argument to be of type array or string, but found ${tt(ft(o))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return o.indexOf(t,r)}return o.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Wo{constructor(e,t,o,r,n,i){this.inputType=e,this.type=t,this.input=o,this.cases=r,this.outputs=n,this.otherwise=i}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let o,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n={},i=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const u=t.concat(l);if(0===a.length)return u.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(o){if(u.checkSubtype(o,ft(e)))return null}else o=ft(e);if(void 0!==n[String(e)])return u.error("Branch labels must be unique.");n[String(e)]=i.length}const c=t.parse(s,l,r);if(!c)return null;r=r||c.type,i.push(c)}const a=t.parse(e[1],1,Ze);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(o,a.type)?null:new Wo(o,r,a,n,i,s):null}evaluate(e){const t=this.input.evaluate(e);return(ft(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),o=[],r={};for(const i of t){const e=r[this.cases[i]];void 0===e?(r[this.cases[i]]=o.length,o.push([this.cases[i],[i]])):o[e][1].push(i)}const n=e=>"number"===this.inputType.kind?Number(e):e;for(const[i,a]of o)1===a.length?e.push(n(a[0])):e.push(a.map(n)),e.push(this.outputs[i].serialize());return e.push(this.otherwise.serialize()),e}}class Bo{constructor(e,t,o){this.type=e,this.branches=t,this.otherwise=o}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let o;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);const r=[];for(let i=1;i<e.length-1;i+=2){const n=t.parse(e[i],i,Be);if(!n)return null;const a=t.parse(e[i+1],i+1,o);if(!a)return null;r.push([n,a]),o=o||a.type}const n=t.parse(e[e.length-1],e.length-1,o);return n?new Bo(o,r,n):null}evaluate(e){for(const[t,o]of this.branches)if(t.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,o]of this.branches)e(t),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class Vo{constructor(e,t,o,r){this.type=e,this.input=t,this.beginIndex=o,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,Ze),r=t.parse(e[2],2,Ge);if(!o||!r)return null;if(!nt(o.type,[et(Ze),We,Ze]))return t.error(`Expected first argument to be of type array or string, but found ${tt(o.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,Ge);return n?new Vo(o.type,o,r,n):null}return new Vo(o.type,o,r)}evaluate(e){const t=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!it(t,["string","array"]))throw new gt(`Expected first argument to be of type array or string, but found ${tt(ft(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(o,r)}return t.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ho(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Zo(e,t,o){return t===o}function Xo(e,t,o){return t!==o}function Ko(e,t,o){return t<o}function Yo(e,t,o){return t>o}function Qo(e,t,o){return t<=o}function er(e,t,o){return t>=o}function tr(e,t,o,r){return 0===r.compare(t,o)}function or(e,t,o,r){return!tr(e,t,o,r)}function rr(e,t,o,r){return r.compare(t,o)<0}function nr(e,t,o,r){return r.compare(t,o)>0}function ir(e,t,o,r){return r.compare(t,o)<=0}function ar(e,t,o,r){return r.compare(t,o)>=0}function sr(e,t,o){const r="=="!==e&&"!="!==e;return class n{constructor(e,t,o){this.type=Be,this.lhs=e,this.rhs=t,this.collator=o,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const o=e[0];let i=t.parse(e[1],1,Ze);if(!i)return null;if(!Ho(o,i.type))return t.concat(1).error(`"${o}" comparisons are not supported for type '${tt(i.type)}'.`);let a=t.parse(e[2],2,Ze);if(!a)return null;if(!Ho(o,a.type))return t.concat(2).error(`"${o}" comparisons are not supported for type '${tt(a.type)}'.`);if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${tt(i.type)}' and '${tt(a.type)}'.`);r&&("value"===i.type.kind&&"value"!==a.type.kind?i=new vt(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new vt(i.type,[a])));let s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Ke)))return null}return new n(i,a,s)}evaluate(n){const i=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const t=ft(i),o=ft(a);if(t.kind!==o.kind||"string"!==t.kind&&"number"!==t.kind)throw new gt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${o.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=ft(i),o=ft(a);if("string"!==e.kind||"string"!==o.kind)return t(n,i,a)}return this.collator?o(n,i,a,this.collator.evaluate(n)):t(n,i,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const lr=sr("==",Zo,tr),ur=sr("!=",Xo,or),cr=sr("<",Ko,rr),pr=sr(">",Yo,nr),dr=sr("<=",Qo,ir),hr=sr(">=",er,ar);class fr{constructor(e,t,o,r,n){this.type=We,this.number=e,this.locale=t,this.currency=o,this.minFractionDigits=r,this.maxFractionDigits=n}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const o=t.parse(e[1],1,Ge);if(!o)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&!(n=t.parse(r.locale,1,We)))return null;let i=null;if(r.currency&&!(i=t.parse(r.currency,1,We)))return null;let a=null;if(r["min-fraction-digits"]&&!(a=t.parse(r["min-fraction-digits"],1,Ge)))return null;let s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Ge))?null:new fr(o,n,i,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class yr{constructor(e){this.type=Ge,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=t.parse(e[1],1);return o?"array"!==o.type.kind&&"string"!==o.type.kind&&"value"!==o.type.kind?t.error(`Expected argument of type string or array, but found ${tt(o.type)} instead.`):new yr(o):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new gt(`Expected value to be of type string or array, but found ${tt(ft(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}const mr={"==":lr,"!=":ur,">":pr,"<":cr,">=":hr,"<=":dr,array:vt,at:Uo,boolean:vt,case:Bo,coalesce:Lo,collator:$t,format:xt,image:wt,in:Jo,"index-of":Go,interpolate:Ro,"interpolate-hcl":Ro,"interpolate-lab":Ro,length:yr,let:Fo,literal:mt,match:Wo,number:vt,"number-format":fr,object:vt,slice:Vo,step:so,string:vt,"to-boolean":jt,"to-color":jt,"to-number":jt,"to-string":jt,var:ro,within:Qt};function gr(e,[t,o,r,n]){t=t.evaluate(e),o=o.evaluate(e),r=r.evaluate(e);const i=n?n.evaluate(e):1,a=dt(t,o,r,i);if(a)throw new gt(a);return new st(t/255*i,o/255*i,r/255*i,i)}function br(e,t){return e in t}function vr(e,t){const o=t[e];return void 0===o?null:o}function xr(e,t,o,r){for(;o<=r;){const n=o+r>>1;if(t[n]===e)return!0;t[n]>e?r=n-1:o=n+1}return!1}function wr(e){return{type:e}}function kr(e){return{result:"success",value:e}}function jr(e){return{result:"error",value:e}}function zr(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Sr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Tr(e){return!!e.expression&&e.expression.interpolated}function _r(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function $r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ar(e){return e}function Ir(e,t){const o="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],n=r||void 0!==e.property,i=r||!n,a=e.type||(Tr(t)?"exponential":"interval");if(o&&((e=Le({},e)).stops&&(e.stops=e.stops.map(e=>[e[0],st.parse(e[1])])),e.default?e.default=st.parse(e.default):e.default=st.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Po[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let s,l,u;if("exponential"===a)s=Er;else if("interval"===a)s=Cr;else if("categorical"===a){s=Or,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];u=typeof e.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=Mr}if(r){const o={},r=[];for(let t=0;t<e.stops.length;t++){const n=e.stops[t],i=n[0].zoom;void 0===o[i]&&(o[i]={zoom:i,type:e.type,property:e.property,default:e.default,stops:[]},r.push(i)),o[i].stops.push([n[0].value,n[1]])}const n=[];for(const e of r)n.push([o[e].zoom,Ir(o[e],t)]);const i={name:"linear"};return{kind:"composite",interpolationType:i,interpolationFactor:Ro.interpolationFactor.bind(void 0,i),zoomStops:n.map(e=>e[0]),evaluate:({zoom:o},r)=>Er({stops:n,base:e.base},t,o).evaluate(o,r)}}if(i){const o="exponential"===a?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:o,interpolationFactor:Ro.interpolationFactor.bind(void 0,o),zoomStops:e.stops.map(e=>e[0]),evaluate:({zoom:o})=>s(e,t,o,l,u)}}return{kind:"source",evaluate(o,r){const n=r&&r.properties?r.properties[e.property]:void 0;return void 0===n?qr(e.default,t.default):s(e,t,n,l,u)}}}function qr(e,t,o){return void 0!==e?e:void 0!==t?t:void 0!==o?o:void 0}function Or(e,t,o,r,n){return qr(typeof o===n?r[o]:void 0,e.default,t.default)}function Cr(e,t,o){if("number"!==_r(o))return qr(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(o<=e.stops[0][0])return e.stops[0][1];if(o>=e.stops[r-1][0])return e.stops[r-1][1];const n=ao(e.stops.map(e=>e[0]),o);return e.stops[n][1]}function Er(e,t,o){const r=void 0!==e.base?e.base:1;if("number"!==_r(o))return qr(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(o<=e.stops[0][0])return e.stops[0][1];if(o>=e.stops[n-1][0])return e.stops[n-1][1];const i=ao(e.stops.map(e=>e[0]),o),a=Nr(o,r,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],l=e.stops[i+1][1];let u=fo[t.type]||Ar;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Po[e.colorSpace];u=((e,o)=>t.reverse(t.interpolate(t.forward(e),t.forward(o),a)))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),o=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==o)return u(t,o,a)}}:u(s,l,a)}function Mr(e,t,o){return"color"===t.type?o=st.parse(o):"formatted"===t.type?o=ct.fromString(o.toString()):"resolvedImage"===t.type?o=pt.fromString(o.toString()):_r(o)===t.type||"enum"===t.type&&t.values[o]||(o=void 0),qr(o,e.default,t.default)}function Nr(e,t,o,r){const n=r-o,i=e-o;return 0===n?0:1===t?i/n:(Math.pow(t,i)-1)/(Math.pow(t,n)-1)}Tt.register(mr,{error:[Xe,[We],(e,[t])=>{throw new gt(t.evaluate(e))}],typeof:[We,[Ze],(e,[t])=>tt(ft(t.evaluate(e)))],"to-rgba":[et(Ge,4),[Ve],(e,[t])=>t.evaluate(e).toArray()],rgb:[Ve,[Ge,Ge,Ge],gr],rgba:[Ve,[Ge,Ge,Ge,Ge],gr],has:{type:Be,overloads:[[[We],(e,[t])=>br(t.evaluate(e),e.properties())],[[We,He],(e,[t,o])=>br(t.evaluate(e),o.evaluate(e))]]},get:{type:Ze,overloads:[[[We],(e,[t])=>vr(t.evaluate(e),e.properties())],[[We,He],(e,[t,o])=>vr(t.evaluate(e),o.evaluate(e))]]},"feature-state":[Ze,[We],(e,[t])=>vr(t.evaluate(e),e.featureState||{})],properties:[He,[],e=>e.properties()],"geometry-type":[We,[],e=>e.geometryType()],id:[Ze,[],e=>e.id()],zoom:[Ge,[],e=>e.globals.zoom],"heatmap-density":[Ge,[],e=>e.globals.heatmapDensity||0],"line-progress":[Ge,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[Ge,[],e=>e.globals.skyRadialProgress||0],accumulated:[Ze,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Ge,wr(Ge),(e,t)=>{let o=0;for(const r of t)o+=r.evaluate(e);return o}],"*":[Ge,wr(Ge),(e,t)=>{let o=1;for(const r of t)o*=r.evaluate(e);return o}],"-":{type:Ge,overloads:[[[Ge,Ge],(e,[t,o])=>t.evaluate(e)-o.evaluate(e)],[[Ge],(e,[t])=>-t.evaluate(e)]]},"/":[Ge,[Ge,Ge],(e,[t,o])=>t.evaluate(e)/o.evaluate(e)],"%":[Ge,[Ge,Ge],(e,[t,o])=>t.evaluate(e)%o.evaluate(e)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(e,[t,o])=>Math.pow(t.evaluate(e),o.evaluate(e))],sqrt:[Ge,[Ge],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Ge,[Ge],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Ge,[Ge],(e,[t])=>Math.log(t.evaluate(e))],log2:[Ge,[Ge],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Ge,[Ge],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Ge,[Ge],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Ge,[Ge],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Ge,[Ge],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Ge,[Ge],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Ge,[Ge],(e,[t])=>Math.atan(t.evaluate(e))],min:[Ge,wr(Ge),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[Ge,wr(Ge),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[Ge,[Ge],(e,[t])=>Math.abs(t.evaluate(e))],round:[Ge,[Ge],(e,[t])=>{const o=t.evaluate(e);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ge,[Ge],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Ge,[Ge],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Be,[We,Ze],(e,[t,o])=>e.properties()[t.value]===o.value],"filter-id-==":[Be,[Ze],(e,[t])=>e.id()===t.value],"filter-type-==":[Be,[We],(e,[t])=>e.geometryType()===t.value],"filter-<":[Be,[We,Ze],(e,[t,o])=>{const r=e.properties()[t.value],n=o.value;return typeof r==typeof n&&r<n}],"filter-id-<":[Be,[Ze],(e,[t])=>{const o=e.id(),r=t.value;return typeof o==typeof r&&o<r}],"filter->":[Be,[We,Ze],(e,[t,o])=>{const r=e.properties()[t.value],n=o.value;return typeof r==typeof n&&r>n}],"filter-id->":[Be,[Ze],(e,[t])=>{const o=e.id(),r=t.value;return typeof o==typeof r&&o>r}],"filter-<=":[Be,[We,Ze],(e,[t,o])=>{const r=e.properties()[t.value],n=o.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[Be,[Ze],(e,[t])=>{const o=e.id(),r=t.value;return typeof o==typeof r&&o<=r}],"filter->=":[Be,[We,Ze],(e,[t,o])=>{const r=e.properties()[t.value],n=o.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[Be,[Ze],(e,[t])=>{const o=e.id(),r=t.value;return typeof o==typeof r&&o>=r}],"filter-has":[Be,[Ze],(e,[t])=>t.value in e.properties()],"filter-has-id":[Be,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Be,[et(We)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Be,[et(Ze)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Be,[We,et(Ze)],(e,[t,o])=>o.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Be,[We,et(Ze)],(e,[t,o])=>xr(e.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Be,overloads:[[[Be,Be],(e,[t,o])=>t.evaluate(e)&&o.evaluate(e)],[wr(Be),(e,t)=>{for(const o of t)if(!o.evaluate(e))return!1;return!0}]]},any:{type:Be,overloads:[[[Be,Be],(e,[t,o])=>t.evaluate(e)||o.evaluate(e)],[wr(Be),(e,t)=>{for(const o of t)if(o.evaluate(e))return!0;return!1}]]},"!":[Be,[Be],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Be,[We],(e,[t])=>{const o=e.globals&&e.globals.isSupportedScript;return!o||o(t.evaluate(e))}],upcase:[We,[We],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[We,[We],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[We,wr(Ze),(e,t)=>t.map(t=>yt(t.evaluate(e))).join("")],"resolved-locale":[We,[Ke],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Pr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new St,this._defaultValue=t?Vr(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,o,r,n,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=o,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)}evaluate(e,t,o,r,n,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=o||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new gt(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,"undefined"!=typeof console&&console.warn(a.message)),this._defaultValue}}}function Rr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in mr}function Dr(e,t){const o=new no(mr,[],t?Br(t):void 0),r=o.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?kr(new Pr(r,t)):jr(o.errors)}class Lr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!to(t.expression)}evaluateWithoutErrorHandling(e,t,o,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,r,n,i)}evaluate(e,t,o,r,n,i){return this._styleExpression.evaluate(e,t,o,r,n,i)}}class Fr{constructor(e,t,o,r){this.kind=e,this.zoomStops=o,this._styleExpression=t,this.isStateDependent="camera"!==e&&!to(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,o,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,r,n,i)}evaluate(e,t,o,r,n,i){return this._styleExpression.evaluate(e,t,o,r,n,i)}interpolationFactor(e,t,o){return this.interpolationType?Ro.interpolationFactor(this.interpolationType,e,t,o):0}}function Ur(e,t){if("error"===(e=Dr(e,t)).result)return e;const o=e.value.expression,r=eo(o);if(!r&&!zr(t))return jr([new Fe("","data expressions not supported")]);const n=oo(o,["zoom"]);if(!n&&!Sr(t))return jr([new Fe("","zoom expressions not supported")]);const i=Wr(o);if(!i&&!n)return jr([new Fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof Fe)return jr([i]);if(i instanceof Ro&&!Tr(t))return jr([new Fe("",'"interpolate" expressions cannot be used with this property')]);if(!i)return kr(new Lr(r?"constant":"source",e.value));const a=i instanceof Ro?i.interpolation:void 0;return kr(new Fr(r?"camera":"composite",e.value,i.labels,a))}class Jr{constructor(e,t){this._parameters=e,this._specification=t,Le(this,Ir(this._parameters,this._specification))}static deserialize(e){return new Jr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Gr(e,t){if($r(e))return new Jr(e,t);if(Rr(e)){const o=Ur(e,t);if("error"===o.result)throw new Error(o.value.map(e=>`${e.key}: ${e.message}`).join(", "));return o.value}{let o=e;return"string"==typeof e&&"color"===t.type&&(o=st.parse(e)),{kind:"constant",evaluate:()=>o}}}function Wr(e){let t=null;if(e instanceof Fo)t=Wr(e.result);else if(e instanceof Lo){for(const o of e.args)if(t=Wr(o))break}else(e instanceof so||e instanceof Ro)&&e.input instanceof Tt&&"zoom"===e.input.name&&(t=e);return t instanceof Fe?t:(e.eachChild(e=>{const o=Wr(e);o instanceof Fe?t=o:!t&&o?t=new Fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&o&&t!==o&&(t=new Fe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function Br(e){const t={color:Ve,string:We,number:Ge,enum:We,boolean:Be,formatted:Ye,resolvedImage:Qe};return"array"===e.type?et(t[e.value]||Ze,e.length):t[e.type]}function Vr(e){return"color"===e.type&&$r(e.default)?new st(0,0,0,0):"color"===e.type?st.parse(e.default)||null:void 0===e.default?null:e.default}function Hr(e){return"object"==typeof e?["literal",e]:e}function Zr(e,t){let o=e.stops;if(!o)return Xr(e,t);const r=o&&"object"==typeof o[0][0],n=r||void 0!==e.property,i=r||!n;return o=o.map(e=>!n&&t.tokens&&"string"==typeof e[1]?[e[0],sn(e[1])]:[e[0],Hr(e[1])]),r?Yr(e,t,o):i?on(e,t,o):tn(e,t,o)}function Xr(e,t){const o=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",o]:o;if("enum"===t.type)return["match",o,Object.keys(t.values),o,e.default];{const r=["color"===t.type?"to-color":t.type,o,Hr(e.default)];return"array"===t.type&&r.splice(1,0,t.value,t.length||null),r}}function Kr(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Yr(e,t,o){const r={},n={},i=[];for(let a=0;a<o.length;a++){const t=o[a],s=t[0].zoom;void 0===r[s]&&(r[s]={zoom:s,type:e.type,property:e.property,default:e.default},n[s]=[],i.push(s)),n[s].push([t[0].value,t[1]])}if("exponential"===an({},t)){const o=[Kr(e),["linear"],["zoom"]];for(const e of i){nn(o,e,tn(r[e],t,n[e]),!1)}return o}{const e=["step",["zoom"]];for(const o of i){nn(e,o,tn(r[o],t,n[o]),!0)}return rn(e),e}}function Qr(e,t){return void 0!==e?e:void 0!==t?t:void 0}function en(e,t){const o=Hr(Qr(e.default,t.default));return void 0===o&&"resolvedImage"===t.type?"":o}function tn(e,t,o){const r=an(e,t),n=["get",e.property];if("categorical"===r&&"boolean"==typeof o[0][0]){const r=["case"];for(const e of o)r.push(["==",n,e[0]],e[1]);return r.push(en(e,t)),r}if("categorical"===r){const r=["match",n];for(const e of o)nn(r,e[0],e[1],!1);return r.push(en(e,t)),r}if("interval"===r){const t=["step",["number",n]];for(const e of o)nn(t,e[0],e[1],!0);return rn(t),void 0===e.default?t:["case",["==",["typeof",n],"number"],t,Hr(e.default)]}if("exponential"===r){const t=void 0!==e.base?e.base:1,r=[Kr(e),1===t?["linear"]:["exponential",t],["number",n]];for(const e of o)nn(r,e[0],e[1],!1);return void 0===e.default?r:["case",["==",["typeof",n],"number"],r,Hr(e.default)]}throw new Error(`Unknown property function type ${r}`)}function on(e,t,o,r=["zoom"]){const n=an(e,t);let i,a=!1;if("interval"===n)i=["step",r],a=!0;else{if("exponential"!==n)throw new Error(`Unknown zoom function type "${n}"`);{const t=void 0!==e.base?e.base:1;i=[Kr(e),1===t?["linear"]:["exponential",t],r]}}for(const s of o)nn(i,s[0],s[1],a);return rn(i),i}function rn(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function nn(e,t,o,r){e.length>3&&t===e[e.length-2]||(r&&2===e.length||e.push(t),e.push(o))}function an(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function sn(e){const t=["concat"],o=/{([^{}]+)}/g;let r=0;for(let n=o.exec(e);null!==n;n=o.exec(e)){const i=e.slice(r,o.lastIndex-n[0].length);r=o.lastIndex,i.length>0&&t.push(i),t.push(["get",n[1]])}if(1===t.length)return e;if(r<e.length)t.push(e.slice(r));else if(2===t.length)return["to-string",t[1]];return t}function ln(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ln(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const un={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function cn(e){if(null==e)return{filter:()=>!0,needGeometry:!1};ln(e)||(e=hn(e));const t=Dr(e,un);if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));return{filter:(e,o,r)=>t.value.evaluate(e,o,{},r),needGeometry:dn(e)}}function pn(e,t){return e<t?-1:e>t?1:0}function dn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(dn(e[t]))return!0;return!1}function hn(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?fn(e[1],e[2],"=="):"!="===t?bn(fn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?fn(e[1],e[2],t):"any"===t?yn(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(hn)):"none"===t?["all"].concat(e.slice(1).map(hn).map(bn)):"in"===t?mn(e[1],e.slice(2)):"!in"===t?bn(mn(e[1],e.slice(2))):"has"===t?gn(e[1]):"!has"===t?bn(gn(e[1])):"within"!==t||e}function fn(e,t,o){switch(e){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,e,t]}}function yn(e){return["any"].concat(e.map(hn))}function mn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(pn)]]:["filter-in-small",e,["literal",t]]}}function gn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function bn(e){return["!",e]}function vn(e){return xn(e,{})}function xn(e,t){if(ln(e))return e;if(!e)return!0;const o=e[0];if(e.length<=1)return"any"!==o;let r;if("=="===o||"!="===o||"<"===o||">"===o||"<="===o||">="===o){const[,n,i]=e;r=kn(n,i,o,t)}else{if("any"===o){const t=e.slice(1).map(e=>{const t={},o=xn(e,t),r=wn(t);return!0===r?o:["case",r,o,!1]});return["any"].concat(t)}if("all"===o){const o=e.slice(1).map(e=>xn(e,t));return o.length>1?["all"].concat(o):[].concat(...o)}if("none"===o)return["!",xn(["any"].concat(e.slice(1)),{})];r="in"===o?jn(e[1],e.slice(2)):"!in"===o?jn(e[1],e.slice(2),!0):"has"===o?zn(e[1]):"!has"!==o||["!",zn(e[1])]}return r}function wn(e){const t=[];for(const o in e){const r="$id"===o?["id"]:["get",o];t.push(["==",["typeof",r],e[o]])}return 0===t.length||(1===t.length?t[0]:["all"].concat(t))}function kn(e,t,o,r){let n;if("$type"===e)return[o,["geometry-type"],t];if(n="$id"===e?["id"]:["get",e],r&&null!==t){const o=typeof t;r[e]=o}return"=="===o&&"$id"!==e&&null===t?["all",["has",e],["==",n,null]]:"!="===o&&"$id"!==e&&null===t?["any",["!",["has",e]],["!=",n,null]]:[o,n,t]}function jn(e,t,o=!1){if(0===t.length)return o;let r;r="$type"===e?["geometry-type"]:"$id"===e?["id"]:["get",e];let n=!0;const i=typeof t[0];for(const a of t)if(typeof a!==i){n=!1;break}if(n&&("string"===i||"number"===i)){const e=t.sort().filter((e,o)=>0===o||t[o-1]!==e);return["match",r,e,!o,o]}return[o?"all":"any"].concat(t.map(e=>[o?"!=":"==",r,e]))}function zn(e){return"$type"===e||("$id"===e?["!=",["id"],null]:["has",e])}function Sn(e){const t=[];return Oe(e,e=>{e.filter&&(e.filter=vn(e.filter))}),Ce(e,{paint:!0,layout:!0},({path:e,value:o,reference:r,set:n})=>{Rr(o)||("object"!=typeof o||Array.isArray(o)?r.tokens&&"string"==typeof o&&n(sn(o)):(n(Zr(o,r)),t.push(e.join("."))))}),e}function Tn(e){let t=!1;if(7===e.version&&(e=De(e),t=!0),8===e.version&&(t=Sn(e),t=!0),!t)throw new Error("cannot migrate from",e.version);return e}function _n(e){const t=[],o=[],r=[];for(const i in e.sources){const r=e.sources[i];if("vector"!==r.type)continue;const n=/^mapbox:\/\/(.*)/.exec(r.url);n&&(t.push(i),o.push(n[1]))}if(t.length<2)return e;t.forEach(t=>{delete e.sources[t]});const n=o.join(",");return e.sources[n]={type:"vector",url:`mapbox://${n}`},e.layers.forEach(e=>{if(t.indexOf(e.source)>=0&&(e.source=n,"source-layer"in e)){if(r.indexOf(e["source-layer"])>=0)throw new Error("Conflicting source layer names");r.push(e["source-layer"])}}),e}var $n=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function An(e,t){const o={};for(const r in e)"ref"!==r&&(o[r]=e[r]);return $n.forEach(e=>{e in t&&(o[e]=t[e])}),o}function In(e){e=e.slice();const t=Object.create(null);for(let o=0;o<e.length;o++)t[e[o].id]=e[o];for(let o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=An(e[o],t[e[o].ref]));return e}function qn(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!qn(e[o],t[o]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const o in e)if(!qn(e[o],t[o]))return!1;return!0}return e===t}const On={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function Cn(e,t,o){o.push({command:On.addSource,args:[e,t[e]]})}function En(e,t,o){t.push({command:On.removeSource,args:[e]}),o[e]=!0}function Mn(e,t,o,r){En(e,o,r),Cn(e,t,o)}function Nn(e,t,o){let r;for(r in e[o])if(e[o].hasOwnProperty(r)&&"data"!==r&&!qn(e[o][r],t[o][r]))return!1;for(r in t[o])if(t[o].hasOwnProperty(r)&&"data"!==r&&!qn(e[o][r],t[o][r]))return!1;return!0}function Pn(e,t,o,r){let n;for(n in t=t||{},e=e||{})e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||En(n,o,r));for(n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)?qn(e[n],t[n])||("geojson"===e[n].type&&"geojson"===t[n].type&&Nn(e,t,n)?o.push({command:On.setGeoJSONSourceData,args:[n,t[n].data]}):Mn(n,t,o,r)):Cn(n,t,o))}function Rn(e,t,o,r,n,i){let a;for(a in t=t||{},e=e||{})e.hasOwnProperty(a)&&(qn(e[a],t[a])||o.push({command:i,args:[r,a,t[a],n]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(qn(e[a],t[a])||o.push({command:i,args:[r,a,t[a],n]}))}function Dn(e){return e.id}function Ln(e,t){return e[t.id]=t,e}function Fn(e,t,o){t=t||[];const r=(e=e||[]).map(Dn),n=t.map(Dn),i=e.reduce(Ln,{}),a=t.reduce(Ln,{}),s=r.slice(),l=Object.create(null);let u,c,p,d,h,f,y;for(u=0,c=0;u<r.length;u++)p=r[u],a.hasOwnProperty(p)?c++:(o.push({command:On.removeLayer,args:[p]}),s.splice(s.indexOf(p,c),1));for(u=0,c=0;u<n.length;u++)p=n[n.length-1-u],s[s.length-1-u]!==p&&(i.hasOwnProperty(p)?(o.push({command:On.removeLayer,args:[p]}),s.splice(s.lastIndexOf(p,s.length-c),1)):c++,f=s[s.length-u],o.push({command:On.addLayer,args:[a[p],f]}),s.splice(s.length-u,0,p),l[p]=!0);for(u=0;u<n.length;u++)if(d=i[p=n[u]],h=a[p],!l[p]&&!qn(d,h))if(qn(d.source,h.source)&&qn(d["source-layer"],h["source-layer"])&&qn(d.type,h.type)){for(y in Rn(d.layout,h.layout,o,p,null,On.setLayoutProperty),Rn(d.paint,h.paint,o,p,null,On.setPaintProperty),qn(d.filter,h.filter)||o.push({command:On.setFilter,args:[p,h.filter]}),qn(d.minzoom,h.minzoom)&&qn(d.maxzoom,h.maxzoom)||o.push({command:On.setLayerZoomRange,args:[p,h.minzoom,h.maxzoom]}),d)d.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?Rn(d[y],h[y],o,p,y.slice(6),On.setPaintProperty):qn(d[y],h[y])||o.push({command:On.setLayerProperty,args:[p,y,h[y]]}));for(y in h)h.hasOwnProperty(y)&&!d.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?Rn(d[y],h[y],o,p,y.slice(6),On.setPaintProperty):qn(d[y],h[y])||o.push({command:On.setLayerProperty,args:[p,y,h[y]]}))}else o.push({command:On.removeLayer,args:[p]}),f=s[s.lastIndexOf(p)+1],o.push({command:On.addLayer,args:[h,f]})}function Un(e,t){if(!e)return[{command:On.setStyle,args:[t]}];let o=[];try{if(!qn(e.version,t.version))return[{command:On.setStyle,args:[t]}];qn(e.center,t.center)||o.push({command:On.setCenter,args:[t.center]}),qn(e.zoom,t.zoom)||o.push({command:On.setZoom,args:[t.zoom]}),qn(e.bearing,t.bearing)||o.push({command:On.setBearing,args:[t.bearing]}),qn(e.pitch,t.pitch)||o.push({command:On.setPitch,args:[t.pitch]}),qn(e.sprite,t.sprite)||o.push({command:On.setSprite,args:[t.sprite]}),qn(e.glyphs,t.glyphs)||o.push({command:On.setGlyphs,args:[t.glyphs]}),qn(e.transition,t.transition)||o.push({command:On.setTransition,args:[t.transition]}),qn(e.light,t.light)||o.push({command:On.setLight,args:[t.light]}),qn(e.fog,t.fog)||o.push({command:On.setFog,args:[t.fog]});const n={},i=[];Pn(e.sources,t.sources,i,n);const a=[];e.layers&&e.layers.forEach(e=>{n[e.source]?o.push({command:On.removeLayer,args:[e.id]}):a.push(e)});let s=e.terrain;s&&n[s.source]&&(o.push({command:On.setTerrain,args:[void 0]}),s=void 0),o=o.concat(i),qn(s,t.terrain)||o.push({command:On.setTerrain,args:[t.terrain]}),Fn(a,t.layers,o)}catch(r){console.warn("Unable to compute style diff:",r),o=[{command:On.setStyle,args:[t]}]}return o}class Jn{constructor(e,t,o,r){this.message=(e?`${e}: `:"")+o,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}exports.ValidationError=Jn;class Gn{constructor(e){this.error=e,this.message=e.message;const t=e.message.match(/line (\d+)/);this.line=t?parseInt(t[1],10):0}}function Wn(e){const t=e.key,o=e.value;return o?[new Jn(t,o,"constants have been deprecated as of v8")]:[]}function Bn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Vn(e){if(Array.isArray(e))return e.map(Vn);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const o in e)t[o]=Vn(e[o]);return t}return Bn(e)}function Hn(e){const t=e.key,o=e.value,r=e.valueSpec||{},n=e.objectElementValidators||{},i=e.style,a=e.styleSpec;let s=[];const l=_r(o);if("object"!==l)return[new Jn(t,o,`object expected, ${l} found`)];for(const u in o){const e=u.split(".")[0],l=r[e]||r["*"];let c;if(n[e])c=n[e];else if(r[e])c=bi;else if(n["*"])c=n["*"];else{if(!r["*"]){s.push(new Jn(t,o[u],`unknown property "${u}"`));continue}c=bi}s=s.concat(c({key:(t?`${t}.`:t)+u,value:o[u],valueSpec:l,style:i,styleSpec:a,object:o,objectKey:u},o))}for(const u in r)n[u]||r[u].required&&void 0===r[u].default&&void 0===o[u]&&s.push(new Jn(t,o,`missing required property "${u}"`));return s}function Zn(e){const t=e.value,o=e.valueSpec,r=e.style,n=e.styleSpec,i=e.key,a=e.arrayElementValidator||bi;if("array"!==_r(t))return[new Jn(i,t,`array expected, ${_r(t)} found`)];if(o.length&&t.length!==o.length)return[new Jn(i,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Jn(i,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let s={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum};n.$version<7&&(s.function=o.function),"object"===_r(o.value)&&(s=o.value);let l=[];for(let u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:n,key:`${i}[${u}]`}));return l}function Xn(e){const t=e.key,o=e.value,r=e.valueSpec;let n=_r(o);if("number"===n&&o!=o&&(n="NaN"),"number"!==n)return[new Jn(t,o,`number expected, ${n} found`)];if("minimum"in r){let n=r.minimum;if("array"===_r(r.minimum)){const t=e.arrayIndex;n=r.minimum[t]}if(o<n)return[new Jn(t,o,`${o} is less than the minimum value ${n}`)]}if("maximum"in r){let n=r.maximum;if("array"===_r(r.maximum)){const t=e.arrayIndex;n=r.maximum[t]}if(o>n)return[new Jn(t,o,`${o} is greater than the maximum value ${n}`)]}return[]}function Kn(e){const t=e.valueSpec,o=Bn(e.value.type);let r,n,i,a={};const s="categorical"!==o&&void 0===e.value.property,l=!s,u="array"===_r(e.value.stops)&&"array"===_r(e.value.stops[0])&&"object"===_r(e.value.stops[0][0]),c=Hn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new Jn(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;t=t.concat(Zn({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===_r(r)&&0===r.length&&t.push(new Jn(e.key,r,"array must have at least one stop"));return t},default:function(e){return bi({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&c.push(new Jn(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||c.push(new Jn(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!Tr(e.valueSpec)&&c.push(new Jn(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!zr(e.valueSpec)?c.push(new Jn(e.key,e.value,"property functions not supported")):s&&!Sr(e.valueSpec)&&c.push(new Jn(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==e.value.property||c.push(new Jn(e.key,e.value,'"property" property is required')),c;function p(e){let o=[];const r=e.value,s=e.key;if("array"!==_r(r))return[new Jn(s,r,`array expected, ${_r(r)} found`)];if(2!==r.length)return[new Jn(s,r,`array length 2 expected, length ${r.length} found`)];if(u){if("object"!==_r(r[0]))return[new Jn(s,r,`object expected, ${_r(r[0])} found`)];if(void 0===r[0].zoom)return[new Jn(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Jn(s,r,"object stop key must have value")];if(i&&i>Bn(r[0].zoom))return[new Jn(s,r[0].zoom,"stop zoom values must appear in ascending order")];Bn(r[0].zoom)!==i&&(i=Bn(r[0].zoom),n=void 0,a={}),o=o.concat(Hn({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Xn,value:d}}))}else o=o.concat(d({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return Rr(Vn(r[1]))?o.concat([new Jn(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):o.concat(bi({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,i){const s=_r(e.value),l=Bn(e.value),u=null!==e.value?e.value:i;if(r){if(s!==r)return[new Jn(e.key,u,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Jn(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){let r=`number expected, ${s} found`;return zr(t)&&void 0===o&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jn(e.key,u,r)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new Jn(e.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new Jn(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Jn(e.key,u,`integer expected, found ${l}`)]}}function Yn(e){const t=("property"===e.expressionContext?Ur:Dr)(Vn(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Jn(`${e.key}${t.key}`,e.value,t.message));const o=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!o.outputDefined())return[new Jn(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!to(o))return[new Jn(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!to(o))return[new Jn(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!oo(o,["zoom","feature-state"]))return[new Jn(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!eo(o))return[new Jn(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qn(e){const t=e.value,o=e.key,r=_r(t);return"boolean"!==r?[new Jn(o,t,`boolean expected, ${r} found`)]:[]}function ei(e){const t=e.key,o=e.value,r=_r(o);return"string"!==r?[new Jn(t,o,`color expected, ${r} found`)]:null===at.parseCSSColor(o)?[new Jn(t,o,`color expected, "${o}" found`)]:[]}function ti(e){const t=e.key,o=e.value,r=e.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Bn(o))&&n.push(new Jn(t,o,`expected one of [${r.values.join(", ")}], ${JSON.stringify(o)} found`)):-1===Object.keys(r.values).indexOf(Bn(o))&&n.push(new Jn(t,o,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(o)} found`)),n}function oi(e){return ln(Vn(e.value))?Yn(Le({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ri(e)}function ri(e){const t=e.value,o=e.key;if("array"!==_r(t))return[new Jn(o,t,`array expected, ${_r(t)} found`)];const r=e.styleSpec;let n,i=[];if(t.length<1)return[new Jn(o,t,"filter array must have at least 1 element")];switch(i=i.concat(ti({key:`${o}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Bn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Bn(t[1])&&i.push(new Jn(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&i.push(new Jn(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&"string"!==(n=_r(t[1]))&&i.push(new Jn(`${o}[1]`,t[1],`string expected, ${n} found`));for(let a=2;a<t.length;a++)n=_r(t[a]),"$type"===Bn(t[1])?i=i.concat(ti({key:`${o}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&i.push(new Jn(`${o}[${a}]`,t[a],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)i=i.concat(ri({key:`${o}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=_r(t[1]),2!==t.length?i.push(new Jn(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==n&&i.push(new Jn(`${o}[1]`,t[1],`string expected, ${n} found`));break;case"within":n=_r(t[1]),2!==t.length?i.push(new Jn(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==n&&i.push(new Jn(`${o}[1]`,t[1],`object expected, ${n} found`))}return i}function ni(e,t){const o=e.key,r=e.style,n=e.styleSpec,i=e.value,a=e.objectKey,s=n[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return bi({key:o,value:i,valueSpec:n.transition,style:r,styleSpec:n});const u=e.valueSpec||s[a];if(!u)return[new Jn(o,i,`unknown property "${a}"`)];let c;if("string"===_r(i)&&zr(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(i)))return[new Jn(o,i,`"${a}" does not support interpolation syntax\n`+`Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const p=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new Jn(o,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&$r(Vn(i))&&"identity"===Bn(i.type)&&p.push(new Jn(o,i,'"text-font" does not support identity functions'))),p.concat(bi({key:e.key,value:i,valueSpec:u,style:r,styleSpec:n,expressionContext:"property",propertyType:t,propertyKey:a}))}function ii(e){return ni(e,"paint")}function ai(e){return ni(e,"layout")}function si(e){let t=[];const o=e.value,r=e.key,n=e.style,i=e.styleSpec;o.type||o.ref||t.push(new Jn(r,o,'either "type" or "ref" is required'));let a=Bn(o.type);const s=Bn(o.ref);if(o.id){const i=Bn(o.id);for(let a=0;a<e.arrayIndex;a++){const e=n.layers[a];Bn(e.id)===i&&t.push(new Jn(r,o.id,`duplicate layer id "${o.id}", previously used at line ${e.id.__line__}`))}}if("ref"in o){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in o&&t.push(new Jn(r,o[e],`"${e}" is prohibited for ref layers`))}),n.layers.forEach(t=>{Bn(t.id)===s&&(e=t)}),e?e.ref?t.push(new Jn(r,o.ref,"ref cannot reference another ref layer")):a=Bn(e.type):t.push(new Jn(r,o.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(o.source){const e=n.sources&&n.sources[o.source],i=e&&Bn(e.type);e?"vector"===i&&"raster"===a?t.push(new Jn(r,o.source,`layer "${o.id}" requires a raster source`)):"raster"===i&&"raster"!==a?t.push(new Jn(r,o.source,`layer "${o.id}" requires a vector source`)):"vector"!==i||o["source-layer"]?"raster-dem"===i&&"hillshade"!==a?t.push(new Jn(r,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!o.paint||!o.paint["line-gradient"]||"geojson"===i&&e.lineMetrics||t.push(new Jn(r,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Jn(r,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Jn(r,o.source,`source "${o.source}" not found`))}else t.push(new Jn(r,o,'missing required property "source"'));return t=t.concat(Hn({key:r,value:o,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>bi({key:`${r}.type`,value:o.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:o,objectKey:"type"}),filter:oi,layout:e=>Hn({layer:o,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ai(Le({layerType:a},e))}}),paint:e=>Hn({layer:o,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ii(Le({layerType:a},e))}})}}))}function li(e){const t=e.value,o=e.key,r=_r(t);return"string"!==r?[new Jn(o,t,`string expected, ${r} found`)]:[]}exports.ParsingError=Gn;const ui={promoteId:pi};function ci(e){const t=e.value,o=e.key,r=e.styleSpec,n=e.style;if(!t.type)return[new Jn(o,t,'"type" is required')];const i=Bn(t.type);let a;switch(i){case"vector":case"raster":case"raster-dem":return a=Hn({key:o,value:t,valueSpec:r[`source_${i.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:ui});case"geojson":if(a=Hn({key:o,value:t,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:ui}),t.cluster)for(const e in t.clusterProperties){const[r,n]=t.clusterProperties[e],i="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...Yn({key:`${o}.${e}.map`,value:n,expressionContext:"cluster-map"})),a.push(...Yn({key:`${o}.${e}.reduce`,value:i,expressionContext:"cluster-reduce"}))}return a;case"video":return Hn({key:o,value:t,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return Hn({key:o,value:t,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new Jn(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ti({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function pi({key:e,value:t}){if("string"===_r(t))return li({key:e,value:t});{const o=[];for(const r in t)o.push(...li({key:`${e}.${r}`,value:t[r]}));return o}}function di(e){const t=e.value,o=e.styleSpec,r=o.light,n=e.style;let i=[];const a=_r(t);if(void 0===t)return i;if("object"!==a)return i=i.concat([new Jn("light",t,`object expected, ${a} found`)]);for(const s in t){const e=s.match(/^(.*)-transition$/);i=e&&r[e[1]]&&r[e[1]].transition?i.concat(bi({key:s,value:t[s],valueSpec:o.transition,style:n,styleSpec:o})):r[s]?i.concat(bi({key:s,value:t[s],valueSpec:r[s],style:n,styleSpec:o})):i.concat([new Jn(s,t[s],`unknown property "${s}"`)])}return i}function hi(e){const t=e.value,o=e.key,r=e.style,n=e.styleSpec,i=n.terrain;let a=[];const s=_r(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Jn("terrain",t,`object expected, ${s} found`)]);for(const l in t){const e=l.match(/^(.*)-transition$/);a=e&&i[e[1]]&&i[e[1]].transition?a.concat(bi({key:l,value:t[l],valueSpec:n.transition,style:r,styleSpec:n})):i[l]?a.concat(bi({key:l,value:t[l],valueSpec:i[l],style:r,styleSpec:n})):a.concat([new Jn(l,t[l],`unknown property "${l}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],n=e&&Bn(e.type);e?"raster-dem"!==n&&a.push(new Jn(o,t.source,`terrain cannot be used with a source of type ${n}, it only be used with a "raster-dem" source type`)):a.push(new Jn(o,t.source,`source "${t.source}" not found`))}else a.push(new Jn(o,t,'terrain is missing required property "source"'));return a}function fi(e){const t=e.value,o=e.style,r=e.styleSpec,n=r.fog;let i=[];const a=_r(t);if(void 0===t)return i;if("object"!==a)return i=i.concat([new Jn("fog",t,`object expected, ${a} found`)]);t.range&&!Rr(Vn(t.range))&&t.range[0]>=t.range[1]&&(i=i.concat([new Jn("fog",t,"fog.range[0] can't be greater than or equal to fog.range[1]")]));for(const s in t){const e=s.match(/^(.*)-transition$/);i=e&&n[e[1]]&&n[e[1]].transition?i.concat(bi({key:s,value:t[s],valueSpec:r.transition,style:o,styleSpec:r})):n[s]?i.concat(bi({key:s,value:t[s],valueSpec:n[s],style:o,styleSpec:r})):i.concat([new Jn(s,t[s],`unknown property "${s}"`)])}return i}function yi(e){return 0===li(e).length?[]:Yn(e)}function mi(e){return 0===li(e).length?[]:Yn(e)}const gi={"*":()=>[],array:Zn,boolean:Qn,number:Xn,color:ei,constants:Wn,enum:ti,filter:oi,function:Kn,layer:si,object:Hn,source:ci,light:di,terrain:hi,fog:fi,string:li,formatted:yi,resolvedImage:mi};function bi(e){const t=e.value,o=e.valueSpec,r=e.styleSpec;if(o.expression&&$r(Bn(t)))return Kn(e);if(o.expression&&Rr(Vn(t)))return Yn(e);if(o.type&&gi[o.type])return gi[o.type](e);return Hn(Le({},e,{valueSpec:o.type?r[o.type]:o}))}function vi(e){const t=e.value,o=e.key,r=li(e);return r.length?r:(-1===t.indexOf("{fontstack}")&&r.push(new Jn(o,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Jn(o,t,'"glyphs" url must include a "{range}" token')),r)}function xi(e,t=G){let o=[];return o=o.concat(bi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:vi,"*":()=>[]}})),e.constants&&(o=o.concat(Wn({key:"constants",value:e.constants,style:e,styleSpec:t}))),wi(o)}function wi(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function ki(e){return function(...t){return wi(e.apply(this,t))}}xi.source=ki(ci),xi.light=ki(di),xi.terrain=ki(hi),xi.fog=ki(fi),xi.layer=ki(si),xi.filter=ki(oi),xi.paintProperty=ki(ii),xi.layoutProperty=ki(ai);var ji=X(function(e,t){var o=function(){var e=function(e,t,o,r){for(o=o||{},r=e.length;r--;o[e[r]]=t);return o},t=[1,12],o=[1,13],r=[1,9],n=[1,10],i=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],c=[22,24],p={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,o,r,n,i,a){var s=i.length-1;switch(n){case 1:this.$=new String(e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(e),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=i[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[s-2],i[s]];break;case 16:this.$={},this.$[i[s][0]]=i[s][1];break;case 17:this.$=i[s-2],i[s-2][i[s][0]]=i[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[s]];break;case 21:this.$=i[s-2],i[s-2].push(i[s])}},table:[{3:5,4:t,5:6,6:o,7:3,8:r,9:4,10:n,11:i,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},e(l,[2,7]),e(l,[2,8]),e(l,[2,9]),e(l,[2,10]),e(l,[2,11]),e(l,[2,12]),e(l,[2,3]),e(l,[2,4]),e(l,[2,5]),e([14,18,21,22,24],[2,1]),e(l,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:o,7:3,8:r,9:4,10:n,11:i,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},e(l,[2,13]),{18:[1,24],22:[1,25]},e(u,[2,16]),{21:[1,26]},e(l,[2,18]),{22:[1,28],24:[1,27]},e(c,[2,20]),e(l,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:o,7:3,8:r,9:4,10:n,11:i,13:30,15:7,16:8,17:a,23:s},e(l,[2,19]),{3:5,4:t,5:6,6:o,7:3,8:r,9:4,10:n,11:i,13:31,15:7,16:8,17:a,23:s},e(u,[2,17]),e(u,[2,15]),e(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,o=[0],r=[null],n=[],i=this.table,a="",s=0,l=0,u=1,c=n.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(d.yy[h]=this.yy[h]);p.setInput(e,d.yy),d.yy.lexer=p,d.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var f=p.yylloc;n.push(f);var y=p.options&&p.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,g,b,v,x,w,k,j,z,S={};;){if(g=o[o.length-1],this.defaultActions[g]?b=this.defaultActions[g]:(null==m&&(z=void 0,"number"!=typeof(z=p.lex()||u)&&(z=t.symbols_[z]||z),m=z),b=i[g]&&i[g][m]),void 0===b||!b.length||!b[0]){var T="";for(x in j=[],i[g])this.terminals_[x]&&x>2&&j.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(s+1)+":\n"+p.showPosition()+"\nExpecting "+j.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:f,expected:j})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+m);switch(b[0]){case 1:o.push(m),r.push(p.yytext),n.push(p.yylloc),o.push(b[1]),m=null,l=p.yyleng,a=p.yytext,s=p.yylineno,f=p.yylloc;break;case 2:if(w=this.productions_[b[1]][1],S.$=r[r.length-w],S._$={first_line:n[n.length-(w||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(w||1)].first_column,last_column:n[n.length-1].last_column},y&&(S._$.range=[n[n.length-(w||1)].range[0],n[n.length-1].range[1]]),void 0!==(v=this.performAction.apply(S,[a,l,s,d.yy,b[1],r,n].concat(c))))return v;w&&(o=o.slice(0,-1*w*2),r=r.slice(0,-1*w),n=n.slice(0,-1*w)),o.push(this.productions_[b[1]][0]),r.push(S.$),n.push(S._$),k=i[o[o.length-2]][o[o.length-1]],o.push(k);break;case 3:return!0}}return!0}},d={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,o=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),o.length-1&&(this.yylineno-=o.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:o?(o.length===r.length?this.yylloc.first_column:0)+r[r.length-o.length].length-o[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var o,r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(var i in n)this[i]=n[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,o,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),i=0;i<n.length;i++)if((o=this._input.match(this.rules[n[i]]))&&(!t||o[0].length>t[0].length)){if(t=o,r=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(o,n[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,o,r){switch(o){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function h(){this.yy={}}return p.lexer=d,h.prototype=p,p.Parser=h,new h}();void 0!==K&&(t.parser=o,t.Parser=o.Parser,t.parse=function(){return o.parse.apply(o,arguments)})});function zi(e){if(e instanceof String||"string"==typeof e||e instanceof t)try{return ji.parse(e.toString())}catch(o){throw new Gn(o)}return e}function Si(e,t=G){let o=e;try{o=zi(o)}catch(r){return[r]}return xi(o,t)}const Ti=8,_i=15;function $i(e,t){return!e||"string"!==_r(e)||!!e.match(t)}function Ai(e){return e.url?e.url.split(",").length:0}function Ii(e,t,o){const r=new Set(t),n=[];return Object.keys(e).forEach(t=>{if(!r.has(t)){const r=o?`${o}.${t}`:null;n.push(new Jn(r,e[t],`Unsupported property "${t}"`))}}),n}function qi(e,t){const o=[];o.push(...Ii(e,["type","url","tileSize"],"source"));return $i(e.url,/^mapbox:\/\/([^/]*)$/)||o.push(new Jn(`sources[${t}]`,e.url,"Source url must be a valid Mapbox tileset url")),o}function Oi(e){const t=[];let o=0;return Object.keys(e).forEach((r,n)=>{const i=qi(e[r],n);i.length||(o+=Ai(e[r])),t.push(...i)}),o>_i&&t.push(new Jn("sources",null,`Styles must contain ${_i} or fewer sources`)),t}function Ci(e,t){const o=[],r=Ii(e,[...t,"owner","id","cacheControl","draft","created","modified","visibility"]);o.push(...r),(e.version>Ti||e.version<Ti)&&o.push(new Jn("version",e.version,`Style version must be ${Ti}`));$i(e.glyphs,/^mapbox:\/\/fonts\/([^/]*)\/{fontstack}\/{range}.pbf$/)||o.push(new Jn("glyphs",e.glyphs,"Styles must reference glyphs hosted by Mapbox"));$i(e.sprite,/^mapbox:\/\/sprites\/([^/]*)\/([^/]*)\/?([^/]*)?$/)||o.push(new Jn("sprite",e.sprite,"Styles must reference sprites hosted by Mapbox"));return $i(e.visibility,/^(public|private)$/)||o.push(new Jn("visibility",e.visibility,"Style visibility must be public or private")),o}function Ei(e){let t=e;try{t=zi(t)}catch(r){return[r]}let o=xi(t,G).concat(Ci(t,Object.keys(G.$root)));return t.sources&&(o=o.concat(Oi(t.sources))),o}const Mi={StyleExpression:Pr,isExpression:Rr,isExpressionFilter:ln,createExpression:Dr,createPropertyExpression:Ur,normalizePropertyExpression:Gr,ZoomConstantExpression:Lr,ZoomDependentExpression:Fr,StylePropertyFunction:Jr};exports.expression=Mi;const Ni={convertFunction:Zr,createFunction:Ir,isFunction:$r};exports.function=Ni;const Pi={eachSource:qe,eachLayer:Oe,eachProperty:Ce};exports.visit=Pi,Si.parsed=Si,Si.latest=Si;
},{"buffer":"fe91"}],"DrMt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deg2rad=a,exports.createCanvas=s,exports.getZoomForResolution=u,exports.applyLetterSpacing=p,exports.wrapText=d,exports.defaultResolutions=exports.assign=void 0;var e=require("ol/events"),r=t(require("ol/events/EventType")),n=require("ol/render/canvas");function t(e){return e&&e.__esModule?e:{default:e}}var o="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1,o=arguments.length;t<o;++t){var a=arguments[t];if(null!=a)for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])}return n};function a(e){return e*Math.PI/180}exports.assign=o;var i=function(){for(var e=[],r=78271.51696402048;e.length<=24;r/=2)e.push(r);return e}();function s(e,r){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,r);var n=document.createElement("canvas");return n.width=e,n.height=r,n}function u(e,r){for(var n=0,t=r.length;n<t;++n){if(r[n]<e&&n+1<t){var o=r[n]/r[n+1];return n+Math.log(r[n]/e)/Math.log(o)}}return t-1}exports.defaultResolutions=i;var l,f=Array(256).join("");function p(e,r){if(r>=.05){for(var n="",t=e.split("\n"),o=f.slice(0,Math.round(r/.1)),a=0,i=t.length;a<i;++a)a>0&&(n+="\n"),n+=t[a].split("").join(o);return n}return e}function c(){return l||(l=s(1,1).getContext("2d")),l}function v(e,r){return c().measureText(e).width+(e.length-1)*r}var h={};function d(e,r,n,t){if(-1!==e.indexOf("\n")){for(var o=e.split("\n"),a=[],i=0,s=o.length;i<s;++i)a.push(d(o[i],r,n,t));return a.join("\n")}var u=n+","+r+","+e+","+t,l=h[u];if(!l){var f=e.split(" ");if(f.length>1){var g=c();g.font=r;var x=g.measureText("M").width*n,j="";for(a=[],i=0,s=f.length;i<s;++i){var b=f[i],y=j+(j?" ":"")+b;v(y,t)<=x?j=y:(j&&a.push(j),j=b)}j&&a.push(j);for(i=0,s=a.length;i<s&&s>1;++i){var w=a[i];if(v(w,t)<.35*x){var C=i>0?v(a[i-1],t):1/0,O=i<s-1?v(a[i+1],t):1/0;a.splice(i,1),s-=1,C<O?(a[i-1]+=" "+w,i-=1):a[i]=w+" "+a[i]}}for(i=0,s=a.length-1;i<s;++i){var M=a[i],m=a[i+1];if(v(M,t)>.7*x&&v(m,t)<.6*x){var T=M.split(" "),E=T.pop();v(E,t)<.2*x&&(a[i]=T.join(" "),a[i+1]=E+" "+m),s-=1}}l=a.join("\n")}else l=e;l=p(l,t),h[u]=l}return l}n.labelCache&&(0,e.listen)(n.labelCache,r.default.CLEAR,function(){h={}});
},{"ol/events":"E9xa","ol/events/EventType":"lUmy","ol/render/canvas":"s2Hb"}],"qAIu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._getValue=exports.getValue=b,exports.recordStyleLayer=O,exports.default=_,exports._colorWithOpacity=C,exports._evaluateFilter=k,exports._fromTemplate=I,exports._functionCache=exports._filterCache=void 0;var e=u(require("ol/style/Style")),t=u(require("ol/style/Fill")),i=u(require("ol/style/Stroke")),o=u(require("ol/style/Icon")),a=u(require("ol/style/Text")),r=u(require("ol/style/Circle")),n=u(require("ol/render/Feature")),l=require("@mapbox/mapbox-gl-style-spec"),s=u(require("mapbox-to-css-font")),d=require("./util");function u(e){return e&&e.__esModule?e:{default:e}}var f,p,g=l.function.isFunction,c=l.function.convertFunction,v=l.expression.isExpression,y=l.expression.createPropertyExpression,h={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},x={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},m=function(e,t){var i=y(e,t);if("error"===i.result)throw new Error(i.value.map(function(e){return e.key+": "+e.message}).join(", "));return i.value},w={},S={zoom:0},M={};function b(e,t,i,o,a){var r=e.id;M[r]||(M[r]={});var n=M[r];if(!n[i]){var s=(e[t]||w)[i],d=l.latest[t+"_"+e.type][i];void 0===s&&(s=d.default);var u=v(s);if(!u&&g(s)&&(s=c(s,d),u=!0),u){var f=m(s,d);n[i]=f.evaluate.bind(f)}else"color"==d.type&&(s=l.Color.parse(s)),n[i]=function(){return s}}return S.zoom=o,n[i](S,a)}exports._functionCache=M;var F={};function k(e,t,i,o){return e in F||(F[e]=(0,l.featureFilter)(t).filter),S.zoom=o,F[e](S,i)}function C(e,t){if(e){if(0===e.a||0===t)return;var i=e.a;return t=void 0===t?1:t,"rgba("+Math.round(255*e.r/i)+","+Math.round(255*e.g/i)+","+Math.round(255*e.b/i)+","+i*t+")"}return e}exports._filterCache=F;var T=/^([^]*)\{(.*)\}([^]*)$/;function I(e,t){var i;do{if(i=e.match(T)){var o=t[i[2]]||"";e=i[1]+o+i[3]}}while(i);return e}var L=!1;function O(e){L=e}function _(u,g,c,v,y,m,S){if(void 0===v&&(v=d.defaultResolutions),"string"==typeof g&&(g=JSON.parse(g)),8!=g.version)throw new Error("glStyle version 8 required.");var T,O;if(m)if("undefined"!=typeof Image){var _=new Image;_.crossOrigin="anonymous",_.onload=function(){T=_,O=[_.width,_.height],u.changed(),_.onload=null},_.src=m}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var q=self;q.postMessage({action:"loadImage",src:m}),q.addEventListener("message",function(e){"imageLoaded"===e.data.action&&e.data.src===m&&(T=e.data.image,O=[T.width,T.height])})}for(var z,P=(0,l.derefLayers)(g.layers),W={},E=[],R=0,G=P.length;R<G;++R){var Z=P[R],j=Z.id;if("string"==typeof c&&Z.source==c||-1!==c.indexOf(j)){var A=Z["source-layer"];if(!z){z=Z.source;var N=g.sources[z];if(!N)throw new Error('Source "'+z+'" is not defined');var V=N.type;if("vector"!==V&&"geojson"!==V)throw new Error('Source "'+z+'" is not of type "vector" or "geojson", but "'+V+'"')}var D=W[A];D||(D=W[A]=[]),D.push({layer:Z,index:R}),E.push(j)}delete M[j],delete F[j]}var J=new i.default,B=new t.default,U={},X={},Y=[],$=function(l,u){var g=l.getProperties(),c=W[g.layer];if(c){var m=v.indexOf(u);-1==m&&(m=(0,d.getZoomForResolution)(u,v));for(var M,F=h[l.getGeometry().getType()],_={properties:g,type:F},q=-1,z=function(v,h){var L=c[v],z=L.layer,P=z.id,W=z.layout||w,E=z.paint||w;if("none"===W.visibility||"minzoom"in z&&m<z.minzoom||"maxzoom"in z&&m>=z.maxzoom)return"continue";var R=z.filter;if(!R||k(P,R,_,m)){M=z;var G=void 0,Z=void 0,j=void 0,A=void 0,N=void 0,V=void 0,D=L.index;if(3==F&&("fill"==z.type||"fill-extrusion"==z.type))if(Z=b(z,"paint",z.type+"-opacity",m,_),z.type+"-pattern"in E){var $=b(z,"paint",z.type+"-pattern",m,_);if($){var H="string"==typeof $?I($,g):$.toString();if(T&&y&&y[H]){(V=Y[++q])&&V.getFill()&&!V.getStroke()&&!V.getText()||(V=Y[q]=new e.default({fill:new t.default})),j=V.getFill(),V.setZIndex(D);var K=X[Te=H+"."+Z];if(!K){var Q=y[H];(Le=(Ie=(0,d.createCanvas)(Q.width,Q.height)).getContext("2d")).globalAlpha=Z,Le.drawImage(T,Q.x,Q.y,Q.width,Q.height,0,0,Q.width,Q.height),K=Le.createPattern(Ie,"repeat"),X[Te]=K}j.setColor(K)}}}else(G=C(b(z,"paint",z.type+"-color",m,_),Z))&&(z.type+"-outline-color"in E&&(N=C(b(z,"paint",z.type+"-outline-color",m,_),Z)),N||(N=G),(V=Y[++q])&&V.getFill()&&V.getStroke()&&!V.getText()||(V=Y[q]=new e.default({fill:new t.default,stroke:new i.default})),(j=V.getFill()).setColor(G),(A=V.getStroke()).setColor(N),A.setWidth(1),V.setZIndex(D));if(1!=F&&"line"==z.type){G=!("line-pattern"in E)&&"line-color"in E?C(b(z,"paint","line-color",m,_),b(z,"paint","line-opacity",m,_)):void 0;var ee=b(z,"paint","line-width",m,_);G&&ee>0&&((V=Y[++q])&&V.getStroke()&&!V.getFill()&&!V.getText()||(V=Y[q]=new e.default({stroke:new i.default})),(A=V.getStroke()).setLineCap(b(z,"layout","line-cap",m,_)),A.setLineJoin(b(z,"layout","line-join",m,_)),A.setMiterLimit(b(z,"layout","line-miter-limit",m,_)),A.setColor(G),A.setWidth(ee),A.setLineDash(E["line-dasharray"]?b(z,"paint","line-dasharray",m,_).map(function(e){return e*ee}):null),V.setZIndex(D))}var te=!1,ie=null,oe=0,ae=void 0,re=void 0,ne=void 0;if((1==F||2==F)&&"icon-image"in W){var le=b(z,"layout","icon-image",m,_);if(le){ae="string"==typeof le?I(le,g):le.toString();var se=void 0;if(T&&y&&y[ae]){var de=b(z,"layout","icon-rotation-alignment",m,_);if(2==F){var ue=l.getGeometry();if(ue.getFlatMidpoint||ue.getFlatMidpoints){var fe=ue.getExtent();if(Math.sqrt(Math.max(Math.pow((fe[2]-fe[0])/u,2),Math.pow((fe[3]-fe[1])/u,2)))>150){var pe="MultiLineString"===ue.getType()?ue.getFlatMidpoints():ue.getFlatMidpoint();if(p||(f=[NaN,NaN],p=new n.default("Point",f,[],{},null)),se=p,f[0]=pe[0],f[1]=pe[1],"line"===(Ye=b(z,"layout","symbol-placement",m,_))&&"map"===de)for(var ge=ue.getStride(),ce=ue.getFlatCoordinates(),ve=0,ye=ce.length-ge;ve<ye;ve+=ge){var he=ce[ve],xe=ce[ve+1],me=ce[ve+ge],we=ce[ve+ge+1],Se=Math.min(he,me),Me=Math.min(xe,we),be=Math.max(he,me),Fe=Math.max(xe,we);if(pe[0]>=Se&&pe[0]<=be&&pe[1]>=Me&&pe[1]<=Fe){oe=Math.atan2(xe-we,me-he);break}}}}}if(2!==F||se){var ke=b(z,"layout","icon-size",m,_),Ce=void 0!==E["icon-color"]?b(z,"paint","icon-color",m,_):null;if(!Ce||0!==Ce.a){var Te=ae+"."+ke;if(null!==Ce&&(Te+="."+Ce),!(re=U[Te])){Q=y[ae];if(null!==Ce){var Ie,Le;(Le=(Ie=(0,d.createCanvas)(Q.width,Q.height)).getContext("2d")).drawImage(T,Q.x,Q.y,Q.width,Q.height,0,0,Q.width,Q.height);for(var Oe=Le.getImageData(0,0,Ie.width,Ie.height),_e=0,qe=Oe.data.length;_e<qe;_e+=4){var ze=Ce.a;0!==ze&&(Oe.data[_e]=255*Ce.r/ze,Oe.data[_e+1]=255*Ce.g/ze,Oe.data[_e+2]=255*Ce.b/ze),Oe.data[_e+3]=ze}Le.putImageData(Oe,0,0),re=U[Te]=new o.default({img:Ie,imgSize:[Ie.width,Ie.height],scale:ke/Q.pixelRatio})}else re=U[Te]=new o.default({img:T,imgSize:O,size:[Q.width,Q.height],offset:[Q.x,Q.y],rotateWithView:"map"===de,scale:ke/Q.pixelRatio})}}re&&((V=Y[++q])&&V.getImage()&&!V.getFill()&&!V.getStroke()||(V=Y[q]=new e.default),V.setGeometry(se),re.setRotation(oe+(0,d.deg2rad)(b(z,"layout","icon-rotate",m,_))),re.setOpacity(b(z,"paint","icon-opacity",m,_)),re.setAnchor(x[b(z,"layout","icon-anchor",m,_)]),V.setImage(re),ie=V.getText(),V.setText(void 0),V.setZIndex(D),te=!0,ne=!1)}else ne=!0}}}if(1==F&&"circle-radius"in E){(V=Y[++q])&&V.getImage()&&!V.getFill()&&!V.getStroke()||(V=Y[q]=new e.default);var Pe=b(z,"paint","circle-radius",m,_),We=C(b(z,"paint","circle-stroke-color",m,_),b(z,"paint","circle-stroke-opacity",m,_)),Ee=C(b(z,"paint","circle-color",m,_),b(z,"paint","circle-opacity",m,_)),Re=b(z,"paint","circle-stroke-width",m,_),Ge=Pe+"."+We+"."+Ee+"."+Re;(re=U[Ge])||(re=U[Ge]=new r.default({radius:Pe,stroke:We&&Re>0?new i.default({width:Re,color:We}):void 0,fill:Ee?new t.default({color:Ee}):void 0})),V.setImage(re),ie=V.getText(),V.setText(void 0),V.setGeometry(void 0),V.setZIndex(D),te=!0}var Ze=void 0;if("text-field"in W)Ze=I(b(z,"layout","text-field",m,_).toString(),g).trim(),Z=b(z,"paint","text-opacity",m,_);if(Ze&&Z&&!ne){te||((V=Y[++q])&&V.getText()&&!V.getFill()&&!V.getStroke()||(V=Y[q]=new e.default),V.setImage(void 0),V.setGeometry(void 0)),V.getText()||V.setText(ie||new a.default({padding:[2,2,2,2]})),ie=V.getText();var je=Math.round(b(z,"layout","text-size",m,_)),Ae=b(z,"layout","text-font",m,_),Ne=b(z,"layout","text-line-height",m,_),Ve=(0,s.default)(S?S(Ae):Ae,je,Ne),De=W["text-transform"];"uppercase"==De?Ze=Ze.toUpperCase():"lowercase"==De&&(Ze=Ze.toLowerCase());var Je=b(z,"layout","text-max-width",m,_),Be=b(z,"layout","text-letter-spacing",m,_),Ue=2==F?(0,d.applyLetterSpacing)(Ze,Be):(0,d.wrapText)(Ze,Ve,Je,Be);ie.setText(Ue),ie.setFont(Ve),ie.setRotation((0,d.deg2rad)(b(z,"layout","text-rotate",m,_)));var Xe=b(z,"layout","text-anchor",m,_),Ye=te||1==F?"point":b(z,"layout","symbol-placement",m,_);ie.setPlacement(Ye);var $e=b(z,"paint","text-halo-width",m,_),He=b(z,"layout","text-offset",m,_),Ke=b(z,"paint","text-translate",m,_),Qe=0,et=0;if("point"==Ye){var tt="center";-1!==Xe.indexOf("left")?(tt="left",et=$e):-1!==Xe.indexOf("right")&&(tt="right",et=-$e),ie.setTextAlign(tt);var it=b(z,"layout","text-rotation-alignment",m,_);ie.setRotateWithView("map"==it)}else ie.setMaxAngle((0,d.deg2rad)(b(z,"layout","text-max-angle",m,_))*Ze.length/Ue.length),ie.setTextAlign(),ie.setRotateWithView(!1);var ot="middle";0==Xe.indexOf("bottom")?(ot="bottom",Qe=-$e-.5*(Ne-1)*je):0==Xe.indexOf("top")&&(ot="top",Qe=$e+.5*(Ne-1)*je),ie.setTextBaseline(ot),ie.setOffsetX(He[0]*je+et+Ke[0]),ie.setOffsetY(He[1]*je+Qe+Ke[1]),B.setColor(C(b(z,"paint","text-color",m,_),Z)),ie.setFill(B);var at=C(b(z,"paint","text-halo-color",m,_),Z);if(at){J.setColor(at),$e*=2;var rt=.5*je;J.setWidth($e<=rt?$e:rt),ie.setStroke(J)}else ie.setStroke(void 0);var nt=b(z,"layout","text-padding",m,_),lt=ie.getPadding();nt!==lt[0]&&(lt[0]=lt[1]=lt[2]=lt[3]=nt),V.setZIndex(D)}}},P=0,E=c.length;P<E;++P)z(P);return q>-1?(Y.length=q+1,L&&("function"==typeof l.set?l.set("mapbox-layer",M):l.getProperties()["mapbox-layer"]=M),Y):void 0}};return u.setStyle($),u.set("mapbox-source",z),u.set("mapbox-layers",E),$}
},{"ol/style/Style":"ERCw","ol/style/Fill":"wPtA","ol/style/Stroke":"v50a","ol/style/Icon":"NUxy","ol/style/Text":"AXF6","ol/style/Circle":"j2Vo","ol/render/Feature":"AUmC","@mapbox/mapbox-gl-style-spec":"tVGL","mapbox-to-css-font":"z0v0","./util":"DrMt"}],"J3C1":[function(require,module,exports) {
(function(){var a;module.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return a},getLink:function(a){return"https://fonts.google.com/specimen/"+a.replace(/( )/g,"+")},normalizeName:function(a){return a}},a=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this);
},{}],"wCPW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../events/EventType.js")),t=o(require("./Geometry.js")),r=o(require("./GeometryType.js")),i=require("../extent.js"),n=require("../events.js");function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),a=function(t){function o(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return s(o,t),o.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(n.unlistenByKey),this.changeEventsKeys_.length=0},o.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,r=this.geometries_.length;t<r;++t)this.changeEventsKeys_.push((0,n.listen)(this.geometries_[t],e.default.CHANGE,this.changed,this))},o.prototype.clone=function(){var e=new o(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},o.prototype.closestPointXY=function(e,t,r,n){if(n<(0,i.closestSquaredDistanceXY)(this.getExtent(),e,t))return n;for(var o=this.geometries_,s=0,a=o.length;s<a;++s)n=o[s].closestPointXY(e,t,r,n);return n},o.prototype.containsXY=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)if(r[i].containsXY(e,t))return!0;return!1},o.prototype.computeExtent=function(e){(0,i.createOrUpdateEmpty)(e);for(var t=this.geometries_,r=0,n=t.length;r<n;++r)(0,i.extend)(e,t[r].getExtent());return e},o.prototype.getGeometries=function(){return p(this.geometries_)},o.prototype.getGeometriesArray=function(){return this.geometries_},o.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e},o.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,i=!1,n=0,s=r.length;n<s;++n){var a=r[n],p=a.getSimplifiedGeometry(e);t.push(p),p!==a&&(i=!0)}if(i){var u=new o(null);return u.setGeometriesArray(t),u}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},o.prototype.getType=function(){return r.default.GEOMETRY_COLLECTION},o.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1},o.prototype.isEmpty=function(){return 0===this.geometries_.length},o.prototype.rotate=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].rotate(e,t);this.changed()},o.prototype.scale=function(e,t,r){var n=r;n||(n=(0,i.getCenter)(this.getExtent()));for(var o=this.geometries_,s=0,a=o.length;s<a;++s)o[s].scale(e,t,n);this.changed()},o.prototype.setGeometries=function(e){this.setGeometriesArray(p(e))},o.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},o.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()},o.prototype.translate=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].translate(e,t);this.changed()},o.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},o}(t.default);function p(e){for(var t=[],r=0,i=e.length;r<i;++r)t.push(e[r].clone());return t}var u=a;exports.default=u;
},{"../events/EventType.js":"lUmy","./Geometry.js":"QKR7","./GeometryType.js":"qBtD","../extent.js":"pbFF","../events.js":"E9xa"}],"h5iq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Feature.js")),e=o(require("./FormatType.js")),r=require("../util.js");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),u=function(t){function o(){return t.call(this)||this}return n(o,t),o.prototype.getType=function(){return e.default.JSON},o.prototype.readFeature=function(t,e){return this.readFeatureFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readFeatureFromObject=function(t,e){return(0,r.abstract)()},o.prototype.readFeaturesFromObject=function(t,e){return(0,r.abstract)()},o.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readGeometryFromObject=function(t,e){return(0,r.abstract)()},o.prototype.readProjection=function(t){return this.readProjectionFromObject(i(t))},o.prototype.readProjectionFromObject=function(t){return(0,r.abstract)()},o.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},o.prototype.writeFeatureObject=function(t,e){return(0,r.abstract)()},o.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},o.prototype.writeFeaturesObject=function(t,e){return(0,r.abstract)()},o.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},o.prototype.writeGeometryObject=function(t,e){return(0,r.abstract)()},o}(t.default);function i(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var a=u;exports.default=a;
},{"./Feature.js":"y5uw","./FormatType.js":"xICm","../util.js":"bmrL"}],"Xkfr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("../Feature.js")),t=y(require("../geom/GeometryCollection.js")),r=y(require("../geom/GeometryType.js")),o=y(require("./JSONFeature.js")),n=y(require("../geom/LineString.js")),a=y(require("../geom/MultiLineString.js")),i=y(require("../geom/MultiPoint.js")),u=y(require("../geom/MultiPolygon.js")),s=y(require("../geom/Point.js")),c=y(require("../geom/Polygon.js")),p=require("../asserts.js"),d=require("../obj.js"),f=require("../proj.js"),l=require("./Feature.js");function y(e){return e&&e.__esModule?e:{default:e}}var m=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),g=function(t){function r(e){var r=this,o=e||{};return(r=t.call(this)||this).dataProjection=(0,f.get)(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(r.defaultFeatureProjection=(0,f.get)(o.featureProjection)),r.geometryName_=o.geometryName,r.extractGeometryName_=o.extractGeometryName,r}return m(r,t),r.prototype.readFeatureFromObject=function(t,r){var o=null,n=O((o="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,r),a=new e.default;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(n),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties,!0),a},r.prototype.readFeaturesFromObject=function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,a=o.length;n<a;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r},r.prototype.readGeometryFromObject=function(e,t){return O(e,t)},r.prototype.readProjectionFromObject=function(e){var t,r=e.crs;return r?"name"==r.type?t=(0,f.get)(r.properties.name):"EPSG"===r.type?t=(0,f.get)("EPSG:"+r.properties.code):(0,p.assert)(!1,36):t=this.dataProjection,t},r.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;var n=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=v(a,t),delete n[e.getGeometryName()]),(0,d.isEmpty)(n)||(r.properties=n),r},r.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}},r.prototype.writeGeometryObject=function(e,t){return v(e,this.adaptOptions(t))},r}(o.default);function O(e,t){if(!e)return null;var o;switch(e.type){case r.default.POINT:o=P(e);break;case r.default.LINE_STRING:o=G(e);break;case r.default.POLYGON:o=h(e);break;case r.default.MULTI_POINT:o=b(e);break;case r.default.MULTI_LINE_STRING:o=_(e);break;case r.default.MULTI_POLYGON:o=N(e);break;case r.default.GEOMETRY_COLLECTION:o=j(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,l.transformGeometryWithOptions)(o,!1,t)}function j(e,r){var o=e.geometries.map(function(e){return O(e,r)});return new t.default(o)}function P(e){return new s.default(e.coordinates)}function G(e){return new n.default(e.coordinates)}function _(e){return new a.default(e.coordinates)}function b(e){return new i.default(e.coordinates)}function N(e){return new u.default(e.coordinates)}function h(e){return new c.default(e.coordinates)}function v(e,t){var o,n=(e=(0,l.transformGeometryWithOptions)(e,!0,t)).getType();switch(n){case r.default.POINT:o=C(e,t);break;case r.default.LINE_STRING:o=L(e,t);break;case r.default.POLYGON:o=E(e,t);break;case r.default.MULTI_POINT:o=w(e,t);break;case r.default.MULTI_LINE_STRING:o=F(e,t);break;case r.default.MULTI_POLYGON:o=T(e,t);break;case r.default.GEOMETRY_COLLECTION:o=I(e,t);break;case r.default.CIRCLE:o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return o}function I(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var r=(0,d.assign)({},t);return delete r.featureProjection,v(e,r)})}}function L(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function F(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function w(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function T(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function C(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function E(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var M=g;exports.default=M;
},{"../Feature.js":"cEtg","../geom/GeometryCollection.js":"wCPW","../geom/GeometryType.js":"qBtD","./JSONFeature.js":"h5iq","../geom/LineString.js":"ArTU","../geom/MultiLineString.js":"YkYz","../geom/MultiPoint.js":"UXVJ","../geom/MultiPolygon.js":"ZcrM","../geom/Point.js":"fTqU","../geom/Polygon.js":"kEvS","../asserts.js":"hgi2","../obj.js":"lPyT","../proj.js":"bkYg","./Feature.js":"y5uw"}],"sZ0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Layer.js")),t=o(require("./TileProperty.js")),r=require("../obj.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(e){function o(t){var o=this,n=t||{},i=(0,r.assign)({},n);return delete i.preload,delete i.useInterimTilesOnError,(o=e.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),o.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),o}return n(o,e),o.prototype.getPreload=function(){return this.get(t.default.PRELOAD)},o.prototype.setPreload=function(e){this.set(t.default.PRELOAD,e)},o.prototype.getUseInterimTilesOnError=function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)},o.prototype.setUseInterimTilesOnError=function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)},o}(e.default),s=i;exports.default=s;
},{"./Layer.js":"hYy3","./TileProperty.js":"MkpP","../obj.js":"lPyT"}],"tAJs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseTile.js")),t=r(require("../renderer/canvas/TileLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.createRenderer=function(){return new t.default(this)},r}(e.default),u=o;exports.default=u;
},{"./BaseTile.js":"sZ0J","../renderer/canvas/TileLayer.js":"swyo"}],"tPcm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Tile.js")),e=s(require("./TileState.js")),i=require("./dom.js"),n=require("./Image.js");function s(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(t){function i(e,i,n,s,r,a){var o=t.call(this,e,i,a)||this;return o.crossOrigin_=s,o.src_=n,o.key=n,o.image_=new Image,null!==s&&(o.image_.crossOrigin=s),o.unlisten_=null,o.tileLoadFunction_=r,o}return r(i,t),i.prototype.getImage=function(){return this.image_},i.prototype.handleImageError_=function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=o(),this.changed()},i.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()},i.prototype.load=function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,n.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(t.default);function o(){var t=(0,i.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var u=a;exports.default=u;
},{"./Tile.js":"lLEG","./TileState.js":"TPVv","./dom.js":"N5LR","./Image.js":"GllS"}],"s12m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENABLE_RASTER_REPROJECTION=exports.ERROR_THRESHOLD=void 0;var R=.5;exports.ERROR_THRESHOLD=R;var E=!0;exports.ENABLE_RASTER_REPROJECTION=E;
},{}],"nSx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),i=require("../proj.js"),r=require("../math.js"),e=10,s=.25,o=function(){function o(s,o,n,a,h,u){this.sourceProj_=s,this.targetProj_=o;var d={},c=(0,i.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var i=t[0]+"/"+t[1];return d[i]||(d[i]=c(t)),d[i]},this.maxSourceExtent_=a,this.errorThresholdSquared_=h*h,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(a)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var _=(0,t.getTopLeft)(n),l=(0,t.getTopRight)(n),g=(0,t.getBottomRight)(n),f=(0,t.getBottomLeft)(n),W=this.transformInv_(_),v=this.transformInv_(l),m=this.transformInv_(g),x=this.transformInv_(f),p=e+(u?Math.max(0,Math.ceil((0,r.log2)((0,t.getArea)(n)/(u*u*256*256)))):0);if(this.addQuad_(_,l,g,f,W,v,m,x,p),this.wrapsXInSource_){var F=1/0;this.triangles_.forEach(function(t,i,r){F=Math.min(F,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-F>this.sourceWorldWidth_/2){var i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-F>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-F>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-F>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);var r=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-r<this.sourceWorldWidth_/2&&(t.source=i)}}.bind(this))}d={}}return o.prototype.addTriangle_=function(t,i,r,e,s,o){this.triangles_.push({source:[e,s,o],target:[t,i,r]})},o.prototype.addQuad_=function(i,e,o,n,a,h,u,d,c){var _=(0,t.boundingExtent)([a,h,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([i,e,o,n]);W=(0,t.getWidth)(v)/this.targetWorldWidth_>s||W}!f&&this.sourceProj_.isGlobal()&&l&&(W=l>s||W)}if(!(!W&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3]))||(0,t.intersects)(_,this.maxSourceExtent_)){var m=0;if(!(W||isFinite(a[0])&&isFinite(a[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1])))if(c>0)W=!0;else if(1!=(m=(isFinite(a[0])&&isFinite(a[1])?0:8)+(isFinite(h[0])&&isFinite(h[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(d[0])&&isFinite(d[1])?0:1))&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!W){var x=[(i[0]+o[0])/2,(i[1]+o[1])/2],p=this.transformInv_(x),F=void 0;if(f)F=((0,r.modulo)(a[0],g)+(0,r.modulo)(u[0],g))/2-(0,r.modulo)(p[0],g);else F=(a[0]+u[0])/2-p[0];var j=(a[1]+u[1])/2-p[1];W=F*F+j*j>this.errorThresholdSquared_}if(W){if(Math.abs(i[0]-o[0])<=Math.abs(i[1]-o[1])){var E=[(e[0]+o[0])/2,(e[1]+o[1])/2],I=this.transformInv_(E),P=[(n[0]+i[0])/2,(n[1]+i[1])/2],S=this.transformInv_(P);this.addQuad_(i,e,E,P,a,h,I,S,c-1),this.addQuad_(P,E,o,n,S,I,u,d,c-1)}else{var T=[(i[0]+e[0])/2,(i[1]+e[1])/2],M=this.transformInv_(T),b=[(o[0]+n[0])/2,(o[1]+n[1])/2],X=this.transformInv_(b);this.addQuad_(i,T,b,n,a,M,X,d,c-1),this.addQuad_(T,e,o,b,M,h,u,X,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(i,o,n,a,u,d),0==(14&m)&&this.addTriangle_(i,o,e,a,u,h),m&&(0==(13&m)&&this.addTriangle_(e,n,i,h,d,a),0==(7&m)&&this.addTriangle_(e,n,o,h,d,u))}},o.prototype.calculateSourceExtent=function(){var i=(0,t.createEmpty)();return this.triangles_.forEach(function(r,e,s){var o=r.source;(0,t.extendCoordinate)(i,o[0]),(0,t.extendCoordinate)(i,o[1]),(0,t.extendCoordinate)(i,o[2])}),i},o.prototype.getTriangles=function(){return this.triangles_},o}(),n=o;exports.default=n;
},{"../extent.js":"pbFF","../proj.js":"bkYg","../math.js":"cgU2"}],"RrT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMAGE_SMOOTHING_DISABLED=exports.DEFAULT_WMS_VERSION=void 0;var e="1.3.0";exports.DEFAULT_WMS_VERSION=e;var o={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};exports.IMAGE_SMOOTHING_DISABLED=o;
},{}],"XzS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceResolution=u,exports.calculateSourceExtentResolution=g,exports.render=v;var e,t=require("./source/common.js"),r=require("./obj.js"),a=require("./extent.js"),n=require("./dom.js"),o=require("./proj.js"),i=require("./math.js");function s(e,t,r,a,n){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(a,n),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,a)+1,Math.max(r,n)),e.restore()}function l(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function c(){if(void 0===e){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",s(t,4,5,4,0),s(t,4,5,0,5);var r=t.getImageData(0,0,3,3).data;e=l(r,0)||l(r,4)||l(r,8)}return e}function u(e,t,r,n){var i=(0,o.transform)(r,t,e),s=(0,o.getPointResolution)(t,n,r),l=t.getMetersPerUnit();void 0!==l&&(s*=l);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var u=e.getExtent();if(!u||(0,a.containsCoordinate)(u,i)){var g=(0,o.getPointResolution)(e,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function g(e,t,r,n){var o=(0,a.getCenter)(r),i=u(e,t,o,n);return(!isFinite(i)||i<=0)&&(0,a.forEachCorner)(r,function(r){return i=u(e,t,r,n),isFinite(i)&&i>0}),i}function v(e,o,s,l,u,g,v,h,f,m,d,x){var T=(0,n.createCanvasContext2D)(Math.round(s*e),Math.round(s*o));if((0,r.assign)(T,x),0===f.length)return T.canvas;function p(e){return Math.round(e*s)/s}T.scale(s,s),T.globalCompositeOperation="lighter";var M=(0,a.createEmpty)();f.forEach(function(e,t,r){(0,a.extend)(M,e.extent)});var b=(0,a.getWidth)(M),C=(0,a.getHeight)(M),E=(0,n.createCanvasContext2D)(Math.round(s*b/l),Math.round(s*C/l));(0,r.assign)(E,x);var P=s/l;f.forEach(function(e,t,r){var n=e.extent[0]-M[0],o=-(e.extent[3]-M[3]),i=(0,a.getWidth)(e.extent),s=(0,a.getHeight)(e.extent);e.image.width>0&&e.image.height>0&&E.drawImage(e.image,m,m,e.image.width-2*m,e.image.height-2*m,n*P,o*P,i*P,s*P)});var j=(0,a.getTopLeft)(v);return h.getTriangles().forEach(function(e,r,a){var n=e.source,o=e.target,u=n[0][0],v=n[0][1],h=n[1][0],f=n[1][1],m=n[2][0],d=n[2][1],b=p((o[0][0]-j[0])/g),C=p(-(o[0][1]-j[1])/g),P=p((o[1][0]-j[0])/g),S=p(-(o[1][1]-j[1])/g),q=p((o[2][0]-j[0])/g),I=p(-(o[2][1]-j[1])/g),O=u,y=v;u=0,v=0;var D=[[h-=O,f-=y,0,0,P-b],[m-=O,d-=y,0,0,q-b],[0,0,h,f,S-C],[0,0,m,d,I-C]],R=(0,i.solveLinearSystem)(D);if(R){if(T.save(),T.beginPath(),c()||x===t.IMAGE_SMOOTHING_DISABLED){T.moveTo(P,S);for(var w=b-P,_=C-S,k=0;k<4;k++)T.lineTo(P+p((k+1)*w/4),S+p(k*_/3)),3!=k&&T.lineTo(P+p((k+1)*w/4),S+p((k+1)*_/3));T.lineTo(q,I)}else T.moveTo(P,S),T.lineTo(b,C),T.lineTo(q,I);T.clip(),T.transform(R[0],R[2],R[1],R[3],b,C),T.translate(M[0]-O,M[3]-y),T.scale(l/s,-l/s),T.drawImage(E.canvas,0,0),T.restore()}}),d&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,h.getTriangles().forEach(function(e,t,r){var a=e.target,n=(a[0][0]-j[0])/g,o=-(a[0][1]-j[1])/g,i=(a[1][0]-j[0])/g,s=-(a[1][1]-j[1])/g,l=(a[2][0]-j[0])/g,c=-(a[2][1]-j[1])/g;T.beginPath(),T.moveTo(i,s),T.lineTo(n,o),T.lineTo(l,c),T.closePath(),T.stroke()}),T.restore()),T.canvas}
},{"./source/common.js":"RrT9","./obj.js":"lPyT","./extent.js":"pbFF","./dom.js":"N5LR","./proj.js":"bkYg","./math.js":"cgU2"}],"PSAO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=l(require("../events/EventType.js")),r=l(require("../Tile.js")),i=l(require("../TileState.js")),s=l(require("./Triangulation.js")),o=require("../reproj.js"),n=require("../math.js"),a=require("../extent.js"),u=require("../events.js");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),d=function(r){function l(t,u,l,c,d,_,f,h,p,g,T,E){var v=r.call(this,d,i.default.IDLE)||this;v.renderEdges_=void 0!==T&&T,v.contextOptions_=E,v.pixelRatio_=f,v.gutter_=h,v.canvas_=null,v.sourceTileGrid_=u,v.targetTileGrid_=c,v.wrappedTileCoord_=_||d,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var y=c.getTileCoordExtent(v.wrappedTileCoord_),x=v.targetTileGrid_.getExtent(),R=v.sourceTileGrid_.getExtent(),j=x?(0,a.getIntersection)(y,x):y;if(0===(0,a.getArea)(j))return v.state=i.default.EMPTY,v;var O=t.getExtent();O&&(R=R?(0,a.getIntersection)(R,O):O);var m=c.getResolution(v.wrappedTileCoord_[0]),L=(0,o.calculateSourceExtentResolution)(t,l,j,m);if(!isFinite(L)||L<=0)return v.state=i.default.EMPTY,v;var D=void 0!==g?g:e.ERROR_THRESHOLD;if(v.triangulation_=new s.default(t,l,j,R,L*D,m),0===v.triangulation_.getTriangles().length)return v.state=i.default.EMPTY,v;v.sourceZ_=u.getZForResolution(L);var G=v.triangulation_.calculateSourceExtent();if(R&&(t.canWrapX()?(G[1]=(0,n.clamp)(G[1],R[1],R[3]),G[3]=(0,n.clamp)(G[3],R[1],R[3])):G=(0,a.getIntersection)(G,R)),(0,a.getArea)(G)){for(var I=u.getTileRangeForExtentAndZ(G,v.sourceZ_),S=I.minX;S<=I.maxX;S++)for(var A=I.minY;A<=I.maxY;A++){var C=p(v.sourceZ_,S,A,f);C&&v.sourceTiles_.push(C)}0===v.sourceTiles_.length&&(v.state=i.default.EMPTY)}else v.state=i.default.EMPTY;return v}return c(l,r),l.prototype.getImage=function(){return this.canvas_},l.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,r,s){t&&t.getState()==i.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=i.default.ERROR;else{var t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),s="number"==typeof r?r:r[0],n="number"==typeof r?r:r[1],a=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,o.render)(s,n,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=i.default.LOADED}this.changed()},l.prototype.load=function(){if(this.state==i.default.IDLE){this.state=i.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,s,o){var n=r.getState();if(n==i.default.IDLE||n==i.default.LOADING){e++;var a=(0,u.listen)(r,t.default.CHANGE,function(t){var s=r.getState();s!=i.default.LOADED&&s!=i.default.ERROR&&s!=i.default.EMPTY||((0,u.unlistenByKey)(a),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,r){e.getState()==i.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},l.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(u.unlistenByKey),this.sourcesListenerKeys_=null},l}(r.default),_=d;exports.default=_;
},{"./common.js":"s12m","../events/EventType.js":"lUmy","../Tile.js":"lLEG","../TileState.js":"TPVv","./Triangulation.js":"nSx6","../reproj.js":"XzS7","../math.js":"cgU2","../extent.js":"pbFF","../events.js":"E9xa"}],"Hf9V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../events/EventType.js")),t=p(require("../ImageTile.js")),i=p(require("../reproj/Tile.js")),r=p(require("../TileCache.js")),o=p(require("../TileState.js")),n=p(require("./UrlTile.js")),c=require("../reproj/common.js"),l=require("./common.js"),s=require("../proj.js"),a=require("../tilecoord.js"),h=require("../tilegrid.js"),u=require("../util.js");function p(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),E=function(n){function p(e){var i=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:j,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:t.default,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.contextOptions_=!1===e.imageSmoothing?l.IMAGE_SMOOTHING_DISABLED:void 0,i.renderReprojectionEdges_=!1,i}return d(p,n),p.prototype.canExpireCache=function(){if(!c.ENABLE_RASTER_REPROJECTION)return n.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},p.prototype.expireCache=function(e,t){if(c.ENABLE_RASTER_REPROJECTION){var i=this.getTileCacheForProjection(e);for(var r in this.tileCache.expireCache(this.tileCache==i?t:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[r];o.expireCache(o==i?t:{})}}else n.prototype.expireCache.call(this,e,t)},p.prototype.getContextOptions=function(){return this.contextOptions_},p.prototype.getGutterForProjection=function(e){return c.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!(0,s.equivalent)(this.getProjection(),e)?0:this.getGutter()},p.prototype.getGutter=function(){return 0},p.prototype.getKey=function(){return n.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},p.prototype.getOpaque=function(e){return!(c.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!(0,s.equivalent)(this.getProjection(),e))&&n.prototype.getOpaque.call(this,e)},p.prototype.getTileGridForProjection=function(e){if(!c.ENABLE_RASTER_REPROJECTION)return n.prototype.getTileGridForProjection.call(this,e);var t=this.getProjection();if(!this.tileGrid||t&&!(0,s.equivalent)(t,e)){var i=(0,u.getUid)(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,h.getForProjection)(e)),this.tileGridForProjection[i]}return this.tileGrid},p.prototype.getTileCacheForProjection=function(e){if(!c.ENABLE_RASTER_REPROJECTION)return n.prototype.getTileCacheForProjection.call(this,e);var t=this.getProjection();if(!t||(0,s.equivalent)(t,e))return this.tileCache;var i=(0,u.getUid)(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new r.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},p.prototype.createTile_=function(t,i,r,n,c,l){var s=[t,i,r],a=this.getTileCoordForTileUrlFunction(s,c),h=a?this.tileUrlFunction(a,n,c):void 0,u=new this.tileClass(s,void 0!==h?o.default.IDLE:o.default.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=l,u.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),u},p.prototype.getTile=function(e,t,r,o,n){var l=this.getProjection();if(c.ENABLE_RASTER_REPROJECTION&&l&&n&&!(0,s.equivalent)(l,n)){var h=this.getTileCacheForProjection(n),u=[e,t,r],p=void 0,d=(0,a.getKey)(u);h.containsKey(d)&&(p=h.get(d));var E=this.getKey();if(p&&p.key==E)return p;var j=this.getTileGridForProjection(l),g=this.getTileGridForProjection(n),f=this.getTileCoordForTileUrlFunction(u,n),T=new i.default(l,j,n,g,u,f,this.getTilePixelRatio(o),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return T.key=E,p?(T.interimTile=p,T.refreshInterimChain(),h.replace(d,T)):h.set(d,T),T}return this.getTileInternal(e,t,r,o,l||n)},p.prototype.getTileInternal=function(e,t,i,r,n){var c=null,l=(0,a.getKeyZXY)(e,t,i),s=this.getKey();if(this.tileCache.containsKey(l)){if((c=this.tileCache.get(l)).key!=s){var h=c;c=this.createTile_(e,t,i,r,n,s),h.getState()==o.default.IDLE?c.interimTile=h.interimTile:c.interimTile=h,c.refreshInterimChain(),this.tileCache.replace(l,c)}}else c=this.createTile_(e,t,i,r,n,s),this.tileCache.set(l,c);return c},p.prototype.setRenderReprojectionEdges=function(e){if(c.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},p.prototype.setTileGridForProjection=function(e,t){if(c.ENABLE_RASTER_REPROJECTION){var i=(0,s.get)(e);if(i){var r=(0,u.getUid)(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}},p}(n.default);function j(e,t){e.getImage().src=t}var g=E;exports.default=g;
},{"../events/EventType.js":"lUmy","../ImageTile.js":"tPcm","../reproj/Tile.js":"PSAO","../TileCache.js":"g4cv","../TileState.js":"TPVv","./UrlTile.js":"kKjj","../reproj/common.js":"s12m","./common.js":"RrT9","../proj.js":"bkYg","../tilecoord.js":"GpvC","../tilegrid.js":"zlz6","../util.js":"bmrL"}],"qdcP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonp=t;var e=require("./util.js");function t(t,n,o,i){var c=document.createElement("script"),r="olc_"+(0,e.getUid)(n);function a(){delete window[r],c.parentNode.removeChild(c)}c.async=!0,c.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+r;var d=setTimeout(function(){a(),o&&o()},1e4);window[r]=function(e){clearTimeout(d),a(),n(e)},document.getElementsByTagName("head")[0].appendChild(c)}
},{"./util.js":"bmrL"}],"nPip":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./State.js")),e=l(require("./TileImage.js")),r=require("../extent.js"),i=require("../asserts.js"),o=require("../tileurlfunction.js"),n=require("../tilegrid.js"),s=require("../proj.js"),a=require("../net.js");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),c=function(e){function l(r){var o=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:(0,s.get)("EPSG:3857"),reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:t.default.LOADING,tileLoadFunction:r.tileLoadFunction,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition})||this;if(o.tileJSON_=null,o.tileSize_=r.tileSize,r.url)if(r.jsonp)(0,a.jsonp)(r.url,o.handleTileJSONResponse.bind(o),o.handleTileJSONError.bind(o));else{var n=new XMLHttpRequest;n.addEventListener("load",o.onXHRLoad_.bind(o)),n.addEventListener("error",o.onXHRError_.bind(o)),n.open("GET",r.url),n.send()}else r.tileJSON?o.handleTileJSONResponse(r.tileJSON):(0,i.assert)(!1,51);return o}return u(l,e),l.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},l.prototype.onXHRError_=function(t){this.handleTileJSONError()},l.prototype.getTileJSON=function(){return this.tileJSON_},l.prototype.handleTileJSONResponse=function(e){var i,a=(0,s.get)("EPSG:4326"),l=this.getProjection();if(void 0!==e.bounds){var u=(0,s.getTransformFromProjections)(a,l);i=(0,r.applyTransform)(e.bounds,u)}var c=e.minzoom||0,d=e.maxzoom||22,p=(0,n.createXYZ)({extent:(0,n.extentFromProjection)(l),maxZoom:d,minZoom:c,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=(0,o.createFromTemplates)(e.tiles,p),void 0!==e.attribution&&!this.getAttributions()){var h=void 0!==i?i:a.getExtent();this.setAttributions(function(t){return(0,r.intersects)(h,t.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(t.default.READY)},l.prototype.handleTileJSONError=function(){this.setState(t.default.ERROR)},l}(e.default),d=c;exports.default=d;
},{"./State.js":"r4JV","./TileImage.js":"Hf9V","../extent.js":"pbFF","../asserts.js":"hgi2","../tileurlfunction.js":"WLnk","../tilegrid.js":"zlz6","../proj.js":"bkYg","../net.js":"qdcP"}],"qZgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyStyle=V,exports.applyBackground=C,exports.default=F,exports.apply=H,exports.getLayer=$,exports.getLayers=I,exports.getSource=X,exports._finalizeLayer=W,exports._getFonts=j;var e=w(require("mapbox-to-css-font")),t=x(require("./stylefunction")),r=w(require("webfont-matcher/lib/fonts/google")),o=require("ol/proj"),n=require("ol/tilegrid"),i=w(require("ol/tilegrid/TileGrid")),a=w(require("ol/Map")),u=w(require("ol/View")),s=w(require("ol/format/GeoJSON")),l=w(require("ol/format/MVT")),c=require("ol/Observable"),f=w(require("ol/layer/Tile")),g=w(require("ol/layer/Vector")),p=w(require("ol/layer/VectorTile")),d=w(require("ol/source/TileJSON")),y=w(require("ol/source/Vector")),m=w(require("ol/source/VectorTile")),v=require("@mapbox/mapbox-gl-style-spec"),h=require("./util");function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function w(e){return e&&e.__esModule?e:{default:e}}var S,O={},T=/font-family: ?([^;]*);/,q=/("|')/g;function E(e){if(!S){S={};for(var t=document.styleSheets,r=0,o=t.length;r<o;++r){var n=t[r];try{var i=n.rules||n.cssRules;if(i)for(var a=0,u=i.length;a<u;++a){var s=i[a];if(5==s.type){var l=s.cssText.match(T);S[l[1].replace(q,"")]=!0}}}catch(c){}}}return e in S}var z={},L=r.default.getNames();function j(t){var r=t.toString();if(r in z)return t;for(var o=t.map(function(t){var r=(0,e.default)(t,1).split(" ");return[r.slice(3).join(" ").replace(/"/g,""),r[1]+r[0]]}),n=0,i=o.length;n<i;++n){var a=o[n],u=a[0];if(!E(u)&&-1!==L.indexOf(u)){var s="https://fonts.googleapis.com/css?family="+u.replace(/ /g,"+")+":"+a[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return z[r]=!0,t}var k=/^(.*)(\?.*)$/;function M(e,t){return t&&0===e.indexOf(".")&&(e=t+e),e}function P(e,t,r){var o=(e=M(e,t)).match(k);return o?o[1]+r+(o.length>2?o[2]:""):e+r}function V(e,r,o,n,i){return new Promise(function(a,u){if("object"!=typeof r&&(r=JSON.parse(r)),8!=r.version)return u(new Error("glStyle version 8 required."));if(!(e instanceof g.default||e instanceof p.default))return u(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,c;function f(){c||r.sprite&&!s?c?(e.setStyle(c),a()):u(new Error("Something went wrong trying to apply style.")):(c=(0,t.default)(e,r,o,i,s,l,j),e.getStyle()?a():u(new Error("Nothing to show for source ["+o+"]")))}if(r.sprite){var d=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",y=P(r.sprite,n,d+".json");fetch(y,{credentials:"same-origin"}).then(function(e){return e.ok||""===d?e:(y=P(r.sprite,n,".json"),fetch(y,{credentials:"same-origin"}))}).then(function(e){if(e.ok)return e.json();u(new Error("Problem fetching sprite from "+y+": "+e.statusText))}).then(function(e){if(void 0===e)return u(new Error("No sprites found."));s=e,l=P(r.sprite,n,d+".png"),f()}).catch(function(e){u(new Error("Sprites cannot be loaded: "+y+": "+e.message))})}else f()})}var R={};function N(e,r){var o={type:r.type};function n(){var n=e.getTargetElement();if(n){var i=r.layout||{},a=r.paint||{};o.paint=a,o.id="olms-bg-"+a["background-opacity"]+a["background-color"];var u=e.getView().getZoom();if(void 0!==a["background-color"]){var s=(0,t.getValue)(o,"paint","background-color",u,R);n.style.background=v.Color.parse(s).toString()}void 0!==a["background-opacity"]&&(n.style.opacity=(0,t.getValue)(o,"paint","background-opacity",u,R)),"none"==i.visibility&&(n.style.backgroundColor="",n.style.opacity="")}}e.getTargetElement()&&n(),e.on(["change:resolution","change:target"],n)}function C(e,t){t.layers.some(function(t){if("background"==t.type)return N(e,t),!0})}function G(e,t){var r;return e.some(function(e){if(e.id==t)return r=e.source,!0}),r}function Z(e){var t=e.bounds;if(t){var r=(0,o.fromLonLat)([t[0],t[1]]),n=(0,o.fromLonLat)([t[2],t[3]]);return[r[0],r[1],n[0],n[1]]}}function A(e,t,r){e=(0,h.assign)({},e);var o=new p.default({declutter:!0,visible:!1}),n=JSON.stringify(e),a=O[n];a||(a=O[n]=new d.default({url:e.tiles?void 0:r,tileJSON:e.tiles?e:void 0}));var u=a.on("change",function(){var e=a.getState();if("ready"===e){var t=a.getTileJSON(),n=Array.isArray(t.tiles)?t.tiles:[t.tiles];if(r)for(var s=0,f=n.length;s<f;++s){var g=n[s];0!=g.indexOf("http")&&(n[s]=r.replace(/\/?$/,"/")+g.replace(/^\//,""))}var p=a.getTileGrid(),d=Z(t),y=t.minzoom||0,v=t.maxzoom||22,b=a.get("ol-source");void 0===b&&(b=new m.default({attributions:a.getAttributions(),format:new l.default,tileGrid:new i.default({origin:p.getOrigin(0),extent:d||p.getExtent(),minZoom:y,resolutions:h.defaultResolutions.slice(0,v+1),tileSize:512}),urls:n}),a.set("ol-source",b)),(0,c.unByKey)(u),o.setSource(b)}else"error"===e&&(a.set("ol-source",null),(0,c.unByKey)(u),o.setSource(void 0))});return"ready"===a.getState()&&a.changed(),o}function J(e,t){var r=new f.default,o=new d.default({transition:0,url:e.tiles?void 0:t,tileJSON:e.tiles?e:void 0,crossOrigin:"anonymous"}),a=o.on("change",function(){var t=o.getState();if("ready"===t){(0,c.unByKey)(a);var u=o.getTileJSON(),s=Z(u),l=o.getTileGrid(),f=e.tileSize||u.tileSize||512,g=u.minzoom||0,p=u.maxzoom||22;o.tileGrid=new i.default({origin:l.getOrigin(0),extent:s||l.getExtent(),minZoom:g,resolutions:(0,n.createXYZ)({maxZoom:p,tileSize:f}).getResolutions(),tileSize:f}),r.setSource(o)}else"error"===t&&((0,c.unByKey)(a),r.setSource(void 0))});return o.setTileLoadFunction(function(e,t){if(-1!=t.indexOf("{bbox-epsg-3857}")){var r=o.getTileGrid().getTileCoordExtent(e.getTileCoord());t=t.replace("{bbox-epsg-3857}",r.toString())}e.getImage().src=t}),r}var _=new s.default;function B(e,t){var r,o,n=e.data;return"string"==typeof n?o=M(n,t):r=_.readFeatures(n,{featureProjection:"EPSG:3857"}),new g.default({source:new y.default({attributions:e.attribution,features:r,format:_,url:o}),visible:!1})}function K(e,r,o){var n=o.getZoom(),i=(0,t.getValue)(e,"paint","raster-opacity",n,R);r.setOpacity(i)}function D(e,t,r,n,i,a){void 0===a&&(a="");var s=[],l=t.getView();l.isDef()||l.getRotation()||l.getResolutions()||(l=new u.default({maxResolution:h.defaultResolutions[0]}),t.setView(l)),"center"in e&&!l.getCenter()&&l.setCenter((0,o.fromLonLat)(e.center)),"zoom"in e&&void 0===l.getZoom()&&l.setResolution(h.defaultResolutions[0]/Math.pow(2,e.zoom)),l.getCenter()&&void 0!==l.getZoom()||l.fit(l.getProjection().getExtent(),{nearest:!0,size:t.getSize()}),e.sprite&&(0==e.sprite.indexOf("mapbox://")?e.sprite=r+"/sprite"+a:0!=e.sprite.indexOf("http")&&(e.sprite=(n?n+i:"")+e.sprite+a));for(var c,f,g,p,d,y,m=e.layers,v=[],b=function(r,o){var u=(c=m[r]).type;if("heatmap"==u||"hillshade"==u);else if("background"==u)N(t,c);else{if((p=c.source||G(m,c.ref))!=g){if(v.length&&(s.push(W(d,v,e,i,t)),v=[]),f=e.sources[p],y=f.url)if(0==(y=M(y,i)).indexOf("mapbox://")){var h=y.replace("mapbox://","");f.tiles=["a","b","c","d"].map(function(e){return"https://"+e+".tiles.mapbox.com/v4/"+h+"/{z}/{x}/{y}."+("vector"==f.type?"vector.pbf":"png")+a})}else 0===y.indexOf("/")&&0===n.indexOf("http")&&(y=n+y);f.tiles&&(f.tiles=f.tiles.map(function(e){return M(e,i)})),"vector"==f.type?d=A(f,a,y):"raster"==f.type?((d=J(f,y)).setVisible(!c.layout||"none"!==c.layout.visibility),l.on("change:resolution",K.bind(x,c,d,l)),K(c,d,l)):"geojson"==f.type&&(d=B(f,i)),g=p,d&&d.set("mapbox-source",g)}v.push(c.id)}},x=this,w=0,S=m.length;w<S;++w)b(w);return s.push(W(d,v,e,i,t)),t.set("mapbox-style",e),Promise.all(s)}function F(e,t){var r,o,n,i,u;if(r=o=n=i="",("string"==typeof e||e instanceof HTMLElement)&&(e=new a.default({target:e})),"string"==typeof t){var s=t.match(k);s&&(o=s[1],r=s.length>2?s[2]:""),u=new Promise(function(a,u){fetch(t,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(s){var l=document.createElement("A");l.href=t;var c=l.href;i=l.pathname.split("/").slice(0,-1).join("/")+"/",n=c.substr(0,c.indexOf(i)),D(s,e,o,n,i,r).then(function(){a(e)}).catch(u)}).catch(function(e){u(new Error("Could not load "+t+": "+e.message))})})}else u=new Promise(function(r,o){D(t,e).then(function(){r(e)}).catch(o)});return u}function H(e,t){return("string"==typeof e||e instanceof HTMLElement)&&(e=new a.default({target:e})),setTimeout(function(){F(e,t)},0),e}function W(e,t,r,o,n){for(var i=24,a=0,u=r.layers,s=0,l=u.length;s<l;++s){var c=u[s];-1!==t.indexOf(c.id)&&(i=Math.min("minzoom"in c?c.minzoom:0,i),a=Math.max("maxzoom"in c?c.maxzoom:24,a))}return new Promise(function(u,s){var l=function(){var n=e.getSource();if(n&&"error"!==n.getState()){if("function"==typeof n.getTileGrid){var l=n.getTileGrid();if(l){var c=l.getMinZoom();(i>0||c>0)&&e.setMaxResolution(Math.min(h.defaultResolutions[i],l.getResolution(c))+1e-9),a<24&&e.setMinResolution(h.defaultResolutions[a]+1e-9)}}n instanceof y.default||n instanceof m.default?V(e,r,t,o).then(function(){e.setVisible(!0),u()},function(e){s(e)}):u()}else s(new Error("Error accessing data for source "+e.get("mapbox-source")))};e.set("mapbox-layers",t),-1===n.getLayers().getArray().indexOf(e)&&n.addLayer(e),e.getSource()?l():e.once("change:source",l)})}function $(e,t){for(var r=e.getLayers().getArray(),o=0,n=r.length;o<n;++o){var i=r[o].get("mapbox-layers");if(i&&-1!==i.indexOf(t))return r[o]}}function I(e,t){for(var r=[],o=e.getLayers().getArray(),n=0,i=o.length;n<i;++n)o[n].get("mapbox-source")===t&&r.push(o[n]);return r}function X(e,t){for(var r=e.getLayers().getArray(),o=0,n=r.length;o<n;++o){var i=r[o].getSource();if(r[o].get("mapbox-source")===t)return i}}
},{"mapbox-to-css-font":"z0v0","./stylefunction":"qAIu","webfont-matcher/lib/fonts/google":"J3C1","ol/proj":"bkYg","ol/tilegrid":"zlz6","ol/tilegrid/TileGrid":"hVkI","ol/Map":"Xu49","ol/View":"OW7R","ol/format/GeoJSON":"Xkfr","ol/format/MVT":"o3S5","ol/Observable":"YGGN","ol/layer/Tile":"tAJs","ol/layer/Vector":"BGzd","ol/layer/VectorTile":"o5wK","ol/source/TileJSON":"nPip","ol/source/Vector":"s9D1","ol/source/VectorTile":"LtzO","@mapbox/mapbox-gl-style-spec":"tVGL","./util":"DrMt"}],"AMKV":[function(require,module,exports) {
"use strict";function e(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"owNJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SPI=exports.TWO_PI=exports.FORTPI=exports.R2D=exports.D2R=exports.EPSLN=exports.RA6=exports.RA4=exports.SIXTH=exports.HALF_PI=exports.SEC_TO_RAD=exports.SRS_WGS84_ESQUARED=exports.SRS_WGS84_SEMIMINOR=exports.SRS_WGS84_SEMIMAJOR=exports.PJD_NODATUM=exports.PJD_WGS84=exports.PJD_GRIDSHIFT=exports.PJD_7PARAM=exports.PJD_3PARAM=void 0;var r=1;exports.PJD_3PARAM=r;var e=2;exports.PJD_7PARAM=e;var t=3;exports.PJD_GRIDSHIFT=t;var o=4;exports.PJD_WGS84=o;var s=5;exports.PJD_NODATUM=s;var p=6378137;exports.SRS_WGS84_SEMIMAJOR=p;var x=6356752.314;exports.SRS_WGS84_SEMIMINOR=x;var S=.0066943799901413165;exports.SRS_WGS84_ESQUARED=S;var _=484813681109536e-20;exports.SEC_TO_RAD=_;var R=Math.PI/2;exports.HALF_PI=R;var P=.16666666666666666;exports.SIXTH=P;var a=.04722222222222222;exports.RA4=a;var I=.022156084656084655;exports.RA6=I;var A=1e-10;exports.EPSLN=A;var D=.017453292519943295;exports.D2R=D;var v=57.29577951308232;exports.R2D=v;var M=Math.PI/4;exports.FORTPI=M;var O=2*Math.PI;exports.TWO_PI=O;var E=3.14159265359;exports.SPI=E;
},{}],"alHR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};exports.default=e,e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667;
},{}],"pNQU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};exports.default=e;
},{}],"iuWq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=/[\s_\-\/\(\)]/g;function r(r,t){if(r[t])return r[t];for(var o,s=Object.keys(r),a=t.toLowerCase().replace(e,""),u=-1;++u<s.length;)if((o=s[u]).toLowerCase().replace(e,"")===a)return r[o]}
},{}],"x7zj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("./constants/values"),n=a(require("./constants/PrimeMeridian")),o=a(require("./constants/units")),e=a(require("./match"));function a(t){return t&&t.__esModule?t:{default:t}}function u(a){var u,r,i,f={},s=a.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var o=n.split("=");return o.push(!0),t[o[0].toLowerCase()]=o[1],t},{}),c={proj:"projName",datum:"datumCode",rf:function(t){f.rf=parseFloat(t)},lat_0:function(n){f.lat0=n*t.D2R},lat_1:function(n){f.lat1=n*t.D2R},lat_2:function(n){f.lat2=n*t.D2R},lat_ts:function(n){f.lat_ts=n*t.D2R},lon_0:function(n){f.long0=n*t.D2R},lon_1:function(n){f.long1=n*t.D2R},lon_2:function(n){f.long2=n*t.D2R},alpha:function(n){f.alpha=parseFloat(n)*t.D2R},gamma:function(t){f.rectified_grid_angle=parseFloat(t)},lonc:function(n){f.longc=n*t.D2R},x_0:function(t){f.x0=parseFloat(t)},y_0:function(t){f.y0=parseFloat(t)},k_0:function(t){f.k0=parseFloat(t)},k:function(t){f.k0=parseFloat(t)},a:function(t){f.a=parseFloat(t)},b:function(t){f.b=parseFloat(t)},r_a:function(){f.R_A=!0},zone:function(t){f.zone=parseInt(t,10)},south:function(){f.utmSouth=!0},towgs84:function(t){f.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){f.to_meter=parseFloat(t)},units:function(t){f.units=t;var n=(0,e.default)(o.default,t);n&&(f.to_meter=n.to_meter)},from_greenwich:function(n){f.from_greenwich=n*t.D2R},pm:function(o){var a=(0,e.default)(n.default,o);f.from_greenwich=(a||parseFloat(o))*t.D2R},nadgrids:function(t){"@null"===t?f.datumCode="none":f.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(f.axis=t)},approx:function(){f.approx=!0}};for(u in s)r=s[u],u in c?"function"==typeof(i=c[u])?i(r):f[i]=r:f[u]=r;return"string"==typeof f.datumCode&&"WGS84"!==f.datumCode&&(f.datumCode=f.datumCode.toLowerCase()),f}
},{"./constants/values":"owNJ","./constants/PrimeMeridian":"alHR","./constants/units":"pNQU","./match":"iuWq"}],"CVGF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p;exports.default=t;var e=1,r=2,i=3,s=4,h=5,o=-1,n=/\s/,a=/[A-Za-z]/,u=/[A-Za-z84]/,d=/[,\]]/,c=/[\d\.E\-\+]/;function l(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=e}function p(t){return new l(t).output()}l.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==s)for(;n.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case e:return this.neutral(t);case r:return this.keyword(t);case s:return this.quoted(t);case h:return this.afterquote(t);case i:return this.number(t);case o:return}},l.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=s);if(d.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},l.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=e)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=e,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=o))):void 0},l.prototype.number=function(t){if(!c.test(t)){if(d.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},l.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=h},l.prototype.keyword=function(t){if(u.test(t))this.word+=t;else{if("["===t){var r=[];return r.push(this.word),this.level++,null===this.root?this.root=r:this.currentObject.push(r),this.stack.push(this.currentObject),this.currentObject=r,void(this.state=e)}if(!d.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},l.prototype.neutral=function(t){if(a.test(t))return this.word=t,void(this.state=r);if('"'===t)return this.word="",void(this.state=s);if(c.test(t))return this.word=t,void(this.state=i);if(!d.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},l.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===o)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};
},{}],"GiKs":[function(require,module,exports) {
"use strict";function e(e,a,s){Array.isArray(a)&&(s.unshift(a),a=null);var c=a?{}:e,t=s.reduce(function(e,a){return r(a,e),e},c);a&&(e[a]=t)}function r(a,s){if(Array.isArray(a)){var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(s[c]={},void r(a[0],s[c])):void(s[c]=a[0]);if(a.length)if("TOWGS84"!==c){if("AXIS"===c)return c in s||(s[c]=[]),void s[c].push(a);var t;switch(Array.isArray(c)||(s[c]={}),c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return s[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&r(a[2],s[c]));case"SPHEROID":case"ELLIPSOID":return s[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&r(a[3],s[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void e(s,c,a);default:for(t=-1;++t<a.length;)if(!Array.isArray(a[t]))return r(a,s[c]);return e(s,c,a)}}else s[c]=a;else s[c]=!0}else s[a]=!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sExpr=r;
},{}],"Ez4m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=a(require("./parser")),t=require("./process");function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=.017453292519943295;function n(e,t){var a=t[0],o=t[1];!(a in e)&&o in e&&(e[a]=e[o],3===t.length&&(e[a]=t[2](e[a])))}function l(e){return e*r}function i(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===o(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",a=0,r=e.AXIS.length;a<r;++a){var i=[e.AXIS[a][0].toLowerCase(),e.AXIS[a][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?t+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?t+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?t+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var d=e.GEOGCS;function _(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(d=e),d&&(d.DATUM?e.datumCode=d.DATUM.name.toLowerCase():e.datumCode=d.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(e.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=d.DATUM.SPHEROID.a,e.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(e.datum_params=d.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",l],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",l],["x0","false_easting",_],["y0","false_northing",_],["long0","central_meridian",l],["lat0","latitude_of_origin",l],["lat0","standard_parallel_1",l],["lat1","standard_parallel_1",l],["lat2","standard_parallel_2",l],["azimuth","Azimuth"],["alpha","azimuth",l],["srsCode","name"]].forEach(function(t){return n(e,t)}),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=l(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function d(a){var o=(0,e.default)(a),r=o.shift(),n=o.shift();o.unshift(["name",n]),o.unshift(["type",r]);var l={};return(0,t.sExpr)(o,l),i(l),l}
},{"./parser":"CVGF","./process":"GiKs"}],"HaD1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./global")),r=i(require("./projString")),t=i(require("wkt-parser"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e){var i=this;if(2===arguments.length){var a=arguments[1];"string"==typeof a?"+"===a.charAt(0)?n[e]=(0,r.default)(arguments[1]):n[e]=(0,t.default)(arguments[1]):n[e]=a}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?n.apply(i,e):n(e)});if("string"==typeof e){if(e in n)return n[e]}else"EPSG"in e?n["EPSG:"+e.EPSG]=e:"ESRI"in e?n["ESRI:"+e.ESRI]=e:"IAU2000"in e?n["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(0,e.default)(n);var a=n;exports.default=a;
},{"./global":"AMKV","./projString":"x7zj","wkt-parser":"Ez4m"}],"zw2C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./defs")),r=n(require("wkt-parser")),t=n(require("./projString")),u=n(require("./match"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return"string"==typeof e}function i(r){return r in e.default}var a=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function o(e){return a.some(function(r){return e.indexOf(r)>-1})}var d=["3857","900913","3785","102113"];function l(e){var r=(0,u.default)(e,"authority");if(r){var t=(0,u.default)(r,"epsg");return t&&d.indexOf(t)>-1}}function C(e){var r=(0,u.default)(e,"extension");if(r)return(0,u.default)(r,"proj4")}function E(e){return"+"===e[0]}function s(u){if(!f(u))return u;if(i(u))return e.default[u];if(o(u)){var n=(0,r.default)(u);if(l(n))return e.default["EPSG:3857"];var a=C(n);return a?(0,t.default)(a):n}return E(u)?(0,t.default)(u):void 0}var c=s;exports.default=c;
},{"./defs":"HaD1","wkt-parser":"Ez4m","./projString":"x7zj","./match":"iuWq"}],"tq6W":[function(require,module,exports) {
"use strict";function e(e,r){var t,o;if(e=e||{},!r)return e;for(o in r)void 0!==(t=r[o])&&(e[o]=t);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"THMV":[function(require,module,exports) {
"use strict";function e(e,t,r){var s=e*t;return r/Math.sqrt(1-s*s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"oXXR":[function(require,module,exports) {
"use strict";function e(e){return e<0?-1:1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"T5hz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../constants/values"),t=r(require("./sign"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return Math.abs(r)<=e.SPI?r:r-(0,t.default)(r)*e.TWO_PI}
},{"../constants/values":"owNJ","./sign":"oXXR"}],"jEit":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../constants/values");function t(t,r,a){var s=t*a,u=.5*t;return s=Math.pow((1-s)/(1+s),u),Math.tan(.5*(e.HALF_PI-r))/s}
},{"../constants/values":"owNJ"}],"eDXW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../constants/values");function e(e,a){for(var r,n,s=.5*e,u=t.HALF_PI-2*Math.atan(a),o=0;o<=15;o++)if(r=e*Math.sin(u),u+=n=t.HALF_PI-2*Math.atan(a*Math.pow((1-r)/(1+r),s))-u,Math.abs(n)<=1e-10)return u;return-9999}
},{"../constants/values":"owNJ"}],"KhKW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=n,exports.inverse=o,exports.default=exports.names=void 0;var t=a(require("../common/msfnz")),s=a(require("../common/adjust_lon")),i=a(require("../common/tsfnz")),e=a(require("../common/phi2z")),h=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}function r(){var s=this.b/this.a;this.es=1-s*s,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,t.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function n(t){var e,a,r=t.x,n=t.y;if(n*h.R2D>90&&n*h.R2D<-90&&r*h.R2D>180&&r*h.R2D<-180)return null;if(Math.abs(Math.abs(n)-h.HALF_PI)<=h.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,s.default)(r-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(h.FORTPI+.5*n));else{var o=Math.sin(n),u=(0,i.default)(this.e,n,o);e=this.x0+this.a*this.k0*(0,s.default)(r-this.long0),a=this.y0-this.a*this.k0*Math.log(u)}return t.x=e,t.y=a,t}function o(t){var i,a,r=t.x-this.x0,n=t.y-this.y0;if(this.sphere)a=h.HALF_PI-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var o=Math.exp(-n/(this.a*this.k0));if(-9999===(a=(0,e.default)(this.e,o)))return null}return i=(0,s.default)(this.long0+r/(this.a*this.k0)),t.x=i,t.y=a,t}var u=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];exports.names=u;var l={init:r,forward:n,inverse:o,names:u};exports.default=l;
},{"../common/msfnz":"THMV","../common/adjust_lon":"T5hz","../common/tsfnz":"jEit","../common/phi2z":"eDXW","../constants/values":"owNJ"}],"hXsX":[function(require,module,exports) {
"use strict";function e(){}function t(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.inverse=exports.forward=t,exports.default=exports.names=void 0;var r=["longlat","identity"];exports.names=r;var o={init:e,forward:t,inverse:t,names:r};exports.default=o;
},{}],"U0bJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=s,exports.get=u,exports.start=i,exports.default=void 0;var e=r(require("./projections/merc")),t=r(require("./projections/longlat"));function r(e){return e&&e.__esModule?e:{default:e}}var o=[e.default,t.default],a={},n=[];function s(e,t){var r=n.length;return e.names?(n[r]=e,e.names.forEach(function(e){a[e.toLowerCase()]=r}),this):(console.log(t),!0)}function u(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==a[t]&&n[a[t]]?n[a[t]]:void 0}function i(){o.forEach(s)}var d={start:i,add:s,get:u};exports.default=d;
},{"./projections/merc":"KhKW","./projections/longlat":"hXsX"}],"XbvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WGS84=exports.default=void 0;var e={};exports.default=e,e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var a=e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports.WGS84=a,e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};
},{}],"tb5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eccentricity=a,exports.sphere=f;var e=require("./constants/values"),t=o(require("./constants/Ellipsoid")),r=n(require("./match"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(t,r,n,u){var o=t*t,a=r*r,f=(o-a)/o,i=0;return u?(o=(t*=1-f*(e.SIXTH+f*(e.RA4+f*e.RA6)))*t,f=0):i=Math.sqrt(f),{es:f,e:i,ep2:(o-a)/a}}function f(n,u,o,a,f){if(!n){var i=(0,r.default)(t.default,a);i||(i=t.WGS84),n=i.a,u=i.b,o=i.rf}return o&&!u&&(u=(1-1/o)*n),(0===o||Math.abs(n-u)<e.EPSLN)&&(f=!0,u=n),{a:n,b:u,rf:o,sphere:f}}
},{"./constants/values":"owNJ","./constants/Ellipsoid":"XbvN","./match":"iuWq"}],"KHsO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};exports.default=e,e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},e.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};
},{}],"VoCB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=require("./constants/values");function t(t,m,_,r,e,u,s){var d={};return d.datum_type=void 0===t||"none"===t?a.PJD_NODATUM:a.PJD_WGS84,m&&(d.datum_params=m.map(parseFloat),0===d.datum_params[0]&&0===d.datum_params[1]&&0===d.datum_params[2]||(d.datum_type=a.PJD_3PARAM),d.datum_params.length>3&&(0===d.datum_params[3]&&0===d.datum_params[4]&&0===d.datum_params[5]&&0===d.datum_params[6]||(d.datum_type=a.PJD_7PARAM,d.datum_params[3]*=a.SEC_TO_RAD,d.datum_params[4]*=a.SEC_TO_RAD,d.datum_params[5]*=a.SEC_TO_RAD,d.datum_params[6]=d.datum_params[6]/1e6+1))),s&&(d.datum_type=a.PJD_GRIDSHIFT,d.grids=s),d.a=_,d.b=r,d.es=e,d.ep2=u,d}var m=t;exports.default=m;
},{"./constants/values":"owNJ"}],"QTcc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.getNadgrids=n;var t={};function e(e,n){var r=new DataView(n),i=u(r),l=o(r,i);l.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var d={header:l,subgrids:a(r,l,i)};return t[e]=d,d}function n(t){return void 0===t?null:t.split(",").map(r)}function r(e){if(0===e.length)return null;var n="@"===e[0];return n&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:e,mandatory:!n,grid:t[e]||null,isNull:!1}}function i(t){return t/3600*Math.PI/180}function u(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function o(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:l(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function l(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function a(t,e,n){for(var r=[],u=0;u<e.nSubgrids;u++){var o=g(t,176,n),l=s(t,176,o,n),a=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[i(o.lowerLongitude),i(o.lowerLatitude)],del:[i(o.longitudeInterval),i(o.latitudeInterval)],lim:[a,c],count:o.gridNodeCount,cvs:d(l)})}return r}function d(t){return t.map(function(t){return[i(t.longitudeShift),i(t.latitudeShift)]})}function g(t,e,n){return{name:l(t,e+8,e+16).trim(),parent:l(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function s(t,e,n,r){for(var i=e+176,u=[],o=0;o<n.gridNodeCount;o++){var l={latitudeShift:t.getFloat32(i+16*o,r),longitudeShift:t.getFloat32(i+16*o+4,r),latitudeAccuracy:t.getFloat32(i+16*o+8,r),longitudeAccuracy:t.getFloat32(i+16*o+12,r)};u.push(l)}return u}
},{}],"udcm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./parseCode")),t=o(require("./extend")),a=o(require("./projections")),r=require("./deriveConstants"),s=o(require("./constants/Datum")),i=o(require("./datum")),u=o(require("./match")),d=require("./nadgrid");function o(e){return e&&e.__esModule?e:{default:e}}function l(a,o){if(!(this instanceof l))return new l(a);o=o||function(e){if(e)throw e};var n=(0,e.default)(a);if("object"==typeof n){var p=l.projections.get(n.projName);if(p){if(n.datumCode&&"none"!==n.datumCode){var f=(0,u.default)(s.default,n.datumCode);f&&(n.datum_params=n.datum_params||(f.towgs84?f.towgs84.split(","):null),n.ellps=f.ellipse,n.datumName=f.datumName?f.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var m=(0,r.sphere)(n.a,n.b,n.rf,n.ellps,n.sphere),h=(0,r.eccentricity)(m.a,m.b,m.rf,n.R_A),c=(0,d.getNadgrids)(n.nadgrids),v=n.datum||(0,i.default)(n.datumCode,n.datum_params,m.a,m.b,h.es,h.ep2,c);(0,t.default)(this,n),(0,t.default)(this,p),this.a=m.a,this.b=m.b,this.rf=m.rf,this.sphere=m.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=v,this.init(),o(null,this)}else o(a)}else o(a)}l.projections=a.default,l.projections.start();var n=l;exports.default=n;
},{"./parseCode":"zw2C","./extend":"tq6W","./projections":"U0bJ","./deriveConstants":"tb5X","./constants/Datum":"KHsO","./datum":"VoCB","./match":"iuWq","./nadgrid":"QTcc"}],"zPFS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareDatums=t,exports.geodeticToGeocentric=r,exports.geocentricToGeodetic=e,exports.geocentricToWgs84=s,exports.geocentricFromWgs84=m;var a=require("./constants/values");function t(t,r){return t.datum_type===r.datum_type&&(!(t.a!==r.a||Math.abs(t.es-r.es)>5e-11)&&(t.datum_type===a.PJD_3PARAM?t.datum_params[0]===r.datum_params[0]&&t.datum_params[1]===r.datum_params[1]&&t.datum_params[2]===r.datum_params[2]:t.datum_type!==a.PJD_7PARAM||t.datum_params[0]===r.datum_params[0]&&t.datum_params[1]===r.datum_params[1]&&t.datum_params[2]===r.datum_params[2]&&t.datum_params[3]===r.datum_params[3]&&t.datum_params[4]===r.datum_params[4]&&t.datum_params[5]===r.datum_params[5]&&t.datum_params[6]===r.datum_params[6]))}function r(t,r,e){var s,m,u,_,p=t.x,n=t.y,d=t.z?t.z:0;if(n<-a.HALF_PI&&n>-1.001*a.HALF_PI)n=-a.HALF_PI;else if(n>a.HALF_PI&&n<1.001*a.HALF_PI)n=a.HALF_PI;else{if(n<-a.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};if(n>a.HALF_PI)return{x:1/0,y:1/0,z:t.z}}return p>Math.PI&&(p-=2*Math.PI),m=Math.sin(n),_=Math.cos(n),u=m*m,{x:((s=e/Math.sqrt(1-r*u))+d)*_*Math.cos(p),y:(s+d)*_*Math.sin(p),z:(s*(1-r)+d)*m}}function e(t,r,e,s){var m,u,_,p,n,d,o,i,x,P,y,M,z,c,A,h=t.x,f=t.y,I=t.z?t.z:0;if(m=Math.sqrt(h*h+f*f),u=Math.sqrt(h*h+f*f+I*I),m/e<1e-12){if(c=0,u/e<1e-12)return a.HALF_PI,A=-s,{x:t.x,y:t.y,z:t.z}}else c=Math.atan2(f,h);_=I/u,i=(p=m/u)*(1-r)*(n=1/Math.sqrt(1-r*(2-r)*p*p)),x=_*n,z=0;do{z++,d=r*(o=e/Math.sqrt(1-r*x*x))/(o+(A=m*i+I*x-o*(1-r*x*x))),M=(y=_*(n=1/Math.sqrt(1-d*(2-d)*p*p)))*i-(P=p*(1-d)*n)*x,i=P,x=y}while(M*M>1e-24&&z<30);return{x:c,y:Math.atan(y/Math.abs(P)),z:A}}function s(t,r,e){if(r===a.PJD_3PARAM)return{x:t.x+e[0],y:t.y+e[1],z:t.z+e[2]};if(r===a.PJD_7PARAM){var s=e[0],m=e[1],u=e[2],_=e[3],p=e[4],n=e[5],d=e[6];return{x:d*(t.x-n*t.y+p*t.z)+s,y:d*(n*t.x+t.y-_*t.z)+m,z:d*(-p*t.x+_*t.y+t.z)+u}}}function m(t,r,e){if(r===a.PJD_3PARAM)return{x:t.x-e[0],y:t.y-e[1],z:t.z-e[2]};if(r===a.PJD_7PARAM){var s=e[0],m=e[1],u=e[2],_=e[3],p=e[4],n=e[5],d=e[6],o=(t.x-s)/d,i=(t.y-m)/d,x=(t.z-u)/d;return{x:o+n*i-p*x,y:-n*o+i+_*x,z:p*o-_*i+x}}}
},{"./constants/values":"owNJ"}],"qCLi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l,exports.applyGridShift=n;var e=require("./constants/values"),r=require("./datumUtils"),t=a(require("./common/adjust_lon"));function a(e){return e&&e.__esModule?e:{default:e}}function i(r){return r===e.PJD_3PARAM||r===e.PJD_7PARAM}function l(t,a,l){if((0,r.compareDatums)(t,a))return l;if(t.datum_type===e.PJD_NODATUM||a.datum_type===e.PJD_NODATUM)return l;var u=t.a,o=t.es;if(t.datum_type===e.PJD_GRIDSHIFT){if(0!==n(t,!1,l))return;u=e.SRS_WGS84_SEMIMAJOR,o=e.SRS_WGS84_ESQUARED}var s=a.a,d=a.b,y=a.es;if(a.datum_type===e.PJD_GRIDSHIFT&&(s=e.SRS_WGS84_SEMIMAJOR,d=e.SRS_WGS84_SEMIMINOR,y=e.SRS_WGS84_ESQUARED),o===y&&u===s&&!i(t.datum_type)&&!i(a.datum_type))return l;if((l=(0,r.geodeticToGeocentric)(l,o,u),i(t.datum_type)&&(l=(0,r.geocentricToWgs84)(l,t.datum_type,t.datum_params)),i(a.datum_type)&&(l=(0,r.geocentricFromWgs84)(l,a.datum_type,a.datum_params)),l=(0,r.geocentricToGeodetic)(l,y,s,d),a.datum_type===e.PJD_GRIDSHIFT)&&0!==n(a,!0,l))return;return l}function n(r,t,a){if(null===r.grids||0===r.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-a.x,y:a.y},l={x:Number.NaN,y:Number.NaN},n=[],o=0;o<r.grids.length;o++){var s=r.grids[o];if(n.push(s.name),s.isNull){l=i;break}if(s.mandatory,null!==s.grid){var d=s.grid.subgrids[0],y=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,x=d.ll[0]-y,f=d.ll[1]-y,m=d.ll[0]+(d.lim[0]-1)*d.del[0]+y,c=d.ll[1]+(d.lim[1]-1)*d.del[1]+y;if(!(f>i.y||x>i.x||c<i.y||m<i.x||(l=u(i,t,d),isNaN(l.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(l.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*e.R2D+" "+i.y*e.R2D+" tried: '"+n+"'"),-1):(a.x=-l.x,a.y=l.y,0)}function u(e,r,a){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var l={x:e.x,y:e.y};l.x-=a.ll[0],l.y-=a.ll[1],l.x=(0,t.default)(l.x-Math.PI)+Math.PI;var n=o(l,a);if(r){if(isNaN(n.x))return i;n.x=l.x-n.x,n.y=l.y-n.y;var u,s,d=9;do{if(s=o(n,a),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:l.x-(s.x+n.x),y:l.y-(s.y+n.y)},n.x+=u.x,n.y+=u.y}while(d--&&Math.abs(u.x)>1e-12&&Math.abs(u.y)>1e-12);if(d<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=(0,t.default)(n.x+a.ll[0]),i.y=n.y+a.ll[1]}else isNaN(n.x)||(i.x=e.x+n.x,i.y=e.y+n.y);return i}function o(e,r){var t,a={x:e.x/r.del[0],y:e.y/r.del[1]},i=Math.floor(a.x),l=Math.floor(a.y),n=a.x-1*i,u=a.y-1*l,o={x:Number.NaN,y:Number.NaN};if(i<0||i>=r.lim[0])return o;if(l<0||l>=r.lim[1])return o;t=l*r.lim[0]+i;var s=r.cvs[t][0],d=r.cvs[t][1];t++;var y=r.cvs[t][0],x=r.cvs[t][1];t+=r.lim[0];var f=r.cvs[t][0],m=r.cvs[t][1];t--;var c=r.cvs[t][0],_=r.cvs[t][1],N=n*u,g=n*(1-u),v=(1-n)*(1-u),p=(1-n)*u;return o.x=v*s+g*y+p*c+N*f,o.y=v*d+g*x+p*_+N*m,o}
},{"./constants/values":"owNJ","./datumUtils":"zPFS","./common/adjust_lon":"T5hz"}],"w73W":[function(require,module,exports) {
"use strict";function e(e,a,r){var s,i,t,c=r.x,d=r.y,n=r.z||0,u={};for(t=0;t<3;t++)if(!a||2!==t||void 0!==r.z)switch(0===t?(s=c,i=-1!=="ew".indexOf(e.axis[t])?"x":"y"):1===t?(s=d,i=-1!=="ns".indexOf(e.axis[t])?"y":"x"):(s=n,i="z"),e.axis[t]){case"e":u[i]=s;break;case"w":u[i]=-s;break;case"n":u[i]=s;break;case"s":u[i]=-s;break;case"u":void 0!==r[i]&&(u.z=s);break;case"d":void 0!==r[i]&&(u.z=-s);break;default:return null}return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ulMQ":[function(require,module,exports) {
"use strict";function e(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"NRY1":[function(require,module,exports) {
"use strict";function e(e){t(e.x),t(e.y)}function t(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ngyS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("./constants/values"),t=d(require("./datum_transform")),r=d(require("./adjust_axis")),u=d(require("./Proj")),a=d(require("./common/toPoint")),o=d(require("./checkSanity"));function d(e){return e&&e.__esModule?e:{default:e}}function m(t,r){return(t.datum.datum_type===e.PJD_3PARAM||t.datum.datum_type===e.PJD_7PARAM)&&"WGS84"!==r.datumCode||(r.datum.datum_type===e.PJD_3PARAM||r.datum.datum_type===e.PJD_7PARAM)&&"WGS84"!==t.datumCode}function n(d,i,_){var f;if(Array.isArray(_)&&(_=(0,a.default)(_)),(0,o.default)(_),d.datum&&i.datum&&m(d,i)&&(_=n(d,f=new u.default("WGS84"),_),d=f),"enu"!==d.axis&&(_=(0,r.default)(d,!1,_)),"longlat"===d.projName)_={x:_.x*e.D2R,y:_.y*e.D2R,z:_.z||0};else if(d.to_meter&&(_={x:_.x*d.to_meter,y:_.y*d.to_meter,z:_.z||0}),!(_=d.inverse(_)))return;if(d.from_greenwich&&(_.x+=d.from_greenwich),_=(0,t.default)(d.datum,i.datum,_))return i.from_greenwich&&(_={x:_.x-i.from_greenwich,y:_.y,z:_.z||0}),"longlat"===i.projName?_={x:_.x*e.R2D,y:_.y*e.R2D,z:_.z||0}:(_=i.forward(_),i.to_meter&&(_={x:_.x/i.to_meter,y:_.y/i.to_meter,z:_.z||0})),"enu"!==i.axis?(0,r.default)(i,!0,_):_}
},{"./constants/values":"owNJ","./datum_transform":"qCLi","./adjust_axis":"w73W","./Proj":"udcm","./common/toPoint":"ulMQ","./checkSanity":"NRY1"}],"NaC1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Proj")),r=n(require("./transform"));function n(e){return e&&e.__esModule?e:{default:e}}var t=(0,e.default)("WGS84");function o(e,n,t){var o,a,u;return Array.isArray(t)?(o=(0,r.default)(e,n,t)||{x:NaN,y:NaN},t.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(t.splice(3)):[o.x,o.y,t[2]].concat(t.splice(3)):[o.x,o.y].concat(t.splice(2)):[o.x,o.y]):(a=(0,r.default)(e,n,t),2===(u=Object.keys(t)).length?a:(u.forEach(function(r){if(void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=t[r]}),a))}function a(r){return r instanceof e.default?r:r.oProj?r.oProj:(0,e.default)(r)}function u(e,r,n){e=a(e);var u,i=!1;return void 0===r?(r=e,e=t,i=!0):(void 0!==r.x||Array.isArray(r))&&(n=r,r=e,e=t,i=!0),r=a(r),n?o(e,r,n):(u={forward:function(n){return o(e,r,n)},inverse:function(n){return o(r,e,n)}},i&&(u.oProj=r),u)}var i=u;exports.default=i;
},{"./Proj":"udcm","./transform":"ngyS"}],"Of98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forward=c,exports.inverse=u,exports.toPoint=f,exports.default=void 0;var t=6,e="AJSAJS",r="AFAFAF",a=65,n=73,o=79,i=86,s=90,h={forward:c,inverse:u,toPoint:f};function c(t,e){return e=e||5,d(b({lat:t[1],lon:t[0]}),e)}function u(t){var e=v(A(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function f(t){var e=v(A(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function l(t){return t*(Math.PI/180)}function M(t){return t/Math.PI*180}function b(t){var e,r,a,n,o,i,s=t.lat,h=t.lon,c=6378137,u=l(s),f=l(h);i=Math.floor((h+180)/6)+1,180===h&&(i=60),s>=56&&s<64&&h>=3&&h<12&&(i=32),s>=72&&s<84&&(h>=0&&h<9?i=31:h>=9&&h<21?i=33:h>=21&&h<33?i=35:h>=33&&h<42&&(i=37)),o=l(6*(i-1)-180+3),e=c/Math.sqrt(1-.00669438*Math.sin(u)*Math.sin(u)),r=Math.tan(u)*Math.tan(u),a=.006739496752268451*Math.cos(u)*Math.cos(u);var M=.9996*e*((n=Math.cos(u)*(f-o))+(1-r+a)*n*n*n/6+(5-18*r+r*r+72*a-.39089081163157013)*n*n*n*n*n/120)+5e5,b=.9996*(c*(.9983242984503243*u-.002514607064228144*Math.sin(2*u)+2639046602129982e-21*Math.sin(4*u)-3.418046101696858e-9*Math.sin(6*u))+e*Math.tan(u)*(n*n/2+(5-r+9*a+4*a*a)*n*n*n*n/24+(61-58*r+r*r+600*a-2.2240339282485886)*n*n*n*n*n*n/720));return s<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(M),zoneNumber:i,zoneLetter:g(s)}}function v(t){var e=t.northing,r=t.easting,a=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var o,i,s,h,c,u,f,l,b=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,k=e;a<"N"&&(k-=1e7),u=6*(n-1)-180+3,l=(f=k/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*f)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*f)+151*g*g*g/96*Math.sin(6*f),o=b/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),i=Math.tan(l)*Math.tan(l),s=.006739496752268451*Math.cos(l)*Math.cos(l),h=.99330562*b/Math.pow(1-.00669438*Math.sin(l)*Math.sin(l),1.5),c=d/(.9996*o);var m=l-o*Math.tan(l)/h*(c*c/2-(5+3*i+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*i+298*s+45*i*i-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);m=M(m);var p,A=(c-(1+2*i+s)*c*c*c/6+(5-2*s+28*i-3*s*s+.05391597401814761+24*i*i)*c*c*c*c*c/120)/Math.cos(l);if(A=u+M(A),t.accuracy){var z=v({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});p={top:z.lat,right:z.lon,bottom:m,left:A}}else p={lat:m,lon:A};return p}function g(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function d(t,e){var r="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+k(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+a.substr(a.length-5,e)}function k(t,e,r){var a=m(r);return p(Math.floor(t/1e5),Math.floor(e/1e5)%20,a)}function m(e){var r=e%t;return 0===r&&(r=t),r}function p(t,h,c){var u=c-1,f=e.charCodeAt(u),l=r.charCodeAt(u),M=f+t-1,b=l+h,v=!1;return M>s&&(M=M-s+a-1,v=!0),(M===n||f<n&&M>n||(M>n||f<n)&&v)&&M++,(M===o||f<o&&M>o||(M>o||f<o)&&v)&&++M===n&&M++,M>s&&(M=M-s+a-1),b>i?(b=b-i+a-1,v=!0):v=!1,(b===n||l<n&&b>n||(b>n||l<n)&&v)&&b++,(b===o||l<o&&b>o||(b>o||l<o)&&v)&&++b===n&&b++,b>i&&(b=b-i+a-1),String.fromCharCode(M)+String.fromCharCode(b)}function A(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,a=null,n="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,o++}var i=parseInt(n,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;a=t.substring(o,o+=2);for(var h=m(i),c=z(a.charAt(0),h),u=w(a.charAt(1),h);u<C(s);)u+=2e6;var f=r-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var l,M,b,v=f/2,g=0,d=0;return v>0&&(l=1e5/Math.pow(10,v),M=t.substring(o,o+v),g=parseFloat(M)*l,b=t.substring(o+v),d=parseFloat(b)*l),{easting:g+c,northing:d+u,zoneLetter:s,zoneNumber:i,accuracy:l}}function z(t,r){for(var i=e.charCodeAt(r-1),h=1e5,c=!1;i!==t.charCodeAt(0);){if(++i===n&&i++,i===o&&i++,i>s){if(c)throw"Bad character: "+t;i=a,c=!0}h+=1e5}return h}function w(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var s=r.charCodeAt(e-1),h=0,c=!1;s!==t.charCodeAt(0);){if(++s===n&&s++,s===o&&s++,s>i){if(c)throw"Bad character: "+t;s=a,c=!0}h+=1e5}return h}function C(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}exports.default=h;
},{}],"vuyI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("mgrs");function e(t,i,r){if(!(this instanceof e))return new e(t,i,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=i,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}e.fromMGRS=function(i){return new e((0,t.toPoint)(i))},e.prototype.toMGRS=function(e){return(0,t.forward)([this.x,this.y],e)};var i=e;exports.default=i;
},{"mgrs":"Of98"}],"DMR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=1,r=.25,t=.046875,u=.01953125,a=.01068115234375,o=.75,s=.46875,n=.013020833333333334,v=.007120768229166667,c=.3645833333333333,d=.005696614583333333,f=.3076171875;function i(i){var l=[];l[0]=e-i*(r+i*(t+i*(u+i*a))),l[1]=i*(o-i*(t+i*(u+i*a)));var p=i*i;return l[2]=p*(s-i*(n+i*v)),p*=i,l[3]=p*(c-i*d),l[4]=p*i*f,l}
},{}],"nj18":[function(require,module,exports) {
"use strict";function e(e,t,r,u){return r*=t,t*=t,u[0]*e-r*(u[1]+t*(u[2]+t*(u[3]+t*u[4])))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Sa0d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./pj_mlfn")),r=require("../constants/values");function t(e){return e&&e.__esModule?e:{default:e}}var a=20;function u(t,u,s){for(var n=1/(1-u),o=t,f=a;f;--f){var i=Math.sin(o),l=1-u*i*i;if(o-=l=((0,e.default)(o,i,Math.cos(o),s)-t)*(l*Math.sqrt(l))*n,Math.abs(l)<r.EPSLN)return o}return o}
},{"./pj_mlfn":"nj18","../constants/values":"owNJ"}],"uIJj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=n,exports.inverse=M,exports.default=exports.names=void 0;var t=o(require("../common/pj_enfn")),s=o(require("../common/pj_mlfn")),a=o(require("../common/pj_inv_mlfn")),h=o(require("../common/adjust_lon")),i=require("../constants/values"),e=o(require("../common/sign"));function o(t){return t&&t.__esModule?t:{default:t}}function r(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,t.default)(this.es),this.ml0=(0,s.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function n(t){var a,e,o,r=t.x,n=t.y,M=(0,h.default)(r-this.long0),l=Math.sin(n),u=Math.cos(n);if(this.es){var p=u*M,f=Math.pow(p,2),v=this.ep2*Math.pow(u,2),d=Math.pow(v,2),c=Math.abs(u)>i.EPSLN?Math.tan(n):0,x=Math.pow(c,2),m=Math.pow(x,2);a=1-this.es*Math.pow(l,2),p/=Math.sqrt(a);var w=(0,s.default)(n,l,u,this.en);e=this.a*(this.k0*p*(1+f/6*(1-x+v+f/20*(5-18*x+m+14*v-58*x*v+f/42*(61+179*m-m*x-479*x)))))+this.x0,o=this.a*(this.k0*(w-this.ml0+l*M*p/2*(1+f/12*(5-x+9*v+4*d+f/30*(61+m-58*x+270*v-330*x*v+f/56*(1385+543*m-m*x-3111*x))))))+this.y0}else{var _=u*Math.sin(M);if(Math.abs(Math.abs(_)-1)<i.EPSLN)return 93;if(e=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,o=u*Math.cos(M)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(o))>=1){if(_-1>i.EPSLN)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=e,t.y=o,t}function M(t){var s,o,r,n,M=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+l/this.k0,o=(0,a.default)(s,this.es,this.en),Math.abs(o)<i.HALF_PI){var u=Math.sin(o),p=Math.cos(o),f=Math.abs(p)>i.EPSLN?Math.tan(o):0,v=this.ep2*Math.pow(p,2),d=Math.pow(v,2),c=Math.pow(f,2),x=Math.pow(c,2);s=1-this.es*Math.pow(u,2);var m=M*Math.sqrt(s)/this.k0,w=Math.pow(m,2);r=o-(s*=f)*w/(1-this.es)*.5*(1-w/12*(5+3*c-9*v*c+v-4*d-w/30*(61+90*c-252*v*c+45*x+46*v-w/56*(1385+3633*c+4095*x+1574*x*c)))),n=(0,h.default)(this.long0+m*(1-w/6*(1+2*c+v-w/20*(5+28*c+24*x+8*v*c+6*v-w/42*(61+662*c+1320*x+720*x*c))))/p)}else r=i.HALF_PI*(0,e.default)(l),n=0;else{var _=Math.exp(M/this.k0),y=.5*(_-1/_),q=this.lat0+l/this.k0,g=Math.cos(q);s=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(y,2))),r=Math.asin(s),l<0&&(r=-r),n=0===y&&0===g?0:(0,h.default)(Math.atan2(y,g)+this.long0)}return t.x=n,t.y=r,t}var l=["Fast_Transverse_Mercator","Fast Transverse Mercator"];exports.names=l;var u={init:r,forward:n,inverse:M,names:l};exports.default=u;
},{"../common/pj_enfn":"DMR5","../common/pj_mlfn":"nj18","../common/pj_inv_mlfn":"Sa0d","../common/adjust_lon":"T5hz","../constants/values":"owNJ","../common/sign":"oXXR"}],"E5qf":[function(require,module,exports) {
"use strict";function e(e){var t=Math.exp(e);return t=(t-1/t)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Nct7":[function(require,module,exports) {
"use strict";function t(t,a){t=Math.abs(t),a=Math.abs(a);var e=Math.max(t,a),r=Math.min(t,a)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"VJtI":[function(require,module,exports) {
"use strict";function e(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"pbFs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./hypot")),t=r(require("./log1py"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){var u=Math.abs(r);return u=(0,t.default)(u*(1+u/((0,e.default)(1,u)+1))),r<0?-u:u}
},{"./hypot":"Nct7","./log1py":"VJtI"}],"xnf0":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=2*Math.cos(2*t),s=e.length-1,n=e[s],u=0;--s>=0;)r=o*n-u+e[s],u=n,n=r;return t+r*Math.sin(2*t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XP8y":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=2*Math.cos(t),s=e.length-1,n=e[s],u=0;--s>=0;)r=o*n-u+e[s],u=n,n=r;return Math.sin(t)*r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tW8a":[function(require,module,exports) {
"use strict";function e(e){var t=Math.exp(e);return t=(t+1/t)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"JLuz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./sinh")),t=r(require("./cosh"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u,n){for(var o,s,a=Math.sin(u),f=Math.cos(u),i=(0,e.default)(n),l=(0,t.default)(n),d=2*f*l,c=-2*a*i,h=r.length-1,M=r[h],_=0,p=0,v=0;--h>=0;)o=p,s=_,M=d*(p=M)-o-c*(_=v)+r[h],v=c*p-s+d*_;return[(d=a*l)*M-(c=f*i)*v,d*v+c*M]}
},{"./sinh":"E5qf","./cosh":"tW8a"}],"wysp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=u,exports.forward=c,exports.inverse=g,exports.default=exports.names=void 0;var t=o(require("../projections/tmerc")),s=o(require("../common/sinh")),i=o(require("../common/hypot")),e=o(require("../common/asinhy")),h=o(require("../common/gatg")),a=o(require("../common/clens")),r=o(require("../common/clens_cmplx")),n=o(require("../common/adjust_lon"));function o(t){return t&&t.__esModule?t:{default:t}}function u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(t.default.init.apply(this),this.forward=t.default.forward,this.inverse=t.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var s=this.es/(1+Math.sqrt(1-this.es)),i=s/(2-s),e=i;this.cgb[0]=i*(2+i*(-2/3+i*(i*(116/45+i*(26/45+i*(-2854/675)))-2))),this.cbg[0]=i*(i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))-2),e*=i,this.cgb[1]=e*(7/3+i*(i*(-227/45+i*(2704/315+i*(2323/945)))-1.6)),this.cbg[1]=e*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),e*=i,this.cgb[2]=e*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=e*(-26/15+i*(34/21+i*(1.6+i*(-12686/2835)))),e*=i,this.cgb[3]=e*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=e*(1237/630+i*(i*(-24832/14175)-2.4)),e*=i,this.cgb[4]=e*(4174/315+i*(-144838/6237)),this.cbg[4]=e*(-734/315+i*(109598/31185)),e*=i,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+e*(.25+e*(1/64+e/256))),this.utg[0]=i*(i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))-.5),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=e*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=e*(13/48+i*(i*(557/1440+i*(281/630+i*(-1983433/1935360)))-.6)),e*=i,this.utg[2]=e*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=e*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),e*=i,this.utg[3]=e*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=e*(49561/161280+i*(-179/168+i*(6601661/7257600))),e*=i,this.utg[4]=e*(-4583/161280+i*(108847/3991680)),this.gtu[4]=e*(34729/80640+i*(-3418889/1995840)),e*=i,this.utg[5]=-.03233083094085698*e,this.gtu[5]=.6650675310896665*e;var r=(0,h.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(r+(0,a.default)(this.gtu,2*r))}function c(t){var s=(0,n.default)(t.x-this.long0),a=t.y;a=(0,h.default)(this.cbg,a);var o=Math.sin(a),u=Math.cos(a),c=Math.sin(s),g=Math.cos(s);a=Math.atan2(o,g*u),s=Math.atan2(c*u,(0,i.default)(o,u*g)),s=(0,e.default)(Math.tan(s));var l,d,f=(0,r.default)(this.gtu,2*a,2*s);return a+=f[0],s+=f[1],Math.abs(s)<=2.623395162778?(l=this.a*(this.Qn*s)+this.x0,d=this.a*(this.Qn*a+this.Zb)+this.y0):(l=1/0,d=1/0),t.x=l,t.y=d,t}function g(t){var e,a,o=(t.x-this.x0)*(1/this.a),u=(t.y-this.y0)*(1/this.a);if(u=(u-this.Zb)/this.Qn,o/=this.Qn,Math.abs(o)<=2.623395162778){var c=(0,r.default)(this.utg,2*u,2*o);u+=c[0],o+=c[1],o=Math.atan((0,s.default)(o));var g=Math.sin(u),l=Math.cos(u),d=Math.sin(o),f=Math.cos(o);u=Math.atan2(g*f,(0,i.default)(d,f*l)),o=Math.atan2(d,f*l),e=(0,n.default)(o+this.long0),a=(0,h.default)(this.cgb,u)}else e=1/0,a=1/0;return t.x=e,t.y=a,t}var l=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];exports.names=l;var d={init:u,forward:c,inverse:g,names:l};exports.default=d;
},{"../projections/tmerc":"uIJj","../common/sinh":"E5qf","../common/hypot":"Nct7","../common/asinhy":"pbFs","../common/gatg":"xnf0","../common/clens":"XP8y","../common/clens_cmplx":"JLuz","../common/adjust_lon":"T5hz"}],"A3zK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./adjust_lon"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if(void 0===t){if((t=Math.floor(30*((0,e.default)(r)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}
},{"./adjust_lon":"T5hz"}],"qXju":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=i,exports.default=exports.names=exports.dependsOn=void 0;var e=s(require("../common/adjust_zone")),t=s(require("./etmerc")),r=require("../constants/values");function s(e){return e&&e.__esModule?e:{default:e}}var n="etmerc";function i(){var s=(0,e.default)(this.zone,this.long0);if(void 0===s)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(s)-183)*r.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,t.default.init.apply(this),this.forward=t.default.forward,this.inverse=t.default.inverse}exports.dependsOn=n;var o=["Universal Transverse Mercator System","utm"];exports.names=o;var a={init:i,names:o,dependsOn:n};exports.default=a;
},{"../common/adjust_zone":"A3zK","./etmerc":"wysp","../constants/values":"owNJ"}],"jx1P":[function(require,module,exports) {
"use strict";function e(e,t){return Math.pow((1-e)/(1+e),t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RrS9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=i,exports.forward=h,exports.inverse=r,exports.default=exports.names=void 0;var t=a(require("../common/srat")),s=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}var e=20;function i(){var a=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+s.FORTPI),this.C)*(0,t.default)(this.e*a,this.ratexp))}function h(a){var e=a.x,i=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+s.FORTPI),this.C)*(0,t.default)(this.e*Math.sin(i),this.ratexp))-s.HALF_PI,a.x=this.C*e,a}function r(a){for(var i=a.x/this.C,h=a.y,r=Math.pow(Math.tan(.5*h+s.FORTPI)/this.K,1/this.C),n=e;n>0&&(h=2*Math.atan(r*(0,t.default)(this.e*Math.sin(a.y),-.5*this.e))-s.HALF_PI,!(Math.abs(h-a.y)<1e-14));--n)a.y=h;return n?(a.x=i,a.y=h,a):null}var n=["gauss"];exports.names=n;var o={init:i,forward:h,inverse:r,names:n};exports.default=o;
},{"../common/srat":"jx1P","../constants/values":"owNJ"}],"gnV7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=h,exports.inverse=a,exports.default=exports.names=void 0;var t=s(require("./gauss")),i=s(require("../common/adjust_lon"));function s(t){return t&&t.__esModule?t:{default:t}}function e(){t.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function h(s){var e,h,a,r;return s.x=(0,i.default)(s.x-this.long0),t.default.forward.apply(this,[s]),e=Math.sin(s.y),h=Math.cos(s.y),a=Math.cos(s.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*h*a),s.x=r*h*Math.sin(s.x),s.y=r*(this.cosc0*e-this.sinc0*h*a),s.x=this.a*s.x+this.x0,s.y=this.a*s.y+this.y0,s}function a(s){var e,h,a,r,o;if(s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,s.x/=this.k0,s.y/=this.k0,o=Math.sqrt(s.x*s.x+s.y*s.y)){var n=2*Math.atan2(o,this.R2);e=Math.sin(n),h=Math.cos(n),r=Math.asin(h*this.sinc0+s.y*e*this.cosc0/o),a=Math.atan2(s.x*e,o*this.cosc0*h-s.y*this.sinc0*e)}else r=this.phic0,a=0;return s.x=a,s.y=r,t.default.inverse.apply(this,[s]),s.x=(0,i.default)(s.x+this.long0),s}var r=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];exports.names=r;var o={init:e,forward:h,inverse:a,names:r};exports.default=o;
},{"./gauss":"RrS9","../common/adjust_lon":"T5hz"}],"CNLc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ssfn_=e,exports.init=l,exports.forward=c,exports.inverse=M,exports.default=exports.names=void 0;var t=require("../constants/values"),s=o(require("../common/sign")),h=o(require("../common/msfnz")),i=o(require("../common/tsfnz")),a=o(require("../common/phi2z")),n=o(require("../common/adjust_lon"));function o(t){return t&&t.__esModule?t:{default:t}}function e(s,h,i){return h*=i,Math.tan(.5*(t.HALF_PI+s))*Math.pow((1-h)/(1+h),.5*i)}function l(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=t.EPSLN&&(this.k0=.5*(1+(0,s.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=t.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=t.EPSLN&&(this.k0=.5*this.cons*(0,h.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,i.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,h.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-t.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function c(s){var h,a,o,e,l,c,M=s.x,r=s.y,u=Math.sin(r),f=Math.cos(r),x=(0,n.default)(M-this.long0);return Math.abs(Math.abs(M-this.long0)-Math.PI)<=t.EPSLN&&Math.abs(r+this.lat0)<=t.EPSLN?(s.x=NaN,s.y=NaN,s):this.sphere?(h=2*this.k0/(1+this.sinlat0*u+this.coslat0*f*Math.cos(x)),s.x=this.a*h*f*Math.sin(x)+this.x0,s.y=this.a*h*(this.coslat0*u-this.sinlat0*f*Math.cos(x))+this.y0,s):(a=2*Math.atan(this.ssfn_(r,u,this.e))-t.HALF_PI,e=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=t.EPSLN?(l=(0,i.default)(this.e,r*this.con,this.con*u),c=2*this.a*this.k0*l/this.cons,s.x=this.x0+c*Math.sin(M-this.long0),s.y=this.y0-this.con*c*Math.cos(M-this.long0),s):(Math.abs(this.sinlat0)<t.EPSLN?(h=2*this.a*this.k0/(1+e*Math.cos(x)),s.y=h*o):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*e*Math.cos(x))),s.y=h*(this.cosX0*o-this.sinX0*e*Math.cos(x))+this.y0),s.x=h*e*Math.sin(x)+this.x0,s))}function M(s){var h,i,o,e,l;s.x-=this.x0,s.y-=this.y0;var c=Math.sqrt(s.x*s.x+s.y*s.y);if(this.sphere){var M=2*Math.atan(c/(2*this.a*this.k0));return h=this.long0,i=this.lat0,c<=t.EPSLN?(s.x=h,s.y=i,s):(i=Math.asin(Math.cos(M)*this.sinlat0+s.y*Math.sin(M)*this.coslat0/c),h=Math.abs(this.coslat0)<t.EPSLN?this.lat0>0?(0,n.default)(this.long0+Math.atan2(s.x,-1*s.y)):(0,n.default)(this.long0+Math.atan2(s.x,s.y)):(0,n.default)(this.long0+Math.atan2(s.x*Math.sin(M),c*this.coslat0*Math.cos(M)-s.y*this.sinlat0*Math.sin(M))),s.x=h,s.y=i,s)}if(Math.abs(this.coslat0)<=t.EPSLN){if(c<=t.EPSLN)return i=this.lat0,h=this.long0,s.x=h,s.y=i,s;s.x*=this.con,s.y*=this.con,o=c*this.cons/(2*this.a*this.k0),i=this.con*(0,a.default)(this.e,o),h=this.con*(0,n.default)(this.con*this.long0+Math.atan2(s.x,-1*s.y))}else e=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),h=this.long0,c<=t.EPSLN?l=this.X0:(l=Math.asin(Math.cos(e)*this.sinX0+s.y*Math.sin(e)*this.cosX0/c),h=(0,n.default)(this.long0+Math.atan2(s.x*Math.sin(e),c*this.cosX0*Math.cos(e)-s.y*this.sinX0*Math.sin(e)))),i=-1*(0,a.default)(this.e,Math.tan(.5*(t.HALF_PI+l)));return s.x=h,s.y=i,s}var r=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];exports.names=r;var u={init:l,forward:c,inverse:M,names:r,ssfn_:e};exports.default=u;
},{"../constants/values":"owNJ","../common/sign":"oXXR","../common/msfnz":"THMV","../common/tsfnz":"jEit","../common/phi2z":"eDXW","../common/adjust_lon":"T5hz"}],"FNfm":[function(require,module,exports) {
"use strict";function t(){var t=this.lat0;this.lambda0=this.long0;var a=Math.sin(t),h=this.a,s=1/this.rf,i=2*s-Math.pow(s,2),M=this.e=Math.sqrt(i);this.R=this.k0*h*Math.sqrt(1-i)/(1-i*Math.pow(a,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(a/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),e=Math.log((1+M*a)/(1-M*a));this.K=n-this.alpha*o+this.alpha*M/2*e}function a(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),h=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(a+h)+this.K,i=2*(Math.atan(Math.exp(s))-Math.PI/4),M=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(M)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(M))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(M));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*n+this.x0,t}function h(t){for(var a=t.x-this.x0,h=t.y-this.y0,s=a/this.R,i=2*(Math.atan(Math.exp(h/this.R))-Math.PI/4),M=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(s)),n=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+n/this.alpha,e=0,r=M,l=-1e3,p=0;Math.abs(r-l)>1e-7;){if(++p>20)return;e=1/this.alpha*(Math.log(Math.tan(Math.PI/4+M/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(r))/2)),l=r,r=2*Math.atan(Math.exp(e))-Math.PI/2}return t.x=o,t.y=r,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=t,exports.forward=a,exports.inverse=h,exports.default=exports.names=void 0;var s=["somerc"];exports.names=s;var i={init:t,forward:a,inverse:h,names:s};exports.default=i;
},{}],"EV03":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=n,exports.inverse=M,exports.default=exports.names=void 0;var t=a(require("../common/tsfnz")),s=a(require("../common/adjust_lon")),i=a(require("../common/phi2z")),h=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}var r=1e-7;function o(t){var s="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(s)}function e(){var i,a,e,n,M,_,l,u,c,f,B,x=0,m=0,b=0,A=0,p=0,y=0,O=0;this.no_off=o(this),this.no_rot="no_rot"in this;var g=!1;"alpha"in this&&(g=!0);var d=!1;if("rectified_grid_angle"in this&&(d=!0),g&&(O=this.alpha),d&&(x=this.rectified_grid_angle*h.D2R),g||d)m=this.longc;else if(b=this.long1,p=this.lat1,A=this.long2,y=this.lat2,Math.abs(p-y)<=r||(i=Math.abs(p))<=r||Math.abs(i-h.HALF_PI)<=r||Math.abs(Math.abs(this.lat0)-h.HALF_PI)<=r||Math.abs(Math.abs(y)-h.HALF_PI)<=r)throw new Error;var v=1-this.es;a=Math.sqrt(v),Math.abs(this.lat0)>h.EPSLN?(u=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*u*u,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/v),this.A=this.B*this.k0*a/i,(M=(n=this.B*a/(e*Math.sqrt(i)))*n-1)<=0?M=0:(M=Math.sqrt(M),this.lat0<0&&(M=-M)),this.E=M+=n,this.E*=Math.pow((0,t.default)(this.e,this.lat0,u),this.B)):(this.B=1/a,this.A=this.k0,this.E=n=M=1),g||d?(g?(B=Math.asin(Math.sin(O)/n),d||(x=O)):(B=x,O=Math.asin(n*Math.sin(B))),this.lam0=m-Math.asin(.5*(M-1/M)*Math.tan(B))/this.B):(_=Math.pow((0,t.default)(this.e,p,Math.sin(p)),this.B),l=Math.pow((0,t.default)(this.e,y,Math.sin(y)),this.B),M=this.E/_,c=(l-_)/(l+_),f=((f=this.E*this.E)-l*_)/(f+l*_),(i=b-A)<-Math.pi?A-=h.TWO_PI:i>Math.pi&&(A+=h.TWO_PI),this.lam0=(0,s.default)(.5*(b+A)-Math.atan(f*Math.tan(.5*this.B*(b-A))/c)/this.B),B=Math.atan(2*Math.sin(this.B*(0,s.default)(b-this.lam0))/(M-1/M)),x=O=Math.asin(n*Math.sin(B))),this.singam=Math.sin(B),this.cosgam=Math.cos(B),this.sinrot=Math.sin(x),this.cosrot=Math.cos(x),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),M=.5*B,this.v_pole_n=this.ArB*Math.log(Math.tan(h.FORTPI-M)),this.v_pole_s=this.ArB*Math.log(Math.tan(h.FORTPI+M))}function n(s){var i,a,o,e,n,M,_,l,u={};if(s.x=s.x-this.lam0,Math.abs(Math.abs(s.y)-h.HALF_PI)>h.EPSLN){if(i=.5*((n=this.E/Math.pow((0,t.default)(this.e,s.y,Math.sin(s.y)),this.B))-(M=1/n)),a=.5*(n+M),e=Math.sin(this.B*s.x),o=(i*this.singam-e*this.cosgam)/a,Math.abs(Math.abs(o)-1)<h.EPSLN)throw new Error;l=.5*this.ArB*Math.log((1-o)/(1+o)),M=Math.cos(this.B*s.x),_=Math.abs(M)<r?this.A*s.x:this.ArB*Math.atan2(i*this.cosgam+e*this.singam,M)}else l=s.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*s.y;return this.no_rot?(u.x=_,u.y=l):(_-=this.u_0,u.x=l*this.cosrot+_*this.sinrot,u.y=_*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u}function M(t){var s,a,r,o,e,n,M,_={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(a=t.y,s=t.x):(a=t.x*this.cosrot-t.y*this.sinrot,s=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((r=Math.exp(-this.BrA*a))-1/r),e=.5*(r+1/r),M=((n=Math.sin(this.BrA*s))*this.cosgam+o*this.singam)/e,Math.abs(Math.abs(M)-1)<h.EPSLN)_.x=0,_.y=M<0?-h.HALF_PI:h.HALF_PI;else{if(_.y=this.E/Math.sqrt((1+M)/(1-M)),_.y=(0,i.default)(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(o*this.cosgam-n*this.singam,Math.cos(this.BrA*s))}return _.x+=this.lam0,_}var _=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];exports.names=_;var l={init:e,forward:n,inverse:M,names:_};exports.default=l;
},{"../common/tsfnz":"jEit","../common/adjust_lon":"T5hz","../common/phi2z":"eDXW","../constants/values":"owNJ"}],"zkFZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=o,exports.inverse=l,exports.default=exports.names=void 0;var t=n(require("../common/msfnz")),s=n(require("../common/tsfnz")),i=n(require("../common/sign")),a=n(require("../common/adjust_lon")),h=n(require("../common/phi2z")),e=require("../constants/values");function n(t){return t&&t.__esModule?t:{default:t}}function r(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<e.EPSLN)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var a=Math.sin(this.lat1),h=Math.cos(this.lat1),n=(0,t.default)(this.e,a,h),r=(0,s.default)(this.e,this.lat1,a),o=Math.sin(this.lat2),l=Math.cos(this.lat2),f=(0,t.default)(this.e,o,l),u=(0,s.default)(this.e,this.lat2,o),M=(0,s.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>e.EPSLN?this.ns=Math.log(n/f)/Math.log(r/u):this.ns=a,isNaN(this.ns)&&(this.ns=a),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(M,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function o(t){var h=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=e.EPSLN&&(n=(0,i.default)(n)*(e.HALF_PI-2*e.EPSLN));var r,o,l=Math.abs(Math.abs(n)-e.HALF_PI);if(l>e.EPSLN)r=(0,s.default)(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(r,this.ns);else{if((l=n*this.ns)<=0)return null;o=0}var f=this.ns*(0,a.default)(h-this.long0);return t.x=this.k0*(o*Math.sin(f))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(f))+this.y0,t}function l(t){var s,i,n,r,o,l=(t.x-this.x0)/this.k0,f=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(l*l+f*f),i=1):(s=-Math.sqrt(l*l+f*f),i=-1);var u=0;if(0!==s&&(u=Math.atan2(i*l,i*f)),0!==s||this.ns>0){if(i=1/this.ns,n=Math.pow(s/(this.a*this.f0),i),-9999===(r=(0,h.default)(this.e,n)))return null}else r=-e.HALF_PI;return o=(0,a.default)(u/this.ns+this.long0),t.x=o,t.y=r,t}var f=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"];exports.names=f;var u={init:r,forward:o,inverse:l,names:f};exports.default=u;
},{"../common/msfnz":"THMV","../common/tsfnz":"jEit","../common/sign":"oXXR","../common/adjust_lon":"T5hz","../common/phi2z":"eDXW","../constants/values":"owNJ"}],"UYX4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=i,exports.inverse=a,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon"));function s(t){return t&&t.__esModule?t:{default:t}}function h(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function i(s){var h,i,a,n,M,e,o,r=s.x,f=s.y,l=(0,t.default)(r-this.long0);return h=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/h)-this.s45),a=-l*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),M=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(n)),e=this.n*M,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),s.y=o*Math.cos(e)/1,s.x=o*Math.sin(e)/1,this.czech||(s.y*=-1,s.x*=-1),s}function a(t){var s,h,i,a,n,M,e,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),n=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/n,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),h=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(s)),t.x=this.long0-h/this.alfa,M=s,e=0;var r=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(M))/(1-this.e*Math.sin(M)),this.e/2))-this.s45),Math.abs(M-t.y)<1e-10&&(e=1),M=t.y,r+=1}while(0===e&&r<15);return r>=15?null:t}var n=["Krovak","krovak"];exports.names=n;var M={init:h,forward:i,inverse:a,names:n};exports.default=M;
},{"../common/adjust_lon":"T5hz"}],"ZY8c":[function(require,module,exports) {
"use strict";function e(e,t,s,n,r){return e*r-t*Math.sin(2*r)+s*Math.sin(4*r)-n*Math.sin(6*r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"SeIy":[function(require,module,exports) {
"use strict";function e(e){return 1-.25*e*(1+e/16*(3+1.25*e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZFNC":[function(require,module,exports) {
"use strict";function e(e){return.375*e*(1+.25*e*(1+.46875*e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Rvte":[function(require,module,exports) {
"use strict";function e(e){return.05859375*e*e*(1+.75*e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"KINs":[function(require,module,exports) {
"use strict";function e(e){return e*e*e*(35/3072)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Krq2":[function(require,module,exports) {
"use strict";function e(e,t,r){var s=t*r;return e/Math.sqrt(1-s*s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aRi4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../constants/values"),t=r(require("./sign"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return Math.abs(r)<e.HALF_PI?r:r-(0,t.default)(r)*Math.PI}
},{"../constants/values":"owNJ","./sign":"oXXR"}],"Oo87":[function(require,module,exports) {
"use strict";function t(t,e,a,r,s){var o,n;o=t/e;for(var M=0;M<15;M++)if(o+=n=(t-(e*o-a*Math.sin(2*o)+r*Math.sin(4*o)-s*Math.sin(6*o)))/(e-2*a*Math.cos(2*o)+4*r*Math.cos(4*o)-6*s*Math.cos(6*o)),Math.abs(n)<=1e-10)return o;return NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"Fu16":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=f,exports.forward=m,exports.inverse=M,exports.default=exports.names=void 0;var t=l(require("../common/mlfn")),s=l(require("../common/e0fn")),e=l(require("../common/e1fn")),a=l(require("../common/e2fn")),i=l(require("../common/e3fn")),h=l(require("../common/gN")),n=l(require("../common/adjust_lon")),r=l(require("../common/adjust_lat")),o=l(require("../common/imlfn")),u=require("../constants/values");function l(t){return t&&t.__esModule?t:{default:t}}function f(){this.sphere||(this.e0=(0,s.default)(this.es),this.e1=(0,e.default)(this.es),this.e2=(0,a.default)(this.es),this.e3=(0,i.default)(this.es),this.ml0=this.a*(0,t.default)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function m(s){var e,a,i=s.x,r=s.y;if(i=(0,n.default)(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),a=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),u=Math.cos(r),l=(0,h.default)(this.a,this.e,o),f=Math.tan(r)*Math.tan(r),m=i*Math.cos(r),M=m*m,c=this.es*u*u/(1-this.es);e=l*m*(1-M*f*(1/6-(8-f+8*c)*M/120)),a=this.a*(0,t.default)(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+l*o/u*M*(.5+(5-f+6*c)*M/24)}return s.x=e+this.x0,s.y=a+this.y0,s}function M(t){t.x-=this.x0,t.y-=this.y0;var s,e,a=t.x/this.a,i=t.y/this.a;if(this.sphere){var l=i+this.lat0;s=Math.asin(Math.sin(l)*Math.cos(a)),e=Math.atan2(Math.tan(a),Math.cos(l))}else{var f=this.ml0/this.a+i,m=(0,o.default)(f,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(m)-u.HALF_PI)<=u.EPSLN)return t.x=this.long0,t.y=u.HALF_PI,i<0&&(t.y*=-1),t;var M=(0,h.default)(this.a,this.e,Math.sin(m)),c=M*M*M/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(m),2),x=a*this.a/M,v=x*x;s=m-M*Math.tan(m)/c*x*x*(.5-(1+3*d)*x*x/24),e=x*(1-v*(d/3+(1+3*d)*d*v/15))/Math.cos(m)}return t.x=(0,n.default)(e+this.long0),t.y=(0,r.default)(s),t}var c=["Cassini","Cassini_Soldner","cass"];exports.names=c;var d={init:f,forward:m,inverse:M,names:c};exports.default=d;
},{"../common/mlfn":"ZY8c","../common/e0fn":"SeIy","../common/e1fn":"ZFNC","../common/e2fn":"Rvte","../common/e3fn":"KINs","../common/gN":"Krq2","../common/adjust_lon":"T5hz","../common/adjust_lat":"aRi4","../common/imlfn":"Oo87","../constants/values":"owNJ"}],"ECju":[function(require,module,exports) {
"use strict";function e(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"z1ug":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=n,exports.forward=d,exports.inverse=L,exports.default=exports.names=exports.OBLIQ=exports.EQUIT=exports.N_POLE=exports.S_POLE=void 0;var s=require("../constants/values"),t=h(require("../common/qsfnz")),i=h(require("../common/adjust_lon"));function h(s){return s&&s.__esModule?s:{default:s}}var a=1;exports.S_POLE=a;var e=2;exports.N_POLE=e;var r=3;exports.EQUIT=r;var o=4;function n(){var i,h=Math.abs(this.lat0);if(Math.abs(h-s.HALF_PI)<s.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(h)<s.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,t.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=p(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=(0,t.default)(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function d(h){var a,e,r,o,n,d,L,m,c,E,M=h.x,l=h.y;if(M=(0,i.default)(M-this.long0),this.sphere){if(n=Math.sin(l),E=Math.cos(l),r=Math.cos(M),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+E*r:1+this.sinph0*n+this.cosph0*E*r)<=s.EPSLN)return null;a=(e=Math.sqrt(2/e))*E*Math.sin(M),e*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*E*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(l+this.lat0)<s.EPSLN)return null;e=s.FORTPI-.5*l,a=(e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)))*Math.sin(M),e*=r}}else{switch(L=0,m=0,c=0,r=Math.cos(M),o=Math.sin(M),n=Math.sin(l),d=(0,t.default)(this.e,n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(L=d/this.qp,m=Math.sqrt(1-L*L)),this.mode){case this.OBLIQ:c=1+this.sinb1*L+this.cosb1*m*r;break;case this.EQUIT:c=1+m*r;break;case this.N_POLE:c=s.HALF_PI+l,d=this.qp-d;break;case this.S_POLE:c=l-s.HALF_PI,d=this.qp+d}if(Math.abs(c)<s.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),e=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*L-this.sinb1*m*r):(c=Math.sqrt(2/(1+m*r)))*L*this.ymf,a=this.xmf*c*m*o;break;case this.N_POLE:case this.S_POLE:d>=0?(a=(c=Math.sqrt(d))*o,e=r*(this.mode===this.S_POLE?c:-c)):a=e=0}}return h.x=this.a*a+this.x0,h.y=this.a*e+this.y0,h}function L(t){t.x-=this.x0,t.y-=this.y0;var h,a,e,r,o,n,d,L=t.x/this.a,m=t.y/this.a;if(this.sphere){var c,E=0,M=0;if((a=.5*(c=Math.sqrt(L*L+m*m)))>1)return null;switch(a=2*Math.asin(a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(M=Math.sin(a),E=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(c)<=s.EPSLN?0:Math.asin(m*M/c),L*=M,m=E*c;break;case this.OBLIQ:a=Math.abs(c)<=s.EPSLN?this.lat0:Math.asin(E*this.sinph0+m*M*this.cosph0/c),L*=M*this.cosph0,m=(E-Math.sin(a)*this.sinph0)*c;break;case this.N_POLE:m=-m,a=s.HALF_PI-a;break;case this.S_POLE:a-=s.HALF_PI}h=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(L,m):0}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(L/=this.dd,m*=this.dd,(n=Math.sqrt(L*L+m*m))<s.EPSLN)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*n/this.rq),e=Math.cos(r),L*=r=Math.sin(r),this.mode===this.OBLIQ?(d=e*this.sinb1+m*r*this.cosb1/n,o=this.qp*d,m=n*this.cosb1*e-m*this.sinb1*r):(d=m*r/n,o=this.qp*d,m=n*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),!(o=L*L+m*m))return t.x=this.long0,t.y=this.lat0,t;d=1-o/this.qp,this.mode===this.S_POLE&&(d=-d)}h=Math.atan2(L,m),a=u(Math.asin(d),this.apa)}return t.x=(0,i.default)(this.long0+h),t.y=a,t}exports.OBLIQ=o;var m=.3333333333333333,c=.17222222222222222,E=.10257936507936508,M=.06388888888888888,l=.0664021164021164,O=.016415012942191543;function p(s){var t,i=[];return i[0]=s*m,t=s*s,i[0]+=t*c,i[1]=t*M,t*=s,i[0]+=t*E,i[1]+=t*l,i[2]=t*O,i}function u(s,t){var i=s+s;return s+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var f=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];exports.names=f;var P={init:n,forward:d,inverse:L,names:f,S_POLE:a,N_POLE:e,EQUIT:r,OBLIQ:o};exports.default=P;
},{"../constants/values":"owNJ","../common/qsfnz":"ECju","../common/adjust_lon":"T5hz"}],"mCQO":[function(require,module,exports) {
"use strict";function e(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"s4O2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=o,exports.inverse=r,exports.phi1z=p,exports.default=exports.names=void 0;var s=n(require("../common/msfnz")),t=n(require("../common/qsfnz")),i=n(require("../common/adjust_lon")),h=n(require("../common/asinz")),a=require("../constants/values");function n(s){return s&&s.__esModule?s:{default:s}}function e(){Math.abs(this.lat1+this.lat2)<a.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,s.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,t.default)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,s.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,t.default)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,t.default)(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>a.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function o(s){var h=s.x,a=s.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var n=(0,t.default)(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*(0,i.default)(h-this.long0),r=e*Math.sin(o)+this.x0,p=this.rh-e*Math.cos(o)+this.y0;return s.x=r,s.y=p,s}function r(s){var t,h,a,n,e,o;return s.x-=this.x0,s.y=this.rh-s.y+this.y0,this.ns0>=0?(t=Math.sqrt(s.x*s.x+s.y*s.y),a=1):(t=-Math.sqrt(s.x*s.x+s.y*s.y),a=-1),n=0,0!==t&&(n=Math.atan2(a*s.x,a*s.y)),a=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(h=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,h)),e=(0,i.default)(n/this.ns0+this.long0),s.x=e,s.y=o,s}function p(s,t){var i,n,e,o,r=(0,h.default)(.5*t);if(s<a.EPSLN)return r;for(var p=s*s,c=1;c<=25;c++)if(r+=o=.5*(e=1-(n=s*(i=Math.sin(r)))*n)*e/Math.cos(r)*(t/(1-p)-i/e+.5/s*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return r;return null}var c=["Albers_Conic_Equal_Area","Albers","aea"];exports.names=c;var u={init:e,forward:o,inverse:r,names:c,phi1z:p};exports.default=u;
},{"../common/msfnz":"THMV","../common/qsfnz":"ECju","../common/adjust_lon":"T5hz","../common/asinz":"mCQO","../constants/values":"owNJ"}],"Lqe0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=n,exports.forward=a,exports.inverse=e,exports.default=exports.names=void 0;var t=h(require("../common/adjust_lon")),s=h(require("../common/asinz")),i=require("../constants/values");function h(t){return t&&t.__esModule?t:{default:t}}function n(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function a(s){var h,n,a,e,o,r,c,p=s.x,u=s.y;return a=(0,t.default)(p-this.long0),h=Math.sin(u),n=Math.cos(u),e=Math.cos(a),1,(o=this.sin_p14*h+this.cos_p14*n*e)>0||Math.abs(o)<=i.EPSLN?(r=this.x0+1*this.a*n*Math.sin(a)/o,c=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*n*e)/o):(r=this.x0+this.infinity_dist*n*Math.sin(a),c=this.y0+this.infinity_dist*(this.cos_p14*h-this.sin_p14*n*e)),s.x=r,s.y=c,s}function e(i){var h,n,a,e,o,r;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(h=Math.sqrt(i.x*i.x+i.y*i.y))?(e=Math.atan2(h,this.rc),n=Math.sin(e),a=Math.cos(e),r=(0,s.default)(a*this.sin_p14+i.y*n*this.cos_p14/h),o=Math.atan2(i.x*n,h*this.cos_p14*a-i.y*this.sin_p14*n),o=(0,t.default)(this.long0+o)):(r=this.phic0,o=0),i.x=o,i.y=r,i}var o=["gnom"];exports.names=o;var r={init:n,forward:a,inverse:e,names:o};exports.default=r;
},{"../common/adjust_lon":"T5hz","../common/asinz":"mCQO","../constants/values":"owNJ"}],"g4pJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../constants/values");function a(a,e){var r=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*t.HALF_PI:t.HALF_PI;for(var s,o,n,u,M=Math.asin(.5*e),h=0;h<30;h++)if(o=Math.sin(M),n=Math.cos(M),u=a*o,M+=s=Math.pow(1-u*u,2)/(2*n)*(e/(1-a*a)-o/(1-u*u)+.5/a*Math.log((1-u)/(1+u))),Math.abs(s)<=1e-10)return M;return NaN}
},{"../constants/values":"owNJ"}],"G0HQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=r,exports.inverse=o,exports.default=exports.names=void 0;var t=a(require("../common/adjust_lon")),s=a(require("../common/qsfnz")),e=a(require("../common/msfnz")),i=a(require("../common/iqsfnz"));function a(t){return t&&t.__esModule?t:{default:t}}function h(){this.sphere||(this.k0=(0,e.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function r(e){var i,a,h=e.x,r=e.y,o=(0,t.default)(h-this.long0);if(this.sphere)i=this.x0+this.a*o*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var n=(0,s.default)(this.e,Math.sin(r));i=this.x0+this.a*this.k0*o,a=this.y0+this.a*n*.5/this.k0}return e.x=i,e.y=a,e}function o(s){var e,a;return s.x-=this.x0,s.y-=this.y0,this.sphere?(e=(0,t.default)(this.long0+s.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(s.y/this.a*Math.cos(this.lat_ts))):(a=(0,i.default)(this.e,2*s.y*this.k0/this.a),e=(0,t.default)(this.long0+s.x/(this.a*this.k0))),s.x=e,s.y=a,s}var n=["cea"];exports.names=n;var u={init:h,forward:r,inverse:o,names:n};exports.default=u;
},{"../common/adjust_lon":"T5hz","../common/qsfnz":"ECju","../common/msfnz":"THMV","../common/iqsfnz":"g4pJ"}],"Ttan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=a,exports.inverse=r,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon")),i=s(require("../common/adjust_lat"));function s(t){return t&&t.__esModule?t:{default:t}}function e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(s){var e=s.x,a=s.y,r=(0,t.default)(e-this.long0),l=(0,i.default)(a-this.lat0);return s.x=this.x0+this.a*r*this.rc,s.y=this.y0+this.a*l,s}function r(s){var e=s.x,a=s.y;return s.x=(0,t.default)(this.long0+(e-this.x0)/(this.a*this.rc)),s.y=(0,i.default)(this.lat0+(a-this.y0)/this.a),s}var l=["Equirectangular","Equidistant_Cylindrical","eqc"];exports.names=l;var n={init:e,forward:a,inverse:r,names:l};exports.default=n;
},{"../common/adjust_lon":"T5hz","../common/adjust_lat":"aRi4"}],"fJpe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=f,exports.forward=M,exports.inverse=m,exports.default=exports.names=void 0;var t=l(require("../common/e0fn")),s=l(require("../common/e1fn")),i=l(require("../common/e2fn")),e=l(require("../common/e3fn")),a=l(require("../common/adjust_lon")),h=l(require("../common/adjust_lat")),n=l(require("../common/mlfn")),r=require("../constants/values"),o=l(require("../common/gN"));function l(t){return t&&t.__esModule?t:{default:t}}var u=20;function f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,t.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,i.default)(this.es),this.e3=(0,e.default)(this.es),this.ml0=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function M(t){var s,i,e,l=t.x,u=t.y,f=(0,a.default)(l-this.long0);if(e=f*Math.sin(u),this.sphere)Math.abs(u)<=r.EPSLN?(s=this.a*f,i=-1*this.a*this.lat0):(s=this.a*Math.sin(e)/Math.tan(u),i=this.a*((0,h.default)(u-this.lat0)+(1-Math.cos(e))/Math.tan(u)));else if(Math.abs(u)<=r.EPSLN)s=this.a*f,i=-1*this.ml0;else{var M=(0,o.default)(this.a,this.e,Math.sin(u))/Math.tan(u);s=M*Math.sin(e),i=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,u)-this.ml0+M*(1-Math.cos(e))}return t.x=s+this.x0,t.y=i+this.y0,t}function m(t){var s,i,e,h,o,l,f,M,m;if(e=t.x-this.x0,h=t.y-this.y0,this.sphere)if(Math.abs(h+this.a*this.lat0)<=r.EPSLN)s=(0,a.default)(e/this.a+this.long0),i=0;else{var d;for(l=this.lat0+h/this.a,f=e*e/this.a/this.a+l*l,M=l,o=u;o;--o)if(M+=m=-1*(l*(M*(d=Math.tan(M))+1)-M-.5*(M*M+f)*d)/((M-l)/d-1),Math.abs(m)<=r.EPSLN){i=M;break}s=(0,a.default)(this.long0+Math.asin(e*Math.tan(M)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=r.EPSLN)i=0,s=(0,a.default)(this.long0+e/this.a);else{var c,p,v,x,q;for(l=(this.ml0+h)/this.a,f=e*e/this.a/this.a+l*l,M=l,o=u;o;--o)if(q=this.e*Math.sin(M),c=Math.sqrt(1-q*q)*Math.tan(M),p=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,M),v=this.e0-2*this.e1*Math.cos(2*M)+4*this.e2*Math.cos(4*M)-6*this.e3*Math.cos(6*M),M-=m=(l*(c*(x=p/this.a)+1)-x-.5*c*(x*x+f))/(this.es*Math.sin(2*M)*(x*x+f-2*l*x)/(4*c)+(l-x)*(c*v-2/Math.sin(2*M))-v),Math.abs(m)<=r.EPSLN){i=M;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),s=(0,a.default)(this.long0+Math.asin(e*c/this.a)/Math.sin(i))}return t.x=s,t.y=i,t}var d=["Polyconic","poly"];exports.names=d;var c={init:f,forward:M,inverse:m,names:d};exports.default=c;
},{"../common/e0fn":"SeIy","../common/e1fn":"ZFNC","../common/e2fn":"Rvte","../common/e3fn":"KINs","../common/adjust_lon":"T5hz","../common/adjust_lat":"aRi4","../common/mlfn":"ZY8c","../constants/values":"owNJ","../common/gN":"Krq2"}],"heJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=s,exports.forward=h,exports.inverse=r,exports.default=exports.names=exports.iterations=void 0;var i=require("../constants/values"),t=1;function s(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function h(t){var s,h=t.x,r=t.y-this.lat0,e=h-this.long0,_=r/i.SEC_TO_RAD*1e-5,a=e,o=1,B=0;for(s=1;s<=10;s++)o*=_,B+=this.A[s]*o;var m,n=B,C=a,v=1,x=0,f=0,A=0;for(s=1;s<=6;s++)m=x*n+v*C,v=v*n-x*C,x=m,f=f+this.B_re[s]*v-this.B_im[s]*x,A=A+this.B_im[s]*v+this.B_re[s]*x;return t.x=A*this.a+this.x0,t.y=f*this.a+this.y0,t}function r(t){var s,h,r=t.x,e=t.y,_=r-this.x0,a=(e-this.y0)/this.a,o=_/this.a,B=1,m=0,n=0,C=0;for(s=1;s<=6;s++)h=m*a+B*o,B=B*a-m*o,m=h,n=n+this.C_re[s]*B-this.C_im[s]*m,C=C+this.C_im[s]*B+this.C_re[s]*m;for(var v=0;v<this.iterations;v++){var x,f=n,A=C,D=a,p=o;for(s=2;s<=6;s++)x=A*n+f*C,f=f*n-A*C,A=x,D+=(s-1)*(this.B_re[s]*f-this.B_im[s]*A),p+=(s-1)*(this.B_im[s]*f+this.B_re[s]*A);f=1,A=0;var u=this.B_re[1],l=this.B_im[1];for(s=2;s<=6;s++)x=A*n+f*C,f=f*n-A*C,A=x,u+=s*(this.B_re[s]*f-this.B_im[s]*A),l+=s*(this.B_im[s]*f+this.B_re[s]*A);var d=u*u+l*l;n=(D*u+p*l)/d,C=(p*u-D*l)/d}var y=n,c=C,g=1,w=0;for(s=1;s<=9;s++)g*=y,w+=this.D[s]*g;var O=this.lat0+w*i.SEC_TO_RAD*1e5,E=this.long0+c;return t.x=E,t.y=O,t}exports.iterations=t;var e=["New_Zealand_Map_Grid","nzmg"];exports.names=e;var _={init:s,forward:h,inverse:r,names:e};exports.default=_;
},{"../constants/values":"owNJ"}],"cBC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=a,exports.inverse=i,exports.default=exports.names=void 0;var t=e(require("../common/adjust_lon"));function e(t){return t&&t.__esModule?t:{default:t}}function r(){}function a(e){var r=e.x,a=e.y,i=(0,t.default)(r-this.long0),s=this.x0+this.a*i,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return e.x=s,e.y=n,e}function i(e){e.x-=this.x0,e.y-=this.y0;var r=(0,t.default)(this.long0+e.x/this.a),a=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=r,e.y=a,e}var s=["Miller_Cylindrical","mill"];exports.names=s;var n={init:r,forward:a,inverse:i,names:s};exports.default=n;
},{"../common/adjust_lon":"T5hz"}],"LhcO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=u,exports.forward=l,exports.inverse=m,exports.default=exports.names=void 0;var t=r(require("../common/adjust_lon")),s=r(require("../common/adjust_lat")),i=r(require("../common/pj_enfn")),e=r(require("../common/pj_mlfn")),h=r(require("../common/pj_inv_mlfn")),a=require("../constants/values"),n=r(require("../common/asinz"));function r(t){return t&&t.__esModule?t:{default:t}}var o=20;function u(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,i.default)(this.es)}function l(s){var i,h,n=s.x,r=s.y;if(n=(0,t.default)(n-this.long0),this.sphere){if(this.m)for(var u=this.n*Math.sin(r),l=o;l;--l){var m=(this.m*r+Math.sin(r)-u)/(this.m+Math.cos(r));if(r-=m,Math.abs(m)<a.EPSLN)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;i=this.a*this.C_x*n*(this.m+Math.cos(r)),h=this.a*this.C_y*r}else{var f=Math.sin(r),d=Math.cos(r);h=this.a*(0,e.default)(r,f,d,this.en),i=this.a*n*d/Math.sqrt(1-this.es*f*f)}return s.x=i,s.y=h,s}function m(i){var e,r,o,u;return i.x-=this.x0,o=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,n.default)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,n.default)(Math.sin(e)/this.n)),o=(0,t.default)(o+this.long0),e=(0,s.default)(e)):(e=(0,h.default)(i.y/this.a,this.es,this.en),(u=Math.abs(e))<a.HALF_PI?(u=Math.sin(e),r=this.long0+i.x*Math.sqrt(1-this.es*u*u)/(this.a*Math.cos(e)),o=(0,t.default)(r)):u-a.EPSLN<a.HALF_PI&&(o=this.long0)),i.x=o,i.y=e,i}var f=["Sinusoidal","sinu"];exports.names=f;var d={init:u,forward:l,inverse:m,names:f};exports.default=d;
},{"../common/adjust_lon":"T5hz","../common/adjust_lat":"aRi4","../common/pj_enfn":"DMR5","../common/pj_mlfn":"nj18","../common/pj_inv_mlfn":"Sa0d","../constants/values":"owNJ","../common/asinz":"mCQO"}],"lOKC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=r,exports.inverse=i,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon")),a=require("../constants/values");function s(t){return t&&t.__esModule?t:{default:t}}function e(){}function r(s){for(var e=s.x,r=s.y,i=(0,t.default)(e-this.long0),n=r,h=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-h)/(1+Math.cos(n));if(n+=o,Math.abs(o)<a.EPSLN)break}n/=2,Math.PI/2-Math.abs(r)<a.EPSLN&&(i=0);var M=.900316316158*this.a*i*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return s.x=M,s.y=u,s}function i(a){var s,e;a.x-=this.x0,a.y-=this.y0,e=a.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),s=Math.asin(e);var r=(0,t.default)(this.long0+a.x/(.900316316158*this.a*Math.cos(s)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*s+Math.sin(2*s))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return a.x=r,a.y=i,a}var n=["Mollweide","moll"];exports.names=n;var h={init:e,forward:r,inverse:i,names:n};exports.default=h;
},{"../common/adjust_lon":"T5hz","../constants/values":"owNJ"}],"kjt9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=m,exports.forward=f,exports.inverse=d,exports.default=exports.names=void 0;var t=u(require("../common/e0fn")),s=u(require("../common/e1fn")),i=u(require("../common/e2fn")),h=u(require("../common/e3fn")),e=u(require("../common/msfnz")),a=u(require("../common/mlfn")),r=u(require("../common/adjust_lon")),n=u(require("../common/adjust_lat")),l=u(require("../common/imlfn")),o=require("../constants/values");function u(t){return t&&t.__esModule?t:{default:t}}function m(){Math.abs(this.lat1+this.lat2)<o.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,t.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,i.default)(this.es),this.e3=(0,h.default)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,e.default)(this.e,this.sinphi,this.cosphi),this.ml1=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<o.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,e.default)(this.e,this.sinphi,this.cosphi),this.ml2=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function f(t){var s,i=t.x,h=t.y;if(this.sphere)s=this.a*(this.g-h);else{var e=(0,a.default)(this.e0,this.e1,this.e2,this.e3,h);s=this.a*(this.g-e)}var n=this.ns*(0,r.default)(i-this.long0),l=this.x0+s*Math.sin(n),o=this.y0+this.rh-s*Math.cos(n);return t.x=l,t.y=o,t}function d(t){var s,i,h,e;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1);var a=0;if(0!==i&&(a=Math.atan2(s*t.x,s*t.y)),this.sphere)return e=(0,r.default)(this.long0+a/this.ns),h=(0,n.default)(this.g-i/this.a),t.x=e,t.y=h,t;var o=this.g-i/this.a;return h=(0,l.default)(o,this.e0,this.e1,this.e2,this.e3),e=(0,r.default)(this.long0+a/this.ns),t.x=e,t.y=h,t}var c=["Equidistant_Conic","eqdc"];exports.names=c;var p={init:m,forward:f,inverse:d,names:c};exports.default=p;
},{"../common/e0fn":"SeIy","../common/e1fn":"ZFNC","../common/e2fn":"Rvte","../common/e3fn":"KINs","../common/msfnz":"THMV","../common/mlfn":"ZY8c","../common/adjust_lon":"T5hz","../common/adjust_lat":"aRi4","../common/imlfn":"Oo87","../constants/values":"owNJ"}],"uu2Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=r,exports.inverse=i,exports.default=exports.names=void 0;var t=h(require("../common/adjust_lon")),a=require("../constants/values"),s=h(require("../common/asinz"));function h(t){return t&&t.__esModule?t:{default:t}}function e(){this.R=this.a}function r(h){var e,r,i=h.x,n=h.y,M=(0,t.default)(i-this.long0);Math.abs(n)<=a.EPSLN&&(e=this.x0+this.R*M,r=this.y0);var o=(0,s.default)(2*Math.abs(n/Math.PI));(Math.abs(M)<=a.EPSLN||Math.abs(Math.abs(n)-a.HALF_PI)<=a.EPSLN)&&(e=this.x0,r=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var u=.5*Math.abs(Math.PI/M-M/Math.PI),P=u*u,x=Math.sin(o),d=Math.cos(o),I=d/(x+d-1),l=I*I,v=I*(2/x-1),c=v*v,f=Math.PI*this.R*(u*(I-c)+Math.sqrt(P*(I-c)*(I-c)-(c+P)*(l-c)))/(c+P);M<0&&(f=-f),e=this.x0+f;var y=P+I;return f=Math.PI*this.R*(v*y-u*Math.sqrt((c+P)*(P+1)-y*y))/(c+P),r=n>=0?this.y0+f:this.y0-f,h.x=e,h.y=r,h}function i(s){var h,e,r,i,n,M,o,u,P,x,d,I;return s.x-=this.x0,s.y-=this.y0,d=Math.PI*this.R,n=(r=s.x/d)*r+(i=s.y/d)*i,d=3*(i*i/(u=-2*(M=-Math.abs(i)*(1+n))+1+2*i*i+n*n)+(2*(o=M-2*i*i+r*r)*o*o/u/u/u-9*M*o/u/u)/27)/(P=(M-o*o/3/u)/u)/(x=2*Math.sqrt(-P/3)),Math.abs(d)>1&&(d=d>=0?1:-1),I=Math.acos(d)/3,e=s.y>=0?(-x*Math.cos(I+Math.PI/3)-o/3/u)*Math.PI:-(-x*Math.cos(I+Math.PI/3)-o/3/u)*Math.PI,h=Math.abs(r)<a.EPSLN?this.long0:(0,t.default)(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(r*r-i*i)+n*n))/2/r),s.x=h,s.y=e,s}var n=["Van_der_Grinten_I","VanDerGrinten","vandg"];exports.names=n;var M={init:e,forward:r,inverse:i,names:n};exports.default=M;
},{"../common/adjust_lon":"T5hz","../constants/values":"owNJ","../common/asinz":"mCQO"}],"mpZo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=_,exports.inverse=c,exports.default=exports.names=void 0;var t=u(require("../common/adjust_lon")),s=require("../constants/values"),a=u(require("../common/mlfn")),h=u(require("../common/e0fn")),i=u(require("../common/e1fn")),e=u(require("../common/e2fn")),n=u(require("../common/e3fn")),o=u(require("../common/gN")),M=u(require("../common/asinz")),r=u(require("../common/imlfn"));function u(t){return t&&t.__esModule?t:{default:t}}function l(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _(M){var r,u,l,_,c,p,f,x,d,y,m,P,L,q,b,A,I,v,E,F,H,N,g=M.x,S=M.y,w=Math.sin(M.y),j=Math.cos(M.y),z=(0,t.default)(g-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s.EPSLN?(M.x=this.x0+this.a*(s.HALF_PI-S)*Math.sin(z),M.y=this.y0-this.a*(s.HALF_PI-S)*Math.cos(z),M):Math.abs(this.sin_p12+1)<=s.EPSLN?(M.x=this.x0+this.a*(s.HALF_PI+S)*Math.sin(z),M.y=this.y0+this.a*(s.HALF_PI+S)*Math.cos(z),M):(v=this.sin_p12*w+this.cos_p12*j*Math.cos(z),I=(A=Math.acos(v))?A/Math.sin(A):1,M.x=this.x0+this.a*I*j*Math.sin(z),M.y=this.y0+this.a*I*(this.cos_p12*w-this.sin_p12*j*Math.cos(z)),M):(r=(0,h.default)(this.es),u=(0,i.default)(this.es),l=(0,e.default)(this.es),_=(0,n.default)(this.es),Math.abs(this.sin_p12-1)<=s.EPSLN?(c=this.a*(0,a.default)(r,u,l,_,s.HALF_PI),p=this.a*(0,a.default)(r,u,l,_,S),M.x=this.x0+(c-p)*Math.sin(z),M.y=this.y0-(c-p)*Math.cos(z),M):Math.abs(this.sin_p12+1)<=s.EPSLN?(c=this.a*(0,a.default)(r,u,l,_,s.HALF_PI),p=this.a*(0,a.default)(r,u,l,_,S),M.x=this.x0+(c+p)*Math.sin(z),M.y=this.y0+(c+p)*Math.cos(z),M):(f=w/j,x=(0,o.default)(this.a,this.e,this.sin_p12),d=(0,o.default)(this.a,this.e,w),y=Math.atan((1-this.es)*f+this.es*x*this.sin_p12/(d*j)),E=0===(m=Math.atan2(Math.sin(z),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(z)))?Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(m)-Math.PI)<=s.EPSLN?-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.asin(Math.sin(z)*Math.cos(y)/Math.sin(m)),P=this.e*this.sin_p12/Math.sqrt(1-this.es),A=x*E*(1-(F=E*E)*(b=(L=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es))*L)*(1-b)/6+(H=F*E)/8*(q=P*L)*(1-2*b)+(N=H*E)/120*(b*(4-7*b)-3*P*P*(1-7*b))-N*E/48*q),M.x=this.x0+A*Math.sin(m),M.y=this.y0+A*Math.cos(m),M))}function c(u){var l,_,c,p,f,x,d,y,m,P,L,q,b,A,I,v,E,F,H,N,g,S,w,j;if(u.x-=this.x0,u.y-=this.y0,this.sphere){if((l=Math.sqrt(u.x*u.x+u.y*u.y))>2*s.HALF_PI*this.a)return;return _=l/this.a,c=Math.sin(_),p=Math.cos(_),f=this.long0,Math.abs(l)<=s.EPSLN?x=this.lat0:(x=(0,M.default)(p*this.sin_p12+u.y*c*this.cos_p12/l),d=Math.abs(this.lat0)-s.HALF_PI,f=Math.abs(d)<=s.EPSLN?this.lat0>=0?(0,t.default)(this.long0+Math.atan2(u.x,-u.y)):(0,t.default)(this.long0-Math.atan2(-u.x,u.y)):(0,t.default)(this.long0+Math.atan2(u.x*c,l*this.cos_p12*p-u.y*this.sin_p12*c))),u.x=f,u.y=x,u}return y=(0,h.default)(this.es),m=(0,i.default)(this.es),P=(0,e.default)(this.es),L=(0,n.default)(this.es),Math.abs(this.sin_p12-1)<=s.EPSLN?(b=(q=this.a*(0,a.default)(y,m,P,L,s.HALF_PI))-(l=Math.sqrt(u.x*u.x+u.y*u.y)),x=(0,r.default)(b/this.a,y,m,P,L),f=(0,t.default)(this.long0+Math.atan2(u.x,-1*u.y)),u.x=f,u.y=x,u):Math.abs(this.sin_p12+1)<=s.EPSLN?(q=this.a*(0,a.default)(y,m,P,L,s.HALF_PI),b=(l=Math.sqrt(u.x*u.x+u.y*u.y))-q,x=(0,r.default)(b/this.a,y,m,P,L),f=(0,t.default)(this.long0+Math.atan2(u.x,u.y)),u.x=f,u.y=x,u):(l=Math.sqrt(u.x*u.x+u.y*u.y),v=Math.atan2(u.x,u.y),A=(0,o.default)(this.a,this.e,this.sin_p12),E=Math.cos(v),H=-(F=this.e*this.cos_p12*E)*F/(1-this.es),N=3*this.es*(1-H)*this.sin_p12*this.cos_p12*E/(1-this.es),w=1-H*(S=(g=l/A)-H*(1+H)*Math.pow(g,3)/6-N*(1+3*H)*Math.pow(g,4)/24)*S/2-g*S*S*S/6,I=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*E),f=(0,t.default)(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(I))),j=Math.sin(I),x=Math.atan2((j-this.es*w*this.sin_p12)*Math.tan(I),j*(1-this.es)),u.x=f,u.y=x,u)}var p=["Azimuthal_Equidistant","aeqd"];exports.names=p;var f={init:l,forward:_,inverse:c,names:p};exports.default=f;
},{"../common/adjust_lon":"T5hz","../constants/values":"owNJ","../common/mlfn":"ZY8c","../common/e0fn":"SeIy","../common/e1fn":"ZFNC","../common/e2fn":"Rvte","../common/e3fn":"KINs","../common/gN":"Krq2","../common/asinz":"mCQO","../common/imlfn":"Oo87"}],"O1Op":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=h,exports.inverse=n,exports.default=exports.names=void 0;var t=i(require("../common/adjust_lon")),s=i(require("../common/asinz")),a=require("../constants/values");function i(t){return t&&t.__esModule?t:{default:t}}function e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function h(s){var i,e,h,n,o,r,u,l=s.x,x=s.y;return h=(0,t.default)(l-this.long0),i=Math.sin(x),e=Math.cos(x),n=Math.cos(h),1,((o=this.sin_p14*i+this.cos_p14*e*n)>0||Math.abs(o)<=a.EPSLN)&&(r=1*this.a*e*Math.sin(h),u=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*e*n)),s.x=r,s.y=u,s}function n(i){var e,h,n,o,r,u,l;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),h=(0,s.default)(e/this.a),n=Math.sin(h),o=Math.cos(h),u=this.long0,Math.abs(e)<=a.EPSLN?(l=this.lat0,i.x=u,i.y=l,i):(l=(0,s.default)(o*this.sin_p14+i.y*n*this.cos_p14/e),r=Math.abs(this.lat0)-a.HALF_PI,Math.abs(r)<=a.EPSLN?(u=this.lat0>=0?(0,t.default)(this.long0+Math.atan2(i.x,-i.y)):(0,t.default)(this.long0-Math.atan2(-i.x,i.y)),i.x=u,i.y=l,i):(u=(0,t.default)(this.long0+Math.atan2(i.x*n,e*this.cos_p14*o-i.y*this.sin_p14*n)),i.x=u,i.y=l,i))}var o=["ortho"];exports.names=o;var r={init:e,forward:h,inverse:n,names:o};exports.default=r;
},{"../common/adjust_lon":"T5hz","../common/asinz":"mCQO","../constants/values":"owNJ"}],"SUMe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=e,exports.inverse=i,exports.default=exports.names=void 0;var a=require("../constants/values"),t={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},s={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function h(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=a.HALF_PI-a.FORTPI/2?this.face=t.TOP:this.lat0<=-(a.HALF_PI-a.FORTPI/2)?this.face=t.BOTTOM:Math.abs(this.long0)<=a.FORTPI?this.face=t.FRONT:Math.abs(this.long0)<=a.HALF_PI+a.FORTPI?this.face=this.long0>0?t.RIGHT:t.LEFT:this.face=t.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function e(h){var e,i,I,P,l,F,n={x:0,y:0},R={value:0};if(h.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(h.y)):h.y,i=h.x,this.face===t.TOP)P=a.HALF_PI-e,i>=a.FORTPI&&i<=a.HALF_PI+a.FORTPI?(R.value=s.AREA_0,I=i-a.HALF_PI):i>a.HALF_PI+a.FORTPI||i<=-(a.HALF_PI+a.FORTPI)?(R.value=s.AREA_1,I=i>0?i-a.SPI:i+a.SPI):i>-(a.HALF_PI+a.FORTPI)&&i<=-a.FORTPI?(R.value=s.AREA_2,I=i+a.HALF_PI):(R.value=s.AREA_3,I=i);else if(this.face===t.BOTTOM)P=a.HALF_PI+e,i>=a.FORTPI&&i<=a.HALF_PI+a.FORTPI?(R.value=s.AREA_0,I=-i+a.HALF_PI):i<a.FORTPI&&i>=-a.FORTPI?(R.value=s.AREA_1,I=-i):i<-a.FORTPI&&i>=-(a.HALF_PI+a.FORTPI)?(R.value=s.AREA_2,I=-i-a.HALF_PI):(R.value=s.AREA_3,I=i>0?-i+a.SPI:-i-a.SPI);else{var u,M,c,r,o,T;this.face===t.RIGHT?i=_(i,+a.HALF_PI):this.face===t.BACK?i=_(i,+a.SPI):this.face===t.LEFT&&(i=_(i,-a.HALF_PI)),r=Math.sin(e),o=Math.cos(e),T=Math.sin(i),u=o*Math.cos(i),M=o*T,c=r,this.face===t.FRONT?I=A(P=Math.acos(u),c,M,R):this.face===t.RIGHT?I=A(P=Math.acos(M),c,-u,R):this.face===t.BACK?I=A(P=Math.acos(-u),c,-M,R):this.face===t.LEFT?I=A(P=Math.acos(-M),c,u,R):(P=I=0,R.value=s.AREA_0)}return F=Math.atan(12/a.SPI*(I+Math.acos(Math.sin(I)*Math.cos(a.FORTPI))-a.HALF_PI)),l=Math.sqrt((1-Math.cos(P))/(Math.cos(F)*Math.cos(F))/(1-Math.cos(Math.atan(1/Math.cos(I))))),R.value===s.AREA_1?F+=a.HALF_PI:R.value===s.AREA_2?F+=a.SPI:R.value===s.AREA_3&&(F+=1.5*a.SPI),n.x=l*Math.cos(F),n.y=l*Math.sin(F),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,h.x=n.x,h.y=n.y,h}function i(h){var e,i,A,I,P,l,F,n,R,u,M,c,r={lam:0,phi:0},o={value:0};if(h.x=(h.x-this.x0)/this.a,h.y=(h.y-this.y0)/this.a,i=Math.atan(Math.sqrt(h.x*h.x+h.y*h.y)),e=Math.atan2(h.y,h.x),h.x>=0&&h.x>=Math.abs(h.y)?o.value=s.AREA_0:h.y>=0&&h.y>=Math.abs(h.x)?(o.value=s.AREA_1,e-=a.HALF_PI):h.x<0&&-h.x>=Math.abs(h.y)?(o.value=s.AREA_2,e=e<0?e+a.SPI:e-a.SPI):(o.value=s.AREA_3,e+=a.HALF_PI),R=a.SPI/12*Math.tan(e),P=Math.sin(R)/(Math.cos(R)-1/Math.sqrt(2)),l=Math.atan(P),(F=1-(A=Math.cos(e))*A*(I=Math.tan(i))*I*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?F=-1:F>1&&(F=1),this.face===t.TOP)n=Math.acos(F),r.phi=a.HALF_PI-n,o.value===s.AREA_0?r.lam=l+a.HALF_PI:o.value===s.AREA_1?r.lam=l<0?l+a.SPI:l-a.SPI:o.value===s.AREA_2?r.lam=l-a.HALF_PI:r.lam=l;else if(this.face===t.BOTTOM)n=Math.acos(F),r.phi=n-a.HALF_PI,o.value===s.AREA_0?r.lam=-l+a.HALF_PI:o.value===s.AREA_1?r.lam=-l:o.value===s.AREA_2?r.lam=-l-a.HALF_PI:r.lam=l<0?-l-a.SPI:-l+a.SPI;else{var T,v,f;R=(T=F)*T,v=(R+=(f=R>=1?0:Math.sqrt(1-R)*Math.sin(l))*f)>=1?0:Math.sqrt(1-R),o.value===s.AREA_1?(R=v,v=-f,f=R):o.value===s.AREA_2?(v=-v,f=-f):o.value===s.AREA_3&&(R=v,v=f,f=-R),this.face===t.RIGHT?(R=T,T=-v,v=R):this.face===t.BACK?(T=-T,v=-v):this.face===t.LEFT&&(R=T,T=v,v=-R),r.phi=Math.acos(-f)-a.HALF_PI,r.lam=Math.atan2(v,T),this.face===t.RIGHT?r.lam=_(r.lam,-a.HALF_PI):this.face===t.BACK?r.lam=_(r.lam,-a.SPI):this.face===t.LEFT&&(r.lam=_(r.lam,+a.HALF_PI))}0!==this.es&&(u=r.phi<0?1:0,M=Math.tan(r.phi),c=this.b/Math.sqrt(M*M+this.one_minus_f_squared),r.phi=Math.atan(Math.sqrt(this.a*this.a-c*c)/(this.one_minus_f*c)),u&&(r.phi=-r.phi));return r.lam+=this.long0,h.x=r.lam,h.y=r.phi,h}function A(t,h,e,i){var A;return t<a.EPSLN?(i.value=s.AREA_0,A=0):(A=Math.atan2(h,e),Math.abs(A)<=a.FORTPI?i.value=s.AREA_0:A>a.FORTPI&&A<=a.HALF_PI+a.FORTPI?(i.value=s.AREA_1,A-=a.HALF_PI):A>a.HALF_PI+a.FORTPI||A<=-(a.HALF_PI+a.FORTPI)?(i.value=s.AREA_2,A=A>=0?A-a.SPI:A+a.SPI):(i.value=s.AREA_3,A+=a.HALF_PI)),A}function _(t,s){var h=t+s;return h<-a.SPI?h+=a.TWO_PI:h>+a.SPI&&(h-=a.TWO_PI),h}var I=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];exports.names=I;var P={init:h,forward:e,inverse:i,names:I};exports.default=P;
},{"../constants/values":"owNJ"}],"BxdI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=v,exports.inverse=c,exports.default=exports.names=void 0;var e=require("../constants/values"),t=r(require("../common/adjust_lon"));function r(e){return e&&e.__esModule?e:{default:e}}var s=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],i=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],n=.8487,o=1.3523,a=e.R2D/5,u=1/a,y=18,f=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},h=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};function x(e,t,r,s){for(var i=t;s;--s){var n=e(i);if(i-=n,Math.abs(n)<r)break}return i}function l(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function v(r){var h=(0,t.default)(r.x-this.long0),x=Math.abs(r.y),l=Math.floor(x*a);l<0?l=0:l>=y&&(l=y-1),x=e.R2D*(x-u*l);var v={x:f(s[l],x)*h,y:f(i[l],x)};return r.y<0&&(v.y=-v.y),v.x=v.x*this.a*n+this.x0,v.y=v.y*this.a*o+this.y0,v}function c(r){var a={x:(r.x-this.x0)/(this.a*n),y:Math.abs(r.y-this.y0)/(this.a*o)};if(a.y>=1)a.x/=s[y][0],a.y=r.y<0?-e.HALF_PI:e.HALF_PI;else{var u=Math.floor(a.y*y);for(u<0?u=0:u>=y&&(u=y-1);;)if(i[u][0]>a.y)--u;else{if(!(i[u+1][0]<=a.y))break;++u}var l=i[u],v=5*(a.y-l[0])/(i[u+1][0]-l[0]);v=x(function(e){return(f(l,e)-a.y)/h(l,e)},v,e.EPSLN,100),a.x/=f(s[u],v),a.y=(5*u+v)*e.D2R,r.y<0&&(a.y=-a.y)}return a.x=(0,t.default)(a.x+this.long0),a}var d=["Robinson","robin"];exports.names=d;var b={init:l,forward:v,inverse:c,names:d};exports.default=b;
},{"../constants/values":"owNJ","../common/adjust_lon":"T5hz"}],"HnKe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=t,exports.forward=r,exports.inverse=o,exports.default=exports.names=void 0;var e=require("../datumUtils");function t(){this.name="geocent"}function r(t){return(0,e.geodeticToGeocentric)(t,this.es,this.a)}function o(t){return(0,e.geocentricToGeodetic)(t,this.es,this.a,this.b)}var i=["Geocentric","geocentric","geocent","Geocent"];exports.names=i;var s={init:t,forward:r,inverse:o,names:i};exports.default=s;
},{"../datumUtils":"zPFS"}],"YvZc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=a,exports.forward=n,exports.inverse=r,exports.default=exports.names=void 0;var s=require("../constants/values"),t=i(require("../common/hypot"));function i(s){return s&&s.__esModule?s:{default:s}}var h={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},e={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function a(){if(Object.keys(e).forEach(function(t){if(void 0===this[t])this[t]=e[t].def;else{if(e[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);e[t].num&&(this[t]=parseFloat(this[t]))}e[t].degrees&&(this[t]=this[t]*s.D2R)}.bind(this)),Math.abs(Math.abs(this.lat0)-s.HALF_PI)<s.EPSLN?this.mode=this.lat0<0?h.S_POLE:h.N_POLE:Math.abs(this.lat0)<s.EPSLN?this.mode=h.EQUIT:(this.mode=h.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,i=this.azi;this.cg=Math.cos(i),this.sg=Math.sin(i),this.cw=Math.cos(t),this.sw=Math.sin(t)}function n(s){s.x-=this.long0;var t,i,e,a,n=Math.sin(s.y),r=Math.cos(s.y),c=Math.cos(s.x);switch(this.mode){case h.OBLIQ:i=this.sinph0*n+this.cosph0*r*c;break;case h.EQUIT:i=r*c;break;case h.S_POLE:i=-n;break;case h.N_POLE:i=n}switch(t=(i=this.pn1/(this.p-i))*r*Math.sin(s.x),this.mode){case h.OBLIQ:i*=this.cosph0*n-this.sinph0*r*c;break;case h.EQUIT:i*=n;break;case h.N_POLE:i*=-r*c;break;case h.S_POLE:i*=r*c}return a=1/((e=i*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-i*this.sg)*this.cw*a,i=e*a,s.x=t*this.a,s.y=i*this.a,s}function r(i){i.x/=this.a,i.y/=this.a;var e,a,n,r={x:i.x,y:i.y};n=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*n,a=this.pn1*i.y*this.cw*n,i.x=e*this.cg+a*this.sg,i.y=a*this.cg-e*this.sg;var c=(0,t.default)(i.x,i.y);if(Math.abs(c)<s.EPSLN)r.x=0,r.y=i.y;else{var o,p;switch(p=1-c*c*this.pfact,p=(this.p-Math.sqrt(p))/(this.pn1/c+c/this.pn1),o=Math.sqrt(1-p*p),this.mode){case h.OBLIQ:r.y=Math.asin(o*this.sinph0+i.y*p*this.cosph0/c),i.y=(o-this.sinph0*Math.sin(r.y))*c,i.x*=p*this.cosph0;break;case h.EQUIT:r.y=Math.asin(i.y*p/c),i.y=o*c,i.x*=p;break;case h.N_POLE:r.y=Math.asin(o),i.y=-i.y;break;case h.S_POLE:r.y=-Math.asin(o)}r.x=Math.atan2(i.x,i.y)}return i.x=r.x+this.long0,i.y=r.y,i}var c=["Tilted_Perspective","tpers"];exports.names=c;var o={init:a,forward:n,inverse:r,names:c};exports.default=o;
},{"../constants/values":"owNJ","../common/hypot":"Nct7"}],"qEDf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=w;var e=O(require("./lib/projections/tmerc")),r=O(require("./lib/projections/etmerc")),o=O(require("./lib/projections/utm")),i=O(require("./lib/projections/sterea")),t=O(require("./lib/projections/stere")),d=O(require("./lib/projections/somerc")),j=O(require("./lib/projections/omerc")),c=O(require("./lib/projections/lcc")),a=O(require("./lib/projections/krovak")),s=O(require("./lib/projections/cass")),l=O(require("./lib/projections/laea")),n=O(require("./lib/projections/aea")),u=O(require("./lib/projections/gnom")),p=O(require("./lib/projections/cea")),f=O(require("./lib/projections/eqc")),q=O(require("./lib/projections/poly")),b=O(require("./lib/projections/nzmg")),P=O(require("./lib/projections/mill")),m=O(require("./lib/projections/sinu")),g=O(require("./lib/projections/moll")),v=O(require("./lib/projections/eqdc")),_=O(require("./lib/projections/vandg")),k=O(require("./lib/projections/aeqd")),x=O(require("./lib/projections/ortho")),y=O(require("./lib/projections/qsc")),M=O(require("./lib/projections/robin")),h=O(require("./lib/projections/geocent")),z=O(require("./lib/projections/tpers"));function O(e){return e&&e.__esModule?e:{default:e}}function w(O){O.Proj.projections.add(e.default),O.Proj.projections.add(r.default),O.Proj.projections.add(o.default),O.Proj.projections.add(i.default),O.Proj.projections.add(t.default),O.Proj.projections.add(d.default),O.Proj.projections.add(j.default),O.Proj.projections.add(c.default),O.Proj.projections.add(a.default),O.Proj.projections.add(s.default),O.Proj.projections.add(l.default),O.Proj.projections.add(n.default),O.Proj.projections.add(u.default),O.Proj.projections.add(p.default),O.Proj.projections.add(f.default),O.Proj.projections.add(q.default),O.Proj.projections.add(b.default),O.Proj.projections.add(P.default),O.Proj.projections.add(m.default),O.Proj.projections.add(g.default),O.Proj.projections.add(v.default),O.Proj.projections.add(_.default),O.Proj.projections.add(k.default),O.Proj.projections.add(x.default),O.Proj.projections.add(y.default),O.Proj.projections.add(M.default),O.Proj.projections.add(h.default),O.Proj.projections.add(z.default)}
},{"./lib/projections/tmerc":"uIJj","./lib/projections/etmerc":"wysp","./lib/projections/utm":"qXju","./lib/projections/sterea":"gnV7","./lib/projections/stere":"CNLc","./lib/projections/somerc":"FNfm","./lib/projections/omerc":"EV03","./lib/projections/lcc":"zkFZ","./lib/projections/krovak":"UYX4","./lib/projections/cass":"Fu16","./lib/projections/laea":"z1ug","./lib/projections/aea":"s4O2","./lib/projections/gnom":"Lqe0","./lib/projections/cea":"G0HQ","./lib/projections/eqc":"Ttan","./lib/projections/poly":"fJpe","./lib/projections/nzmg":"heJN","./lib/projections/mill":"cBC4","./lib/projections/sinu":"LhcO","./lib/projections/moll":"lOKC","./lib/projections/eqdc":"kjt9","./lib/projections/vandg":"uu2Q","./lib/projections/aeqd":"mpZo","./lib/projections/ortho":"O1Op","./lib/projections/qsc":"SUMe","./lib/projections/robin":"BxdI","./lib/projections/geocent":"HnKe","./lib/projections/tpers":"YvZc"}],"sW4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./core")),t=i(require("./Proj")),r=i(require("./Point")),u=i(require("./common/toPoint")),d=i(require("./defs")),a=i(require("./nadgrid")),f=i(require("./transform")),l=i(require("mgrs")),o=i(require("../projs"));function i(e){return e&&e.__esModule?e:{default:e}}e.default.defaultDatum="WGS84",e.default.Proj=t.default,e.default.WGS84=new e.default.Proj("WGS84"),e.default.Point=r.default,e.default.toPoint=u.default,e.default.defs=d.default,e.default.nadgrid=a.default,e.default.transform=f.default,e.default.mgrs=l.default,e.default.version="__VERSION__",(0,o.default)(e.default);var n=e.default;exports.default=n;
},{"./core":"NaC1","./Proj":"udcm","./Point":"vuyI","./common/toPoint":"ulMQ","./defs":"HaD1","./nadgrid":"QTcc","./transform":"ngyS","mgrs":"Of98","../projs":"qEDf"}],"thji":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=i;var e=o(require("./Projection.js")),r=o(require("./Units.js")),t=require("../proj.js"),s=require("../obj.js"),a=require("./transforms.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(o){var i,n,d=Object.keys(o.defs),f=d.length;for(i=0;i<f;++i){var u=d[i];if(!(0,t.get)(u)){var j=o.defs(u),v=j.units;v||"longlat"!==j.projName||(v=r.default.DEGREES),(0,t.addProjection)(new e.default({code:u,axisOrientation:j.axis,metersPerUnit:j.to_meter,units:v}))}}for(i=0;i<f;++i){var c=d[i],l=(0,t.get)(c);for(n=0;n<f;++n){var g=d[n],m=(0,t.get)(g);if(!(0,a.get)(c,g)){var q=o.defs(c),x=o.defs(g);if(q===x)(0,t.addEquivalentProjections)([l,m]);else{var p=o((0,s.assign)({},q,{axis:void 0}),(0,s.assign)({},x,{axis:void 0}));(0,t.addCoordinateTransforms)(l,m,(0,t.createSafeCoordinateTransform)(l,m,p.forward),(0,t.createSafeCoordinateTransform)(m,l,p.inverse))}}}}}
},{"./Projection.js":"xIXc","./Units.js":"IrdK","../proj.js":"bkYg","../obj.js":"lPyT","./transforms.js":"zFpU"}],"huS9":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var i in r)"default"!==i&&Object.hasOwnProperty.call(r,i)&&e(n,r,i);return t(n,r),n},n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OLViewer=exports.IGN_STYLES=void 0,require("ol/ol.css");var o,a=s(require("ol/Map")),l=s(require("ol/layer/VectorTile")),u=s(require("ol/source/VectorTile")),c=s(require("ol/View")),p=require("ol/tilegrid"),d=s(require("ol/format/MVT")),f=r(require("ol-mapbox-style")),h=s(require("ol/Feature")),m=s(require("proj4")),y=require("ol/proj/proj4");m.default.defs("EPSG:2154","+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),y.register(m.default),function(e){e.PLAN="PLAN",e.GRIS="GRIS",e.MUET="MUET",e.TONER="TONER"}(o=exports.IGN_STYLES||(exports.IGN_STYLES={}));var v=new Map;v.set(o.PLAN,"https://wxs.ign.fr/choisirgeoportail/static/vectorTiles/styles/PLAN.IGN/standard.json"),v.set(o.GRIS,"https://wxs.ign.fr/choisirgeoportail/static/vectorTiles/styles/PLAN.IGN/gris.json"),v.set(o.MUET,"https://wxs.ign.fr/choisirgeoportail/static/vectorTiles/styles/PLAN.IGN/sans_toponymes.json");var g=function(){function e(e,t,r,n,i,s){this.domElementsForLayers=new Map,this.endBaseRenderListeners=[],this.texturesListeners=[],this.endAllListeners=[],this.createBaseMapElement("olviewer",e,t,s,r,n,i)}return e.prototype.createBaseMapElement=function(e,t,r,s,o,a,l){return n(this,void 0,void 0,function(){var n,u,c,p,f,m;return i(this,function(i){switch(i.label){case 0:return n=this.createMapElement(e,t,r,s,o,a,new d.default({featureClass:h.default})),this.layer=n.layer,this.domElement=n.domElement,this.map=n.map,[4,this.applyStylePromise(l[0],this.map,this.layer,this.domElement)];case 1:for(u=i.sent(),c=0,p=this.endBaseRenderListeners;c<p.length;c++)(0,p[c])(u.canvas,u.domElement,l[0]);return[4,this.createMapTextures(t,r,s,o,a,l)];case 2:for(i.sent(),f=0,m=this.endAllListeners;f<m.length;f++)(0,m[f])();return[2]}})})},e.prototype.createMapTextures=function(e,t,r,s,o,a){return n(this,void 0,void 0,function(){var n,l,u,c,p;return i(this,function(i){switch(i.label){case 0:n=1,i.label=1;case 1:return n<a.length?(l=this.createMapElement("secondary"+n,e,t,r,s,o,new d.default),[4,this.applyStylePromise(a[n],l.map,l.layer,l.domElement)]):[3,4];case 2:for(u=i.sent(),c=0,p=this.texturesListeners;c<p.length;c++)(0,p[c])(a[n],u.canvas);console.log("result promise",u),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.createMapElement=function(e,t,r,n,i,s,o){var d=document.body.appendChild(document.createElement("div"));d.setAttribute("id",e),document.getElementById(e).style.visibility="hidden",document.getElementById(e).style.width=t*n+"px",document.getElementById(e).style.height=r*n+"px";var f=new a.default({layers:[],target:e,view:new c.default({center:i,zoom:s})});return{domElement:d,layer:new l.default({title:"Plan IGN vecteur",source:new u.default({tilePixelRatio:1,tileGrid:p.createXYZ({maxZoom:21}),format:o,url:"https://wxs.ign.fr/choisirgeoportail/geoportail/tms/1.0.0/PLAN.IGN/{z}/{x}/{y}.pbf"}),minResolution:0,maxResolution:2e5,declutter:!0}),map:f}},e.prototype.applyStylePromise=function(e,t,r,s){return n(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return n=v.get(e),[4,fetch(n)];case 1:return[4,i.sent().json()];case 2:return o=i.sent(),[4,f.applyStyle(r,o,"plan_ign")];case 3:return i.sent(),t.getLayers().getArray().includes(r)||t.addLayer(r),[2,this.createEndEventPromise(t,r,s)]}})})},e.prototype.addEndBaseListener=function(e){this.endBaseRenderListeners.push(e)},e.prototype.addTexturesListener=function(e){this.texturesListeners.push(e)},e.prototype.addEndAllListener=function(e){this.endAllListeners.push(e)},e.prototype.createEndEventPromise=function(e,t,r){return new Promise(function(n,i){var s=!1,o=null;e.on("rendercomplete",function(i){s=!s,null!=o&&clearTimeout(o),o=setTimeout(function(){s&&n({map:e,layer:t,canvas:r.getElementsByTagName("canvas")[0],domElement:r})},500)}),t.on("prerender",function(e){s=!1})})},e}();exports.OLViewer=g;
},{"ol/ol.css":"zNor","ol/Map":"Xu49","ol/layer/VectorTile":"o5wK","ol/source/VectorTile":"LtzO","ol/View":"OW7R","ol/tilegrid":"zlz6","ol/format/MVT":"o3S5","ol-mapbox-style":"qZgk","ol/Feature":"cEtg","proj4":"sW4w","ol/proj/proj4":"thji"}],"rH1J":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"CM2Q":[function(require,module,exports) {
var process = require("process");
var t=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.update=exports.removeAll=exports.remove=exports.now=exports.nextId=exports.getAll=exports.add=exports.VERSION=exports.Tween=exports.Sequence=exports.Interpolation=exports.Group=exports.Easing=exports.default=void 0;var e,i={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Bounce.In(2*t):.5*i.Bounce.Out(2*t-1)+.5}}};exports.Easing=i;var n=e="undefined"==typeof self&&void 0!==t&&t.hrtime?function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};exports.now=n;var r=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(e){return t._tweens[e]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=n()),void 0===e&&(e=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var s=this._tweens[i[r]],o=!e;s&&!1===s.update(t,o)&&!e&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}();exports.Group=r;var s={Linear:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),o=s.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[i],t[i-1],i-n):o(t[r],t[r+1>i?i:r+1],n-r)},Bezier:function(t,e){for(var i=0,n=t.length-1,r=Math.pow,o=s.Utils.Bernstein,a=0;a<=n;a++)i+=r(1-e,n-a)*r(e,a)*t[a]*o(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),o=s.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(r=Math.floor(n=i*(1+e))),o(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],n-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):o(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],n-r)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=s.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var i=1;if(t[e])return t[e];for(var n=e;n>1;n--)i*=n;return t[e]=i,i}}(),CatmullRom:function(t,e,i,n,r){var s=.5*(i-t),o=.5*(n-e),a=r*r;return(2*e-2*i+s+o)*(r*a)+(-3*e+3*i-2*s-o)*a+s*r+e}}};exports.Interpolation=s;var o=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}();exports.Sequence=o;var a=new r,u=function(){function t(t,e){void 0===e&&(e=a),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=o.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?n()+parseFloat(t):t:n(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,i,n){for(var r in i){var s=t[r],o=Array.isArray(s),a=o?"array":typeof s,u=!o&&Array.isArray(i[r]);if("undefined"!==a&&"function"!==a){if(u){var h=i[r];if(0===h.length)continue;h=h.map(this._handleRelativeValue.bind(this,s)),i[r]=[s].concat(h)}if("object"!==a&&!o||!s||u)void 0===e[r]&&(e[r]=s),o||(e[r]*=1),n[r]=u?i[r].slice().reverse():e[r]||0;else{for(var p in e[r]=o?[]:{},s)e[r][p]=s[p];n[r]=o?[]:{},this._setupProperties(s,e[r],i[r],n[r])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=n()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},t.prototype.resume=function(t){return void 0===t&&(t=n()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=n()),void 0===e&&(e=!0),this._isPaused)return!0;var i,r,s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>s)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,u=this._chainedTweens.length;a<u;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,i,n){for(var r in i)if(void 0!==e[r]){var s=e[r]||0,o=i[r],a=Array.isArray(t[r]),u=Array.isArray(o);!a&&u?t[r]=this._interpolationFunction(o,n):"object"==typeof o&&o?this._updateProperties(t[r],s,o,n):"number"==typeof(o=this._handleRelativeValue(s,o))&&(t[r]=s+(o-s)*n)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],i=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof i?this._valuesStartRepeat[t]+parseFloat(i):this._valuesEnd[t],this._valuesEnd[t]=e},t}();exports.Tween=u;var h="18.6.4";exports.VERSION=h;var p=o.nextId;exports.nextId=p;var _=a,l=_.getAll.bind(_);exports.getAll=l;var d=_.removeAll.bind(_);exports.removeAll=d;var c=_.add.bind(_);exports.add=c;var f=_.remove.bind(_);exports.remove=f;var v=_.update.bind(_);exports.update=v;var y={Easing:i,Group:r,Interpolation:s,now:n,Sequence:o,nextId:p,Tween:u,VERSION:h,getAll:l,removeAll:d,add:c,remove:f,update:v},g=y;exports.default=g;
},{"process":"rH1J"}],"I82Z":[function(require,module,exports) {
"use strict";function t(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function e(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.extend=e;
},{}],"VvvF":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=n,exports.default=k,exports.rgbConvert=M,exports.rgb=N,exports.Rgb=O,exports.hslConvert=P,exports.hsl=$,exports.brighter=exports.darker=void 0;var e=r(require("./define.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function n(){}var i=.7;exports.darker=i;var a=1/i;exports.brighter=a;var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),g=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),c=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),f=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function m(){return P(this).formatHsl()}function w(){return this.rgb().formatRgb()}function k(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=h.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?x(t):3===r?new O(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?v(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?v(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=u.exec(e))?new O(t[1],t[2],t[3],1):(t=g.exec(e))?new O(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=c.exec(e))?v(t[1],t[2],t[3],t[4]):(t=d.exec(e))?v(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=f.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):b.hasOwnProperty(e)?x(b[e]):"transparent"===e?new O(NaN,NaN,NaN,0):null}function x(e){return new O(e>>16&255,e>>8&255,255&e,1)}function v(e,t,r,n){return n<=0&&(e=t=r=NaN),new O(e,t,r,n)}function M(e){return e instanceof n||(e=k(e)),e?new O((e=e.rgb()).r,e.g,e.b,e.opacity):new O}function N(e,t,r,n){return 1===arguments.length?M(e):new O(e,t,r,null==n?1:n)}function O(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function j(){return"#"+R(this.r)+R(this.g)+R(this.b)}function q(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function R(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new H(e,t,r,n)}function P(e){if(e instanceof H)return new H(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=k(e)),!e)return new H;if(e instanceof H)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),o=Math.max(t,r,i),s=NaN,l=o-a,h=(o+a)/2;return l?(s=t===o?(r-i)/l+6*(r<i):r===o?(i-t)/l+2:(t-r)/l+4,l/=h<.5?o+a:2-o-a,s*=60):l=h>0&&h<1?0:s,new H(s,l,h,e.opacity)}function $(e,t,r,n){return 1===arguments.length?P(e):new H(e,t,r,null==n?1:n)}function H(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function C(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}(0,e.default)(n,k,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:m,formatRgb:w,toString:w}),(0,e.default)(O,N,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:q,toString:q})),(0,e.default)(H,$,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new H(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new H(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new O(C(e>=240?e-240:e+120,i,n),C(e,i,n),C(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));
},{"./define.js":"I82Z"}],"Ip0L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rad2deg=exports.deg2rad=void 0;var e=Math.PI/180;exports.deg2rad=e;var r=180/Math.PI;exports.rad2deg=r;
},{}],"u9JU":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gray=b,exports.default=y,exports.Lab=w,exports.lch=N,exports.hcl=x,exports.Hcl=O;var t=i(require("./define.js")),n=require("./color.js"),e=require("./math.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var e={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=i?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(e,o,u):e[o]=t[o]}return e.default=t,n&&n.set(t,e),e}var o=18,u=.96422,a=1,c=.82521,s=4/29,l=6/29,h=3*l*l,f=l*l*l;function p(t){if(t instanceof w)return new w(t.l,t.a,t.b,t.opacity);if(t instanceof O)return P(t);t instanceof n.Rgb||(t=(0,n.rgbConvert)(t));var e,r,i=M(t.r),o=M(t.g),s=M(t.b),l=d((.2225045*i+.7168786*o+.0606169*s)/a);return i===o&&o===s?e=r=l:(e=d((.4360747*i+.3850649*o+.1430804*s)/u),r=d((.0139322*i+.0971045*o+.7141733*s)/c)),new w(116*l-16,500*(e-l),200*(l-r),t.opacity)}function b(t,n){return new w(t,0,0,null==n?1:n)}function y(t,n,e,r){return 1===arguments.length?p(t):new w(t,n,e,null==r?1:r)}function w(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function d(t){return t>f?Math.pow(t,1/3):t/h+s}function g(t){return t>l?t*t*t:h*(t-s)}function v(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function M(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function j(t){if(t instanceof O)return new O(t.h,t.c,t.l,t.opacity);if(t instanceof w||(t=p(t)),0===t.a&&0===t.b)return new O(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*e.rad2deg;return new O(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function N(t,n,e,r){return 1===arguments.length?j(t):new O(e,n,t,null==r?1:r)}function x(t,n,e,r){return 1===arguments.length?j(t):new O(t,n,e,null==r?1:r)}function O(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function P(t){if(isNaN(t.h))return new w(t.l,0,0,t.opacity);var n=t.h*e.deg2rad;return new w(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}(0,t.default)(w,y,(0,t.extend)(n.Color,{brighter:function(t){return new w(this.l+o*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new w(this.l-o*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return e=u*g(e),t=a*g(t),r=c*g(r),new n.Rgb(v(3.1338561*e-1.6168667*t-.4906146*r),v(-.9787684*e+1.9161415*t+.033454*r),v(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),(0,t.default)(O,x,(0,t.extend)(n.Color,{brighter:function(t){return new O(this.h,this.c,this.l+o*(null==t?1:t),this.opacity)},darker:function(t){return new O(this.h,this.c,this.l-o*(null==t?1:t),this.opacity)},rgb:function(){return P(this).rgb()}}));
},{"./define.js":"I82Z","./color.js":"VvvF","./math.js":"Ip0L"}],"jmkd":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d,exports.Cubehelix=b;var t=i(require("./define.js")),e=require("./color.js"),r=require("./math.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}var o=-.14861,s=1.78277,a=-.29227,u=-.90649,h=1.97294,c=h*u,f=h*s,l=s*a-u*o;function p(t){if(t instanceof b)return new b(t.h,t.s,t.l,t.opacity);t instanceof e.Rgb||(t=(0,e.rgbConvert)(t));var n=t.r/255,i=t.g/255,o=t.b/255,s=(l*o+c*n-f*i)/(l+c-f),p=o-s,d=(h*(i-s)-a*p)/u,y=Math.sqrt(d*d+p*p)/(h*s*(1-s)),g=y?Math.atan2(d,p)*r.rad2deg-120:NaN;return new b(g<0?g+360:g,y,s,t.opacity)}function d(t,e,r,n){return 1===arguments.length?p(t):new b(t,e,r,null==n?1:n)}function b(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}(0,t.default)(b,d,(0,t.extend)(e.Color,{brighter:function(t){return t=null==t?e.brighter:Math.pow(e.brighter,t),new b(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?e.darker:Math.pow(e.darker,t),new b(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*r.deg2rad,n=+this.l,i=isNaN(this.s)?0:this.s*n*(1-n),c=Math.cos(t),f=Math.sin(t);return new e.Rgb(255*(n+i*(o*c+s*f)),255*(n+i*(a*c+u*f)),255*(n+i*(h*c)),this.opacity)}}));
},{"./define.js":"I82Z","./color.js":"VvvF","./math.js":"Ip0L"}],"x3do":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"color",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"rgb",{enumerable:!0,get:function(){return e.rgb}}),Object.defineProperty(exports,"hsl",{enumerable:!0,get:function(){return e.hsl}}),Object.defineProperty(exports,"lab",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"hcl",{enumerable:!0,get:function(){return r.hcl}}),Object.defineProperty(exports,"lch",{enumerable:!0,get:function(){return r.lch}}),Object.defineProperty(exports,"gray",{enumerable:!0,get:function(){return r.gray}}),Object.defineProperty(exports,"cubehelix",{enumerable:!0,get:function(){return t.default}});var e=o(require("./color.js")),r=o(require("./lab.js")),t=n(require("./cubehelix.js"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=n?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(t,o,c):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./color.js":"VvvF","./lab.js":"u9JU","./cubehelix.js":"jmkd"}],"kM48":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){var u=e*e,s=u*e;return((1-3*e+3*u-s)*r+(4-6*u+3*s)*t+(1+3*e+3*u-3*s)*n+s*o)/6}function r(r){var t=r.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),u=r[o],s=r[o+1],a=o>0?r[o-1]:2*u-s,f=o<t-1?r[o+2]:2*s-u;return e((n-o/t)*t,a,u,s,f)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.basis=e,exports.default=r;
},{}],"I8m6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./basis.js");function r(r){var t=r.length;return function(s){var u=Math.floor(((s%=1)<0?++s:s)*t),a=r[(u+t-1)%t],n=r[u%t],o=r[(u+1)%t],i=r[(u+2)%t];return(0,e.basis)((s-u/t)*t,a,n,o,i)}}
},{"./basis.js":"kM48"}],"u0FZ":[function(require,module,exports) {
"use strict";function e(e){return function(){return e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"y6MQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hue=u,exports.gamma=o,exports.default=a;var t=e(require("./constant.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return function(n){return t+n*e}}function r(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function u(e,r){var u=r-e;return u?n(e,u>180||u<-180?u-360*Math.round(u/360):u):(0,t.default)(isNaN(e)?r:e)}function o(e){return 1==(e=+e)?a:function(n,u){return u-n?r(n,u,e):(0,t.default)(isNaN(n)?u:n)}}function a(e,r){var u=r-e;return u?n(e,u):(0,t.default)(isNaN(e)?r:e)}
},{"./constant.js":"u0FZ"}],"uEB8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbBasisClosed=exports.rgbBasis=exports.default=void 0;var r=require("d3-color"),e=a(require("./basis.js")),t=a(require("./basisClosed.js")),n=u(require("./color.js"));function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function u(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var a=n?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,e&&e.set(r,t),t}function a(r){return r&&r.__esModule?r:{default:r}}var i=function e(t){var o=(0,n.gamma)(t);function u(e,t){var u=o((e=(0,r.rgb)(e)).r,(t=(0,r.rgb)(t)).r),a=o(e.g,t.g),i=o(e.b,t.b),s=(0,n.default)(e.opacity,t.opacity);return function(r){return e.r=u(r),e.g=a(r),e.b=i(r),e.opacity=s(r),e+""}}return u.gamma=e,u}(1);function s(e){return function(t){var n,o,u=t.length,a=new Array(u),i=new Array(u),s=new Array(u);for(n=0;n<u;++n)o=(0,r.rgb)(t[n]),a[n]=o.r||0,i[n]=o.g||0,s[n]=o.b||0;return a=e(a),i=e(i),s=e(s),o.opacity=1,function(r){return o.r=a(r),o.g=i(r),o.b=s(r),o+""}}}exports.default=i;var f=s(e.default);exports.rgbBasis=f;var c=s(t.default);exports.rgbBasisClosed=c;
},{"d3-color":"x3do","./basis.js":"kM48","./basisClosed.js":"I8m6","./color.js":"y6MQ"}],"sB4t":[function(require,module,exports) {
"use strict";function e(e,r){r||(r=[]);var t,n=e?Math.min(r.length,e.length):0,i=r.slice();return function(u){for(t=0;t<n;++t)i[t]=e[t]*(1-u)+r[t]*u;return i}}function r(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.isNumberArray=r;
},{}],"ZCGf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.genericArray=f;var e=u(require("./value.js")),r=n(require("./numberArray.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var f=u?Object.getOwnPropertyDescriptor(e,o):null;f&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return((0,r.isNumberArray)(t)?r.default:f)(e,t)}function f(r,t){var n,u=t?t.length:0,o=r?Math.min(u,r.length):0,f=new Array(o),a=new Array(u);for(n=0;n<o;++n)f[n]=(0,e.default)(r[n],t[n]);for(;n<u;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=f[n](e);return a}}
},{"./value.js":"sR72","./numberArray.js":"sB4t"}],"PFUW":[function(require,module,exports) {
"use strict";function e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aNyh":[function(require,module,exports) {
"use strict";function e(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"oqfw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./value.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u,n={},o={};for(u in null!==t&&"object"==typeof t||(t={}),null!==r&&"object"==typeof r||(r={}),r)u in t?n[u]=(0,e.default)(t[u],r[u]):o[u]=r[u];return function(e){for(u in n)o[u]=n[u](e);return o}}
},{"./value.js":"sR72"}],"Brer":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=n(require("./number.js"));function n(e){return e&&e.__esModule?e:{default:e}}var r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t=new RegExp(r.source,"g");function u(e){return function(){return e}}function i(e){return function(n){return e(n)+""}}function l(n,l){var o,c,d,s=r.lastIndex=t.lastIndex=0,f=-1,x=[],a=[];for(n+="",l+="";(o=r.exec(n))&&(c=t.exec(l));)(d=c.index)>s&&(d=l.slice(s,d),x[f]?x[f]+=d:x[++f]=d),(o=o[0])===(c=c[0])?x[f]?x[f]+=c:x[++f]=c:(x[++f]=null,a.push({i:f,x:(0,e.default)(o,c)})),s=t.lastIndex;return s<l.length&&(d=l.slice(s),x[f]?x[f]+=d:x[++f]=d),x.length<2?a[0]?i(a[0].x):u(l):(l=a.length,function(e){for(var n,r=0;r<l;++r)x[(n=a[r]).i]=n.x(e);return x.join("")})}
},{"./number.js":"aNyh"}],"sR72":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("d3-color"),r=c(require("./rgb.js")),t=require("./array.js"),u=c(require("./date.js")),n=c(require("./number.js")),o=c(require("./object.js")),a=c(require("./string.js")),f=c(require("./constant.js")),i=s(require("./numberArray.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function c(e){return e&&e.__esModule?e:{default:e}}function d(l,s){var c,d=typeof s;return null==s||"boolean"===d?(0,f.default)(s):("number"===d?n.default:"string"===d?(c=(0,e.color)(s))?(s=c,r.default):a.default:s instanceof e.color?r.default:s instanceof Date?u.default:(0,i.isNumberArray)(s)?i.default:Array.isArray(s)?t.genericArray:"function"!=typeof s.valueOf&&"function"!=typeof s.toString||isNaN(s)?o.default:n.default)(l,s)}
},{"d3-color":"x3do","./rgb.js":"uEB8","./array.js":"ZCGf","./date.js":"PFUW","./number.js":"aNyh","./object.js":"oqfw","./string.js":"Brer","./constant.js":"u0FZ","./numberArray.js":"sB4t"}],"Erca":[function(require,module,exports) {
"use strict";function t(t){var e=t.length;return function(r){return t[Math.max(0,Math.min(e-1,Math.floor(r*e)))]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"YmNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./color.js");function r(r,t){var o=(0,e.hue)(+r,+t);return function(e){var r=o(e);return r-360*Math.floor(r/360)}}
},{"./color.js":"y6MQ"}],"OHSM":[function(require,module,exports) {
"use strict";function e(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"k89d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.identity=void 0;var t=180/Math.PI,e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a(e,a,r,s,n,l){var o,i,c;return(o=Math.sqrt(e*e+a*a))&&(e/=o,a/=o),(c=e*r+a*s)&&(r-=e*c,s-=a*c),(i=Math.sqrt(r*r+s*s))&&(r/=i,s/=i,c/=i),e*s<a*r&&(e=-e,a=-a,c=-c,o=-o),{translateX:n,translateY:l,rotate:Math.atan2(a,e)*t,skewX:Math.atan(c)*t,scaleX:o,scaleY:i}}exports.identity=e;
},{}],"fUUu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseCss=i,exports.parseSvg=l;var e,t,r,n,o=a(require("./decompose.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(n){return"none"===n?o.identity:(e||(e=document.createElement("DIV"),t=document.documentElement,r=document.defaultView),e.style.transform=n,n=r.getComputedStyle(t.appendChild(e),null).getPropertyValue("transform"),t.removeChild(e),n=n.slice(7,-1).split(","),(0,o.default)(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}function l(e){return null==e?o.identity:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,(0,o.default)(e.a,e.b,e.c,e.d,e.e,e.f)):o.identity)}
},{"./decompose.js":"k89d"}],"tkkQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolateTransformSvg=exports.interpolateTransformCss=void 0;var e=r(require("../number.js")),t=require("./parse.js");function r(e){return e&&e.__esModule?e:{default:e}}function s(t,r,s,n){function a(e){return e.length?e.pop()+" ":""}return function(u,l){var o=[],p=[];return u=t(u),l=t(l),function(t,n,a,u,l,o){if(t!==a||n!==u){var p=l.push("translate(",null,r,null,s);o.push({i:p-4,x:(0,e.default)(t,a)},{i:p-2,x:(0,e.default)(n,u)})}else(a||u)&&l.push("translate("+a+r+u+s)}(u.translateX,u.translateY,l.translateX,l.translateY,o,p),function(t,r,s,u){t!==r?(t-r>180?r+=360:r-t>180&&(t+=360),u.push({i:s.push(a(s)+"rotate(",null,n)-2,x:(0,e.default)(t,r)})):r&&s.push(a(s)+"rotate("+r+n)}(u.rotate,l.rotate,o,p),function(t,r,s,u){t!==r?u.push({i:s.push(a(s)+"skewX(",null,n)-2,x:(0,e.default)(t,r)}):r&&s.push(a(s)+"skewX("+r+n)}(u.skewX,l.skewX,o,p),function(t,r,s,n,u,l){if(t!==s||r!==n){var o=u.push(a(u)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,e.default)(t,s)},{i:o-2,x:(0,e.default)(r,n)})}else 1===s&&1===n||u.push(a(u)+"scale("+s+","+n+")")}(u.scaleX,u.scaleY,l.scaleX,l.scaleY,o,p),u=l=null,function(e){for(var t,r=-1,s=p.length;++r<s;)o[(t=p[r]).i]=t.x(e);return o.join("")}}}var n=s(t.parseCss,"px, ","px)","deg)");exports.interpolateTransformCss=n;var a=s(t.parseSvg,", ",")",")");exports.interpolateTransformSvg=a;
},{"../number.js":"aNyh","./parse.js":"fUUu"}],"dKmK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=M;var t=Math.SQRT2,e=2,r=4,n=1e-12;function a(t){return((t=Math.exp(t))+1/t)/2}function u(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}function M(M,h){var i,f,s=M[0],c=M[1],l=M[2],p=h[0],x=h[1],v=h[2],d=p-s,g=x-c,q=d*d+g*g;if(q<n)f=Math.log(v/l)/t,i=function(e){return[s+e*d,c+e*g,l*Math.exp(t*e*f)]};else{var _=Math.sqrt(q),b=(v*v-l*l+r*q)/(2*l*e*_),j=(v*v-l*l-r*q)/(2*v*e*_),y=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(j*j+1)-j);f=(O-y)/t,i=function(r){var n=r*f,M=a(y),h=l/(e*_)*(M*o(t*n+y)-u(y));return[s+h*d,c+h*g,l*M/a(t*n+y)]}}return i.duration=1e3*f,i}
},{}],"RzWG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hslLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hsl)(o)).h,(n=(0,e.hsl)(n)).h),a=(0,t.default)(o.s,n.s),f=(0,t.default)(o.l,n.l),l=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.s=a(e),o.l=f(e),o.opacity=l(e),o+""}}}var u=n(t.hue);exports.default=u;var a=n(t.default);exports.hslLong=a;
},{"d3-color":"x3do","./color.js":"y6MQ"}],"lMlk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("d3-color"),t=r(require("./color.js"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){var a=(0,t.default)((r=(0,e.lab)(r)).l,(u=(0,e.lab)(u)).l),l=(0,t.default)(r.a,u.a),o=(0,t.default)(r.b,u.b),c=(0,t.default)(r.opacity,u.opacity);return function(e){return r.l=a(e),r.a=l(e),r.b=o(e),r.opacity=c(e),r+""}}
},{"d3-color":"x3do","./color.js":"y6MQ"}],"csIY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hclLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=n?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hcl)(o)).h,(n=(0,e.hcl)(n)).h),c=(0,t.default)(o.c,n.c),a=(0,t.default)(o.l,n.l),f=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.c=c(e),o.l=a(e),o.opacity=f(e),o+""}}}var u=n(t.hue);exports.default=u;var c=n(t.default);exports.hclLong=c;
},{"d3-color":"x3do","./color.js":"y6MQ"}],"F9uV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubehelixLong=exports.default=void 0;var e=require("d3-color"),t=n(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(r){return function n(o){function u(n,u){var a=r((n=(0,e.cubehelix)(n)).h,(u=(0,e.cubehelix)(u)).h),i=(0,t.default)(n.s,u.s),c=(0,t.default)(n.l,u.l),f=(0,t.default)(n.opacity,u.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=c(Math.pow(e,o)),n.opacity=f(e),n+""}}return o=+o,u.gamma=n,u}(1)}var u=o(t.hue);exports.default=u;var a=o(t.default);exports.cubehelixLong=a;
},{"d3-color":"x3do","./color.js":"y6MQ"}],"wh72":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0,n=r.length-1,a=r[0],o=new Array(n<0?0:n);t<n;)o[t]=e(a,a=r[++t]);return function(e){var r=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[r](e-r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Edvl":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e(o/(r-1));return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"y8gx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"interpolate",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"interpolateArray",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"interpolateBasis",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interpolateBasisClosed",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"interpolateDate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"interpolateDiscrete",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"interpolateHue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"interpolateNumber",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"interpolateNumberArray",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"interpolateObject",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"interpolateRound",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"interpolateString",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"interpolateTransformCss",{enumerable:!0,get:function(){return c.interpolateTransformCss}}),Object.defineProperty(exports,"interpolateTransformSvg",{enumerable:!0,get:function(){return c.interpolateTransformSvg}}),Object.defineProperty(exports,"interpolateZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"interpolateRgb",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"interpolateRgbBasis",{enumerable:!0,get:function(){return d.rgbBasis}}),Object.defineProperty(exports,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return d.rgbBasisClosed}}),Object.defineProperty(exports,"interpolateHsl",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"interpolateHslLong",{enumerable:!0,get:function(){return j.hslLong}}),Object.defineProperty(exports,"interpolateLab",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"interpolateHcl",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"interpolateHclLong",{enumerable:!0,get:function(){return y.hclLong}}),Object.defineProperty(exports,"interpolateCubehelix",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"interpolateCubehelixLong",{enumerable:!0,get:function(){return m.cubehelixLong}}),Object.defineProperty(exports,"piecewise",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return x.default}});var e=h(require("./value.js")),r=h(require("./array.js")),t=h(require("./basis.js")),n=h(require("./basisClosed.js")),u=h(require("./date.js")),o=h(require("./discrete.js")),i=h(require("./hue.js")),a=h(require("./number.js")),l=h(require("./numberArray.js")),f=h(require("./object.js")),p=h(require("./round.js")),s=h(require("./string.js")),c=require("./transform/index.js"),b=h(require("./zoom.js")),d=q(require("./rgb.js")),j=q(require("./hsl.js")),g=h(require("./lab.js")),y=q(require("./hcl.js")),m=q(require("./cubehelix.js")),O=h(require("./piecewise.js")),x=h(require("./quantize.js"));function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function q(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(t,u,o):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function h(e){return e&&e.__esModule?e:{default:e}}
},{"./value.js":"sR72","./array.js":"ZCGf","./basis.js":"kM48","./basisClosed.js":"I8m6","./date.js":"PFUW","./discrete.js":"Erca","./hue.js":"YmNE","./number.js":"aNyh","./numberArray.js":"sB4t","./object.js":"oqfw","./round.js":"OHSM","./string.js":"Brer","./transform/index.js":"tkkQ","./zoom.js":"dKmK","./rgb.js":"uEB8","./hsl.js":"RzWG","./lab.js":"lMlk","./hcl.js":"csIY","./cubehelix.js":"F9uV","./piecewise.js":"wh72","./quantize.js":"Edvl"}],"kXfm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dependencies=exports.devDependencies=exports.scripts=exports.files=exports.repository=exports.module=exports.jsdelivr=exports.unpkg=exports.main=exports.author=exports.license=exports.homepage=exports.keywords=exports.description=exports.version=exports.name=void 0;var e="d3";exports.name=e;var s="5.16.0";exports.version=s;var t="Data-Driven Documents";exports.description=t;var d=["dom","visualization","svg","animation","canvas"];exports.keywords=d;var r="https://d3js.org";exports.homepage=r;var o="BSD-3-Clause";exports.license=o;var i={name:"Mike Bostock",url:"https://bost.ocks.org/mike"};exports.author=i;var p="dist/d3.node.js";exports.main=p;var a="dist/d3.min.js";exports.unpkg=a;var n="dist/d3.min.js";exports.jsdelivr=n;var m="index.js";exports.module=m;var c={type:"git",url:"https://github.com/d3/d3.git"};exports.repository=c;var l=["dist/**/*.js","index.js"];exports.files=l;var v={pretest:"rimraf dist && mkdir dist && json2module package.json > dist/package.js && rollup -c",test:"tape 'test/**/*-test.js'",prepublishOnly:"yarn test",postpublish:'git push && git push --tags && cd ../d3.github.com && git pull && cp ../d3/dist/d3.js d3.v5.js && cp ../d3/dist/d3.min.js d3.v5.min.js && git add d3.v5.js d3.v5.min.js && git commit -m "d3 ${npm_package_version}" && git push && cd - && cd ../d3-bower && git pull && cp ../d3/LICENSE ../d3/README.md ../d3/dist/d3.js ../d3/dist/d3.min.js . && git add -- LICENSE README.md d3.js d3.min.js && git commit -m "${npm_package_version}" && git tag -am "${npm_package_version}" v${npm_package_version} && git push && git push --tags && cd - && zip -j dist/d3.zip -- LICENSE README.md API.md CHANGES.md dist/d3.js dist/d3.min.js'};exports.scripts=v;var g={json2module:"0.0",rimraf:"2",rollup:"1","rollup-plugin-ascii":"0.0","rollup-plugin-node-resolve":"3","rollup-plugin-terser":"5",tape:"4"};exports.devDependencies=g;var u={"d3-array":"1","d3-axis":"1","d3-brush":"1","d3-chord":"1","d3-collection":"1","d3-color":"1","d3-contour":"1","d3-dispatch":"1","d3-drag":"1","d3-dsv":"1","d3-ease":"1","d3-fetch":"1","d3-force":"1","d3-format":"1","d3-geo":"1","d3-hierarchy":"1","d3-interpolate":"1","d3-path":"1","d3-polygon":"1","d3-quadtree":"1","d3-random":"1","d3-scale":"2","d3-scale-chromatic":"1","d3-selection":"1","d3-shape":"1","d3-time":"1","d3-time-format":"2","d3-timer":"1","d3-transition":"1","d3-voronoi":"1","d3-zoom":"1"};exports.dependencies=u;
},{}],"CHz1":[function(require,module,exports) {
"use strict";function e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"TH2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=n(require("./ascending"));function n(e){return e&&e.__esModule?e:{default:e}}function t(e){return 1===e.length&&(e=r(e)),{left:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)<0?r=l+1:u=l}return r},right:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)>0?u=l:r=l+1}return r}}}function r(n){return function(t,r){return(0,e.default)(n(t),r)}}
},{"./ascending":"CHz1"}],"Yob9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.bisectLeft=exports.bisectRight=void 0;var e=r(require("./ascending")),t=r(require("./bisector"));function r(e){return e&&e.__esModule?e:{default:e}}var s=(0,t.default)(e.default),i=s.right;exports.bisectRight=i;var o=s.left;exports.bisectLeft=o;var u=i;exports.default=u;
},{"./ascending":"CHz1","./bisector":"TH2p"}],"PuGY":[function(require,module,exports) {
"use strict";function e(e,t){null==t&&(t=r);for(var n=0,u=e.length-1,o=e[0],l=new Array(u<0?0:u);n<u;)l[n]=t(o,o=e[++n]);return l}function r(e,r){return[e,r]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.pair=r;
},{}],"xaEI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./pairs");function r(r,t,n){var u,a,l,o,i=r.length,s=t.length,f=new Array(i*s);for(null==n&&(n=e.pair),u=l=0;u<i;++u)for(o=r[u],a=0;a<s;++a,++l)f[l]=n(o,t[a]);return f}
},{"./pairs":"PuGY"}],"s7oJ":[function(require,module,exports) {
"use strict";function e(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Mz1A":[function(require,module,exports) {
"use strict";function e(e){return null===e?NaN:+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dVf8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./number"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){var u,f,l=r.length,n=0,a=-1,i=0,o=0;if(null==t)for(;++a<l;)isNaN(u=(0,e.default)(r[a]))||(o+=(f=u-i)*(u-(i+=f/++n)));else for(;++a<l;)isNaN(u=(0,e.default)(t(r[a],a,r)))||(o+=(f=u-i)*(u-(i+=f/++n)));if(n>1)return o/(n-1)}
},{"./number":"Mz1A"}],"gdWJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./variance"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){var u=(0,e.default)(r,t);return u?Math.sqrt(u):u}
},{"./variance":"dVf8"}],"CLkD":[function(require,module,exports) {
"use strict";function e(e,l){var r,u,f,n=e.length,t=-1;if(null==l){for(;++t<n;)if(null!=(r=e[t])&&r>=r)for(u=f=r;++t<n;)null!=(r=e[t])&&(u>r&&(u=r),f<r&&(f=r))}else for(;++t<n;)if(null!=(r=l(e[t],t,e))&&r>=r)for(u=f=r;++t<n;)null!=(r=l(e[t],t,e))&&(u>r&&(u=r),f<r&&(f=r));return[u,f]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"gb1M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=exports.slice=void 0;var e=Array.prototype,r=e.slice;exports.slice=r;var p=e.map;exports.map=p;
},{}],"IRat":[function(require,module,exports) {
"use strict";function e(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"p0JS":[function(require,module,exports) {
"use strict";function e(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(n);++a<n;)o[a]=e+a*r;return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZDeh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.tickIncrement=o,exports.tickStep=M;var t=Math.sqrt(50),r=Math.sqrt(10),a=Math.sqrt(2);function e(t,r,a){var e,M,h,i,n=-1;if(a=+a,(t=+t)===(r=+r)&&a>0)return[t];if((e=r<t)&&(M=t,t=r,r=M),0===(i=o(t,r,a))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),r=Math.floor(r/i),h=new Array(M=Math.ceil(r-t+1));++n<M;)h[n]=(t+n)*i;else for(t=Math.floor(t*i),r=Math.ceil(r*i),h=new Array(M=Math.ceil(t-r+1));++n<M;)h[n]=(t-n)/i;return e&&h.reverse(),h}function o(e,o,M){var h=(o-e)/Math.max(0,M),i=Math.floor(Math.log(h)/Math.LN10),n=h/Math.pow(10,i);return i>=0?(n>=t?10:n>=r?5:n>=a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(n>=t?10:n>=r?5:n>=a?2:1)}function M(e,o,M){var h=Math.abs(o-e)/Math.max(0,M),i=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),n=h/i;return n>=t?i*=10:n>=r?i*=5:n>=a&&(i*=2),o<e?-i:i}
},{}],"H59p":[function(require,module,exports) {
"use strict";function e(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"zskj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("./array"),r=o(require("./bisect")),t=o(require("./constant")),u=o(require("./extent")),n=o(require("./identity")),a=o(require("./range")),f=require("./ticks"),i=o(require("./threshold/sturges"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){var o=n.default,l=u.default,s=i.default;function c(e){var t,u,n=e.length,i=new Array(n);for(t=0;t<n;++t)i[t]=o(e[t],t,e);var c=l(i),d=c[0],h=c[1],y=s(i,d,h);Array.isArray(y)||(y=(0,f.tickStep)(d,h,y),y=(0,a.default)(Math.ceil(d/y)*y,h,y));for(var p=y.length;y[0]<=d;)y.shift(),--p;for(;y[p-1]>h;)y.pop(),--p;var q,v=new Array(p+1);for(t=0;t<=p;++t)(q=v[t]=[]).x0=t>0?y[t-1]:d,q.x1=t<p?y[t]:h;for(t=0;t<n;++t)d<=(u=i[t])&&u<=h&&v[(0,r.default)(y,u,0,p)].push(e[t]);return v}return c.value=function(e){return arguments.length?(o="function"==typeof e?e:(0,t.default)(e),c):o},c.domain=function(e){return arguments.length?(l="function"==typeof e?e:(0,t.default)([e[0],e[1]]),c):l},c.thresholds=function(r){return arguments.length?(s="function"==typeof r?r:Array.isArray(r)?(0,t.default)(e.slice.call(r)):(0,t.default)(r),c):s},c}
},{"./array":"gb1M","./bisect":"Yob9","./constant":"u0FZ","./extent":"CLkD","./identity":"IRat","./range":"p0JS","./ticks":"ZDeh","./threshold/sturges":"H59p"}],"GHmv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./number"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t,u){if(null==u&&(u=e.default),n=r.length){if((t=+t)<=0||n<2)return+u(r[0],0,r);if(t>=1)return+u(r[n-1],n-1,r);var n,f=(n-1)*t,l=Math.floor(f),o=+u(r[l],l,r);return o+(+u(r[l+1],l+1,r)-o)*(f-l)}}
},{"./number":"Mz1A"}],"cBAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("../array"),r=a(require("../ascending")),t=a(require("../number")),u=a(require("../quantile"));function a(e){return e&&e.__esModule?e:{default:e}}function l(a,l,n){return a=e.map.call(a,t.default).sort(r.default),Math.ceil((n-l)/(2*((0,u.default)(a,.75)-(0,u.default)(a,.25))*Math.pow(a.length,-1/3)))}
},{"../array":"gb1M","../ascending":"CHz1","../number":"Mz1A","../quantile":"GHmv"}],"lvim":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("../deviation"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r,u){return Math.ceil((u-r)/(3.5*(0,e.default)(t)*Math.pow(t.length,-1/3)))}
},{"../deviation":"gdWJ"}],"x9wj":[function(require,module,exports) {
"use strict";function e(e,l){var r,u,f=e.length,n=-1;if(null==l){for(;++n<f;)if(null!=(r=e[n])&&r>=r)for(u=r;++n<f;)null!=(r=e[n])&&r>u&&(u=r)}else for(;++n<f;)if(null!=(r=l(e[n],n,e))&&r>=r)for(u=r;++n<f;)null!=(r=l(e[n],n,e))&&r>u&&(u=r);return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"cGYI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./number"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){var u,f=r.length,l=f,n=-1,a=0;if(null==t)for(;++n<f;)isNaN(u=(0,e.default)(r[n]))?--l:a+=u;else for(;++n<f;)isNaN(u=(0,e.default)(t(r[n],n,r)))?--l:a+=u;if(l)return a/l}
},{"./number":"Mz1A"}],"FfrF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=t(require("./ascending")),u=t(require("./number")),r=t(require("./quantile"));function t(e){return e&&e.__esModule?e:{default:e}}function l(t,l){var a,n=t.length,s=-1,f=[];if(null==l)for(;++s<n;)isNaN(a=(0,u.default)(t[s]))||f.push(a);else for(;++s<n;)isNaN(a=(0,u.default)(l(t[s],s,t)))||f.push(a);return(0,r.default)(f.sort(e.default),.5)}
},{"./ascending":"CHz1","./number":"Mz1A","./quantile":"GHmv"}],"EzuM":[function(require,module,exports) {
"use strict";function e(e){for(var r,t,n,o=e.length,f=-1,l=0;++f<o;)l+=e[f].length;for(t=new Array(l);--o>=0;)for(r=(n=e[o]).length;--r>=0;)t[--l]=n[r];return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"GKKy":[function(require,module,exports) {
"use strict";function e(e,l){var r,u,f=e.length,n=-1;if(null==l){for(;++n<f;)if(null!=(r=e[n])&&r>=r)for(u=r;++n<f;)null!=(r=e[n])&&u>r&&(u=r)}else for(;++n<f;)if(null!=(r=l(e[n],n,e))&&r>=r)for(u=r;++n<f;)null!=(r=l(e[n],n,e))&&u>r&&(u=r);return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XFTn":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=r.length,n=new Array(t);t--;)n[t]=e[r[t]];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"H5no":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./ascending"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(u=r.length){var u,n,l=0,o=0,d=r[o];for(null==t&&(t=e.default);++l<u;)(t(n=r[l],d)<0||0!==t(d,d))&&(d=n,o=l);return 0===t(d,d)?o:void 0}}
},{"./ascending":"CHz1"}],"q8CL":[function(require,module,exports) {
"use strict";function e(e,t,r){for(var l,n,u=(null==r?e.length:r)-(t=null==t?0:+t);u;)n=Math.random()*u--|0,l=e[u+t],e[u+t]=e[n+t],e[n+t]=l;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tfh5":[function(require,module,exports) {
"use strict";function e(e,r){var t,l=e.length,o=-1,u=0;if(null==r)for(;++o<l;)(t=+e[o])&&(u+=t);else for(;++o<l;)(t=+r(e[o],o,e))&&(u+=t);return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ovym":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./min"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(!(o=r.length))return[];for(var t=-1,u=(0,e.default)(r,n),f=new Array(u);++t<u;)for(var o,a=-1,i=f[t]=new Array(o);++a<o;)i[a]=r[a][t];return f}function n(e){return e.length}
},{"./min":"GKKy"}],"DYHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./transpose"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){return(0,e.default)(arguments)}
},{"./transpose":"ovym"}],"Rpnd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"bisect",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"bisectRight",{enumerable:!0,get:function(){return e.bisectRight}}),Object.defineProperty(exports,"bisectLeft",{enumerable:!0,get:function(){return e.bisectLeft}}),Object.defineProperty(exports,"ascending",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"bisector",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"cross",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"descending",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"deviation",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"extent",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"histogram",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"thresholdScott",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"thresholdSturges",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"median",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"pairs",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"permute",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"quantile",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"scan",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"shuffle",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"ticks",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"tickIncrement",{enumerable:!0,get:function(){return h.tickIncrement}}),Object.defineProperty(exports,"tickStep",{enumerable:!0,get:function(){return h.tickStep}}),Object.defineProperty(exports,"transpose",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"variance",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return _.default}});var e=D(require("./bisect")),r=M(require("./ascending")),t=M(require("./bisector")),n=M(require("./cross")),u=M(require("./descending")),i=M(require("./deviation")),o=M(require("./extent")),f=M(require("./histogram")),c=M(require("./threshold/freedmanDiaconis")),a=M(require("./threshold/scott")),p=M(require("./threshold/sturges")),s=M(require("./max")),d=M(require("./mean")),l=M(require("./median")),b=M(require("./merge")),m=M(require("./min")),g=M(require("./pairs")),y=M(require("./permute")),O=M(require("./quantile")),j=M(require("./range")),P=M(require("./scan")),x=M(require("./shuffle")),q=M(require("./sum")),h=D(require("./ticks")),v=M(require("./transpose")),k=M(require("./variance")),_=M(require("./zip"));function M(e){return e&&e.__esModule?e:{default:e}}function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function D(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}
},{"./bisect":"Yob9","./ascending":"CHz1","./bisector":"TH2p","./cross":"xaEI","./descending":"s7oJ","./deviation":"gdWJ","./extent":"CLkD","./histogram":"zskj","./threshold/freedmanDiaconis":"cBAY","./threshold/scott":"lvim","./threshold/sturges":"H59p","./max":"x9wj","./mean":"cGYI","./median":"FfrF","./merge":"EzuM","./min":"GKKy","./pairs":"PuGY","./permute":"XFTn","./quantile":"GHmv","./range":"p0JS","./scan":"H5no","./shuffle":"q8CL","./sum":"tfh5","./ticks":"ZDeh","./transpose":"ovym","./variance":"dVf8","./zip":"DYHk"}],"ihQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=Array.prototype.slice;exports.slice=e;
},{}],"QPa7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.axisTop=p,exports.axisRight=h,exports.axisBottom=x,exports.axisLeft=g;var t=require("./array"),n=r(require("./identity"));function r(t){return t&&t.__esModule?t:{default:t}}var e=1,i=2,a=3,u=4,o=1e-6;function l(t){return"translate("+(t+.5)+",0)"}function c(t){return"translate(0,"+(t+.5)+")"}function s(t){return function(n){return+t(n)}}function f(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(r){return+t(r)+n}}function d(){return!this.__axis}function m(r,m){var p=[],h=null,x=null,g=6,k=6,y=3,_=r===e||r===u?-1:1,M=r===u||r===i?"x":"y",v=r===e||r===a?l:c;function F(t){var l=null==h?m.ticks?m.ticks.apply(m,p):m.domain():h,c=null==x?m.tickFormat?m.tickFormat.apply(m,p):n.default:x,F=Math.max(g,0)+y,V=m.range(),b=+V[0]+.5,z=+V[V.length-1]+.5,A=(m.bandwidth?f:s)(m.copy()),H=t.selection?t.selection():t,C=H.selectAll(".domain").data([null]),S=H.selectAll(".tick").data(l,m).order(),q=S.exit(),w=S.enter().append("g").attr("class","tick"),O=S.select("line"),P=S.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(w),O=O.merge(w.append("line").attr("stroke","currentColor").attr(M+"2",_*g)),P=P.merge(w.append("text").attr("fill","currentColor").attr(M,_*F).attr("dy",r===e?"0em":r===a?"0.71em":"0.32em")),t!==H&&(C=C.transition(t),S=S.transition(t),O=O.transition(t),P=P.transition(t),q=q.transition(t).attr("opacity",o).attr("transform",function(t){return isFinite(t=A(t))?v(t):this.getAttribute("transform")}),w.attr("opacity",o).attr("transform",function(t){var n=this.parentNode.__axis;return v(n&&isFinite(n=n(t))?n:A(t))})),q.remove(),C.attr("d",r===u||r==i?k?"M"+_*k+","+b+"H0.5V"+z+"H"+_*k:"M0.5,"+b+"V"+z:k?"M"+b+","+_*k+"V0.5H"+z+"V"+_*k:"M"+b+",0.5H"+z),S.attr("opacity",1).attr("transform",function(t){return v(A(t))}),O.attr(M+"2",_*g),P.attr(M,_*F).text(c),H.filter(d).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",r===i?"start":r===u?"end":"middle"),H.each(function(){this.__axis=A})}return F.scale=function(t){return arguments.length?(m=t,F):m},F.ticks=function(){return p=t.slice.call(arguments),F},F.tickArguments=function(n){return arguments.length?(p=null==n?[]:t.slice.call(n),F):p.slice()},F.tickValues=function(n){return arguments.length?(h=null==n?null:t.slice.call(n),F):h&&h.slice()},F.tickFormat=function(t){return arguments.length?(x=t,F):x},F.tickSize=function(t){return arguments.length?(g=k=+t,F):g},F.tickSizeInner=function(t){return arguments.length?(g=+t,F):g},F.tickSizeOuter=function(t){return arguments.length?(k=+t,F):k},F.tickPadding=function(t){return arguments.length?(y=+t,F):y},F}function p(t){return m(e,t)}function h(t){return m(i,t)}function x(t){return m(a,t)}function g(t){return m(u,t)}
},{"./array":"ihQ5","./identity":"IRat"}],"n5JH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"axisTop",{enumerable:!0,get:function(){return e.axisTop}}),Object.defineProperty(exports,"axisRight",{enumerable:!0,get:function(){return e.axisRight}}),Object.defineProperty(exports,"axisBottom",{enumerable:!0,get:function(){return e.axisBottom}}),Object.defineProperty(exports,"axisLeft",{enumerable:!0,get:function(){return e.axisLeft}});var e=require("./axis");
},{"./axis":"QPa7"}],"SYAW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n={value:function(){}};function r(){for(var n,r=0,t=arguments.length,o={};r<t;++r){if(!(n=arguments[r]+"")||n in o||/[\s.]/.test(n))throw new Error("illegal type: "+n);o[n]=[]}return new e(o)}function e(n){this._=n}function t(n,r){return n.trim().split(/^|\s+/).map(function(n){var e="",t=n.indexOf(".");if(t>=0&&(e=n.slice(t+1),n=n.slice(0,t)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}function o(n,r){for(var e,t=0,o=n.length;t<o;++t)if((e=n[t]).name===r)return e.value}function i(r,e,t){for(var o=0,i=r.length;o<i;++o)if(r[o].name===e){r[o]=n,r=r.slice(0,o).concat(r.slice(o+1));break}return null!=t&&r.push({name:e,value:t}),r}e.prototype=r.prototype={constructor:e,on:function(n,r){var e,l=this._,a=t(n+"",l),f=-1,u=a.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++f<u;)if(e=(n=a[f]).type)l[e]=i(l[e],n.name,r);else if(null==r)for(e in l)l[e]=i(l[e],n.name,null);return this}for(;++f<u;)if((e=(n=a[f]).type)&&(e=o(l[e],n.name)))return e},copy:function(){var n={},r=this._;for(var t in r)n[t]=r[t].slice();return new e(n)},call:function(n,r){if((e=arguments.length-2)>0)for(var e,t,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,e=(t=this._[n]).length;i<e;++i)t[i].value.apply(r,o)},apply:function(n,r,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var t=this._[n],o=0,i=t.length;o<i;++o)t[o].value.apply(r,e)}};var l=r;exports.default=l;
},{}],"cNf8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"dispatch",{enumerable:!0,get:function(){return e.default}});var e=t(require("./dispatch.js"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./dispatch.js":"SYAW"}],"TZ6S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.xhtml=void 0;var t="http://www.w3.org/1999/xhtml";exports.xhtml=t;var w={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};exports.default=w;
},{}],"Sva1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./namespaces"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var t=r+="",s=t.indexOf(":");return s>=0&&"xmlns"!==(t=r.slice(0,s))&&(r=r.slice(s+1)),e.default.hasOwnProperty(t)?{space:e.default[t],local:r}:r}
},{"./namespaces":"TZ6S"}],"vTHN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=n(require("./namespace")),t=require("./namespaces");function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t.xhtml&&n.documentElement.namespaceURI===t.xhtml?n.createElement(e):n.createElementNS(r,e)}}function u(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function a(t){var n=(0,e.default)(t);return(n.local?u:r)(n)}
},{"./namespace":"Sva1","./namespaces":"TZ6S"}],"hX8m":[function(require,module,exports) {
"use strict";function e(){}function t(t){return null==t?e:function(){return this.querySelector(t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"um0S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_;var e=require("./index"),t=r(require("../selector"));function r(e){return e&&e.__esModule?e:{default:e}}function _(r){"function"!=typeof r&&(r=(0,t.default)(r));for(var _=this._groups,a=_.length,n=new Array(a),u=0;u<a;++u)for(var o,i,l=_[u],d=l.length,s=n[u]=new Array(d),f=0;f<d;++f)(o=l[f])&&(i=r.call(o,o.__data__,f,l))&&("__data__"in o&&(i.__data__=o.__data__),s[f]=i);return new e.Selection(n,this._parents)}
},{"./index":"Pd8D","../selector":"hX8m"}],"sReu":[function(require,module,exports) {
"use strict";function e(){return[]}function t(t){return null==t?e:function(){return this.querySelectorAll(t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"EUVe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("./index"),t=r(require("../selectorAll"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){"function"!=typeof r&&(r=(0,t.default)(r));for(var u=this._groups,l=u.length,n=[],o=[],s=0;s<l;++s)for(var a,f=u[s],i=f.length,_=0;_<i;++_)(a=f[_])&&(n.push(r.call(a,a.__data__,_,f)),o.push(a));return new e.Selection(n,o)}
},{"./index":"Pd8D","../selectorAll":"sReu"}],"LbZ4":[function(require,module,exports) {
"use strict";function e(e){return function(){return this.matches(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"hZf9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("./index"),r=t(require("../matcher"));function t(e){return e&&e.__esModule?e:{default:e}}function n(t){"function"!=typeof t&&(t=(0,r.default)(t));for(var n=this._groups,u=n.length,a=new Array(u),o=0;o<u;++o)for(var i,l=n[o],s=l.length,f=a[o]=[],_=0;_<s;++_)(i=l[_])&&t.call(i,i.__data__,_,l)&&f.push(i);return new e.Selection(a,this._parents)}
},{"./index":"Pd8D","../matcher":"LbZ4"}],"NxKh":[function(require,module,exports) {
"use strict";function e(e){return new Array(e.length)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"BlDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.EnterNode=o;var e=r(require("./sparse")),t=require("./index");function r(e){return e&&e.__esModule?e:{default:e}}function n(){return new t.Selection(this._enter||this._groups.map(e.default),this._parents)}function o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}o.prototype={constructor:o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};
},{"./sparse":"NxKh","./index":"Pd8D"}],"U337":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("./index"),r=require("./enter"),n=t(require("../constant"));function t(e){return e&&e.__esModule?e:{default:e}}var a="$";function o(e,n,t,a,o,_){for(var l,i=0,u=n.length,f=_.length;i<f;++i)(l=n[i])?(l.__data__=_[i],a[i]=l):t[i]=new r.EnterNode(e,_[i]);for(;i<u;++i)(l=n[i])&&(o[i]=l)}function _(e,n,t,o,_,l,i){var u,f,c,s={},d=n.length,h=l.length,w=new Array(d);for(u=0;u<d;++u)(f=n[u])&&(w[u]=c=a+i.call(f,f.__data__,u,n),c in s?_[u]=f:s[c]=f);for(u=0;u<h;++u)(f=s[c=a+i.call(e,l[u],u,l)])?(o[u]=f,f.__data__=l[u],s[c]=null):t[u]=new r.EnterNode(e,l[u]);for(u=0;u<d;++u)(f=n[u])&&s[w[u]]===f&&(_[u]=f)}function l(r,t){if(!r)return v=new Array(this.size()),d=-1,this.each(function(e){v[++d]=e}),v;var a=t?_:o,l=this._parents,i=this._groups;"function"!=typeof r&&(r=(0,n.default)(r));for(var u=i.length,f=new Array(u),c=new Array(u),s=new Array(u),d=0;d<u;++d){var h=l[d],w=i[d],y=w.length,v=r.call(h,h&&h.__data__,d,l),g=v.length,A=c[d]=new Array(g),p=f[d]=new Array(g);a(h,w,A,p,s[d]=new Array(y),v,t);for(var x,q,E=0,M=0;E<g;++E)if(x=A[E]){for(E>=M&&(M=E+1);!(q=p[M])&&++M<g;);x._next=q||null}}return(f=new e.Selection(f,l))._enter=c,f._exit=s,f}
},{"./index":"Pd8D","./enter":"BlDg","../constant":"u0FZ"}],"uwqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./sparse")),t=require("./index");function r(e){return e&&e.__esModule?e:{default:e}}function u(){return new t.Selection(this._exit||this._groups.map(e.default),this._parents)}
},{"./sparse":"NxKh","./index":"Pd8D"}],"tBqC":[function(require,module,exports) {
"use strict";function e(e,t,r){var n=this.enter(),o=this,u=this.exit();return n="function"==typeof e?e(n):n.append(e+""),null!=t&&(o=t(o)),null==r?u.remove():r(u),n&&o?n.merge(o).order():o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"oMRz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./index");function r(r){for(var t=this._groups,n=r._groups,o=t.length,s=n.length,a=Math.min(o,s),i=new Array(o),u=0;u<a;++u)for(var l,f=t[u],h=n[u],p=f.length,g=i[u]=new Array(p),_=0;_<p;++_)(l=f[_]||h[_])&&(g[_]=l);for(;u<o;++u)i[u]=t[u];return new e.Selection(i,this._parents)}
},{"./index":"Pd8D"}],"DTXT":[function(require,module,exports) {
"use strict";function e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var o,n=e[t],s=n.length-1,i=n[s];--s>=0;)(o=n[s])&&(i&&4^o.compareDocumentPosition(i)&&i.parentNode.insertBefore(o,i),i=o);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Eo98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var r=require("./index");function e(e){function n(r,t){return r&&t?e(r.__data__,t.__data__):!r-!t}e||(e=t);for(var a=this._groups,o=a.length,u=new Array(o),_=0;_<o;++_){for(var i,s=a[_],d=s.length,f=u[_]=new Array(d),c=0;c<d;++c)(i=s[c])&&(f[c]=i);f.sort(n)}return new r.Selection(u,this._parents).order()}function t(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}
},{"./index":"Pd8D"}],"del0":[function(require,module,exports) {
"use strict";function e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RJvN":[function(require,module,exports) {
"use strict";function e(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"P06B":[function(require,module,exports) {
"use strict";function e(){for(var e=this._groups,r=0,t=e.length;r<t;++r)for(var u=e[r],n=0,o=u.length;n<o;++n){var l=u[n];if(l)return l}return null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"cLfp":[function(require,module,exports) {
"use strict";function e(){var e=0;return this.each(function(){++e}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fLE2":[function(require,module,exports) {
"use strict";function e(){return!this.node()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Ex0s":[function(require,module,exports) {
"use strict";function e(e){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var s,a=t[r],l=0,u=a.length;l<u;++l)(s=a[l])&&e.call(s,s.__data__,l,a);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kqGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=e(require("../namespace"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return function(){this.removeAttribute(t)}}function u(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r(t,e){return function(){this.setAttribute(t,e)}}function i(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function o(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function c(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function l(e,l){var a=(0,t.default)(e);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==l?a.local?u:n:"function"==typeof l?a.local?c:o:a.local?i:r)(a,l))}
},{"../namespace":"Sva1"}],"a7iO":[function(require,module,exports) {
"use strict";function e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"PNUm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.styleValue=l;var e=t(require("../window"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){this.style.removeProperty(e)}}function n(e,t,r){return function(){this.style.setProperty(e,t,r)}}function u(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function o(e,t,o){return arguments.length>1?this.each((null==t?r:"function"==typeof t?u:n)(e,t,null==o?"":o)):l(this.node(),e)}function l(t,r){return t.style.getPropertyValue(r)||(0,e.default)(t).getComputedStyle(t,null).getPropertyValue(r)}
},{"../window":"a7iO"}],"Qc7K":[function(require,module,exports) {
"use strict";function t(t){return function(){delete this[t]}}function e(t,e){return function(){this[t]=e}}function n(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function u(u,i){return arguments.length>1?this.each((null==i?t:"function"==typeof i?n:e)(u,i)):this.node()[u]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;
},{}],"u8Lo":[function(require,module,exports) {
"use strict";function t(t){return t.trim().split(/^|\s+/)}function n(t){return t.classList||new e(t)}function e(n){this._node=n,this._names=t(n.getAttribute("class")||"")}function i(t,e){for(var i=n(t),s=-1,r=e.length;++s<r;)i.add(e[s])}function s(t,e){for(var i=n(t),s=-1,r=e.length;++s<r;)i.remove(e[s])}function r(t){return function(){i(this,t)}}function o(t){return function(){s(this,t)}}function u(t,n){return function(){(n.apply(this,arguments)?i:s)(this,t)}}function f(e,i){var s=t(e+"");if(arguments.length<2){for(var f=n(this.node()),c=-1,a=s.length;++c<a;)if(!f.contains(s[c]))return!1;return!0}return this.each(("function"==typeof i?u:i?r:o)(s,i))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f,e.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};
},{}],"sv0a":[function(require,module,exports) {
"use strict";function t(){this.textContent=""}function n(t){return function(){this.textContent=t}}function e(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function o(o){return arguments.length?this.each(null==o?t:("function"==typeof o?e:n)(o)):this.node().textContent}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"IOHV":[function(require,module,exports) {
"use strict";function n(){this.innerHTML=""}function t(n){return function(){this.innerHTML=n}}function e(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}function i(i){return arguments.length?this.each(null==i?n:("function"==typeof i?e:t)(i)):this.node().innerHTML}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;
},{}],"Bs6a":[function(require,module,exports) {
"use strict";function e(){this.nextSibling&&this.parentNode.appendChild(this)}function t(){return this.each(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"s7fh":[function(require,module,exports) {
"use strict";function e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t(){return this.each(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"XBOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("../creator"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){var r="function"==typeof t?t:(0,e.default)(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}
},{"../creator":"vTHN"}],"DmTR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=r(require("../creator")),t=r(require("../selector"));function r(e){return e&&e.__esModule?e:{default:e}}function u(){return null}function n(r,n){var l="function"==typeof r?r:(0,e.default)(r),o=null==n?u:"function"==typeof n?n:(0,t.default)(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})}
},{"../creator":"vTHN","../selector":"hX8m"}],"lzg5":[function(require,module,exports) {
"use strict";function e(){var e=this.parentNode;e&&e.removeChild(this)}function t(){return this.each(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"lcuA":[function(require,module,exports) {
"use strict";function e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function n(n){return this.select(n?t:e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"rHST":[function(require,module,exports) {
"use strict";function e(e){return arguments.length?this.property("__data__",e):this.node().__data__}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tgqN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.customEvent=p,exports.event=void 0;var e={},t=null;if(exports.event=t,"undefined"!=typeof document){var n=document.documentElement;"onmouseenter"in n||(e={mouseenter:"mouseover",mouseleave:"mouseout"})}function r(e,t,n){return e=i(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function i(e,n,r){return function(i){var o=t;exports.event=t=i;try{e.call(this,this.__data__,n,r)}finally{exports.event=t=o}}}function o(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function s(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function u(t,n,o){var s=e.hasOwnProperty(t.type)?r:i;return function(e,r,i){var u,a=this.__on,p=s(n,r,i);if(a)for(var l=0,v=a.length;l<v;++l)if((u=a[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=p,u.capture=o),void(u.value=n);this.addEventListener(t.type,p,o),u={type:t.type,name:t.name,value:n,listener:p,capture:o},a?a.push(u):this.__on=[u]}}function a(e,t,n){var r,i,a=o(e+""),p=a.length;if(!(arguments.length<2)){for(l=t?u:s,null==n&&(n=!1),r=0;r<p;++r)this.each(l(a[r],t,n));return this}var l=this.node().__on;if(l)for(var v,f=0,c=l.length;f<c;++f)for(r=0,v=l[f];r<p;++r)if((i=a[r]).type===v.type&&i.name===v.name)return v.value}function p(e,n,r,i){var o=t;e.sourceEvent=t,exports.event=t=e;try{return n.apply(r,i)}finally{exports.event=t=o}}
},{}],"Sfdu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=e(require("../window"));function e(t){return t&&t.__esModule?t:{default:t}}function n(e,n,u){var i=(0,t.default)(e),r=i.CustomEvent;"function"==typeof r?r=new r(n,u):(r=i.document.createEvent("Event"),u?(r.initEvent(n,u.bubbles,u.cancelable),r.detail=u.detail):r.initEvent(n,!1,!1)),e.dispatchEvent(r)}function u(t,e){return function(){return n(this,t,e)}}function i(t,e){return function(){return n(this,t,e.apply(this,arguments))}}function r(t,e){return this.each(("function"==typeof e?i:u)(t,e))}
},{"../window":"a7iO"}],"Pd8D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Selection=B,exports.default=exports.root=void 0;var e=S(require("./select")),r=S(require("./selectAll")),t=S(require("./filter")),u=S(require("./data")),l=S(require("./enter")),a=S(require("./exit")),d=S(require("./join")),i=S(require("./merge")),o=S(require("./order")),f=S(require("./sort")),s=S(require("./call")),n=S(require("./nodes")),q=S(require("./node")),p=S(require("./size")),c=S(require("./empty")),m=S(require("./each")),x=S(require("./attr")),y=S(require("./style")),h=S(require("./property")),v=S(require("./classed")),_=S(require("./text")),g=S(require("./html")),j=S(require("./raise")),w=S(require("./lower")),z=S(require("./append")),A=S(require("./insert")),M=S(require("./remove")),b=S(require("./clone")),E=S(require("./datum")),O=S(require("./on")),P=S(require("./dispatch"));function S(e){return e&&e.__esModule?e:{default:e}}var k=[null];function B(e,r){this._groups=e,this._parents=r}function C(){return new B([[document.documentElement]],k)}exports.root=k,B.prototype=C.prototype={constructor:B,select:e.default,selectAll:r.default,filter:t.default,data:u.default,enter:l.default,exit:a.default,join:d.default,merge:i.default,order:o.default,sort:f.default,call:s.default,nodes:n.default,node:q.default,size:p.default,empty:c.default,each:m.default,attr:x.default,style:y.default,property:h.default,classed:v.default,text:_.default,html:g.default,raise:j.default,lower:w.default,append:z.default,insert:A.default,remove:M.default,clone:b.default,datum:E.default,on:O.default,dispatch:P.default};var D=C;exports.default=D;
},{"./select":"um0S","./selectAll":"EUVe","./filter":"hZf9","./data":"U337","./enter":"BlDg","./exit":"uwqx","./join":"tBqC","./merge":"oMRz","./order":"DTXT","./sort":"Eo98","./call":"del0","./nodes":"RJvN","./node":"P06B","./size":"cLfp","./empty":"fLE2","./each":"Ex0s","./attr":"kqGm","./style":"PNUm","./property":"Qc7K","./classed":"u8Lo","./text":"sv0a","./html":"IOHV","./raise":"Bs6a","./lower":"s7fh","./append":"XBOq","./insert":"DmTR","./remove":"lzg5","./clone":"lcuA","./datum":"rHST","./on":"tgqN","./dispatch":"Sfdu"}],"SawF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./selection/index");function t(t){return"string"==typeof t?new e.Selection([[document.querySelector(t)]],[document.documentElement]):new e.Selection([[t]],e.root)}
},{"./selection/index":"Pd8D"}],"o4tJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./creator")),t=r(require("./select"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return(0,t.default)((0,e.default)(r).call(document.documentElement))}
},{"./creator":"vTHN","./select":"SawF"}],"F0np":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=0;function e(){return new r}function r(){this._="@"+(++t).toString(36)}r.prototype=e.prototype={constructor:r,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};
},{}],"fcLX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./selection/on");function r(){for(var r,t=e.event;r=t.sourceEvent;)t=r;return t}
},{"./selection/on":"tgqN"}],"tjFE":[function(require,module,exports) {
"use strict";function e(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dfC2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./sourceEvent")),u=r(require("./point"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var t=(0,e.default)();return t.changedTouches&&(t=t.changedTouches[0]),(0,u.default)(r,t)}
},{"./sourceEvent":"fcLX","./point":"tjFE"}],"n60l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./selection/index");function t(t){return"string"==typeof t?new e.Selection([document.querySelectorAll(t)],[document.documentElement]):new e.Selection([null==t?[]:t],e.root)}
},{"./selection/index":"Pd8D"}],"XEgr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./sourceEvent")),r=t(require("./point"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u,n){arguments.length<3&&(n=u,u=(0,e.default)().changedTouches);for(var i,l=0,o=u?u.length:0;l<o;++l)if((i=u[l]).identifier===n)return(0,r.default)(t,i);return null}
},{"./sourceEvent":"fcLX","./point":"tjFE"}],"DKY7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./sourceEvent")),r=t(require("./point"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){null==u&&(u=(0,e.default)().touches);for(var n=0,o=u?u.length:0,l=new Array(o);n<o;++n)l[n]=(0,r.default)(t,u[n]);return l}
},{"./sourceEvent":"fcLX","./point":"tjFE"}],"Gs4P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"create",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"creator",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"local",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"matcher",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"mouse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"namespace",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"namespaces",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"clientPoint",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"select",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"selectAll",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"selection",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"selector",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"selectorAll",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"style",{enumerable:!0,get:function(){return d.styleValue}}),Object.defineProperty(exports,"touch",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"touches",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"event",{enumerable:!0,get:function(){return x.event}}),Object.defineProperty(exports,"customEvent",{enumerable:!0,get:function(){return x.customEvent}});var e=P(require("./create")),t=P(require("./creator")),r=P(require("./local")),n=P(require("./matcher")),u=P(require("./mouse")),o=P(require("./namespace")),c=P(require("./namespaces")),i=P(require("./point")),l=P(require("./select")),f=P(require("./selectAll")),a=P(require("./selection/index")),s=P(require("./selector")),p=P(require("./selectorAll")),d=require("./selection/style"),b=P(require("./touch")),m=P(require("./touches")),y=P(require("./window")),x=require("./selection/on");function P(e){return e&&e.__esModule?e:{default:e}}
},{"./create":"o4tJ","./creator":"vTHN","./local":"F0np","./matcher":"LbZ4","./mouse":"dfC2","./namespace":"Sva1","./namespaces":"TZ6S","./point":"tjFE","./select":"SawF","./selectAll":"n60l","./selection/index":"Pd8D","./selector":"hX8m","./selectorAll":"sReu","./selection/style":"PNUm","./touch":"XEgr","./touches":"DKY7","./window":"a7iO","./selection/on":"tgqN"}],"CQsD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nopropagation=t,exports.default=o;var e=require("d3-selection");function t(){e.event.stopImmediatePropagation()}function o(){e.event.preventDefault(),e.event.stopImmediatePropagation()}
},{"d3-selection":"Gs4P"}],"JG2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l,exports.yesdrag=r;var e=require("d3-selection"),t=n(require("./noevent.js"));function n(e){return e&&e.__esModule?e:{default:e}}function l(n){var l=n.document.documentElement,r=(0,e.select)(n).on("dragstart.drag",t.default,!0);"onselectstart"in l?r.on("selectstart.drag",t.default,!0):(l.__noselect=l.style.MozUserSelect,l.style.MozUserSelect="none")}function r(n,l){var r=n.document.documentElement,o=(0,e.select)(n).on("dragstart.drag",null);l&&(o.on("click.drag",t.default,!0),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}
},{"d3-selection":"Gs4P","./noevent.js":"CQsD"}],"QusW":[function(require,module,exports) {
"use strict";function t(t,i,s,e,h,r,o,n,p,u){this.target=t,this.type=i,this.subject=s,this.identifier=e,this.active=h,this.x=r,this.y=o,this.dx=n,this.dy=p,this._=u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};
},{}],"U7NX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p;var e=require("d3-dispatch"),t=require("d3-selection"),n=c(require("./nodrag.js")),r=c(require("./noevent.js")),o=i(require("./constant.js")),u=i(require("./event.js"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function f(){return!t.event.ctrlKey&&!t.event.button}function l(){return this.parentNode}function s(e){return null==e?{x:t.event.x,y:t.event.y}:e}function d(){return navigator.maxTouchPoints||"ontouchstart"in this}function p(){var i,a,c,p,v=f,h=l,g=s,y=d,m={},b=(0,e.dispatch)("start","drag","end"),j=0,w=0;function O(e){e.on("mousedown.drag",q).filter(y).on("touchstart.drag",M).on("touchmove.drag",T).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(){if(!p&&v.apply(this,arguments)){var e=k("mouse",h.apply(this,arguments),t.mouse,this,arguments);e&&((0,t.select)(t.event.view).on("mousemove.drag",P,!0).on("mouseup.drag",x,!0),(0,n.default)(t.event.view),(0,r.nopropagation)(),c=!1,i=t.event.clientX,a=t.event.clientY,e("start"))}}function P(){if((0,r.default)(),!c){var e=t.event.clientX-i,n=t.event.clientY-a;c=e*e+n*n>w}m.mouse("drag")}function x(){(0,t.select)(t.event.view).on("mousemove.drag mouseup.drag",null),(0,n.yesdrag)(t.event.view,c),(0,r.default)(),m.mouse("end")}function M(){if(v.apply(this,arguments)){var e,n,o=t.event.changedTouches,u=h.apply(this,arguments),i=o.length;for(e=0;e<i;++e)(n=k(o[e].identifier,u,t.touch,this,arguments))&&((0,r.nopropagation)(),n("start"))}}function T(){var e,n,o=t.event.changedTouches,u=o.length;for(e=0;e<u;++e)(n=m[o[e].identifier])&&((0,r.default)(),n("drag"))}function _(){var e,n,o=t.event.changedTouches,u=o.length;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),e=0;e<u;++e)(n=m[o[e].identifier])&&((0,r.nopropagation)(),n("end"))}function k(e,n,r,o,i){var a,c,f,l=r(n,e),s=b.copy();if((0,t.customEvent)(new u.default(O,"beforestart",a,e,j,l[0],l[1],0,0,s),function(){return null!=(t.event.subject=a=g.apply(o,i))&&(c=a.x-l[0]||0,f=a.y-l[1]||0,!0)}))return function d(p){var v,h=l;switch(p){case"start":m[e]=d,v=j++;break;case"end":delete m[e],--j;case"drag":l=r(n,e),v=j}(0,t.customEvent)(new u.default(O,p,a,e,v,l[0]+c,l[1]+f,l[0]-h[0],l[1]-h[1],s),s.apply,s,[p,o,i])}}return O.filter=function(e){return arguments.length?(v="function"==typeof e?e:(0,o.default)(!!e),O):v},O.container=function(e){return arguments.length?(h="function"==typeof e?e:(0,o.default)(e),O):h},O.subject=function(e){return arguments.length?(g="function"==typeof e?e:(0,o.default)(e),O):g},O.touchable=function(e){return arguments.length?(y="function"==typeof e?e:(0,o.default)(!!e),O):y},O.on=function(){var e=b.on.apply(b,arguments);return e===b?O:e},O.clickDistance=function(e){return arguments.length?(w=(e=+e)*e,O):Math.sqrt(w)},O}
},{"d3-dispatch":"cNf8","d3-selection":"Gs4P","./nodrag.js":"JG2T","./noevent.js":"CQsD","./constant.js":"u0FZ","./event.js":"QusW"}],"aj7N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"drag",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"dragDisable",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"dragEnable",{enumerable:!0,get:function(){return r.yesdrag}});var e=u(require("./drag.js")),r=n(require("./nodrag.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=u?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}
},{"./drag.js":"U7NX","./nodrag.js":"JG2T"}],"VMoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.now=f,exports.Timer=m,exports.timer=p,exports.timerFlush=w;var t,n,e=0,o=0,i=0,r=1e3,l=0,c=0,s=0,u="object"==typeof performance&&performance.now?performance:Date,a="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return c||(a(_),c=u.now()+s)}function _(){c=0}function m(){this._call=this._time=this._next=null}function p(t,n,e){var o=new m;return o.restart(t,n,e),o}function w(){f(),++e;for(var n,o=t;o;)(n=c-o._time)>=0&&o._call.call(null,n),o=o._next;--e}function h(){c=(l=u.now())+s,e=o=0;try{w()}finally{e=0,y(),c=0}}function x(){var t=u.now(),n=t-l;n>r&&(s-=n,l=t)}function y(){for(var e,o,i=t,r=1/0;i;)i._call?(r>i._time&&(r=i._time),e=i,i=i._next):(o=i._next,i._next=null,i=e?e._next=o:t=o);n=e,v(r)}function v(t){e||(o&&(o=clearTimeout(o)),t-c>24?(t<1/0&&(o=setTimeout(h,t-u.now()-s)),i&&(i=clearInterval(i))):(i||(l=u.now(),i=setInterval(x,r)),e=1,a(h)))}m.prototype=p.prototype={constructor:m,restart:function(e,o,i){if("function"!=typeof e)throw new TypeError("callback is not a function");i=(null==i?f():+i)+(null==o?0:+o),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=i,v()},stop:function(){this._call&&(this._call=null,this._time=1/0,v())}};
},{}],"ELFE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./timer.js");function r(r,t,u){var n=new e.Timer;return t=null==t?0:+t,n.restart(function(e){n.stop(),r(e+t)},t,u),n}
},{"./timer.js":"VMoR"}],"ngd6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./timer.js");function r(r,t,n){var u=new e.Timer,s=t;return null==t?(u.restart(r,t,n),u):(t=+t,n=null==n?(0,e.now)():+n,u.restart(function e(a){a+=s,u.restart(e,s+=t,n),r(a)},t,n),u)}
},{"./timer.js":"VMoR"}],"yaK5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"now",{enumerable:!0,get:function(){return e.now}}),Object.defineProperty(exports,"timer",{enumerable:!0,get:function(){return e.timer}}),Object.defineProperty(exports,"timerFlush",{enumerable:!0,get:function(){return e.timerFlush}}),Object.defineProperty(exports,"timeout",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interval",{enumerable:!0,get:function(){return r.default}});var e=require("./timer.js"),t=n(require("./timeout.js")),r=n(require("./interval.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./timer.js":"VMoR","./timeout.js":"ELFE","./interval.js":"ngd6"}],"qU2W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p,exports.init=_,exports.set=c,exports.get=f,exports.ENDED=exports.ENDING=exports.RUNNING=exports.STARTED=exports.STARTING=exports.SCHEDULED=exports.CREATED=void 0;var t=require("d3-dispatch"),e=require("d3-timer"),r=(0,t.dispatch)("start","end","cancel","interrupt"),a=[],n=0;exports.CREATED=n;var o=1;exports.SCHEDULED=o;var i=2;exports.STARTING=i;var s=3;exports.STARTED=s;var l=4;exports.RUNNING=l;var u=5;exports.ENDING=u;var d=6;function p(t,e,o,i,s,l){var u=t.__transition;if(u){if(o in u)return}else t.__transition={};x(t,o,{name:e,index:i,group:s,on:r,tween:a,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:n})}function _(t,e){var r=f(t,e);if(r.state>n)throw new Error("too late; already scheduled");return r}function c(t,e){var r=f(t,e);if(r.state>s)throw new Error("too late; already running");return r}function f(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function x(t,r,a){var n,p=t.__transition;function _(u){var x,m,E,v;if(a.state!==o)return f();for(x in p)if((v=p[x]).name===a.name){if(v.state===s)return(0,e.timeout)(_);v.state===l?(v.state=d,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete p[x]):+x<r&&(v.state=d,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete p[x])}if((0,e.timeout)(function(){a.state===s&&(a.state=l,a.timer.restart(c,a.delay,a.time),c(u))}),a.state=i,a.on.call("start",t,t.__data__,a.index,a.group),a.state===i){for(a.state=s,n=new Array(E=a.tween.length),x=0,m=-1;x<E;++x)(v=a.tween[x].value.call(t,t.__data__,a.index,a.group))&&(n[++m]=v);n.length=m+1}}function c(e){for(var r=e<a.duration?a.ease.call(null,e/a.duration):(a.timer.restart(f),a.state=u,1),o=-1,i=n.length;++o<i;)n[o].call(t,r);a.state===u&&(a.on.call("end",t,t.__data__,a.index,a.group),f())}function f(){for(var e in a.state=d,a.timer.stop(),delete p[r],p)return;delete t.__transition}p[r]=a,a.timer=(0,e.timer)(function(t){a.state=o,a.timer.restart(_,a.delay,a.time),a.delay<=t&&_(t-a.delay)},0,a.time)}exports.ENDED=d;
},{"d3-dispatch":"cNf8","d3-timer":"yaK5"}],"shc0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./transition/schedule.js");function t(t,n){var r,a,i,s=t.__transition,l=!0;if(s){for(i in n=null==n?null:n+"",s)(r=s[i]).name===n?(a=r.state>e.STARTING&&r.state<e.ENDING,r.state=e.ENDED,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete s[i]):l=!1;l&&delete t.__transition}}
},{"./transition/schedule.js":"qU2W"}],"mxRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("../interrupt.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return this.each(function(){(0,e.default)(this,t)})}
},{"../interrupt.js":"shc0"}],"QmaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.tweenValue=i;var e=require("./schedule.js");function t(t,n){var r,i;return function(){var u=(0,e.set)(this,t),a=u.tween;if(a!==r)for(var f=0,l=(i=r=a).length;f<l;++f)if(i[f].name===n){(i=i.slice()).splice(f,1);break}u.tween=i}}function n(t,n,r){var i,u;if("function"!=typeof r)throw new Error;return function(){var a=(0,e.set)(this,t),f=a.tween;if(f!==i){u=(i=f).slice();for(var l={name:n,value:r},s=0,o=u.length;s<o;++s)if(u[s].name===n){u[s]=l;break}s===o&&u.push(l)}a.tween=u}}function r(r,i){var u=this._id;if(r+="",arguments.length<2){for(var a,f=(0,e.get)(this.node(),u).tween,l=0,s=f.length;l<s;++l)if((a=f[l]).name===r)return a.value;return null}return this.each((null==i?t:n)(u,r,i))}function i(t,n,r){var i=t._id;return t.each(function(){var t=(0,e.set)(this,i);(t.value||(t.value={}))[n]=r.apply(this,arguments)}),function(t){return(0,e.get)(t,i).value[n]}}
},{"./schedule.js":"qU2W"}],"aCI0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("d3-color"),r=require("d3-interpolate");function t(t,o){var n;return("number"==typeof o?r.interpolateNumber:o instanceof e.color?r.interpolateRgb:(n=(0,e.color)(o))?(o=n,r.interpolateRgb):r.interpolateString)(t,o)}
},{"d3-color":"x3do","d3-interpolate":"y8gx"}],"GN5n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=require("d3-interpolate"),e=require("d3-selection"),r=require("./tween.js"),n=u(require("./interpolate.js"));function u(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){this.removeAttribute(t)}}function l(t){return function(){this.removeAttributeNS(t.space,t.local)}}function o(t,e,r){var n,u,i=r+"";return function(){var l=this.getAttribute(t);return l===i?null:l===n?u:u=e(n=l,r)}}function a(t,e,r){var n,u,i=r+"";return function(){var l=this.getAttributeNS(t.space,t.local);return l===i?null:l===n?u:u=e(n=l,r)}}function c(t,e,r){var n,u,i;return function(){var l,o,a=r(this);if(null!=a)return(l=this.getAttribute(t))===(o=a+"")?null:l===n&&o===u?i:(u=o,i=e(n=l,a));this.removeAttribute(t)}}function s(t,e,r){var n,u,i;return function(){var l,o,a=r(this);if(null!=a)return(l=this.getAttributeNS(t.space,t.local))===(o=a+"")?null:l===n&&o===u?i:(u=o,i=e(n=l,a));this.removeAttributeNS(t.space,t.local)}}function f(u,f){var v=(0,e.namespace)(u),h="transform"===v?t.interpolateTransformSvg:n.default;return this.attrTween(u,"function"==typeof f?(v.local?s:c)(v,h,(0,r.tweenValue)(this,"attr."+u,f)):null==f?(v.local?l:i)(v):(v.local?a:o)(v,h,f))}
},{"d3-interpolate":"y8gx","d3-selection":"Gs4P","./tween.js":"QmaO","./interpolate.js":"aCI0"}],"TDXW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("d3-selection");function e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function n(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function r(t,e){var r,u;function i(){var i=e.apply(this,arguments);return i!==u&&(r=(u=i)&&n(t,i)),r}return i._value=e,i}function u(t,n){var r,u;function i(){var i=n.apply(this,arguments);return i!==u&&(r=(u=i)&&e(t,i)),r}return i._value=n,i}function i(e,n){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw new Error;var a=(0,t.namespace)(e);return this.tween(i,(a.local?r:u)(a,n))}
},{"d3-selection":"Gs4P"}],"DrgK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("./schedule.js");function e(e,i){return function(){(0,t.init)(this,e).delay=+i.apply(this,arguments)}}function i(e,i){return i=+i,function(){(0,t.init)(this,e).delay=i}}function n(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?e:i)(r,n)):(0,t.get)(this.node(),r).delay}
},{"./schedule.js":"qU2W"}],"HiKm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("./schedule.js");function e(e,n){return function(){(0,t.set)(this,e).duration=+n.apply(this,arguments)}}function n(e,n){return n=+n,function(){(0,t.set)(this,e).duration=n}}function i(i){var r=this._id;return arguments.length?this.each(("function"==typeof i?e:n)(r,i)):(0,t.get)(this.node(),r).duration}
},{"./schedule.js":"qU2W"}],"Etvp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./schedule.js");function t(t,r){if("function"!=typeof r)throw new Error;return function(){(0,e.set)(this,t).ease=r}}function r(r){var n=this._id;return arguments.length?this.each(t(n,r)):(0,e.get)(this.node(),n).ease}
},{"./schedule.js":"qU2W"}],"xdA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("d3-selection"),r=require("./index.js");function t(t){"function"!=typeof t&&(t=(0,e.matcher)(t));for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a)for(var o,u=n[a],_=u.length,h=s[a]=[],l=0;l<_;++l)(o=u[l])&&t.call(o,o.__data__,l,u)&&h.push(o);return new r.Transition(s,this._parents,this._name,this._id)}
},{"d3-selection":"Gs4P","./index.js":"SG3l"}],"c7HU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var r=require("./index.js");function e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,n=t.length,s=i.length,o=Math.min(n,s),a=new Array(n),h=0;h<o;++h)for(var u,_=t[h],d=i[h],f=_.length,l=a[h]=new Array(f),p=0;p<f;++p)(u=_[p]||d[p])&&(l[p]=u);for(;h<n;++h)a[h]=t[h];return new r.Transition(a,this._parents,this._name,this._id)}
},{"./index.js":"SG3l"}],"WTPi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./schedule.js");function t(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function n(n,r,i){var o,s,u=t(r)?e.init:e.set;return function(){var e=u(this,n),t=e.on;t!==o&&(s=(o=t).copy()).on(r,i),e.on=s}}function r(t,r){var i=this._id;return arguments.length<2?(0,e.get)(this.node(),i).on.on(t):this.each(n(i,t,r))}
},{"./schedule.js":"qU2W"}],"eP7r":[function(require,module,exports) {
"use strict";function e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function t(){return this.on("end.remove",e(this._id))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"QqhT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("d3-selection"),t=require("./index.js"),r=a(require("./schedule.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(n){var a=this._name,o=this._id;"function"!=typeof n&&(n=(0,e.selector)(n));for(var i=this._groups,u=i.length,f=new Array(u),s=0;s<u;++s)for(var _,c,l=i[s],p=l.length,d=f[s]=new Array(p),y=0;y<p;++y)(_=l[y])&&(c=n.call(_,_.__data__,y,l))&&("__data__"in _&&(c.__data__=_.__data__),d[y]=c,(0,r.default)(d[y],a,o,y,d,(0,r.get)(_,o)));return new t.Transition(f,this._parents,a,o)}
},{"d3-selection":"Gs4P","./index.js":"SG3l","./schedule.js":"qU2W"}],"Lw89":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("d3-selection"),t=require("./index.js"),r=o(require("./schedule.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function u(n){var o=this._name,u=this._id;"function"!=typeof n&&(n=(0,e.selectorAll)(n));for(var i=this._groups,f=i.length,a=[],l=[],s=0;s<f;++s)for(var c,p=i[s],d=p.length,h=0;h<d;++h)if(c=p[h]){for(var v,y=n.call(c,c.__data__,h,p),_=(0,r.get)(c,u),g=0,j=y.length;g<j;++g)(v=y[g])&&(0,r.default)(v,o,u,g,y,_);a.push(y),l.push(c)}return new t.Transition(a,l,o,u)}
},{"d3-selection":"Gs4P","./index.js":"SG3l","./schedule.js":"qU2W"}],"j5MX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("d3-selection"),t=e.selection.prototype.constructor;function r(){return new t(this._groups,this._parents)}
},{"d3-selection":"Gs4P"}],"hZy9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var e=require("d3-interpolate"),t=require("d3-selection"),n=require("./schedule.js"),r=require("./tween.js"),s=u(require("./interpolate.js"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,n){var r,s,u;return function(){var l=(0,t.style)(this,e),i=(this.style.removeProperty(e),(0,t.style)(this,e));return l===i?null:l===r&&i===s?u:u=n(r=l,s=i)}}function i(e){return function(){this.style.removeProperty(e)}}function o(e,n,r){var s,u,l=r+"";return function(){var i=(0,t.style)(this,e);return i===l?null:i===s?u:u=n(s=i,r)}}function a(e,n,r){var s,u,l;return function(){var i=(0,t.style)(this,e),o=r(this),a=o+"";return null==o&&(this.style.removeProperty(e),a=o=(0,t.style)(this,e)),i===a?null:i===s&&a===u?l:(u=a,l=n(s=i,o))}}function y(e,t){var r,s,u,l,o="style."+t,a="end."+o;return function(){var y=(0,n.set)(this,e),f=y.on,c=null==y.value[o]?l||(l=i(t)):void 0;f===r&&u===c||(s=(r=f).copy()).on(a,u=c),y.on=s}}function f(t,n,u){var f="transform"==(t+="")?e.interpolateTransformCss:s.default;return null==n?this.styleTween(t,l(t,f)).on("end.style."+t,i(t)):"function"==typeof n?this.styleTween(t,a(t,f,(0,r.tweenValue)(this,"style."+t,n))).each(y(this._id,t)):this.styleTween(t,o(t,f,n),u).on("end.style."+t,null)}
},{"d3-interpolate":"y8gx","d3-selection":"Gs4P","./schedule.js":"qU2W","./tween.js":"QmaO","./interpolate.js":"aCI0"}],"YDXV":[function(require,module,exports) {
"use strict";function t(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function e(e,n,r){var u,i;function l(){var l=n.apply(this,arguments);return l!==i&&(u=(i=l)&&t(e,l,r)),u}return l._value=n,l}function n(t,n,r){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==n)return this.tween(u,null);if("function"!=typeof n)throw new Error;return this.tween(u,e(t,n,null==r?"":r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"KQl9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("./tween.js");function e(t){return function(){this.textContent=t}}function n(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function u(u){return this.tween("text","function"==typeof u?n((0,t.tweenValue)(this,"text",u)):e(null==u?"":u+""))}
},{"./tween.js":"QmaO"}],"p5Wn":[function(require,module,exports) {
"use strict";function t(t){return function(e){this.textContent=t.call(this,e)}}function e(e){var n,r;function u(){var u=e.apply(this,arguments);return u!==r&&(n=(r=u)&&t(u)),n}return u._value=e,u}function n(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,e(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"OegH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("./index.js"),t=n(require("./schedule.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function i(){for(var r=this._name,n=this._id,i=(0,e.newId)(),o=this._groups,u=o.length,a=0;a<u;++a)for(var f,s=o[a],l=s.length,p=0;p<l;++p)if(f=s[p]){var c=(0,t.get)(f,n);(0,t.default)(f,r,i,p,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new e.Transition(o,this._parents,r,i)}
},{"./index.js":"SG3l","./schedule.js":"qU2W"}],"GUR2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./schedule.js");function t(){var t,u,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var c={value:o},a={value:function(){0==--s&&i()}};n.each(function(){var n=(0,e.set)(this,r),s=n.on;s!==t&&((u=(t=s).copy())._.cancel.push(c),u._.interrupt.push(c),u._.end.push(a)),n.on=u})})}
},{"./schedule.js":"qU2W"}],"SG3l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transition=h,exports.default=v,exports.newId=g;var e=require("d3-selection"),t=m(require("./attr.js")),r=m(require("./attrTween.js")),s=m(require("./delay.js")),u=m(require("./duration.js")),i=m(require("./ease.js")),l=m(require("./filter.js")),n=m(require("./merge.js")),a=m(require("./on.js")),o=m(require("./remove.js")),d=m(require("./select.js")),f=m(require("./selectAll.js")),c=m(require("./selection.js")),j=m(require("./style.js")),q=m(require("./styleTween.js")),p=m(require("./text.js")),y=m(require("./textTween.js")),w=m(require("./transition.js")),x=m(require("./tween.js")),_=m(require("./end.js"));function m(e){return e&&e.__esModule?e:{default:e}}var T=0;function h(e,t,r,s){this._groups=e,this._parents=t,this._name=r,this._id=s}function v(t){return(0,e.selection)().transition(t)}function g(){return++T}var z=e.selection.prototype;h.prototype=v.prototype={constructor:h,select:d.default,selectAll:f.default,filter:l.default,merge:n.default,selection:c.default,transition:w.default,call:z.call,nodes:z.nodes,node:z.node,size:z.size,empty:z.empty,each:z.each,on:a.default,attr:t.default,attrTween:r.default,style:j.default,styleTween:q.default,text:p.default,textTween:y.default,remove:o.default,tween:x.default,delay:s.default,duration:u.default,ease:i.default,end:_.default};
},{"d3-selection":"Gs4P","./attr.js":"GN5n","./attrTween.js":"TDXW","./delay.js":"DrgK","./duration.js":"HiKm","./ease.js":"Etvp","./filter.js":"xdA6","./merge.js":"c7HU","./on.js":"WTPi","./remove.js":"eP7r","./select.js":"QqhT","./selectAll.js":"Lw89","./selection.js":"j5MX","./style.js":"hZy9","./styleTween.js":"YDXV","./text.js":"KQl9","./textTween.js":"p5Wn","./transition.js":"OegH","./tween.js":"QmaO","./end.js":"GUR2"}],"VNJ7":[function(require,module,exports) {
"use strict";function e(e){return+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=e;
},{}],"NlV3":[function(require,module,exports) {
"use strict";function t(t){return t*t}function e(t){return t*(2-t)}function u(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.quadIn=t,exports.quadOut=e,exports.quadInOut=u;
},{}],"ATE0":[function(require,module,exports) {
"use strict";function t(t){return t*t*t}function e(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubicIn=t,exports.cubicOut=e,exports.cubicInOut=u;
},{}],"xJOL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyInOut=exports.polyOut=exports.polyIn=void 0;var t=3,n=function t(n){function o(t){return Math.pow(t,n)}return n=+n,o.exponent=t,o}(t);exports.polyIn=n;var o=function t(n){function o(t){return 1-Math.pow(1-t,n)}return n=+n,o.exponent=t,o}(t);exports.polyOut=o;var e=function t(n){function o(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,o.exponent=t,o}(t);exports.polyInOut=e;
},{}],"aKKp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinIn=e,exports.sinOut=r,exports.sinInOut=s;var t=Math.PI,n=t/2;function e(t){return 1-Math.cos(t*n)}function r(t){return Math.sin(t*n)}function s(n){return(1-Math.cos(t*n))/2}
},{}],"GEdw":[function(require,module,exports) {
"use strict";function t(t){return Math.pow(2,10*t-10)}function e(t){return 1-Math.pow(2,-10*t)}function o(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.expIn=t,exports.expOut=e,exports.expInOut=o;
},{}],"erIK":[function(require,module,exports) {
"use strict";function t(t){return 1-Math.sqrt(1-t*t)}function r(t){return Math.sqrt(1- --t*t)}function e(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleIn=t,exports.circleOut=r,exports.circleInOut=e;
},{}],"WtpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bounceIn=b,exports.bounceOut=f,exports.bounceInOut=x;var e=4/11,t=6/11,n=8/11,r=.75,u=9/11,o=10/11,c=.9375,s=21/22,i=63/64,p=1/e/e;function b(e){return 1-f(1-e)}function f(b){return(b=+b)<e?p*b*b:b<n?p*(b-=t)*b+r:b<o?p*(b-=u)*b+c:p*(b-=s)*b+i}function x(e){return((e*=2)<=1?1-f(1-e):f(e-1)+1)/2}
},{}],"NHFs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backInOut=exports.backOut=exports.backIn=void 0;var t=1.70158,r=function t(r){function o(t){return t*t*((r+1)*t-r)}return r=+r,o.overshoot=t,o}(t);exports.backIn=r;var o=function t(r){function o(t){return--t*t*((r+1)*t+r)+1}return r=+r,o.overshoot=t,o}(t);exports.backOut=o;var e=function t(r){function o(t){return((t*=2)<1?t*t*((r+1)*t-r):(t-=2)*t*((r+1)*t+r)+2)/2}return r=+r,o.overshoot=t,o}(t);exports.backInOut=e;
},{}],"ZzFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elasticInOut=exports.elasticOut=exports.elasticIn=void 0;var t=2*Math.PI,n=1,r=.3,e=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=t);function i(t){return r*Math.pow(2,10*--t)*Math.sin((a-t)/e)}return i.amplitude=function(r){return n(r,e*t)},i.period=function(t){return n(r,t)},i}(n,r);exports.elasticIn=e;var a=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=t);function i(t){return 1-r*Math.pow(2,-10*(t=+t))*Math.sin((t+a)/e)}return i.amplitude=function(r){return n(r,e*t)},i.period=function(t){return n(r,t)},i}(n,r);exports.elasticOut=a;var i=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=t);function i(t){return((t=2*t-1)<0?r*Math.pow(2,10*t)*Math.sin((a-t)/e):2-r*Math.pow(2,-10*t)*Math.sin((a+t)/e))/2}return i.amplitude=function(r){return n(r,e*t)},i.period=function(t){return n(r,t)},i}(n,r);exports.elasticInOut=i;
},{}],"NhEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"easeLinear",{enumerable:!0,get:function(){return e.linear}}),Object.defineProperty(exports,"easeQuad",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeQuadIn",{enumerable:!0,get:function(){return t.quadIn}}),Object.defineProperty(exports,"easeQuadOut",{enumerable:!0,get:function(){return t.quadOut}}),Object.defineProperty(exports,"easeQuadInOut",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeCubic",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easeCubicIn",{enumerable:!0,get:function(){return r.cubicIn}}),Object.defineProperty(exports,"easeCubicOut",{enumerable:!0,get:function(){return r.cubicOut}}),Object.defineProperty(exports,"easeCubicInOut",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easePoly",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easePolyIn",{enumerable:!0,get:function(){return n.polyIn}}),Object.defineProperty(exports,"easePolyOut",{enumerable:!0,get:function(){return n.polyOut}}),Object.defineProperty(exports,"easePolyInOut",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easeSin",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeSinIn",{enumerable:!0,get:function(){return u.sinIn}}),Object.defineProperty(exports,"easeSinOut",{enumerable:!0,get:function(){return u.sinOut}}),Object.defineProperty(exports,"easeSinInOut",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeExp",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(exports,"easeExpIn",{enumerable:!0,get:function(){return o.expIn}}),Object.defineProperty(exports,"easeExpOut",{enumerable:!0,get:function(){return o.expOut}}),Object.defineProperty(exports,"easeExpInOut",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(exports,"easeCircle",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(exports,"easeCircleIn",{enumerable:!0,get:function(){return c.circleIn}}),Object.defineProperty(exports,"easeCircleOut",{enumerable:!0,get:function(){return c.circleOut}}),Object.defineProperty(exports,"easeCircleInOut",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(exports,"easeBounce",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceIn",{enumerable:!0,get:function(){return i.bounceIn}}),Object.defineProperty(exports,"easeBounceOut",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceInOut",{enumerable:!0,get:function(){return i.bounceInOut}}),Object.defineProperty(exports,"easeBack",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeBackIn",{enumerable:!0,get:function(){return a.backIn}}),Object.defineProperty(exports,"easeBackOut",{enumerable:!0,get:function(){return a.backOut}}),Object.defineProperty(exports,"easeBackInOut",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeElastic",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticIn",{enumerable:!0,get:function(){return s.elasticIn}}),Object.defineProperty(exports,"easeElasticOut",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticInOut",{enumerable:!0,get:function(){return s.elasticInOut}});var e=require("./linear.js"),t=require("./quad.js"),r=require("./cubic.js"),n=require("./poly.js"),u=require("./sin.js"),o=require("./exp.js"),c=require("./circle.js"),i=require("./bounce.js"),a=require("./back.js"),s=require("./elastic.js");
},{"./linear.js":"VNJ7","./quad.js":"NlV3","./cubic.js":"ATE0","./poly.js":"xJOL","./sin.js":"aKKp","./exp.js":"GEdw","./circle.js":"erIK","./bounce.js":"WtpZ","./back.js":"NHFs","./elastic.js":"ZzFe"}],"UofW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../transition/index.js"),r=i(require("../transition/schedule.js")),n=require("d3-ease"),t=require("d3-timer");function i(e){return e&&e.__esModule?e:{default:e}}var u={time:null,delay:0,duration:250,ease:n.easeCubicInOut};function a(e,r){for(var n;!(n=e.__transition)||!(n=n[r]);)if(!(e=e.parentNode))return u.time=(0,t.now)(),u;return n}function o(n){var i,o;n instanceof e.Transition?(i=n._id,n=n._name):(i=(0,e.newId)(),(o=u).time=(0,t.now)(),n=null==n?null:n+"");for(var s=this._groups,l=s.length,d=0;d<l;++d)for(var f,_=s[d],c=_.length,v=0;v<c;++v)(f=_[v])&&(0,r.default)(f,n,i,v,_,o||a(f,i));return new e.Transition(s,this._parents,n,i)}
},{"../transition/index.js":"SG3l","../transition/schedule.js":"qU2W","d3-ease":"NhEX","d3-timer":"yaK5"}],"qltf":[function(require,module,exports) {
"use strict";var e=require("d3-selection"),t=i(require("./interrupt.js")),r=i(require("./transition.js"));function i(e){return e&&e.__esModule?e:{default:e}}e.selection.prototype.interrupt=t.default,e.selection.prototype.transition=r.default;
},{"d3-selection":"Gs4P","./interrupt.js":"mxRJ","./transition.js":"UofW"}],"xpP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./transition/index.js"),n=require("./transition/schedule.js"),r=[null];function t(t,i){var u,s,l=t.__transition;if(l)for(s in i=null==i?null:i+"",l)if((u=l[s]).state>n.SCHEDULED&&u.name===i)return new e.Transition([[t]],r,i,+s);return null}
},{"./transition/index.js":"SG3l","./transition/schedule.js":"qU2W"}],"ErME":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"transition",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"active",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interrupt",{enumerable:!0,get:function(){return r.default}}),require("./selection/index.js");var e=n(require("./transition/index.js")),t=n(require("./active.js")),r=n(require("./interrupt.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./selection/index.js":"qltf","./transition/index.js":"SG3l","./active.js":"xpP9","./interrupt.js":"shc0"}],"ABov":[function(require,module,exports) {
"use strict";function e(e,t,s){this.target=e,this.type=t,this.selection=s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ePD5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.brushSelection=E,exports.brushX=T,exports.brushY=V,exports.default=D;var t=require("d3-dispatch"),e=require("d3-drag"),n=require("d3-interpolate"),r=require("d3-selection"),s=require("d3-transition"),u=c(require("./constant.js")),i=c(require("./event.js")),a=l(require("./noevent.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var u=r?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}function c(t){return t&&t.__esModule?t:{default:t}}var h={name:"drag"},f={name:"space"},p={name:"handle"},d={name:"center"};function v(t){return[+t[0],+t[1]]}function y(t){return[v(t[0]),v(t[1])]}function b(t){return function(e){return(0,r.touch)(e,r.event.touches,t)}}var m={name:"x",handles:["w","e"].map(z),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},w={name:"y",handles:["n","s"].map(z),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},g={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(z),input:function(t){return null==t?null:y(t)},output:function(t){return t}},x={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},M={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},k={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},j={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function z(t){return{type:t}}function O(){return!r.event.ctrlKey&&!r.event.button}function q(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function A(){return navigator.maxTouchPoints||"ontouchstart"in this}function P(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function K(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function E(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function T(){return S(m)}function V(){return S(w)}function D(){return S(g)}function S(o){var l,c=q,v=O,g=A,E=!0,T=(0,t.dispatch)("start","brush","end"),V=6;function D(t){var e=t.property("__brush",X).selectAll(".overlay").data([z("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",x.overlay).merge(e).each(function(){var t=P(this).extent;(0,r.select)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([z("selection")]).enter().append("rect").attr("class","selection").attr("cursor",x.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=t.selectAll(".handle").data(o.handles,function(t){return t.type});n.exit().remove(),n.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return x[t.type]}),t.each(S).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",W).filter(g).on("touchstart.brush",W).on("touchmove.brush",G).on("touchend.brush touchcancel.brush",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(){var t=(0,r.select)(this),e=P(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-V/2:e[0][0]-V/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-V/2:e[0][1]-V/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+V:V}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+V:V})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(t,e,n){return!n&&t.__brush.emitter||new C(t,e)}function C(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function W(){if((!l||r.event.touches)&&v.apply(this,arguments)){var t,n,u,i,c,y,g,z,O,q,A,T=this,V=r.event.target.__data__.type,D="selection"===(E&&r.event.metaKey?V="overlay":V)?h:E&&r.event.altKey?d:p,C=o===w?null:k[V],W=o===m?null:j[V],G=P(T),N=G.extent,X=G.selection,Y=N[0][0],F=N[0][1],H=N[1][0],I=N[1][1],J=0,L=0,Q=C&&W&&E&&r.event.shiftKey,R=r.event.touches?b(r.event.changedTouches[0].identifier):r.mouse,U=R(T),Z=U,$=B(T,arguments,!0).beforestart();"overlay"===V?(X&&(O=!0),G.selection=X=[[t=o===w?Y:U[0],u=o===m?F:U[1]],[c=o===w?H:t,g=o===m?I:u]]):(t=X[0][0],u=X[0][1],c=X[1][0],g=X[1][1]),n=t,i=u,y=c,z=g;var tt=(0,r.select)(T).attr("pointer-events","none"),et=tt.selectAll(".overlay").attr("cursor",x[V]);if(r.event.touches)$.moved=rt,$.ended=ut;else{var nt=(0,r.select)(r.event.view).on("mousemove.brush",rt,!0).on("mouseup.brush",ut,!0);E&&nt.on("keydown.brush",function(){switch(r.event.keyCode){case 16:Q=C&&W;break;case 18:D===p&&(C&&(c=y-J*C,t=n+J*C),W&&(g=z-L*W,u=i+L*W),D=d,st());break;case 32:D!==p&&D!==d||(C<0?c=y-J:C>0&&(t=n-J),W<0?g=z-L:W>0&&(u=i-L),D=f,et.attr("cursor",x.selection),st());break;default:return}(0,a.default)()},!0).on("keyup.brush",function(){switch(r.event.keyCode){case 16:Q&&(q=A=Q=!1,st());break;case 18:D===d&&(C<0?c=y:C>0&&(t=n),W<0?g=z:W>0&&(u=i),D=p,st());break;case 32:D===f&&(r.event.altKey?(C&&(c=y-J*C,t=n+J*C),W&&(g=z-L*W,u=i+L*W),D=d):(C<0?c=y:C>0&&(t=n),W<0?g=z:W>0&&(u=i),D=p),et.attr("cursor",x[V]),st());break;default:return}(0,a.default)()},!0),(0,e.dragDisable)(r.event.view)}(0,a.nopropagation)(),(0,s.interrupt)(T),S.call(T),$.start()}function rt(){var t=R(T);!Q||q||A||(Math.abs(t[0]-Z[0])>Math.abs(t[1]-Z[1])?A=!0:q=!0),Z=t,O=!0,(0,a.default)(),st()}function st(){var e;switch(J=Z[0]-U[0],L=Z[1]-U[1],D){case f:case h:C&&(J=Math.max(Y-t,Math.min(H-c,J)),n=t+J,y=c+J),W&&(L=Math.max(F-u,Math.min(I-g,L)),i=u+L,z=g+L);break;case p:C<0?(J=Math.max(Y-t,Math.min(H-t,J)),n=t+J,y=c):C>0&&(J=Math.max(Y-c,Math.min(H-c,J)),n=t,y=c+J),W<0?(L=Math.max(F-u,Math.min(I-u,L)),i=u+L,z=g):W>0&&(L=Math.max(F-g,Math.min(I-g,L)),i=u,z=g+L);break;case d:C&&(n=Math.max(Y,Math.min(H,t-J*C)),y=Math.max(Y,Math.min(H,c+J*C))),W&&(i=Math.max(F,Math.min(I,u-L*W)),z=Math.max(F,Math.min(I,g+L*W)))}y<n&&(C*=-1,e=t,t=c,c=e,e=n,n=y,y=e,V in M&&et.attr("cursor",x[V=M[V]])),z<i&&(W*=-1,e=u,u=g,g=e,e=i,i=z,z=e,V in _&&et.attr("cursor",x[V=_[V]])),G.selection&&(X=G.selection),q&&(n=X[0][0],y=X[1][0]),A&&(i=X[0][1],z=X[1][1]),X[0][0]===n&&X[0][1]===i&&X[1][0]===y&&X[1][1]===z||(G.selection=[[n,i],[y,z]],S.call(T),$.brush())}function ut(){if((0,a.nopropagation)(),r.event.touches){if(r.event.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else(0,e.dragEnable)(r.event.view,O),nt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);tt.attr("pointer-events","all"),et.attr("cursor",x.overlay),G.selection&&(X=G.selection),K(X)&&(G.selection=null,S.call(T)),$.end()}}function G(){B(this,arguments).moved()}function N(){B(this,arguments).ended()}function X(){var t=this.__brush||{selection:null};return t.extent=y(c.apply(this,arguments)),t.dim=o,t}return D.move=function(t,e){t.selection?t.on("start.brush",function(){B(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){B(this,arguments).end()}).tween("brush",function(){var t=this,r=t.__brush,s=B(t,arguments),u=r.selection,i=o.input("function"==typeof e?e.apply(this,arguments):e,r.extent),a=(0,n.interpolate)(u,i);function l(e){r.selection=1===e&&null===i?null:a(e),S.call(t),s.brush()}return null!==u&&null!==i?l:l(1)}):t.each(function(){var t=arguments,n=this.__brush,r=o.input("function"==typeof e?e.apply(this,t):e,n.extent),u=B(this,t).beforestart();(0,s.interrupt)(this),n.selection=null===r?null:r,S.call(this),u.start().brush().end()})},D.clear=function(t){D.move(t,null)},C.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){(0,r.customEvent)(new i.default(D,t,o.output(this.state.selection)),T.apply,T,[t,this.that,this.args])}},D.extent=function(t){return arguments.length?(c="function"==typeof t?t:(0,u.default)(y(t)),D):c},D.filter=function(t){return arguments.length?(v="function"==typeof t?t:(0,u.default)(!!t),D):v},D.touchable=function(t){return arguments.length?(g="function"==typeof t?t:(0,u.default)(!!t),D):g},D.handleSize=function(t){return arguments.length?(V=+t,D):V},D.keyModifiers=function(t){return arguments.length?(E=!!t,D):E},D.on=function(){var t=T.on.apply(T,arguments);return t===T?D:t},D}
},{"d3-dispatch":"cNf8","d3-drag":"aj7N","d3-interpolate":"y8gx","d3-selection":"Gs4P","d3-transition":"ErME","./constant.js":"u0FZ","./event.js":"ABov","./noevent.js":"CQsD"}],"mij0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"brush",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"brushX",{enumerable:!0,get:function(){return e.brushX}}),Object.defineProperty(exports,"brushY",{enumerable:!0,get:function(){return e.brushY}}),Object.defineProperty(exports,"brushSelection",{enumerable:!0,get:function(){return e.brushSelection}});var e=t(require("./brush.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var f=u?Object.getOwnPropertyDescriptor(e,o):null;f&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}
},{"./brush.js":"ePD5"}],"eqFT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=exports.tau=exports.halfPi=exports.pi=exports.sin=exports.cos=void 0;var t=Math.cos;exports.cos=t;var r=Math.sin;exports.sin=r;var s=Math.PI;exports.pi=s;var e=s/2;exports.halfPi=e;var o=2*s;exports.tau=o;var a=Math.max;exports.max=a;
},{}],"tY9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var r=require("d3-array"),e=require("./math");function n(r){return function(e,n){return r(e.source.value+e.target.value,n.source.value+n.target.value)}}function u(){var u=0,t=null,a=null,o=null;function l(n){var l,s,f,c,g,i,v=n.length,d=[],h=(0,r.range)(v),p=[],x=[],A=x.groups=new Array(v),y=new Array(v*v);for(l=0,g=-1;++g<v;){for(s=0,i=-1;++i<v;)s+=n[g][i];d.push(s),p.push((0,r.range)(v)),l+=s}for(t&&h.sort(function(r,e){return t(d[r],d[e])}),a&&p.forEach(function(r,e){r.sort(function(r,u){return a(n[e][r],n[e][u])})}),c=(l=(0,e.max)(0,e.tau-u*v)/l)?u:e.tau/v,s=0,g=-1;++g<v;){for(f=s,i=-1;++i<v;){var _=h[g],b=p[_][i],m=n[_][b],q=s,w=s+=m*l;y[b*v+_]={index:_,subindex:b,startAngle:q,endAngle:w,value:m}}A[_]={index:_,startAngle:f,endAngle:s,value:d[_]},s+=c}for(g=-1;++g<v;)for(i=g-1;++i<v;){var j=y[i*v+g],C=y[g*v+i];(j.value||C.value)&&x.push(j.value<C.value?{source:C,target:j}:{source:j,target:C})}return o?x.sort(o):x}return l.padAngle=function(r){return arguments.length?(u=(0,e.max)(0,r),l):u},l.sortGroups=function(r){return arguments.length?(t=r,l):t},l.sortSubgroups=function(r){return arguments.length?(a=r,l):a},l.sortChords=function(r){return arguments.length?(null==r?o=null:(o=n(r))._=r,l):o&&o._},l}
},{"d3-array":"Rpnd","./math":"eqFT"}],"hCwf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=Math.PI,i=2*t,s=1e-6,h=i-s;function _(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new _}_.prototype=n.prototype={constructor:_,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,h){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+h)},bezierCurveTo:function(t,i,s,h,_,n){this._+="C"+ +t+","+ +i+","+ +s+","+ +h+","+(this._x1=+_)+","+(this._y1=+n)},arcTo:function(i,h,_,n,e){i=+i,h=+h,_=+_,n=+n,e=+e;var r=this._x1,o=this._y1,a=_-i,u=n-h,x=r-i,c=o-h,y=x*x+c*c;if(e<0)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=h);else if(y>s)if(Math.abs(c*a-u*x)>s&&e){var f=_-r,M=n-o,l=a*a+u*u,v=f*f+M*M,d=Math.sqrt(l),p=Math.sqrt(y),b=e*Math.tan((t-Math.acos((l+y-v)/(2*d*p)))/2),w=b/p,T=b/d;Math.abs(w-1)>s&&(this._+="L"+(i+w*x)+","+(h+w*c)),this._+="A"+e+","+e+",0,0,"+ +(c*f>x*M)+","+(this._x1=i+T*a)+","+(this._y1=h+T*u)}else this._+="L"+(this._x1=i)+","+(this._y1=h);else;},arc:function(_,n,e,r,o,a){_=+_,n=+n,a=!!a;var u=(e=+e)*Math.cos(r),x=e*Math.sin(r),c=_+u,y=n+x,f=1^a,M=a?r-o:o-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+y:(Math.abs(this._x1-c)>s||Math.abs(this._y1-y)>s)&&(this._+="L"+c+","+y),e&&(M<0&&(M=M%i+i),M>h?this._+="A"+e+","+e+",0,1,"+f+","+(_-u)+","+(n-x)+"A"+e+","+e+",0,1,"+f+","+(this._x1=c)+","+(this._y1=y):M>s&&(this._+="A"+e+","+e+",0,"+ +(M>=t)+","+f+","+(this._x1=_+e*Math.cos(o))+","+(this._y1=n+e*Math.sin(o))))},rect:function(t,i,s,h){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +h+"h"+-s+"Z"},toString:function(){return this._}};var e=n;exports.default=e;
},{}],"zaWp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"path",{enumerable:!0,get:function(){return e.default}});var e=t(require("./path.js"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./path.js":"hCwf"}],"aM5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=require("./array"),n=u(require("./constant")),e=require("./math"),r=require("d3-path");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return t.source}function i(t){return t.target}function a(t){return t.radius}function o(t){return t.startAngle}function c(t){return t.endAngle}function f(){var u=l,f=i,s=a,p=o,h=c,d=null;function y(){var n,l=t.slice.call(arguments),i=u.apply(this,l),a=f.apply(this,l),o=+s.apply(this,(l[0]=i,l)),c=p.apply(this,l)-e.halfPi,y=h.apply(this,l)-e.halfPi,g=o*(0,e.cos)(c),v=o*(0,e.sin)(c),q=+s.apply(this,(l[0]=a,l)),P=p.apply(this,l)-e.halfPi,A=h.apply(this,l)-e.halfPi;if(d||(d=n=(0,r.path)()),d.moveTo(g,v),d.arc(0,0,o,c,y),c===P&&y===A||(d.quadraticCurveTo(0,0,q*(0,e.cos)(P),q*(0,e.sin)(P)),d.arc(0,0,q,P,A)),d.quadraticCurveTo(0,0,g,v),d.closePath(),n)return d=null,n+""||null}return y.radius=function(t){return arguments.length?(s="function"==typeof t?t:(0,n.default)(+t),y):s},y.startAngle=function(t){return arguments.length?(p="function"==typeof t?t:(0,n.default)(+t),y):p},y.endAngle=function(t){return arguments.length?(h="function"==typeof t?t:(0,n.default)(+t),y):h},y.source=function(t){return arguments.length?(u=t,y):u},y.target=function(t){return arguments.length?(f=t,y):f},y.context=function(t){return arguments.length?(d=null==t?null:t,y):d},y}
},{"./array":"ihQ5","./constant":"u0FZ","./math":"eqFT","d3-path":"zaWp"}],"uMG0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"chord",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"ribbon",{enumerable:!0,get:function(){return r.default}});var e=t(require("./chord")),r=t(require("./ribbon"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./chord":"tY9T","./ribbon":"aM5C"}],"j72L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.prefix=void 0;var t="$";function r(){}function e(t,e){var i=new r;if(t instanceof r)t.each(function(t,r){i.set(r,t)});else if(Array.isArray(t)){var n,s=-1,o=t.length;if(null==e)for(;++s<o;)i.set(s,t[s]);else for(;++s<o;)i.set(e(n=t[s],s,t),n)}else if(t)for(var u in t)i.set(u,t[u]);return i}exports.prefix=t,r.prototype=e.prototype={constructor:r,has:function(r){return t+r in this},get:function(r){return this[t+r]},set:function(r,e){return this[t+r]=e,this},remove:function(r){var e=t+r;return e in this&&delete this[e]},clear:function(){for(var r in this)r[0]===t&&delete this[r]},keys:function(){var r=[];for(var e in this)e[0]===t&&r.push(e.slice(1));return r},values:function(){var r=[];for(var e in this)e[0]===t&&r.push(this[e]);return r},entries:function(){var r=[];for(var e in this)e[0]===t&&r.push({key:e.slice(1),value:this[e]});return r},size:function(){var r=0;for(var e in this)e[0]===t&&++r;return r},empty:function(){for(var r in this)if(r[0]===t)return!1;return!0},each:function(r){for(var e in this)e[0]===t&&r(this[e],e.slice(1),this)}};var i=e;exports.default=i;
},{}],"frsU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=t(require("./map"));function t(n){return n&&n.__esModule?n:{default:n}}function e(){var t,e,i,l=[],c=[];function s(u,r,o,f){if(r>=l.length)return null!=t&&u.sort(t),null!=e?e(u):u;for(var i,c,a,h=-1,p=u.length,d=l[r++],g=(0,n.default)(),v=o();++h<p;)(a=g.get(i=d(c=u[h])+""))?a.push(c):g.set(i,[c]);return g.each(function(n,t){f(v,t,s(n,r,o,f))}),v}return i={object:function(n){return s(n,0,u,r)},map:function(n){return s(n,0,o,f)},entries:function(n){return function n(t,u){if(++u>l.length)return t;var r,o=c[u-1];return null!=e&&u>=l.length?r=t.entries():(r=[],t.each(function(t,e){r.push({key:e,values:n(t,u)})})),null!=o?r.sort(function(n,t){return o(n.key,t.key)}):r}(s(n,0,o,f),0)},key:function(n){return l.push(n),i},sortKeys:function(n){return c[l.length-1]=n,i},sortValues:function(n){return t=n,i},rollup:function(n){return e=n,i}}}function u(){return{}}function r(n,t,e){n[t]=e}function o(){return(0,n.default)()}function f(n,t,e){n.set(t,e)}
},{"./map":"j72L"}],"Io8R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./map"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function n(){}var o=e.default.prototype;function a(e,t){var r=new n;if(e instanceof n)e.each(function(e){r.add(e)});else if(e){var o=-1,a=e.length;if(null==t)for(;++o<a;)r.add(e[o]);else for(;++o<a;)r.add(t(e[o],o,e))}return r}n.prototype=a.prototype={constructor:n,has:o.has,add:function(t){return t+="",this[e.prefix+t]=t,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each};var u=a;exports.default=u;
},{"./map":"j72L"}],"j0Iz":[function(require,module,exports) {
"use strict";function e(e){var r=[];for(var t in e)r.push(t);return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"qwPj":[function(require,module,exports) {
"use strict";function e(e){var r=[];for(var t in e)r.push(e[t]);return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"c8dA":[function(require,module,exports) {
"use strict";function e(e){var r=[];for(var t in e)r.push({key:t,value:e[t]});return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"CyPa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"nest",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"map",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"keys",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"values",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"entries",{enumerable:!0,get:function(){return i.default}});var e=o(require("./nest")),r=o(require("./set")),t=o(require("./map")),u=o(require("./keys")),n=o(require("./values")),i=o(require("./entries"));function o(e){return e&&e.__esModule?e:{default:e}}
},{"./nest":"frsU","./set":"Io8R","./map":"j72L","./keys":"j0Iz","./values":"qwPj","./entries":"c8dA"}],"fVpO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=Array.prototype,r=e.slice;exports.slice=r;
},{}],"EOjY":[function(require,module,exports) {
"use strict";function e(e,t){return e-t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"hCut":[function(require,module,exports) {
"use strict";function e(e){for(var t=0,r=e.length,o=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];++t<r;)o+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"zvvx":[function(require,module,exports) {
"use strict";function r(r,e){for(var n,u=-1,f=e.length;++u<f;)if(n=t(r,e[u]))return n;return 0}function t(r,t){for(var n=t[0],u=t[1],f=-1,o=0,i=r.length,c=i-1;o<i;c=o++){var a=r[o],l=a[0],s=a[1],v=r[c],d=v[0],p=v[1];if(e(a,v,t))return 0;s>u!=p>u&&n<(d-l)*(u-s)/(p-s)+l&&(f=-f)}return f}function e(r,t,e){var f;return n(r,t,e)&&u(r[f=+(r[0]===t[0])],e[f],t[f])}function n(r,t,e){return(t[0]-r[0])*(e[1]-r[1])==(e[0]-r[0])*(t[1]-r[1])}function u(r,t,e){return r<=t&&t<=e||e<=t&&t<=r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"mjlc":[function(require,module,exports) {
"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dZSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var r=require("d3-array"),e=require("./array"),t=u(require("./ascending")),n=u(require("./area")),a=u(require("./constant")),o=u(require("./contains")),i=u(require("./noop"));function u(r){return r&&r.__esModule?r:{default:r}}var f=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function c(){var u=1,c=1,s=r.thresholdSturges,l=v;function d(e){var n=s(e);if(Array.isArray(n))n=n.slice().sort(t.default);else{var a=(0,r.extent)(e),o=a[0],i=a[1];n=(0,r.tickStep)(o,i,n),n=(0,r.range)(Math.floor(o/n)*n,Math.floor(i/n)*n,n)}return n.map(function(r){return h(e,r)})}function h(r,e){var t=[],a=[];return function(r,e,t){var n,a,o,i,s,l,d=new Array,h=new Array;n=a=-1,i=r[0]>=e,f[i<<1].forEach(v);for(;++n<u-1;)o=i,i=r[n+1]>=e,f[o|i<<1].forEach(v);f[i<<0].forEach(v);for(;++a<c-1;){for(n=-1,i=r[a*u+u]>=e,s=r[a*u]>=e,f[i<<1|s<<2].forEach(v);++n<u-1;)o=i,i=r[a*u+u+n+1]>=e,l=s,s=r[a*u+n+1]>=e,f[o|i<<1|s<<2|l<<3].forEach(v);f[i|s<<3].forEach(v)}n=-1,s=r[a*u]>=e,f[s<<2].forEach(v);for(;++n<u-1;)l=s,s=r[a*u+n+1]>=e,f[s<<2|l<<3].forEach(v);function v(r){var e,o,i=[r[0][0]+n,r[0][1]+a],u=[r[1][0]+n,r[1][1]+a],f=g(i),c=g(u);(e=h[f])?(o=d[c])?(delete h[e.end],delete d[o.start],e===o?(e.ring.push(u),t(e.ring)):d[e.start]=h[o.end]={start:e.start,end:o.end,ring:e.ring.concat(o.ring)}):(delete h[e.end],e.ring.push(u),h[e.end=c]=e):(e=d[c])?(o=h[f])?(delete d[e.start],delete h[o.end],e===o?(e.ring.push(u),t(e.ring)):d[o.start]=h[e.end]={start:o.start,end:e.end,ring:o.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(i),d[e.start=f]=e):d[f]=h[c]={start:f,end:c,ring:[i,u]}}f[s<<3].forEach(v)}(r,e,function(o){l(o,r,e),(0,n.default)(o)>0?t.push([o]):a.push(o)}),a.forEach(function(r){for(var e,n=0,a=t.length;n<a;++n)if(-1!==(0,o.default)((e=t[n])[0],r))return void e.push(r)}),{type:"MultiPolygon",value:e,coordinates:t}}function g(r){return 2*r[0]+r[1]*(u+1)*4}function v(r,e,t){r.forEach(function(r){var n,a=r[0],o=r[1],i=0|a,f=0|o,s=e[f*u+i];a>0&&a<u&&i===a&&(n=e[f*u+i-1],r[0]=a+(t-n)/(s-n)-.5),o>0&&o<c&&f===o&&(n=e[(f-1)*u+i],r[1]=o+(t-n)/(s-n)-.5)})}return d.contour=h,d.size=function(r){if(!arguments.length)return[u,c];var e=Math.ceil(r[0]),t=Math.ceil(r[1]);if(!(e>0&&t>0))throw new Error("invalid size");return u=e,c=t,d},d.thresholds=function(r){return arguments.length?(s="function"==typeof r?r:Array.isArray(r)?(0,a.default)(e.slice.call(r)):(0,a.default)(r),d):s},d.smooth=function(r){return arguments.length?(l=r?v:i.default,d):l===v},d}
},{"d3-array":"Rpnd","./array":"fVpO","./ascending":"EOjY","./area":"hCut","./constant":"u0FZ","./contains":"zvvx","./noop":"mjlc"}],"dh6e":[function(require,module,exports) {
"use strict";function t(t,a,r){for(var e=t.width,o=t.height,d=1+(r<<1),i=0;i<o;++i)for(var h=0,f=0;h<e+r;++h)h<e&&(f+=t.data[h+i*e]),h>=r&&(h>=d&&(f-=t.data[h-d+i*e]),a.data[h-r+i*e]=f/Math.min(h+1,e-1+d-h,d))}function a(t,a,r){for(var e=t.width,o=t.height,d=1+(r<<1),i=0;i<e;++i)for(var h=0,f=0;h<o+r;++h)h<o&&(f+=t.data[i+h*e]),h>=r&&(h>=d&&(f-=t.data[i+(h-d)*e]),a.data[i+(h-r)*e]=f/Math.min(h+1,o-1+d-h,d))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.blurX=t,exports.blurY=a;
},{}],"IjDf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=require("d3-array"),r=require("./array"),e=require("./blur"),n=a(require("./constant")),i=a(require("./contours"));function a(t){return t&&t.__esModule?t:{default:t}}function h(t){return t[0]}function u(t){return t[1]}function o(){return 1}function f(){var a=h,f=u,d=o,l=960,c=500,w=20,s=2,g=3*w,y=l+2*g>>s,M=c+2*g>>s,p=(0,n.default)(20);function v(r){var n=new Float32Array(y*M),h=new Float32Array(y*M);r.forEach(function(t,r,e){var i=+a(t,r,e)+g>>s,h=+f(t,r,e)+g>>s,u=+d(t,r,e);i>=0&&i<y&&h>=0&&h<M&&(n[i+h*y]+=u)}),(0,e.blurX)({width:y,height:M,data:n},{width:y,height:M,data:h},w>>s),(0,e.blurY)({width:y,height:M,data:h},{width:y,height:M,data:n},w>>s),(0,e.blurX)({width:y,height:M,data:n},{width:y,height:M,data:h},w>>s),(0,e.blurY)({width:y,height:M,data:h},{width:y,height:M,data:n},w>>s),(0,e.blurX)({width:y,height:M,data:n},{width:y,height:M,data:h},w>>s),(0,e.blurY)({width:y,height:M,data:h},{width:y,height:M,data:n},w>>s);var u=p(n);if(!Array.isArray(u)){var o=(0,t.max)(n);u=(0,t.tickStep)(0,o,u),(u=(0,t.range)(0,Math.floor(o/u)*u,u)).shift()}return(0,i.default)().thresholds(u).size([y,M])(n).map(b)}function b(t){return t.value*=Math.pow(2,-2*s),t.coordinates.forEach(q),t}function q(t){t.forEach(E)}function E(t){t.forEach(A)}function A(t){t[0]=t[0]*Math.pow(2,s)-g,t[1]=t[1]*Math.pow(2,s)-g}function z(){return y=l+2*(g=3*w)>>s,M=c+2*g>>s,v}return v.x=function(t){return arguments.length?(a="function"==typeof t?t:(0,n.default)(+t),v):a},v.y=function(t){return arguments.length?(f="function"==typeof t?t:(0,n.default)(+t),v):f},v.weight=function(t){return arguments.length?(d="function"==typeof t?t:(0,n.default)(+t),v):d},v.size=function(t){if(!arguments.length)return[l,c];var r=Math.ceil(t[0]),e=Math.ceil(t[1]);if(!(r>=0||r>=0))throw new Error("invalid size");return l=r,c=e,z()},v.cellSize=function(t){if(!arguments.length)return 1<<s;if(!((t=+t)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(t)/Math.LN2),z()},v.thresholds=function(t){return arguments.length?(p="function"==typeof t?t:Array.isArray(t)?(0,n.default)(r.slice.call(t)):(0,n.default)(t),v):p},v.bandwidth=function(t){if(!arguments.length)return Math.sqrt(w*(w+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return w=Math.round((Math.sqrt(4*t*t+1)-1)/2),z()},v}
},{"d3-array":"Rpnd","./array":"fVpO","./blur":"dh6e","./constant":"u0FZ","./contours":"dZSm"}],"vVeN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"contours",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"contourDensity",{enumerable:!0,get:function(){return t.default}});var e=r(require("./contours")),t=r(require("./density"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./contours":"dZSm","./density":"IjDf"}],"tL5P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var n={},r={},t=34,e=10,o=13;function u(n){return new Function("d","return {"+n.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""'}).join(",")+"}")}function i(n,r){var t=u(n);return function(e,o){return r(t(e),o,n)}}function a(n){var r=Object.create(null),t=[];return n.forEach(function(n){for(var e in n)e in r||t.push(r[e]=e)}),t}function c(n,r){var t=n+"",e=t.length;return e<r?new Array(r-e+1).join(0)+t:t}function f(n){return n<0?"-"+c(-n,6):n>9999?"+"+c(n,6):c(n,4)}function l(n){var r=n.getUTCHours(),t=n.getUTCMinutes(),e=n.getUTCSeconds(),o=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":f(n.getUTCFullYear(),4)+"-"+c(n.getUTCMonth()+1,2)+"-"+c(n.getUTCDate(),2)+(o?"T"+c(r,2)+":"+c(t,2)+":"+c(e,2)+"."+c(o,3)+"Z":e?"T"+c(r,2)+":"+c(t,2)+":"+c(e,2)+"Z":t||r?"T"+c(r,2)+":"+c(t,2)+"Z":"")}function s(c){var f=new RegExp('["'+c+"\n\r]"),s=c.charCodeAt(0);function d(u,i){var a,c=[],f=u.length,l=0,d=0,h=f<=0,p=!1;function C(){if(h)return r;if(p)return p=!1,n;var i,a,c=l;if(u.charCodeAt(c)===t){for(;l++<f&&u.charCodeAt(l)!==t||u.charCodeAt(++l)===t;);return(i=l)>=f?h=!0:(a=u.charCodeAt(l++))===e?p=!0:a===o&&(p=!0,u.charCodeAt(l)===e&&++l),u.slice(c+1,i-1).replace(/""/g,'"')}for(;l<f;){if((a=u.charCodeAt(i=l++))===e)p=!0;else if(a===o)p=!0,u.charCodeAt(l)===e&&++l;else if(a!==s)continue;return u.slice(c,i)}return h=!0,u.slice(c,f)}for(u.charCodeAt(f-1)===e&&--f,u.charCodeAt(f-1)===o&&--f;(a=C())!==r;){for(var g=[];a!==n&&a!==r;)g.push(a),a=C();i&&null==(g=i(g,d++))||c.push(g)}return c}function h(n,r){return n.map(function(n){return r.map(function(r){return C(n[r])}).join(c)})}function p(n){return n.map(C).join(c)}function C(n){return null==n?"":n instanceof Date?l(n):f.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:function(n,r){var t,e,o=d(n,function(n,o){if(t)return t(n,o-1);e=n,t=r?i(n,r):u(n)});return o.columns=e||[],o},parseRows:d,format:function(n,r){return null==r&&(r=a(n)),[r.map(C).join(c)].concat(h(n,r)).join("\n")},formatBody:function(n,r){return null==r&&(r=a(n)),h(n,r).join("\n")},formatRows:function(n){return n.map(p).join("\n")},formatRow:p,formatValue:C}}
},{}],"fKkG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csvFormatValue=exports.csvFormatRow=exports.csvFormatRows=exports.csvFormatBody=exports.csvFormat=exports.csvParseRows=exports.csvParse=void 0;var r=o(require("./dsv.js"));function o(r){return r&&r.__esModule?r:{default:r}}var s=(0,r.default)(","),e=s.parse;exports.csvParse=e;var t=s.parseRows;exports.csvParseRows=t;var a=s.format;exports.csvFormat=a;var v=s.formatBody;exports.csvFormatBody=v;var p=s.formatRows;exports.csvFormatRows=p;var c=s.formatRow;exports.csvFormatRow=c;var m=s.formatValue;exports.csvFormatValue=m;
},{"./dsv.js":"tL5P"}],"tbIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tsvFormatValue=exports.tsvFormatRow=exports.tsvFormatRows=exports.tsvFormatBody=exports.tsvFormat=exports.tsvParseRows=exports.tsvParse=void 0;var t=r(require("./dsv.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=(0,t.default)("\t"),s=o.parse;exports.tsvParse=s;var e=o.parseRows;exports.tsvParseRows=e;var a=o.format;exports.tsvFormat=a;var v=o.formatBody;exports.tsvFormatBody=v;var p=o.formatRows;exports.tsvFormatRows=p;var m=o.formatRow;exports.tsvFormatRow=m;var x=o.formatValue;exports.tsvFormatValue=x;
},{"./dsv.js":"tL5P"}],"ztEN":[function(require,module,exports) {
"use strict";function e(e){for(var r in e){var a,s,d=e[r].trim();if(d)if("true"===d)d=!0;else if("false"===d)d=!1;else if("NaN"===d)d=NaN;else if(isNaN(a=+d)){if(!(s=d.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;t&&s[4]&&!s[7]&&(d=d.replace(/-/g,"/").replace(/T/," ")),d=new Date(d)}else d=a;else d=null;e[r]=d}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();
},{}],"OUxC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"dsvFormat",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"csvParse",{enumerable:!0,get:function(){return t.csvParse}}),Object.defineProperty(exports,"csvParseRows",{enumerable:!0,get:function(){return t.csvParseRows}}),Object.defineProperty(exports,"csvFormat",{enumerable:!0,get:function(){return t.csvFormat}}),Object.defineProperty(exports,"csvFormatBody",{enumerable:!0,get:function(){return t.csvFormatBody}}),Object.defineProperty(exports,"csvFormatRows",{enumerable:!0,get:function(){return t.csvFormatRows}}),Object.defineProperty(exports,"csvFormatRow",{enumerable:!0,get:function(){return t.csvFormatRow}}),Object.defineProperty(exports,"csvFormatValue",{enumerable:!0,get:function(){return t.csvFormatValue}}),Object.defineProperty(exports,"tsvParse",{enumerable:!0,get:function(){return r.tsvParse}}),Object.defineProperty(exports,"tsvParseRows",{enumerable:!0,get:function(){return r.tsvParseRows}}),Object.defineProperty(exports,"tsvFormat",{enumerable:!0,get:function(){return r.tsvFormat}}),Object.defineProperty(exports,"tsvFormatBody",{enumerable:!0,get:function(){return r.tsvFormatBody}}),Object.defineProperty(exports,"tsvFormatRows",{enumerable:!0,get:function(){return r.tsvFormatRows}}),Object.defineProperty(exports,"tsvFormatRow",{enumerable:!0,get:function(){return r.tsvFormatRow}}),Object.defineProperty(exports,"tsvFormatValue",{enumerable:!0,get:function(){return r.tsvFormatValue}}),Object.defineProperty(exports,"autoType",{enumerable:!0,get:function(){return o.default}});var e=n(require("./dsv.js")),t=require("./csv.js"),r=require("./tsv.js"),o=n(require("./autoType.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./dsv.js":"tL5P","./csv.js":"fKkG","./tsv.js":"tbIf","./autoType.js":"ztEN"}],"YNO2":[function(require,module,exports) {
"use strict";function t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function e(e,r){return fetch(e,r).then(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"djcz":[function(require,module,exports) {
"use strict";function t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function e(e,r){return fetch(e,r).then(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"WGxS":[function(require,module,exports) {
"use strict";function t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function e(e,r){return fetch(e,r).then(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"OCbf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.tsv=exports.csv=void 0;var e=require("d3-dsv"),t=r(require("./text.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(r,n,u){return 2===arguments.length&&"function"==typeof n&&(u=n,n=void 0),(0,t.default)(r,n).then(function(t){return e(t,u)})}}function u(r,n,u,o){3===arguments.length&&"function"==typeof u&&(o=u,u=void 0);var s=(0,e.dsvFormat)(r);return(0,t.default)(n,u).then(function(e){return s.parse(e,o)})}var o=n(e.csvParse);exports.csv=o;var s=n(e.tsvParse);exports.tsv=s;
},{"d3-dsv":"OUxC","./text.js":"WGxS"}],"uMMe":[function(require,module,exports) {
"use strict";function e(e,r){return new Promise(function(n,o){var t=new Image;for(var u in r)t[u]=r[u];t.onerror=o,t.onload=function(){n(t)},t.src=e})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"QU5T":[function(require,module,exports) {
"use strict";function t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function e(e,s){return fetch(e,s).then(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"qW8b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.svg=exports.html=exports.default=void 0;var e=t(require("./text.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return function(r,n){return(0,e.default)(r,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var n=r("application/xml");exports.default=n;var o=r("text/html");exports.html=o;var s=r("image/svg+xml");exports.svg=s;
},{"./text.js":"WGxS"}],"m14J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"blob",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"buffer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"dsv",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"csv",{enumerable:!0,get:function(){return r.csv}}),Object.defineProperty(exports,"tsv",{enumerable:!0,get:function(){return r.tsv}}),Object.defineProperty(exports,"image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"json",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"text",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"xml",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return f.html}}),Object.defineProperty(exports,"svg",{enumerable:!0,get:function(){return f.svg}});var e=s(require("./blob.js")),t=s(require("./buffer.js")),r=c(require("./dsv.js")),n=s(require("./image.js")),u=s(require("./json.js")),o=s(require("./text.js")),f=c(require("./xml.js"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}
},{"./blob.js":"YNO2","./buffer.js":"djcz","./dsv.js":"OCbf","./image.js":"uMMe","./json.js":"QU5T","./text.js":"WGxS","./xml.js":"qW8b"}],"UZKW":[function(require,module,exports) {
"use strict";function n(n,t){var e;function r(){var r,u,i=e.length,l=0,o=0;for(r=0;r<i;++r)l+=(u=e[r]).x,o+=u.y;for(l=l/i-n,o=o/i-t,r=0;r<i;++r)(u=e[r]).x-=l,u.y-=o}return null==n&&(n=0),null==t&&(t=0),r.initialize=function(n){e=n},r.x=function(t){return arguments.length?(n=+t,r):n},r.y=function(n){return arguments.length?(t=+n,r):t},r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"ymhS":[function(require,module,exports) {
"use strict";function e(){return 1e-6*(Math.random()-.5)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"NcXW":[function(require,module,exports) {
"use strict";function r(r){var l=+this._x.call(null,r),e=+this._y.call(null,r);return t(this.cover(l,e),l,e,r)}function t(r,t,l,e){if(isNaN(t)||isNaN(l))return r;var n,a,i,o,u,s,_,c,f,h=r._root,y={data:e},d=r._x0,x=r._y0,N=r._x1,v=r._y1;if(!h)return r._root=y,r;for(;h.length;)if((s=t>=(a=(d+N)/2))?d=a:N=a,(_=l>=(i=(x+v)/2))?x=i:v=i,n=h,!(h=h[c=_<<1|s]))return n[c]=y,r;if(o=+r._x.call(null,h.data),u=+r._y.call(null,h.data),t===o&&l===u)return y.next=h,n?n[c]=y:r._root=y,r;do{n=n?n[c]=new Array(4):r._root=new Array(4),(s=t>=(a=(d+N)/2))?d=a:N=a,(_=l>=(i=(x+v)/2))?x=i:v=i}while((c=_<<1|s)==(f=(u>=i)<<1|o>=a));return n[f]=h,n[c]=y,r}function l(r){var l,e,n,a,i=r.length,o=new Array(i),u=new Array(i),s=1/0,_=1/0,c=-1/0,f=-1/0;for(e=0;e<i;++e)isNaN(n=+this._x.call(null,l=r[e]))||isNaN(a=+this._y.call(null,l))||(o[e]=n,u[e]=a,n<s&&(s=n),n>c&&(c=n),a<_&&(_=a),a>f&&(f=a));if(s>c||_>f)return this;for(this.cover(s,_).cover(c,f),e=0;e<i;++e)t(this,o[e],u[e],r[e]);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.addAll=l;
},{}],"ZvbQ":[function(require,module,exports) {
"use strict";function t(t,s){if(isNaN(t=+t)||isNaN(s=+s))return this;var e=this._x0,i=this._y0,r=this._x1,h=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,h=(i=Math.floor(s))+1;else{for(var o,a,_=r-e,c=this._root;e>t||t>=r||i>s||s>=h;)switch(a=(s<i)<<1|t<e,(o=new Array(4))[a]=c,c=o,_*=2,a){case 0:r=e+_,h=i+_;break;case 1:e=r-_,h=i+_;break;case 2:r=e+_,i=h-_;break;case 3:e=r-_,i=h-_}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=i,this._x1=r,this._y1=h,this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"lRCo":[function(require,module,exports) {
"use strict";function e(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"d2F2":[function(require,module,exports) {
"use strict";function t(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"liND":[function(require,module,exports) {
"use strict";function t(t,e,s,i,o){this.node=t,this.x0=e,this.y0=s,this.x1=i,this.y1=o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ee5c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=t(require("./quad.js"));function t(e){return e&&e.__esModule?e:{default:e}}function l(t,l,a){var u,n,r,s,d,h,i,f=this._x0,o=this._y0,_=this._x1,p=this._y1,x=[],c=this._root;for(c&&x.push(new e.default(c,f,o,_,p)),null==a?a=1/0:(f=t-a,o=l-a,_=t+a,p=l+a,a*=a);h=x.pop();)if(!(!(c=h.node)||(n=h.x0)>_||(r=h.y0)>p||(s=h.x1)<f||(d=h.y1)<o))if(c.length){var v=(n+s)/2,y=(r+d)/2;x.push(new e.default(c[3],v,y,s,d),new e.default(c[2],n,y,v,d),new e.default(c[1],v,r,s,y),new e.default(c[0],n,r,v,y)),(i=(l>=y)<<1|t>=v)&&(h=x[x.length-1],x[x.length-1]=x[x.length-1-i],x[x.length-1-i]=h)}else{var g=t-+this._x.call(null,c.data),w=l-+this._y.call(null,c.data),q=g*g+w*w;if(q<a){var M=Math.sqrt(a=q);f=t-M,o=l-M,_=t+M,p=l+M,u=c.data}}return u}
},{"./quad.js":"liND"}],"VX1t":[function(require,module,exports) {
"use strict";function t(t){if(isNaN(h=+this._x.call(null,t))||isNaN(n=+this._y.call(null,t)))return this;var e,i,r,s,h,n,l,o,u,f,a,x,_=this._root,d=this._x0,c=this._y0,v=this._x1,g=this._y1;if(!_)return this;if(_.length)for(;;){if((u=h>=(l=(d+v)/2))?d=l:v=l,(f=n>=(o=(c+g)/2))?c=o:g=o,e=_,!(_=_[a=f<<1|u]))return this;if(!_.length)break;(e[a+1&3]||e[a+2&3]||e[a+3&3])&&(i=e,x=a)}for(;_.data!==t;)if(r=_,!(_=_.next))return this;return(s=_.next)&&delete _.next,r?(s?r.next=s:delete r.next,this):e?(s?e[a]=s:delete e[a],(_=e[0]||e[1]||e[2]||e[3])&&_===(e[3]||e[2]||e[1]||e[0])&&!_.length&&(i?i[x]=_:this._root=_),this):(this._root=s,this)}function e(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.removeAll=e;
},{}],"fBnL":[function(require,module,exports) {
"use strict";function e(){return this._root}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"roFL":[function(require,module,exports) {
"use strict";function e(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"h8yk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./quad.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){var u,s,r,n,a,d,f=[],h=this._root;for(h&&f.push(new e.default(h,this._x0,this._y0,this._x1,this._y1));u=f.pop();)if(!t(h=u.node,r=u.x0,n=u.y0,a=u.x1,d=u.y1)&&h.length){var i=(r+a)/2,o=(n+d)/2;(s=h[3])&&f.push(new e.default(s,i,o,a,d)),(s=h[2])&&f.push(new e.default(s,r,o,i,d)),(s=h[1])&&f.push(new e.default(s,i,n,a,o)),(s=h[0])&&f.push(new e.default(s,r,n,i,o))}return this}
},{"./quad.js":"liND"}],"RYOP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./quad.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){var u,s=[],r=[];for(this._root&&s.push(new e.default(this._root,this._x0,this._y0,this._x1,this._y1));u=s.pop();){var o=u.node;if(o.length){var n,h=u.x0,a=u.y0,d=u.x1,f=u.y1,i=(h+d)/2,p=(a+f)/2;(n=o[0])&&s.push(new e.default(n,h,a,i,p)),(n=o[1])&&s.push(new e.default(n,i,a,d,p)),(n=o[2])&&s.push(new e.default(n,h,p,i,f)),(n=o[3])&&s.push(new e.default(n,i,p,d,f))}r.push(u)}for(;u=r.pop();)t(u.node,u.x0,u.y0,u.x1,u.y1);return this}
},{"./quad.js":"liND"}],"ze7i":[function(require,module,exports) {
"use strict";function t(t){return t[0]}function e(t){return arguments.length?(this._x=t,this):this._x}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultX=t,exports.default=e;
},{}],"AQOZ":[function(require,module,exports) {
"use strict";function t(t){return t[1]}function e(t){return arguments.length?(this._y=t,this):this._y}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultY=t,exports.default=e;
},{}],"UZAx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=y;var e=v(require("./add.js")),t=c(require("./cover.js")),r=c(require("./data.js")),u=c(require("./extent.js")),a=c(require("./find.js")),i=v(require("./remove.js")),o=c(require("./root.js")),n=c(require("./size.js")),f=c(require("./visit.js")),s=c(require("./visitAfter.js")),l=v(require("./x.js")),d=v(require("./y.js"));function c(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function y(e,t,r){var u=new _(null==t?l.defaultX:t,null==r?d.defaultY:r,NaN,NaN,NaN,NaN);return null==e?u:u.addAll(e)}function _(e,t,r,u,a,i){this._x=e,this._y=t,this._x0=r,this._y0=u,this._x1=a,this._y1=i,this._root=void 0}function h(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var j=y.prototype=_.prototype;j.copy=function(){var e,t,r=new _(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root;if(!u)return r;if(!u.length)return r._root=h(u),r;for(e=[{source:u,target:r._root=new Array(4)}];u=e.pop();)for(var a=0;a<4;++a)(t=u.source[a])&&(t.length?e.push({source:t,target:u.target[a]=new Array(4)}):u.target[a]=h(t));return r},j.add=e.default,j.addAll=e.addAll,j.cover=t.default,j.data=r.default,j.extent=u.default,j.find=a.default,j.remove=i.default,j.removeAll=i.removeAll,j.root=o.default,j.size=n.default,j.visit=f.default,j.visitAfter=s.default,j.x=l.default,j.y=d.default;
},{"./add.js":"NcXW","./cover.js":"ZvbQ","./data.js":"lRCo","./extent.js":"d2F2","./find.js":"ee5c","./remove.js":"VX1t","./root.js":"fBnL","./size.js":"roFL","./visit.js":"h8yk","./visitAfter.js":"RYOP","./x.js":"ze7i","./y.js":"AQOZ"}],"Fgm3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"quadtree",{enumerable:!0,get:function(){return e.default}});var e=r(require("./quadtree.js"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./quadtree.js":"UZAx"}],"EkNx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=n(require("./constant")),r=n(require("./jiggle")),e=require("d3-quadtree");function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.x+t.vx}function u(t){return t.y+t.vy}function f(n){var f,a,o=1,d=1;function v(){for(var t,n,v,c,x,s,y,g=f.length,h=0;h<d;++h)for(n=(0,e.quadtree)(f,i,u).visitAfter(l),t=0;t<g;++t)v=f[t],s=a[v.index],y=s*s,c=v.x+v.vx,x=v.y+v.vy,n.visit(q);function q(t,e,n,i,u){var f=t.data,a=t.r,d=s+a;if(!f)return e>c+d||i<c-d||n>x+d||u<x-d;if(f.index>v.index){var l=c-f.x-f.vx,g=x-f.y-f.vy,h=l*l+g*g;h<d*d&&(0===l&&(h+=(l=(0,r.default)())*l),0===g&&(h+=(g=(0,r.default)())*g),h=(d-(h=Math.sqrt(h)))/h*o,v.vx+=(l*=h)*(d=(a*=a)/(y+a)),v.vy+=(g*=h)*d,f.vx-=l*(d=1-d),f.vy-=g*d)}}}function l(t){if(t.data)return t.r=a[t.data.index];for(var r=t.r=0;r<4;++r)t[r]&&t[r].r>t.r&&(t.r=t[r].r)}function c(){if(f){var t,r,e=f.length;for(a=new Array(e),t=0;t<e;++t)r=f[t],a[r.index]=+n(r,t,f)}}return"function"!=typeof n&&(n=(0,t.default)(null==n?1:+n)),v.initialize=function(t){f=t,c()},v.iterations=function(t){return arguments.length?(d=+t,v):d},v.strength=function(t){return arguments.length?(o=+t,v):o},v.radius=function(r){return arguments.length?(n="function"==typeof r?r:(0,t.default)(+r),c(),v):n},v}
},{"./constant":"u0FZ","./jiggle":"ymhS","d3-quadtree":"Fgm3"}],"IPmr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=r(require("./constant")),t=r(require("./jiggle")),n=require("d3-collection");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.index}function u(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function o(r){var o,f,a,c,l,d=i,g=function(e){return 1/Math.min(c[e.source.index],c[e.target.index])},s=(0,e.default)(30),x=1;function v(e){for(var n=0,i=r.length;n<x;++n)for(var u,a,c,d,g,s,v,y=0;y<i;++y)a=(u=r[y]).source,d=(c=u.target).x+c.vx-a.x-a.vx||(0,t.default)(),g=c.y+c.vy-a.y-a.vy||(0,t.default)(),d*=s=((s=Math.sqrt(d*d+g*g))-f[y])/s*e*o[y],g*=s,c.vx-=d*(v=l[y]),c.vy-=g*v,a.vx+=d*(v=1-v),a.vy+=g*v}function y(){if(a){var e,t,i=a.length,g=r.length,s=(0,n.map)(a,d);for(e=0,c=new Array(i);e<g;++e)(t=r[e]).index=e,"object"!=typeof t.source&&(t.source=u(s,t.source)),"object"!=typeof t.target&&(t.target=u(s,t.target)),c[t.source.index]=(c[t.source.index]||0)+1,c[t.target.index]=(c[t.target.index]||0)+1;for(e=0,l=new Array(g);e<g;++e)t=r[e],l[e]=c[t.source.index]/(c[t.source.index]+c[t.target.index]);o=new Array(g),h(),f=new Array(g),p()}}function h(){if(a)for(var e=0,t=r.length;e<t;++e)o[e]=+g(r[e],e,r)}function p(){if(a)for(var e=0,t=r.length;e<t;++e)f[e]=+s(r[e],e,r)}return null==r&&(r=[]),v.initialize=function(e){a=e,y()},v.links=function(e){return arguments.length?(r=e,y(),v):r},v.id=function(e){return arguments.length?(d=e,v):d},v.iterations=function(e){return arguments.length?(x=+e,v):x},v.strength=function(t){return arguments.length?(g="function"==typeof t?t:(0,e.default)(+t),h(),v):g},v.distance=function(t){return arguments.length?(s="function"==typeof t?t:(0,e.default)(+t),p(),v):s},v}
},{"./constant":"u0FZ","./jiggle":"ymhS","d3-collection":"CyPa"}],"pbYj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.x=r,exports.y=i,exports.default=a;var n=require("d3-dispatch"),t=require("d3-collection"),e=require("d3-timer");function r(n){return n.x}function i(n){return n.y}var u=10,o=Math.PI*(3-Math.sqrt(5));function a(r){var i,a=1,l=.001,c=1-Math.pow(l,1/300),f=0,h=.6,s=(0,t.map)(),x=(0,e.timer)(y),v=(0,n.dispatch)("tick","end");function y(){p(),v.call("tick",i),a<l&&(x.stop(),v.call("end",i))}function p(n){var t,e,u=r.length;void 0===n&&(n=1);for(var o=0;o<n;++o)for(a+=(f-a)*c,s.each(function(n){n(a)}),t=0;t<u;++t)null==(e=r[t]).fx?e.x+=e.vx*=h:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=h:(e.y=e.fy,e.vy=0);return i}function d(){for(var n,t=0,e=r.length;t<e;++t){if((n=r[t]).index=t,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=u*Math.sqrt(t),a=t*o;n.x=i*Math.cos(a),n.y=i*Math.sin(a)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function g(n){return n.initialize&&n.initialize(r),n}return null==r&&(r=[]),d(),i={tick:p,restart:function(){return x.restart(y),i},stop:function(){return x.stop(),i},nodes:function(n){return arguments.length?(r=n,d(),s.each(g),i):r},alpha:function(n){return arguments.length?(a=+n,i):a},alphaMin:function(n){return arguments.length?(l=+n,i):l},alphaDecay:function(n){return arguments.length?(c=+n,i):+c},alphaTarget:function(n){return arguments.length?(f=+n,i):f},velocityDecay:function(n){return arguments.length?(h=1-n,i):1-h},force:function(n,t){return arguments.length>1?(null==t?s.remove(n):s.set(n,g(t)),i):s.get(n)},find:function(n,t,e){var i,u,o,a,l,c=0,f=r.length;for(null==e?e=1/0:e*=e,c=0;c<f;++c)(o=(i=n-(a=r[c]).x)*i+(u=t-a.y)*u)<e&&(l=a,e=o);return l},on:function(n,t){return arguments.length>1?(v.on(n,t),i):v.on(n)}}}
},{"d3-dispatch":"cNf8","d3-collection":"CyPa","d3-timer":"yaK5"}],"F7kN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=r(require("./constant")),e=r(require("./jiggle")),n=require("d3-quadtree"),a=require("./simulation");function r(t){return t&&t.__esModule?t:{default:t}}function u(){var r,u,i,f,l=(0,t.default)(-30),d=1,o=1/0,s=.81;function v(t){var e,f=r.length,l=(0,n.quadtree)(r,a.x,a.y).visitAfter(x);for(i=t,e=0;e<f;++e)u=r[e],l.visit(c)}function h(){if(r){var t,e,n=r.length;for(f=new Array(n),t=0;t<n;++t)e=r[t],f[e.index]=+l(e,t,r)}}function x(t){var e,n,a,r,u,i=0,l=0;if(t.length){for(a=r=u=0;u<4;++u)(e=t[u])&&(n=Math.abs(e.value))&&(i+=e.value,l+=n,a+=n*e.x,r+=n*e.y);t.x=a/l,t.y=r/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{i+=f[e.data.index]}while(e=e.next)}t.value=i}function c(t,n,a,r){if(!t.value)return!0;var l=t.x-u.x,v=t.y-u.y,h=r-n,x=l*l+v*v;if(h*h/s<x)return x<o&&(0===l&&(x+=(l=(0,e.default)())*l),0===v&&(x+=(v=(0,e.default)())*v),x<d&&(x=Math.sqrt(d*x)),u.vx+=l*t.value*i/x,u.vy+=v*t.value*i/x),!0;if(!(t.length||x>=o)){(t.data!==u||t.next)&&(0===l&&(x+=(l=(0,e.default)())*l),0===v&&(x+=(v=(0,e.default)())*v),x<d&&(x=Math.sqrt(d*x)));do{t.data!==u&&(h=f[t.data.index]*i/x,u.vx+=l*h,u.vy+=v*h)}while(t=t.next)}}return v.initialize=function(t){r=t,h()},v.strength=function(e){return arguments.length?(l="function"==typeof e?e:(0,t.default)(+e),h(),v):l},v.distanceMin=function(t){return arguments.length?(d=t*t,v):Math.sqrt(d)},v.distanceMax=function(t){return arguments.length?(o=t*t,v):Math.sqrt(o)},v.theta=function(t){return arguments.length?(s=t*t,v):Math.sqrt(s)},v}
},{"./constant":"u0FZ","./jiggle":"ymhS","d3-quadtree":"Fgm3","./simulation":"pbYj"}],"M2cA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=n(require("./constant"));function n(t){return t&&t.__esModule?t:{default:t}}function e(n,e,r){var u,f,o,i=(0,t.default)(.1);function l(t){for(var n=0,i=u.length;n<i;++n){var l=u[n],a=l.x-e||1e-6,c=l.y-r||1e-6,s=Math.sqrt(a*a+c*c),d=(o[n]-s)*f[n]*t/s;l.vx+=a*d,l.vy+=c*d}}function a(){if(u){var t,e=u.length;for(f=new Array(e),o=new Array(e),t=0;t<e;++t)o[t]=+n(u[t],t,u),f[t]=isNaN(o[t])?0:+i(u[t],t,u)}}return"function"!=typeof n&&(n=(0,t.default)(+n)),null==e&&(e=0),null==r&&(r=0),l.initialize=function(t){u=t,a()},l.strength=function(n){return arguments.length?(i="function"==typeof n?n:(0,t.default)(+n),a(),l):i},l.radius=function(e){return arguments.length?(n="function"==typeof e?e:(0,t.default)(+e),a(),l):n},l.x=function(t){return arguments.length?(e=+t,l):e},l.y=function(t){return arguments.length?(r=+t,l):r},l}
},{"./constant":"u0FZ"}],"c5Mo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=n(require("./constant"));function n(t){return t&&t.__esModule?t:{default:t}}function e(n){var e,r,u,f=(0,t.default)(.1);function o(t){for(var n,f=0,o=e.length;f<o;++f)(n=e[f]).vx+=(u[f]-n.x)*r[f]*t}function i(){if(e){var t,o=e.length;for(r=new Array(o),u=new Array(o),t=0;t<o;++t)r[t]=isNaN(u[t]=+n(e[t],t,e))?0:+f(e[t],t,e)}}return"function"!=typeof n&&(n=(0,t.default)(null==n?0:+n)),o.initialize=function(t){e=t,i()},o.strength=function(n){return arguments.length?(f="function"==typeof n?n:(0,t.default)(+n),i(),o):f},o.x=function(e){return arguments.length?(n="function"==typeof e?e:(0,t.default)(+e),i(),o):n},o}
},{"./constant":"u0FZ"}],"ldpf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=n(require("./constant"));function n(t){return t&&t.__esModule?t:{default:t}}function e(n){var e,r,u,f=(0,t.default)(.1);function o(t){for(var n,f=0,o=e.length;f<o;++f)(n=e[f]).vy+=(u[f]-n.y)*r[f]*t}function i(){if(e){var t,o=e.length;for(r=new Array(o),u=new Array(o),t=0;t<o;++t)r[t]=isNaN(u[t]=+n(e[t],t,e))?0:+f(e[t],t,e)}}return"function"!=typeof n&&(n=(0,t.default)(null==n?0:+n)),o.initialize=function(t){e=t,i()},o.strength=function(n){return arguments.length?(f="function"==typeof n?n:(0,t.default)(+n),i(),o):f},o.y=function(e){return arguments.length?(n="function"==typeof e?e:(0,t.default)(+e),i(),o):n},o}
},{"./constant":"u0FZ"}],"mlFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"forceCenter",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"forceCollide",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"forceLink",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"forceManyBody",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"forceRadial",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"forceSimulation",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"forceX",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"forceY",{enumerable:!0,get:function(){return f.default}});var e=c(require("./center")),r=c(require("./collide")),t=c(require("./link")),n=c(require("./manyBody")),u=c(require("./radial")),o=c(require("./simulation")),i=c(require("./x")),f=c(require("./y"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./center":"UZKW","./collide":"EkNx","./link":"IPmr","./manyBody":"F7kN","./radial":"M2cA","./simulation":"pbYj","./x":"c5Mo","./y":"ldpf"}],"fiGR":[function(require,module,exports) {
"use strict";function e(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"G46r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./formatDecimal.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return(t=(0,e.default)(Math.abs(t)))?t[1]:NaN}
},{"./formatDecimal.js":"fiGR"}],"CupU":[function(require,module,exports) {
"use strict";function e(e,t){return function(r,n){for(var u=r.length,s=[],o=0,i=e[0],a=0;u>0&&i>0&&(a+i+1>n&&(i=Math.max(1,n-a)),s.push(r.substring(u-=i,u+i)),!((a+=i+1)>n));)i=e[o=(o+1)%e.length];return s.reverse().join(t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"mUgz":[function(require,module,exports) {
"use strict";function e(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Nf4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.FormatSpecifier=o;var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function t(t){if(!(s=i.exec(t)))throw new Error("invalid format: "+t);var s;return new o({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}function o(i){this.fill=void 0===i.fill?" ":i.fill+"",this.align=void 0===i.align?">":i.align+"",this.sign=void 0===i.sign?"-":i.sign+"",this.symbol=void 0===i.symbol?"":i.symbol+"",this.zero=!!i.zero,this.width=void 0===i.width?void 0:+i.width,this.comma=!!i.comma,this.precision=void 0===i.precision?void 0:+i.precision,this.trim=!!i.trim,this.type=void 0===i.type?"":i.type+""}t.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};
},{}],"sIkL":[function(require,module,exports) {
"use strict";function e(e){e:for(var r,t=e.length,s=1,a=-1;s<t;++s)switch(e[s]){case".":a=r=s;break;case"0":0===a&&(a=s),r=s;break;default:if(!+e[s])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(r+1):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"WMxc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.prefixExponent=void 0;var e,r=t(require("./formatDecimal.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(t,n){var o=(0,r.default)(t,n);if(!o)return t+"";var a=o[0],i=o[1],u=i-(exports.prefixExponent=e=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,f=a.length;return u===f?a:u>f?a+new Array(u-f+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+(0,r.default)(t,Math.max(0,n+u-1))[0]}exports.prefixExponent=e;
},{"./formatDecimal.js":"fiGR"}],"gMFS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./formatDecimal.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){var n=(0,e.default)(r,t);if(!n)return r+"";var u=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+u:u.length>a+1?u.slice(0,a+1)+"."+u.slice(a+1):u+new Array(a-u.length+2).join("0")}
},{"./formatDecimal.js":"fiGR"}],"w40g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./formatPrefixAuto.js")),r=n(require("./formatRounded.js"));function n(t){return t&&t.__esModule?t:{default:t}}var e={"%":function(t,r){return(100*t).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return(0,r.default)(100*t,n)},r:r.default,s:t.default,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};exports.default=e;
},{"./formatPrefixAuto.js":"WMxc","./formatRounded.js":"gMFS"}],"Iakc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=s(require("./exponent.js")),r=s(require("./formatGroup.js")),t=s(require("./formatNumerals.js")),a=s(require("./formatSpecifier.js")),i=s(require("./formatTrim.js")),n=s(require("./formatTypes.js")),o=require("./formatPrefixAuto.js"),u=s(require("./identity.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=Array.prototype.map,f=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function c(s){var c=void 0===s.grouping||void 0===s.thousands?u.default:(0,r.default)(l.call(s.grouping,Number),s.thousands+""),d=void 0===s.currency?"":s.currency[0]+"",m=void 0===s.currency?"":s.currency[1]+"",p=void 0===s.decimal?".":s.decimal+"",h=void 0===s.numerals?u.default:(0,t.default)(l.call(s.numerals,String)),v=void 0===s.percent?"%":s.percent+"",g=void 0===s.minus?"-":s.minus+"",y=void 0===s.nan?"NaN":s.nan+"";function M(e){var r=(e=(0,a.default)(e)).fill,t=e.align,u=e.sign,s=e.symbol,l=e.zero,M=e.width,x=e.comma,j=e.precision,b=e.trim,q=e.type;"n"===q?(x=!0,q="g"):n.default[q]||(void 0===j&&(j=12),b=!0,q="g"),(l||"0"===r&&"="===t)&&(l=!0,r="0",t="=");var N="$"===s?d:"#"===s&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",k="$"===s?m:/[%p]/.test(q)?v:"",w=n.default[q],A=/[defgprs%]/.test(q);function P(e){var a,n,s,d=N,m=k;if("c"===q)m=w(e)+m,e="";else{var v=(e=+e)<0||1/e<0;if(e=isNaN(e)?y:w(Math.abs(e),j),b&&(e=(0,i.default)(e)),v&&0==+e&&"+"!==u&&(v=!1),d=(v?"("===u?u:g:"-"===u||"("===u?"":u)+d,m=("s"===q?f[8+o.prefixExponent/3]:"")+m+(v&&"("===u?")":""),A)for(a=-1,n=e.length;++a<n;)if(48>(s=e.charCodeAt(a))||s>57){m=(46===s?p+e.slice(a+1):e.slice(a))+m,e=e.slice(0,a);break}}x&&!l&&(e=c(e,1/0));var P=d.length+e.length+m.length,_=P<M?new Array(M-P+1).join(r):"";switch(x&&l&&(e=c(_+e,_.length?M-m.length:1/0),_=""),t){case"<":e=d+e+m+_;break;case"=":e=d+_+e+m;break;case"^":e=_.slice(0,P=_.length>>1)+d+e+m+_.slice(P);break;default:e=_+d+e+m}return h(e)}return j=void 0===j?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),P.toString=function(){return e+""},P}return{format:M,formatPrefix:function(r,t){var i=M(((r=(0,a.default)(r)).type="f",r)),n=3*Math.max(-8,Math.min(8,Math.floor((0,e.default)(t)/3))),o=Math.pow(10,-n),u=f[8+n/3];return function(e){return i(o*e)+u}}}}
},{"./exponent.js":"G46r","./formatGroup.js":"CupU","./formatNumerals.js":"mUgz","./formatSpecifier.js":"Nf4q","./formatTrim.js":"sIkL","./formatTypes.js":"w40g","./formatPrefixAuto.js":"WMxc","./identity.js":"IRat"}],"VIed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.formatPrefix=exports.format=void 0;var r,e,t,o=f(require("./locale.js"));function f(r){return r&&r.__esModule?r:{default:r}}function a(f){return r=(0,o.default)(f),exports.format=e=r.format,exports.formatPrefix=t=r.formatPrefix,r}exports.format=e,exports.formatPrefix=t,a({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});
},{"./locale.js":"Iakc"}],"cTEw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./exponent.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return Math.max(0,-(0,e.default)(Math.abs(t)))}
},{"./exponent.js":"G46r"}],"aFxy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=t(require("./exponent.js"));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,a){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,e.default)(a)/3)))-(0,e.default)(Math.abs(t)))}
},{"./exponent.js":"G46r"}],"we8G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./exponent.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){return t=Math.abs(t),u=Math.abs(u)-t,Math.max(0,(0,e.default)(u)-(0,e.default)(t))+1}
},{"./exponent.js":"G46r"}],"SA6z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatDefaultLocale",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"format",{enumerable:!0,get:function(){return e.format}}),Object.defineProperty(exports,"formatPrefix",{enumerable:!0,get:function(){return e.formatPrefix}}),Object.defineProperty(exports,"formatLocale",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"formatSpecifier",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"FormatSpecifier",{enumerable:!0,get:function(){return t.FormatSpecifier}}),Object.defineProperty(exports,"precisionFixed",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"precisionPrefix",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"precisionRound",{enumerable:!0,get:function(){return i.default}});var e=c(require("./defaultLocale.js")),r=u(require("./locale.js")),t=c(require("./formatSpecifier.js")),n=u(require("./precisionFixed.js")),o=u(require("./precisionPrefix.js")),i=u(require("./precisionRound.js"));function u(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./defaultLocale.js":"VIed","./locale.js":"Iakc","./formatSpecifier.js":"Nf4q","./precisionFixed.js":"cTEw","./precisionPrefix.js":"aFxy","./precisionRound.js":"we8G"}],"cq11":[function(require,module,exports) {
"use strict";function t(){return new s}function s(){this.reset()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,s.prototype={constructor:s,reset:function(){this.s=this.t=0},add:function(t){i(e,t,this.t),i(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new s;function i(t,s,e){var i=t.s=s+e,n=i-s,r=i-n;t.t=s-r+(e-n)}
},{}],"Stis":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=b,exports.asin=w,exports.haversin=_,exports.tan=exports.sqrt=exports.sign=exports.sin=exports.pow=exports.log=exports.floor=exports.exp=exports.ceil=exports.cos=exports.atan2=exports.atan=exports.abs=exports.radians=exports.degrees=exports.tau=exports.quarterPi=exports.halfPi=exports.pi=exports.epsilon2=exports.epsilon=void 0;var r=1e-6;exports.epsilon=r;var t=1e-12;exports.epsilon2=t;var e=Math.PI;exports.pi=e;var s=e/2;exports.halfPi=s;var o=e/4;exports.quarterPi=o;var a=2*e;exports.tau=a;var p=180/e;exports.degrees=p;var x=e/180;exports.radians=x;var n=Math.abs;exports.abs=n;var i=Math.atan;exports.atan=i;var v=Math.atan2;exports.atan2=v;var h=Math.cos;exports.cos=h;var l=Math.ceil;exports.ceil=l;var M=Math.exp;exports.exp=M;var u=Math.floor;exports.floor=u;var c=Math.log;exports.log=c;var f=Math.pow;exports.pow=f;var g=Math.sin;exports.sin=g;var d=Math.sign||function(r){return r>0?1:r<0?-1:0};exports.sign=d;var P=Math.sqrt;exports.sqrt=P;var q=Math.tan;function b(r){return r>1?0:r<-1?e:Math.acos(r)}function w(r){return r>1?s:r<-1?-s:Math.asin(r)}function _(r){return(r=g(r/2))*r}exports.tan=q;
},{}],"AcnE":[function(require,module,exports) {
"use strict";function n(n,t){n&&o.hasOwnProperty(n.type)&&o[n.type](n,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t={Feature:function(t,o){n(t.geometry,o)},FeatureCollection:function(t,o){for(var e=t.features,r=-1,i=e.length;++r<i;)n(e[r].geometry,o)}},o={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var o=n.coordinates,e=-1,r=o.length;++e<r;)n=o[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){e(n.coordinates,t,0)},MultiLineString:function(n,t){for(var o=n.coordinates,r=-1,i=o.length;++r<i;)e(o[r],t,0)},Polygon:function(n,t){r(n.coordinates,t)},MultiPolygon:function(n,t){for(var o=n.coordinates,e=-1,i=o.length;++e<i;)r(o[e],t)},GeometryCollection:function(t,o){for(var e=t.geometries,r=-1,i=e.length;++r<i;)n(e[r],o)}};function e(n,t,o){var e,r=-1,i=n.length-o;for(t.lineStart();++r<i;)e=n[r],t.point(e[0],e[1],e[2]);t.lineEnd()}function r(n,t){var o=-1,r=n.length;for(t.polygonStart();++o<r;)e(n[o],t,1);t.polygonEnd()}function i(o,e){o&&t.hasOwnProperty(o.type)?t[o.type](o,e):n(o,e)}
},{}],"tTg2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=q,exports.areaStream=exports.areaRingSum=void 0;var e=n(require("./adder.js")),t=require("./math.js"),a=n(require("./noop.js")),r=n(require("./stream.js"));function n(e){return e&&e.__esModule?e:{default:e}}var i=(0,e.default)();exports.areaRingSum=i;var u,o,s,d,l,f=(0,e.default)(),p={point:a.default,lineStart:a.default,lineEnd:a.default,polygonStart:function(){i.reset(),p.lineStart=c,p.lineEnd=S},polygonEnd:function(){var e=+i;f.add(e<0?t.tau+e:e),this.lineStart=this.lineEnd=this.point=a.default},sphere:function(){f.add(t.tau)}};function c(){p.point=v}function S(){m(u,o)}function v(e,a){p.point=m,u=e,o=a,e*=t.radians,a*=t.radians,s=e,d=(0,t.cos)(a=a/2+t.quarterPi),l=(0,t.sin)(a)}function m(e,a){e*=t.radians,a=(a*=t.radians)/2+t.quarterPi;var r=e-s,n=r>=0?1:-1,u=n*r,o=(0,t.cos)(a),f=(0,t.sin)(a),p=l*f,c=d*o+p*(0,t.cos)(u),S=p*n*(0,t.sin)(u);i.add((0,t.atan2)(S,c)),s=e,d=o,l=f}function q(e){return f.reset(),(0,r.default)(e,p),2*f}exports.areaStream=p;
},{"./adder.js":"cq11","./math.js":"Stis","./noop.js":"mjlc","./stream.js":"AcnE"}],"Jmo8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spherical=e,exports.cartesian=t,exports.cartesianDot=n,exports.cartesianCross=s,exports.cartesianAddInPlace=a,exports.cartesianScale=o,exports.cartesianNormalizeInPlace=c;var r=require("./math.js");function e(e){return[(0,r.atan2)(e[1],e[0]),(0,r.asin)(e[2])]}function t(e){var t=e[0],n=e[1],s=(0,r.cos)(n);return[s*(0,r.cos)(t),s*(0,r.sin)(t),(0,r.sin)(n)]}function n(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function s(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function a(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function o(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function c(e){var t=(0,r.sqrt)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}
},{"./math.js":"Stis"}],"L2Ww":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=M;var e=i(require("./adder.js")),n=require("./area.js"),r=require("./cartesian.js"),a=require("./math.js"),t=i(require("./stream.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o,s,u,l,f,c,d,p,S,g,m=(0,e.default)(),N={point:h,lineStart:j,lineEnd:E,polygonStart:function(){N.point=q,N.lineStart=y,N.lineEnd=b,m.reset(),n.areaStream.polygonStart()},polygonEnd:function(){n.areaStream.polygonEnd(),N.point=h,N.lineStart=j,N.lineEnd=E,n.areaRingSum<0?(o=-(u=180),s=-(l=90)):m>a.epsilon?l=90:m<-a.epsilon&&(s=-90),g[0]=o,g[1]=u},sphere:function(){o=-(u=180),s=-(l=90)}};function h(e,n){S.push(g=[o=e,u=e]),n<s&&(s=n),n>l&&(l=n)}function v(e,n){var t=(0,r.cartesian)([e*a.radians,n*a.radians]);if(p){var i=(0,r.cartesianCross)(p,t),c=[i[1],-i[0],0],d=(0,r.cartesianCross)(c,i);(0,r.cartesianNormalizeInPlace)(d),d=(0,r.spherical)(d);var m,N=e-f,h=N>0?1:-1,v=d[0]*a.degrees*h,j=(0,a.abs)(N)>180;j^(h*f<v&&v<h*e)?(m=d[1]*a.degrees)>l&&(l=m):j^(h*f<(v=(v+360)%360-180)&&v<h*e)?(m=-d[1]*a.degrees)<s&&(s=m):(n<s&&(s=n),n>l&&(l=n)),j?e<f?_(o,e)>_(o,u)&&(u=e):_(e,u)>_(o,u)&&(o=e):u>=o?(e<o&&(o=e),e>u&&(u=e)):e>f?_(o,e)>_(o,u)&&(u=e):_(e,u)>_(o,u)&&(o=e)}else S.push(g=[o=e,u=e]);n<s&&(s=n),n>l&&(l=n),p=t,f=e}function j(){N.point=v}function E(){g[0]=o,g[1]=u,N.point=h,p=null}function q(e,r){if(p){var t=e-f;m.add((0,a.abs)(t)>180?t+(t>0?360:-360):t)}else c=e,d=r;n.areaStream.point(e,r),v(e,r)}function y(){n.areaStream.lineStart()}function b(){q(c,d),n.areaStream.lineEnd(),(0,a.abs)(m)>a.epsilon&&(o=-(u=180)),g[0]=o,g[1]=u,p=null}function _(e,n){return(n-=e)<0?n+360:n}function x(e,n){return e[0]-n[0]}function C(e,n){return e[0]<=e[1]?e[0]<=n&&n<=e[1]:n<e[0]||e[1]<n}function M(e){var n,r,a,i,f,c,d;if(l=u=-(o=s=1/0),S=[],(0,t.default)(e,N),r=S.length){for(S.sort(x),n=1,f=[a=S[0]];n<r;++n)C(a,(i=S[n])[0])||C(a,i[1])?(_(a[0],i[1])>_(a[0],a[1])&&(a[1]=i[1]),_(i[0],a[1])>_(a[0],a[1])&&(a[0]=i[0])):f.push(a=i);for(c=-1/0,n=0,a=f[r=f.length-1];n<=r;a=i,++n)i=f[n],(d=_(a[1],i[0]))>c&&(c=d,o=i[0],u=a[1])}return S=g=null,o===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[o,s],[u,l]]}
},{"./adder.js":"cq11","./area.js":"tTg2","./cartesian.js":"Jmo8","./math.js":"Stis","./stream.js":"AcnE"}],"Xabc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=w;var n,i,s,t,a,o,r,e,u,c,d,f,l,p,v,q,g=require("./math.js"),j=N(require("./noop.js")),E=N(require("./stream.js"));function N(n){return n&&n.__esModule?n:{default:n}}var S={sphere:j.default,point:_,lineStart:h,lineEnd:M,polygonStart:function(){S.lineStart=b,S.lineEnd=O},polygonEnd:function(){S.lineStart=h,S.lineEnd=M}};function _(n,i){n*=g.radians,i*=g.radians;var s=(0,g.cos)(i);y(s*(0,g.cos)(n),s*(0,g.sin)(n),(0,g.sin)(i))}function y(i,o,r){s+=(i-s)/++n,t+=(o-t)/n,a+=(r-a)/n}function h(){S.point=m}function m(n,i){n*=g.radians,i*=g.radians;var s=(0,g.cos)(i);p=s*(0,g.cos)(n),v=s*(0,g.sin)(n),q=(0,g.sin)(i),S.point=x,y(p,v,q)}function x(n,s){n*=g.radians,s*=g.radians;var t=(0,g.cos)(s),a=t*(0,g.cos)(n),u=t*(0,g.sin)(n),c=(0,g.sin)(s),d=(0,g.atan2)((0,g.sqrt)((d=v*c-q*u)*d+(d=q*a-p*c)*d+(d=p*u-v*a)*d),p*a+v*u+q*c);i+=d,o+=d*(p+(p=a)),r+=d*(v+(v=u)),e+=d*(q+(q=c)),y(p,v,q)}function M(){S.point=_}function b(){S.point=P}function O(){k(f,l),S.point=_}function P(n,i){f=n,l=i,n*=g.radians,i*=g.radians,S.point=k;var s=(0,g.cos)(i);p=s*(0,g.cos)(n),v=s*(0,g.sin)(n),q=(0,g.sin)(i),y(p,v,q)}function k(n,s){n*=g.radians,s*=g.radians;var t=(0,g.cos)(s),a=t*(0,g.cos)(n),f=t*(0,g.sin)(n),l=(0,g.sin)(s),j=v*l-q*f,E=q*a-p*l,N=p*f-v*a,S=(0,g.sqrt)(j*j+E*E+N*N),_=(0,g.asin)(S),h=S&&-_/S;u+=h*j,c+=h*E,d+=h*N,i+=_,o+=_*(p+(p=a)),r+=_*(v+(v=f)),e+=_*(q+(q=l)),y(p,v,q)}function w(f){n=i=s=t=a=o=r=e=u=c=d=0,(0,E.default)(f,S);var l=u,p=c,v=d,q=l*l+p*p+v*v;return q<g.epsilon2&&(l=o,p=r,v=e,i<g.epsilon&&(l=s,p=t,v=a),(q=l*l+p*p+v*v)<g.epsilon2)?[NaN,NaN]:[(0,g.atan2)(p,l)*g.degrees,(0,g.asin)(v/(0,g.sqrt)(q))*g.degrees]}
},{"./math.js":"Stis","./noop.js":"mjlc","./stream.js":"AcnE"}],"BHP2":[function(require,module,exports) {
"use strict";function e(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}return e.invert&&t.invert&&(r.invert=function(r,n){return(r=t.invert(r,n))&&e.invert(r[0],r[1])}),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"hFnY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateRadians=a,exports.default=o;var n=e(require("./compose.js")),r=require("./math.js");function e(n){return n&&n.__esModule?n:{default:n}}function t(n,e){return[(0,r.abs)(n)>r.pi?n+Math.round(-n/r.tau)*r.tau:n,e]}function a(e,a,i){return(e%=r.tau)?a||i?(0,n.default)(u(e),s(a,i)):u(e):a||i?s(a,i):t}function i(n){return function(e,t){return[(e+=n)>r.pi?e-r.tau:e<-r.pi?e+r.tau:e,t]}}function u(n){var r=i(n);return r.invert=i(-n),r}function s(n,e){var t=(0,r.cos)(n),a=(0,r.sin)(n),i=(0,r.cos)(e),u=(0,r.sin)(e);function s(n,e){var s=(0,r.cos)(e),o=(0,r.cos)(n)*s,c=(0,r.sin)(n)*s,d=(0,r.sin)(e),f=d*t+o*a;return[(0,r.atan2)(c*i-f*u,o*t-d*a),(0,r.asin)(f*i+c*u)]}return s.invert=function(n,e){var s=(0,r.cos)(e),o=(0,r.cos)(n)*s,c=(0,r.sin)(n)*s,d=(0,r.sin)(e),f=d*i-c*u;return[(0,r.atan2)(c*i+d*u,o*t+f*a),(0,r.asin)(f*t-o*a)]},s}function o(n){function e(e){return(e=n(e[0]*r.radians,e[1]*r.radians))[0]*=r.degrees,e[1]*=r.degrees,e}return n=a(n[0]*r.radians,n[1]*r.radians,n.length>2?n[2]*r.radians:0),e.invert=function(e){return(e=n.invert(e[0]*r.radians,e[1]*r.radians))[0]*=r.degrees,e[1]*=r.degrees,e},e}t.invert=t;
},{"./compose.js":"BHP2","./math.js":"Stis"}],"exZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleStream=i,exports.default=o;var e=require("./cartesian.js"),t=a(require("./constant.js")),n=require("./math.js"),r=require("./rotation.js");function a(e){return e&&e.__esModule?e:{default:e}}function i(t,r,a,i,o,s){if(a){var c=(0,n.cos)(r),l=(0,n.sin)(r),f=i*a;null==o?(o=r+i*n.tau,s=r-f/2):(o=u(c,o),s=u(c,s),(i>0?o<s:o>s)&&(o+=i*n.tau));for(var d,p=o;i>0?p>s:p<s;p-=f)d=(0,e.spherical)([c,-l*(0,n.cos)(p),-l*(0,n.sin)(p)]),t.point(d[0],d[1])}}function u(t,r){(r=(0,e.cartesian)(r))[0]-=t,(0,e.cartesianNormalizeInPlace)(r);var a=(0,n.acos)(-r[1]);return((-r[2]<0?-a:a)+n.tau-n.epsilon)%n.tau}function o(){var e,a,u=(0,t.default)([0,0]),o=(0,t.default)(90),s=(0,t.default)(6),c={point:function(t,r){e.push(t=a(t,r)),t[0]*=n.degrees,t[1]*=n.degrees}};function l(){var t=u.apply(this,arguments),l=o.apply(this,arguments)*n.radians,f=s.apply(this,arguments)*n.radians;return e=[],a=(0,r.rotateRadians)(-t[0]*n.radians,-t[1]*n.radians,0).invert,i(c,l,f,1),t={type:"Polygon",coordinates:[e]},e=a=null,t}return l.center=function(e){return arguments.length?(u="function"==typeof e?e:(0,t.default)([+e[0],+e[1]]),l):u},l.radius=function(e){return arguments.length?(o="function"==typeof e?e:(0,t.default)(+e),l):o},l.precision=function(e){return arguments.length?(s="function"==typeof e?e:(0,t.default)(+e),l):s},l}
},{"./cartesian.js":"Jmo8","./constant.js":"u0FZ","./math.js":"Stis","./rotation.js":"hFnY"}],"e3vZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=n(require("../noop.js"));function n(e){return e&&e.__esModule?e:{default:e}}function t(){var n,t=[];return{point:function(e,t,u){n.push([e,t,u])},lineStart:function(){t.push(n=[])},lineEnd:e.default,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}
},{"../noop.js":"mjlc"}],"QfPV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./math.js");function r(r,s){return(0,e.abs)(r[0]-s[0])<e.epsilon&&(0,e.abs)(r[1]-s[1])<e.epsilon}
},{"./math.js":"Stis"}],"tY5q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=t(require("../pointEqual.js")),n=require("../math.js");function t(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,i){this.x=e,this.z=n,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function l(t,l,o,u,f){var s,h,p=[],a=[];if(t.forEach(function(t){if(!((l=t.length-1)<=0)){var l,r,o=t[0],u=t[l];if((0,e.default)(o,u)){if(!o[2]&&!u[2]){for(f.lineStart(),s=0;s<l;++s)f.point((o=t[s])[0],o[1]);return void f.lineEnd()}u[0]+=2*n.epsilon}p.push(r=new i(o,t,null,!0)),a.push(r.o=new i(o,null,r,!1)),p.push(r=new i(u,t,null,!1)),a.push(r.o=new i(u,null,r,!0))}}),p.length){for(a.sort(l),r(p),r(a),s=0,h=a.length;s<h;++s)a[s].e=o=!o;for(var v,d,c=p[0];;){for(var x=c,g=!0;x.v;)if((x=x.n)===c)return;v=x.z,f.lineStart();do{if(x.v=x.o.v=!0,x.e){if(g)for(s=0,h=v.length;s<h;++s)f.point((d=v[s])[0],d[1]);else u(x.x,x.n.x,1,f);x=x.n}else{if(g)for(v=x.p.z,s=v.length-1;s>=0;--s)f.point((d=v[s])[0],d[1]);else u(x.x,x.p.x,-1,f);x=x.p}v=(x=x.o).z,g=!g}while(!x.v);f.lineEnd()}}}function r(e){if(n=e.length){for(var n,t,i=0,l=e[0];++i<n;)l.n=t=e[i],t.p=l,l=t;l.n=t=e[0],t.p=l}}
},{"../pointEqual.js":"QfPV","../math.js":"Stis"}],"AbY4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=i(require("./adder.js")),a=require("./cartesian.js"),r=require("./math.js");function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,e.default)();function n(e){return(0,r.abs)(e[0])<=r.pi?e[0]:(0,r.sign)(e[0])*(((0,r.abs)(e[0])+r.pi)%r.tau-r.pi)}function t(e,i){var t=n(i),o=i[1],u=(0,r.sin)(o),l=[(0,r.sin)(t),-(0,r.cos)(t),0],c=0,f=0;s.reset(),1===u?o=r.halfPi+r.epsilon:-1===u&&(o=-r.halfPi-r.epsilon);for(var p=0,d=e.length;p<d;++p)if(P=(v=e[p]).length)for(var v,P,h=v[P-1],q=n(h),j=h[1]/2+r.quarterPi,_=(0,r.sin)(j),b=(0,r.cos)(j),g=0;g<P;++g,q=x,_=C,b=I,h=m){var m=v[g],x=n(m),z=m[1]/2+r.quarterPi,C=(0,r.sin)(z),I=(0,r.cos)(z),M=x-q,N=M>=0?1:-1,y=N*M,O=y>r.pi,k=_*C;if(s.add((0,r.atan2)(k*N*(0,r.sin)(y),b*I+k*(0,r.cos)(y))),c+=O?M+N*r.tau:M,O^q>=t^x>=t){var w=(0,a.cartesianCross)((0,a.cartesian)(h),(0,a.cartesian)(m));(0,a.cartesianNormalizeInPlace)(w);var A=(0,a.cartesianCross)(l,w);(0,a.cartesianNormalizeInPlace)(A);var B=(O^M>=0?-1:1)*(0,r.asin)(A[2]);(o>B||o===B&&(w[0]||w[1]))&&(f+=O^M>=0?1:-1)}}return(c<-r.epsilon||c<r.epsilon&&s<-r.epsilon)^1&f}
},{"./adder.js":"cq11","./cartesian.js":"Jmo8","./math.js":"Stis"}],"mgsE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=o(require("./buffer.js")),t=o(require("./rejoin.js")),e=require("../math.js"),i=o(require("../polygonContains.js")),l=require("d3-array");function o(n){return n&&n.__esModule?n:{default:n}}function r(e,o,r,f){return function(p){var s,c,d,h=o(p),g=(0,n.default)(),S=o(g),y=!1,E={point:j,lineStart:v,lineEnd:P,polygonStart:function(){E.point=x,E.lineStart=_,E.lineEnd=b,c=[],s=[]},polygonEnd:function(){E.point=j,E.lineStart=v,E.lineEnd=P,c=(0,l.merge)(c);var n=(0,i.default)(s,f);c.length?(y||(p.polygonStart(),y=!0),(0,t.default)(c,a,n,r,p)):n&&(y||(p.polygonStart(),y=!0),p.lineStart(),r(null,null,1,p),p.lineEnd()),y&&(p.polygonEnd(),y=!1),c=s=null},sphere:function(){p.polygonStart(),p.lineStart(),r(null,null,1,p),p.lineEnd(),p.polygonEnd()}};function j(n,t){e(n,t)&&p.point(n,t)}function q(n,t){h.point(n,t)}function v(){E.point=q,h.lineStart()}function P(){E.point=j,h.lineEnd()}function x(n,t){d.push([n,t]),S.point(n,t)}function _(){S.lineStart(),d=[]}function b(){x(d[0][0],d[0][1]),S.lineEnd();var n,t,e,i,l=S.clean(),o=g.result(),r=o.length;if(d.pop(),s.push(d),d=null,r)if(1&l){if((t=(e=o[0]).length-1)>0){for(y||(p.polygonStart(),y=!0),p.lineStart(),n=0;n<t;++n)p.point((i=e[n])[0],i[1]);p.lineEnd()}}else r>1&&2&l&&o.push(o.pop().concat(o.shift())),c.push(o.filter(u))}return E}}function u(n){return n.length>1}function a(n,t){return((n=n.x)[0]<0?n[1]-e.halfPi-e.epsilon:e.halfPi-n[1])-((t=t.x)[0]<0?t[1]-e.halfPi-e.epsilon:e.halfPi-t[1])}
},{"./buffer.js":"e3vZ","./rejoin.js":"tY5q","../math.js":"Stis","../polygonContains.js":"AbY4","d3-array":"Rpnd"}],"zgVO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=t(require("./index.js")),n=require("../math.js");function t(i){return i&&i.__esModule?i:{default:i}}var e=(0,i.default)(function(){return!0},o,a,[-n.pi,-n.halfPi]);function o(i){var t,e=NaN,o=NaN,a=NaN;return{lineStart:function(){i.lineStart(),t=1},point:function(l,r){var s=l>0?n.pi:-n.pi,u=(0,n.abs)(l-e);(0,n.abs)(u-n.pi)<n.epsilon?(i.point(e,o=(o+r)/2>0?n.halfPi:-n.halfPi),i.point(a,o),i.lineEnd(),i.lineStart(),i.point(s,o),i.point(l,o),t=0):a!==s&&u>=n.pi&&((0,n.abs)(e-a)<n.epsilon&&(e-=a*n.epsilon),(0,n.abs)(l-s)<n.epsilon&&(l-=s*n.epsilon),o=p(e,o,l,r),i.point(a,o),i.lineEnd(),i.lineStart(),i.point(s,o),t=0),i.point(e=l,o=r),a=s},lineEnd:function(){i.lineEnd(),e=o=NaN},clean:function(){return 2-t}}}function p(i,t,e,o){var p,a,l=(0,n.sin)(i-e);return(0,n.abs)(l)>n.epsilon?(0,n.atan)(((0,n.sin)(t)*(a=(0,n.cos)(o))*(0,n.sin)(e)-(0,n.sin)(o)*(p=(0,n.cos)(t))*(0,n.sin)(i))/(p*a*l)):(t+o)/2}function a(i,t,e,o){var p;if(null==i)p=e*n.halfPi,o.point(-n.pi,p),o.point(0,p),o.point(n.pi,p),o.point(n.pi,0),o.point(n.pi,-p),o.point(0,-p),o.point(-n.pi,-p),o.point(-n.pi,0),o.point(-n.pi,p);else if((0,n.abs)(i[0]-t[0])>n.epsilon){var a=i[0]<t[0]?n.pi:-n.pi;p=e*a/2,o.point(-a,p),o.point(0,p),o.point(a,p)}else o.point(t[0],t[1])}exports.default=e;
},{"./index.js":"mgsE","../math.js":"Stis"}],"rPdY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("../cartesian.js"),n=require("../circle.js"),i=require("../math.js"),r=t(require("../pointEqual.js")),a=t(require("./index.js"));function t(e){return e&&e.__esModule?e:{default:e}}function c(t){var c=(0,i.cos)(t),s=6*i.radians,l=c>0,o=(0,i.abs)(c)>i.epsilon;function u(e,n){return(0,i.cos)(e)*(0,i.cos)(n)>c}function p(n,r,a){var t=(0,e.cartesian)(n),s=(0,e.cartesian)(r),l=[1,0,0],o=(0,e.cartesianCross)(t,s),u=(0,e.cartesianDot)(o,o),p=o[0],f=u-p*p;if(!f)return!a&&n;var d=c*u/f,v=-c*p/f,S=(0,e.cartesianCross)(l,o),q=(0,e.cartesianScale)(l,d),j=(0,e.cartesianScale)(o,v);(0,e.cartesianAddInPlace)(q,j);var E=S,b=(0,e.cartesianDot)(q,E),D=(0,e.cartesianDot)(E,E),P=b*b-D*((0,e.cartesianDot)(q,q)-1);if(!(P<0)){var _=(0,i.sqrt)(P),h=(0,e.cartesianScale)(E,(-b-_)/D);if((0,e.cartesianAddInPlace)(h,q),h=(0,e.spherical)(h),!a)return h;var x,A=n[0],I=r[0],m=n[1],C=r[1];I<A&&(x=A,A=I,I=x);var M=I-A,y=(0,i.abs)(M-i.pi)<i.epsilon;if(!y&&C<m&&(x=m,m=C,C=x),y||M<i.epsilon?y?m+C>0^h[1]<((0,i.abs)(h[0]-A)<i.epsilon?m:C):m<=h[1]&&h[1]<=C:M>i.pi^(A<=h[0]&&h[0]<=I)){var O=(0,e.cartesianScale)(E,(-b+_)/D);return(0,e.cartesianAddInPlace)(O,q),[h,(0,e.spherical)(O)]}}}function f(e,n){var r=l?t:i.pi-t,a=0;return e<-r?a|=1:e>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}return(0,a.default)(u,function(e){var n,a,t,c,s;return{lineStart:function(){c=t=!1,s=1},point:function(d,v){var S,q=[d,v],j=u(d,v),E=l?j?0:f(d,v):j?f(d+(d<0?i.pi:-i.pi),v):0;if(!n&&(c=t=j)&&e.lineStart(),j!==t&&(!(S=p(n,q))||(0,r.default)(n,S)||(0,r.default)(q,S))&&(q[2]=1),j!==t)s=0,j?(e.lineStart(),S=p(q,n),e.point(S[0],S[1])):(S=p(n,q),e.point(S[0],S[1],2),e.lineEnd()),n=S;else if(o&&n&&l^j){var b;E&a||!(b=p(q,n,!0))||(s=0,l?(e.lineStart(),e.point(b[0][0],b[0][1]),e.point(b[1][0],b[1][1]),e.lineEnd()):(e.point(b[1][0],b[1][1]),e.lineEnd(),e.lineStart(),e.point(b[0][0],b[0][1],3)))}!j||n&&(0,r.default)(n,q)||e.point(q[0],q[1]),n=q,t=j,a=E},lineEnd:function(){t&&e.lineEnd(),n=null},clean:function(){return s|(c&&t)<<1}}},function(e,i,r,a){(0,n.circleStream)(a,t,s,r,e,i)},l?[0,-t]:[-i.pi,t-i.pi])}
},{"../cartesian.js":"Jmo8","../circle.js":"exZ4","../math.js":"Stis","../pointEqual.js":"QfPV","./index.js":"mgsE"}],"yYyd":[function(require,module,exports) {
"use strict";function e(e,r,f,i,t,u){var n,s=e[0],l=e[1],o=0,a=1,c=r[0]-s,d=r[1]-l;if(n=f-s,c||!(n>0)){if(n/=c,c<0){if(n<o)return;n<a&&(a=n)}else if(c>0){if(n>a)return;n>o&&(o=n)}if(n=t-s,c||!(n<0)){if(n/=c,c<0){if(n>a)return;n>o&&(o=n)}else if(c>0){if(n<o)return;n<a&&(a=n)}if(n=i-l,d||!(n>0)){if(n/=d,d<0){if(n<o)return;n<a&&(a=n)}else if(d>0){if(n>a)return;n>o&&(o=n)}if(n=u-l,d||!(n<0)){if(n/=d,d<0){if(n>a)return;n>o&&(o=n)}else if(d>0){if(n<o)return;n<a&&(a=n)}return o>0&&(e[0]=s+o*c,e[1]=l+o*d),a<1&&(r[0]=s+a*c,r[1]=l+a*d),!0}}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"wNQ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var n=require("../math.js"),t=o(require("./buffer.js")),e=o(require("./line.js")),r=o(require("./rejoin.js")),i=require("d3-array");function o(n){return n&&n.__esModule?n:{default:n}}var u=1e9,a=-u;function l(o,l,f,p){function s(n,t){return o<=n&&n<=f&&l<=t&&t<=p}function c(n,t,e,r){var i=0,u=0;if(null==n||(i=d(n,e))!==(u=d(t,e))||v(n,t)<0^e>0)do{r.point(0===i||3===i?o:f,i>1?p:l)}while((i=(i+e+4)%4)!==u);else r.point(t[0],t[1])}function d(t,e){return(0,n.abs)(t[0]-o)<n.epsilon?e>0?0:3:(0,n.abs)(t[0]-f)<n.epsilon?e>0?2:1:(0,n.abs)(t[1]-l)<n.epsilon?e>0?1:0:e>0?3:2}function h(n,t){return v(n.x,t.x)}function v(n,t){var e=d(n,1),r=d(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(n){var d,v,m,M,g,x,j,S,y,E,b,q=n,_=(0,t.default)(),N={point:w,lineStart:function(){N.point=O,v&&v.push(m=[]);E=!0,y=!1,j=S=NaN},lineEnd:function(){d&&(O(M,g),x&&y&&_.rejoin(),d.push(_.result()));N.point=w,y&&q.lineEnd()},polygonStart:function(){q=_,d=[],v=[],b=!0},polygonEnd:function(){var t=function(){for(var n=0,t=0,e=v.length;t<e;++t)for(var r,i,u=v[t],a=1,l=u.length,f=u[0],s=f[0],c=f[1];a<l;++a)r=s,i=c,f=u[a],s=f[0],c=f[1],i<=p?c>p&&(s-r)*(p-i)>(c-i)*(o-r)&&++n:c<=p&&(s-r)*(p-i)<(c-i)*(o-r)&&--n;return n}(),e=b&&t,u=(d=(0,i.merge)(d)).length;(e||u)&&(n.polygonStart(),e&&(n.lineStart(),c(null,null,1,n),n.lineEnd()),u&&(0,r.default)(d,h,t,c,n),n.polygonEnd());q=n,d=v=m=null}};function w(n,t){s(n,t)&&q.point(n,t)}function O(n,t){var r=s(n,t);if(v&&m.push([n,t]),E)M=n,g=t,x=r,E=!1,r&&(q.lineStart(),q.point(n,t));else if(r&&y)q.point(n,t);else{var i=[j=Math.max(a,Math.min(u,j)),S=Math.max(a,Math.min(u,S))],c=[n=Math.max(a,Math.min(u,n)),t=Math.max(a,Math.min(u,t))];(0,e.default)(i,c,o,l,f,p)?(y||(q.lineStart(),q.point(i[0],i[1])),q.point(c[0],c[1]),r||q.lineEnd(),b=!1):r&&(q.lineStart(),q.point(n,t),b=!1)}j=n,S=t,y=r}return N}}
},{"../math.js":"Stis","./buffer.js":"e3vZ","./line.js":"yYyd","./rejoin.js":"tY5q","d3-array":"Rpnd"}],"iwSF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./rectangle.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){var t,r,n,u=0,l=0,o=960,a=500;return n={stream:function(n){return t&&r===n?t:t=(0,e.default)(u,l,o,a)(r=n)},extent:function(e){return arguments.length?(u=+e[0][0],l=+e[0][1],o=+e[1][0],a=+e[1][1],t=r=null,n):[[u,l],[o,a]]}}}
},{"./rectangle.js":"wNQ8"}],"a487":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=j;var e=r(require("./adder.js")),n=require("./math.js"),t=r(require("./noop.js")),a=r(require("./stream.js"));function r(e){return e&&e.__esModule?e:{default:e}}var i,u,d,s=(0,e.default)(),o={sphere:t.default,point:t.default,lineStart:l,lineEnd:t.default,polygonStart:t.default,polygonEnd:t.default};function l(){o.point=c,o.lineEnd=f}function f(){o.point=o.lineEnd=t.default}function c(e,t){e*=n.radians,t*=n.radians,i=e,u=(0,n.sin)(t),d=(0,n.cos)(t),o.point=p}function p(e,t){e*=n.radians,t*=n.radians;var a=(0,n.sin)(t),r=(0,n.cos)(t),o=(0,n.abs)(e-i),l=(0,n.cos)(o),f=r*(0,n.sin)(o),c=d*a-u*r*l,p=u*a+d*r*l;s.add((0,n.atan2)((0,n.sqrt)(f*f+c*c),p)),i=e,u=a,d=r}function j(e){return s.reset(),(0,a.default)(e,o),+s}
},{"./adder.js":"cq11","./math.js":"Stis","./noop.js":"mjlc","./stream.js":"AcnE"}],"Xqqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=t(require("./length.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=[null,null],u={type:"LineString",coordinates:r};function n(t,n){return r[0]=t,r[1]=n,(0,e.default)(u)}
},{"./length.js":"a487"}],"lYqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var r=e(require("./polygonContains.js")),n=e(require("./distance.js")),t=require("./math.js");function e(r){return r&&r.__esModule?r:{default:r}}var o={Feature:function(r,n){return i(r.geometry,n)},FeatureCollection:function(r,n){for(var t=r.features,e=-1,o=t.length;++e<o;)if(i(t[e].geometry,n))return!0;return!1}},u={Sphere:function(){return!0},Point:function(r,n){return f(r.coordinates,n)},MultiPoint:function(r,n){for(var t=r.coordinates,e=-1,o=t.length;++e<o;)if(f(t[e],n))return!0;return!1},LineString:function(r,n){return a(r.coordinates,n)},MultiLineString:function(r,n){for(var t=r.coordinates,e=-1,o=t.length;++e<o;)if(a(t[e],n))return!0;return!1},Polygon:function(r,n){return c(r.coordinates,n)},MultiPolygon:function(r,n){for(var t=r.coordinates,e=-1,o=t.length;++e<o;)if(c(t[e],n))return!0;return!1},GeometryCollection:function(r,n){for(var t=r.geometries,e=-1,o=t.length;++e<o;)if(i(t[e],n))return!0;return!1}};function i(r,n){return!(!r||!u.hasOwnProperty(r.type))&&u[r.type](r,n)}function f(r,t){return 0===(0,n.default)(r,t)}function a(r,e){for(var o,u,i,f=0,a=r.length;f<a;f++){if(0===(u=(0,n.default)(r[f],e)))return!0;if(f>0&&(i=(0,n.default)(r[f],r[f-1]))>0&&o<=i&&u<=i&&(o+u-i)*(1-Math.pow((o-u)/i,2))<t.epsilon2*i)return!0;o=u}return!1}function c(n,t){return!!(0,r.default)(n.map(l),s(t))}function l(r){return(r=r.map(s)).pop(),r}function s(r){return[r[0]*t.radians,r[1]*t.radians]}function d(r,n){return(r&&o.hasOwnProperty(r.type)?o[r.type]:i)(r,n)}
},{"./polygonContains.js":"AbY4","./distance.js":"Xqqx","./math.js":"Stis"}],"pBbd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.graticule10=o;var n=require("d3-array"),e=require("./math.js");function t(t,r,i){var o=(0,n.range)(t,r-e.epsilon,i).concat(r);return function(n){return o.map(function(e){return[n,e]})}}function r(t,r,i){var o=(0,n.range)(t,r-e.epsilon,i).concat(r);return function(n){return o.map(function(e){return[e,n]})}}function i(){var i,o,u,c,a,s,l,p,f,g,M,x,h=10,m=h,d=90,j=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return(0,n.range)((0,e.ceil)(c/d)*d,u,d).map(M).concat((0,n.range)((0,e.ceil)(p/j)*j,l,j).map(x)).concat((0,n.range)((0,e.ceil)(o/h)*h,i,h).filter(function(n){return(0,e.abs)(n%d)>e.epsilon}).map(f)).concat((0,n.range)((0,e.ceil)(s/m)*m,a,m).filter(function(n){return(0,e.abs)(n%j)>e.epsilon}).map(g))}return y.lines=function(){return b().map(function(n){return{type:"LineString",coordinates:n}})},y.outline=function(){return{type:"Polygon",coordinates:[M(c).concat(x(l).slice(1),M(u).reverse().slice(1),x(p).reverse().slice(1))]}},y.extent=function(n){return arguments.length?y.extentMajor(n).extentMinor(n):y.extentMinor()},y.extentMajor=function(n){return arguments.length?(c=+n[0][0],u=+n[1][0],p=+n[0][1],l=+n[1][1],c>u&&(n=c,c=u,u=n),p>l&&(n=p,p=l,l=n),y.precision(v)):[[c,p],[u,l]]},y.extentMinor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],a=+n[1][1],o>i&&(n=o,o=i,i=n),s>a&&(n=s,s=a,a=n),y.precision(v)):[[o,s],[i,a]]},y.step=function(n){return arguments.length?y.stepMajor(n).stepMinor(n):y.stepMinor()},y.stepMajor=function(n){return arguments.length?(d=+n[0],j=+n[1],y):[d,j]},y.stepMinor=function(n){return arguments.length?(h=+n[0],m=+n[1],y):[h,m]},y.precision=function(n){return arguments.length?(v=+n,f=t(s,a,90),g=r(o,i,v),M=t(p,l,90),x=r(c,u,v),y):v},y.extentMajor([[-180,-90+e.epsilon],[180,90-e.epsilon]]).extentMinor([[-180,-80-e.epsilon],[180,80+e.epsilon]])}function o(){return i()()}
},{"d3-array":"Rpnd","./math.js":"Stis"}],"eVSx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("./math.js");function s(s,r){var n=s[0]*e.radians,a=s[1]*e.radians,i=r[0]*e.radians,t=r[1]*e.radians,d=(0,e.cos)(a),o=(0,e.sin)(a),u=(0,e.cos)(t),c=(0,e.sin)(t),v=d*(0,e.cos)(n),f=d*(0,e.sin)(n),g=u*(0,e.cos)(i),h=u*(0,e.sin)(i),l=2*(0,e.asin)((0,e.sqrt)((0,e.haversin)(t-a)+d*u*(0,e.haversin)(i-n))),p=(0,e.sin)(l),q=l?function(s){var r=(0,e.sin)(s*=l)/p,n=(0,e.sin)(l-s)/p,a=n*v+r*g,i=n*f+r*h,t=n*o+r*c;return[(0,e.atan2)(i,a)*e.degrees,(0,e.atan2)(t,(0,e.sqrt)(a*a+i*i))*e.degrees]}:function(){return[n*e.degrees,a*e.degrees]};return q.distance=l,q}
},{"./math.js":"Stis"}],"LPf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../adder.js")),t=require("../math.js"),n=r(require("../noop.js"));function r(e){return e&&e.__esModule?e:{default:e}}var u,o,i,a,d=(0,e.default)(),l=(0,e.default)(),f={point:n.default,lineStart:n.default,lineEnd:n.default,polygonStart:function(){f.lineStart=s,f.lineEnd=v},polygonEnd:function(){f.lineStart=f.lineEnd=f.point=n.default,d.add((0,t.abs)(l)),l.reset()},result:function(){var e=d/2;return d.reset(),e}};function s(){f.point=p}function p(e,t){f.point=c,u=i=e,o=a=t}function c(e,t){l.add(a*e-i*t),i=e,a=t}function v(){c(u,o)}var j=f;exports.default=j;
},{"../adder.js":"cq11","../math.js":"Stis","../noop.js":"mjlc"}],"Cv5M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../noop.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=1/0,u=r,n=-r,o=n,l={point:a,lineStart:e.default,lineEnd:e.default,polygonStart:e.default,polygonEnd:e.default,result:function(){var e=[[r,u],[n,o]];return n=o=-(u=r=1/0),e}};function a(e,t){e<r&&(r=e),e>n&&(n=e),t<u&&(u=t),t>o&&(o=t)}var d=l;exports.default=d;
},{"../noop.js":"mjlc"}],"zcTP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n,t,i,o,e=require("../math.js"),r=0,u=0,a=0,f=0,c=0,l=0,p=0,s=0,d=0,v={point:E,lineStart:N,lineEnd:x,polygonStart:function(){v.lineStart=y,v.lineEnd=g},polygonEnd:function(){v.point=E,v.lineStart=N,v.lineEnd=x},result:function(){var n=d?[p/d,s/d]:l?[f/l,c/l]:a?[r/a,u/a]:[NaN,NaN];return r=u=a=f=c=l=p=s=d=0,n}};function E(n,t){r+=n,u+=t,++a}function N(){v.point=S}function S(n,t){v.point=q,E(i=n,o=t)}function q(n,t){var r=n-i,u=t-o,a=(0,e.sqrt)(r*r+u*u);f+=a*(i+n)/2,c+=a*(o+t)/2,l+=a,E(i=n,o=t)}function x(){v.point=E}function y(){v.point=j}function g(){_(n,t)}function j(e,r){v.point=_,E(n=i=e,t=o=r)}function _(n,t){var r=n-i,u=t-o,a=(0,e.sqrt)(r*r+u*u);f+=a*(i+n)/2,c+=a*(o+t)/2,l+=a,p+=(a=o*n-i*t)*(i+n),s+=a*(o+t),d+=3*a,E(i=n,o=t)}var b=v;exports.default=b;
},{"../math.js":"Stis"}],"RRtG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("../math.js"),i=e(require("../noop.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){this._context=t}n.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(i,e){switch(this._point){case 0:this._context.moveTo(i,e),this._point=1;break;case 1:this._context.lineTo(i,e);break;default:this._context.moveTo(i+this._radius,e),this._context.arc(i,e,this._radius,0,t.tau)}},result:i.default};
},{"../math.js":"Stis","../noop.js":"mjlc"}],"rYGy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../adder.js")),e=require("../math.js"),n=r(require("../noop.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o,u,i,a,d,l=(0,t.default)(),f={point:n.default,lineStart:function(){f.point=s},lineEnd:function(){o&&p(u,i),f.point=n.default},polygonStart:function(){o=!0},polygonEnd:function(){o=null},result:function(){var t=+l;return l.reset(),t}};function s(t,e){f.point=p,u=a=t,i=d=e}function p(t,n){a-=t,d-=n,l.add((0,e.sqrt)(a*a+d*d)),a=t,d=n}var c=f;exports.default=c;
},{"../adder.js":"cq11","../math.js":"Stis","../noop.js":"mjlc"}],"u4Ic":[function(require,module,exports) {
"use strict";function t(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};
},{}],"Ixq3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=f(require("../identity.js")),t=f(require("../stream.js")),u=f(require("./area.js")),n=f(require("./bounds.js")),r=f(require("./centroid.js")),i=f(require("./context.js")),l=f(require("./measure.js")),o=f(require("./string.js"));function f(e){return e&&e.__esModule?e:{default:e}}function a(f,a){var s,d,c=4.5;function p(e){return e&&("function"==typeof c&&d.pointRadius(+c.apply(this,arguments)),(0,t.default)(e,s(d))),d.result()}return p.area=function(e){return(0,t.default)(e,s(u.default)),u.default.result()},p.measure=function(e){return(0,t.default)(e,s(l.default)),l.default.result()},p.bounds=function(e){return(0,t.default)(e,s(n.default)),n.default.result()},p.centroid=function(e){return(0,t.default)(e,s(r.default)),r.default.result()},p.projection=function(t){return arguments.length?(s=null==t?(f=null,e.default):(f=t).stream,p):f},p.context=function(e){return arguments.length?(d=null==e?(a=null,new o.default):new i.default(a=e),"function"!=typeof c&&d.pointRadius(c),p):a},p.pointRadius=function(e){return arguments.length?(c="function"==typeof e?e:(d.pointRadius(+e),+e),p):c},p.projection(f).context(a)}
},{"../identity.js":"IRat","../stream.js":"AcnE","./area.js":"LPf1","./bounds.js":"Cv5M","./centroid.js":"zcTP","./context.js":"RRtG","./measure.js":"rYGy","./string.js":"u4Ic"}],"SUNr":[function(require,module,exports) {
"use strict";function t(t){return{stream:n(t)}}function n(t){return function(n){var e=new r;for(var o in t)e[o]=t[o];return e.stream=n,e}}function r(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.transformer=n,r.prototype={constructor:r,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
},{}],"Jpsc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitExtent=u,exports.fitSize=a,exports.fitWidth=l,exports.fitHeight=i;var t=n(require("../stream.js")),e=n(require("../path/bounds.js"));function n(t){return t&&t.__esModule?t:{default:t}}function r(n,r,u){var a=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=a&&n.clipExtent(null),(0,t.default)(u,n.stream(e.default)),r(e.default.result()),null!=a&&n.clipExtent(a),n}function u(t,e,n){return r(t,function(n){var r=e[1][0]-e[0][0],u=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),u/(n[1][1]-n[0][1])),l=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,i=+e[0][1]+(u-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([l,i])},n)}function a(t,e,n){return u(t,[[0,0],e],n)}function l(t,e,n){return r(t,function(n){var r=+e,u=r/(n[1][0]-n[0][0]),a=(r-u*(n[1][0]+n[0][0]))/2,l=-u*n[0][1];t.scale(150*u).translate([a,l])},n)}function i(t,e,n){return r(t,function(n){var r=+e,u=r/(n[1][1]-n[0][1]),a=-u*n[0][0],l=(r-u*(n[1][1]+n[0][1]))/2;t.scale(150*u).translate([a,l])},n)}
},{"../stream.js":"AcnE","../path/bounds.js":"Cv5M"}],"bR5j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=require("../cartesian.js"),t=require("../math.js"),i=require("../transform.js"),o=16,r=(0,t.cos)(30*t.radians);function e(n,t){return+t?u(n,t):a(n)}function a(n){return(0,i.transformer)({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function u(i,e){function a(n,o,u,s,c,f,p,l,d,v,E,S,b,y){var g=p-n,j=l-o,m=g*g+j*j;if(m>4*e&&b--){var q=s+v,h=c+E,x=f+S,N=(0,t.sqrt)(q*q+h*h+x*x),_=(0,t.asin)(x/=N),M=(0,t.abs)((0,t.abs)(x)-1)<t.epsilon||(0,t.abs)(u-d)<t.epsilon?(u+d)/2:(0,t.atan2)(h,q),O=i(M,_),P=O[0],k=O[1],w=P-n,z=k-o,A=j*w-g*z;(A*A/m>e||(0,t.abs)((g*w+j*z)/m-.5)>.3||s*v+c*E+f*S<r)&&(a(n,o,u,s,c,f,P,k,M,q/=N,h/=N,x,b,y),y.point(P,k),a(P,k,M,q,h,x,p,l,d,v,E,S,b,y))}}return function(t){var r,e,u,s,c,f,p,l,d,v,E,S,b={point:y,lineStart:g,lineEnd:m,polygonStart:function(){t.polygonStart(),b.lineStart=q},polygonEnd:function(){t.polygonEnd(),b.lineStart=g}};function y(n,o){n=i(n,o),t.point(n[0],n[1])}function g(){l=NaN,b.point=j,t.lineStart()}function j(r,e){var u=(0,n.cartesian)([r,e]),s=i(r,e);a(l,d,p,v,E,S,l=s[0],d=s[1],p=r,v=u[0],E=u[1],S=u[2],o,t),t.point(l,d)}function m(){b.point=y,t.lineEnd()}function q(){g(),b.point=h,b.lineEnd=x}function h(n,t){j(r=n,t),e=l,u=d,s=v,c=E,f=S,b.point=j}function x(){a(l,d,p,v,E,S,e,u,r,s,c,f,o,t),b.lineEnd=m,m()}return b}}
},{"../cartesian.js":"Jmo8","../math.js":"Stis","../transform.js":"SUNr"}],"mrcH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h,exports.projectionMutator=v;var n=s(require("../clip/antimeridian.js")),e=s(require("../clip/circle.js")),t=s(require("../clip/rectangle.js")),r=s(require("../compose.js")),u=s(require("../identity.js")),i=require("../math.js"),l=require("../rotation.js"),a=require("../transform.js"),f=require("./fit.js"),o=s(require("./resample.js"));function s(n){return n&&n.__esModule?n:{default:n}}var c=(0,a.transformer)({point:function(n,e){this.stream.point(n*i.radians,e*i.radians)}});function d(n){return(0,a.transformer)({point:function(e,t){var r=n(e,t);return this.stream.point(r[0],r[1])}})}function g(n,e,t,r,u){function i(i,l){return[e+n*(i*=r),t-n*(l*=u)]}return i.invert=function(i,l){return[(i-e)/n*r,(t-l)/n*u]},i}function p(n,e,t,r,u,l){var a=(0,i.cos)(l),f=(0,i.sin)(l),o=a*n,s=f*n,c=a/n,d=f/n,g=(f*t-a*e)/n,p=(f*e+a*t)/n;function h(n,i){return[o*(n*=r)-s*(i*=u)+e,t-s*n-o*i]}return h.invert=function(n,e){return[r*(c*n-d*e+g),u*(p-d*n-c*e)]},h}function h(n){return v(function(){return n})()}function v(a){var s,h,v,j,q,m,x,y,_,E,M=150,z=480,H=250,S=0,W=0,b=0,A=0,O=0,P=0,R=1,X=1,Y=null,k=n.default,w=null,B=u.default,C=.5;function D(n){return y(n[0]*i.radians,n[1]*i.radians)}function F(n){return(n=y.invert(n[0],n[1]))&&[n[0]*i.degrees,n[1]*i.degrees]}function G(){var n=p(M,0,0,R,X,P).apply(null,s(S,W)),e=(P?p:g)(M,z-n[0],H-n[1],R,X,P);return h=(0,l.rotateRadians)(b,A,O),x=(0,r.default)(s,e),y=(0,r.default)(h,x),m=(0,o.default)(x,C),I()}function I(){return _=E=null,D}return D.stream=function(n){return _&&E===n?_:_=c(d(h)(k(m(B(E=n)))))},D.preclip=function(n){return arguments.length?(k=n,Y=void 0,I()):k},D.postclip=function(n){return arguments.length?(B=n,w=v=j=q=null,I()):B},D.clipAngle=function(t){return arguments.length?(k=+t?(0,e.default)(Y=t*i.radians):(Y=null,n.default),I()):Y*i.degrees},D.clipExtent=function(n){return arguments.length?(B=null==n?(w=v=j=q=null,u.default):(0,t.default)(w=+n[0][0],v=+n[0][1],j=+n[1][0],q=+n[1][1]),I()):null==w?null:[[w,v],[j,q]]},D.scale=function(n){return arguments.length?(M=+n,G()):M},D.translate=function(n){return arguments.length?(z=+n[0],H=+n[1],G()):[z,H]},D.center=function(n){return arguments.length?(S=n[0]%360*i.radians,W=n[1]%360*i.radians,G()):[S*i.degrees,W*i.degrees]},D.rotate=function(n){return arguments.length?(b=n[0]%360*i.radians,A=n[1]%360*i.radians,O=n.length>2?n[2]%360*i.radians:0,G()):[b*i.degrees,A*i.degrees,O*i.degrees]},D.angle=function(n){return arguments.length?(P=n%360*i.radians,G()):P*i.degrees},D.reflectX=function(n){return arguments.length?(R=n?-1:1,G()):R<0},D.reflectY=function(n){return arguments.length?(X=n?-1:1,G()):X<0},D.precision=function(n){return arguments.length?(m=(0,o.default)(x,C=n*n),I()):(0,i.sqrt)(C)},D.fitExtent=function(n,e){return(0,f.fitExtent)(D,n,e)},D.fitSize=function(n,e){return(0,f.fitSize)(D,n,e)},D.fitWidth=function(n,e){return(0,f.fitWidth)(D,n,e)},D.fitHeight=function(n,e){return(0,f.fitHeight)(D,n,e)},function(){return s=a.apply(this,arguments),D.invert=s.invert&&F,G()}}
},{"../clip/antimeridian.js":"zgVO","../clip/circle.js":"rPdY","../clip/rectangle.js":"wNQ8","../compose.js":"BHP2","../identity.js":"IRat","../math.js":"Stis","../rotation.js":"hFnY","../transform.js":"SUNr","./fit.js":"Jpsc","./resample.js":"bR5j"}],"tLZN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicProjection=t;var e=require("../math.js"),r=require("./index.js");function t(t){var n=0,i=e.pi/3,o=(0,r.projectionMutator)(t),s=o(n,i);return s.parallels=function(r){return arguments.length?o(n=r[0]*e.radians,i=r[1]*e.radians):[n*e.degrees,i*e.degrees]},s}
},{"../math.js":"Stis","./index.js":"mrcH"}],"TRyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cylindricalEqualAreaRaw=e;var r=require("../math.js");function e(e){var n=(0,r.cos)(e);function t(e,t){return[e*n,(0,r.sin)(t)/n]}return t.invert=function(e,t){return[e/n,(0,r.asin)(t*n)]},t}
},{"../math.js":"Stis"}],"TTxy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicEqualAreaRaw=i,exports.default=a;var r=require("../math.js"),e=require("./conic.js"),n=require("./cylindricalEqualArea.js");function i(e,i){var a=(0,r.sin)(e),s=(a+(0,r.sin)(i))/2;if((0,r.abs)(s)<r.epsilon)return(0,n.cylindricalEqualAreaRaw)(e);var t=1+a*(2*s-a),c=(0,r.sqrt)(t)/s;function u(e,n){var i=(0,r.sqrt)(t-2*s*(0,r.sin)(n))/s;return[i*(0,r.sin)(e*=s),c-i*(0,r.cos)(e)]}return u.invert=function(e,n){var i=c-n,a=(0,r.atan2)(e,(0,r.abs)(i))*(0,r.sign)(i);return i*s<0&&(a-=r.pi*(0,r.sign)(e)*(0,r.sign)(i)),[a/s,(0,r.asin)((t-(e*e+i*i)*s*s)/(2*s))]},u}function a(){return(0,e.conicProjection)(i).scale(155.424).center([0,33.6442])}
},{"../math.js":"Stis","./conic.js":"tLZN","./cylindricalEqualArea.js":"TRyd"}],"zp4D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./conicEqualArea.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){return(0,e.default)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}
},{"./conicEqualArea.js":"TTxy"}],"VbRR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("../math.js"),n=i(require("./albers.js")),e=i(require("./conicEqualArea.js")),r=require("./fit.js");function i(t){return t&&t.__esModule?t:{default:t}}function a(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function o(){var i,o,l,u,s,c,f=(0,n.default)(),p=(0,e.default)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),v=(0,e.default)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d={point:function(t,n){c=[t,n]}};function h(t){var n=t[0],e=t[1];return c=null,l.point(n,e),c||(u.point(n,e),c)||(s.point(n,e),c)}function g(){return i=o=null,h}return h.invert=function(t){var n=f.scale(),e=f.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?p:i>=.166&&i<.234&&r>=-.214&&r<-.115?v:f).invert(t)},h.stream=function(t){return i&&o===t?i:i=a([f.stream(o=t),p.stream(t),v.stream(t)])},h.precision=function(t){return arguments.length?(f.precision(t),p.precision(t),v.precision(t),g()):f.precision()},h.scale=function(t){return arguments.length?(f.scale(t),p.scale(.35*t),v.scale(t),h.translate(f.translate())):f.scale()},h.translate=function(n){if(!arguments.length)return f.translate();var e=f.scale(),r=+n[0],i=+n[1];return l=f.translate(n).clipExtent([[r-.455*e,i-.238*e],[r+.455*e,i+.238*e]]).stream(d),u=p.translate([r-.307*e,i+.201*e]).clipExtent([[r-.425*e+t.epsilon,i+.12*e+t.epsilon],[r-.214*e-t.epsilon,i+.234*e-t.epsilon]]).stream(d),s=v.translate([r-.205*e,i+.212*e]).clipExtent([[r-.214*e+t.epsilon,i+.166*e+t.epsilon],[r-.115*e-t.epsilon,i+.234*e-t.epsilon]]).stream(d),g()},h.fitExtent=function(t,n){return(0,r.fitExtent)(h,t,n)},h.fitSize=function(t,n){return(0,r.fitSize)(h,t,n)},h.fitWidth=function(t,n){return(0,r.fitWidth)(h,t,n)},h.fitHeight=function(t,n){return(0,r.fitHeight)(h,t,n)},h.scale(1070)}
},{"../math.js":"Stis","./albers.js":"zp4D","./conicEqualArea.js":"TTxy","./fit.js":"Jpsc"}],"nG4u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.azimuthalRaw=t,exports.azimuthalInvert=n;var r=require("../math.js");function t(t){return function(n,e){var s=(0,r.cos)(n),u=(0,r.cos)(e),a=t(s*u);return[a*u*(0,r.sin)(n),a*(0,r.sin)(e)]}}function n(t){return function(n,e){var s=(0,r.sqrt)(n*n+e*e),u=t(s),a=(0,r.sin)(u),i=(0,r.cos)(u);return[(0,r.atan2)(n*a,s*i),(0,r.asin)(s&&e*a/s)]}}
},{"../math.js":"Stis"}],"uNRF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.azimuthalEqualAreaRaw=void 0;var e=require("../math.js"),r=require("./azimuthal.js"),t=a(require("./index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.azimuthalRaw)(function(r){return(0,e.sqrt)(2/(1+r))});function i(){return(0,t.default)(u).scale(124.75).clipAngle(179.999)}exports.azimuthalEqualAreaRaw=u,u.invert=(0,r.azimuthalInvert)(function(r){return 2*(0,e.asin)(r/2)});
},{"../math.js":"Stis","./azimuthal.js":"nG4u","./index.js":"mrcH"}],"lpU0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.azimuthalEquidistantRaw=void 0;var e=require("../math.js"),t=require("./azimuthal.js"),r=u(require("./index.js"));function u(e){return e&&e.__esModule?e:{default:e}}var a=(0,t.azimuthalRaw)(function(t){return(t=(0,e.acos)(t))&&t/(0,e.sin)(t)});function i(){return(0,r.default)(a).scale(79.4188).clipAngle(179.999)}exports.azimuthalEquidistantRaw=a,a.invert=(0,t.azimuthalInvert)(function(e){return e});
},{"../math.js":"Stis","./azimuthal.js":"nG4u","./index.js":"mrcH"}],"NzJ3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mercatorRaw=u,exports.default=a,exports.mercatorProjection=l;var t=require("../math.js"),e=r(require("../rotation.js")),n=r(require("./index.js"));function r(t){return t&&t.__esModule?t:{default:t}}function u(e,n){return[e,(0,t.log)((0,t.tan)((t.halfPi+n)/2))]}function a(){return l(u).scale(961/t.tau)}function l(r){var a,l,i,o=(0,n.default)(r),c=o.center,f=o.scale,s=o.translate,h=o.clipExtent,x=null;function p(){var n=t.pi*f(),c=o((0,e.default)(o.rotate()).invert([0,0]));return h(null==x?[[c[0]-n,c[1]-n],[c[0]+n,c[1]+n]]:r===u?[[Math.max(c[0]-n,x),a],[Math.min(c[0]+n,l),i]]:[[x,Math.max(c[1]-n,a)],[l,Math.min(c[1]+n,i)]])}return o.scale=function(t){return arguments.length?(f(t),p()):f()},o.translate=function(t){return arguments.length?(s(t),p()):s()},o.center=function(t){return arguments.length?(c(t),p()):c()},o.clipExtent=function(t){return arguments.length?(null==t?x=a=l=i=null:(x=+t[0][0],a=+t[0][1],l=+t[1][0],i=+t[1][1]),p()):null==x?null:[[x,a],[l,i]]},p()}u.invert=function(e,n){return[e,2*(0,t.atan)((0,t.exp)(n))-t.halfPi]};
},{"../math.js":"Stis","../rotation.js":"hFnY","./index.js":"mrcH"}],"TD2P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicConformalRaw=o,exports.default=t;var r=require("../math.js"),n=require("./conic.js"),e=require("./mercator.js");function i(n){return(0,r.tan)((r.halfPi+n)/2)}function o(n,o){var t=(0,r.cos)(n),a=n===o?(0,r.sin)(n):(0,r.log)(t/(0,r.cos)(o))/(0,r.log)(i(o)/i(n)),s=t*(0,r.pow)(i(n),a)/a;if(!a)return e.mercatorRaw;function c(n,e){s>0?e<-r.halfPi+r.epsilon&&(e=-r.halfPi+r.epsilon):e>r.halfPi-r.epsilon&&(e=r.halfPi-r.epsilon);var o=s/(0,r.pow)(i(e),a);return[o*(0,r.sin)(a*n),s-o*(0,r.cos)(a*n)]}return c.invert=function(n,e){var i=s-e,o=(0,r.sign)(a)*(0,r.sqrt)(n*n+i*i),t=(0,r.atan2)(n,(0,r.abs)(i))*(0,r.sign)(i);return i*a<0&&(t-=r.pi*(0,r.sign)(n)*(0,r.sign)(i)),[t/a,2*(0,r.atan)((0,r.pow)(s/o,1/a))-r.halfPi]},c}function t(){return(0,n.conicProjection)(o).scale(109.5).parallels([30,30])}
},{"../math.js":"Stis","./conic.js":"tLZN","./mercator.js":"NzJ3"}],"F74N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equirectangularRaw=t,exports.default=u;var e=r(require("./index.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r){return[e,r]}function u(){return(0,e.default)(t).scale(152.63)}t.invert=t;
},{"./index.js":"mrcH"}],"qChj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicEquidistantRaw=i,exports.default=t;var r=require("../math.js"),e=require("./conic.js"),n=require("./equirectangular.js");function i(e,i){var t=(0,r.cos)(e),s=e===i?(0,r.sin)(e):(t-(0,r.cos)(i))/(i-e),u=t/s+e;if((0,r.abs)(s)<r.epsilon)return n.equirectangularRaw;function c(e,n){var i=u-n,t=s*e;return[i*(0,r.sin)(t),u-i*(0,r.cos)(t)]}return c.invert=function(e,n){var i=u-n,t=(0,r.atan2)(e,(0,r.abs)(i))*(0,r.sign)(i);return i*s<0&&(t-=r.pi*(0,r.sign)(e)*(0,r.sign)(i)),[t/s,u-(0,r.sign)(s)*(0,r.sqrt)(e*e+i*i)]},c}function t(){return(0,e.conicProjection)(i).scale(131.154).center([0,13.9389])}
},{"../math.js":"Stis","./conic.js":"tLZN","./equirectangular.js":"F74N"}],"bA9m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalEarthRaw=c,exports.default=f;var e=t(require("./index.js")),r=require("../math.js");function t(e){return e&&e.__esModule?e:{default:e}}var n=1.340264,s=-.081106,u=893e-6,a=.003796,i=(0,r.sqrt)(3)/2,o=12;function c(e,t){var o=(0,r.asin)(i*(0,r.sin)(t)),c=o*o,f=c*c*c;return[e*(0,r.cos)(o)/(i*(n+3*s*c+f*(7*u+9*a*c))),o*(n+s*c+f*(u+a*c))]}function f(){return(0,e.default)(c).scale(177.158)}c.invert=function(e,t){for(var c,f=t,l=f*f,d=l*l*l,v=0;v<o&&(d=(l=(f-=c=(f*(n+s*l+d*(u+a*l))-t)/(n+3*s*l+d*(7*u+9*a*l)))*f)*l*l,!((0,r.abs)(c)<r.epsilon2));++v);return[i*e*(n+3*s*l+d*(7*u+9*a*l))/(0,r.cos)(f),(0,r.asin)((0,r.sin)(f)/i)]};
},{"./index.js":"mrcH","../math.js":"Stis"}],"aA3N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gnomonicRaw=u,exports.default=i;var e=require("../math.js"),r=require("./azimuthal.js"),t=n(require("./index.js"));function n(e){return e&&e.__esModule?e:{default:e}}function u(r,t){var n=(0,e.cos)(t),u=(0,e.cos)(r)*n;return[n*(0,e.sin)(r)/u,(0,e.sin)(t)/u]}function i(){return(0,t.default)(u).scale(144.049).clipAngle(60)}u.invert=(0,r.azimuthalInvert)(e.atan);
},{"../math.js":"Stis","./azimuthal.js":"nG4u","./index.js":"mrcH"}],"E2Si":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=i(require("../clip/rectangle.js")),n=i(require("../identity.js")),e=require("../transform.js"),r=require("./fit.js"),u=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}function f(){var i,f,l,o,c,a,s,d=1,h=0,g=0,p=1,v=1,j=0,m=null,q=1,x=1,_=(0,e.transformer)({point:function(t,n){var e=z([t,n]);this.stream.point(e[0],e[1])}}),E=n.default;function y(){return q=d*p,x=d*v,a=s=null,z}function z(t){var n=t[0]*q,e=t[1]*x;if(j){var r=e*i-n*f;n=n*i+e*f,e=r}return[n+h,e+g]}return z.invert=function(t){var n=t[0]-h,e=t[1]-g;if(j){var r=e*i+n*f;n=n*i-e*f,e=r}return[n/q,e/x]},z.stream=function(t){return a&&s===t?a:a=_(E(s=t))},z.postclip=function(t){return arguments.length?(E=t,m=l=o=c=null,y()):E},z.clipExtent=function(e){return arguments.length?(E=null==e?(m=l=o=c=null,n.default):(0,t.default)(m=+e[0][0],l=+e[0][1],o=+e[1][0],c=+e[1][1]),y()):null==m?null:[[m,l],[o,c]]},z.scale=function(t){return arguments.length?(d=+t,y()):d},z.translate=function(t){return arguments.length?(h=+t[0],g=+t[1],y()):[h,g]},z.angle=function(t){return arguments.length?(j=t%360*u.radians,f=(0,u.sin)(j),i=(0,u.cos)(j),y()):j*u.degrees},z.reflectX=function(t){return arguments.length?(p=t?-1:1,y()):p<0},z.reflectY=function(t){return arguments.length?(v=t?-1:1,y()):v<0},z.fitExtent=function(t,n){return(0,r.fitExtent)(z,t,n)},z.fitSize=function(t,n){return(0,r.fitSize)(z,t,n)},z.fitWidth=function(t,n){return(0,r.fitWidth)(z,t,n)},z.fitHeight=function(t,n){return(0,r.fitHeight)(z,t,n)},z}
},{"../clip/rectangle.js":"wNQ8","../identity.js":"IRat","../transform.js":"SUNr","./fit.js":"Jpsc","../math.js":"Stis"}],"DFKq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.naturalEarth1Raw=u,exports.default=n;var e=t(require("./index.js")),r=require("../math.js");function t(e){return e&&e.__esModule?e:{default:e}}function u(e,r){var t=r*r,u=t*t;return[e*(.8707-.131979*t+u*(u*(.003971*t-.001529*u)-.013791)),r*(1.007226+t*(.015085+u*(.028874*t-.044475-.005916*u)))]}function n(){return(0,e.default)(u).scale(175.295)}u.invert=function(e,t){var u,n=t,a=25;do{var i=n*n,o=i*i;n-=u=(n*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while((0,r.abs)(u)>r.epsilon&&--a>0);return[e/(.8707+(i=n*n)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),n]};
},{"./index.js":"mrcH","../math.js":"Stis"}],"gYB8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.orthographicRaw=n,exports.default=u;var e=require("../math.js"),r=require("./azimuthal.js"),t=i(require("./index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function n(r,t){return[(0,e.cos)(t)*(0,e.sin)(r),(0,e.sin)(t)]}function u(){return(0,t.default)(n).scale(249.5).clipAngle(90+e.epsilon)}n.invert=(0,r.azimuthalInvert)(e.asin);
},{"../math.js":"Stis","./azimuthal.js":"nG4u","./index.js":"mrcH"}],"WS09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stereographicRaw=u,exports.default=i;var e=require("../math.js"),r=require("./azimuthal.js"),t=n(require("./index.js"));function n(e){return e&&e.__esModule?e:{default:e}}function u(r,t){var n=(0,e.cos)(t),u=1+(0,e.cos)(r)*n;return[n*(0,e.sin)(r)/u,(0,e.sin)(t)/u]}function i(){return(0,t.default)(u).scale(250).clipAngle(142)}u.invert=(0,r.azimuthalInvert)(function(r){return 2*(0,e.atan)(r)});
},{"../math.js":"Stis","./azimuthal.js":"nG4u","./index.js":"mrcH"}],"hT5Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transverseMercatorRaw=t,exports.default=n;var e=require("../math.js"),r=require("./mercator.js");function t(r,t){return[(0,e.log)((0,e.tan)((e.halfPi+t)/2)),-r]}function n(){var e=(0,r.mercatorProjection)(t),n=e.center,a=e.rotate;return e.center=function(e){return arguments.length?n([-e[1],e[0]]):[(e=n())[1],-e[0]]},e.rotate=function(e){return arguments.length?a([e[0],e[1],e.length>2?e[2]+90:90]):[(e=a())[0],e[1],e[2]-90]},a([0,0,90]).scale(159.155)}t.invert=function(r,t){return[-t,2*(0,e.atan)((0,e.exp)(r))-e.halfPi]};
},{"../math.js":"Stis","./mercator.js":"NzJ3"}],"YztC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"geoArea",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"geoBounds",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"geoCentroid",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"geoCircle",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"geoClipAntimeridian",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"geoClipCircle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"geoClipExtent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"geoClipRectangle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"geoContains",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"geoDistance",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"geoGraticule",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"geoGraticule10",{enumerable:!0,get:function(){return l.graticule10}}),Object.defineProperty(exports,"geoInterpolate",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"geoLength",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"geoPath",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"geoAlbers",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"geoAlbersUsa",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"geoAzimuthalEqualArea",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"geoAzimuthalEqualAreaRaw",{enumerable:!0,get:function(){return j.azimuthalEqualAreaRaw}}),Object.defineProperty(exports,"geoAzimuthalEquidistant",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"geoAzimuthalEquidistantRaw",{enumerable:!0,get:function(){return m.azimuthalEquidistantRaw}}),Object.defineProperty(exports,"geoConicConformal",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"geoConicConformalRaw",{enumerable:!0,get:function(){return y.conicConformalRaw}}),Object.defineProperty(exports,"geoConicEqualArea",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"geoConicEqualAreaRaw",{enumerable:!0,get:function(){return O.conicEqualAreaRaw}}),Object.defineProperty(exports,"geoConicEquidistant",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"geoConicEquidistantRaw",{enumerable:!0,get:function(){return q.conicEquidistantRaw}}),Object.defineProperty(exports,"geoEqualEarth",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"geoEqualEarthRaw",{enumerable:!0,get:function(){return P.equalEarthRaw}}),Object.defineProperty(exports,"geoEquirectangular",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"geoEquirectangularRaw",{enumerable:!0,get:function(){return x.equirectangularRaw}}),Object.defineProperty(exports,"geoGnomonic",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"geoGnomonicRaw",{enumerable:!0,get:function(){return h.gnomonicRaw}}),Object.defineProperty(exports,"geoIdentity",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"geoProjection",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"geoProjectionMutator",{enumerable:!0,get:function(){return E.projectionMutator}}),Object.defineProperty(exports,"geoMercator",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"geoMercatorRaw",{enumerable:!0,get:function(){return R.mercatorRaw}}),Object.defineProperty(exports,"geoNaturalEarth1",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"geoNaturalEarth1Raw",{enumerable:!0,get:function(){return C.naturalEarth1Raw}}),Object.defineProperty(exports,"geoOrthographic",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"geoOrthographicRaw",{enumerable:!0,get:function(){return A.orthographicRaw}}),Object.defineProperty(exports,"geoStereographic",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"geoStereographicRaw",{enumerable:!0,get:function(){return M.stereographicRaw}}),Object.defineProperty(exports,"geoTransverseMercator",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"geoTransverseMercatorRaw",{enumerable:!0,get:function(){return v.transverseMercatorRaw}}),Object.defineProperty(exports,"geoRotation",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(exports,"geoStream",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"geoTransform",{enumerable:!0,get:function(){return G.default}});var e=T(require("./area.js")),r=T(require("./bounds.js")),t=T(require("./centroid.js")),n=T(require("./circle.js")),o=T(require("./clip/antimeridian.js")),u=T(require("./clip/circle.js")),i=T(require("./clip/extent.js")),a=T(require("./clip/rectangle.js")),c=T(require("./contains.js")),f=T(require("./distance.js")),l=S(require("./graticule.js")),p=T(require("./interpolate.js")),s=T(require("./length.js")),g=T(require("./path/index.js")),d=T(require("./projection/albers.js")),b=T(require("./projection/albersUsa.js")),j=S(require("./projection/azimuthalEqualArea.js")),m=S(require("./projection/azimuthalEquidistant.js")),y=S(require("./projection/conicConformal.js")),O=S(require("./projection/conicEqualArea.js")),q=S(require("./projection/conicEquidistant.js")),P=S(require("./projection/equalEarth.js")),x=S(require("./projection/equirectangular.js")),h=S(require("./projection/gnomonic.js")),w=T(require("./projection/identity.js")),E=S(require("./projection/index.js")),R=S(require("./projection/mercator.js")),C=S(require("./projection/naturalEarth1.js")),A=S(require("./projection/orthographic.js")),M=S(require("./projection/stereographic.js")),v=S(require("./projection/transverseMercator.js")),z=T(require("./rotation.js")),_=T(require("./stream.js")),G=T(require("./transform.js"));function D(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return D=function(){return e},e}function S(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=D();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function T(e){return e&&e.__esModule?e:{default:e}}
},{"./area.js":"tTg2","./bounds.js":"L2Ww","./centroid.js":"Xabc","./circle.js":"exZ4","./clip/antimeridian.js":"zgVO","./clip/circle.js":"rPdY","./clip/extent.js":"iwSF","./clip/rectangle.js":"wNQ8","./contains.js":"lYqy","./distance.js":"Xqqx","./graticule.js":"pBbd","./interpolate.js":"eVSx","./length.js":"a487","./path/index.js":"Ixq3","./projection/albers.js":"zp4D","./projection/albersUsa.js":"VbRR","./projection/azimuthalEqualArea.js":"uNRF","./projection/azimuthalEquidistant.js":"lpU0","./projection/conicConformal.js":"TD2P","./projection/conicEqualArea.js":"TTxy","./projection/conicEquidistant.js":"qChj","./projection/equalEarth.js":"bA9m","./projection/equirectangular.js":"F74N","./projection/gnomonic.js":"aA3N","./projection/identity.js":"E2Si","./projection/index.js":"mrcH","./projection/mercator.js":"NzJ3","./projection/naturalEarth1.js":"DFKq","./projection/orthographic.js":"gYB8","./projection/stereographic.js":"WS09","./projection/transverseMercator.js":"hT5Y","./rotation.js":"hFnY","./stream.js":"AcnE","./transform.js":"SUNr"}],"npog":[function(require,module,exports) {
"use strict";function n(n,r){return n.parent===r.parent?1:2}function r(n){return n.reduce(e,0)/n.length}function e(n,r){return n+r.x}function t(n){return 1+n.reduce(u,0)}function u(n,r){return Math.max(n,r.y)}function c(n){for(var r;r=n.children;)n=r[0];return n}function i(n){for(var r;r=n.children;)n=r[r.length-1];return n}function o(){var e=n,u=1,o=1,f=!1;function a(n){var a,l=0;n.eachAfter(function(n){var u=n.children;u?(n.x=r(u),n.y=t(u)):(n.x=a?l+=e(n,a):0,n.y=0,a=n)});var x=c(n),h=i(n),y=x.x-e(x,h)/2,d=h.x+e(h,x)/2;return n.eachAfter(f?function(r){r.x=(r.x-n.x)*u,r.y=(n.y-r.y)*o}:function(r){r.x=(r.x-y)/(d-y)*u,r.y=(1-(n.y?r.y/n.y:1))*o})}return a.separation=function(n){return arguments.length?(e=n,a):e},a.size=function(n){return arguments.length?(f=!1,u=+n[0],o=+n[1],a):f?null:[u,o]},a.nodeSize=function(n){return arguments.length?(f=!0,u=+n[0],o=+n[1],a):f?[u,o]:null},a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"gwJQ":[function(require,module,exports) {
"use strict";function e(e){var t=0,r=e.children,u=r&&r.length;if(u)for(;--u>=0;)t+=r[u].value;else t=1;e.value=t}function t(){return this.eachAfter(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ootC":[function(require,module,exports) {
"use strict";function e(e){var r,t,o,s,i=this,h=[i];do{for(r=h.reverse(),h=[];i=r.pop();)if(e(i),t=i.children)for(o=0,s=t.length;o<s;++o)h.push(t[o])}while(h.length);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"v8XQ":[function(require,module,exports) {
"use strict";function e(e){for(var t,r,o=this,s=[o];o=s.pop();)if(e(o),t=o.children)for(r=t.length-1;r>=0;--r)s.push(t[r]);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"P6uJ":[function(require,module,exports) {
"use strict";function e(e){for(var r,t,o,p=this,s=[p],u=[];p=s.pop();)if(u.push(p),r=p.children)for(t=0,o=r.length;t<o;++t)s.push(r[t]);for(;p=u.pop();)e(p);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"gWUA":[function(require,module,exports) {
"use strict";function e(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,u=t.children,a=u&&u.length;--a>=0;)r+=u[a].value;t.value=r})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"j5Cl":[function(require,module,exports) {
"use strict";function e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"wdBo":[function(require,module,exports) {
"use strict";function r(r){for(var t=this,o=e(t,r),p=[t];t!==o;)t=t.parent,p.push(t);for(var n=p.length;r!==o;)p.splice(n,0,r),r=r.parent;return p}function e(r,e){if(r===e)return r;var t=r.ancestors(),o=e.ancestors(),p=null;for(r=t.pop(),e=o.pop();r===e;)p=r,r=t.pop(),e=o.pop();return p}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"b4Rq":[function(require,module,exports) {
"use strict";function e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"mj9L":[function(require,module,exports) {
"use strict";function e(){var e=[];return this.each(function(t){e.push(t)}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dlF0":[function(require,module,exports) {
"use strict";function e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iDpf":[function(require,module,exports) {
"use strict";function e(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"awbY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c,exports.computeHeight=q,exports.Node=v;var e=h(require("./count.js")),t=h(require("./each.js")),r=h(require("./eachBefore.js")),a=h(require("./eachAfter.js")),u=h(require("./sum.js")),n=h(require("./sort.js")),s=h(require("./path.js")),o=h(require("./ancestors.js")),i=h(require("./descendants.js")),d=h(require("./leaves.js")),l=h(require("./links.js"));function h(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r,a,u,n,s,o=new v(e),i=+e.value&&(o.value=e.value),d=[o];for(null==t&&(t=p);r=d.pop();)if(i&&(r.value=+r.data.value),(u=t(r.data))&&(s=u.length))for(r.children=new Array(s),n=s-1;n>=0;--n)d.push(a=r.children[n]=new v(u[n])),a.parent=r,a.depth=r.depth+1;return o.eachBefore(q)}function f(){return c(this).eachBefore(j)}function p(e){return e.children}function j(e){e.data=e.data.data}function q(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function v(e){this.data=e,this.depth=this.height=0,this.parent=null}v.prototype=c.prototype={constructor:v,count:e.default,each:t.default,eachAfter:a.default,eachBefore:r.default,sum:u.default,sort:n.default,path:s.default,ancestors:o.default,descendants:i.default,leaves:d.default,links:l.default,copy:f};
},{"./count.js":"gwJQ","./each.js":"ootC","./eachBefore.js":"v8XQ","./eachAfter.js":"P6uJ","./sum.js":"gWUA","./sort.js":"j5Cl","./path.js":"wdBo","./ancestors.js":"b4Rq","./descendants.js":"mj9L","./leaves.js":"dlF0","./links.js":"iDpf"}],"g97z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=r,exports.slice=void 0;var e=Array.prototype.slice;function r(e){for(var r,t,o=e.length;o;)t=Math.random()*o--|0,r=e[o],e[o]=e[t],e[t]=r;return e}exports.slice=e;
},{}],"Ph5L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=require("../array.js");function t(t){for(var n,f,a=0,i=(t=(0,r.shuffle)(r.slice.call(t))).length,c=[];a<i;)n=t[a],f&&u(f,n)?++a:(f=o(c=e(c,n)),a=0);return f}function e(r,t){var e,u;if(f(t,r))return[t];for(e=0;e<r.length;++e)if(n(t,r[e])&&f(i(r[e],t),r))return[r[e],t];for(e=0;e<r.length-1;++e)for(u=e+1;u<r.length;++u)if(n(i(r[e],r[u]),t)&&n(i(r[e],t),r[u])&&n(i(r[u],t),r[e])&&f(c(r[e],r[u],t),r))return[r[e],r[u],t];throw new Error}function n(r,t){var e=r.r-t.r,n=t.x-r.x,u=t.y-r.y;return e<0||e*e<n*n+u*u}function u(r,t){var e=r.r-t.r+1e-6,n=t.x-r.x,u=t.y-r.y;return e>0&&e*e>n*n+u*u}function f(r,t){for(var e=0;e<t.length;++e)if(!u(r,t[e]))return!1;return!0}function o(r){switch(r.length){case 1:return a(r[0]);case 2:return i(r[0],r[1]);case 3:return c(r[0],r[1],r[2])}}function a(r){return{x:r.x,y:r.y,r:r.r}}function i(r,t){var e=r.x,n=r.y,u=r.r,f=t.x,o=t.y,a=t.r,i=f-e,c=o-n,x=a-u,y=Math.sqrt(i*i+c*c);return{x:(e+f+i/y*x)/2,y:(n+o+c/y*x)/2,r:(y+u+a)/2}}function c(r,t,e){var n=r.x,u=r.y,f=r.r,o=t.x,a=t.y,i=t.r,c=e.x,x=e.y,y=e.r,s=n-o,l=n-c,h=u-a,v=u-x,g=i-f,d=y-f,p=n*n+u*u-f*f,q=p-o*o-a*a+i*i,w=p-c*c-x*x+y*y,M=l*h-s*v,j=(h*w-v*q)/(2*M)-n,_=(v*g-h*d)/M,b=(l*q-s*w)/(2*M)-u,E=(s*d-l*g)/M,O=_*_+E*E-1,P=2*(f+j*_+b*E),k=j*j+b*b-f*f,m=-(O?(P+Math.sqrt(P*P-4*O*k))/(2*O):k/P);return{x:n+j+_*m,y:u+b+E*m,r:m}}
},{"../array.js":"g97z"}],"tCEz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packEnclose=i,exports.default=o;var r=e(require("./enclose.js"));function e(r){return r&&r.__esModule?r:{default:r}}function t(r,e,t){var n,u,x,i,o=r.x-e.x,s=r.y-e.y,f=o*o+s*s;f?(u=e.r+t.r,u*=u,i=r.r+t.r,u>(i*=i)?(n=(f+i-u)/(2*f),x=Math.sqrt(Math.max(0,i/f-n*n)),t.x=r.x-n*o-x*s,t.y=r.y-n*s+x*o):(n=(f+u-i)/(2*f),x=Math.sqrt(Math.max(0,u/f-n*n)),t.x=e.x+n*o-x*s,t.y=e.y+n*s+x*o)):(t.x=e.x+t.r,t.y=e.y)}function n(r,e){var t=r.r+e.r-1e-6,n=e.x-r.x,u=e.y-r.y;return t>0&&t*t>n*n+u*u}function u(r){var e=r._,t=r.next._,n=e.r+t.r,u=(e.x*t.r+t.x*e.r)/n,x=(e.y*t.r+t.y*e.r)/n;return u*u+x*x}function x(r){this._=r,this.next=null,this.previous=null}function i(e){if(!(f=e.length))return 0;var i,o,s,f,_,y,a,p,v,l,c;if((i=e[0]).x=0,i.y=0,!(f>1))return i.r;if(o=e[1],i.x=-o.r,o.x=i.r,o.y=0,!(f>2))return i.r+o.r;t(o,i,s=e[2]),i=new x(i),o=new x(o),s=new x(s),i.next=s.previous=o,o.next=i.previous=s,s.next=o.previous=i;r:for(a=3;a<f;++a){t(i._,o._,s=e[a]),s=new x(s),p=o.next,v=i.previous,l=o._.r,c=i._.r;do{if(l<=c){if(n(p._,s._)){o=p,i.next=o,o.previous=i,--a;continue r}l+=p._.r,p=p.next}else{if(n(v._,s._)){(i=v).next=o,o.previous=i,--a;continue r}c+=v._.r,v=v.previous}}while(p!==v.next);for(s.previous=i,s.next=o,i.next=o.previous=o=s,_=u(i);(s=s.next)!==o;)(y=u(s))<_&&(i=s,_=y);o=i.next}for(i=[o._],s=o;(s=s.next)!==o;)i.push(s._);for(s=(0,r.default)(i),a=0;a<f;++a)(i=e[a]).x-=s.x,i.y-=s.y;return s.r}function o(r){return i(r),r}
},{"./enclose.js":"Ph5L"}],"ConL":[function(require,module,exports) {
"use strict";function e(e){return null==e?null:r(e)}function r(e){if("function"!=typeof e)throw new Error;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.optional=e,exports.required=r;
},{}],"CPwG":[function(require,module,exports) {
"use strict";function e(){return 0}function t(e){return function(){return e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.constantZero=e,exports.default=t;
},{}],"iLjI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var e=require("./siblings.js"),r=require("../accessors.js"),t=o(require("../constant.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(t,u,f):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function u(e){return Math.sqrt(e.value)}function f(){var e=null,n=1,o=1,f=t.constantZero;function l(r){return r.x=n/2,r.y=o/2,e?r.eachBefore(i(e)).eachAfter(c(f,.5)).eachBefore(a(1)):r.eachBefore(i(u)).eachAfter(c(t.constantZero,1)).eachAfter(c(f,r.r/Math.min(n,o))).eachBefore(a(Math.min(n,o)/(2*r.r))),r}return l.radius=function(t){return arguments.length?(e=(0,r.optional)(t),l):e},l.size=function(e){return arguments.length?(n=+e[0],o=+e[1],l):[n,o]},l.padding=function(e){return arguments.length?(f="function"==typeof e?e:(0,t.default)(+e),l):f},l}function i(e){return function(r){r.children||(r.r=Math.max(0,+e(r)||0))}}function c(r,t){return function(n){if(o=n.children){var o,u,f,i=o.length,c=r(n)*t||0;if(c)for(u=0;u<i;++u)o[u].r+=c;if(f=(0,e.packEnclose)(o),c)for(u=0;u<i;++u)o[u].r-=c;n.r=f+c}}}function a(e){return function(r){var t=r.parent;r.r*=e,t&&(r.x=t.x+e*r.x,r.y=t.y+e*r.y)}}
},{"./siblings.js":"tCEz","../accessors.js":"ConL","../constant.js":"CPwG"}],"c41W":[function(require,module,exports) {
"use strict";function t(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"lDeM":[function(require,module,exports) {
"use strict";function e(e,t,l,r,u){for(var a,o=e.children,n=-1,s=o.length,v=e.value&&(r-t)/e.value;++n<s;)(a=o[n]).y0=l,a.y1=u,a.x0=t,a.x1=t+=a.value*v}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aOXa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=t(require("./treemap/round.js")),r=t(require("./treemap/dice.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(){var t=1,n=1,u=0,i=!1;function o(o){var d=o.height+1;return o.x0=o.y0=u,o.x1=t,o.y1=n/d,o.eachBefore(function(e,t){return function(n){n.children&&(0,r.default)(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var i=n.x0,o=n.y0,d=n.x1-u,f=n.y1-u;d<i&&(i=d=(i+d)/2),f<o&&(o=f=(o+f)/2),n.x0=i,n.y0=o,n.x1=d,n.y1=f}}(n,d)),i&&o.eachBefore(e.default),o}return o.round=function(e){return arguments.length?(i=!!e,o):i},o.size=function(e){return arguments.length?(t=+e[0],n=+e[1],o):[t,n]},o.padding=function(e){return arguments.length?(u=+e,o):u},o}
},{"./treemap/round.js":"c41W","./treemap/dice.js":"lDeM"}],"l7QX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var r=require("./accessors.js"),e=require("./hierarchy/index.js"),n="$",t={depth:-1},o={};function i(r){return r.id}function u(r){return r.parentId}function c(){var c=i,h=u;function f(r){var i,u,f,l,d,a,s,p=r.length,w=new Array(p),g={};for(u=0;u<p;++u)i=r[u],d=w[u]=new e.Node(i),null!=(a=c(i,u,r))&&(a+="")&&(g[s=n+(d.id=a)]=s in g?o:d);for(u=0;u<p;++u)if(d=w[u],null!=(a=h(r[u],u,r))&&(a+="")){if(!(l=g[n+a]))throw new Error("missing: "+a);if(l===o)throw new Error("ambiguous: "+a);l.children?l.children.push(d):l.children=[d],d.parent=l}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(f.parent=t,f.eachBefore(function(r){r.depth=r.parent.depth+1,--p}).eachBefore(e.computeHeight),f.parent=null,p>0)throw new Error("cycle");return f}return f.id=function(e){return arguments.length?(c=(0,r.required)(e),f):c},f.parentId=function(e){return arguments.length?(h=(0,r.required)(e),f):h},f}
},{"./accessors.js":"ConL","./hierarchy/index.js":"awbY"}],"spqv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var n=require("./hierarchy/index.js");function e(n,e){return n.parent===e.parent?1:2}function t(n){var e=n.children;return e?e[0]:n.t}function r(n){var e=n.children;return e?e[e.length-1]:n.t}function i(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t}function u(n){for(var e,t=0,r=0,i=n.children,u=i.length;--u>=0;)(e=i[u]).z+=t,e.m+=t,t+=e.s+(r+=e.c)}function c(n,e,t){return n.a.parent===e.parent?n.a:t}function a(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function h(n){for(var e,t,r,i,u,c=new a(n,0),h=[c];e=h.pop();)if(r=e._.children)for(e.children=new Array(u=r.length),i=u-1;i>=0;--i)h.push(t=e.children[i]=new a(r[i],i)),t.parent=e;return(c.parent=new a(null,0)).children=[c],c}function l(){var n=e,a=1,l=1,o=null;function f(e){var t=h(e);if(t.eachAfter(p),t.parent.m=-t.z,t.eachBefore(s),o)e.eachBefore(d);else{var r=e,i=e,u=e;e.eachBefore(function(n){n.x<r.x&&(r=n),n.x>i.x&&(i=n),n.depth>u.depth&&(u=n)});var c=r===i?1:n(r,i)/2,f=c-r.x,m=a/(i.x+c+f),z=l/(u.depth||1);e.eachBefore(function(n){n.x=(n.x+f)*m,n.y=n.depth*z})}return e}function p(e){var a=e.children,h=e.parent.children,l=e.i?h[e.i-1]:null;if(a){u(e);var o=(a[0].z+a[a.length-1].z)/2;l?(e.z=l.z+n(e._,l._),e.m=e.z-o):e.z=o}else l&&(e.z=l.z+n(e._,l._));e.parent.A=function(e,u,a){if(u){for(var h,l=e,o=e,f=u,p=l.parent.children[0],s=l.m,d=o.m,m=f.m,z=p.m;f=r(f),l=t(l),f&&l;)p=t(p),(o=r(o)).a=e,(h=f.z+m-l.z-s+n(f._,l._))>0&&(i(c(f,e,a),e,h),s+=h,d+=h),m+=f.m,s+=l.m,z+=p.m,d+=o.m;f&&!r(o)&&(o.t=f,o.m+=m-d),l&&!t(p)&&(p.t=l,p.m+=s-z,a=e)}return a}(e,l,e.parent.A||h[0])}function s(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function d(n){n.x*=a,n.y=n.depth*l}return f.separation=function(e){return arguments.length?(n=e,f):n},f.size=function(n){return arguments.length?(o=!1,a=+n[0],l=+n[1],f):o?null:[a,l]},f.nodeSize=function(n){return arguments.length?(o=!0,a=+n[0],l=+n[1],f):o?[a,l]:null},f}a.prototype=Object.create(n.Node.prototype);
},{"./hierarchy/index.js":"awbY"}],"HMFn":[function(require,module,exports) {
"use strict";function e(e,t,l,r,u){for(var a,o=e.children,n=-1,s=o.length,v=e.value&&(u-l)/e.value;++n<s;)(a=o[n]).x0=t,a.x1=r,a.y0=l,a.y1=l+=a.value*v}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"jOK3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squarifyRatio=a,exports.default=exports.phi=void 0;var e=t(require("./dice.js")),r=t(require("./slice.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(1+Math.sqrt(5))/2;function a(t,u,a,i,o,l){for(var n,s,d,f,c,h,p,v,x,M,q,_=[],j=u.children,m=0,b=0,y=j.length,g=u.value;m<y;){d=o-a,f=l-i;do{c=j[b++].value}while(!c&&b<y);for(h=p=c,q=c*c*(M=Math.max(f/d,d/f)/(g*t)),x=Math.max(p/q,q/h);b<y;++b){if(c+=s=j[b].value,s<h&&(h=s),s>p&&(p=s),q=c*c*M,(v=Math.max(p/q,q/h))>x){c-=s;break}x=v}_.push(n={value:c,dice:d<f,children:j.slice(m,b)}),n.dice?(0,e.default)(n,a,i,o,g?i+=f*c/g:l):(0,r.default)(n,a,i,g?a+=d*c/g:o,l),g-=c,m=b}return _}exports.phi=u;var i=function e(r){function t(e,t,u,i,o){a(r,e,t,u,i,o)}return t.ratio=function(r){return e((r=+r)>1?r:1)},t}(u);exports.default=i;
},{"./dice.js":"lDeM","./slice.js":"HMFn"}],"zTYD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var n=i(require("./round.js")),t=i(require("./squarify.js")),e=require("../accessors.js"),r=o(require("../constant.js"));function u(){if("function"!=typeof WeakMap)return null;var n=new WeakMap;return u=function(){return n},n}function o(n){if(n&&n.__esModule)return n;if(null===n||"object"!=typeof n&&"function"!=typeof n)return{default:n};var t=u();if(t&&t.has(n))return t.get(n);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=r?Object.getOwnPropertyDescriptor(n,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=n[o]}return e.default=n,t&&t.set(n,e),e}function i(n){return n&&n.__esModule?n:{default:n}}function f(){var u=t.default,o=!1,i=1,f=1,d=[0],a=r.constantZero,c=r.constantZero,p=r.constantZero,l=r.constantZero,g=r.constantZero;function s(t){return t.x0=t.y0=0,t.x1=i,t.y1=f,t.eachBefore(y),d=[0],o&&t.eachBefore(n.default),t}function y(n){var t=d[n.depth],e=n.x0+t,r=n.y0+t,o=n.x1-t,i=n.y1-t;o<e&&(e=o=(e+o)/2),i<r&&(r=i=(r+i)/2),n.x0=e,n.y0=r,n.x1=o,n.y1=i,n.children&&(t=d[n.depth+1]=a(n)/2,e+=g(n)-t,r+=c(n)-t,(o-=p(n)-t)<e&&(e=o=(e+o)/2),(i-=l(n)-t)<r&&(r=i=(r+i)/2),u(n,e,r,o,i))}return s.round=function(n){return arguments.length?(o=!!n,s):o},s.size=function(n){return arguments.length?(i=+n[0],f=+n[1],s):[i,f]},s.tile=function(n){return arguments.length?(u=(0,e.required)(n),s):u},s.padding=function(n){return arguments.length?s.paddingInner(n).paddingOuter(n):s.paddingInner()},s.paddingInner=function(n){return arguments.length?(a="function"==typeof n?n:(0,r.default)(+n),s):a},s.paddingOuter=function(n){return arguments.length?s.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):s.paddingTop()},s.paddingTop=function(n){return arguments.length?(c="function"==typeof n?n:(0,r.default)(+n),s):c},s.paddingRight=function(n){return arguments.length?(p="function"==typeof n?n:(0,r.default)(+n),s):p},s.paddingBottom=function(n){return arguments.length?(l="function"==typeof n?n:(0,r.default)(+n),s):l},s.paddingLeft=function(n){return arguments.length?(g="function"==typeof n?n:(0,r.default)(+n),s):g},s}
},{"./round.js":"c41W","./squarify.js":"jOK3","../accessors.js":"ConL","../constant.js":"CPwG"}],"B9FY":[function(require,module,exports) {
"use strict";function e(e,r,a,t,v){var n,o,u=e.children,f=u.length,i=new Array(f+1);for(i[0]=o=n=0;n<f;++n)i[n+1]=o+=u[n].value;!function e(r,a,t,v,n,o,f){if(r>=a-1){var l=u[r];return l.x0=v,l.y0=n,l.x1=o,void(l.y1=f)}var s=i[r],c=t/2+s,d=r+1,x=a-1;for(;d<x;){var y=d+x>>>1;i[y]<c?d=y+1:x=y}c-i[d-1]<i[d]-c&&r+1<d&&--d;var p=i[d]-s,h=t-p;if(o-v>f-n){var _=(v*h+o*p)/t;e(r,d,p,v,n,_,f),e(d,a,h,_,n,o,f)}else{var b=(n*h+f*p)/t;e(r,d,p,v,n,o,b),e(d,a,h,v,b,o,f)}}(0,f,e.value,r,a,t,v)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aii9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=u(require("./dice.js")),t=u(require("./slice.js"));function u(e){return e&&e.__esModule?e:{default:e}}function r(u,r,d,s,i){(1&u.depth?t.default:e.default)(u,r,d,s,i)}
},{"./dice.js":"lDeM","./slice.js":"HMFn"}],"F98V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./dice.js")),r=t(require("./slice.js")),u=require("./squarify.js");function t(e){return e&&e.__esModule?e:{default:e}}var a=function t(a){function i(t,i,l,f,o){if((s=t._squarify)&&s.ratio===a)for(var s,n,d,v,c,q=-1,_=s.length,p=t.value;++q<_;){for(d=(n=s[q]).children,v=n.value=0,c=d.length;v<c;++v)n.value+=d[v].value;n.dice?(0,e.default)(n,i,l,f,l+=(o-l)*n.value/p):(0,r.default)(n,i,l,i+=(f-i)*n.value/p,o),p-=n.value}else t._squarify=s=(0,u.squarifyRatio)(a,t,i,l,f,o),s.ratio=a}return i.ratio=function(e){return t((e=+e)>1?e:1)},i}(u.phi);exports.default=a;
},{"./dice.js":"lDeM","./slice.js":"HMFn","./squarify.js":"jOK3"}],"vZwX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"cluster",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"hierarchy",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"pack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"packSiblings",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"packEnclose",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"partition",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"stratify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"tree",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"treemap",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"treemapBinary",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"treemapDice",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"treemapSlice",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"treemapSliceDice",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"treemapSquarify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"treemapResquarify",{enumerable:!0,get:function(){return b.default}});var e=j(require("./cluster.js")),r=j(require("./hierarchy/index.js")),t=j(require("./pack/index.js")),n=j(require("./pack/siblings.js")),u=j(require("./pack/enclose.js")),i=j(require("./partition.js")),a=j(require("./stratify.js")),f=j(require("./tree.js")),o=j(require("./treemap/index.js")),p=j(require("./treemap/binary.js")),c=j(require("./treemap/dice.js")),s=j(require("./treemap/slice.js")),l=j(require("./treemap/sliceDice.js")),d=j(require("./treemap/squarify.js")),b=j(require("./treemap/resquarify.js"));function j(e){return e&&e.__esModule?e:{default:e}}
},{"./cluster.js":"npog","./hierarchy/index.js":"awbY","./pack/index.js":"iLjI","./pack/siblings.js":"tCEz","./pack/enclose.js":"Ph5L","./partition.js":"aOXa","./stratify.js":"l7QX","./tree.js":"spqv","./treemap/index.js":"zTYD","./treemap/binary.js":"B9FY","./treemap/dice.js":"lDeM","./treemap/slice.js":"HMFn","./treemap/sliceDice.js":"aii9","./treemap/squarify.js":"jOK3","./treemap/resquarify.js":"F98V"}],"pp73":[function(require,module,exports) {
"use strict";function e(e){for(var t,r=-1,o=e.length,u=e[o-1],n=0;++r<o;)t=u,u=e[r],n+=t[1]*u[0]-t[0]*u[1];return n/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LcYY":[function(require,module,exports) {
"use strict";function e(e){for(var t,r,o=-1,u=e.length,n=0,s=0,f=e[u-1],l=0;++o<u;)t=f,f=e[o],l+=r=t[0]*f[1]-f[0]*t[1],n+=(t[0]+f[0])*r,s+=(t[1]+f[1])*r;return[n/(l*=3),s/l]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"yt6N":[function(require,module,exports) {
"use strict";function e(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"igpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var r=e(require("./cross.js"));function e(r){return r&&r.__esModule?r:{default:r}}function t(r,e){return r[0]-e[0]||r[1]-e[1]}function n(e){for(var t=e.length,n=[0,1],u=2,o=2;o<t;++o){for(;u>1&&(0,r.default)(e[n[u-2]],e[n[u-1]],e[o])<=0;)--u;n[u++]=o}return n.slice(0,u)}function u(r){if((u=r.length)<3)return null;var e,u,o=new Array(u),f=new Array(u);for(e=0;e<u;++e)o[e]=[+r[e][0],+r[e][1],e];for(o.sort(t),e=0;e<u;++e)f[e]=[o[e][0],-o[e][1]];var l=n(o),s=n(f),a=s[0]===l[0],i=s[s.length-1]===l[l.length-1],c=[];for(e=l.length-1;e>=0;--e)c.push(r[o[l[e]][2]]);for(e=+a;e<s.length-i;++e)c.push(r[o[s[e]][2]]);return c}
},{"./cross.js":"yt6N"}],"RgyV":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o,u=e.length,n=e[u-1],s=t[0],f=t[1],l=n[0],a=n[1],c=!1,d=0;d<u;++d)r=(n=e[d])[0],(o=n[1])>f!=a>f&&s<(l-r)*(f-o)/(a-o)+r&&(c=!c),l=r,a=o;return c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"VxcN":[function(require,module,exports) {
"use strict";function e(e){for(var t,r,o=-1,s=e.length,u=e[s-1],n=u[0],a=u[1],f=0;++o<s;)t=n,r=a,t-=n=(u=e[o])[0],r-=a=u[1],f+=Math.sqrt(t*t+r*r);return f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"pdGd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"polygonArea",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"polygonCentroid",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"polygonHull",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"polygonContains",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"polygonLength",{enumerable:!0,get:function(){return o.default}});var e=u(require("./area.js")),r=u(require("./centroid.js")),t=u(require("./hull.js")),n=u(require("./contains.js")),o=u(require("./length.js"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./area.js":"pp73","./centroid.js":"LcYY","./hull.js":"igpX","./contains.js":"RgyV","./length.js":"VxcN"}],"h2iW":[function(require,module,exports) {
"use strict";function e(){return Math.random()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DLzI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./defaultSource"));function u(e){return e&&e.__esModule?e:{default:e}}var t=function e(u){function t(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return u()*t+e}}return t.source=e,t}(e.default);exports.default=t;
},{"./defaultSource":"h2iW"}],"kGrV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./defaultSource"));function u(e){return e&&e.__esModule?e:{default:e}}var r=function e(u){function r(e,r){var t,l;return e=null==e?0:+e,r=null==r?1:+r,function(){var n;if(null!=t)n=t,t=null;else do{t=2*u()-1,n=2*u()-1,l=t*t+n*n}while(!l||l>1);return e+r*n*Math.sqrt(-2*Math.log(l)/l)}}return r.source=e,r}(e.default);exports.default=r;
},{"./defaultSource":"h2iW"}],"NOhX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./defaultSource")),r=t(require("./normal"));function t(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){function u(){var e=r.default.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return u.source=e,u}(e.default);exports.default=u;
},{"./defaultSource":"h2iW","./normal":"kGrV"}],"U06c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./defaultSource"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function e(r){function t(e){return function(){for(var t=0,u=0;u<e;++u)t+=r();return t}}return t.source=e,t}(e.default);exports.default=t;
},{"./defaultSource":"h2iW"}],"oWEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./defaultSource")),r=u(require("./irwinHall"));function u(e){return e&&e.__esModule?e:{default:e}}var t=function e(u){function t(e){var t=r.default.source(u)(e);return function(){return t()/e}}return t.source=e,t}(e.default);exports.default=t;
},{"./defaultSource":"h2iW","./irwinHall":"U06c"}],"SrwK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./defaultSource"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function e(t){function r(e){return function(){return-Math.log(1-t())/e}}return r.source=e,r}(e.default);exports.default=r;
},{"./defaultSource":"h2iW"}],"JqXF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"randomLogNormal",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"randomBates",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"randomIrwinHall",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"randomExponential",{enumerable:!0,get:function(){return u.default}});var e=a(require("./uniform")),r=a(require("./normal")),t=a(require("./logNormal")),n=a(require("./bates")),o=a(require("./irwinHall")),u=a(require("./exponential"));function a(e){return e&&e.__esModule?e:{default:e}}
},{"./uniform":"DLzI","./normal":"kGrV","./logNormal":"NOhX","./bates":"oWEX","./irwinHall":"U06c","./exponential":"SrwK"}],"K3G9":[function(require,module,exports) {
"use strict";function e(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function t(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initRange=e,exports.initInterpolator=t;
},{}],"XrLQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=exports.map=void 0;var e=Array.prototype,r=e.map;exports.map=r;var p=e.slice;exports.slice=p;
},{}],"Yv9Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.implicit=void 0;var e=require("d3-collection"),n=require("./array"),r=require("./init"),t={name:"implicit"};function i(){var u=(0,e.map)(),o=[],l=[],c=t;function a(e){var n=e+"",r=u.get(n);if(!r){if(c!==t)return c;u.set(n,r=o.push(e))}return l[(r-1)%l.length]}return a.domain=function(n){if(!arguments.length)return o.slice();o=[],u=(0,e.map)();for(var r,t,i=-1,l=n.length;++i<l;)u.has(t=(r=n[i])+"")||u.set(t,o.push(r));return a},a.range=function(e){return arguments.length?(l=n.slice.call(e),a):l.slice()},a.unknown=function(e){return arguments.length?(c=e,a):c},a.copy=function(){return i(o,l).unknown(c)},r.initRange.apply(a,arguments),a}exports.implicit=t;
},{"d3-collection":"CyPa","./array":"XrLQ","./init":"K3G9"}],"GuIC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.point=a;var n=require("d3-array"),e=require("./init"),r=t(require("./ordinal"));function t(n){return n&&n.__esModule?n:{default:n}}function u(){var t,i,a=(0,r.default)().unknown(void 0),d=a.domain,o=a.range,l=[0,1],g=!1,c=0,p=0,f=.5;function h(){var e=d().length,r=l[1]<l[0],u=l[r-0],a=l[1-r];t=(a-u)/Math.max(1,e-c+2*p),g&&(t=Math.floor(t)),u+=(a-u-t*(e-c))*f,i=t*(1-c),g&&(u=Math.round(u),i=Math.round(i));var h=(0,n.range)(e).map(function(n){return u+t*n});return o(r?h.reverse():h)}return delete a.unknown,a.domain=function(n){return arguments.length?(d(n),h()):d()},a.range=function(n){return arguments.length?(l=[+n[0],+n[1]],h()):l.slice()},a.rangeRound=function(n){return l=[+n[0],+n[1]],g=!0,h()},a.bandwidth=function(){return i},a.step=function(){return t},a.round=function(n){return arguments.length?(g=!!n,h()):g},a.padding=function(n){return arguments.length?(c=Math.min(1,p=+n),h()):c},a.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),h()):c},a.paddingOuter=function(n){return arguments.length?(p=+n,h()):p},a.align=function(n){return arguments.length?(f=Math.max(0,Math.min(1,n)),h()):f},a.copy=function(){return u(d(),l).round(g).paddingInner(c).paddingOuter(p).align(f)},e.initRange.apply(h(),arguments)}function i(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return i(e())},n}function a(){return i(u.apply(null,arguments).paddingInner(1))}
},{"d3-array":"Rpnd","./init":"K3G9","./ordinal":"Yv9Y"}],"BTzj":[function(require,module,exports) {
"use strict";function e(e){return+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kGze":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=o,exports.copy=p,exports.transformer=m,exports.default=d;var n=require("d3-array"),r=require("d3-interpolate"),e=require("./array"),t=i(require("./constant")),u=i(require("./number"));function i(n){return n&&n.__esModule?n:{default:n}}var a=[0,1];function o(n){return n}function l(n,r){return(r-=n=+n)?function(e){return(e-n)/r}:(0,t.default)(isNaN(r)?NaN:.5)}function c(n){var r,e=n[0],t=n[n.length-1];return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function f(n,r,e){var t=n[0],u=n[1],i=r[0],a=r[1];return u<t?(t=l(u,t),i=e(a,i)):(t=l(t,u),i=e(i,a)),function(n){return i(t(n))}}function s(r,e,t){var u=Math.min(r.length,e.length)-1,i=new Array(u),a=new Array(u),o=-1;for(r[u]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++o<u;)i[o]=l(r[o],r[o+1]),a[o]=t(e[o],e[o+1]);return function(e){var t=(0,n.bisect)(r,e,1,u)-1;return a[t](i[t](e))}}function p(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function m(){var n,t,i,l,p,m,d=a,g=a,h=r.interpolate,v=o;function y(){return l=Math.min(d.length,g.length)>2?s:f,p=m=null,N}function N(r){return isNaN(r=+r)?i:(p||(p=l(d.map(n),g,h)))(n(v(r)))}return N.invert=function(e){return v(t((m||(m=l(g,d.map(n),r.interpolateNumber)))(e)))},N.domain=function(n){return arguments.length?(d=e.map.call(n,u.default),v===o||(v=c(d)),y()):d.slice()},N.range=function(n){return arguments.length?(g=e.slice.call(n),y()):g.slice()},N.rangeRound=function(n){return g=e.slice.call(n),h=r.interpolateRound,y()},N.clamp=function(n){return arguments.length?(v=n?c(d):o,N):v!==o},N.interpolate=function(n){return arguments.length?(h=n,y()):h},N.unknown=function(n){return arguments.length?(i=n,N):i},function(r,e){return n=r,t=e,y()}}function d(n,r){return m()(n,r)}
},{"d3-array":"Rpnd","d3-interpolate":"y8gx","./array":"XrLQ","./constant":"u0FZ","./number":"BTzj"}],"xMUV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("d3-array"),r=require("d3-format");function a(a,i,s,t){var c,n=(0,e.tickStep)(a,i,s);switch((t=(0,r.formatSpecifier)(null==t?",f":t)).type){case"s":var o=Math.max(Math.abs(a),Math.abs(i));return null!=t.precision||isNaN(c=(0,r.precisionPrefix)(n,o))||(t.precision=c),(0,r.formatPrefix)(t,o);case"":case"e":case"g":case"p":case"r":null!=t.precision||isNaN(c=(0,r.precisionRound)(n,Math.max(Math.abs(a),Math.abs(i))))||(t.precision=c-("e"===t.type));break;case"f":case"%":null!=t.precision||isNaN(c=(0,r.precisionFixed)(n))||(t.precision=c-2*("%"===t.type))}return(0,r.format)(t)}
},{"d3-array":"Rpnd","d3-format":"SA6z"}],"WtG2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearish=a,exports.default=c;var t=require("d3-array"),e=o(require("./continuous")),r=require("./init"),n=i(require("./tickFormat"));function i(t){return t&&t.__esModule?t:{default:t}}function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function a(e){var r=e.domain;return e.ticks=function(e){var n=r();return(0,t.ticks)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(t,e){var i=r();return(0,n.default)(i[0],i[i.length-1],null==t?10:t,e)},e.nice=function(n){null==n&&(n=10);var i,u=r(),o=0,a=u.length-1,c=u[o],l=u[a];return l<c&&(i=c,c=l,l=i,i=o,o=a,a=i),(i=(0,t.tickIncrement)(c,l,n))>0?(c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i,i=(0,t.tickIncrement)(c,l,n)):i<0&&(c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i,i=(0,t.tickIncrement)(c,l,n)),i>0?(u[o]=Math.floor(c/i)*i,u[a]=Math.ceil(l/i)*i,r(u)):i<0&&(u[o]=Math.ceil(c*i)/i,u[a]=Math.floor(l*i)/i,r(u)),e},e}function c(){var t=(0,e.default)(e.identity,e.identity);return t.copy=function(){return(0,e.copy)(t,c())},r.initRange.apply(t,arguments),a(t)}
},{"d3-array":"Rpnd","./continuous":"kGze","./init":"K3G9","./tickFormat":"xMUV"}],"L2v5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("./array"),n=require("./linear"),r=t(require("./number"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){var a;function i(e){return isNaN(e=+e)?a:e}return i.invert=i,i.domain=i.range=function(n){return arguments.length?(t=e.map.call(n,r.default),i):t.slice()},i.unknown=function(e){return arguments.length?(a=e,i):a},i.copy=function(){return u(t).unknown(a)},t=arguments.length?e.map.call(t,r.default):[0,1],(0,n.linearish)(i)}
},{"./array":"XrLQ","./linear":"WtG2","./number":"BTzj"}],"xl3A":[function(require,module,exports) {
"use strict";function e(e,t){var r,l=0,o=(e=e.slice()).length-1,s=e[l],u=e[o];return u<s&&(r=l,l=o,o=r,r=s,s=u,u=r),e[l]=t.floor(s),e[o]=t.ceil(u),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fBKL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loggish=p,exports.default=d;var n=require("d3-array"),t=require("d3-format"),r=o(require("./nice")),e=require("./continuous"),u=require("./init");function o(n){return n&&n.__esModule?n:{default:n}}function i(n){return Math.log(n)}function a(n){return Math.exp(n)}function f(n){return-Math.log(-n)}function c(n){return-Math.exp(-n)}function l(n){return isFinite(n)?+("1e"+n):n<0?0:n}function h(n){return 10===n?l:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function s(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function M(n){return function(t){return-n(-t)}}function p(e){var u,o,l=e(i,a),p=l.domain,d=10;function g(){return u=s(d),o=h(d),p()[0]<0?(u=M(u),o=M(o),e(f,c)):e(i,a),l}return l.base=function(n){return arguments.length?(d=+n,g()):d},l.domain=function(n){return arguments.length?(p(n),g()):p()},l.ticks=function(t){var r,e=p(),i=e[0],a=e[e.length-1];(r=a<i)&&(h=i,i=a,a=h);var f,c,l,h=u(i),s=u(a),M=null==t?10:+t,g=[];if(!(d%1)&&s-h<M){if(h=Math.round(h)-1,s=Math.round(s)+1,i>0){for(;h<s;++h)for(c=1,f=o(h);c<d;++c)if(!((l=f*c)<i)){if(l>a)break;g.push(l)}}else for(;h<s;++h)for(c=d-1,f=o(h);c>=1;--c)if(!((l=f*c)<i)){if(l>a)break;g.push(l)}}else g=(0,n.ticks)(h,s,Math.min(s-h,M)).map(o);return r?g.reverse():g},l.tickFormat=function(n,r){if(null==r&&(r=10===d?".0e":","),"function"!=typeof r&&(r=(0,t.format)(r)),n===1/0)return r;null==n&&(n=10);var e=Math.max(1,d*n/l.ticks().length);return function(n){var t=n/o(Math.round(u(n)));return t*d<d-.5&&(t*=d),t<=e?r(n):""}},l.nice=function(){return p((0,r.default)(p(),{floor:function(n){return o(Math.floor(u(n)))},ceil:function(n){return o(Math.ceil(u(n)))}}))},l}function d(){var n=p((0,e.transformer)()).domain([1,10]);return n.copy=function(){return(0,e.copy)(n,d()).base(n.base())},u.initRange.apply(n,arguments),n}
},{"d3-array":"Rpnd","d3-format":"SA6z","./nice":"xl3A","./continuous":"kGze","./init":"K3G9"}],"XN8h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.symlogish=i,exports.default=o;var n=require("./linear"),t=require("./continuous"),r=require("./init");function e(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function u(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function i(t){var r=1,i=t(e(r),u(r));return i.constant=function(n){return arguments.length?t(e(r=+n),u(r)):r},(0,n.linearish)(i)}function o(){var n=i((0,t.transformer)());return n.copy=function(){return(0,t.copy)(n,o()).constant(n.constant())},r.initRange.apply(n,arguments)}
},{"./linear":"WtG2","./continuous":"kGze","./init":"K3G9"}],"f2wX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powish=o,exports.default=p,exports.sqrt=a;var t=require("./linear"),n=require("./continuous"),e=require("./init");function r(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function i(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function u(t){return t<0?-t*t:t*t}function o(e){var o=e(n.identity,n.identity),p=1;return o.exponent=function(t){return arguments.length?1===(p=+t)?e(n.identity,n.identity):.5===p?e(i,u):e(r(p),r(1/p)):p},(0,t.linearish)(o)}function p(){var t=o((0,n.transformer)());return t.copy=function(){return(0,n.copy)(t,p()).exponent(t.exponent())},e.initRange.apply(t,arguments),t}function a(){return p.apply(null,arguments).exponent(.5)}
},{"./linear":"WtG2","./continuous":"kGze","./init":"K3G9"}],"Dilz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var n=require("d3-array"),e=require("./array"),r=require("./init");function t(){var i,u=[],a=[],l=[];function o(){var e=0,r=Math.max(1,a.length);for(l=new Array(r-1);++e<r;)l[e-1]=(0,n.quantile)(u,e/r);return c}function c(e){return isNaN(e=+e)?i:a[(0,n.bisect)(l,e)]}return c.invertExtent=function(n){var e=a.indexOf(n);return e<0?[NaN,NaN]:[e>0?l[e-1]:u[0],e<l.length?l[e]:u[u.length-1]]},c.domain=function(e){if(!arguments.length)return u.slice();u=[];for(var r,t=0,i=e.length;t<i;++t)null==(r=e[t])||isNaN(r=+r)||u.push(r);return u.sort(n.ascending),o()},c.range=function(n){return arguments.length?(a=e.slice.call(n),o()):a.slice()},c.unknown=function(n){return arguments.length?(i=n,c):i},c.quantiles=function(){return l.slice()},c.copy=function(){return t().domain(u).range(a).unknown(i)},r.initRange.apply(c,arguments)}
},{"d3-array":"Rpnd","./array":"XrLQ","./init":"K3G9"}],"j3Jj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var n=require("d3-array"),r=require("./array"),e=require("./linear"),t=require("./init");function i(){var u,a=0,o=1,c=1,l=[.5],f=[0,1];function s(r){return r<=r?f[(0,n.bisect)(l,r,0,c)]:u}function d(){var n=-1;for(l=new Array(c);++n<c;)l[n]=((n+1)*o-(n-c)*a)/(c+1);return s}return s.domain=function(n){return arguments.length?(a=+n[0],o=+n[1],d()):[a,o]},s.range=function(n){return arguments.length?(c=(f=r.slice.call(n)).length-1,d()):f.slice()},s.invertExtent=function(n){var r=f.indexOf(n);return r<0?[NaN,NaN]:r<1?[a,l[0]]:r>=c?[l[c-1],o]:[l[r-1],l[r]]},s.unknown=function(n){return arguments.length?(u=n,s):s},s.thresholds=function(){return l.slice()},s.copy=function(){return i().domain([a,o]).range(f).unknown(u)},t.initRange.apply((0,e.linearish)(s),arguments)}
},{"d3-array":"Rpnd","./array":"XrLQ","./linear":"WtG2","./init":"K3G9"}],"DmfT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=require("d3-array"),e=require("./array"),t=require("./init");function r(){var i,u=[.5],a=[0,1],l=1;function c(e){return e<=e?a[(0,n.bisect)(u,e,0,l)]:i}return c.domain=function(n){return arguments.length?(u=e.slice.call(n),l=Math.min(u.length,a.length-1),c):u.slice()},c.range=function(n){return arguments.length?(a=e.slice.call(n),l=Math.min(u.length,a.length-1),c):a.slice()},c.invertExtent=function(n){var e=a.indexOf(n);return[u[e-1],u[e]]},c.unknown=function(n){return arguments.length?(i=n,c):i},c.copy=function(){return r().domain(u).range(a).unknown(i)},t.initRange.apply(c,arguments)}
},{"d3-array":"Rpnd","./array":"XrLQ","./init":"K3G9"}],"ia2J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=new Date,n=new Date;function t(r,o,u,f){function i(e){return r(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return r(e=new Date(+e)),e},i.ceil=function(e){return r(e=new Date(e-1)),o(e,1),r(e),e},i.round=function(e){var n=i(e),t=i.ceil(e);return e-n<t-e?n:t},i.offset=function(e,n){return o(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(e,n,t){var u,f=[];if(e=i.ceil(e),t=null==t?1:Math.floor(t),!(e<n&&t>0))return f;do{f.push(u=new Date(+e)),o(e,t),r(e)}while(u<e&&e<n);return f},i.filter=function(e){return t(function(n){if(n>=n)for(;r(n),!e(n);)n.setTime(n-1)},function(n,t){if(n>=n)if(t<0)for(;++t<=0;)for(;o(n,-1),!e(n););else for(;--t>=0;)for(;o(n,1),!e(n););})},u&&(i.count=function(t,o){return e.setTime(+t),n.setTime(+o),r(e),r(n),Math.floor(u(e,n))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(f?function(n){return f(n)%e==0}:function(n){return i.count(0,n)%e==0}):i:null}),i}
},{}],"YQ38":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.milliseconds=exports.default=void 0;var e=t(require("./interval.js"));function t(e){return e&&e.__esModule?e:{default:e}}var n=(0,e.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});n.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?(0,e.default)(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):n:null};var r=n;exports.default=r;var i=n.range;exports.milliseconds=i;
},{"./interval.js":"ia2J"}],"woBw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.durationWeek=exports.durationDay=exports.durationHour=exports.durationMinute=exports.durationSecond=void 0;var e=1e3;exports.durationSecond=e;var r=6e4;exports.durationMinute=r;var o=36e5;exports.durationHour=o;var t=864e5;exports.durationDay=t;var a=6048e5;exports.durationWeek=a;
},{}],"nNS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seconds=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var n=(0,e.default)(function(e){e.setTime(e-e.getMilliseconds())},function(e,r){e.setTime(+e+r*t.durationSecond)},function(e,r){return(r-e)/t.durationSecond},function(e){return e.getUTCSeconds()}),o=n;exports.default=o;var u=n.range;exports.seconds=u;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"NxbZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minutes=exports.default=void 0;var e=n(require("./interval.js")),t=require("./duration.js");function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*t.durationSecond)},function(e,n){e.setTime(+e+n*t.durationMinute)},function(e,n){return(n-e)/t.durationMinute},function(e){return e.getMinutes()}),u=r;exports.default=u;var i=r.range;exports.minutes=i;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"ShhP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hours=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*t.durationSecond-e.getMinutes()*t.durationMinute)},function(e,r){e.setTime(+e+r*t.durationHour)},function(e,r){return(r-e)/t.durationHour},function(e){return e.getHours()}),o=u;exports.default=o;var n=u.range;exports.hours=n;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"mZUN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.days=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,r){return(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*t.durationMinute)/t.durationDay},function(e){return e.getDate()-1}),n=u;exports.default=n;var o=u.range;exports.days=o;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"HYDq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.saturdays=exports.fridays=exports.thursdays=exports.wednesdays=exports.tuesdays=exports.mondays=exports.sundays=exports.saturday=exports.friday=exports.thursday=exports.wednesday=exports.tuesday=exports.monday=exports.sunday=void 0;var e=s(require("./interval.js")),r=require("./duration.js");function s(e){return e&&e.__esModule?e:{default:e}}function t(s){return(0,e.default)(function(e){e.setDate(e.getDate()-(e.getDay()+7-s)%7),e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+7*r)},function(e,s){return(s-e-(s.getTimezoneOffset()-e.getTimezoneOffset())*r.durationMinute)/r.durationWeek})}var a=t(0);exports.sunday=a;var o=t(1);exports.monday=o;var d=t(2);exports.tuesday=d;var n=t(3);exports.wednesday=n;var u=t(4);exports.thursday=u;var p=t(5);exports.friday=p;var y=t(6);exports.saturday=y;var x=a.range;exports.sundays=x;var i=o.range;exports.mondays=i;var v=d.range;exports.tuesdays=v;var f=n.range;exports.wednesdays=f;var g=u.range;exports.thursdays=g;var c=p.range;exports.fridays=c;var l=y.range;exports.saturdays=l;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"BD8V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.months=exports.default=void 0;var t=e(require("./interval.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=(0,t.default)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),n=r;exports.default=n;var o=r.range;exports.months=o;
},{"./interval.js":"ia2J"}],"Aez4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.years=exports.default=void 0;var e=t(require("./interval.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,e.default)(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r*t)}):null};var u=r;exports.default=u;var l=r.range;exports.years=l;
},{"./interval.js":"ia2J"}],"O3Kl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMinutes=exports.default=void 0;var e=u(require("./interval.js")),t=require("./duration.js");function u(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setUTCSeconds(0,0)},function(e,u){e.setTime(+e+u*t.durationMinute)},function(e,u){return(u-e)/t.durationMinute},function(e){return e.getUTCMinutes()}),n=r;exports.default=n;var i=r.range;exports.utcMinutes=i;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"f0g5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcHours=exports.default=void 0;var e=t(require("./interval.js")),r=require("./duration.js");function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*r.durationHour)},function(e,t){return(t-e)/r.durationHour},function(e){return e.getUTCHours()}),o=u;exports.default=o;var n=u.range;exports.utcHours=n;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"nsxn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcDays=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,r){return(r-e)/t.durationDay},function(e){return e.getUTCDate()-1}),a=u;exports.default=a;var n=u.range;exports.utcDays=n;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"bIsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcSaturdays=exports.utcFridays=exports.utcThursdays=exports.utcWednesdays=exports.utcTuesdays=exports.utcMondays=exports.utcSundays=exports.utcSaturday=exports.utcFriday=exports.utcThursday=exports.utcWednesday=exports.utcTuesday=exports.utcMonday=exports.utcSunday=void 0;var t=r(require("./interval.js")),e=require("./duration.js");function r(t){return t&&t.__esModule?t:{default:t}}function a(r){return(0,t.default)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-r)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,r){return(r-t)/e.durationWeek})}var s=a(0);exports.utcSunday=s;var u=a(1);exports.utcMonday=u;var o=a(2);exports.utcTuesday=o;var d=a(3);exports.utcWednesday=d;var n=a(4);exports.utcThursday=n;var c=a(5);exports.utcFriday=c;var p=a(6);exports.utcSaturday=p;var y=s.range;exports.utcSundays=y;var x=u.range;exports.utcMondays=x;var v=o.range;exports.utcTuesdays=v;var i=d.range;exports.utcWednesdays=i;var T=n.range;exports.utcThursdays=T;var g=c.range;exports.utcFridays=g;var f=p.range;exports.utcSaturdays=f;
},{"./interval.js":"ia2J","./duration.js":"woBw"}],"KVil":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMonths=exports.default=void 0;var t=e(require("./interval.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=(0,t.default)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),n=r;exports.default=n;var o=r.range;exports.utcMonths=o;
},{"./interval.js":"ia2J"}],"zjPu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcYears=exports.default=void 0;var e=t(require("./interval.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,e.default)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)}):null};var u=r;exports.default=u;var l=r.range;exports.utcYears=l;
},{"./interval.js":"ia2J"}],"QBVT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"timeInterval",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"timeMillisecond",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"timeMilliseconds",{enumerable:!0,get:function(){return t.milliseconds}}),Object.defineProperty(exports,"utcMillisecond",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"utcMilliseconds",{enumerable:!0,get:function(){return t.milliseconds}}),Object.defineProperty(exports,"timeSecond",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"timeSeconds",{enumerable:!0,get:function(){return r.seconds}}),Object.defineProperty(exports,"utcSecond",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"utcSeconds",{enumerable:!0,get:function(){return r.seconds}}),Object.defineProperty(exports,"timeMinute",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"timeMinutes",{enumerable:!0,get:function(){return n.minutes}}),Object.defineProperty(exports,"timeHour",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"timeHours",{enumerable:!0,get:function(){return u.hours}}),Object.defineProperty(exports,"timeDay",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"timeDays",{enumerable:!0,get:function(){return o.days}}),Object.defineProperty(exports,"timeWeek",{enumerable:!0,get:function(){return i.sunday}}),Object.defineProperty(exports,"timeWeeks",{enumerable:!0,get:function(){return i.sundays}}),Object.defineProperty(exports,"timeSunday",{enumerable:!0,get:function(){return i.sunday}}),Object.defineProperty(exports,"timeSundays",{enumerable:!0,get:function(){return i.sundays}}),Object.defineProperty(exports,"timeMonday",{enumerable:!0,get:function(){return i.monday}}),Object.defineProperty(exports,"timeMondays",{enumerable:!0,get:function(){return i.mondays}}),Object.defineProperty(exports,"timeTuesday",{enumerable:!0,get:function(){return i.tuesday}}),Object.defineProperty(exports,"timeTuesdays",{enumerable:!0,get:function(){return i.tuesdays}}),Object.defineProperty(exports,"timeWednesday",{enumerable:!0,get:function(){return i.wednesday}}),Object.defineProperty(exports,"timeWednesdays",{enumerable:!0,get:function(){return i.wednesdays}}),Object.defineProperty(exports,"timeThursday",{enumerable:!0,get:function(){return i.thursday}}),Object.defineProperty(exports,"timeThursdays",{enumerable:!0,get:function(){return i.thursdays}}),Object.defineProperty(exports,"timeFriday",{enumerable:!0,get:function(){return i.friday}}),Object.defineProperty(exports,"timeFridays",{enumerable:!0,get:function(){return i.fridays}}),Object.defineProperty(exports,"timeSaturday",{enumerable:!0,get:function(){return i.saturday}}),Object.defineProperty(exports,"timeSaturdays",{enumerable:!0,get:function(){return i.saturdays}}),Object.defineProperty(exports,"timeMonth",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"timeMonths",{enumerable:!0,get:function(){return c.months}}),Object.defineProperty(exports,"timeYear",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"timeYears",{enumerable:!0,get:function(){return s.years}}),Object.defineProperty(exports,"utcMinute",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"utcMinutes",{enumerable:!0,get:function(){return a.utcMinutes}}),Object.defineProperty(exports,"utcHour",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"utcHours",{enumerable:!0,get:function(){return d.utcHours}}),Object.defineProperty(exports,"utcDay",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"utcDays",{enumerable:!0,get:function(){return f.utcDays}}),Object.defineProperty(exports,"utcWeek",{enumerable:!0,get:function(){return y.utcSunday}}),Object.defineProperty(exports,"utcWeeks",{enumerable:!0,get:function(){return y.utcSundays}}),Object.defineProperty(exports,"utcSunday",{enumerable:!0,get:function(){return y.utcSunday}}),Object.defineProperty(exports,"utcSundays",{enumerable:!0,get:function(){return y.utcSundays}}),Object.defineProperty(exports,"utcMonday",{enumerable:!0,get:function(){return y.utcMonday}}),Object.defineProperty(exports,"utcMondays",{enumerable:!0,get:function(){return y.utcMondays}}),Object.defineProperty(exports,"utcTuesday",{enumerable:!0,get:function(){return y.utcTuesday}}),Object.defineProperty(exports,"utcTuesdays",{enumerable:!0,get:function(){return y.utcTuesdays}}),Object.defineProperty(exports,"utcWednesday",{enumerable:!0,get:function(){return y.utcWednesday}}),Object.defineProperty(exports,"utcWednesdays",{enumerable:!0,get:function(){return y.utcWednesdays}}),Object.defineProperty(exports,"utcThursday",{enumerable:!0,get:function(){return y.utcThursday}}),Object.defineProperty(exports,"utcThursdays",{enumerable:!0,get:function(){return y.utcThursdays}}),Object.defineProperty(exports,"utcFriday",{enumerable:!0,get:function(){return y.utcFriday}}),Object.defineProperty(exports,"utcFridays",{enumerable:!0,get:function(){return y.utcFridays}}),Object.defineProperty(exports,"utcSaturday",{enumerable:!0,get:function(){return y.utcSaturday}}),Object.defineProperty(exports,"utcSaturdays",{enumerable:!0,get:function(){return y.utcSaturdays}}),Object.defineProperty(exports,"utcMonth",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"utcMonths",{enumerable:!0,get:function(){return p.utcMonths}}),Object.defineProperty(exports,"utcYear",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"utcYears",{enumerable:!0,get:function(){return b.utcYears}});var e=j(require("./interval.js")),t=m(require("./millisecond.js")),r=m(require("./second.js")),n=m(require("./minute.js")),u=m(require("./hour.js")),o=m(require("./day.js")),i=require("./week.js"),c=m(require("./month.js")),s=m(require("./year.js")),a=m(require("./utcMinute.js")),d=m(require("./utcHour.js")),f=m(require("./utcDay.js")),y=require("./utcWeek.js"),p=m(require("./utcMonth.js")),b=m(require("./utcYear.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function j(e){return e&&e.__esModule?e:{default:e}}
},{"./interval.js":"ia2J","./millisecond.js":"YQ38","./second.js":"nNS8","./minute.js":"NxbZ","./hour.js":"ShhP","./day.js":"mZUN","./week.js":"HYDq","./month.js":"BD8V","./year.js":"Aez4","./utcMinute.js":"O3Kl","./utcHour.js":"f0g5","./utcDay.js":"nsxn","./utcWeek.js":"bIsM","./utcMonth.js":"KVil","./utcYear.js":"zjPu"}],"iLB2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var n=require("d3-time");function t(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function e(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function r(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}function u(u){var i=u.dateTime,o=u.date,a=u.time,f=u.periods,l=u.days,mn=u.shortDays,Cn=u.months,Dn=u.shortMonths,Tn=g(f),Mn=s(f),xn=g(l),Un=s(l),wn=g(mn),Yn=s(mn),Hn=g(Cn),Ln=s(Cn),pn=g(Dn),Sn=s(Dn),Zn={a:function(n){return mn[n.getDay()]},A:function(n){return l[n.getDay()]},b:function(n){return Dn[n.getMonth()]},B:function(n){return Cn[n.getMonth()]},c:null,d:V,e:V,f:X,H:W,I:j,j:q,L:Q,m:b,M:B,p:function(n){return f[+(n.getHours()>=12)]},q:function(n){return 1+~~(n.getMonth()/3)},Q:dn,s:vn,S:I,u:_,U:O,V:P,w:$,W:z,x:null,X:null,y:E,Y:R,Z:k,"%":yn},An={a:function(n){return mn[n.getUTCDay()]},A:function(n){return l[n.getUTCDay()]},b:function(n){return Dn[n.getUTCMonth()]},B:function(n){return Cn[n.getUTCMonth()]},c:null,d:G,e:G,f:tn,H:J,I:K,j:N,L:nn,m:en,M:rn,p:function(n){return f[+(n.getUTCHours()>=12)]},q:function(n){return 1+~~(n.getUTCMonth()/3)},Q:dn,s:vn,S:un,u:cn,U:on,V:an,w:fn,W:ln,x:null,X:null,y:gn,Y:sn,Z:hn,"%":yn},Fn={a:function(n,t,e){var r=wn.exec(t.slice(e));return r?(n.w=Yn[r[0].toLowerCase()],e+r[0].length):-1},A:function(n,t,e){var r=xn.exec(t.slice(e));return r?(n.w=Un[r[0].toLowerCase()],e+r[0].length):-1},b:function(n,t,e){var r=pn.exec(t.slice(e));return r?(n.m=Sn[r[0].toLowerCase()],e+r[0].length):-1},B:function(n,t,e){var r=Hn.exec(t.slice(e));return r?(n.m=Ln[r[0].toLowerCase()],e+r[0].length):-1},c:function(n,t,e){return jn(n,i,t,e)},d:U,e:U,f:S,H:Y,I:Y,j:w,L:p,m:x,M:H,p:function(n,t,e){var r=Tn.exec(t.slice(e));return r?(n.p=Mn[r[0].toLowerCase()],e+r[0].length):-1},q:M,Q:A,s:F,S:L,u:y,U:d,V:v,w:h,W:m,x:function(n,t,e){return jn(n,o,t,e)},X:function(n,t,e){return jn(n,a,t,e)},y:D,Y:C,Z:T,"%":Z};function Vn(n,t){return function(e){var r,u,i,o=[],a=-1,f=0,l=n.length;for(e instanceof Date||(e=new Date(+e));++a<l;)37===n.charCodeAt(a)&&(o.push(n.slice(f,a)),null!=(u=c[r=n.charAt(++a)])?r=n.charAt(++a):u="e"===r?" ":"0",(i=t[r])&&(r=i(e,u)),o.push(r),f=a+1);return o.push(n.slice(f,a)),o.join("")}}function Wn(u,c){return function(i){var o,a,f=r(1900,void 0,1);if(jn(f,u,i+="",0)!=i.length)return null;if("Q"in f)return new Date(f.Q);if("s"in f)return new Date(1e3*f.s+("L"in f?f.L:0));if(!c||"Z"in f||(f.Z=0),"p"in f&&(f.H=f.H%12+12*f.p),void 0===f.m&&(f.m="q"in f?f.q:0),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(a=(o=e(r(f.y,0,1))).getUTCDay(),o=a>4||0===a?n.utcMonday.ceil(o):(0,n.utcMonday)(o),o=n.utcDay.offset(o,7*(f.V-1)),f.y=o.getUTCFullYear(),f.m=o.getUTCMonth(),f.d=o.getUTCDate()+(f.w+6)%7):(a=(o=t(r(f.y,0,1))).getDay(),o=a>4||0===a?n.timeMonday.ceil(o):(0,n.timeMonday)(o),o=n.timeDay.offset(o,7*(f.V-1)),f.y=o.getFullYear(),f.m=o.getMonth(),f.d=o.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:"W"in f?1:0),a="Z"in f?e(r(f.y,0,1)).getUTCDay():t(r(f.y,0,1)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(a+5)%7:f.w+7*f.U-(a+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,e(f)):t(f)}}function jn(n,t,e,r){for(var u,i,o=0,a=t.length,f=e.length;o<a;){if(r>=f)return-1;if(37===(u=t.charCodeAt(o++))){if(u=t.charAt(o++),!(i=Fn[u in c?t.charAt(o++):u])||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}return Zn.x=Vn(o,Zn),Zn.X=Vn(a,Zn),Zn.c=Vn(i,Zn),An.x=Vn(o,An),An.X=Vn(a,An),An.c=Vn(i,An),{format:function(n){var t=Vn(n+="",Zn);return t.toString=function(){return n},t},parse:function(n){var t=Wn(n+="",!1);return t.toString=function(){return n},t},utcFormat:function(n){var t=Vn(n+="",An);return t.toString=function(){return n},t},utcParse:function(n){var t=Wn(n+="",!0);return t.toString=function(){return n},t}}}var c={"-":"",_:" ",0:"0"},i=/^\s*\d+/,o=/^%/,a=/[\\^$*+?|[\]().{}]/g;function f(n,t,e){var r=n<0?"-":"",u=(r?-n:n)+"",c=u.length;return r+(c<e?new Array(e-c+1).join(t)+u:u)}function l(n){return n.replace(a,"\\$&")}function g(n){return new RegExp("^(?:"+n.map(l).join("|")+")","i")}function s(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function h(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function y(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function d(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function v(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function m(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function C(n,t,e){var r=i.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function D(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function T(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function M(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.q=3*r[0]-3,e+r[0].length):-1}function x(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function U(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function w(n,t,e){var r=i.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function Y(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function H(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function L(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function p(n,t,e){var r=i.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function S(n,t,e){var r=i.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Z(n,t,e){var r=o.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function A(n,t,e){var r=i.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function F(n,t,e){var r=i.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function V(n,t){return f(n.getDate(),t,2)}function W(n,t){return f(n.getHours(),t,2)}function j(n,t){return f(n.getHours()%12||12,t,2)}function q(t,e){return f(1+n.timeDay.count((0,n.timeYear)(t),t),e,3)}function Q(n,t){return f(n.getMilliseconds(),t,3)}function X(n,t){return Q(n,t)+"000"}function b(n,t){return f(n.getMonth()+1,t,2)}function B(n,t){return f(n.getMinutes(),t,2)}function I(n,t){return f(n.getSeconds(),t,2)}function _(n){var t=n.getDay();return 0===t?7:t}function O(t,e){return f(n.timeSunday.count((0,n.timeYear)(t)-1,t),e,2)}function P(t,e){var r=t.getDay();return t=r>=4||0===r?(0,n.timeThursday)(t):n.timeThursday.ceil(t),f(n.timeThursday.count((0,n.timeYear)(t),t)+(4===(0,n.timeYear)(t).getDay()),e,2)}function $(n){return n.getDay()}function z(t,e){return f(n.timeMonday.count((0,n.timeYear)(t)-1,t),e,2)}function E(n,t){return f(n.getFullYear()%100,t,2)}function R(n,t){return f(n.getFullYear()%1e4,t,4)}function k(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function G(n,t){return f(n.getUTCDate(),t,2)}function J(n,t){return f(n.getUTCHours(),t,2)}function K(n,t){return f(n.getUTCHours()%12||12,t,2)}function N(t,e){return f(1+n.utcDay.count((0,n.utcYear)(t),t),e,3)}function nn(n,t){return f(n.getUTCMilliseconds(),t,3)}function tn(n,t){return nn(n,t)+"000"}function en(n,t){return f(n.getUTCMonth()+1,t,2)}function rn(n,t){return f(n.getUTCMinutes(),t,2)}function un(n,t){return f(n.getUTCSeconds(),t,2)}function cn(n){var t=n.getUTCDay();return 0===t?7:t}function on(t,e){return f(n.utcSunday.count((0,n.utcYear)(t)-1,t),e,2)}function an(t,e){var r=t.getUTCDay();return t=r>=4||0===r?(0,n.utcThursday)(t):n.utcThursday.ceil(t),f(n.utcThursday.count((0,n.utcYear)(t),t)+(4===(0,n.utcYear)(t).getUTCDay()),e,2)}function fn(n){return n.getUTCDay()}function ln(t,e){return f(n.utcMonday.count((0,n.utcYear)(t)-1,t),e,2)}function gn(n,t){return f(n.getUTCFullYear()%100,t,2)}function sn(n,t){return f(n.getUTCFullYear()%1e4,t,4)}function hn(){return"+0000"}function yn(){return"%"}function dn(n){return+n}function vn(n){return Math.floor(+n/1e3)}
},{"d3-time":"QBVT"}],"ydIr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p,exports.utcParse=exports.utcFormat=exports.timeParse=exports.timeFormat=void 0;var e,t,r,a,o,s=u(require("./locale.js"));function u(e){return e&&e.__esModule?e:{default:e}}function p(u){return e=(0,s.default)(u),exports.timeFormat=t=e.format,exports.timeParse=r=e.parse,exports.utcFormat=a=e.utcFormat,exports.utcParse=o=e.utcParse,e}exports.timeFormat=t,exports.timeParse=r,exports.utcFormat=a,exports.utcParse=o,p({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});
},{"./locale.js":"iLB2"}],"IIzo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.isoSpecifier=void 0;var e=require("./defaultLocale.js"),t="%Y-%m-%dT%H:%M:%S.%LZ";function r(e){return e.toISOString()}exports.isoSpecifier=t;var o=Date.prototype.toISOString?r:(0,e.utcFormat)(t),i=o;exports.default=i;
},{"./defaultLocale.js":"ydIr"}],"u4fb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./isoFormat.js"),r=require("./defaultLocale.js");function t(e){var r=new Date(e);return isNaN(r)?null:r}var a=+new Date("2000-01-01T00:00:00.000Z")?t:(0,r.utcParse)(e.isoSpecifier),s=a;exports.default=s;
},{"./isoFormat.js":"IIzo","./defaultLocale.js":"ydIr"}],"fort":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"timeFormatDefaultLocale",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"timeFormat",{enumerable:!0,get:function(){return e.timeFormat}}),Object.defineProperty(exports,"timeParse",{enumerable:!0,get:function(){return e.timeParse}}),Object.defineProperty(exports,"utcFormat",{enumerable:!0,get:function(){return e.utcFormat}}),Object.defineProperty(exports,"utcParse",{enumerable:!0,get:function(){return e.utcParse}}),Object.defineProperty(exports,"timeFormatLocale",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"isoFormat",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isoParse",{enumerable:!0,get:function(){return n.default}});var e=a(require("./defaultLocale.js")),t=o(require("./locale.js")),r=o(require("./isoFormat.js")),n=o(require("./isoParse.js"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}
},{"./defaultLocale.js":"ydIr","./locale.js":"iLB2","./isoFormat.js":"IIzo","./isoParse.js":"u4fb"}],"h0Y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calendar=M,exports.default=h;var e=require("d3-array"),t=require("d3-time"),r=require("d3-time-format"),n=require("./array"),i=f(require("./continuous")),u=require("./init"),a=o(require("./nice"));function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var l=1e3,p=60*l,d=60*p,m=24*d,s=7*m,y=30*m,v=365*m;function b(e){return new Date(e)}function g(e){return e instanceof Date?+e:+new Date(+e)}function M(t,r,u,o,c,f,h,w,D){var O=(0,i.default)(i.identity,i.identity),j=O.invert,k=O.domain,q=D(".%L"),P=D(":%S"),_=D("%I:%M"),x=D("%I %p"),S=D("%a %d"),W=D("%b %d"),F=D("%B"),I=D("%Y"),Y=[[h,1,l],[h,5,5*l],[h,15,15*l],[h,30,30*l],[f,1,p],[f,5,5*p],[f,15,15*p],[f,30,30*p],[c,1,d],[c,3,3*d],[c,6,6*d],[c,12,12*d],[o,1,m],[o,2,2*m],[u,1,s],[r,1,y],[r,3,3*y],[t,1,v]];function B(e){return(h(e)<e?q:f(e)<e?P:c(e)<e?_:o(e)<e?x:r(e)<e?u(e)<e?S:W:t(e)<e?F:I)(e)}function H(r,n,i,u){if(null==r&&(r=10),"number"==typeof r){var a=Math.abs(i-n)/r,o=(0,e.bisector)(function(e){return e[2]}).right(Y,a);o===Y.length?(u=(0,e.tickStep)(n/v,i/v,r),r=t):o?(u=(o=Y[a/Y[o-1][2]<Y[o][2]/a?o-1:o])[1],r=o[0]):(u=Math.max((0,e.tickStep)(n,i,r),1),r=w)}return null==u?r:r.every(u)}return O.invert=function(e){return new Date(j(e))},O.domain=function(e){return arguments.length?k(n.map.call(e,g)):k().map(b)},O.ticks=function(e,t){var r,n=k(),i=n[0],u=n[n.length-1],a=u<i;return a&&(r=i,i=u,u=r),r=(r=H(e,i,u,t))?r.range(i,u+1):[],a?r.reverse():r},O.tickFormat=function(e,t){return null==t?B:D(t)},O.nice=function(e,t){var r=k();return(e=H(e,r[0],r[r.length-1],t))?k((0,a.default)(r,e)):O},O.copy=function(){return(0,i.copy)(O,M(t,r,u,o,c,f,h,w,D))},O}function h(){return u.initRange.apply(M(t.timeYear,t.timeMonth,t.timeWeek,t.timeDay,t.timeHour,t.timeMinute,t.timeSecond,t.timeMillisecond,r.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}
},{"d3-array":"Rpnd","d3-time":"QBVT","d3-time-format":"fort","./array":"XrLQ","./continuous":"kGze","./init":"K3G9","./nice":"xl3A"}],"qF83":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("./time"),t=require("d3-time-format"),r=require("d3-time"),u=require("./init");function i(){return u.initRange.apply((0,e.calendar)(r.utcYear,r.utcMonth,r.utcWeek,r.utcDay,r.utcHour,r.utcMinute,r.utcSecond,r.utcMillisecond,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}
},{"./time":"h0Y0","d3-time-format":"fort","d3-time":"QBVT","./init":"K3G9"}],"BKE3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=a,exports.default=p,exports.sequentialLog=l,exports.sequentialSymlog=c,exports.sequentialPow=s,exports.sequentialSqrt=f;var n=require("./continuous"),t=require("./init"),r=require("./linear"),e=require("./log"),o=require("./symlog"),i=require("./pow");function u(){var t,r,e,o,i,u=0,a=1,p=n.identity,l=!1;function c(n){return isNaN(n=+n)?i:p(0===e?.5:(n=(o(n)-t)*e,l?Math.max(0,Math.min(1,n)):n))}return c.domain=function(n){return arguments.length?(t=o(u=+n[0]),r=o(a=+n[1]),e=t===r?0:1/(r-t),c):[u,a]},c.clamp=function(n){return arguments.length?(l=!!n,c):l},c.interpolator=function(n){return arguments.length?(p=n,c):p},c.unknown=function(n){return arguments.length?(i=n,c):i},function(n){return o=n,t=n(u),r=n(a),e=t===r?0:1/(r-t),c}}function a(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function p(){var e=(0,r.linearish)(u()(n.identity));return e.copy=function(){return a(e,p())},t.initInterpolator.apply(e,arguments)}function l(){var n=(0,e.loggish)(u()).domain([1,10]);return n.copy=function(){return a(n,l()).base(n.base())},t.initInterpolator.apply(n,arguments)}function c(){var n=(0,o.symlogish)(u());return n.copy=function(){return a(n,c()).constant(n.constant())},t.initInterpolator.apply(n,arguments)}function s(){var n=(0,i.powish)(u());return n.copy=function(){return a(n,s()).exponent(n.exponent())},t.initInterpolator.apply(n,arguments)}function f(){return s.apply(null,arguments).exponent(.5)}
},{"./continuous":"kGze","./init":"K3G9","./linear":"WtG2","./log":"fBKL","./symlog":"XN8h","./pow":"f2wX"}],"oF1I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=require("d3-array"),e=require("./continuous"),n=require("./init");function t(){var i=[],u=e.identity;function o(e){if(!isNaN(e=+e))return u(((0,r.bisect)(i,e)-1)/(i.length-1))}return o.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var n,t=0,u=e.length;t<u;++t)null==(n=e[t])||isNaN(n=+n)||i.push(n);return i.sort(r.ascending),o},o.interpolator=function(r){return arguments.length?(u=r,o):u},o.copy=function(){return t(u).domain(i)},n.initInterpolator.apply(o,arguments)}
},{"d3-array":"Rpnd","./continuous":"kGze","./init":"K3G9"}],"Fh1I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.divergingLog=c,exports.divergingSymlog=l,exports.divergingPow=s,exports.divergingSqrt=g;var n=require("./continuous"),r=require("./init"),t=require("./linear"),e=require("./log"),o=require("./sequential"),i=require("./symlog"),u=require("./pow");function p(){var r,t,e,o,i,u,p,a=0,c=.5,l=1,s=n.identity,g=!1;function y(n){return isNaN(n=+n)?p:(n=.5+((n=+u(n))-t)*(n<t?o:i),s(g?Math.max(0,Math.min(1,n)):n))}return y.domain=function(n){return arguments.length?(r=u(a=+n[0]),t=u(c=+n[1]),e=u(l=+n[2]),o=r===t?0:.5/(t-r),i=t===e?0:.5/(e-t),y):[a,c,l]},y.clamp=function(n){return arguments.length?(g=!!n,y):g},y.interpolator=function(n){return arguments.length?(s=n,y):s},y.unknown=function(n){return arguments.length?(p=n,y):p},function(n){return u=n,r=n(a),t=n(c),e=n(l),o=r===t?0:.5/(t-r),i=t===e?0:.5/(e-t),y}}function a(){var e=(0,t.linearish)(p()(n.identity));return e.copy=function(){return(0,o.copy)(e,a())},r.initInterpolator.apply(e,arguments)}function c(){var n=(0,e.loggish)(p()).domain([.1,1,10]);return n.copy=function(){return(0,o.copy)(n,c()).base(n.base())},r.initInterpolator.apply(n,arguments)}function l(){var n=(0,i.symlogish)(p());return n.copy=function(){return(0,o.copy)(n,l()).constant(n.constant())},r.initInterpolator.apply(n,arguments)}function s(){var n=(0,u.powish)(p());return n.copy=function(){return(0,o.copy)(n,s()).exponent(n.exponent())},r.initInterpolator.apply(n,arguments)}function g(){return s.apply(null,arguments).exponent(.5)}
},{"./continuous":"kGze","./init":"K3G9","./linear":"WtG2","./log":"fBKL","./sequential":"BKE3","./symlog":"XN8h","./pow":"f2wX"}],"UBb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"scaleBand",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"scalePoint",{enumerable:!0,get:function(){return e.point}}),Object.defineProperty(exports,"scaleIdentity",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"scaleLinear",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"scaleLog",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"scaleSymlog",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"scaleOrdinal",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"scaleImplicit",{enumerable:!0,get:function(){return i.implicit}}),Object.defineProperty(exports,"scalePow",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"scaleSqrt",{enumerable:!0,get:function(){return o.sqrt}}),Object.defineProperty(exports,"scaleQuantile",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"scaleQuantize",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"scaleThreshold",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"scaleTime",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"scaleUtc",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"scaleSequential",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"scaleSequentialLog",{enumerable:!0,get:function(){return p.sequentialLog}}),Object.defineProperty(exports,"scaleSequentialPow",{enumerable:!0,get:function(){return p.sequentialPow}}),Object.defineProperty(exports,"scaleSequentialSqrt",{enumerable:!0,get:function(){return p.sequentialSqrt}}),Object.defineProperty(exports,"scaleSequentialSymlog",{enumerable:!0,get:function(){return p.sequentialSymlog}}),Object.defineProperty(exports,"scaleSequentialQuantile",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"scaleDiverging",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"scaleDivergingLog",{enumerable:!0,get:function(){return g.divergingLog}}),Object.defineProperty(exports,"scaleDivergingPow",{enumerable:!0,get:function(){return g.divergingPow}}),Object.defineProperty(exports,"scaleDivergingSqrt",{enumerable:!0,get:function(){return g.divergingSqrt}}),Object.defineProperty(exports,"scaleDivergingSymlog",{enumerable:!0,get:function(){return g.divergingSymlog}}),Object.defineProperty(exports,"tickFormat",{enumerable:!0,get:function(){return b.default}});var e=P(require("./band")),t=y(require("./identity")),r=y(require("./linear")),n=y(require("./log")),u=y(require("./symlog")),i=P(require("./ordinal")),o=P(require("./pow")),l=y(require("./quantile")),a=y(require("./quantize")),c=y(require("./threshold")),f=y(require("./time")),s=y(require("./utcTime")),p=P(require("./sequential")),d=y(require("./sequentialQuantile")),g=P(require("./diverging")),b=y(require("./tickFormat"));function y(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}
},{"./band":"GuIC","./identity":"L2v5","./linear":"WtG2","./log":"fBKL","./symlog":"XN8h","./ordinal":"Yv9Y","./pow":"f2wX","./quantile":"Dilz","./quantize":"j3Jj","./threshold":"DmfT","./time":"h0Y0","./utcTime":"qF83","./sequential":"BKE3","./sequentialQuantile":"oF1I","./diverging":"Fh1I","./tickFormat":"xMUV"}],"Rt6t":[function(require,module,exports) {
"use strict";function e(e){for(var r=e.length/6|0,t=new Array(r),n=0;n<r;)t[n]="#"+e.slice(6*n,6*++n);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"h3YE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../colors.js"));function f(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");exports.default=r;
},{"../colors.js":"Rt6t"}],"sUNX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../colors.js"));function f(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");exports.default=r;
},{"../colors.js":"Rt6t"}],"omAD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../colors.js"));function r(e){return e&&e.__esModule?e:{default:e}}var t=(0,e.default)("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");exports.default=t;
},{"../colors.js":"Rt6t"}],"ceo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../colors.js"));function f(e){return e&&e.__esModule?e:{default:e}}var a=(0,e.default)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");exports.default=a;
},{"../colors.js":"Rt6t"}],"ouIO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../colors.js"));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,e.default)("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");exports.default=d;
},{"../colors.js":"Rt6t"}],"jE6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../colors.js"));function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,e.default)("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");exports.default=f;
},{"../colors.js":"Rt6t"}],"ftG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../colors.js"));function f(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");exports.default=r;
},{"../colors.js":"Rt6t"}],"TtdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../colors.js"));function r(e){return e&&e.__esModule?e:{default:e}}var t=(0,e.default)("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");exports.default=t;
},{"../colors.js":"Rt6t"}],"z3xM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("../colors.js"));function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,e.default)("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");exports.default=f;
},{"../colors.js":"Rt6t"}],"BPRE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../colors.js"));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");exports.default=r;
},{"../colors.js":"Rt6t"}],"FBY6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("d3-interpolate");function t(t){return(0,e.interpolateRgbBasis)(t[t.length-1])}
},{"d3-interpolate":"y8gx"}],"kkrT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),c=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var a=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(e.default);exports.scheme=a;var d=(0,c.default)(a);exports.default=d;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"eOdY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var a=f(require("../colors.js")),e=f(require("../ramp.js"));function f(a){return a&&a.__esModule?a:{default:a}}var d=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(a.default);exports.scheme=d;var b=(0,e.default)(d);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"TryK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),d=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var a=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(e.default);exports.scheme=a;var b=(0,d.default)(a);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"WWJW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),b=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var d=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(e.default);exports.scheme=d;var a=(0,b.default)(d);exports.default=a;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"sRgP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=d(require("../colors.js")),e=d(require("../ramp.js"));function d(f){return f&&f.__esModule?f:{default:f}}var c=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(f.default);exports.scheme=c;var a=(0,e.default)(c);exports.default=a;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"YnQX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=a(require("../colors.js")),e=a(require("../ramp.js"));function a(f){return f&&f.__esModule?f:{default:f}}var d=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(f.default);exports.scheme=d;var b=(0,e.default)(d);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"Nvai":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=d(require("../colors.js")),e=d(require("../ramp.js"));function d(f){return f&&f.__esModule?f:{default:f}}var a=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(f.default);exports.scheme=a;var b=(0,e.default)(a);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"HxUk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=d(require("../colors.js")),e=d(require("../ramp.js"));function d(f){return f&&f.__esModule?f:{default:f}}var a=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(f.default);exports.scheme=a;var b=(0,e.default)(a);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"eSYM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=d(require("../colors.js")),e=d(require("../ramp.js"));function d(f){return f&&f.__esModule?f:{default:f}}var a=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(f.default);exports.scheme=a;var b=(0,e.default)(a);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"MEu8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),c=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var a=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(e.default);exports.scheme=a;var d=(0,c.default)(a);exports.default=d;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"hhbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=d(require("../colors.js")),c=d(require("../ramp.js"));function d(e){return e&&e.__esModule?e:{default:e}}var f=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(e.default);exports.scheme=f;var b=(0,c.default)(f);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"jedL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var c=b(require("../colors.js")),e=b(require("../ramp.js"));function b(c){return c&&c.__esModule?c:{default:c}}var a=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(c.default);exports.scheme=a;var d=(0,e.default)(a);exports.default=d;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"CIir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=d(require("../colors.js")),f=d(require("../ramp.js"));function d(e){return e&&e.__esModule?e:{default:e}}var c=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(e.default);exports.scheme=c;var r=(0,f.default)(c);exports.default=r;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"hQ97":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=d(require("../colors.js")),f=d(require("../ramp.js"));function d(e){return e&&e.__esModule?e:{default:e}}var a=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(e.default);exports.scheme=a;var c=(0,f.default)(a);exports.default=c;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"LARz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),d=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var a=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(e.default);exports.scheme=a;var b=(0,d.default)(a);exports.default=b;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"itH4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),d=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var c=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(e.default);exports.scheme=c;var r=(0,d.default)(c);exports.default=r;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"qZBx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=a(require("../colors.js")),f=a(require("../ramp.js"));function a(e){return e&&e.__esModule?e:{default:e}}var d=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(e.default);exports.scheme=d;var c=(0,f.default)(d);exports.default=c;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"tzR1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=e(require("../colors.js")),c=e(require("../ramp.js"));function e(f){return f&&f.__esModule?f:{default:f}}var b=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(f.default);exports.scheme=b;var d=(0,c.default)(b);exports.default=d;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"hQbv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=d(require("../colors.js")),e=d(require("../ramp.js"));function d(f){return f&&f.__esModule?f:{default:f}}var a=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(f.default);exports.scheme=a;var c=(0,e.default)(a);exports.default=c;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"ktMw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=c(require("../colors.js")),e=c(require("../ramp.js"));function c(f){return f&&f.__esModule?f:{default:f}}var r=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(f.default);exports.scheme=r;var d=(0,e.default)(r);exports.default=d;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"NONj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=c(require("../colors.js")),e=c(require("../ramp.js"));function c(f){return f&&f.__esModule?f:{default:f}}var d=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(f.default);exports.scheme=d;var a=(0,e.default)(d);exports.default=a;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"LJQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=d(require("../colors.js")),f=d(require("../ramp.js"));function d(e){return e&&e.__esModule?e:{default:e}}var b=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(e.default);exports.scheme=b;var a=(0,f.default)(b);exports.default=a;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"J6dY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=c(require("../colors.js")),a=c(require("../ramp.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(e.default);exports.scheme=d;var r=(0,a.default)(d);exports.default=r;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"qUH5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var f=e(require("../colors.js")),d=e(require("../ramp.js"));function e(f){return f&&f.__esModule?f:{default:f}}var r=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(f.default);exports.scheme=r;var c=(0,d.default)(r);exports.default=c;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"ZjzU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=d(require("../colors.js")),a=d(require("../ramp.js"));function d(e){return e&&e.__esModule?e:{default:e}}var f=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(e.default);exports.scheme=f;var c=(0,a.default)(f);exports.default=c;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"pmn4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=a(require("../colors.js")),f=a(require("../ramp.js"));function a(e){return e&&e.__esModule?e:{default:e}}var d=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(e.default);exports.scheme=d;var c=(0,f.default)(d);exports.default=c;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"aBMQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.scheme=void 0;var e=f(require("../colors.js")),d=f(require("../ramp.js"));function f(e){return e&&e.__esModule?e:{default:e}}var a=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(e.default);exports.scheme=a;var r=(0,d.default)(a);exports.default=r;
},{"../colors.js":"Rt6t","../ramp.js":"FBY6"}],"sATc":[function(require,module,exports) {
"use strict";function t(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"y23p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("d3-color"),r=require("d3-interpolate"),t=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(300,.5,0),(0,e.cubehelix)(-240,.5,1));exports.default=t;
},{"d3-color":"x3do","d3-interpolate":"y8gx"}],"sM2c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.cool=exports.warm=void 0;var e=require("d3-color"),r=require("d3-interpolate"),o=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(-100,.75,.35),(0,e.cubehelix)(80,1.5,.8));exports.warm=o;var t=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(260,.75,.35),(0,e.cubehelix)(80,1.5,.8));exports.cool=t;var l=(0,e.cubehelix)();function i(e){(e<0||e>1)&&(e-=Math.floor(e));var r=Math.abs(e-.5);return l.h=360*e-100,l.s=1.5-1.5*r,l.l=.8-.9*r,l+""}
},{"d3-color":"x3do","d3-interpolate":"y8gx"}],"BuBg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=require("d3-color"),e=(0,t.rgb)(),r=Math.PI/3,a=2*Math.PI/3;function s(t){var s;return t=(.5-t)*Math.PI,e.r=255*(s=Math.sin(t))*s,e.g=255*(s=Math.sin(t+r))*s,e.b=255*(s=Math.sin(t+a))*s,e+""}
},{"d3-color":"x3do"}],"BaUq":[function(require,module,exports) {
"use strict";function t(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"B45Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.plasma=exports.inferno=exports.magma=exports.default=void 0;var f=e(require("../colors.js"));function e(f){return f&&f.__esModule?f:{default:f}}function a(f){var e=f.length;return function(a){return f[Math.max(0,Math.min(e-1,Math.floor(a*e)))]}}var d=a((0,f.default)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));exports.default=d;var c=a((0,f.default)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));exports.magma=c;var b=a((0,f.default)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));exports.inferno=b;var r=a((0,f.default)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));exports.plasma=r;
},{"../colors.js":"Rt6t"}],"fjII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"schemeCategory10",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"schemeAccent",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"schemeDark2",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"schemePaired",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"schemePastel1",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"schemePastel2",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"schemeSet1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"schemeSet2",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"schemeSet3",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"schemeTableau10",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"interpolateBrBG",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"schemeBrBG",{enumerable:!0,get:function(){return a.scheme}}),Object.defineProperty(exports,"interpolatePRGn",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"schemePRGn",{enumerable:!0,get:function(){return f.scheme}}),Object.defineProperty(exports,"interpolatePiYG",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"schemePiYG",{enumerable:!0,get:function(){return p.scheme}}),Object.defineProperty(exports,"interpolatePuOr",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"schemePuOr",{enumerable:!0,get:function(){return d.scheme}}),Object.defineProperty(exports,"interpolateRdBu",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"schemeRdBu",{enumerable:!0,get:function(){return b.scheme}}),Object.defineProperty(exports,"interpolateRdGy",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"schemeRdGy",{enumerable:!0,get:function(){return m.scheme}}),Object.defineProperty(exports,"interpolateRdYlBu",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"schemeRdYlBu",{enumerable:!0,get:function(){return j.scheme}}),Object.defineProperty(exports,"interpolateRdYlGn",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"schemeRdYlGn",{enumerable:!0,get:function(){return g.scheme}}),Object.defineProperty(exports,"interpolateSpectral",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"schemeSpectral",{enumerable:!0,get:function(){return P.scheme}}),Object.defineProperty(exports,"interpolateBuGn",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"schemeBuGn",{enumerable:!0,get:function(){return O.scheme}}),Object.defineProperty(exports,"interpolateBuPu",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"schemeBuPu",{enumerable:!0,get:function(){return y.scheme}}),Object.defineProperty(exports,"interpolateGnBu",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"schemeGnBu",{enumerable:!0,get:function(){return x.scheme}}),Object.defineProperty(exports,"interpolateOrRd",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"schemeOrRd",{enumerable:!0,get:function(){return h.scheme}}),Object.defineProperty(exports,"interpolatePuBuGn",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"schemePuBuGn",{enumerable:!0,get:function(){return q.scheme}}),Object.defineProperty(exports,"interpolatePuBu",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(exports,"schemePuBu",{enumerable:!0,get:function(){return B.scheme}}),Object.defineProperty(exports,"interpolatePuRd",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(exports,"schemePuRd",{enumerable:!0,get:function(){return G.scheme}}),Object.defineProperty(exports,"interpolateRdPu",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"schemeRdPu",{enumerable:!0,get:function(){return R.scheme}}),Object.defineProperty(exports,"interpolateYlGnBu",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(exports,"schemeYlGnBu",{enumerable:!0,get:function(){return Y.scheme}}),Object.defineProperty(exports,"interpolateYlGn",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"schemeYlGn",{enumerable:!0,get:function(){return v.scheme}}),Object.defineProperty(exports,"interpolateYlOrBr",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"schemeYlOrBr",{enumerable:!0,get:function(){return S.scheme}}),Object.defineProperty(exports,"interpolateYlOrRd",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"schemeYlOrRd",{enumerable:!0,get:function(){return w.scheme}}),Object.defineProperty(exports,"interpolateBlues",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"schemeBlues",{enumerable:!0,get:function(){return M.scheme}}),Object.defineProperty(exports,"interpolateGreens",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"schemeGreens",{enumerable:!0,get:function(){return _.scheme}}),Object.defineProperty(exports,"interpolateGreys",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"schemeGreys",{enumerable:!0,get:function(){return D.scheme}}),Object.defineProperty(exports,"interpolatePurples",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"schemePurples",{enumerable:!0,get:function(){return k.scheme}}),Object.defineProperty(exports,"interpolateReds",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"schemeReds",{enumerable:!0,get:function(){return C.scheme}}),Object.defineProperty(exports,"interpolateOranges",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"schemeOranges",{enumerable:!0,get:function(){return T.scheme}}),Object.defineProperty(exports,"interpolateCividis",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(exports,"interpolateCubehelixDefault",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"interpolateRainbow",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"interpolateWarm",{enumerable:!0,get:function(){return I.warm}}),Object.defineProperty(exports,"interpolateCool",{enumerable:!0,get:function(){return I.cool}}),Object.defineProperty(exports,"interpolateSinebow",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(exports,"interpolateTurbo",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(exports,"interpolateViridis",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"interpolateMagma",{enumerable:!0,get:function(){return E.magma}}),Object.defineProperty(exports,"interpolateInferno",{enumerable:!0,get:function(){return E.inferno}}),Object.defineProperty(exports,"interpolatePlasma",{enumerable:!0,get:function(){return E.plasma}});var e=J(require("./categorical/category10.js")),t=J(require("./categorical/Accent.js")),r=J(require("./categorical/Dark2.js")),n=J(require("./categorical/Paired.js")),u=J(require("./categorical/Pastel1.js")),i=J(require("./categorical/Pastel2.js")),o=J(require("./categorical/Set1.js")),l=J(require("./categorical/Set2.js")),c=J(require("./categorical/Set3.js")),s=J(require("./categorical/Tableau10.js")),a=H(require("./diverging/BrBG.js")),f=H(require("./diverging/PRGn.js")),p=H(require("./diverging/PiYG.js")),d=H(require("./diverging/PuOr.js")),b=H(require("./diverging/RdBu.js")),m=H(require("./diverging/RdGy.js")),j=H(require("./diverging/RdYlBu.js")),g=H(require("./diverging/RdYlGn.js")),P=H(require("./diverging/Spectral.js")),O=H(require("./sequential-multi/BuGn.js")),y=H(require("./sequential-multi/BuPu.js")),x=H(require("./sequential-multi/GnBu.js")),h=H(require("./sequential-multi/OrRd.js")),q=H(require("./sequential-multi/PuBuGn.js")),B=H(require("./sequential-multi/PuBu.js")),G=H(require("./sequential-multi/PuRd.js")),R=H(require("./sequential-multi/RdPu.js")),Y=H(require("./sequential-multi/YlGnBu.js")),v=H(require("./sequential-multi/YlGn.js")),S=H(require("./sequential-multi/YlOrBr.js")),w=H(require("./sequential-multi/YlOrRd.js")),M=H(require("./sequential-single/Blues.js")),_=H(require("./sequential-single/Greens.js")),D=H(require("./sequential-single/Greys.js")),k=H(require("./sequential-single/Purples.js")),C=H(require("./sequential-single/Reds.js")),T=H(require("./sequential-single/Oranges.js")),W=J(require("./sequential-multi/cividis.js")),A=J(require("./sequential-multi/cubehelix.js")),I=H(require("./sequential-multi/rainbow.js")),V=J(require("./sequential-multi/sinebow.js")),z=J(require("./sequential-multi/turbo.js")),E=H(require("./sequential-multi/viridis.js"));function F(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return F=function(){return e},e}function H(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=F();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function J(e){return e&&e.__esModule?e:{default:e}}
},{"./categorical/category10.js":"h3YE","./categorical/Accent.js":"sUNX","./categorical/Dark2.js":"omAD","./categorical/Paired.js":"ceo4","./categorical/Pastel1.js":"ouIO","./categorical/Pastel2.js":"jE6l","./categorical/Set1.js":"ftG7","./categorical/Set2.js":"TtdN","./categorical/Set3.js":"z3xM","./categorical/Tableau10.js":"BPRE","./diverging/BrBG.js":"kkrT","./diverging/PRGn.js":"eOdY","./diverging/PiYG.js":"TryK","./diverging/PuOr.js":"WWJW","./diverging/RdBu.js":"sRgP","./diverging/RdGy.js":"YnQX","./diverging/RdYlBu.js":"Nvai","./diverging/RdYlGn.js":"HxUk","./diverging/Spectral.js":"eSYM","./sequential-multi/BuGn.js":"MEu8","./sequential-multi/BuPu.js":"hhbp","./sequential-multi/GnBu.js":"jedL","./sequential-multi/OrRd.js":"CIir","./sequential-multi/PuBuGn.js":"hQ97","./sequential-multi/PuBu.js":"LARz","./sequential-multi/PuRd.js":"itH4","./sequential-multi/RdPu.js":"qZBx","./sequential-multi/YlGnBu.js":"tzR1","./sequential-multi/YlGn.js":"hQbv","./sequential-multi/YlOrBr.js":"ktMw","./sequential-multi/YlOrRd.js":"NONj","./sequential-single/Blues.js":"LJQk","./sequential-single/Greens.js":"J6dY","./sequential-single/Greys.js":"qUH5","./sequential-single/Purples.js":"ZjzU","./sequential-single/Reds.js":"pmn4","./sequential-single/Oranges.js":"aBMQ","./sequential-multi/cividis.js":"sATc","./sequential-multi/cubehelix.js":"y23p","./sequential-multi/rainbow.js":"sM2c","./sequential-multi/sinebow.js":"BuBg","./sequential-multi/turbo.js":"BaUq","./sequential-multi/viridis.js":"B45Q"}],"afGh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=h,exports.asin=M,exports.tau=exports.halfPi=exports.pi=exports.epsilon=exports.sqrt=exports.sin=exports.min=exports.max=exports.cos=exports.atan2=exports.abs=void 0;var t=Math.abs;exports.abs=t;var r=Math.atan2;exports.atan2=r;var s=Math.cos;exports.cos=s;var a=Math.max;exports.max=a;var e=Math.min;exports.min=e;var o=Math.sin;exports.sin=o;var p=Math.sqrt;exports.sqrt=p;var x=1e-12;exports.epsilon=x;var n=Math.PI;exports.pi=n;var i=n/2;exports.halfPi=i;var v=2*n;function h(t){return t>1?0:t<-1?n:Math.acos(t)}function M(t){return t>=1?i:t<=-1?-i:Math.asin(t)}exports.tau=v;
},{}],"KUIA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var n=require("d3-path"),t=a(require("./constant.js")),e=require("./math.js");function a(n){return n&&n.__esModule?n:{default:n}}function i(n){return n.innerRadius}function r(n){return n.outerRadius}function o(n){return n.startAngle}function c(n){return n.endAngle}function u(n){return n&&n.padAngle}function l(n,t,a,i,r,o,c,u){var l=a-n,s=i-t,f=c-r,p=u-o,y=p*l-f*s;if(!(y*y<e.epsilon))return[n+(y=(f*(t-o)-p*(n-r))/y)*l,t+y*s]}function s(n,t,a,i,r,o,c){var u=n-a,l=t-i,s=(c?o:-o)/(0,e.sqrt)(u*u+l*l),f=s*l,p=-s*u,y=n+f,x=t+p,d=a+f,h=i+p,v=(y+d)/2,g=(x+h)/2,m=d-y,q=h-x,T=m*m+q*q,A=r-o,R=y*h-d*x,P=(q<0?-1:1)*(0,e.sqrt)((0,e.max)(0,A*A*T-R*R)),_=(R*q-m*P)/T,b=(-R*m-q*P)/T,j=(R*q+m*P)/T,M=(-R*m+q*P)/T,O=_-v,k=b-g,w=j-v,z=M-g;return O*O+k*k>w*w+z*z&&(_=j,b=M),{cx:_,cy:b,x01:-f,y01:-p,x11:_*(r/A-1),y11:b*(r/A-1)}}function f(){var a=i,f=r,p=(0,t.default)(0),y=null,x=o,d=c,h=u,v=null;function g(){var t,i,r=+a.apply(this,arguments),o=+f.apply(this,arguments),c=x.apply(this,arguments)-e.halfPi,u=d.apply(this,arguments)-e.halfPi,g=(0,e.abs)(u-c),m=u>c;if(v||(v=t=(0,n.path)()),o<r&&(i=o,o=r,r=i),o>e.epsilon)if(g>e.tau-e.epsilon)v.moveTo(o*(0,e.cos)(c),o*(0,e.sin)(c)),v.arc(0,0,o,c,u,!m),r>e.epsilon&&(v.moveTo(r*(0,e.cos)(u),r*(0,e.sin)(u)),v.arc(0,0,r,u,c,m));else{var q,T,A=c,R=u,P=c,_=u,b=g,j=g,M=h.apply(this,arguments)/2,O=M>e.epsilon&&(y?+y.apply(this,arguments):(0,e.sqrt)(r*r+o*o)),k=(0,e.min)((0,e.abs)(o-r)/2,+p.apply(this,arguments)),w=k,z=k;if(O>e.epsilon){var B=(0,e.asin)(O/r*(0,e.sin)(M)),C=(0,e.asin)(O/o*(0,e.sin)(M));(b-=2*B)>e.epsilon?(P+=B*=m?1:-1,_-=B):(b=0,P=_=(c+u)/2),(j-=2*C)>e.epsilon?(A+=C*=m?1:-1,R-=C):(j=0,A=R=(c+u)/2)}var D=o*(0,e.cos)(A),E=o*(0,e.sin)(A),F=r*(0,e.cos)(_),G=r*(0,e.sin)(_);if(k>e.epsilon){var H,I=o*(0,e.cos)(R),J=o*(0,e.sin)(R),K=r*(0,e.cos)(P),L=r*(0,e.sin)(P);if(g<e.pi&&(H=l(D,E,K,L,I,J,F,G))){var N=D-H[0],Q=E-H[1],S=I-H[0],U=J-H[1],V=1/(0,e.sin)((0,e.acos)((N*S+Q*U)/((0,e.sqrt)(N*N+Q*Q)*(0,e.sqrt)(S*S+U*U)))/2),W=(0,e.sqrt)(H[0]*H[0]+H[1]*H[1]);w=(0,e.min)(k,(r-W)/(V-1)),z=(0,e.min)(k,(o-W)/(V+1))}}j>e.epsilon?z>e.epsilon?(q=s(K,L,D,E,o,z,m),T=s(I,J,F,G,o,z,m),v.moveTo(q.cx+q.x01,q.cy+q.y01),z<k?v.arc(q.cx,q.cy,z,(0,e.atan2)(q.y01,q.x01),(0,e.atan2)(T.y01,T.x01),!m):(v.arc(q.cx,q.cy,z,(0,e.atan2)(q.y01,q.x01),(0,e.atan2)(q.y11,q.x11),!m),v.arc(0,0,o,(0,e.atan2)(q.cy+q.y11,q.cx+q.x11),(0,e.atan2)(T.cy+T.y11,T.cx+T.x11),!m),v.arc(T.cx,T.cy,z,(0,e.atan2)(T.y11,T.x11),(0,e.atan2)(T.y01,T.x01),!m))):(v.moveTo(D,E),v.arc(0,0,o,A,R,!m)):v.moveTo(D,E),r>e.epsilon&&b>e.epsilon?w>e.epsilon?(q=s(F,G,I,J,r,-w,m),T=s(D,E,K,L,r,-w,m),v.lineTo(q.cx+q.x01,q.cy+q.y01),w<k?v.arc(q.cx,q.cy,w,(0,e.atan2)(q.y01,q.x01),(0,e.atan2)(T.y01,T.x01),!m):(v.arc(q.cx,q.cy,w,(0,e.atan2)(q.y01,q.x01),(0,e.atan2)(q.y11,q.x11),!m),v.arc(0,0,r,(0,e.atan2)(q.cy+q.y11,q.cx+q.x11),(0,e.atan2)(T.cy+T.y11,T.cx+T.x11),m),v.arc(T.cx,T.cy,w,(0,e.atan2)(T.y11,T.x11),(0,e.atan2)(T.y01,T.x01),!m))):v.arc(0,0,r,_,P,m):v.lineTo(F,G)}else v.moveTo(0,0);if(v.closePath(),t)return v=null,t+""||null}return g.centroid=function(){var n=(+a.apply(this,arguments)+ +f.apply(this,arguments))/2,t=(+x.apply(this,arguments)+ +d.apply(this,arguments))/2-e.pi/2;return[(0,e.cos)(t)*n,(0,e.sin)(t)*n]},g.innerRadius=function(n){return arguments.length?(a="function"==typeof n?n:(0,t.default)(+n),g):a},g.outerRadius=function(n){return arguments.length?(f="function"==typeof n?n:(0,t.default)(+n),g):f},g.cornerRadius=function(n){return arguments.length?(p="function"==typeof n?n:(0,t.default)(+n),g):p},g.padRadius=function(n){return arguments.length?(y=null==n?null:"function"==typeof n?n:(0,t.default)(+n),g):y},g.startAngle=function(n){return arguments.length?(x="function"==typeof n?n:(0,t.default)(+n),g):x},g.endAngle=function(n){return arguments.length?(d="function"==typeof n?n:(0,t.default)(+n),g):d},g.padAngle=function(n){return arguments.length?(h="function"==typeof n?n:(0,t.default)(+n),g):h},g.context=function(n){return arguments.length?(v=null==n?null:n,g):v},g}
},{"d3-path":"zaWp","./constant.js":"u0FZ","./math.js":"afGh"}],"QOZc":[function(require,module,exports) {
"use strict";function t(t){this._context=t}function i(i){return new t(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};
},{}],"ds32":[function(require,module,exports) {
"use strict";function e(e){return e[0]}function t(e){return e[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.x=e,exports.y=t;
},{}],"ddXz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var n=require("d3-path"),e=r(require("./constant.js")),t=r(require("./curve/linear.js")),u=require("./point.js");function r(n){return n&&n.__esModule?n:{default:n}}function l(){var r=u.x,l=u.y,f=(0,e.default)(!0),i=null,o=t.default,c=null;function a(e){var t,u,a,d=e.length,p=!1;for(null==i&&(c=o(a=(0,n.path)())),t=0;t<=d;++t)!(t<d&&f(u=e[t],t,e))===p&&((p=!p)?c.lineStart():c.lineEnd()),p&&c.point(+r(u,t,e),+l(u,t,e));if(a)return c=null,a+""||null}return a.x=function(n){return arguments.length?(r="function"==typeof n?n:(0,e.default)(+n),a):r},a.y=function(n){return arguments.length?(l="function"==typeof n?n:(0,e.default)(+n),a):l},a.defined=function(n){return arguments.length?(f="function"==typeof n?n:(0,e.default)(!!n),a):f},a.curve=function(n){return arguments.length?(o=n,null!=i&&(c=o(i)),a):o},a.context=function(n){return arguments.length?(null==n?i=c=null:c=o(i=n),a):i},a}
},{"d3-path":"zaWp","./constant.js":"u0FZ","./curve/linear.js":"QOZc","./point.js":"ds32"}],"hF4o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var n=require("d3-path"),e=r(require("./constant.js")),t=r(require("./curve/linear.js")),u=r(require("./line.js")),l=require("./point.js");function r(n){return n&&n.__esModule?n:{default:n}}function f(){var r=l.x,f=null,i=(0,e.default)(0),o=l.y,c=(0,e.default)(!0),a=null,d=t.default,y=null;function p(e){var t,u,l,p,h,s=e.length,x=!1,g=new Array(s),v=new Array(s);for(null==a&&(y=d(h=(0,n.path)())),t=0;t<=s;++t){if(!(t<s&&c(p=e[t],t,e))===x)if(x=!x)u=t,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),l=t-1;l>=u;--l)y.point(g[l],v[l]);y.lineEnd(),y.areaEnd()}x&&(g[t]=+r(p,t,e),v[t]=+i(p,t,e),y.point(f?+f(p,t,e):g[t],o?+o(p,t,e):v[t]))}if(h)return y=null,h+""||null}function h(){return(0,u.default)().defined(c).curve(d).context(a)}return p.x=function(n){return arguments.length?(r="function"==typeof n?n:(0,e.default)(+n),f=null,p):r},p.x0=function(n){return arguments.length?(r="function"==typeof n?n:(0,e.default)(+n),p):r},p.x1=function(n){return arguments.length?(f=null==n?null:"function"==typeof n?n:(0,e.default)(+n),p):f},p.y=function(n){return arguments.length?(i="function"==typeof n?n:(0,e.default)(+n),o=null,p):i},p.y0=function(n){return arguments.length?(i="function"==typeof n?n:(0,e.default)(+n),p):i},p.y1=function(n){return arguments.length?(o=null==n?null:"function"==typeof n?n:(0,e.default)(+n),p):o},p.lineX0=p.lineY0=function(){return h().x(r).y(i)},p.lineY1=function(){return h().x(r).y(o)},p.lineX1=function(){return h().x(f).y(i)},p.defined=function(n){return arguments.length?(c="function"==typeof n?n:(0,e.default)(!!n),p):c},p.curve=function(n){return arguments.length?(d=n,null!=a&&(y=d(a)),p):d},p.context=function(n){return arguments.length?(null==n?a=y=null:y=d(a=n),p):a},p}
},{"d3-path":"zaWp","./constant.js":"u0FZ","./curve/linear.js":"QOZc","./line.js":"ddXz","./point.js":"ds32"}],"wa3i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=r(require("./constant.js")),n=r(require("./descending.js")),e=r(require("./identity.js")),u=require("./math.js");function r(t){return t&&t.__esModule?t:{default:t}}function l(){var r=e.default,l=n.default,a=null,f=(0,t.default)(0),o=(0,t.default)(u.tau),i=(0,t.default)(0);function d(t){var n,e,d,s,c,h=t.length,p=0,g=new Array(h),y=new Array(h),A=+f.apply(this,arguments),v=Math.min(u.tau,Math.max(-u.tau,o.apply(this,arguments)-A)),M=Math.min(Math.abs(v)/h,i.apply(this,arguments)),j=M*(v<0?-1:1);for(n=0;n<h;++n)(c=y[g[n]=n]=+r(t[n],n,t))>0&&(p+=c);for(null!=l?g.sort(function(t,n){return l(y[t],y[n])}):null!=a&&g.sort(function(n,e){return a(t[n],t[e])}),n=0,d=p?(v-h*j)/p:0;n<h;++n,A=s)e=g[n],s=A+((c=y[e])>0?c*d:0)+j,y[e]={data:t[e],index:n,value:c,startAngle:A,endAngle:s,padAngle:M};return y}return d.value=function(n){return arguments.length?(r="function"==typeof n?n:(0,t.default)(+n),d):r},d.sortValues=function(t){return arguments.length?(l=t,a=null,d):l},d.sort=function(t){return arguments.length?(a=t,l=null,d):a},d.startAngle=function(n){return arguments.length?(f="function"==typeof n?n:(0,t.default)(+n),d):f},d.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:(0,t.default)(+n),d):o},d.padAngle=function(n){return arguments.length?(i="function"==typeof n?n:(0,t.default)(+n),d):i},d}
},{"./constant.js":"u0FZ","./descending.js":"s7oJ","./identity.js":"IRat","./math.js":"afGh"}],"cgqr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.curveRadialLinear=void 0;var e=t(require("./linear.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=i(e.default);function n(e){this._curve=e}function i(e){function t(t){return new n(e(t))}return t._curve=e,t}exports.curveRadialLinear=r,n.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};
},{"./linear.js":"QOZc"}],"xHmW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineRadial=a,exports.default=i;var e=u(require("./curve/radial.js")),r=t(require("./line.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(t,a,i):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function a(r){var t=r.curve;return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r.curve=function(r){return arguments.length?t((0,e.default)(r)):t()._curve},r}function i(){return a((0,r.default)().curve(e.curveRadialLinear))}
},{"./curve/radial.js":"cgqr","./line.js":"ddXz"}],"xDfm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=l(require("./curve/radial.js")),n=r(require("./area.js")),t=require("./lineRadial.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i();if(n&&n.has(e))return n.get(e);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(t,l,u):t[l]=e[l]}return t.default=e,n&&n.set(e,t),t}function u(){var r=(0,n.default)().curve(e.curveRadialLinear),i=r.curve,l=r.lineX0,u=r.lineX1,a=r.lineY0,d=r.lineY1;return r.angle=r.x,delete r.x,r.startAngle=r.x0,delete r.x0,r.endAngle=r.x1,delete r.x1,r.radius=r.y,delete r.y,r.innerRadius=r.y0,delete r.y0,r.outerRadius=r.y1,delete r.y1,r.lineStartAngle=function(){return(0,t.lineRadial)(l())},delete r.lineX0,r.lineEndAngle=function(){return(0,t.lineRadial)(u())},delete r.lineX1,r.lineInnerRadius=function(){return(0,t.lineRadial)(a())},delete r.lineY0,r.lineOuterRadius=function(){return(0,t.lineRadial)(d())},delete r.lineY1,r.curve=function(n){return arguments.length?i((0,e.default)(n)):i()._curve},r}
},{"./curve/radial.js":"cgqr","./area.js":"hF4o","./lineRadial.js":"xHmW"}],"lP1e":[function(require,module,exports) {
"use strict";function e(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Ha4g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linkHorizontal=s,exports.linkVertical=d,exports.linkRadial=y;var e=require("d3-path"),t=require("../array.js"),n=i(require("../constant.js")),r=require("../point.js"),u=i(require("../pointRadial.js"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return e.source}function o(e){return e.target}function a(u){var i=l,a=o,f=r.x,c=r.y,p=null;function s(){var n,r=t.slice.call(arguments),l=i.apply(this,r),o=a.apply(this,r);if(p||(p=n=(0,e.path)()),u(p,+f.apply(this,(r[0]=l,r)),+c.apply(this,r),+f.apply(this,(r[0]=o,r)),+c.apply(this,r)),n)return p=null,n+""||null}return s.source=function(e){return arguments.length?(i=e,s):i},s.target=function(e){return arguments.length?(a=e,s):a},s.x=function(e){return arguments.length?(f="function"==typeof e?e:(0,n.default)(+e),s):f},s.y=function(e){return arguments.length?(c="function"==typeof e?e:(0,n.default)(+e),s):c},s.context=function(e){return arguments.length?(p=null==e?null:e,s):p},s}function f(e,t,n,r,u){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,u,r,u)}function c(e,t,n,r,u){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+u)/2,r,n,r,u)}function p(e,t,n,r,i){var l=(0,u.default)(t,n),o=(0,u.default)(t,n=(n+i)/2),a=(0,u.default)(r,n),f=(0,u.default)(r,i);e.moveTo(l[0],l[1]),e.bezierCurveTo(o[0],o[1],a[0],a[1],f[0],f[1])}function s(){return a(f)}function d(){return a(c)}function y(){var e=a(p);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}
},{"d3-path":"zaWp","../array.js":"ihQ5","../constant.js":"u0FZ","../point.js":"ds32","../pointRadial.js":"lP1e"}],"M8zP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../math.js"),t={draw:function(t,r){var a=Math.sqrt(r/e.pi);t.moveTo(a,0),t.arc(0,0,a,0,e.tau)}};exports.default=t;
},{"../math.js":"afGh"}],"yk2Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={draw:function(e,o){var l=Math.sqrt(o/5)/2;e.moveTo(-3*l,-l),e.lineTo(-l,-l),e.lineTo(-l,-3*l),e.lineTo(l,-3*l),e.lineTo(l,-l),e.lineTo(3*l,-l),e.lineTo(3*l,l),e.lineTo(l,l),e.lineTo(l,3*l),e.lineTo(-l,3*l),e.lineTo(-l,l),e.lineTo(-3*l,l),e.closePath()}};exports.default=e;
},{}],"dxeN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=Math.sqrt(1/3),t=2*e,o={draw:function(o,r){var a=Math.sqrt(r/t),s=a*e;o.moveTo(0,-a),o.lineTo(s,0),o.lineTo(0,a),o.lineTo(-s,0),o.closePath()}};exports.default=o;
},{}],"R9dz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../math.js"),a=.8908130915292852,e=Math.sin(t.pi/10)/Math.sin(7*t.pi/10),o=Math.sin(t.tau/10)*e,r=-Math.cos(t.tau/10)*e,s={draw:function(e,s){var i=Math.sqrt(s*a),n=o*i,u=r*i;e.moveTo(0,-i),e.lineTo(n,u);for(var h=1;h<5;++h){var l=t.tau*h/5,M=Math.cos(l),v=Math.sin(l);e.lineTo(v*i,-M*i),e.lineTo(M*n-v*u,v*n+M*u)}e.closePath()}};exports.default=s;
},{"../math.js":"afGh"}],"zJh7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={draw:function(e,t){var r=Math.sqrt(t),a=-r/2;e.rect(a,a,r,r)}};exports.default=e;
},{}],"FFoX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=Math.sqrt(3),t={draw:function(t,o){var r=-Math.sqrt(o/(3*e));t.moveTo(0,2*r),t.lineTo(-e*r,-r),t.lineTo(e*r,-r),t.closePath()}};exports.default=t;
},{}],"pUX9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=-.5,o=Math.sqrt(3)/2,t=1/Math.sqrt(12),l=3*(t/2+1),i={draw:function(i,r){var n=Math.sqrt(r/l),a=n/2,s=n*t,T=a,d=n*t+n,u=-T,v=d;i.moveTo(a,s),i.lineTo(T,d),i.lineTo(u,v),i.lineTo(e*a-o*s,o*a+e*s),i.lineTo(e*T-o*d,o*T+e*d),i.lineTo(e*u-o*v,o*u+e*v),i.lineTo(e*a+o*s,e*s-o*a),i.lineTo(e*T+o*d,e*d-o*T),i.lineTo(e*u+o*v,e*v-o*u),i.closePath()}};exports.default=i;
},{}],"JDbG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d,exports.symbols=void 0;var e=require("d3-path"),t=i(require("./symbol/circle.js")),r=i(require("./symbol/cross.js")),u=i(require("./symbol/diamond.js")),l=i(require("./symbol/star.js")),n=i(require("./symbol/square.js")),s=i(require("./symbol/triangle.js")),o=i(require("./symbol/wye.js")),a=i(require("./constant.js"));function i(e){return e&&e.__esModule?e:{default:e}}var f=[t.default,r.default,u.default,n.default,l.default,s.default,o.default];function d(){var r=(0,a.default)(t.default),u=(0,a.default)(64),l=null;function n(){var t;if(l||(l=t=(0,e.path)()),r.apply(this,arguments).draw(l,+u.apply(this,arguments)),t)return l=null,t+""||null}return n.type=function(e){return arguments.length?(r="function"==typeof e?e:(0,a.default)(e),n):r},n.size=function(e){return arguments.length?(u="function"==typeof e?e:(0,a.default)(+e),n):u},n.context=function(e){return arguments.length?(l=null==e?null:e,n):l},n}exports.symbols=f;
},{"d3-path":"zaWp","./symbol/circle.js":"M8zP","./symbol/cross.js":"yk2Q","./symbol/diamond.js":"dxeN","./symbol/star.js":"R9dz","./symbol/square.js":"zJh7","./symbol/triangle.js":"FFoX","./symbol/wye.js":"pUX9","./constant.js":"u0FZ"}],"QeRe":[function(require,module,exports) {
"use strict";function t(t,i,s){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+s)/6)}function i(t){this._context=t}function s(t){return new i(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=t,exports.Basis=i,exports.default=s,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}};
},{}],"xXOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_;var t=s(require("../noop.js")),i=require("./basis.js");function s(t){return t&&t.__esModule?t:{default:t}}function h(t){this._context=t}function _(t){return new h(t)}h.prototype={areaStart:t.default,areaEnd:t.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:(0,i.point)(this,t,s)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};
},{"../noop.js":"mjlc","./basis.js":"QeRe"}],"si4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=require("./basis.js");function i(t){this._context=t}function s(t){return new i(t)}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+i)/6,n=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 3:this._point=4;default:(0,t.point)(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}};
},{"./basis.js":"QeRe"}],"sNVh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./basis.js");function i(i,s){this._basis=new t.Basis(i),this._beta=s}i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,s=t.length-1;if(s>0)for(var e,n=t[0],a=i[0],r=t[s]-n,h=i[s]-a,u=-1;++u<=s;)e=u/s,this._basis.point(this._beta*t[u]+(1-this._beta)*(n+e*r),this._beta*i[u]+(1-this._beta)*(a+e*h));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};var s=function s(e){function n(s){return 1===e?new t.Basis(s):new i(s,e)}return n.beta=function(t){return s(+t)},n}(.85);exports.default=s;
},{"./basis.js":"QeRe"}],"Xn7T":[function(require,module,exports) {
"use strict";function t(t,i,s){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-s),t._x2,t._y2)}function i(t,i){this._context=t,this._k=(1-i)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=t,exports.Cardinal=i,exports.default=void 0,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:t(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2,this._x1=i,this._y1=s;break;case 2:this._point=3;default:t(this,i,s)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var s=function t(s){function _(t){return new i(t,s)}return _.tension=function(i){return t(+i)},_}(0);exports.default=s;
},{}],"Vmco":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardinalClosed=h,exports.default=void 0;var t=s(require("../noop.js")),i=require("./cardinal.js");function s(t){return t&&t.__esModule?t:{default:t}}function h(t,i){this._context=t,this._k=(1-i)/6}h.prototype={areaStart:t.default,areaEnd:t.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x3=t,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=s);break;case 2:this._point=3,this._x5=t,this._y5=s;break;default:(0,i.point)(this,t,s)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var e=function t(i){function s(t){return new h(t,i)}return s.tension=function(i){return t(+i)},s}(0);exports.default=e;
},{"../noop.js":"mjlc","./cardinal.js":"Xn7T"}],"qhAo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardinalOpen=i,exports.default=void 0;var t=require("./cardinal.js");function i(t,i){this._context=t,this._k=(1-i)/6}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,t.point)(this,i,s)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var s=function t(s){function n(t){return new i(t,s)}return n.tension=function(i){return t(+i)},n}(0);exports.default=s;
},{"./cardinal.js":"Xn7T"}],"Wuon":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=i,exports.default=void 0;var _=require("../math.js"),t=require("./cardinal.js");function i(t,i,s){var a=t._x1,h=t._y1,l=t._x2,n=t._y2;if(t._l01_a>_.epsilon){var e=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,o=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*e-t._x0*t._l12_2a+t._x2*t._l01_2a)/o,h=(h*e-t._y0*t._l12_2a+t._y2*t._l01_2a)/o}if(t._l23_a>_.epsilon){var r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);l=(l*r+t._x1*t._l23_2a-i*t._l12_2a)/c,n=(n*r+t._y1*t._l23_2a-s*t._l12_2a)/c}t._context.bezierCurveTo(a,h,l,n,t._x2,t._y2)}function s(_,t){this._context=_,this._alpha=t}s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_,t){if(_=+_,t=+t,this._point){var s=this._x2-_,a=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,t):this._context.moveTo(_,t);break;case 1:this._point=2;break;case 2:this._point=3;default:i(this,_,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var a=function _(i){function a(_){return i?new s(_,i):new t.Cardinal(_,0)}return a.alpha=function(t){return _(+t)},a}(.5);exports.default=a;
},{"../math.js":"afGh","./cardinal.js":"Xn7T"}],"VAcR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./cardinalClosed.js"),i=_(require("../noop.js")),s=require("./catmullRom.js");function _(t){return t&&t.__esModule?t:{default:t}}function h(t,i){this._context=t,this._alpha=i}h.prototype={areaStart:i.default,areaEnd:i.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){if(t=+t,i=+i,this._point){var _=this._x2-t,h=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(_*_+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:(0,s.point)(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var e=function i(s){function _(i){return s?new h(i,s):new t.CardinalClosed(i,0)}return _.alpha=function(t){return i(+t)},_}(.5);exports.default=e;
},{"./cardinalClosed.js":"Vmco","../noop.js":"mjlc","./catmullRom.js":"Wuon"}],"ohVI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./cardinalOpen.js"),i=require("./catmullRom.js");function _(t,i){this._context=t,this._alpha=i}_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,_){if(t=+t,_=+_,this._point){var s=this._x2-t,h=this._y2-_;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,i.point)(this,t,_)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=_}};var s=function i(s){function h(i){return s?new _(i,s):new t.CardinalOpen(i,0)}return h.alpha=function(t){return i(+t)},h}(.5);exports.default=s;
},{"./cardinalOpen.js":"qhAo","./catmullRom.js":"Wuon"}],"FTCL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=e(require("../noop.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){this._context=t}function o(t){return new n(t)}n.prototype={areaStart:t.default,areaEnd:t.default,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};
},{"../noop.js":"mjlc"}],"ipSN":[function(require,module,exports) {
"use strict";function t(t){return t<0?-1:1}function i(i,n,e){var o=i._x1-i._x0,s=n-i._x1,h=(i._y1-i._y0)/(o||s<0&&-0),_=(e-i._y1)/(s||o<0&&-0),c=(h*s+_*o)/(o+s);return(t(h)+t(_))*Math.min(Math.abs(h),Math.abs(_),.5*Math.abs(c))||0}function n(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function e(t,i,n){var e=t._x0,o=t._y0,s=t._x1,h=t._y1,_=(s-e)/3;t._context.bezierCurveTo(e+_,o+_*i,s-_,h-_*n,s,h)}function o(t){this._context=t}function s(t){this._context=new h(t)}function h(t){this._context=t}function _(t){return new o(t)}function c(t){return new s(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.monotoneX=_,exports.monotoneY=c,o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e(this,this._t0,n(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,o){var s=NaN;if(o=+o,(t=+t)!==this._x1||o!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,o):this._context.moveTo(t,o);break;case 1:this._point=2;break;case 2:this._point=3,e(this,n(this,s=i(this,t,o)),s);break;default:e(this,this._t0,s=i(this,t,o))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=o,this._t0=s}}},(s.prototype=Object.create(o.prototype)).point=function(t,i){o.prototype.point.call(this,i,t)},h.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,o,s){this._context.bezierCurveTo(i,t,e,n,s,o)}};
},{}],"u0Uc":[function(require,module,exports) {
"use strict";function t(t){this._context=t}function e(t){var e,i,n=t.length-1,o=new Array(n),r=new Array(n),s=new Array(n);for(o[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=o[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(o[n-1]=s[n-1]/r[n-1],e=n-2;e>=0;--e)o[e]=(s[e]-o[e+1])/r[e];for(r[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-o[e+1];return[o,r]}function i(e){return new t(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),2===n)this._context.lineTo(t[1],i[1]);else for(var o=e(t),r=e(i),s=0,h=1;h<n;++s,++h)this._context.bezierCurveTo(o[0][s],r[0][s],o[1][s],r[1][s],t[h],i[h]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};
},{}],"tDZT":[function(require,module,exports) {
"use strict";function t(t,i){this._context=t,this._t=i}function i(i){return new t(i,.5)}function e(i){return new t(i,0)}function n(i){return new t(i,1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.stepBefore=e,exports.stepAfter=n,t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,i)}}this._x=t,this._y=i}};
},{}],"tuer":[function(require,module,exports) {
"use strict";function e(e,t){if((f=e.length)>1)for(var r,o,f,s=1,i=e[t[0]],l=i.length;s<f;++s)for(o=i,i=e[t[s]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"h5Jt":[function(require,module,exports) {
"use strict";function e(e){for(var r=e.length,t=new Array(r);--r>=0;)t[r]=r;return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RN2I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("./array.js"),t=u(require("./constant.js")),n=u(require("./offset/none.js")),r=u(require("./order/none.js"));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return e[t]}function l(){var u=(0,t.default)([]),l=r.default,o=n.default,a=f;function i(e){var t,n,r=u.apply(this,arguments),f=e.length,i=r.length,c=new Array(i);for(t=0;t<i;++t){for(var d,s=r[t],y=c[t]=new Array(f),p=0;p<f;++p)y[p]=d=[0,+a(e[p],s,p,e)],d.data=e[p];y.key=s}for(t=0,n=l(c);t<i;++t)c[n[t]].index=t;return o(c,n),c}return i.keys=function(n){return arguments.length?(u="function"==typeof n?n:(0,t.default)(e.slice.call(n)),i):u},i.value=function(e){return arguments.length?(a="function"==typeof e?e:(0,t.default)(+e),i):a},i.order=function(n){return arguments.length?(l=null==n?r.default:"function"==typeof n?n:(0,t.default)(e.slice.call(n)),i):l},i.offset=function(e){return arguments.length?(o=null==e?n.default:e,i):o},i}
},{"./array.js":"ihQ5","./constant.js":"u0FZ","./offset/none.js":"tuer","./order/none.js":"h5Jt"}],"tbmP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./none.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if((o=r.length)>0){for(var f,o,u,n=0,l=r[0].length;n<l;++n){for(u=f=0;f<o;++f)u+=r[f][n][1]||0;if(u)for(f=0;f<o;++f)r[f][n][1]/=u}(0,e.default)(r,t)}}
},{"./none.js":"tuer"}],"UlEI":[function(require,module,exports) {
"use strict";function e(e,t){if((s=e.length)>0)for(var r,o,f,l,n,s,u=0,i=e[t[0]].length;u<i;++u)for(l=n=0,r=0;r<s;++r)(f=(o=e[t[r]][u])[1]-o[0])>0?(o[0]=l,o[1]=l+=f):f<0?(o[1]=n,o[0]=n+=f):(o[0]=0,o[1]=f)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kvrQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./none.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if((u=r.length)>0){for(var u,n=0,o=r[t[0]],f=o.length;n<f;++n){for(var l=0,a=0;l<u;++l)a+=r[l][n][1]||0;o[n][1]+=o[n][0]=-a/2}(0,e.default)(r,t)}}
},{"./none.js":"tuer"}],"hNk7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./none.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if((f=r.length)>0&&(u=(o=r[t[0]]).length)>0){for(var o,u,f,n=0,a=1;a<u;++a){for(var l=0,s=0,d=0;l<f;++l){for(var i=r[t[l]],v=i[a][1]||0,c=(v-(i[a-1][1]||0))/2,_=0;_<l;++_){var p=r[t[_]];c+=(p[a][1]||0)-(p[a-1][1]||0)}s+=v,d+=c*v}o[a-1][1]+=o[a-1][0]=n,s&&(n-=d/s)}o[a-1][1]+=o[a-1][0]=n,(0,e.default)(r,t)}}
},{"./none.js":"tuer"}],"sKIT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./none.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var t=r.map(n);return(0,e.default)(r).sort(function(e,r){return t[e]-t[r]})}function n(e){for(var r,t=-1,n=0,u=e.length,o=-1/0;++t<u;)(r=+e[t][1])>o&&(o=r,n=t);return n}
},{"./none.js":"h5Jt"}],"doTn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.sum=u;var e=r(require("./none.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var t=r.map(u);return(0,e.default)(r).sort(function(e,r){return t[e]-t[r]})}function u(e){for(var r,t=0,u=-1,n=e.length;++u<n;)(r=+e[u][1])&&(t+=r);return t}
},{"./none.js":"h5Jt"}],"DVmH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./ascending.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){return(0,e.default)(r).reverse()}
},{"./ascending.js":"doTn"}],"NO12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=u(require("./appearance.js")),r=require("./ascending.js");function u(e){return e&&e.__esModule?e:{default:e}}function t(u){var t,s,a=u.length,n=u.map(r.sum),o=(0,e.default)(u),c=0,p=0,d=[],f=[];for(t=0;t<a;++t)s=o[t],c<p?(c+=n[s],d.push(s)):(p+=n[s],f.push(s));return f.reverse().concat(d)}
},{"./appearance.js":"sKIT","./ascending.js":"doTn"}],"Eewl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./none.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){return(0,e.default)(r).reverse()}
},{"./none.js":"h5Jt"}],"TYWk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"arc",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"area",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"line",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"pie",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"areaRadial",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"radialArea",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"lineRadial",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"radialLine",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"pointRadial",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"linkHorizontal",{enumerable:!0,get:function(){return a.linkHorizontal}}),Object.defineProperty(exports,"linkVertical",{enumerable:!0,get:function(){return a.linkVertical}}),Object.defineProperty(exports,"linkRadial",{enumerable:!0,get:function(){return a.linkRadial}}),Object.defineProperty(exports,"symbol",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"symbols",{enumerable:!0,get:function(){return l.symbols}}),Object.defineProperty(exports,"symbolCircle",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"symbolCross",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"symbolDiamond",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"symbolSquare",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"symbolStar",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"symbolTriangle",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"symbolWye",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"curveBasisClosed",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"curveBasisOpen",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"curveBasis",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"curveBundle",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"curveCardinalClosed",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"curveCardinalOpen",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"curveCardinal",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"curveCatmullRomClosed",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"curveCatmullRomOpen",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"curveCatmullRom",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"curveLinearClosed",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"curveLinear",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"curveMonotoneX",{enumerable:!0,get:function(){return w.monotoneX}}),Object.defineProperty(exports,"curveMonotoneY",{enumerable:!0,get:function(){return w.monotoneY}}),Object.defineProperty(exports,"curveNatural",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(exports,"curveStep",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"curveStepAfter",{enumerable:!0,get:function(){return S.stepAfter}}),Object.defineProperty(exports,"curveStepBefore",{enumerable:!0,get:function(){return S.stepBefore}}),Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"stackOffsetExpand",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"stackOffsetDiverging",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"stackOffsetNone",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"stackOffsetSilhouette",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(exports,"stackOffsetWiggle",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"stackOrderAppearance",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(exports,"stackOrderAscending",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(exports,"stackOrderDescending",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(exports,"stackOrderInsideOut",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(exports,"stackOrderNone",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(exports,"stackOrderReverse",{enumerable:!0,get:function(){return Y.default}});var e=T(require("./arc.js")),r=T(require("./area.js")),t=T(require("./line.js")),n=T(require("./pie.js")),u=T(require("./areaRadial.js")),o=T(require("./lineRadial.js")),i=T(require("./pointRadial.js")),a=require("./link/index.js"),l=I(require("./symbol.js")),f=T(require("./symbol/circle.js")),s=T(require("./symbol/cross.js")),c=T(require("./symbol/diamond.js")),d=T(require("./symbol/square.js")),p=T(require("./symbol/star.js")),b=T(require("./symbol/triangle.js")),j=T(require("./symbol/wye.js")),m=T(require("./curve/basisClosed.js")),y=T(require("./curve/basisOpen.js")),O=T(require("./curve/basis.js")),g=T(require("./curve/bundle.js")),P=T(require("./curve/cardinalClosed.js")),x=T(require("./curve/cardinalOpen.js")),q=T(require("./curve/cardinal.js")),v=T(require("./curve/catmullRomClosed.js")),k=T(require("./curve/catmullRomOpen.js")),C=T(require("./curve/catmullRom.js")),R=T(require("./curve/linearClosed.js")),M=T(require("./curve/linear.js")),w=require("./curve/monotone.js"),B=T(require("./curve/natural.js")),S=I(require("./curve/step.js")),_=T(require("./stack.js")),A=T(require("./offset/expand.js")),D=T(require("./offset/diverging.js")),h=T(require("./offset/none.js")),W=T(require("./offset/silhouette.js")),L=T(require("./offset/wiggle.js")),N=T(require("./order/appearance.js")),z=T(require("./order/ascending.js")),H=T(require("./order/descending.js")),V=T(require("./order/insideOut.js")),X=T(require("./order/none.js")),Y=T(require("./order/reverse.js"));function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function I(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(t,u,o):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function T(e){return e&&e.__esModule?e:{default:e}}
},{"./arc.js":"KUIA","./area.js":"hF4o","./line.js":"ddXz","./pie.js":"wa3i","./areaRadial.js":"xDfm","./lineRadial.js":"xHmW","./pointRadial.js":"lP1e","./link/index.js":"Ha4g","./symbol.js":"JDbG","./symbol/circle.js":"M8zP","./symbol/cross.js":"yk2Q","./symbol/diamond.js":"dxeN","./symbol/square.js":"zJh7","./symbol/star.js":"R9dz","./symbol/triangle.js":"FFoX","./symbol/wye.js":"pUX9","./curve/basisClosed.js":"xXOq","./curve/basisOpen.js":"si4a","./curve/basis.js":"QeRe","./curve/bundle.js":"sNVh","./curve/cardinalClosed.js":"Vmco","./curve/cardinalOpen.js":"qhAo","./curve/cardinal.js":"Xn7T","./curve/catmullRomClosed.js":"VAcR","./curve/catmullRomOpen.js":"ohVI","./curve/catmullRom.js":"Wuon","./curve/linearClosed.js":"FTCL","./curve/linear.js":"QOZc","./curve/monotone.js":"ipSN","./curve/natural.js":"u0Uc","./curve/step.js":"tDZT","./stack.js":"RN2I","./offset/expand.js":"tbmP","./offset/diverging.js":"UlEI","./offset/none.js":"tuer","./offset/silhouette.js":"kvrQ","./offset/wiggle.js":"hNk7","./order/appearance.js":"sKIT","./order/ascending.js":"doTn","./order/descending.js":"DVmH","./order/insideOut.js":"NO12","./order/none.js":"h5Jt","./order/reverse.js":"Eewl"}],"ageH":[function(require,module,exports) {
"use strict";function C(){this._=null}function t(C){C.U=C.C=C.L=C.R=C.P=C.N=null}function i(C,t){var i=t,L=t.R,e=i.U;e?e.L===i?e.L=L:e.R=L:C._=L,L.U=e,i.U=L,i.R=L.L,i.R&&(i.R.U=i),L.L=i}function L(C,t){var i=t,L=t.L,e=i.U;e?e.L===i?e.L=L:e.R=L:C._=L,L.U=e,i.U=L,i.L=L.R,i.L&&(i.L.U=i),L.R=i}function e(C){for(;C.L;)C=C.L;return C}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedBlackNode=t,exports.default=void 0,C.prototype={constructor:C,insert:function(C,t){var s,R,n;if(C){if(t.P=C,t.N=C.N,C.N&&(C.N.P=t),C.N=t,C.R){for(C=C.R;C.L;)C=C.L;C.L=t}else C.R=t;s=C}else this._?(C=e(this._),t.P=null,t.N=C,C.P=C.L=t,s=C):(t.P=t.N=null,this._=t,s=null);for(t.L=t.R=null,t.U=s,t.C=!0,C=t;s&&s.C;)s===(R=s.U).L?(n=R.R)&&n.C?(s.C=n.C=!1,R.C=!0,C=R):(C===s.R&&(i(this,s),s=(C=s).U),s.C=!1,R.C=!0,L(this,R)):(n=R.L)&&n.C?(s.C=n.C=!1,R.C=!0,C=R):(C===s.L&&(L(this,s),s=(C=s).U),s.C=!1,R.C=!0,i(this,R)),s=C.U;this._.C=!1},remove:function(C){C.N&&(C.N.P=C.P),C.P&&(C.P.N=C.N),C.N=C.P=null;var t,s,R,n=C.U,r=C.L,l=C.R;if(s=r?l?e(l):r:l,n?n.L===C?n.L=s:n.R=s:this._=s,r&&l?(R=s.C,s.C=C.C,s.L=r,r.U=s,s!==l?(n=s.U,s.U=C.U,C=s.R,n.L=C,s.R=l,l.U=s):(s.U=n,n=s,C=s.R)):(R=C.C,C=s),C&&(C.U=n),!R)if(C&&C.C)C.C=!1;else{do{if(C===this._)break;if(C===n.L){if((t=n.R).C&&(t.C=!1,n.C=!0,i(this,n),t=n.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,L(this,t),t=n.R),t.C=n.C,n.C=t.R.C=!1,i(this,n),C=this._;break}}else if((t=n.L).C&&(t.C=!1,n.C=!0,L(this,n),t=n.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,i(this,t),t=n.L),t.C=n.C,n.C=t.L.C=!1,L(this,n),C=this._;break}t.C=!0,C=n,n=n.U}while(!C.C);C&&(C.C=!1)}}};var s=C;exports.default=s;
},{}],"pD4W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEdge=r,exports.createBorderEdge=i,exports.setEdgeEnd=f,exports.clipEdges=s;var e=require("./Diagram");function r(r,i,t,n){var s=[null,null],l=e.edges.push(s)-1;return s.left=r,s.right=i,t&&f(s,r,i,t),n&&f(s,i,r,n),e.cells[r.index].halfedges.push(l),e.cells[i.index].halfedges.push(l),s}function i(e,r,i){var f=[r,i];return f.left=e,f}function f(e,r,i,f){e[0]||e[1]?e.left===i?e[1]=f:e[0]=f:(e[0]=f,e.left=r,e.right=i)}function t(e,r,i,f,t){var n,s=e[0],l=e[1],u=s[0],a=s[1],d=0,o=1,g=l[0]-u,c=l[1]-a;if(n=r-u,g||!(n>0)){if(n/=g,g<0){if(n<d)return;n<o&&(o=n)}else if(g>0){if(n>o)return;n>d&&(d=n)}if(n=f-u,g||!(n<0)){if(n/=g,g<0){if(n>o)return;n>d&&(d=n)}else if(g>0){if(n<d)return;n<o&&(o=n)}if(n=i-a,c||!(n>0)){if(n/=c,c<0){if(n<d)return;n<o&&(o=n)}else if(c>0){if(n>o)return;n>d&&(d=n)}if(n=t-a,c||!(n<0)){if(n/=c,c<0){if(n>o)return;n>d&&(d=n)}else if(c>0){if(n<d)return;n<o&&(o=n)}return!(d>0||o<1)||(d>0&&(e[0]=[u+d*g,a+d*c]),o<1&&(e[1]=[u+o*g,a+o*c]),!0)}}}}}function n(e,r,i,f,t){var n=e[1];if(n)return!0;var s,l,u=e[0],a=e.left,d=e.right,o=a[0],g=a[1],c=d[0],p=d[1],h=(o+c)/2,v=(g+p)/2;if(p===g){if(h<r||h>=f)return;if(o>c){if(u){if(u[1]>=t)return}else u=[h,i];n=[h,t]}else{if(u){if(u[1]<i)return}else u=[h,t];n=[h,i]}}else if(l=v-(s=(o-c)/(p-g))*h,s<-1||s>1)if(o>c){if(u){if(u[1]>=t)return}else u=[(i-l)/s,i];n=[(t-l)/s,t]}else{if(u){if(u[1]<i)return}else u=[(t-l)/s,t];n=[(i-l)/s,i]}else if(g<p){if(u){if(u[0]>=f)return}else u=[r,s*r+l];n=[f,s*f+l]}else{if(u){if(u[0]<r)return}else u=[f,s*f+l];n=[r,s*r+l]}return e[0]=u,e[1]=n,!0}function s(r,i,f,s){for(var l,u=e.edges.length;u--;)n(l=e.edges[u],r,i,f,s)&&t(l,r,i,f,s)&&(Math.abs(l[0][0]-l[1][0])>e.epsilon||Math.abs(l[0][1]-l[1][1])>e.epsilon)||delete e.edges[u]}
},{"./Diagram":"kqrB"}],"v5QX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCell=l,exports.cellHalfedgeStart=t,exports.cellHalfedgeEnd=a,exports.sortCellHalfedges=n,exports.clipCells=o;var e=require("./Edge"),s=require("./Diagram");function l(e){return s.cells[e.index]={site:e,halfedges:[]}}function r(e,s){var l=e.site,r=s.left,t=s.right;return l===t&&(t=r,r=l),t?Math.atan2(t[1]-r[1],t[0]-r[0]):(l===r?(r=s[1],t=s[0]):(r=s[0],t=s[1]),Math.atan2(r[0]-t[0],t[1]-r[1]))}function t(e,s){return s[+(s.left!==e.site)]}function a(e,s){return s[+(s.left===e.site)]}function n(){for(var e,l,t,a,n=0,o=s.cells.length;n<o;++n)if((e=s.cells[n])&&(a=(l=e.halfedges).length)){var i=new Array(a),d=new Array(a);for(t=0;t<a;++t)i[t]=t,d[t]=r(e,s.edges[l[t]]);for(i.sort(function(e,s){return d[s]-d[e]}),t=0;t<a;++t)d[t]=l[i[t]];for(t=0;t<a;++t)l[t]=d[t]}}function o(l,r,n,o){var i,d,f,g,h,p,c,u,M,b,v,x,E=s.cells.length,B=!0;for(i=0;i<E;++i)if(d=s.cells[i]){for(f=d.site,g=(h=d.halfedges).length;g--;)s.edges[h[g]]||h.splice(g,1);for(g=0,p=h.length;g<p;)v=(b=a(d,s.edges[h[g]]))[0],x=b[1],u=(c=t(d,s.edges[h[++g%p]]))[0],M=c[1],(Math.abs(v-u)>s.epsilon||Math.abs(x-M)>s.epsilon)&&(h.splice(g,0,s.edges.push((0,e.createBorderEdge)(f,b,Math.abs(v-l)<s.epsilon&&o-x>s.epsilon?[l,Math.abs(u-l)<s.epsilon?M:o]:Math.abs(x-o)<s.epsilon&&n-v>s.epsilon?[Math.abs(M-o)<s.epsilon?u:n,o]:Math.abs(v-n)<s.epsilon&&x-r>s.epsilon?[n,Math.abs(u-n)<s.epsilon?M:r]:Math.abs(x-r)<s.epsilon&&v-l>s.epsilon?[Math.abs(M-r)<s.epsilon?u:l,r]:null))-1),++p);p&&(B=!1)}if(B){var y,C,H,q=1/0;for(i=0,B=null;i<E;++i)(d=s.cells[i])&&(H=(y=(f=d.site)[0]-l)*y+(C=f[1]-r)*C)<q&&(q=H,B=d);if(B){var w=[l,r],A=[l,o],_=[n,o],j=[n,r];B.halfedges.push(s.edges.push((0,e.createBorderEdge)(f=B.site,w,A))-1,s.edges.push((0,e.createBorderEdge)(f,A,_))-1,s.edges.push((0,e.createBorderEdge)(f,_,j))-1,s.edges.push((0,e.createBorderEdge)(f,j,w))-1)}}for(i=0;i<E;++i)(d=s.cells[i])&&(d.halfedges.length||delete s.cells[i])}
},{"./Edge":"pD4W","./Diagram":"kqrB"}],"wsGb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.attachCircle=c,exports.detachCircle=l,exports.firstCircle=void 0;var e,r=require("./RedBlackTree"),i=require("./Diagram"),t=[];function s(){(0,r.RedBlackNode)(this),this.x=this.y=this.arc=this.site=this.cy=null}function c(r){var c=r.P,l=r.N;if(c&&l){var a=c.site,o=r.site,f=l.site;if(a!==f){var n=o[0],p=o[1],u=a[0]-n,x=a[1]-p,h=f[0]-n,v=f[1]-p,d=2*(u*v-x*h);if(!(d>=-i.epsilon2)){var y=u*u+x*x,C=h*h+v*v,k=(v*y-x*C)/d,R=(u*C-h*y)/d,N=t.pop()||new s;N.arc=r,N.site=o,N.x=k+n,N.y=(N.cy=R+p)+Math.sqrt(k*k+R*R),r.circle=N;for(var P=null,b=i.circles._;b;)if(N.y<b.y||N.y===b.y&&N.x<=b.x){if(!b.L){P=b.P;break}b=b.L}else{if(!b.R){P=b;break}b=b.R}i.circles.insert(P,N),P||(exports.firstCircle=e=N)}}}}function l(s){var c=s.circle;c&&(c.P||(exports.firstCircle=e=c.N),i.circles.remove(c),t.push(c),(0,r.RedBlackNode)(c),s.circle=null)}exports.firstCircle=e;
},{"./RedBlackTree":"ageH","./Diagram":"kqrB"}],"oH3D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeBeach=d,exports.addBeach=h;var e=require("./RedBlackTree"),r=require("./Cell"),i=require("./Circle"),t=require("./Edge"),c=require("./Diagram"),a=[];function s(){(0,e.RedBlackNode)(this),this.edge=this.site=this.circle=null}function l(e){var r=a.pop()||new s;return r.site=e,r}function n(r){(0,i.detachCircle)(r),c.beaches.remove(r),a.push(r),(0,e.RedBlackNode)(r)}function d(e){var r=e.circle,a=r.x,s=r.cy,l=[a,s],d=e.P,h=e.N,u=[e];n(e);for(var o=d;o.circle&&Math.abs(a-o.circle.x)<c.epsilon&&Math.abs(s-o.circle.cy)<c.epsilon;)d=o.P,u.unshift(o),n(o),o=d;u.unshift(o),(0,i.detachCircle)(o);for(var f=h;f.circle&&Math.abs(a-f.circle.x)<c.epsilon&&Math.abs(s-f.circle.cy)<c.epsilon;)h=f.N,u.push(f),n(f),f=h;u.push(f),(0,i.detachCircle)(f);var g,v=u.length;for(g=1;g<v;++g)f=u[g],o=u[g-1],(0,t.setEdgeEnd)(f.edge,o.site,f.site,l);o=u[0],(f=u[v-1]).edge=(0,t.createEdge)(o.site,f.site,null,l),(0,i.attachCircle)(o),(0,i.attachCircle)(f)}function h(e){for(var a,s,n,d,h=e[0],f=e[1],g=c.beaches._;g;)if((n=u(g,f)-h)>c.epsilon)g=g.L;else{if(!((d=h-o(g,f))>c.epsilon)){n>-c.epsilon?(a=g.P,s=g):d>-c.epsilon?(a=g,s=g.N):a=s=g;break}if(!g.R){a=g;break}g=g.R}(0,r.createCell)(e);var v=l(e);if(c.beaches.insert(a,v),a||s){if(a===s)return(0,i.detachCircle)(a),s=l(a.site),c.beaches.insert(v,s),v.edge=s.edge=(0,t.createEdge)(a.site,v.site),(0,i.attachCircle)(a),void(0,i.attachCircle)(s);if(s){(0,i.detachCircle)(a),(0,i.detachCircle)(s);var p=a.site,C=p[0],b=p[1],E=e[0]-C,q=e[1]-b,x=s.site,M=x[0]-C,N=x[1]-b,k=2*(E*N-q*M),B=E*E+q*q,P=M*M+N*N,R=[(N*B-q*P)/k+C,(E*P-M*B)/k+b];(0,t.setEdgeEnd)(s.edge,p,x,R),v.edge=(0,t.createEdge)(p,e,null,R),s.edge=(0,t.createEdge)(e,x,null,R),(0,i.attachCircle)(a),(0,i.attachCircle)(s)}else v.edge=(0,t.createEdge)(a.site,v.site)}}function u(e,r){var i=e.site,t=i[0],c=i[1],a=c-r;if(!a)return t;var s=e.P;if(!s)return-1/0;var l=(i=s.site)[0],n=i[1],d=n-r;if(!d)return l;var h=l-t,u=1/a-1/d,o=h/d;return u?(-o+Math.sqrt(o*o-2*u*(h*h/(-2*d)-n+d/2+c-a/2)))/u+t:(t+l)/2}function o(e,r){var i=e.N;if(i)return u(i,r);var t=e.site;return t[1]===r?t[0]:1/0}
},{"./RedBlackTree":"ageH","./Cell":"v5QX","./Circle":"wsGb","./Edge":"pD4W","./Diagram":"kqrB"}],"kqrB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h,exports.edges=exports.circles=exports.cells=exports.beaches=exports.epsilon2=exports.epsilon=void 0;var e=require("./Beach"),r=require("./Cell"),t=require("./Circle"),s=require("./Edge"),l=i(require("./RedBlackTree"));function i(e){return e&&e.__esModule?e:{default:e}}var n=1e-6;exports.epsilon=n;var o,a,c,u,f=1e-12;function d(e,r,t){return(e[0]-t[0])*(r[1]-e[1])-(e[0]-r[0])*(t[1]-e[1])}function p(e,r){return r[1]-e[1]||r[0]-e[0]}function h(i,n){var f,d,h,g=i.sort(p).pop();for(exports.edges=u=[],exports.cells=a=new Array(i.length),exports.beaches=o=new l.default,exports.circles=c=new l.default;;)if(h=t.firstCircle,g&&(!h||g[1]<h.y||g[1]===h.y&&g[0]<h.x))g[0]===f&&g[1]===d||((0,e.addBeach)(g),f=g[0],d=g[1]),g=i.pop();else{if(!h)break;(0,e.removeBeach)(h.arc)}if((0,r.sortCellHalfedges)(),n){var x=+n[0][0],v=+n[0][1],b=+n[1][0],y=+n[1][1];(0,s.clipEdges)(x,v,b,y),(0,r.clipCells)(x,v,b,y)}this.edges=u,this.cells=a,exports.beaches=o=exports.circles=c=exports.edges=u=exports.cells=a=null}exports.epsilon2=f,exports.beaches=o,exports.cells=a,exports.circles=c,exports.edges=u,h.prototype={constructor:h,polygons:function(){var e=this.edges;return this.cells.map(function(t){var s=t.halfedges.map(function(s){return(0,r.cellHalfedgeStart)(t,e[s])});return s.data=t.site.data,s})},triangles:function(){var e=[],r=this.edges;return this.cells.forEach(function(t,s){if(i=(l=t.halfedges).length)for(var l,i,n,o=t.site,a=-1,c=r[l[i-1]],u=c.left===o?c.right:c.left;++a<i;)n=u,u=(c=r[l[a]]).left===o?c.right:c.left,n&&u&&s<n.index&&s<u.index&&d(o,n,u)<0&&e.push([o.data,n.data,u.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,r,t){for(var s,l,i=this,n=i._found||0,o=i.cells.length;!(l=i.cells[n]);)if(++n>=o)return null;var a=e-l.site[0],c=r-l.site[1],u=a*a+c*c;do{l=i.cells[s=n],n=null,l.halfedges.forEach(function(t){var s=i.edges[t],o=s.left;if(o!==l.site&&o||(o=s.right)){var a=e-o[0],c=r-o[1],f=a*a+c*c;f<u&&(u=f,n=o.index)}})}while(null!==n);return i._found=s,null==t||u<=t*t?l.site:null}};
},{"./Beach":"oH3D","./Cell":"v5QX","./Circle":"wsGb","./Edge":"pD4W","./RedBlackTree":"ageH"}],"gmfk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=o(require("./constant")),n=require("./point"),t=u(require("./Diagram"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r();if(n&&n.has(e))return n.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}function o(e){return e&&e.__esModule?e:{default:e}}function i(){var r=n.x,u=n.y,o=null;function i(e){return new t.default(e.map(function(n,o){var i=[Math.round(r(n,o,e)/t.epsilon)*t.epsilon,Math.round(u(n,o,e)/t.epsilon)*t.epsilon];return i.index=o,i.data=n,i}),o)}return i.polygons=function(e){return i(e).polygons()},i.links=function(e){return i(e).links()},i.triangles=function(e){return i(e).triangles()},i.x=function(n){return arguments.length?(r="function"==typeof n?n:(0,e.default)(+n),i):r},i.y=function(n){return arguments.length?(u="function"==typeof n?n:(0,e.default)(+n),i):u},i.extent=function(e){return arguments.length?(o=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],i):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},i.size=function(e){return arguments.length?(o=null==e?null:[[0,0],[+e[0],+e[1]]],i):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},i}
},{"./constant":"u0FZ","./point":"ds32","./Diagram":"kqrB"}],"Vsfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"voronoi",{enumerable:!0,get:function(){return e.default}});var e=r(require("./voronoi"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./voronoi":"gmfk"}],"JNHq":[function(require,module,exports) {
"use strict";function t(t,e,s){this.target=t,this.type=e,this.transform=s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"IEEo":[function(require,module,exports) {
"use strict";function t(t,i,n){this.k=t,this.x=i,this.y=n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=t,exports.default=n,exports.identity=void 0,t.prototype={constructor:t,scale:function(i){return 1===i?this:new t(this.k*i,this.x,this.y)},translate:function(i,n){return 0===i&0===n?this:new t(this.k,this.x+this.k*i,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i=new t(1,0,0);function n(t){for(;!t.__zoom;)if(!(t=t.parentNode))return i;return t.__zoom}exports.identity=i,n.prototype=t.prototype;
},{}],"LONi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_;var t=require("d3-dispatch"),e=require("d3-drag"),n=require("d3-interpolate"),o=require("d3-selection"),i=require("d3-transition"),u=l(require("./constant.js")),r=l(require("./event.js")),s=require("./transform.js"),a=c(require("./noevent.js"));function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function l(t){return t&&t.__esModule?t:{default:t}}function f(){return!o.event.ctrlKey&&!o.event.button}function p(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function m(){return this.__zoom||s.identity}function v(){return-o.event.deltaY*(1===o.event.deltaMode?.05:o.event.deltaMode?1:.002)}function d(){return navigator.maxTouchPoints||"ontouchstart"in this}function y(t,e,n){var o=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],u=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>u?(u+r)/2:Math.min(0,u)||Math.max(0,r))}function _(){var h,c,l=f,_=p,z=y,g=v,w=d,x=[0,1/0],b=[[-1/0,-1/0],[1/0,1/0]],M=250,k=n.interpolateZoom,T=(0,t.dispatch)("start","zoom","end"),j=500,q=150,O=0;function P(t){t.property("__zoom",m).on("wheel.zoom",W).on("mousedown.zoom",G).on("dblclick.zoom",K).filter(w).on("touchstart.zoom",S).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(t,e){return(e=Math.max(x[0],Math.min(x[1],e)))===t.k?t:new s.Transform(e,t.x,t.y)}function D(t,e,n){var o=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return o===t.x&&i===t.y?t:new s.Transform(t.k,o,i)}function V(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function Y(t,e,n){t.on("start.zoom",function(){B(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).end()}).tween("zoom",function(){var t=arguments,o=B(this,t),i=_.apply(this,t),u=null==n?V(i):"function"==typeof n?n.apply(this,t):n,r=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),a=this.__zoom,h="function"==typeof e?e.apply(this,t):e,c=k(a.invert(u).concat(r/a.k),h.invert(u).concat(r/h.k));return function(t){if(1===t)t=h;else{var e=c(t),n=r/e[2];t=new s.Transform(n,u[0]-e[0]*n,u[1]-e[1]*n)}o.zoom(null,t)}})}function B(t,e,n){return!n&&t.__zooming||new X(t,e)}function X(t,e){this.that=t,this.args=e,this.active=0,this.extent=_.apply(t,e),this.taps=0}function W(){if(l.apply(this,arguments)){var t=B(this,arguments),e=this.__zoom,n=Math.max(x[0],Math.min(x[1],e.k*Math.pow(2,g.apply(this,arguments)))),u=(0,o.mouse)(this);if(t.wheel)t.mouse[0][0]===u[0]&&t.mouse[0][1]===u[1]||(t.mouse[1]=e.invert(t.mouse[0]=u)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[u,e.invert(u)],(0,i.interrupt)(this),t.start()}(0,a.default)(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},q),t.zoom("mouse",z(D(E(e,n),t.mouse[0],t.mouse[1]),t.extent,b))}}function G(){if(!c&&l.apply(this,arguments)){var t=B(this,arguments,!0),n=(0,o.select)(o.event.view).on("mousemove.zoom",function(){if((0,a.default)(),!t.moved){var e=o.event.clientX-r,n=o.event.clientY-s;t.moved=e*e+n*n>O}t.zoom("mouse",z(D(t.that.__zoom,t.mouse[0]=(0,o.mouse)(t.that),t.mouse[1]),t.extent,b))},!0).on("mouseup.zoom",function(){n.on("mousemove.zoom mouseup.zoom",null),(0,e.dragEnable)(o.event.view,t.moved),(0,a.default)(),t.end()},!0),u=(0,o.mouse)(this),r=o.event.clientX,s=o.event.clientY;(0,e.dragDisable)(o.event.view),(0,a.nopropagation)(),t.mouse=[u,this.__zoom.invert(u)],(0,i.interrupt)(this),t.start()}}function K(){if(l.apply(this,arguments)){var t=this.__zoom,e=(0,o.mouse)(this),n=t.invert(e),i=t.k*(o.event.shiftKey?.5:2),u=z(D(E(t,i),e,n),_.apply(this,arguments),b);(0,a.default)(),M>0?(0,o.select)(this).transition().duration(M).call(Y,u,e):(0,o.select)(this).call(P.transform,u)}}function S(){if(l.apply(this,arguments)){var t,e,n,u,r=o.event.touches,s=r.length,c=B(this,arguments,o.event.changedTouches.length===s);for((0,a.nopropagation)(),e=0;e<s;++e)n=r[e],u=[u=(0,o.touch)(this,r,n.identifier),this.__zoom.invert(u),n.identifier],c.touch0?c.touch1||c.touch0[2]===u[2]||(c.touch1=u,c.taps=0):(c.touch0=u,t=!0,c.taps=1+!!h);h&&(h=clearTimeout(h)),t&&(c.taps<2&&(h=setTimeout(function(){h=null},j)),(0,i.interrupt)(this),c.start())}}function A(){if(this.__zooming){var t,e,n,i,u=B(this,arguments),r=o.event.changedTouches,s=r.length;for((0,a.default)(),h&&(h=clearTimeout(h)),u.taps=0,t=0;t<s;++t)e=r[t],n=(0,o.touch)(this,r,e.identifier),u.touch0&&u.touch0[2]===e.identifier?u.touch0[0]=n:u.touch1&&u.touch1[2]===e.identifier&&(u.touch1[0]=n);if(e=u.that.__zoom,u.touch1){var c=u.touch0[0],l=u.touch0[1],f=u.touch1[0],p=u.touch1[1],m=(m=f[0]-c[0])*m+(m=f[1]-c[1])*m,v=(v=p[0]-l[0])*v+(v=p[1]-l[1])*v;e=E(e,Math.sqrt(m/v)),n=[(c[0]+f[0])/2,(c[1]+f[1])/2],i=[(l[0]+p[0])/2,(l[1]+p[1])/2]}else{if(!u.touch0)return;n=u.touch0[0],i=u.touch0[1]}u.zoom("touch",z(D(e,n,i),u.extent,b))}}function H(){if(this.__zooming){var t,e,n=B(this,arguments),i=o.event.changedTouches,u=i.length;for((0,a.nopropagation)(),c&&clearTimeout(c),c=setTimeout(function(){c=null},j),t=0;t<u;++t)e=i[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),2===n.taps){var r=(0,o.select)(this).on("dblclick.zoom");r&&r.apply(this,arguments)}}}return P.transform=function(t,e,n){var o=t.selection?t.selection():t;o.property("__zoom",m),t!==o?Y(t,e,n):o.interrupt().each(function(){B(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},P.scaleBy=function(t,e,n){P.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n)},P.scaleTo=function(t,e,n){P.transform(t,function(){var t=_.apply(this,arguments),o=this.__zoom,i=null==n?V(t):"function"==typeof n?n.apply(this,arguments):n,u=o.invert(i),r="function"==typeof e?e.apply(this,arguments):e;return z(D(E(o,r),i,u),t,b)},n)},P.translateBy=function(t,e,n){P.transform(t,function(){return z(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),_.apply(this,arguments),b)})},P.translateTo=function(t,e,n,o){P.transform(t,function(){var t=_.apply(this,arguments),i=this.__zoom,u=null==o?V(t):"function"==typeof o?o.apply(this,arguments):o;return z(s.identity.translate(u[0],u[1]).scale(i.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,b)},o)},X.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){(0,o.customEvent)(new r.default(P,t,this.that.__zoom),T.apply,T,[t,this.that,this.args])}},P.wheelDelta=function(t){return arguments.length?(g="function"==typeof t?t:(0,u.default)(+t),P):g},P.filter=function(t){return arguments.length?(l="function"==typeof t?t:(0,u.default)(!!t),P):l},P.touchable=function(t){return arguments.length?(w="function"==typeof t?t:(0,u.default)(!!t),P):w},P.extent=function(t){return arguments.length?(_="function"==typeof t?t:(0,u.default)([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),P):_},P.scaleExtent=function(t){return arguments.length?(x[0]=+t[0],x[1]=+t[1],P):[x[0],x[1]]},P.translateExtent=function(t){return arguments.length?(b[0][0]=+t[0][0],b[1][0]=+t[1][0],b[0][1]=+t[0][1],b[1][1]=+t[1][1],P):[[b[0][0],b[0][1]],[b[1][0],b[1][1]]]},P.constrain=function(t){return arguments.length?(z=t,P):z},P.duration=function(t){return arguments.length?(M=+t,P):M},P.interpolate=function(t){return arguments.length?(k=t,P):k},P.on=function(){var t=T.on.apply(T,arguments);return t===T?P:t},P.clickDistance=function(t){return arguments.length?(O=(t=+t)*t,P):Math.sqrt(O)},P}
},{"d3-dispatch":"cNf8","d3-drag":"aj7N","d3-interpolate":"y8gx","d3-selection":"Gs4P","d3-transition":"ErME","./constant.js":"u0FZ","./event.js":"JNHq","./transform.js":"IEEo","./noevent.js":"CQsD"}],"lNis":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"zoom",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"zoomTransform",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"zoomIdentity",{enumerable:!0,get:function(){return t.identity}});var e=o(require("./zoom.js")),t=n(require("./transform.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}
},{"./zoom.js":"LONi","./transform.js":"IEEo"}],"zztR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0};Object.defineProperty(exports,"version",{enumerable:!0,get:function(){return r.version}});var r=require("./dist/package.js"),t=require("d3-array");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("d3-axis");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=require("d3-brush");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var c=require("d3-chord");Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return c[r]}}))});var u=require("d3-collection");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});var a=require("d3-color");Object.keys(a).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return a[r]}}))});var l=require("d3-contour");Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return l[r]}}))});var p=require("d3-dispatch");Object.keys(p).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return p[r]}}))});var f=require("d3-drag");Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return f[r]}}))});var i=require("d3-dsv");Object.keys(i).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return i[r]}}))});var s=require("d3-ease");Object.keys(s).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return s[r]}}))});var d=require("d3-fetch");Object.keys(d).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return d[r]}}))});var y=require("d3-force");Object.keys(y).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return y[r]}}))});var b=require("d3-format");Object.keys(b).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return b[r]}}))});var O=require("d3-geo");Object.keys(O).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return O[r]}}))});var j=require("d3-hierarchy");Object.keys(j).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return j[r]}}))});var h=require("d3-interpolate");Object.keys(h).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return h[r]}}))});var P=require("d3-path");Object.keys(P).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return P[r]}}))});var _=require("d3-polygon");Object.keys(_).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _[r]}}))});var m=require("d3-quadtree");Object.keys(m).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return m[r]}}))});var v=require("d3-random");Object.keys(v).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return v[r]}}))});var g=require("d3-scale");Object.keys(g).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return g[r]}}))});var x=require("d3-scale-chromatic");Object.keys(x).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return x[r]}}))});var q=require("d3-selection");Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return q[r]}}))});var k=require("d3-shape");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var M=require("d3-time");Object.keys(M).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return M[r]}}))});var w=require("d3-time-format");Object.keys(w).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return w[r]}}))});var E=require("d3-timer");Object.keys(E).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return E[r]}}))});var z=require("d3-transition");Object.keys(z).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return z[r]}}))});var A=require("d3-voronoi");Object.keys(A).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return A[r]}}))});var B=require("d3-zoom");Object.keys(B).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return B[r]}}))});
},{"./dist/package.js":"kXfm","d3-array":"Rpnd","d3-axis":"n5JH","d3-brush":"mij0","d3-chord":"uMG0","d3-collection":"CyPa","d3-color":"x3do","d3-contour":"vVeN","d3-dispatch":"cNf8","d3-drag":"aj7N","d3-dsv":"OUxC","d3-ease":"NhEX","d3-fetch":"m14J","d3-force":"mlFe","d3-format":"SA6z","d3-geo":"YztC","d3-hierarchy":"vZwX","d3-interpolate":"y8gx","d3-path":"zaWp","d3-polygon":"pdGd","d3-quadtree":"Fgm3","d3-random":"JqXF","d3-scale":"UBb5","d3-scale-chromatic":"fjII","d3-selection":"Gs4P","d3-shape":"TYWk","d3-time":"QBVT","d3-time-format":"fort","d3-timer":"yaK5","d3-transition":"ErME","d3-voronoi":"Vsfo","d3-zoom":"lNis"}],"hKJs":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var define;
var n,t=arguments[3],r=require("buffer").Buffer;(function(){var r,e=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",a=500,c="__lodash_placeholder__",l=1,s=2,h=4,p=1,v=2,_=1,g=2,y=4,d=8,b=16,w=32,m=64,x=128,j=256,A=512,k=30,O="...",I=800,R=16,E=1,z=2,S=1/0,L=9007199254740991,W=1.7976931348623157e308,C=NaN,B=4294967295,U=B-1,T=B>>>1,D=[["ary",x],["bind",_],["bindKey",g],["curry",d],["curryRight",b],["flip",A],["partial",w],["partialRight",m],["rearg",j]],$="[object Arguments]",M="[object Array]",F="[object AsyncFunction]",N="[object Boolean]",P="[object Date]",q="[object DOMException]",Z="[object Error]",K="[object Function]",V="[object GeneratorFunction]",G="[object Map]",H="[object Number]",J="[object Null]",Y="[object Object]",Q="[object Proxy]",X="[object RegExp]",nn="[object Set]",tn="[object String]",rn="[object Symbol]",en="[object Undefined]",un="[object WeakMap]",on="[object WeakSet]",fn="[object ArrayBuffer]",an="[object DataView]",cn="[object Float32Array]",ln="[object Float64Array]",sn="[object Int8Array]",hn="[object Int16Array]",pn="[object Int32Array]",vn="[object Uint8Array]",_n="[object Uint8ClampedArray]",gn="[object Uint16Array]",yn="[object Uint32Array]",dn=/\b__p \+= '';/g,bn=/\b(__p \+=) '' \+/g,wn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mn=/&(?:amp|lt|gt|quot|#39);/g,xn=/[&<>"']/g,jn=RegExp(mn.source),An=RegExp(xn.source),kn=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,In=/<%=([\s\S]+?)%>/g,Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sn=/[\\^$.*+?()[\]{}|]/g,Ln=RegExp(Sn.source),Wn=/^\s+/,Cn=/\s/,Bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Un=/\{\n\/\* \[wrapped with (.+)\] \*/,Tn=/,? & /,Dn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$n=/[()=,{}\[\]\/\s]/,Mn=/\\(\\)?/g,Fn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nn=/\w*$/,Pn=/^[-+]0x[0-9a-f]+$/i,qn=/^0b[01]+$/i,Zn=/^\[object .+?Constructor\]$/,Kn=/^0o[0-7]+$/i,Vn=/^(?:0|[1-9]\d*)$/,Gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,Jn=/['\n\r\u2028\u2029\\]/g,Yn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xn="[\\ud800-\\udfff]",nt="["+Qn+"]",tt="["+Yn+"]",rt="\\d+",et="[\\u2700-\\u27bf]",ut="[a-z\\xdf-\\xf6\\xf8-\\xff]",it="[^\\ud800-\\udfff"+Qn+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ot="\\ud83c[\\udffb-\\udfff]",ft="[^\\ud800-\\udfff]",at="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",st="(?:"+ut+"|"+it+")",ht="(?:"+lt+"|"+it+")",pt="(?:"+tt+"|"+ot+")"+"?",vt="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[ft,at,ct].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),_t="(?:"+[et,at,ct].join("|")+")"+vt,gt="(?:"+[ft+tt+"?",tt,at,ct,Xn].join("|")+")",yt=RegExp("[']","g"),dt=RegExp(tt,"g"),bt=RegExp(ot+"(?="+ot+")|"+gt+vt,"g"),wt=RegExp([lt+"?"+ut+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[nt,lt,"$"].join("|")+")",ht+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[nt,lt+st,"$"].join("|")+")",lt+"?"+st+"+(?:['](?:d|ll|m|re|s|t|ve))?",lt+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,_t].join("|"),"g"),mt=RegExp("[\\u200d\\ud800-\\udfff"+Yn+"\\ufe0e\\ufe0f]"),xt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],At=-1,kt={};kt[cn]=kt[ln]=kt[sn]=kt[hn]=kt[pn]=kt[vn]=kt[_n]=kt[gn]=kt[yn]=!0,kt[$]=kt[M]=kt[fn]=kt[N]=kt[an]=kt[P]=kt[Z]=kt[K]=kt[G]=kt[H]=kt[Y]=kt[X]=kt[nn]=kt[tn]=kt[un]=!1;var Ot={};Ot[$]=Ot[M]=Ot[fn]=Ot[an]=Ot[N]=Ot[P]=Ot[cn]=Ot[ln]=Ot[sn]=Ot[hn]=Ot[pn]=Ot[G]=Ot[H]=Ot[Y]=Ot[X]=Ot[nn]=Ot[tn]=Ot[rn]=Ot[vn]=Ot[_n]=Ot[gn]=Ot[yn]=!0,Ot[Z]=Ot[K]=Ot[un]=!1;var It={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rt=parseFloat,Et=parseInt,zt="object"==typeof t&&t&&t.Object===Object&&t,St="object"==typeof self&&self&&self.Object===Object&&self,Lt=zt||St||Function("return this")(),Wt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ct=Wt&&"object"==typeof module&&module&&!module.nodeType&&module,Bt=Ct&&Ct.exports===Wt,Ut=Bt&&zt.process,Tt=function(){try{var n=Ct&&Ct.require&&Ct.require("util").types;return n||Ut&&Ut.binding&&Ut.binding("util")}catch(t){}}(),Dt=Tt&&Tt.isArrayBuffer,$t=Tt&&Tt.isDate,Mt=Tt&&Tt.isMap,Ft=Tt&&Tt.isRegExp,Nt=Tt&&Tt.isSet,Pt=Tt&&Tt.isTypedArray;function qt(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function Zt(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function Kt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function Vt(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function Gt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Ht(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function Jt(n,t){return!!(null==n?0:n.length)&&or(n,t,0)>-1}function Yt(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function Qt(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function Xt(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function nr(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function tr(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function rr(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}var er=lr("length");function ur(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function ir(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function or(n,t,r){return t==t?function(n,t,r){var e=r-1,u=n.length;for(;++e<u;)if(n[e]===t)return e;return-1}(n,t,r):ir(n,ar,r)}function fr(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function ar(n){return n!=n}function cr(n,t){var r=null==n?0:n.length;return r?pr(n,t)/r:C}function lr(n){return function(t){return null==t?r:t[n]}}function sr(n){return function(t){return null==n?r:n[t]}}function hr(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function pr(n,t){for(var e,u=-1,i=n.length;++u<i;){var o=t(n[u]);o!==r&&(e=e===r?o:e+o)}return e}function vr(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function _r(n){return n?n.slice(0,Lr(n)+1).replace(Wn,""):n}function gr(n){return function(t){return n(t)}}function yr(n,t){return Qt(t,function(t){return n[t]})}function dr(n,t){return n.has(t)}function br(n,t){for(var r=-1,e=n.length;++r<e&&or(t,n[r],0)>-1;);return r}function wr(n,t){for(var r=n.length;r--&&or(t,n[r],0)>-1;);return r}var mr=sr({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),xr=sr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function jr(n){return"\\"+It[n]}function Ar(n){return mt.test(n)}function kr(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function Or(n,t){return function(r){return n(t(r))}}function Ir(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==c||(n[r]=c,i[u++]=r)}return i}function Rr(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function Er(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function zr(n){return Ar(n)?function(n){var t=bt.lastIndex=0;for(;bt.test(n);)++t;return t}(n):er(n)}function Sr(n){return Ar(n)?function(n){return n.match(bt)||[]}(n):function(n){return n.split("")}(n)}function Lr(n){for(var t=n.length;t--&&Cn.test(n.charAt(t)););return t}var Wr=sr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Cr=function n(t){var Cn,Yn=(t=null==t?Lt:Cr.defaults(Lt.Object(),t,Cr.pick(Lt,jt))).Array,Qn=t.Date,Xn=t.Error,nt=t.Function,tt=t.Math,rt=t.Object,et=t.RegExp,ut=t.String,it=t.TypeError,ot=Yn.prototype,ft=nt.prototype,at=rt.prototype,ct=t["__core-js_shared__"],lt=ft.toString,st=at.hasOwnProperty,ht=0,pt=(Cn=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+Cn:"",vt=at.toString,_t=lt.call(rt),gt=Lt._,bt=et("^"+lt.call(st).replace(Sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=Bt?t.Buffer:r,It=t.Symbol,zt=t.Uint8Array,St=mt?mt.allocUnsafe:r,Wt=Or(rt.getPrototypeOf,rt),Ct=rt.create,Ut=at.propertyIsEnumerable,Tt=ot.splice,er=It?It.isConcatSpreadable:r,sr=It?It.iterator:r,Br=It?It.toStringTag:r,Ur=function(){try{var n=Mi(rt,"defineProperty");return n({},"",{}),n}catch(t){}}(),Tr=t.clearTimeout!==Lt.clearTimeout&&t.clearTimeout,Dr=Qn&&Qn.now!==Lt.Date.now&&Qn.now,$r=t.setTimeout!==Lt.setTimeout&&t.setTimeout,Mr=tt.ceil,Fr=tt.floor,Nr=rt.getOwnPropertySymbols,Pr=mt?mt.isBuffer:r,qr=t.isFinite,Zr=ot.join,Kr=Or(rt.keys,rt),Vr=tt.max,Gr=tt.min,Hr=Qn.now,Jr=t.parseInt,Yr=tt.random,Qr=ot.reverse,Xr=Mi(t,"DataView"),ne=Mi(t,"Map"),te=Mi(t,"Promise"),re=Mi(t,"Set"),ee=Mi(t,"WeakMap"),ue=Mi(rt,"create"),ie=ee&&new ee,oe={},fe=ho(Xr),ae=ho(ne),ce=ho(te),le=ho(re),se=ho(ee),he=It?It.prototype:r,pe=he?he.valueOf:r,ve=he?he.toString:r;function _e(n){if(Sf(n)&&!wf(n)&&!(n instanceof be)){if(n instanceof de)return n;if(st.call(n,"__wrapped__"))return po(n)}return new de(n)}var ge=function(){function n(){}return function(t){if(!zf(t))return{};if(Ct)return Ct(t);n.prototype=t;var e=new n;return n.prototype=r,e}}();function ye(){}function de(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function be(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function we(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function me(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function xe(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function je(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new xe;++t<r;)this.add(n[t])}function Ae(n){var t=this.__data__=new me(n);this.size=t.size}function ke(n,t){var r=wf(n),e=!r&&bf(n),u=!r&&!e&&Af(n),i=!r&&!e&&!u&&$f(n),o=r||e||u||i,f=o?vr(n.length,ut):[],a=f.length;for(var c in n)!t&&!st.call(n,c)||o&&("length"==c||u&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vi(c,a))||f.push(c);return f}function Oe(n){var t=n.length;return t?n[ju(0,t-1)]:r}function Ie(n,t){return co(ui(n),Ue(t,0,n.length))}function Re(n){return co(ui(n))}function Ee(n,t,e){(e===r||gf(n[t],e))&&(e!==r||t in n)||Ce(n,t,e)}function ze(n,t,e){var u=n[t];st.call(n,t)&&gf(u,e)&&(e!==r||t in n)||Ce(n,t,e)}function Se(n,t){for(var r=n.length;r--;)if(gf(n[r][0],t))return r;return-1}function Le(n,t,r,e){return Fe(n,function(n,u,i){t(e,n,r(n),i)}),e}function We(n,t){return n&&ii(t,fa(t),n)}function Ce(n,t,r){"__proto__"==t&&Ur?Ur(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Be(n,t){for(var e=-1,u=t.length,i=Yn(u),o=null==n;++e<u;)i[e]=o?r:ra(n,t[e]);return i}function Ue(n,t,e){return n==n&&(e!==r&&(n=n<=e?n:e),t!==r&&(n=n>=t?n:t)),n}function Te(n,t,e,u,i,o){var f,a=t&l,c=t&s,p=t&h;if(e&&(f=i?e(n,u,i,o):e(n)),f!==r)return f;if(!zf(n))return n;var v=wf(n);if(v){if(f=function(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&st.call(n,"index")&&(r.index=n.index,r.input=n.input),r}(n),!a)return ui(n,f)}else{var _=Pi(n),g=_==K||_==V;if(Af(n))return Qu(n,a);if(_==Y||_==$||g&&!i){if(f=c||g?{}:Zi(n),!a)return c?function(n,t){return ii(n,Ni(n),t)}(n,function(n,t){return n&&ii(t,aa(t),n)}(f,n)):function(n,t){return ii(n,Fi(n),t)}(n,We(f,n))}else{if(!Ot[_])return i?n:{};f=function(n,t,r){var e,u,i,o=n.constructor;switch(t){case fn:return Xu(n);case N:case P:return new o(+n);case an:return function(n,t){var r=t?Xu(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}(n,r);case cn:case ln:case sn:case hn:case pn:case vn:case _n:case gn:case yn:return ni(n,r);case G:return new o;case H:case tn:return new o(n);case X:return(i=new(u=n).constructor(u.source,Nn.exec(u))).lastIndex=u.lastIndex,i;case nn:return new o;case rn:return e=n,pe?rt(pe.call(e)):{}}}(n,_,a)}}o||(o=new Ae);var y=o.get(n);if(y)return y;o.set(n,f),Uf(n)?n.forEach(function(r){f.add(Te(r,t,e,r,n,o))}):Lf(n)&&n.forEach(function(r,u){f.set(u,Te(r,t,e,u,n,o))});var d=v?r:(p?c?Wi:Li:c?aa:fa)(n);return Kt(d||n,function(r,u){d&&(r=n[u=r]),ze(f,u,Te(r,t,e,u,n,o))}),f}function De(n,t,e){var u=e.length;if(null==n)return!u;for(n=rt(n);u--;){var i=e[u],o=t[i],f=n[i];if(f===r&&!(i in n)||!o(f))return!1}return!0}function $e(n,t,e){if("function"!=typeof n)throw new it(i);return io(function(){n.apply(r,e)},t)}function Me(n,t,r,u){var i=-1,o=Jt,f=!0,a=n.length,c=[],l=t.length;if(!a)return c;r&&(t=Qt(t,gr(r))),u?(o=Yt,f=!1):t.length>=e&&(o=dr,f=!1,t=new je(t));n:for(;++i<a;){var s=n[i],h=null==r?s:r(s);if(s=u||0!==s?s:0,f&&h==h){for(var p=l;p--;)if(t[p]===h)continue n;c.push(s)}else o(t,h,u)||c.push(s)}return c}_e.templateSettings={escape:kn,evaluate:On,interpolate:In,variable:"",imports:{_:_e}},_e.prototype=ye.prototype,_e.prototype.constructor=_e,de.prototype=ge(ye.prototype),de.prototype.constructor=de,be.prototype=ge(ye.prototype),be.prototype.constructor=be,we.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},we.prototype.delete=function(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},we.prototype.get=function(n){var t=this.__data__;if(ue){var e=t[n];return e===f?r:e}return st.call(t,n)?t[n]:r},we.prototype.has=function(n){var t=this.__data__;return ue?t[n]!==r:st.call(t,n)},we.prototype.set=function(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=ue&&t===r?f:t,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(n){var t=this.__data__,r=Se(t,n);return!(r<0||(r==t.length-1?t.pop():Tt.call(t,r,1),--this.size,0))},me.prototype.get=function(n){var t=this.__data__,e=Se(t,n);return e<0?r:t[e][1]},me.prototype.has=function(n){return Se(this.__data__,n)>-1},me.prototype.set=function(n,t){var r=this.__data__,e=Se(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},xe.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(ne||me),string:new we}},xe.prototype.delete=function(n){var t=Di(this,n).delete(n);return this.size-=t?1:0,t},xe.prototype.get=function(n){return Di(this,n).get(n)},xe.prototype.has=function(n){return Di(this,n).has(n)},xe.prototype.set=function(n,t){var r=Di(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},je.prototype.add=je.prototype.push=function(n){return this.__data__.set(n,f),this},je.prototype.has=function(n){return this.__data__.has(n)},Ae.prototype.clear=function(){this.__data__=new me,this.size=0},Ae.prototype.delete=function(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r},Ae.prototype.get=function(n){return this.__data__.get(n)},Ae.prototype.has=function(n){return this.__data__.has(n)},Ae.prototype.set=function(n,t){var r=this.__data__;if(r instanceof me){var u=r.__data__;if(!ne||u.length<e-1)return u.push([n,t]),this.size=++r.size,this;r=this.__data__=new xe(u)}return r.set(n,t),this.size=r.size,this};var Fe=ai(He),Ne=ai(Je,!0);function Pe(n,t){var r=!0;return Fe(n,function(n,e,u){return r=!!t(n,e,u)}),r}function qe(n,t,e){for(var u=-1,i=n.length;++u<i;){var o=n[u],f=t(o);if(null!=f&&(a===r?f==f&&!Df(f):e(f,a)))var a=f,c=o}return c}function Ze(n,t){var r=[];return Fe(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Ke(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Ki),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?Ke(f,t-1,r,e,u):Xt(u,f):e||(u[u.length]=f)}return u}var Ve=ci(),Ge=ci(!0);function He(n,t){return n&&Ve(n,t,fa)}function Je(n,t){return n&&Ge(n,t,fa)}function Ye(n,t){return Ht(t,function(t){return If(n[t])})}function Qe(n,t){for(var e=0,u=(t=Gu(t,n)).length;null!=n&&e<u;)n=n[so(t[e++])];return e&&e==u?n:r}function Xe(n,t,r){var e=t(n);return wf(n)?e:Xt(e,r(n))}function nu(n){return null==n?n===r?en:J:Br&&Br in rt(n)?function(n){var t=st.call(n,Br),e=n[Br];try{n[Br]=r;var u=!0}catch(o){}var i=vt.call(n);return u&&(t?n[Br]=e:delete n[Br]),i}(n):function(n){return vt.call(n)}(n)}function tu(n,t){return n>t}function ru(n,t){return null!=n&&st.call(n,t)}function eu(n,t){return null!=n&&t in rt(n)}function uu(n,t,e){for(var u=e?Yt:Jt,i=n[0].length,o=n.length,f=o,a=Yn(o),c=1/0,l=[];f--;){var s=n[f];f&&t&&(s=Qt(s,gr(t))),c=Gr(s.length,c),a[f]=!e&&(t||i>=120&&s.length>=120)?new je(f&&s):r}s=n[0];var h=-1,p=a[0];n:for(;++h<i&&l.length<c;){var v=s[h],_=t?t(v):v;if(v=e||0!==v?v:0,!(p?dr(p,_):u(l,_,e))){for(f=o;--f;){var g=a[f];if(!(g?dr(g,_):u(n[f],_,e)))continue n}p&&p.push(_),l.push(v)}}return l}function iu(n,t,e){var u=null==(n=ro(n,t=Gu(t,n)))?n:n[so(ko(t))];return null==u?r:qt(u,n,e)}function ou(n){return Sf(n)&&nu(n)==$}function fu(n,t,e,u,i){return n===t||(null==n||null==t||!Sf(n)&&!Sf(t)?n!=n&&t!=t:function(n,t,e,u,i,o){var f=wf(n),a=wf(t),c=f?M:Pi(n),l=a?M:Pi(t),s=(c=c==$?Y:c)==Y,h=(l=l==$?Y:l)==Y,_=c==l;if(_&&Af(n)){if(!Af(t))return!1;f=!0,s=!1}if(_&&!s)return o||(o=new Ae),f||$f(n)?zi(n,t,e,u,i,o):function(n,t,r,e,u,i,o){switch(r){case an:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case fn:return!(n.byteLength!=t.byteLength||!i(new zt(n),new zt(t)));case N:case P:case H:return gf(+n,+t);case Z:return n.name==t.name&&n.message==t.message;case X:case tn:return n==t+"";case G:var f=kr;case nn:var a=e&p;if(f||(f=Rr),n.size!=t.size&&!a)return!1;var c=o.get(n);if(c)return c==t;e|=v,o.set(n,t);var l=zi(f(n),f(t),e,u,i,o);return o.delete(n),l;case rn:if(pe)return pe.call(n)==pe.call(t)}return!1}(n,t,c,e,u,i,o);if(!(e&p)){var g=s&&st.call(n,"__wrapped__"),y=h&&st.call(t,"__wrapped__");if(g||y){var d=g?n.value():n,b=y?t.value():t;return o||(o=new Ae),i(d,b,e,u,o)}}return!!_&&(o||(o=new Ae),function(n,t,e,u,i,o){var f=e&p,a=Li(n),c=a.length,l=Li(t).length;if(c!=l&&!f)return!1;for(var s=c;s--;){var h=a[s];if(!(f?h in t:st.call(t,h)))return!1}var v=o.get(n),_=o.get(t);if(v&&_)return v==t&&_==n;var g=!0;o.set(n,t),o.set(t,n);for(var y=f;++s<c;){h=a[s];var d=n[h],b=t[h];if(u)var w=f?u(b,d,h,t,n,o):u(d,b,h,n,t,o);if(!(w===r?d===b||i(d,b,e,u,o):w)){g=!1;break}y||(y="constructor"==h)}if(g&&!y){var m=n.constructor,x=t.constructor;m!=x&&"constructor"in n&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof x&&x instanceof x)&&(g=!1)}return o.delete(n),o.delete(t),g}(n,t,e,u,i,o))}(n,t,e,u,fu,i))}function au(n,t,e,u){var i=e.length,o=i,f=!u;if(null==n)return!o;for(n=rt(n);i--;){var a=e[i];if(f&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){var c=(a=e[i])[0],l=n[c],s=a[1];if(f&&a[2]){if(l===r&&!(c in n))return!1}else{var h=new Ae;if(u)var _=u(l,s,c,n,t,h);if(!(_===r?fu(s,l,p|v,u,h):_))return!1}}return!0}function cu(n){return!(!zf(n)||(t=n,pt&&pt in t))&&(If(n)?bt:Zn).test(ho(n));var t}function lu(n){return"function"==typeof n?n:null==n?Wa:"object"==typeof n?wf(n)?gu(n[0],n[1]):_u(n):Na(n)}function su(n){if(!Qi(n))return Kr(n);var t=[];for(var r in rt(n))st.call(n,r)&&"constructor"!=r&&t.push(r);return t}function hu(n){if(!zf(n))return function(n){var t=[];if(null!=n)for(var r in rt(n))t.push(r);return t}(n);var t=Qi(n),r=[];for(var e in n)("constructor"!=e||!t&&st.call(n,e))&&r.push(e);return r}function pu(n,t){return n<t}function vu(n,t){var r=-1,e=xf(n)?Yn(n.length):[];return Fe(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function _u(n){var t=$i(n);return 1==t.length&&t[0][2]?no(t[0][0],t[0][1]):function(r){return r===n||au(r,n,t)}}function gu(n,t){return Hi(n)&&Xi(t)?no(so(n),t):function(e){var u=ra(e,n);return u===r&&u===t?ea(e,n):fu(t,u,p|v)}}function yu(n,t,e,u,i){n!==t&&Ve(t,function(o,f){if(i||(i=new Ae),zf(o))!function(n,t,e,u,i,o,f){var a=eo(n,e),c=eo(t,e),l=f.get(c);if(l)Ee(n,e,l);else{var s=o?o(a,c,e+"",n,t,f):r,h=s===r;if(h){var p=wf(c),v=!p&&Af(c),_=!p&&!v&&$f(c);s=c,p||v||_?wf(a)?s=a:jf(a)?s=ui(a):v?(h=!1,s=Qu(c,!0)):_?(h=!1,s=ni(c,!0)):s=[]:Cf(c)||bf(c)?(s=a,bf(a)?s=Vf(a):zf(a)&&!If(a)||(s=Zi(c))):h=!1}h&&(f.set(c,s),i(s,c,u,o,f),f.delete(c)),Ee(n,e,s)}}(n,t,f,e,yu,u,i);else{var a=u?u(eo(n,f),o,f+"",n,t,i):r;a===r&&(a=o),Ee(n,f,a)}},aa)}function du(n,t){var e=n.length;if(e)return Vi(t+=t<0?e:0,e)?n[t]:r}function bu(n,t,r){t=t.length?Qt(t,function(n){return wf(n)?function(t){return Qe(t,1===n.length?n[0]:n)}:n}):[Wa];var e=-1;return t=Qt(t,gr(Ti())),function(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}(vu(n,function(n,r,u){return{criteria:Qt(t,function(t){return t(n)}),index:++e,value:n}}),function(n,t){return function(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var a=ti(u[e],i[e]);if(a){if(e>=f)return a;var c=r[e];return a*("desc"==c?-1:1)}}return n.index-t.index}(n,t,r)})}function wu(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=Qe(n,o);r(f,o)&&Ru(i,Gu(o,n),f)}return i}function mu(n,t,r,e){var u=e?fr:or,i=-1,o=t.length,f=n;for(n===t&&(t=ui(t)),r&&(f=Qt(n,gr(r)));++i<o;)for(var a=0,c=t[i],l=r?r(c):c;(a=u(f,l,a,e))>-1;)f!==n&&Tt.call(f,a,1),Tt.call(n,a,1);return n}function xu(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Vi(u)?Tt.call(n,u,1):Mu(n,u)}}return n}function ju(n,t){return n+Fr(Yr()*(t-n+1))}function Au(n,t){var r="";if(!n||t<1||t>L)return r;do{t%2&&(r+=n),(t=Fr(t/2))&&(n+=n)}while(t);return r}function ku(n,t){return oo(to(n,t,Wa),n+"")}function Ou(n){return Oe(ga(n))}function Iu(n,t){var r=ga(n);return co(r,Ue(t,0,r.length))}function Ru(n,t,e,u){if(!zf(n))return n;for(var i=-1,o=(t=Gu(t,n)).length,f=o-1,a=n;null!=a&&++i<o;){var c=so(t[i]),l=e;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(i!=f){var s=a[c];(l=u?u(s,c,a):r)===r&&(l=zf(s)?s:Vi(t[i+1])?[]:{})}ze(a,c,l),a=a[c]}return n}var Eu=ie?function(n,t){return ie.set(n,t),n}:Wa,zu=Ur?function(n,t){return Ur(n,"toString",{configurable:!0,enumerable:!1,value:za(t),writable:!0})}:Wa;function Su(n){return co(ga(n))}function Lu(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Yn(u);++e<u;)i[e]=n[e+t];return i}function Wu(n,t){var r;return Fe(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function Cu(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t==t&&u<=T){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!Df(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return Bu(n,t,Wa,r)}function Bu(n,t,e,u){var i=0,o=null==n?0:n.length;if(0===o)return 0;for(var f=(t=e(t))!=t,a=null===t,c=Df(t),l=t===r;i<o;){var s=Fr((i+o)/2),h=e(n[s]),p=h!==r,v=null===h,_=h==h,g=Df(h);if(f)var y=u||_;else y=l?_&&(u||p):a?_&&p&&(u||!v):c?_&&p&&!v&&(u||!g):!v&&!g&&(u?h<=t:h<t);y?i=s+1:o=s}return Gr(o,U)}function Uu(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!gf(f,a)){var a=f;i[u++]=0===o?0:o}}return i}function Tu(n){return"number"==typeof n?n:Df(n)?C:+n}function Du(n){if("string"==typeof n)return n;if(wf(n))return Qt(n,Du)+"";if(Df(n))return ve?ve.call(n):"";var t=n+"";return"0"==t&&1/n==-S?"-0":t}function $u(n,t,r){var u=-1,i=Jt,o=n.length,f=!0,a=[],c=a;if(r)f=!1,i=Yt;else if(o>=e){var l=t?null:Ai(n);if(l)return Rr(l);f=!1,i=dr,c=new je}else c=t?[]:a;n:for(;++u<o;){var s=n[u],h=t?t(s):s;if(s=r||0!==s?s:0,f&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue n;t&&c.push(h),a.push(s)}else i(c,h,r)||(c!==a&&c.push(h),a.push(s))}return a}function Mu(n,t){return null==(n=ro(n,t=Gu(t,n)))||delete n[so(ko(t))]}function Fu(n,t,r,e){return Ru(n,t,r(Qe(n,t)),e)}function Nu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Lu(n,e?0:i,e?i+1:u):Lu(n,e?i+1:0,e?u:i)}function Pu(n,t){var r=n;return r instanceof be&&(r=r.value()),nr(t,function(n,t){return t.func.apply(t.thisArg,Xt([n],t.args))},r)}function qu(n,t,r){var e=n.length;if(e<2)return e?$u(n[0]):[];for(var u=-1,i=Yn(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Me(i[u]||o,n[f],t,r));return $u(Ke(i,1),t,r)}function Zu(n,t,e){for(var u=-1,i=n.length,o=t.length,f={};++u<i;){var a=u<o?t[u]:r;e(f,n[u],a)}return f}function Ku(n){return jf(n)?n:[]}function Vu(n){return"function"==typeof n?n:Wa}function Gu(n,t){return wf(n)?n:Hi(n,t)?[n]:lo(Gf(n))}var Hu=ku;function Ju(n,t,e){var u=n.length;return e=e===r?u:e,!t&&e>=u?n:Lu(n,t,e)}var Yu=Tr||function(n){return Lt.clearTimeout(n)};function Qu(n,t){if(t)return n.slice();var r=n.length,e=St?St(r):new n.constructor(r);return n.copy(e),e}function Xu(n){var t=new n.constructor(n.byteLength);return new zt(t).set(new zt(n)),t}function ni(n,t){var r=t?Xu(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function ti(n,t){if(n!==t){var e=n!==r,u=null===n,i=n==n,o=Df(n),f=t!==r,a=null===t,c=t==t,l=Df(t);if(!a&&!l&&!o&&n>t||o&&f&&c&&!a&&!l||u&&f&&c||!e&&c||!i)return 1;if(!u&&!o&&!l&&n<t||l&&e&&i&&!u&&!o||a&&e&&i||!f&&i||!c)return-1}return 0}function ri(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,a=t.length,c=Vr(i-o,0),l=Yn(a+c),s=!e;++f<a;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;c--;)l[f++]=n[u++];return l}function ei(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,a=-1,c=t.length,l=Vr(i-f,0),s=Yn(l+c),h=!e;++u<l;)s[u]=n[u];for(var p=u;++a<c;)s[p+a]=t[a];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function ui(n,t){var r=-1,e=n.length;for(t||(t=Yn(e));++r<e;)t[r]=n[r];return t}function ii(n,t,e,u){var i=!e;e||(e={});for(var o=-1,f=t.length;++o<f;){var a=t[o],c=u?u(e[a],n[a],a,e,n):r;c===r&&(c=n[a]),i?Ce(e,a,c):ze(e,a,c)}return e}function oi(n,t){return function(r,e){var u=wf(r)?Zt:Le,i=t?t():{};return u(r,n,Ti(e,2),i)}}function fi(n){return ku(function(t,e){var u=-1,i=e.length,o=i>1?e[i-1]:r,f=i>2?e[2]:r;for(o=n.length>3&&"function"==typeof o?(i--,o):r,f&&Gi(e[0],e[1],f)&&(o=i<3?r:o,i=1),t=rt(t);++u<i;){var a=e[u];a&&n(t,a,u,o)}return t})}function ai(n,t){return function(r,e){if(null==r)return r;if(!xf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=rt(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function ci(n){return function(t,r,e){for(var u=-1,i=rt(t),o=e(t),f=o.length;f--;){var a=o[n?f:++u];if(!1===r(i[a],a,i))break}return t}}function li(n){return function(t){var e=Ar(t=Gf(t))?Sr(t):r,u=e?e[0]:t.charAt(0),i=e?Ju(e,1).join(""):t.slice(1);return u[n]()+i}}function si(n){return function(t){return nr(Ia(ba(t).replace(yt,"")),n,"")}}function hi(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ge(n.prototype),e=n.apply(r,t);return zf(e)?e:r}}function pi(n){return function(t,e,u){var i=rt(t);if(!xf(t)){var o=Ti(e,3);t=fa(t),e=function(n){return o(i[n],n,i)}}var f=n(t,e,u);return f>-1?i[o?t[f]:f]:r}}function vi(n){return Si(function(t){var e=t.length,u=e,o=de.prototype.thru;for(n&&t.reverse();u--;){var f=t[u];if("function"!=typeof f)throw new it(i);if(o&&!a&&"wrapper"==Bi(f))var a=new de([],!0)}for(u=a?u:e;++u<e;){var c=Bi(f=t[u]),l="wrapper"==c?Ci(f):r;a=l&&Ji(l[0])&&l[1]==(x|d|w|j)&&!l[4].length&&1==l[9]?a[Bi(l[0])].apply(a,l[3]):1==f.length&&Ji(f)?a[c]():a.thru(f)}return function(){var n=arguments,r=n[0];if(a&&1==n.length&&wf(r))return a.plant(r).value();for(var u=0,i=e?t[u].apply(this,n):r;++u<e;)i=t[u].call(this,i);return i}})}function _i(n,t,e,u,i,o,f,a,c,l){var s=t&x,h=t&_,p=t&g,v=t&(d|b),y=t&A,w=p?r:hi(n);return function _(){for(var g=arguments.length,d=Yn(g),b=g;b--;)d[b]=arguments[b];if(v)var m=Ui(_),x=function(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}(d,m);if(u&&(d=ri(d,u,i,v)),o&&(d=ei(d,o,f,v)),g-=x,v&&g<l){var j=Ir(d,m);return xi(n,t,_i,_.placeholder,e,d,j,a,c,l-g)}var A=h?e:this,k=p?A[n]:n;return g=d.length,a?d=function(n,t){for(var e=n.length,u=Gr(t.length,e),i=ui(n);u--;){var o=t[u];n[u]=Vi(o,e)?i[o]:r}return n}(d,a):y&&g>1&&d.reverse(),s&&c<g&&(d.length=c),this&&this!==Lt&&this instanceof _&&(k=w||hi(k)),k.apply(A,d)}}function gi(n,t){return function(r,e){return function(n,t,r,e){return He(n,function(n,u,i){t(e,r(n),u,i)}),e}(r,n,t(e),{})}}function yi(n,t){return function(e,u){var i;if(e===r&&u===r)return t;if(e!==r&&(i=e),u!==r){if(i===r)return u;"string"==typeof e||"string"==typeof u?(e=Du(e),u=Du(u)):(e=Tu(e),u=Tu(u)),i=n(e,u)}return i}}function di(n){return Si(function(t){return t=Qt(t,gr(Ti())),ku(function(r){var e=this;return n(t,function(n){return qt(n,e,r)})})})}function bi(n,t){var e=(t=t===r?" ":Du(t)).length;if(e<2)return e?Au(t,n):t;var u=Au(t,Mr(n/zr(t)));return Ar(t)?Ju(Sr(u),0,n).join(""):u.slice(0,n)}function wi(n){return function(t,e,u){return u&&"number"!=typeof u&&Gi(t,e,u)&&(e=u=r),t=Pf(t),e===r?(e=t,t=0):e=Pf(e),function(n,t,r,e){for(var u=-1,i=Vr(Mr((t-n)/(r||1)),0),o=Yn(i);i--;)o[e?i:++u]=n,n+=r;return o}(t,e,u=u===r?t<e?1:-1:Pf(u),n)}}function mi(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Kf(t),r=Kf(r)),n(t,r)}}function xi(n,t,e,u,i,o,f,a,c,l){var s=t&d;t|=s?w:m,(t&=~(s?m:w))&y||(t&=~(_|g));var h=[n,t,i,s?o:r,s?f:r,s?r:o,s?r:f,a,c,l],p=e.apply(r,h);return Ji(n)&&uo(p,h),p.placeholder=u,fo(p,n,t)}function ji(n){var t=tt[n];return function(n,r){if(n=Kf(n),(r=null==r?0:Gr(qf(r),292))&&qr(n)){var e=(Gf(n)+"e").split("e");return+((e=(Gf(t(e[0]+"e"+(+e[1]+r)))+"e").split("e"))[0]+"e"+(+e[1]-r))}return t(n)}}var Ai=re&&1/Rr(new re([,-0]))[1]==S?function(n){return new re(n)}:Da;function ki(n){return function(t){var r=Pi(t);return r==G?kr(t):r==nn?Er(t):function(n,t){return Qt(t,function(t){return[t,n[t]]})}(t,n(t))}}function Oi(n,t,e,u,o,f,a,l){var s=t&g;if(!s&&"function"!=typeof n)throw new it(i);var h=u?u.length:0;if(h||(t&=~(w|m),u=o=r),a=a===r?a:Vr(qf(a),0),l=l===r?l:qf(l),h-=o?o.length:0,t&m){var p=u,v=o;u=o=r}var A=s?r:Ci(n),k=[n,t,e,u,o,p,v,f,a,l];if(A&&function(n,t){var r=n[1],e=t[1],u=r|e,i=u<(_|g|x),o=e==x&&r==d||e==x&&r==j&&n[7].length<=t[8]||e==(x|j)&&t[7].length<=t[8]&&r==d;if(!i&&!o)return n;e&_&&(n[2]=t[2],u|=r&_?0:y);var f=t[3];if(f){var a=n[3];n[3]=a?ri(a,f,t[4]):f,n[4]=a?Ir(n[3],c):t[4]}(f=t[5])&&(a=n[5],n[5]=a?ei(a,f,t[6]):f,n[6]=a?Ir(n[5],c):t[6]),(f=t[7])&&(n[7]=f),e&x&&(n[8]=null==n[8]?t[8]:Gr(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u}(k,A),n=k[0],t=k[1],e=k[2],u=k[3],o=k[4],!(l=k[9]=k[9]===r?s?0:n.length:Vr(k[9]-h,0))&&t&(d|b)&&(t&=~(d|b)),t&&t!=_)O=t==d||t==b?function(n,t,e){var u=hi(n);return function i(){for(var o=arguments.length,f=Yn(o),a=o,c=Ui(i);a--;)f[a]=arguments[a];var l=o<3&&f[0]!==c&&f[o-1]!==c?[]:Ir(f,c);return(o-=l.length)<e?xi(n,t,_i,i.placeholder,r,f,l,r,r,e-o):qt(this&&this!==Lt&&this instanceof i?u:n,this,f)}}(n,t,l):t!=w&&t!=(_|w)||o.length?_i.apply(r,k):function(n,t,r,e){var u=t&_,i=hi(n);return function t(){for(var o=-1,f=arguments.length,a=-1,c=e.length,l=Yn(c+f),s=this&&this!==Lt&&this instanceof t?i:n;++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++o];return qt(s,u?r:this,l)}}(n,t,e,u);else var O=function(n,t,r){var e=t&_,u=hi(n);return function t(){return(this&&this!==Lt&&this instanceof t?u:n).apply(e?r:this,arguments)}}(n,t,e);return fo((A?Eu:uo)(O,k),n,t)}function Ii(n,t,e,u){return n===r||gf(n,at[e])&&!st.call(u,e)?t:n}function Ri(n,t,e,u,i,o){return zf(n)&&zf(t)&&(o.set(t,n),yu(n,t,r,Ri,o),o.delete(t)),n}function Ei(n){return Cf(n)?r:n}function zi(n,t,e,u,i,o){var f=e&p,a=n.length,c=t.length;if(a!=c&&!(f&&c>a))return!1;var l=o.get(n),s=o.get(t);if(l&&s)return l==t&&s==n;var h=-1,_=!0,g=e&v?new je:r;for(o.set(n,t),o.set(t,n);++h<a;){var y=n[h],d=t[h];if(u)var b=f?u(d,y,h,t,n,o):u(y,d,h,n,t,o);if(b!==r){if(b)continue;_=!1;break}if(g){if(!rr(t,function(n,t){if(!dr(g,t)&&(y===n||i(y,n,e,u,o)))return g.push(t)})){_=!1;break}}else if(y!==d&&!i(y,d,e,u,o)){_=!1;break}}return o.delete(n),o.delete(t),_}function Si(n){return oo(to(n,r,wo),n+"")}function Li(n){return Xe(n,fa,Fi)}function Wi(n){return Xe(n,aa,Ni)}var Ci=ie?function(n){return ie.get(n)}:Da;function Bi(n){for(var t=n.name+"",r=oe[t],e=st.call(oe,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function Ui(n){return(st.call(_e,"placeholder")?_e:n).placeholder}function Ti(){var n=_e.iteratee||Ca;return n=n===Ca?lu:n,arguments.length?n(arguments[0],arguments[1]):n}function Di(n,t){var r,e,u=n.__data__;return("string"==(e=typeof(r=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==r:null===r)?u["string"==typeof t?"string":"hash"]:u.map}function $i(n){for(var t=fa(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Xi(u)]}return t}function Mi(n,t){var e=function(n,t){return null==n?r:n[t]}(n,t);return cu(e)?e:r}var Fi=Nr?function(n){return null==n?[]:(n=rt(n),Ht(Nr(n),function(t){return Ut.call(n,t)}))}:Za,Ni=Nr?function(n){for(var t=[];n;)Xt(t,Fi(n)),n=Wt(n);return t}:Za,Pi=nu;function qi(n,t,r){for(var e=-1,u=(t=Gu(t,n)).length,i=!1;++e<u;){var o=so(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:!!(u=null==n?0:n.length)&&Ef(u)&&Vi(o,u)&&(wf(n)||bf(n))}function Zi(n){return"function"!=typeof n.constructor||Qi(n)?{}:ge(Wt(n))}function Ki(n){return wf(n)||bf(n)||!!(er&&n&&n[er])}function Vi(n,t){var r=typeof n;return!!(t=null==t?L:t)&&("number"==r||"symbol"!=r&&Vn.test(n))&&n>-1&&n%1==0&&n<t}function Gi(n,t,r){if(!zf(r))return!1;var e=typeof t;return!!("number"==e?xf(r)&&Vi(t,r.length):"string"==e&&t in r)&&gf(r[t],n)}function Hi(n,t){if(wf(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!Df(n))||En.test(n)||!Rn.test(n)||null!=t&&n in rt(t)}function Ji(n){var t=Bi(n),r=_e[t];if("function"!=typeof r||!(t in be.prototype))return!1;if(n===r)return!0;var e=Ci(r);return!!e&&n===e[0]}(Xr&&Pi(new Xr(new ArrayBuffer(1)))!=an||ne&&Pi(new ne)!=G||te&&"[object Promise]"!=Pi(te.resolve())||re&&Pi(new re)!=nn||ee&&Pi(new ee)!=un)&&(Pi=function(n){var t=nu(n),e=t==Y?n.constructor:r,u=e?ho(e):"";if(u)switch(u){case fe:return an;case ae:return G;case ce:return"[object Promise]";case le:return nn;case se:return un}return t});var Yi=ct?If:Ka;function Qi(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||at)}function Xi(n){return n==n&&!zf(n)}function no(n,t){return function(e){return null!=e&&e[n]===t&&(t!==r||n in rt(e))}}function to(n,t,e){return t=Vr(t===r?n.length-1:t,0),function(){for(var r=arguments,u=-1,i=Vr(r.length-t,0),o=Yn(i);++u<i;)o[u]=r[t+u];u=-1;for(var f=Yn(t+1);++u<t;)f[u]=r[u];return f[t]=e(o),qt(n,this,f)}}function ro(n,t){return t.length<2?n:Qe(n,Lu(t,0,-1))}function eo(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var uo=ao(Eu),io=$r||function(n,t){return Lt.setTimeout(n,t)},oo=ao(zu);function fo(n,t,r){var e=t+"";return oo(n,function(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?"& ":"")+t[e],t=t.join(r>2?", ":" "),n.replace(Bn,"{\n/* [wrapped with "+t+"] */\n")}(e,function(n,t){return Kt(D,function(r){var e="_."+r[0];t&r[1]&&!Jt(n,e)&&n.push(e)}),n.sort()}(function(n){var t=n.match(Un);return t?t[1].split(Tn):[]}(e),r)))}function ao(n){var t=0,e=0;return function(){var u=Hr(),i=R-(u-e);if(e=u,i>0){if(++t>=I)return arguments[0]}else t=0;return n.apply(r,arguments)}}function co(n,t){var e=-1,u=n.length,i=u-1;for(t=t===r?u:t;++e<t;){var o=ju(e,i),f=n[o];n[o]=n[e],n[e]=f}return n.length=t,n}var lo=function(n){var t=lf(n,function(n){return r.size===a&&r.clear(),n}),r=t.cache;return t}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(zn,function(n,r,e,u){t.push(e?u.replace(Mn,"$1"):r||n)}),t});function so(n){if("string"==typeof n||Df(n))return n;var t=n+"";return"0"==t&&1/n==-S?"-0":t}function ho(n){if(null!=n){try{return lt.call(n)}catch(t){}try{return n+""}catch(t){}}return""}function po(n){if(n instanceof be)return n.clone();var t=new de(n.__wrapped__,n.__chain__);return t.__actions__=ui(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var vo=ku(function(n,t){return jf(n)?Me(n,Ke(t,1,jf,!0)):[]}),_o=ku(function(n,t){var e=ko(t);return jf(e)&&(e=r),jf(n)?Me(n,Ke(t,1,jf,!0),Ti(e,2)):[]}),go=ku(function(n,t){var e=ko(t);return jf(e)&&(e=r),jf(n)?Me(n,Ke(t,1,jf,!0),r,e):[]});function yo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:qf(r);return u<0&&(u=Vr(e+u,0)),ir(n,Ti(t,3),u)}function bo(n,t,e){var u=null==n?0:n.length;if(!u)return-1;var i=u-1;return e!==r&&(i=qf(e),i=e<0?Vr(u+i,0):Gr(i,u-1)),ir(n,Ti(t,3),i,!0)}function wo(n){return null!=n&&n.length?Ke(n,1):[]}function mo(n){return n&&n.length?n[0]:r}var xo=ku(function(n){var t=Qt(n,Ku);return t.length&&t[0]===n[0]?uu(t):[]}),jo=ku(function(n){var t=ko(n),e=Qt(n,Ku);return t===ko(e)?t=r:e.pop(),e.length&&e[0]===n[0]?uu(e,Ti(t,2)):[]}),Ao=ku(function(n){var t=ko(n),e=Qt(n,Ku);return(t="function"==typeof t?t:r)&&e.pop(),e.length&&e[0]===n[0]?uu(e,r,t):[]});function ko(n){var t=null==n?0:n.length;return t?n[t-1]:r}var Oo=ku(Io);function Io(n,t){return n&&n.length&&t&&t.length?mu(n,t):n}var Ro=Si(function(n,t){var r=null==n?0:n.length,e=Be(n,t);return xu(n,Qt(t,function(n){return Vi(n,r)?+n:n}).sort(ti)),e});function Eo(n){return null==n?n:Qr.call(n)}var zo=ku(function(n){return $u(Ke(n,1,jf,!0))}),So=ku(function(n){var t=ko(n);return jf(t)&&(t=r),$u(Ke(n,1,jf,!0),Ti(t,2))}),Lo=ku(function(n){var t=ko(n);return t="function"==typeof t?t:r,$u(Ke(n,1,jf,!0),r,t)});function Wo(n){if(!n||!n.length)return[];var t=0;return n=Ht(n,function(n){if(jf(n))return t=Vr(n.length,t),!0}),vr(t,function(t){return Qt(n,lr(t))})}function Co(n,t){if(!n||!n.length)return[];var e=Wo(n);return null==t?e:Qt(e,function(n){return qt(t,r,n)})}var Bo=ku(function(n,t){return jf(n)?Me(n,t):[]}),Uo=ku(function(n){return qu(Ht(n,jf))}),To=ku(function(n){var t=ko(n);return jf(t)&&(t=r),qu(Ht(n,jf),Ti(t,2))}),Do=ku(function(n){var t=ko(n);return t="function"==typeof t?t:r,qu(Ht(n,jf),r,t)}),$o=ku(Wo);var Mo=ku(function(n){var t=n.length,e=t>1?n[t-1]:r;return e="function"==typeof e?(n.pop(),e):r,Co(n,e)});function Fo(n){var t=_e(n);return t.__chain__=!0,t}function No(n,t){return t(n)}var Po=Si(function(n){var t=n.length,e=t?n[0]:0,u=this.__wrapped__,i=function(t){return Be(t,n)};return!(t>1||this.__actions__.length)&&u instanceof be&&Vi(e)?((u=u.slice(e,+e+(t?1:0))).__actions__.push({func:No,args:[i],thisArg:r}),new de(u,this.__chain__).thru(function(n){return t&&!n.length&&n.push(r),n})):this.thru(i)});var qo=oi(function(n,t,r){st.call(n,r)?++n[r]:Ce(n,r,1)});var Zo=pi(yo),Ko=pi(bo);function Vo(n,t){return(wf(n)?Kt:Fe)(n,Ti(t,3))}function Go(n,t){return(wf(n)?Vt:Ne)(n,Ti(t,3))}var Ho=oi(function(n,t,r){st.call(n,r)?n[r].push(t):Ce(n,r,[t])});var Jo=ku(function(n,t,r){var e=-1,u="function"==typeof t,i=xf(n)?Yn(n.length):[];return Fe(n,function(n){i[++e]=u?qt(t,n,r):iu(n,t,r)}),i}),Yo=oi(function(n,t,r){Ce(n,r,t)});function Qo(n,t){return(wf(n)?Qt:vu)(n,Ti(t,3))}var Xo=oi(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]});var nf=ku(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Gi(n,t[0],t[1])?t=[]:r>2&&Gi(t[0],t[1],t[2])&&(t=[t[0]]),bu(n,Ke(t,1),[])}),tf=Dr||function(){return Lt.Date.now()};function rf(n,t,e){return t=e?r:t,t=n&&null==t?n.length:t,Oi(n,x,r,r,r,r,t)}function ef(n,t){var e;if("function"!=typeof t)throw new it(i);return n=qf(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=r),e}}var uf=ku(function(n,t,r){var e=_;if(r.length){var u=Ir(r,Ui(uf));e|=w}return Oi(n,e,t,r,u)}),of=ku(function(n,t,r){var e=_|g;if(r.length){var u=Ir(r,Ui(of));e|=w}return Oi(t,e,n,r,u)});function ff(n,t,e){var u,o,f,a,c,l,s=0,h=!1,p=!1,v=!0;if("function"!=typeof n)throw new it(i);function _(t){var e=u,i=o;return u=o=r,s=t,a=n.apply(i,e)}function g(n){var e=n-l;return l===r||e>=t||e<0||p&&n-s>=f}function y(){var n=tf();if(g(n))return d(n);c=io(y,function(n){var r=t-(n-l);return p?Gr(r,f-(n-s)):r}(n))}function d(n){return c=r,v&&u?_(n):(u=o=r,a)}function b(){var n=tf(),e=g(n);if(u=arguments,o=this,l=n,e){if(c===r)return function(n){return s=n,c=io(y,t),h?_(n):a}(l);if(p)return Yu(c),c=io(y,t),_(l)}return c===r&&(c=io(y,t)),a}return t=Kf(t)||0,zf(e)&&(h=!!e.leading,f=(p="maxWait"in e)?Vr(Kf(e.maxWait)||0,t):f,v="trailing"in e?!!e.trailing:v),b.cancel=function(){c!==r&&Yu(c),s=0,u=l=o=c=r},b.flush=function(){return c===r?a:d(tf())},b}var af=ku(function(n,t){return $e(n,1,t)}),cf=ku(function(n,t,r){return $e(n,Kf(t)||0,r)});function lf(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new it(i);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(lf.Cache||xe),r}function sf(n){if("function"!=typeof n)throw new it(i);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}lf.Cache=xe;var hf=Hu(function(n,t){var r=(t=1==t.length&&wf(t[0])?Qt(t[0],gr(Ti())):Qt(Ke(t,1),gr(Ti()))).length;return ku(function(e){for(var u=-1,i=Gr(e.length,r);++u<i;)e[u]=t[u].call(this,e[u]);return qt(n,this,e)})}),pf=ku(function(n,t){var e=Ir(t,Ui(pf));return Oi(n,w,r,t,e)}),vf=ku(function(n,t){var e=Ir(t,Ui(vf));return Oi(n,m,r,t,e)}),_f=Si(function(n,t){return Oi(n,j,r,r,r,t)});function gf(n,t){return n===t||n!=n&&t!=t}var yf=mi(tu),df=mi(function(n,t){return n>=t}),bf=ou(function(){return arguments}())?ou:function(n){return Sf(n)&&st.call(n,"callee")&&!Ut.call(n,"callee")},wf=Yn.isArray,mf=Dt?gr(Dt):function(n){return Sf(n)&&nu(n)==fn};function xf(n){return null!=n&&Ef(n.length)&&!If(n)}function jf(n){return Sf(n)&&xf(n)}var Af=Pr||Ka,kf=$t?gr($t):function(n){return Sf(n)&&nu(n)==P};function Of(n){if(!Sf(n))return!1;var t=nu(n);return t==Z||t==q||"string"==typeof n.message&&"string"==typeof n.name&&!Cf(n)}function If(n){if(!zf(n))return!1;var t=nu(n);return t==K||t==V||t==F||t==Q}function Rf(n){return"number"==typeof n&&n==qf(n)}function Ef(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=L}function zf(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function Sf(n){return null!=n&&"object"==typeof n}var Lf=Mt?gr(Mt):function(n){return Sf(n)&&Pi(n)==G};function Wf(n){return"number"==typeof n||Sf(n)&&nu(n)==H}function Cf(n){if(!Sf(n)||nu(n)!=Y)return!1;var t=Wt(n);if(null===t)return!0;var r=st.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lt.call(r)==_t}var Bf=Ft?gr(Ft):function(n){return Sf(n)&&nu(n)==X};var Uf=Nt?gr(Nt):function(n){return Sf(n)&&Pi(n)==nn};function Tf(n){return"string"==typeof n||!wf(n)&&Sf(n)&&nu(n)==tn}function Df(n){return"symbol"==typeof n||Sf(n)&&nu(n)==rn}var $f=Pt?gr(Pt):function(n){return Sf(n)&&Ef(n.length)&&!!kt[nu(n)]};var Mf=mi(pu),Ff=mi(function(n,t){return n<=t});function Nf(n){if(!n)return[];if(xf(n))return Tf(n)?Sr(n):ui(n);if(sr&&n[sr])return function(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}(n[sr]());var t=Pi(n);return(t==G?kr:t==nn?Rr:ga)(n)}function Pf(n){return n?(n=Kf(n))===S||n===-S?(n<0?-1:1)*W:n==n?n:0:0===n?n:0}function qf(n){var t=Pf(n),r=t%1;return t==t?r?t-r:t:0}function Zf(n){return n?Ue(qf(n),0,B):0}function Kf(n){if("number"==typeof n)return n;if(Df(n))return C;if(zf(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=zf(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=_r(n);var r=qn.test(n);return r||Kn.test(n)?Et(n.slice(2),r?2:8):Pn.test(n)?C:+n}function Vf(n){return ii(n,aa(n))}function Gf(n){return null==n?"":Du(n)}var Hf=fi(function(n,t){if(Qi(t)||xf(t))ii(t,fa(t),n);else for(var r in t)st.call(t,r)&&ze(n,r,t[r])}),Jf=fi(function(n,t){ii(t,aa(t),n)}),Yf=fi(function(n,t,r,e){ii(t,aa(t),n,e)}),Qf=fi(function(n,t,r,e){ii(t,fa(t),n,e)}),Xf=Si(Be);var na=ku(function(n,t){n=rt(n);var e=-1,u=t.length,i=u>2?t[2]:r;for(i&&Gi(t[0],t[1],i)&&(u=1);++e<u;)for(var o=t[e],f=aa(o),a=-1,c=f.length;++a<c;){var l=f[a],s=n[l];(s===r||gf(s,at[l])&&!st.call(n,l))&&(n[l]=o[l])}return n}),ta=ku(function(n){return n.push(r,Ri),qt(la,r,n)});function ra(n,t,e){var u=null==n?r:Qe(n,t);return u===r?e:u}function ea(n,t){return null!=n&&qi(n,t,eu)}var ua=gi(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=vt.call(t)),n[t]=r},za(Wa)),ia=gi(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=vt.call(t)),st.call(n,t)?n[t].push(r):n[t]=[r]},Ti),oa=ku(iu);function fa(n){return xf(n)?ke(n):su(n)}function aa(n){return xf(n)?ke(n,!0):hu(n)}var ca=fi(function(n,t,r){yu(n,t,r)}),la=fi(function(n,t,r,e){yu(n,t,r,e)}),sa=Si(function(n,t){var r={};if(null==n)return r;var e=!1;t=Qt(t,function(t){return t=Gu(t,n),e||(e=t.length>1),t}),ii(n,Wi(n),r),e&&(r=Te(r,l|s|h,Ei));for(var u=t.length;u--;)Mu(r,t[u]);return r});var ha=Si(function(n,t){return null==n?{}:function(n,t){return wu(n,t,function(t,r){return ea(n,r)})}(n,t)});function pa(n,t){if(null==n)return{};var r=Qt(Wi(n),function(n){return[n]});return t=Ti(t),wu(n,r,function(n,r){return t(n,r[0])})}var va=ki(fa),_a=ki(aa);function ga(n){return null==n?[]:yr(n,fa(n))}var ya=si(function(n,t,r){return t=t.toLowerCase(),n+(r?da(t):t)});function da(n){return Oa(Gf(n).toLowerCase())}function ba(n){return(n=Gf(n))&&n.replace(Gn,mr).replace(dt,"")}var wa=si(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),ma=si(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),xa=li("toLowerCase");var ja=si(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()});var Aa=si(function(n,t,r){return n+(r?" ":"")+Oa(t)});var ka=si(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Oa=li("toUpperCase");function Ia(n,t,e){return n=Gf(n),(t=e?r:t)===r?function(n){return xt.test(n)}(n)?function(n){return n.match(wt)||[]}(n):function(n){return n.match(Dn)||[]}(n):n.match(t)||[]}var Ra=ku(function(n,t){try{return qt(n,r,t)}catch(e){return Of(e)?e:new Xn(e)}}),Ea=Si(function(n,t){return Kt(t,function(t){t=so(t),Ce(n,t,uf(n[t],n))}),n});function za(n){return function(){return n}}var Sa=vi(),La=vi(!0);function Wa(n){return n}function Ca(n){return lu("function"==typeof n?n:Te(n,l))}var Ba=ku(function(n,t){return function(r){return iu(r,n,t)}}),Ua=ku(function(n,t){return function(r){return iu(n,r,t)}});function Ta(n,t,r){var e=fa(t),u=Ye(t,e);null!=r||zf(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=Ye(t,fa(t)));var i=!(zf(r)&&"chain"in r&&!r.chain),o=If(n);return Kt(u,function(r){var e=t[r];n[r]=e,o&&(n.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=n(this.__wrapped__);return(r.__actions__=ui(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,Xt([this.value()],arguments))})}),n}function Da(){}var $a=di(Qt),Ma=di(Gt),Fa=di(rr);function Na(n){return Hi(n)?lr(so(n)):function(n){return function(t){return Qe(t,n)}}(n)}var Pa=wi(),qa=wi(!0);function Za(){return[]}function Ka(){return!1}var Va=yi(function(n,t){return n+t},0),Ga=ji("ceil"),Ha=yi(function(n,t){return n/t},1),Ja=ji("floor");var Ya,Qa=yi(function(n,t){return n*t},1),Xa=ji("round"),nc=yi(function(n,t){return n-t},0);return _e.after=function(n,t){if("function"!=typeof t)throw new it(i);return n=qf(n),function(){if(--n<1)return t.apply(this,arguments)}},_e.ary=rf,_e.assign=Hf,_e.assignIn=Jf,_e.assignInWith=Yf,_e.assignWith=Qf,_e.at=Xf,_e.before=ef,_e.bind=uf,_e.bindAll=Ea,_e.bindKey=of,_e.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return wf(n)?n:[n]},_e.chain=Fo,_e.chunk=function(n,t,e){t=(e?Gi(n,t,e):t===r)?1:Vr(qf(t),0);var u=null==n?0:n.length;if(!u||t<1)return[];for(var i=0,o=0,f=Yn(Mr(u/t));i<u;)f[o++]=Lu(n,i,i+=t);return f},_e.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},_e.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Yn(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return Xt(wf(r)?ui(r):[r],Ke(t,1))},_e.cond=function(n){var t=null==n?0:n.length,r=Ti();return n=t?Qt(n,function(n){if("function"!=typeof n[1])throw new it(i);return[r(n[0]),n[1]]}):[],ku(function(r){for(var e=-1;++e<t;){var u=n[e];if(qt(u[0],this,r))return qt(u[1],this,r)}})},_e.conforms=function(n){return function(n){var t=fa(n);return function(r){return De(r,n,t)}}(Te(n,l))},_e.constant=za,_e.countBy=qo,_e.create=function(n,t){var r=ge(n);return null==t?r:We(r,t)},_e.curry=function n(t,e,u){var i=Oi(t,d,r,r,r,r,r,e=u?r:e);return i.placeholder=n.placeholder,i},_e.curryRight=function n(t,e,u){var i=Oi(t,b,r,r,r,r,r,e=u?r:e);return i.placeholder=n.placeholder,i},_e.debounce=ff,_e.defaults=na,_e.defaultsDeep=ta,_e.defer=af,_e.delay=cf,_e.difference=vo,_e.differenceBy=_o,_e.differenceWith=go,_e.drop=function(n,t,e){var u=null==n?0:n.length;return u?Lu(n,(t=e||t===r?1:qf(t))<0?0:t,u):[]},_e.dropRight=function(n,t,e){var u=null==n?0:n.length;return u?Lu(n,0,(t=u-(t=e||t===r?1:qf(t)))<0?0:t):[]},_e.dropRightWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3),!0,!0):[]},_e.dropWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3),!0):[]},_e.fill=function(n,t,e,u){var i=null==n?0:n.length;return i?(e&&"number"!=typeof e&&Gi(n,t,e)&&(e=0,u=i),function(n,t,e,u){var i=n.length;for((e=qf(e))<0&&(e=-e>i?0:i+e),(u=u===r||u>i?i:qf(u))<0&&(u+=i),u=e>u?0:Zf(u);e<u;)n[e++]=t;return n}(n,t,e,u)):[]},_e.filter=function(n,t){return(wf(n)?Ht:Ze)(n,Ti(t,3))},_e.flatMap=function(n,t){return Ke(Qo(n,t),1)},_e.flatMapDeep=function(n,t){return Ke(Qo(n,t),S)},_e.flatMapDepth=function(n,t,e){return e=e===r?1:qf(e),Ke(Qo(n,t),e)},_e.flatten=wo,_e.flattenDeep=function(n){return null!=n&&n.length?Ke(n,S):[]},_e.flattenDepth=function(n,t){return null!=n&&n.length?Ke(n,t=t===r?1:qf(t)):[]},_e.flip=function(n){return Oi(n,A)},_e.flow=Sa,_e.flowRight=La,_e.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},_e.functions=function(n){return null==n?[]:Ye(n,fa(n))},_e.functionsIn=function(n){return null==n?[]:Ye(n,aa(n))},_e.groupBy=Ho,_e.initial=function(n){return null!=n&&n.length?Lu(n,0,-1):[]},_e.intersection=xo,_e.intersectionBy=jo,_e.intersectionWith=Ao,_e.invert=ua,_e.invertBy=ia,_e.invokeMap=Jo,_e.iteratee=Ca,_e.keyBy=Yo,_e.keys=fa,_e.keysIn=aa,_e.map=Qo,_e.mapKeys=function(n,t){var r={};return t=Ti(t,3),He(n,function(n,e,u){Ce(r,t(n,e,u),n)}),r},_e.mapValues=function(n,t){var r={};return t=Ti(t,3),He(n,function(n,e,u){Ce(r,e,t(n,e,u))}),r},_e.matches=function(n){return _u(Te(n,l))},_e.matchesProperty=function(n,t){return gu(n,Te(t,l))},_e.memoize=lf,_e.merge=ca,_e.mergeWith=la,_e.method=Ba,_e.methodOf=Ua,_e.mixin=Ta,_e.negate=sf,_e.nthArg=function(n){return n=qf(n),ku(function(t){return du(t,n)})},_e.omit=sa,_e.omitBy=function(n,t){return pa(n,sf(Ti(t)))},_e.once=function(n){return ef(2,n)},_e.orderBy=function(n,t,e,u){return null==n?[]:(wf(t)||(t=null==t?[]:[t]),wf(e=u?r:e)||(e=null==e?[]:[e]),bu(n,t,e))},_e.over=$a,_e.overArgs=hf,_e.overEvery=Ma,_e.overSome=Fa,_e.partial=pf,_e.partialRight=vf,_e.partition=Xo,_e.pick=ha,_e.pickBy=pa,_e.property=Na,_e.propertyOf=function(n){return function(t){return null==n?r:Qe(n,t)}},_e.pull=Oo,_e.pullAll=Io,_e.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?mu(n,t,Ti(r,2)):n},_e.pullAllWith=function(n,t,e){return n&&n.length&&t&&t.length?mu(n,t,r,e):n},_e.pullAt=Ro,_e.range=Pa,_e.rangeRight=qa,_e.rearg=_f,_e.reject=function(n,t){return(wf(n)?Ht:Ze)(n,sf(Ti(t,3)))},_e.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=Ti(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return xu(n,u),r},_e.rest=function(n,t){if("function"!=typeof n)throw new it(i);return ku(n,t=t===r?t:qf(t))},_e.reverse=Eo,_e.sampleSize=function(n,t,e){return t=(e?Gi(n,t,e):t===r)?1:qf(t),(wf(n)?Ie:Iu)(n,t)},_e.set=function(n,t,r){return null==n?n:Ru(n,t,r)},_e.setWith=function(n,t,e,u){return u="function"==typeof u?u:r,null==n?n:Ru(n,t,e,u)},_e.shuffle=function(n){return(wf(n)?Re:Su)(n)},_e.slice=function(n,t,e){var u=null==n?0:n.length;return u?(e&&"number"!=typeof e&&Gi(n,t,e)?(t=0,e=u):(t=null==t?0:qf(t),e=e===r?u:qf(e)),Lu(n,t,e)):[]},_e.sortBy=nf,_e.sortedUniq=function(n){return n&&n.length?Uu(n):[]},_e.sortedUniqBy=function(n,t){return n&&n.length?Uu(n,Ti(t,2)):[]},_e.split=function(n,t,e){return e&&"number"!=typeof e&&Gi(n,t,e)&&(t=e=r),(e=e===r?B:e>>>0)?(n=Gf(n))&&("string"==typeof t||null!=t&&!Bf(t))&&!(t=Du(t))&&Ar(n)?Ju(Sr(n),0,e):n.split(t,e):[]},_e.spread=function(n,t){if("function"!=typeof n)throw new it(i);return t=null==t?0:Vr(qf(t),0),ku(function(r){var e=r[t],u=Ju(r,0,t);return e&&Xt(u,e),qt(n,this,u)})},_e.tail=function(n){var t=null==n?0:n.length;return t?Lu(n,1,t):[]},_e.take=function(n,t,e){return n&&n.length?Lu(n,0,(t=e||t===r?1:qf(t))<0?0:t):[]},_e.takeRight=function(n,t,e){var u=null==n?0:n.length;return u?Lu(n,(t=u-(t=e||t===r?1:qf(t)))<0?0:t,u):[]},_e.takeRightWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3),!1,!0):[]},_e.takeWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3)):[]},_e.tap=function(n,t){return t(n),n},_e.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new it(i);return zf(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ff(n,t,{leading:e,maxWait:t,trailing:u})},_e.thru=No,_e.toArray=Nf,_e.toPairs=va,_e.toPairsIn=_a,_e.toPath=function(n){return wf(n)?Qt(n,so):Df(n)?[n]:ui(lo(Gf(n)))},_e.toPlainObject=Vf,_e.transform=function(n,t,r){var e=wf(n),u=e||Af(n)||$f(n);if(t=Ti(t,4),null==r){var i=n&&n.constructor;r=u?e?new i:[]:zf(n)&&If(i)?ge(Wt(n)):{}}return(u?Kt:He)(n,function(n,e,u){return t(r,n,e,u)}),r},_e.unary=function(n){return rf(n,1)},_e.union=zo,_e.unionBy=So,_e.unionWith=Lo,_e.uniq=function(n){return n&&n.length?$u(n):[]},_e.uniqBy=function(n,t){return n&&n.length?$u(n,Ti(t,2)):[]},_e.uniqWith=function(n,t){return t="function"==typeof t?t:r,n&&n.length?$u(n,r,t):[]},_e.unset=function(n,t){return null==n||Mu(n,t)},_e.unzip=Wo,_e.unzipWith=Co,_e.update=function(n,t,r){return null==n?n:Fu(n,t,Vu(r))},_e.updateWith=function(n,t,e,u){return u="function"==typeof u?u:r,null==n?n:Fu(n,t,Vu(e),u)},_e.values=ga,_e.valuesIn=function(n){return null==n?[]:yr(n,aa(n))},_e.without=Bo,_e.words=Ia,_e.wrap=function(n,t){return pf(Vu(t),n)},_e.xor=Uo,_e.xorBy=To,_e.xorWith=Do,_e.zip=$o,_e.zipObject=function(n,t){return Zu(n||[],t||[],ze)},_e.zipObjectDeep=function(n,t){return Zu(n||[],t||[],Ru)},_e.zipWith=Mo,_e.entries=va,_e.entriesIn=_a,_e.extend=Jf,_e.extendWith=Yf,Ta(_e,_e),_e.add=Va,_e.attempt=Ra,_e.camelCase=ya,_e.capitalize=da,_e.ceil=Ga,_e.clamp=function(n,t,e){return e===r&&(e=t,t=r),e!==r&&(e=(e=Kf(e))==e?e:0),t!==r&&(t=(t=Kf(t))==t?t:0),Ue(Kf(n),t,e)},_e.clone=function(n){return Te(n,h)},_e.cloneDeep=function(n){return Te(n,l|h)},_e.cloneDeepWith=function(n,t){return Te(n,l|h,t="function"==typeof t?t:r)},_e.cloneWith=function(n,t){return Te(n,h,t="function"==typeof t?t:r)},_e.conformsTo=function(n,t){return null==t||De(n,t,fa(t))},_e.deburr=ba,_e.defaultTo=function(n,t){return null==n||n!=n?t:n},_e.divide=Ha,_e.endsWith=function(n,t,e){n=Gf(n),t=Du(t);var u=n.length,i=e=e===r?u:Ue(qf(e),0,u);return(e-=t.length)>=0&&n.slice(e,i)==t},_e.eq=gf,_e.escape=function(n){return(n=Gf(n))&&An.test(n)?n.replace(xn,xr):n},_e.escapeRegExp=function(n){return(n=Gf(n))&&Ln.test(n)?n.replace(Sn,"\\$&"):n},_e.every=function(n,t,e){var u=wf(n)?Gt:Pe;return e&&Gi(n,t,e)&&(t=r),u(n,Ti(t,3))},_e.find=Zo,_e.findIndex=yo,_e.findKey=function(n,t){return ur(n,Ti(t,3),He)},_e.findLast=Ko,_e.findLastIndex=bo,_e.findLastKey=function(n,t){return ur(n,Ti(t,3),Je)},_e.floor=Ja,_e.forEach=Vo,_e.forEachRight=Go,_e.forIn=function(n,t){return null==n?n:Ve(n,Ti(t,3),aa)},_e.forInRight=function(n,t){return null==n?n:Ge(n,Ti(t,3),aa)},_e.forOwn=function(n,t){return n&&He(n,Ti(t,3))},_e.forOwnRight=function(n,t){return n&&Je(n,Ti(t,3))},_e.get=ra,_e.gt=yf,_e.gte=df,_e.has=function(n,t){return null!=n&&qi(n,t,ru)},_e.hasIn=ea,_e.head=mo,_e.identity=Wa,_e.includes=function(n,t,r,e){n=xf(n)?n:ga(n),r=r&&!e?qf(r):0;var u=n.length;return r<0&&(r=Vr(u+r,0)),Tf(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&or(n,t,r)>-1},_e.indexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:qf(r);return u<0&&(u=Vr(e+u,0)),or(n,t,u)},_e.inRange=function(n,t,e){return t=Pf(t),e===r?(e=t,t=0):e=Pf(e),function(n,t,r){return n>=Gr(t,r)&&n<Vr(t,r)}(n=Kf(n),t,e)},_e.invoke=oa,_e.isArguments=bf,_e.isArray=wf,_e.isArrayBuffer=mf,_e.isArrayLike=xf,_e.isArrayLikeObject=jf,_e.isBoolean=function(n){return!0===n||!1===n||Sf(n)&&nu(n)==N},_e.isBuffer=Af,_e.isDate=kf,_e.isElement=function(n){return Sf(n)&&1===n.nodeType&&!Cf(n)},_e.isEmpty=function(n){if(null==n)return!0;if(xf(n)&&(wf(n)||"string"==typeof n||"function"==typeof n.splice||Af(n)||$f(n)||bf(n)))return!n.length;var t=Pi(n);if(t==G||t==nn)return!n.size;if(Qi(n))return!su(n).length;for(var r in n)if(st.call(n,r))return!1;return!0},_e.isEqual=function(n,t){return fu(n,t)},_e.isEqualWith=function(n,t,e){var u=(e="function"==typeof e?e:r)?e(n,t):r;return u===r?fu(n,t,r,e):!!u},_e.isError=Of,_e.isFinite=function(n){return"number"==typeof n&&qr(n)},_e.isFunction=If,_e.isInteger=Rf,_e.isLength=Ef,_e.isMap=Lf,_e.isMatch=function(n,t){return n===t||au(n,t,$i(t))},_e.isMatchWith=function(n,t,e){return e="function"==typeof e?e:r,au(n,t,$i(t),e)},_e.isNaN=function(n){return Wf(n)&&n!=+n},_e.isNative=function(n){if(Yi(n))throw new Xn(u);return cu(n)},_e.isNil=function(n){return null==n},_e.isNull=function(n){return null===n},_e.isNumber=Wf,_e.isObject=zf,_e.isObjectLike=Sf,_e.isPlainObject=Cf,_e.isRegExp=Bf,_e.isSafeInteger=function(n){return Rf(n)&&n>=-L&&n<=L},_e.isSet=Uf,_e.isString=Tf,_e.isSymbol=Df,_e.isTypedArray=$f,_e.isUndefined=function(n){return n===r},_e.isWeakMap=function(n){return Sf(n)&&Pi(n)==un},_e.isWeakSet=function(n){return Sf(n)&&nu(n)==on},_e.join=function(n,t){return null==n?"":Zr.call(n,t)},_e.kebabCase=wa,_e.last=ko,_e.lastIndexOf=function(n,t,e){var u=null==n?0:n.length;if(!u)return-1;var i=u;return e!==r&&(i=(i=qf(e))<0?Vr(u+i,0):Gr(i,u-1)),t==t?function(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}(n,t,i):ir(n,ar,i,!0)},_e.lowerCase=ma,_e.lowerFirst=xa,_e.lt=Mf,_e.lte=Ff,_e.max=function(n){return n&&n.length?qe(n,Wa,tu):r},_e.maxBy=function(n,t){return n&&n.length?qe(n,Ti(t,2),tu):r},_e.mean=function(n){return cr(n,Wa)},_e.meanBy=function(n,t){return cr(n,Ti(t,2))},_e.min=function(n){return n&&n.length?qe(n,Wa,pu):r},_e.minBy=function(n,t){return n&&n.length?qe(n,Ti(t,2),pu):r},_e.stubArray=Za,_e.stubFalse=Ka,_e.stubObject=function(){return{}},_e.stubString=function(){return""},_e.stubTrue=function(){return!0},_e.multiply=Qa,_e.nth=function(n,t){return n&&n.length?du(n,qf(t)):r},_e.noConflict=function(){return Lt._===this&&(Lt._=gt),this},_e.noop=Da,_e.now=tf,_e.pad=function(n,t,r){n=Gf(n);var e=(t=qf(t))?zr(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return bi(Fr(u),r)+n+bi(Mr(u),r)},_e.padEnd=function(n,t,r){n=Gf(n);var e=(t=qf(t))?zr(n):0;return t&&e<t?n+bi(t-e,r):n},_e.padStart=function(n,t,r){n=Gf(n);var e=(t=qf(t))?zr(n):0;return t&&e<t?bi(t-e,r)+n:n},_e.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),Jr(Gf(n).replace(Wn,""),t||0)},_e.random=function(n,t,e){if(e&&"boolean"!=typeof e&&Gi(n,t,e)&&(t=e=r),e===r&&("boolean"==typeof t?(e=t,t=r):"boolean"==typeof n&&(e=n,n=r)),n===r&&t===r?(n=0,t=1):(n=Pf(n),t===r?(t=n,n=0):t=Pf(t)),n>t){var u=n;n=t,t=u}if(e||n%1||t%1){var i=Yr();return Gr(n+i*(t-n+Rt("1e-"+((i+"").length-1))),t)}return ju(n,t)},_e.reduce=function(n,t,r){var e=wf(n)?nr:hr,u=arguments.length<3;return e(n,Ti(t,4),r,u,Fe)},_e.reduceRight=function(n,t,r){var e=wf(n)?tr:hr,u=arguments.length<3;return e(n,Ti(t,4),r,u,Ne)},_e.repeat=function(n,t,e){return t=(e?Gi(n,t,e):t===r)?1:qf(t),Au(Gf(n),t)},_e.replace=function(){var n=arguments,t=Gf(n[0]);return n.length<3?t:t.replace(n[1],n[2])},_e.result=function(n,t,e){var u=-1,i=(t=Gu(t,n)).length;for(i||(i=1,n=r);++u<i;){var o=null==n?r:n[so(t[u])];o===r&&(u=i,o=e),n=If(o)?o.call(n):o}return n},_e.round=Xa,_e.runInContext=n,_e.sample=function(n){return(wf(n)?Oe:Ou)(n)},_e.size=function(n){if(null==n)return 0;if(xf(n))return Tf(n)?zr(n):n.length;var t=Pi(n);return t==G||t==nn?n.size:su(n).length},_e.snakeCase=ja,_e.some=function(n,t,e){var u=wf(n)?rr:Wu;return e&&Gi(n,t,e)&&(t=r),u(n,Ti(t,3))},_e.sortedIndex=function(n,t){return Cu(n,t)},_e.sortedIndexBy=function(n,t,r){return Bu(n,t,Ti(r,2))},_e.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=Cu(n,t);if(e<r&&gf(n[e],t))return e}return-1},_e.sortedLastIndex=function(n,t){return Cu(n,t,!0)},_e.sortedLastIndexBy=function(n,t,r){return Bu(n,t,Ti(r,2),!0)},_e.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=Cu(n,t,!0)-1;if(gf(n[r],t))return r}return-1},_e.startCase=Aa,_e.startsWith=function(n,t,r){return n=Gf(n),r=null==r?0:Ue(qf(r),0,n.length),t=Du(t),n.slice(r,r+t.length)==t},_e.subtract=nc,_e.sum=function(n){return n&&n.length?pr(n,Wa):0},_e.sumBy=function(n,t){return n&&n.length?pr(n,Ti(t,2)):0},_e.template=function(n,t,e){var u=_e.templateSettings;e&&Gi(n,t,e)&&(t=r),n=Gf(n),t=Yf({},t,u,Ii);var i,f,a=Yf({},t.imports,u.imports,Ii),c=fa(a),l=yr(a,c),s=0,h=t.interpolate||Hn,p="__p += '",v=et((t.escape||Hn).source+"|"+h.source+"|"+(h===In?Fn:Hn).source+"|"+(t.evaluate||Hn).source+"|$","g"),_="//# sourceURL="+(st.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++At+"]")+"\n";n.replace(v,function(t,r,e,u,o,a){return e||(e=u),p+=n.slice(s,a).replace(Jn,jr),r&&(i=!0,p+="' +\n__e("+r+") +\n'"),o&&(f=!0,p+="';\n"+o+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),s=a+t.length,t}),p+="';\n";var g=st.call(t,"variable")&&t.variable;if(g){if($n.test(g))throw new Xn(o)}else p="with (obj) {\n"+p+"\n}\n";p=(f?p.replace(dn,""):p).replace(bn,"$1").replace(wn,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Ra(function(){return nt(c,_+"return "+p).apply(r,l)});if(y.source=p,Of(y))throw y;return y},_e.times=function(n,t){if((n=qf(n))<1||n>L)return[];var r=B,e=Gr(n,B);t=Ti(t),n-=B;for(var u=vr(e,t);++r<n;)t(r);return u},_e.toFinite=Pf,_e.toInteger=qf,_e.toLength=Zf,_e.toLower=function(n){return Gf(n).toLowerCase()},_e.toNumber=Kf,_e.toSafeInteger=function(n){return n?Ue(qf(n),-L,L):0===n?n:0},_e.toString=Gf,_e.toUpper=function(n){return Gf(n).toUpperCase()},_e.trim=function(n,t,e){if((n=Gf(n))&&(e||t===r))return _r(n);if(!n||!(t=Du(t)))return n;var u=Sr(n),i=Sr(t);return Ju(u,br(u,i),wr(u,i)+1).join("")},_e.trimEnd=function(n,t,e){if((n=Gf(n))&&(e||t===r))return n.slice(0,Lr(n)+1);if(!n||!(t=Du(t)))return n;var u=Sr(n);return Ju(u,0,wr(u,Sr(t))+1).join("")},_e.trimStart=function(n,t,e){if((n=Gf(n))&&(e||t===r))return n.replace(Wn,"");if(!n||!(t=Du(t)))return n;var u=Sr(n);return Ju(u,br(u,Sr(t))).join("")},_e.truncate=function(n,t){var e=k,u=O;if(zf(t)){var i="separator"in t?t.separator:i;e="length"in t?qf(t.length):e,u="omission"in t?Du(t.omission):u}var o=(n=Gf(n)).length;if(Ar(n)){var f=Sr(n);o=f.length}if(e>=o)return n;var a=e-zr(u);if(a<1)return u;var c=f?Ju(f,0,a).join(""):n.slice(0,a);if(i===r)return c+u;if(f&&(a+=c.length-a),Bf(i)){if(n.slice(a).search(i)){var l,s=c;for(i.global||(i=et(i.source,Gf(Nn.exec(i))+"g")),i.lastIndex=0;l=i.exec(s);)var h=l.index;c=c.slice(0,h===r?a:h)}}else if(n.indexOf(Du(i),a)!=a){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+u},_e.unescape=function(n){return(n=Gf(n))&&jn.test(n)?n.replace(mn,Wr):n},_e.uniqueId=function(n){var t=++ht;return Gf(n)+t},_e.upperCase=ka,_e.upperFirst=Oa,_e.each=Vo,_e.eachRight=Go,_e.first=mo,Ta(_e,(Ya={},He(_e,function(n,t){st.call(_e.prototype,t)||(Ya[t]=n)}),Ya),{chain:!1}),_e.VERSION="4.17.21",Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){_e[n].placeholder=_e}),Kt(["drop","take"],function(n,t){be.prototype[n]=function(e){e=e===r?1:Vr(qf(e),0);var u=this.__filtered__&&!t?new be(this):this.clone();return u.__filtered__?u.__takeCount__=Gr(e,u.__takeCount__):u.__views__.push({size:Gr(e,B),type:n+(u.__dir__<0?"Right":"")}),u},be.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Kt(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==E||3==r;be.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:Ti(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),Kt(["head","last"],function(n,t){var r="take"+(t?"Right":"");be.prototype[n]=function(){return this[r](1).value()[0]}}),Kt(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");be.prototype[n]=function(){return this.__filtered__?new be(this):this[r](1)}}),be.prototype.compact=function(){return this.filter(Wa)},be.prototype.find=function(n){return this.filter(n).head()},be.prototype.findLast=function(n){return this.reverse().find(n)},be.prototype.invokeMap=ku(function(n,t){return"function"==typeof n?new be(this):this.map(function(r){return iu(r,n,t)})}),be.prototype.reject=function(n){return this.filter(sf(Ti(n)))},be.prototype.slice=function(n,t){n=qf(n);var e=this;return e.__filtered__&&(n>0||t<0)?new be(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==r&&(e=(t=qf(t))<0?e.dropRight(-t):e.take(t-n)),e)},be.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},be.prototype.toArray=function(){return this.take(B)},He(be.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),i=_e[u?"take"+("last"==t?"Right":""):t],o=u||/^find/.test(t);i&&(_e.prototype[t]=function(){var t=this.__wrapped__,f=u?[1]:arguments,a=t instanceof be,c=f[0],l=a||wf(t),s=function(n){var t=i.apply(_e,Xt([n],f));return u&&h?t[0]:t};l&&e&&"function"==typeof c&&1!=c.length&&(a=l=!1);var h=this.__chain__,p=!!this.__actions__.length,v=o&&!h,_=a&&!p;if(!o&&l){t=_?t:new be(this);var g=n.apply(t,f);return g.__actions__.push({func:No,args:[s],thisArg:r}),new de(g,h)}return v&&_?n.apply(this,f):(g=this.thru(s),v?u?g.value()[0]:g.value():g)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(n){var t=ot[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);_e.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(wf(u)?u:[],n)}return this[r](function(r){return t.apply(wf(r)?r:[],n)})}}),He(be.prototype,function(n,t){var r=_e[t];if(r){var e=r.name+"";st.call(oe,e)||(oe[e]=[]),oe[e].push({name:t,func:r})}}),oe[_i(r,g).name]=[{name:"wrapper",func:r}],be.prototype.clone=function(){var n=new be(this.__wrapped__);return n.__actions__=ui(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=ui(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=ui(this.__views__),n},be.prototype.reverse=function(){if(this.__filtered__){var n=new be(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},be.prototype.value=function(){var n=this.__wrapped__.value(),t=this.__dir__,r=wf(n),e=t<0,u=r?n.length:0,i=function(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Gr(t,n+o);break;case"takeRight":n=Vr(n,t-o)}}return{start:n,end:t}}(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Gr(a,this.__takeCount__);if(!r||!e&&u==a&&p==a)return Pu(n,this.__actions__);var v=[];n:for(;a--&&h<p;){for(var _=-1,g=n[c+=t];++_<s;){var y=l[_],d=y.iteratee,b=y.type,w=d(g);if(b==z)g=w;else if(!w){if(b==E)continue n;break n}}v[h++]=g}return v},_e.prototype.at=Po,_e.prototype.chain=function(){return Fo(this)},_e.prototype.commit=function(){return new de(this.value(),this.__chain__)},_e.prototype.next=function(){this.__values__===r&&(this.__values__=Nf(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?r:this.__values__[this.__index__++]}},_e.prototype.plant=function(n){for(var t,e=this;e instanceof ye;){var u=po(e);u.__index__=0,u.__values__=r,t?i.__wrapped__=u:t=u;var i=u;e=e.__wrapped__}return i.__wrapped__=n,t},_e.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof be){var t=n;return this.__actions__.length&&(t=new be(this)),(t=t.reverse()).__actions__.push({func:No,args:[Eo],thisArg:r}),new de(t,this.__chain__)}return this.thru(Eo)},_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=function(){return Pu(this.__wrapped__,this.__actions__)},_e.prototype.first=_e.prototype.head,sr&&(_e.prototype[sr]=function(){return this}),_e}();"function"==typeof n&&"object"==typeof n.amd&&n.amd?(Lt._=Cr,n(function(){return Cr})):Ct?((Ct.exports=Cr)._=Cr,Wt._=Cr):Lt._=Cr}).call(this);
},{"buffer":"fe91"}],"ftNt":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),e=this&&this.__createBinding||(Object.create?function(t,e,a,n){void 0===n&&(n=a),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[a]}})}:function(t,e,a,n){void 0===n&&(n=a),t[n]=e[a]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var o in t)"default"!==o&&Object.hasOwnProperty.call(t,o)&&e(n,t,o);return a(n,t),n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NearObjectColorStage=exports.ShaderUniformStage=exports.ObjectsScaleStage=exports.ObjectsAlphaStage=exports.CameraPositionTargetStage=exports.CameraFixedTargetStage=exports.ControlsStage=exports.RotationAwareStage=exports.RotationStage=exports.RotationFromVectorsStage=exports.PositionStage=exports.Stage=exports.OBJECT=exports.DIRECTION_VECTORS=exports.NEXT_POSITIONS=exports.KEY_POINTS=exports.ANIMATION_TYPE=void 0;var r,i,s,u,l,c=n(require("three")),d=o(require("@tweenjs/tween.js")),v=require("d3-interpolate"),p=require("d3"),f=require("lodash");!function(t){t.CAMERA_POSITION="Camera Position",t.CAMERA_ROTATION="Camera Rotation",t.FIXED_TARGET="Fixed Target",t.OBJECTS_SCALE="Objects Scale",t.OBJECTS_ALPHA="Objects Alpha",t.MAP_lAYER="Map layer",t.BAKGROUND_IMMERSIVE_OPACITY="Immersive Background Opacity",t.FEATURES_MATERIAL="Features Material",t.FEATURES_OPACITY="Features Opacity",t.CONTROLS="Controls",t.OBJECT_COLOR="Object Color",t.ROTATION_VECTOR="Camera Rotation Vector",t.CAMERA_POSITION_TARGET="Camera Position Target",t.CAMERA_ROTATION_AWARE="Camera Rotation Aware"}(r=exports.ANIMATION_TYPE||(exports.ANIMATION_TYPE={})),function(t){t.START_POS="Start Pos",t.END_POS="End Pos",t.CENTER="Center",t.TARGET_LOOK="Target",t.START_TARGET="Start Target"}(i=exports.KEY_POINTS||(exports.KEY_POINTS={})),function(t){t.LEFT="left",t.RIGHT="right",t.UP="up",t.DOWN="down"}(s=exports.NEXT_POSITIONS||(exports.NEXT_POSITIONS={})),function(t){t.NORTH="north",t.EAST="east",t.SOUTH="south",t.WEST="west",t.LOOK="look"}(u=exports.DIRECTION_VECTORS||(exports.DIRECTION_VECTORS={})),function(t){t.FEATURES="features",t.IMMERSIVE_BACKGROUND="immersive_background",t.TEXTURED_FEATURES="textured_features"}(l=exports.OBJECT||(exports.OBJECT={}));var h=function(){function t(t,e,a){this.duration=t,this.order=e,this.type=a,this.attributes=new Map}return t.prototype.start=function(t){null!=t?this.tween.start(t):this.tween.start()},t.prototype.startReverse=function(t){null!=t?this.reverseTween.start(t):this.reverseTween.start()},t.prototype.createAnimation=function(t,e,a){},t.prototype.createFromObject=function(t){},t.prototype.getCoordsFromKeyPoints=function(t,e,a){var n={x:null,y:null,z:null};if(f.isObject(t))for(var o in t)for(var r=0,s=Object.values(i);r<s.length;r++){var u=s[r];t[o]==u&&(n[o]=e.get(u)[o])}else for(var l=0,c=Object.values(a);l<c.length;l++){t==(u=c[l])&&(n.x=e.get(u).x,n.y=e.get(u).y,n.z=e.get(u).z)}return n},t}();exports.Stage=h;var g=function(e){function a(t,a){var n=e.call(this,t.duration,t.order,r.CAMERA_POSITION)||this;return n.startPosition=t.startPosition,n.endPosition=t.endPosition,n.positionObject=a,n.attributes.set("startPosition",n.startPosition),n.attributes.set("endPosition",n.endPosition),n}return t(a,e),a.prototype.createAnimation=function(t){var e={x:null,y:null,z:null},a={x:null,y:null,z:null};for(var n in this.startPosition)for(var o=0,r=Object.values(i);o<r.length;o++){var s=r[o];this.startPosition[n]==s&&(e[n]=t.get(s)[n])}for(var n in this.endPosition)for(var u=0,l=Object.values(i);u<l.length;u++){s=l[u];this.endPosition[n]==s&&(a[n]=t.get(s)[n])}var c=this;this.tween=new d.default.Tween(e).to(a,1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){c.positionObject.set(e.x,e.y,e.z)});var v={x:e.x,y:e.y,z:e.z};this.reverseTween=new d.default.Tween(a).to(v,1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){c.positionObject.set(a.x,a.y,a.z)})},a}(h);exports.PositionStage=g;var O=function(e){function a(t,a){var n=e.call(this,t.duration,t.order,r.ROTATION_VECTOR)||this;return n.quaternionObject=a,n.startVector=t.startVector,n.endVector=t.endVector,n.attributes.set("startVector",n.startVector),n.attributes.set("endVector",n.endVector),n}return t(a,e),a.prototype.createAnimation=function(t,e,a){var n=this.getCoordsFromKeyPoints(this.startVector,a,u),o=this.getCoordsFromKeyPoints(this.endVector,a,u),r=this.quaternionObject.clone(),i=new c.Quaternion;i.setFromUnitVectors(new c.Vector3(n.x,n.y,n.z),new c.Vector3(o.x,o.y,o.z));var s={value:0},l=this;this.tween=new d.default.Tween(s).to({value:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){console.log("quaternion!"),c.Quaternion.slerp(r,i,l.quaternionObject,s.value)}).onComplete(function(){l.quaternionObject.copy(i)}),this.reverseTween=new d.default.Tween(s).to({value:0},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){console.log("quaternion!"),c.Quaternion.slerp(r,i,l.quaternionObject,s.value)}).onComplete(function(){l.quaternionObject.copy(r)})},a}(h);exports.RotationFromVectorsStage=O;var T=function(e){function a(t,a){var n=e.call(this,t.duration,t.order,r.CAMERA_ROTATION)||this;return n.lookAtEnd=t.lookAtEnd,n.startPosition=t.startPosition,n.quaternionObject=a,n.attributes.set("startPosition",n.startPosition),n.attributes.set("lookAtEnd",n.lookAtEnd),n}return t(a,e),a.prototype.createAnimation=function(t){var e={x:null,y:null,z:null},a={x:null,y:null,z:null};for(var n in this.lookAtEnd)for(var o=0,r=Object.values(i);o<r.length;o++){var s=r[o];this.lookAtEnd[n]==s&&(e[n]=t.get(s)[n])}for(var n in this.startPosition)for(var u=0,l=Object.values(i);u<l.length;u++){s=l[u];this.startPosition[n]==s&&(a[n]=t.get(s)[n])}var v=new c.Camera;v.up=new c.Vector3(0,0,1);var p=new c.Quaternion,f=new c.Quaternion,h={t:0},g=this;this.tween=new d.default.Tween(h).to({t:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onStart(function(){v.position.copy(new c.Vector3(a.x,a.y,a.z)),v.lookAt(e.x,e.y,e.z),p.copy(g.quaternionObject),f.copy(v.quaternion)}).onUpdate(function(){console.log("quaternion!"),c.Quaternion.slerp(p,f,g.quaternionObject,h.t)}).onComplete(function(){g.quaternionObject.copy(f)});var O={t:0};this.reverseTween=new d.default.Tween(O).to({t:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onStart(function(){}).onUpdate(function(){console.log("quaternion!"),c.Quaternion.slerp(f,p,g.quaternionObject,O.t)}).onComplete(function(){g.quaternionObject.copy(p)})},a}(h);exports.RotationStage=T;var y=function(e){function a(t,a){var n=e.call(this,t.duration,t.order,r.CAMERA_ROTATION_AWARE)||this;return n.lookAtEnd=t.lookAtEnd,n.startPosition=t.startPosition,n.camera=a,n.attributes.set("startPosition",n.startPosition),n.attributes.set("lookAtEnd",n.lookAtEnd),n}return t(a,e),a.prototype.createAnimation=function(t){var e={x:null,y:null,z:null},a={x:null,y:null,z:null};for(var n in this.lookAtEnd)for(var o=0,r=Object.values(i);o<r.length;o++){var s=r[o];this.lookAtEnd[n]==s&&(e[n]=t.get(s)[n])}for(var n in this.startPosition)for(var u=0,l=Object.values(i);u<l.length;u++){s=l[u];this.startPosition[n]==s&&(a[n]=t.get(s)[n])}var v=new c.Camera;v.up=new c.Vector3(0,0,1);var p=new c.Quaternion,f=new c.Quaternion,h={t:0},g=this;this.tween=new d.default.Tween(h).to({t:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onStart(function(){v.position.copy(new c.Vector3(a.x,a.y,a.z)),v.lookAt(e.x,e.y,e.z),p.copy(g.camera.quaternion),f.copy(v.quaternion)}).onUpdate(function(){console.log("quaternion!"),c.Quaternion.slerp(p,f,g.camera.quaternion,h.t),g.camera.updateMatrix(),g.camera.updateMatrixWorld();var t=new c.Frustum;t.setFromProjectionMatrix((new c.Matrix4).multiplyMatrices(g.camera.projectionMatrix,g.camera.matrixWorldInverse));var n=new c.Vector3(e.x,e.y,e.z);t.containsPoint(n)?t.containsPoint(new c.Vector3(a.x,a.y,a.z))?console.log("contains!"):console.log("missing one!"):console.log("missing!")}).onComplete(function(){g.camera.quaternion.copy(f)});var O={t:0},T=new c.Camera,y=new c.Quaternion,m=new c.Quaternion;T.position.copy(new c.Vector3(a.x,a.y,a.z)),T.lookAt(e.x,e.y,e.z),y.copy(T.quaternion),m.copy(g.camera.quaternion),this.reverseTween=new d.default.Tween(O).to({t:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onStart(function(){}).onUpdate(function(){console.log("quaternion!"),c.Quaternion.slerp(y,m,g.camera.quaternion,O.t)}).onComplete(function(){g.camera.quaternion.copy(m)})},a}(h);exports.RotationAwareStage=y;var m=function(e){function a(t,a,n){var o=e.call(this,t.duration,t.order,r.CONTROLS)||this;return o.startPosition=t.startPosition,o.endPosition=t.endPosition,o.target=t.target,o.startTarget=t.startTarget,o.camera=a,o.controls=n,o.attributes.set("startPosition",o.startPosition),o.attributes.set("endPosition",o.endPosition),o.attributes.set("target",o.target),o.attributes.set("startTarget",o.startTarget),o}return t(a,e),a.prototype.createAnimation=function(t){var e=this.getCoordsFromKeyPoints(this.endPosition,t,i),a=this.getCoordsFromKeyPoints(this.startPosition,t,i),n=this.getCoordsFromKeyPoints(this.target,t,i),o=this.getCoordsFromKeyPoints(this.startTarget,t,i),r=this,s={value:0};Math.abs(a.x-o.x)<.001&&Math.abs(a.y-o.y)<.001&&(a.y+=.1,a.x-=.1,r.camera.position.set(a.x,a.y,a.z),r.controls.update()),this.tween=new d.default.Tween(s).to({value:1},1e3*this.duration).easing(d.default.Easing.Linear.None).onStart(function(){}).onUpdate(function(){r.camera.position.set(a.x*(1-s.value)+e.x*s.value,a.y*(1-s.value)+e.y*s.value,a.z*(1-s.value)+e.z*s.value),r.controls.target.set(o.x*(1-s.value)+n.x*s.value,o.y*(1-s.value)+n.y*s.value,o.z*(1-s.value)+n.z*s.value),console.log("target",r.controls.target),r.controls.update()}).onComplete(function(){console.log("fixed target end!")}),this.reverseTween=new d.default.Tween(s).to({value:0},1e3*this.duration).easing(d.default.Easing.Quadratic.In).onUpdate(function(){r.camera.position.set(a.x*(1-s.value)+e.x*s.value,a.y*(1-s.value)+e.y*s.value,a.z*(1-s.value)+e.z*s.value),r.controls.target.set(o.x*(1-s.value)+n.x*s.value,o.y*(1-s.value)+n.y*s.value,o.z*(1-s.value)+n.z*s.value),r.controls.update()})},a}(h);exports.ControlsStage=m;var x=function(e){function a(t,a,n,o){var i=e.call(this,t.duration,t.order,r.FIXED_TARGET)||this;return i.startPosition=t.startPosition,i.endPosition=t.endPosition,i.target=t.target,i.positionObject=a,i.quaternionObject=n,i.camera=o,i.attributes.set("startPosition",i.startPosition),i.attributes.set("endPosition",i.endPosition),i.attributes.set("target",i.target),i}return t(a,e),a.prototype.createAnimation=function(t){var e={x:null,y:null,z:null},a={x:null,y:null,z:null},n={x:null,y:null,z:null};for(var o in this.startPosition)for(var r=0,s=Object.values(i);r<s.length;r++){var u=s[r];this.startPosition[o]==u&&(a[o]=t.get(u)[o])}for(var o in this.endPosition)for(var l=0,v=Object.values(i);l<v.length;l++){u=v[l];this.endPosition[o]==u&&(e[o]=t.get(u)[o])}for(var o in this.target)for(var p=0,f=Object.values(i);p<f.length;p++){u=f[p];this.target[o]==u&&(n[o]=t.get(u)[o])}var h=this,g=new c.Camera;g.up=new c.Vector3(0,0,1),this.tween=new d.default.Tween(a).to(e,1e3*this.duration).easing(d.default.Easing.Quadratic.In).onUpdate(function(){h.positionObject.set(a.x,a.y,a.z),g.position.copy(new c.Vector3(a.x,a.y,a.z)),g.lookAt(n.x,n.y,n.z),h.quaternionObject.copy(g.quaternion)}).onComplete(function(){console.log("fixed target end!")});var O={x:null,y:null,z:null};for(var o in this.startPosition)for(var T=0,y=Object.values(i);T<y.length;T++){u=y[T];this.startPosition[o]==u&&(O[o]=t.get(u)[o])}this.reverseTween=new d.default.Tween(e).to(O,1e3*this.duration).easing(d.default.Easing.Quadratic.In).onUpdate(function(){h.positionObject.set(e.x,e.y,e.z),g.position.copy(new c.Vector3(e.x,e.y,e.z)),g.lookAt(n.x,n.y,n.z),h.quaternionObject.copy(g.quaternion)}).onComplete(function(){console.log("fixed target end!")})},a}(h);exports.CameraFixedTargetStage=x;var b=function(e){function a(t,a,n){var o=e.call(this,t.duration,t.order,r.CAMERA_POSITION_TARGET)||this;return o.startPosition=t.startPosition,o.endPosition=t.endPosition,o.target=t.target,o.startTarget=t.startTarget,o.camera=a,o.controls=n,o.attributes.set("startPosition",o.startPosition),o.attributes.set("endPosition",o.endPosition),o.attributes.set("target",o.target),o.attributes.set("startTarget",o.startTarget),o}return t(a,e),a.prototype.createAnimation=function(t){var e=this.getCoordsFromKeyPoints(this.endPosition,t,i),a=this.getCoordsFromKeyPoints(this.startPosition,t,i),n=this.getCoordsFromKeyPoints(this.target,t,i),o=this.getCoordsFromKeyPoints(this.startTarget,t,i),r=this,s={value:0};Math.abs(a.x-o.x)<.001&&Math.abs(a.y-o.y)<.001&&(r.camera.rotateUp(.01),r.camera.position=new c.Vector3(a.x,a.y,a.z),r.camera.target=new c.Vector3(o.x,o.y,o.z),r.camera.update(),a.x=r.camera.camera.position.x,a.y=r.camera.camera.position.y,a.z=r.camera.camera.position.z);new c.Vector3,new c.Vector3;this.tween=new d.default.Tween(s).to({value:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onStart(function(){}).onUpdate(function(){r.camera.position.set(a.x*(1-s.value)+e.x*s.value,a.y*(1-s.value)+e.y*s.value,a.z*(1-s.value)+e.z*s.value),r.camera.target.set(o.x*(1-s.value)+n.x*s.value,o.y*(1-s.value)+n.y*s.value,o.z*(1-s.value)+n.z*s.value),r.camera.update()}).onComplete(function(){console.log("fixed target end!")}),this.reverseTween=new d.default.Tween(s).to({value:0},1e3*this.duration).easing(d.default.Easing.Quadratic.In).onUpdate(function(){r.camera.position.set(a.x*(1-s.value)+e.x*s.value,a.y*(1-s.value)+e.y*s.value,a.z*(1-s.value)+e.z*s.value),r.camera.target.set(o.x*(1-s.value)+n.x*s.value,o.y*(1-s.value)+n.y*s.value,o.z*(1-s.value)+n.z*s.value),r.camera.update()})},a}(h);exports.CameraPositionTargetStage=b;var w=function(e){function a(t,a){var n=e.call(this,t.duration,t.order,r.OBJECTS_ALPHA)||this;return n.startAlpha=t.startAlpha,n.endAlpha=t.endAlpha,n.objects=a,n.attributes.set("startAlpha",n.startAlpha),n.attributes.set("endAlpha",n.endAlpha),n}return t(a,e),a.prototype.createAnimation=function(t){var e={value:this.startAlpha.value},a=this;this.tween=new d.default.Tween(e).to(this.endAlpha,1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=0,n=a.objects;t<n.length;t++){var o=n[t];o.material&&(o.material.opacity=e.value)}});var n={value:this.endAlpha.value};this.reverseTween=new d.default.Tween(n).to(this.startAlpha,1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=0,e=a.objects;t<e.length;t++){var o=e[t];o.material&&(o.material.opacity=n.value)}})},a}(h);exports.ObjectsAlphaStage=w;var A=function(e){function a(t,a,n){var o=e.call(this,t.duration,t.order,r.OBJECTS_SCALE)||this;return o.startScale=t.startScale,o.endScale=t.endScale,o.objects=a,o.attribute=n,o.attributes.set("attribute",o.attribute),o.attributes.set("startScale",o.startScale),o.attributes.set("endScale",o.endScale),o}return t(a,e),a.prototype.createAnimation=function(t){var e=this,a={x:this.startScale.x,y:this.startScale.y,z:this.startScale.z},n={x:this.endScale.x,y:this.endScale.y,z:this.endScale.z};this.tween=new d.default.Tween(a).to(this.endScale,1e3*e.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=0,n=e.objects;t<n.length;t++){var o=n[t];o.material&&o.scale.set(a.x,a.y,a.z*o.userData[e.attribute.value])}}),this.reverseTween=new d.default.Tween(n).to(this.startScale,1e3*e.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=0,a=e.objects;t<a.length;t++){var o=a[t];o.material&&o.scale.set(n.x,n.y,n.z*o.userData[e.attribute.value])}})},a}(h);exports.ObjectsScaleStage=A;var P=function(e){function a(t,a,n){var o=e.call(this,t.duration,t.order,r.MAP_lAYER)||this;return o.startValue=t.startValue,o.endValue=t.endValue,o.objects=a,o.uniformName=n,o.attributes.set("startValue",o.startValue),o.attributes.set("endValue",o.endValue),o}return t(a,e),a.prototype.createAnimation=function(t){var e=this,a={value:this.startValue.value},n={value:this.endValue.value};this.tween=new d.default.Tween(a).to(n,1e3*e.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=0,n=e.objects;t<n.length;t++){var o=n[t];o.material&&null!=o.material.uniforms&&(o.material.uniforms[e.uniformName]=a)}}),this.reverseTween=new d.default.Tween(n).to(this.startValue,1e3*e.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=0,a=e.objects;t<a.length;t++){var o=a[t];o.material&&null!=o.material.uniforms&&(o.material.uniforms[e.uniformName]=n)}})},a}(h);exports.ShaderUniformStage=P;var E=function(e){function a(t){var a=e.call(this,t.duration,t.order,r.OBJECT_COLOR)||this;return a.startColor=t.startColor,a.endColor=t.endColor,a.object=t.object,a.attributes.set("startColor",a.startColor),a.attributes.set("endColor",a.endColor),a.attributes.set("object",a.object),a}return t(a,e),a.prototype.createAnimation=function(t,e){var a={value:0},n=this;this.tween=new d.default.Tween(a).to({value:1},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=v.interpolateLab(n.startColor.value,n.endColor.value)(a.value),o=p.rgb(t).hex(),r=0,i=e.get(n.object);r<i.length;r++){i[r].material.color.set(o)}});this.reverseTween=new d.default.Tween({value:1}).to({value:0},1e3*this.duration).easing(d.default.Easing.Quadratic.InOut).onUpdate(function(){for(var t=v.interpolateLab(n.startColor.value,n.endColor.value)(a.value),o=p.rgb(t).hex(),r=0,i=e.get(n.object);r<i.length;r++){i[r].material.color.set(o)}})},a}(h);exports.NearObjectColorStage=E;
},{"three":"lKFo","@tweenjs/tween.js":"CM2Q","d3-interpolate":"y8gx","d3":"zztR","lodash":"hKJs"}],"Xnuv":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BUILDINGS_SOURCE=exports.INTERACTION_MODE=exports.ORTHO=exports.BDUNI=exports.SLOPES=exports.SCAN=exports.PLAN_IGN_2=exports.PLAN_IGN=exports.NOT_COUPLED=exports.COUPLED=exports.TARGET_POSITION_Z=exports.TARGET_POSITION_Y=exports.TARGET_POSITION_X=exports.CAMERA_POSITION_Z=exports.CAMERA_POSITION_Y=exports.CAMERA_POSITION_X=exports.BUILDING_ALPHA=exports.BUILDING_HEIGHT=exports.TARGET_POSITION=exports.CAMERA_POSITION=exports.proj2154=exports.proj3857=exports.proj4326=void 0;var o,e,I=t(require("proj4"));I.default.defs("EPSG:2154","+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),exports.proj4326=I.default.defs("EPSG:4326"),exports.proj3857=I.default.defs("EPSG:3857"),exports.proj2154=I.default.defs("EPSG:2154"),exports.CAMERA_POSITION="cameraPosition",exports.TARGET_POSITION="targetPosition",exports.BUILDING_HEIGHT="buildingHeight",exports.BUILDING_ALPHA="buildingAlpha",exports.CAMERA_POSITION_X="cameraPositionX",exports.CAMERA_POSITION_Y="cameraPositionY",exports.CAMERA_POSITION_Z="cameraPositionZ",exports.TARGET_POSITION_X="targetPositionX",exports.TARGET_POSITION_Y="targetPositionY",exports.TARGET_POSITION_Z="targetPositionZ",exports.COUPLED="Coupled",exports.NOT_COUPLED="Not Coupled",exports.PLAN_IGN="GEOGRAPHICALGRIDSYSTEMS.PLANIGN",exports.PLAN_IGN_2="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",exports.SCAN="GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD",exports.SLOPES="GEOGRAPHICALGRIDSYSTEMS.SLOPES.MOUNTAIN",exports.BDUNI="GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",exports.ORTHO="ORTHOIMAGERY.ORTHOPHOTOS",function(t){t[t.CAMERA_COUPLED=0]="CAMERA_COUPLED",t[t.GO_TO=1]="GO_TO",t[t.DRAG_GO=2]="DRAG_GO"}(o=exports.INTERACTION_MODE||(exports.INTERACTION_MODE={})),function(t){t[t.VECTOR_TILES=0]="VECTOR_TILES",t[t.WFS=1]="WFS"}(e=exports.BUILDINGS_SOURCE||(exports.BUILDINGS_SOURCE={}));
},{"proj4":"sW4w"}],"r8Tc":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&t(n,e,o);return r(n,e),n},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCoordsFromKeyPoints=exports.interpolateValue01=exports.interpolateFromTo=exports.interpolateVectors=exports.getObjectsOnRadius=exports.getClosestObjectToPoint=exports.downloadJSON=exports.getTiles=exports.getTilesA=exports.ZOOM_RES_L93=void 0;var i=require("./AnimationStage"),s=n(require("three")),l=n(require("./Constants")),c=require("lodash");function u(e,t){return o(this,void 0,void 0,function(){var r,n,o,i,s,l,c,u,f,h,p,m,v,x,b,w,d,y,O,T,S,M,R,_,P,j,L,E,C,N,U;return a(this,function(a){switch(a.label){case 0:return r="PM",n=18,o=new URL("https://wxs.ign.fr/choisirgeoportail/geoportail/wmts"),i={service:"WMTS",request:"GetCapabilities"},s=0,l=0,o.search=new URLSearchParams(i).toString(),[4,fetch(o)];case 1:return[4,a.sent().text()];case 2:for(c=a.sent(),u=new DOMParser,f=u.parseFromString(c,"application/xml"),h=0,p=f.getElementsByTagName("Contents")[0].getElementsByTagName("TileMatrixSet");h<p.length;h++)if((m=p[h]).children.length>0)for(v=0,x=m.getElementsByTagName("ows:Identifier");v<x.length;v++)if((b=x[v]).parentElement==m&&b.textContent==r)for(w=0,d=m.getElementsByTagName("TileMatrix");w<d.length;w++)if(y=d[w],O=y.getElementsByTagName("ows:Identifier")[0],parseInt(O.textContent)==n)return T=y.getElementsByTagName("TopLeftCorner")[0].textContent.split(" "),s=parseFloat(T[0]),l=parseFloat(T[1]),S=[e[0],e[1]],M=[e[2],e[3]],R=S[0]-s,_=M[0]-s,P=l-S[1],j=l-M[1],L=256*exports.ZOOM_RES_L93[n],E=Math.floor(P/L),C=Math.floor(j/L),N=Math.floor(R/L),U=Math.floor(_/L),g(E,N,C,U,L,s,l,n,r,t),[2,[N*L+s,l-E*L,U*L+s,l-C*L]];return[2]}})})}function f(e,t){var r=new URL("https://wxs.ign.fr/choisirgeoportail/geoportail/wmts"),n=0,o=0;r.search=new URLSearchParams({service:"WMTS",request:"GetCapabilities"}).toString(),fetch(r).then(function(e){return e.text()}).then(function(r){for(var a=0,i=(new DOMParser).parseFromString(r,"application/xml").getElementsByTagName("Contents")[0].getElementsByTagName("TileMatrixSet");a<i.length;a++){var s=i[a];if(s.children.length>0)for(var l=0,c=s.getElementsByTagName("ows:Identifier");l<c.length;l++){var u=c[l];if(u.parentElement==s&&"PM"==u.textContent)for(var f=0,h=s.getElementsByTagName("TileMatrix");f<h.length;f++){var p=h[f],g=p.getElementsByTagName("ows:Identifier")[0];if(18==parseInt(g.textContent)){var v=p.getElementsByTagName("TopLeftCorner")[0].textContent.split(" ");n=parseFloat(v[0]),o=parseFloat(v[1]);var x=[e[0],e[1]],b=[e[2],e[3]],w=x[0]-n,d=b[0]-n,y=o-x[1],O=o-b[1],T=256*exports.ZOOM_RES_L93[18],S=Math.floor(y/T),M=Math.floor(O/T),R=Math.floor(w/T),_=Math.floor(d/T);return m(S,R,M,_,T,n,o,18,"PM",t),[R*T+n,o-S*T,_*T+n,o-M*T]}}}}})}function h(t,r,n,i,s){return o(this,void 0,void 0,function(){var o;return a(this,function(a){switch(a.label){case 0:return t.search=new URLSearchParams(e(e({},n),{layer:r,tilerow:i,tilecol:s})).toString(),[4,fetch(t)];case 1:return[4,a.sent().blob()];case 2:return o=a.sent(),[2,URL.createObjectURL(o)]}})})}function p(e,t,r,n,i){return o(this,void 0,void 0,function(){var o,s,l,c;return a(this,function(a){switch(a.label){case 0:for(o=[],s=0,l=t;s<l.length;s++)c=l[s],o.push(h(e,c,r,n,i));return[4,Promise.all(o)];case 1:return[2,a.sent()]}})})}function g(e,t,r,n,i,s,c,u,f,h){return o(this,void 0,void 0,function(){var o,g,m,v,x,b;return a(this,function(a){switch(a.label){case 0:for(o=new URL("https://wxs.ign.fr/choisirgeoportail/geoportail/wmts"),g=[l.SCAN,l.ORTHO],m={service:"WMTS",request:"GetTile",version:"1.0.0",style:"normal",tilematrixset:f,tilematrix:u,format:"image/jpeg"},v=[],x=function(e){for(var r=function(t){v.push(p(o,g,m,e,t).then(function(r){h([t*i+s,c-e*i],r,i)}))},a=t;a<=n;a++)r(a)},b=r;b<=e;b++)x(b);return[4,Promise.all(v)];case 1:return a.sent(),[2,!0]}})})}function m(t,r,n,i,s,c,u,f,h,p){return o(this,void 0,void 0,function(){var o,g,m,v,x,b,w,d,y,O;return a(this,function(a){switch(a.label){case 0:o=n,a.label=1;case 1:if(!(o<=t))return[3,9];g=r,a.label=2;case 2:return g<=i?(m=new URL("https://wxs.ign.fr/choisirgeoportail/geoportail/wmts"),v=l.SCAN,x="ORTHOIMAGERY.ORTHOPHOTOS",b={service:"WMTS",request:"GetTile",version:"1.0.0",style:"normal",tilematrixset:h,tilematrix:f,tilerow:o,tilecol:g,format:"image/jpeg"},m.search=new URLSearchParams(e(e({},b),{layer:v})).toString(),[4,fetch(m)]):[3,8];case 3:return[4,a.sent().blob()];case 4:return w=a.sent(),d=URL.createObjectURL(w),m.search=new URLSearchParams(e(e({},b),{layer:x})).toString(),[4,fetch(m)];case 5:return[4,a.sent().blob()];case 6:y=a.sent(),O=URL.createObjectURL(y),p([g*s+c,u-o*s],[d,O],s),a.label=7;case 7:return g++,[3,2];case 8:return o++,[3,1];case 9:return[2]}})})}function v(e,t,r){var n=document.createElement("a"),o=new Blob([e],{type:r});n.href=URL.createObjectURL(o),n.download=t,n.click()}function x(e,t,r,n){switch(r){case i.NEXT_POSITIONS.RIGHT:var o=new s.Vector3(n.y,-n.x,n.z);o.normalize();for(var a=new s.Raycaster,l=0,c=[];0==c.length;){var u=new s.Vector3(e.x,e.y+l,1);a.set(u,o),c=a.intersectObjects(t),l+=1}return c[0].object}}function b(e,t,r){for(var n=[],o=0,a=t;o<a.length;o++){var i=a[o];i.position.distanceTo(e)<r&&n.push(i)}return n}function w(e,t,r){var n=e.x*(1-r)+t.x*r,o=e.y*(1-r)+t.y*r,a=e.z*(1-r)+t.z*r;return new s.Vector3(n,o,a)}function d(e,t,r,n,o){return t-e!=0?r+(n-r)*(o-e)/(t-e):r+(n-r)*(o-e)}function y(e,t,r){return e*(1-r)+t*r}function O(e,t,r){var n={x:null,y:null,z:null};if(c.isObject(e))for(var o in e)for(var a=0,i=Object.values(r);a<i.length;a++){var s=i[a];e[o]==s&&(n[o]=t.get(s)[o])}else for(var l=0,u=Object.values(r);l<u.length;l++){e==(s=u[l])&&(n.x=t.get(s).x,n.y=t.get(s).y,n.z=t.get(s).z)}return n}exports.ZOOM_RES_L93=[156543.033928041,78271.5169640205,39135.7584820102,19567.8792410051,9783.9396205026,4891.9698102513,2445.9849051256,1222.9924525628,611.4962262814,305.7481131407,152.8740565704,76.4370282852,38.2185141426,19.1092570713,9.5546285356,4.7773142678,2.3886571339,1.194328567,.5971642835,.2985821417,.1492910709,.0746455354],exports.getTilesA=u,exports.getTiles=f,exports.downloadJSON=v,exports.getClosestObjectToPoint=x,exports.getObjectsOnRadius=b,exports.interpolateVectors=w,exports.interpolateFromTo=d,exports.interpolateValue01=y,exports.getCoordsFromKeyPoints=O;
},{"./AnimationStage":"ftNt","three":"lKFo","./Constants":"Xnuv","lodash":"hKJs"}],"lvw5":[function(require,module,exports) {
var define;
var global = arguments[3];
var process = require("process");
var t,e=arguments[3],r=require("process");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(r){if("object"===("undefined"==typeof exports?"undefined":n(exports))&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof t&&t.amd)t([],r);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).GeoportalWfsClient=r()}}(function(){return function(){return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){return o(e[s][1][t]||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}}()({1:[function(t,e,r){e.exports=t("./src/Client.js")},{"./src/Client.js":41}],2:[function(t,e,r){"use strict";function o(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=function t(e){var r={};if(!e)return r;Object.keys(e).forEach(function(o){var i=e[o];"object"===n(i)?null===i?r[o]=null:Array.isArray(i)?r[o]=i.map(function(t){return t}):r[o]=t(i):r[o]=i});return r}(t.properties),e.geometry=i(t.geometry),e}function i(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return i(t)}),e):(e.coordinates=function t(e){var r=e;if("object"!==n(r[0]))return r.slice();return r.map(function(e){return t(e)})}(t.coordinates),e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return o(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(t){return o(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return i(t);default:throw new Error("unknown GeoJSON type")}}},{}],3:[function(t,e,r){"use strict";var o,i=t("@turf/meta"),s=t("@turf/helpers"),a=(o=t("@turf/clone"))&&"object"===n(o)&&"default"in o?o.default:o;e.exports=function(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=a(t)),i.coordEach(t,function(t){var e=t[0],r=t[1];t[0]=r,t[1]=e}),t}},{"@turf/clone":2,"@turf/helpers":4,"@turf/meta":5}],4:[function(t,e,r){"use strict";function o(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!g(t[0])||!g(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,r)}function s(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var s=i[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,r)}function a(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,r)}function u(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function c(t,e,r){return void 0===r&&(r={}),o({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),o({type:"MultiPoint",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),o({type:"MultiPolygon",coordinates:t},e,r)}function p(t,e){void 0===e&&(e="kilometers");var n=r.factors[e];if(!n)throw new Error(e+" units is invalid");return t*n}function f(t,e){void 0===e&&(e="kilometers");var n=r.factors[e];if(!n)throw new Error(e+" units is invalid");return t/n}function d(t){return 180*(t%(2*Math.PI))/Math.PI}function g(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=6371008.8,r.factors={centimeters:100*r.earthRadius,centimetres:100*r.earthRadius,degrees:r.earthRadius/111325,feet:3.28084*r.earthRadius,inches:39.37*r.earthRadius,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:1e3*r.earthRadius,millimetres:1e3*r.earthRadius,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius/1.0936},r.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r.earthRadius,yards:1/1.0936},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},r.feature=o,r.geometry=function(t,e,r){switch(void 0===r&&(r={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return s(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return c(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},r.point=i,r.points=function(t,e,r){return void 0===r&&(r={}),u(t.map(function(t){return i(t,e)}),r)},r.polygon=s,r.polygons=function(t,e,r){return void 0===r&&(r={}),u(t.map(function(t){return s(t,e)}),r)},r.lineString=a,r.lineStrings=function(t,e,r){return void 0===r&&(r={}),u(t.map(function(t){return a(t,e)}),r)},r.featureCollection=u,r.multiLineString=c,r.multiPoint=l,r.multiPolygon=h,r.geometryCollection=function(t,e,r){return void 0===r&&(r={}),o({type:"GeometryCollection",geometries:t},e,r)},r.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},r.radiansToLength=p,r.lengthToRadians=f,r.lengthToDegrees=function(t,e){return d(f(t,e))},r.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},r.radiansToDegrees=d,r.degreesToRadians=function(t){return t%360*Math.PI/180},r.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return p(f(t,e),r)},r.convertArea=function(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var o=r.areaFactors[e];if(!o)throw new Error("invalid original units");var i=r.areaFactors[n];if(!i)throw new Error("invalid final units");return t/o*i},r.isNumber=g,r.isObject=function(t){return!!t&&t.constructor===Object},r.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!g(t))throw new Error("bbox must only contain numbers")})},r.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(n(t)))throw new Error("id must be a number or a string")}},{}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("@turf/helpers");function o(t,e,r){if(null!==t)for(var n,i,s,a,u,c,l,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,v=0;v<y;v++){u=(h=!!(l=g?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var N=0;N<u;N++){var E=0,w=0;if(null!==(a=h?l.geometries[N]:l)){c=a.coordinates;var b=a.type;switch(p=!r||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(c,f,v,E,w))return!1;f++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===e(c[n],f,v,E,w))return!1;f++,"MultiPoint"===b&&E++}"LineString"===b&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-p;i++){if(!1===e(c[n][i],f,v,E,w))return!1;f++}"MultiLineString"===b&&E++,"Polygon"===b&&w++}"Polygon"===b&&E++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(w=0,i=0;i<c[n].length;i++){for(s=0;s<c[n][i].length-p;s++){if(!1===e(c[n][i][s],f,v,E,w))return!1;f++}w++}E++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===o(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function a(t,e){var r,n,o,i,s,a,u,c,l,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(r=0;r<g;r++){for(a=f?t.features[r].geometry:d?t.geometry:t,c=f?t.features[r].properties:d?t.properties:{},l=f?t.features[r].bbox:d?t.bbox:void 0,h=f?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=u?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,p,c,l,h))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],p,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,h))return!1;p++}}function u(t,e){a(t,function(t,r,o,i,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,o,{bbox:i,id:s}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:a,coordinates:t.coordinates[c]};if(!1===e(n.feature(l,o),r,c))return!1}})}function c(t,e){u(t,function(t,r,i){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var u,c=0,l=0,h=0;return!1!==o(t,function(o,a,p,f,d){if(void 0===u||r>c||f>l||d>h)return u=o,c=r,l=f,h=d,void(s=0);var g=n.lineString([u,o],t.properties);if(!1===e(g,r,i,d,s))return!1;s++,u=o})&&void 0}}})}function l(t,e){if(!t)throw new Error("geojson is required");u(t,function(t,r,o){if(null!==t.geometry){var i=t.geometry.type,s=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,o,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(n.lineString(s[a],t.properties),r,o,a))return!1}}})}r.coordEach=o,r.coordReduce=function(t,e,r,n){var i=r;return o(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i},r.propEach=i,r.propReduce=function(t,e,r){var n=r;return i(t,function(t,o){n=0===o&&void 0===r?t:e(n,t,o)}),n},r.featureEach=s,r.featureReduce=function(t,e,r){var n=r;return s(t,function(t,o){n=0===o&&void 0===r?t:e(n,t,o)}),n},r.coordAll=function(t){var e=[];return o(t,function(t){e.push(t)}),e},r.geomEach=a,r.geomReduce=function(t,e,r){var n=r;return a(t,function(t,o,i,s,a){n=0===o&&void 0===r?t:e(n,t,o,i,s,a)}),n},r.flattenEach=u,r.flattenReduce=function(t,e,r){var n=r;return u(t,function(t,o,i){n=0===o&&0===i&&void 0===r?t:e(n,t,o,i)}),n},r.segmentEach=c,r.segmentReduce=function(t,e,r){var n=r,o=!1;return c(t,function(t,i,s,a,u){n=!1===o&&void 0===r?t:e(n,t,i,s,a,u),o=!0}),n},r.lineEach=l,r.lineReduce=function(t,e,r){var n=r;return l(t,function(t,o,i,s){n=0===o&&void 0===r?t:e(n,t,o,i,s)}),n},r.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,o=e.featureIndex||0,i=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),u=u||t.features[o].properties,r=t.features[o].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),n.lineString([c[a],c[a+1]],u,e);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a-1),n.lineString([c[s][a],c[s][a+1]],u,e);case"MultiLineString":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a-1),n.lineString([c[i][a],c[i][a+1]],u,e);case"MultiPolygon":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),a<0&&(a=c[i][s].length-a-1),n.lineString([c[i][s][a],c[i][s][a+1]],u,e)}throw new Error("geojson is invalid")},r.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,o=e.featureIndex||0,i=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),u=u||t.features[o].properties,r=t.features[o].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":return n.point(c,u,e);case"MultiPoint":return i<0&&(i=c.length+i),n.point(c[i],u,e);case"LineString":return a<0&&(a=c.length+a),n.point(c[a],u,e);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a),n.point(c[s][a],u,e);case"MultiLineString":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),n.point(c[i][a],u,e);case"MultiPolygon":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),a<0&&(a=c[i][s].length-a),n.point(c[i][s][a],u,e)}throw new Error("geojson is invalid")}},{"@turf/helpers":4}],6:[function(t,e,r){e.exports=t("./lib/axios")},{"./lib/axios":8}],7:[function(t,e,r){"use strict";var n=t("./../utils"),o=t("./../core/settle"),i=t("./../helpers/cookies"),s=t("./../helpers/buildURL"),a=t("../core/buildFullPath"),u=t("./../helpers/parseHeaders"),c=t("./../helpers/isURLSameOrigin"),l=t("../core/createError");e.exports=function(t){return new Promise(function(e,r){var h=t.data,p=t.headers;n.isFormData(h)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";p.Authorization="Basic "+btoa(d+":"+g)}var m=a(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),s(m,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?u(f.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:t,request:f};o(e,r,i),f=null}},f.onabort=function(){f&&(r(l("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(l("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(l(e,t,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var y=(t.withCredentials||c(m))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;y&&(p[t.xsrfHeaderName]=y)}if("setRequestHeader"in f&&n.forEach(p,function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)}),n.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(v){if("json"!==t.responseType)throw v}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),r(t),f=null)}),h||(h=null),f.send(h)})}},{"../core/buildFullPath":14,"../core/createError":15,"./../core/settle":19,"./../helpers/buildURL":23,"./../helpers/cookies":25,"./../helpers/isURLSameOrigin":28,"./../helpers/parseHeaders":30,"./../utils":32}],8:[function(t,e,r){"use strict";var n=t("./utils"),o=t("./helpers/bind"),i=t("./core/Axios"),s=t("./core/mergeConfig");function a(t){var e=new i(t),r=o(i.prototype.request,e);return n.extend(r,i.prototype,e),n.extend(r,e),r}var u=a(t("./defaults"));u.Axios=i,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=t("./cancel/Cancel"),u.CancelToken=t("./cancel/CancelToken"),u.isCancel=t("./cancel/isCancel"),u.all=function(t){return Promise.all(t)},u.spread=t("./helpers/spread"),u.isAxiosError=t("./helpers/isAxiosError"),e.exports=u,e.exports.default=u},{"./cancel/Cancel":9,"./cancel/CancelToken":10,"./cancel/isCancel":11,"./core/Axios":12,"./core/mergeConfig":18,"./defaults":21,"./helpers/bind":22,"./helpers/isAxiosError":27,"./helpers/spread":31,"./utils":32}],9:[function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},{}],10:[function(t,e,r){"use strict";var n=t("./Cancel");function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new n(t),e(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},e.exports=o},{"./Cancel":9}],11:[function(t,e,r){"use strict";e.exports=function(t){return!(!t||!t.__CANCEL__)}},{}],12:[function(t,e,r){"use strict";var n=t("./../utils"),o=t("../helpers/buildURL"),i=t("./InterceptorManager"),s=t("./dispatchRequest"),a=t("./mergeConfig");function u(t){this.defaults=t,this.interceptors={request:new i,response:new i}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},u.prototype.getUri=function(t){return t=a(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(t){u.prototype[t]=function(e,r){return this.request(a(r||{},{method:t,url:e,data:(r||{}).data}))}}),n.forEach(["post","put","patch"],function(t){u.prototype[t]=function(e,r,n){return this.request(a(n||{},{method:t,url:e,data:r}))}}),e.exports=u},{"../helpers/buildURL":23,"./../utils":32,"./InterceptorManager":13,"./dispatchRequest":16,"./mergeConfig":18}],13:[function(t,e,r){"use strict";var n=t("./../utils");function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=o},{"./../utils":32}],14:[function(t,e,r){"use strict";var n=t("../helpers/isAbsoluteURL"),o=t("../helpers/combineURLs");e.exports=function(t,e){return t&&!n(e)?o(t,e):e}},{"../helpers/combineURLs":24,"../helpers/isAbsoluteURL":26}],15:[function(t,e,r){"use strict";var n=t("./enhanceError");e.exports=function(t,e,r,o,i){var s=new Error(t);return n(s,e,r,o,i)}},{"./enhanceError":17}],16:[function(t,e,r){"use strict";var n=t("./../utils"),o=t("./transformData"),i=t("../cancel/isCancel"),s=t("../defaults");function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}e.exports=function(t){return a(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return a(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(a(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},{"../cancel/isCancel":11,"../defaults":21,"./../utils":32,"./transformData":20}],17:[function(t,e,r){"use strict";e.exports=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},{}],18:[function(t,e,r){"use strict";var n=t("../utils");e.exports=function(t,e){e=e||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(t,e){return n.isPlainObject(t)&&n.isPlainObject(e)?n.merge(t,e):n.isPlainObject(e)?n.merge({},e):n.isArray(e)?e.slice():e}function c(o){n.isUndefined(e[o])?n.isUndefined(t[o])||(r[o]=u(void 0,t[o])):r[o]=u(t[o],e[o])}n.forEach(o,function(t){n.isUndefined(e[t])||(r[t]=u(void 0,e[t]))}),n.forEach(i,c),n.forEach(s,function(o){n.isUndefined(e[o])?n.isUndefined(t[o])||(r[o]=u(void 0,t[o])):r[o]=u(void 0,e[o])}),n.forEach(a,function(n){n in e?r[n]=u(t[n],e[n]):n in t&&(r[n]=u(void 0,t[n]))});var l=o.concat(i).concat(s).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter(function(t){return-1===l.indexOf(t)});return n.forEach(h,c),r}},{"../utils":32}],19:[function(t,e,r){"use strict";var n=t("./createError");e.exports=function(t,e,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},{"./createError":15}],20:[function(t,e,r){"use strict";var n=t("./../utils");e.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},{"./../utils":32}],21:[function(t,e,r){(function(r){(function(){"use strict";var n=t("./utils"),o=t("./helpers/normalizeHeaderName"),i={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=t("./adapters/xhr"):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(a=t("./adapters/http")),a),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(t){u.headers[t]={}}),n.forEach(["post","put","patch"],function(t){u.headers[t]=n.merge(i)}),e.exports=u}).call(this)}).call(this,t("_process"))},{"./adapters/http":7,"./adapters/xhr":7,"./helpers/normalizeHeaderName":29,"./utils":32,_process:33}],22:[function(t,e,r){"use strict";e.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},{}],23:[function(t,e,r){"use strict";var n=t("./../utils");function o(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(n.isURLSearchParams(e))i=e.toString();else{var s=[];n.forEach(e,function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(o(e)+"="+o(t))}))}),i=s.join("&")}if(i){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},{"./../utils":32}],24:[function(t,e,r){"use strict";e.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},{}],25:[function(t,e,r){"use strict";var n=t("./../utils");e.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,o,i,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":32}],26:[function(t,e,r){"use strict";e.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},{}],27:[function(t,e,r){"use strict";e.exports=function(t){return"object"===n(t)&&!0===t.isAxiosError}},{}],28:[function(t,e,r){"use strict";var n=t("./../utils");e.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=o(window.location.href),function(e){var r=n.isString(e)?o(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},{"./../utils":32}],29:[function(t,e,r){"use strict";var n=t("../utils");e.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},{"../utils":32}],30:[function(t,e,r){"use strict";var n=t("./../utils"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(t){var e,r,i,s={};return t?(n.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=n.trim(t.substr(0,i)).toLowerCase(),r=n.trim(t.substr(i+1)),e){if(s[e]&&o.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}}),s):s}},{"./../utils":32}],31:[function(t,e,r){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},{}],32:[function(t,e,r){"use strict";var o=t("./helpers/bind"),i=Object.prototype.toString;function s(t){return"[object Array]"===i.call(t)}function a(t){return void 0===t}function u(t){return null!==t&&"object"===n(t)}function c(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function l(t){return"[object Function]"===i.call(t)}function h(t,e){if(null!=t)if("object"!==n(t)&&(t=[t]),s(t))for(var r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}e.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:l,isStream:function(t){return u(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function t(){var e={};function r(r,n){c(e[n])&&c(r)?e[n]=t(e[n],r):c(r)?e[n]=t({},r):s(r)?e[n]=r.slice():e[n]=r}for(var n=0,o=arguments.length;n<o;n++)h(arguments[n],r);return e},extend:function(t,e,r){return h(e,function(e,n){t[n]=r&&"function"==typeof e?o(e,r):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},{"./helpers/bind":22}],33:[function(t,e,r){var n,o,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var c,l=[],h=!1,p=-1;function f(){h&&c&&(h=!1,c.length?l=c.concat(l):p=-1,l.length&&d())}function d(){if(!h){var t=u(f);h=!0;for(var e=l.length;e;){for(c=l,l=[];++p<e;)c&&c[p].run();p=-1,e=l.length}c=null,h=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new g(t,e)),1!==l.length||h||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],34:[function(t,e,r){!function(r,o){if("object"===n(e)&&"object"===n(e.exports))e.exports=o(t("terraformer"));else if("object"===("undefined"==typeof navigator?"undefined":n(navigator))){if(!r.Terraformer)throw new Error("Terraformer.WKT requires the core Terraformer library. http://github.com/esri/terraformer");r.Terraformer.WKT=o(r.Terraformer)}}(this,function(t){var e={},r=function(){var t={trace:function(){},yy:{},symbols_:{error:2,expressions:3,point:4,EOF:5,linestring:6,polygon:7,multipoint:8,multilinestring:9,multipolygon:10,coordinate:11,DOUBLE_TOK:12,ptarray:13,COMMA:14,ring_list:15,ring:16,"(":17,")":18,POINT:19,Z:20,ZM:21,M:22,EMPTY:23,point_untagged:24,polygon_list:25,polygon_untagged:26,point_list:27,LINESTRING:28,POLYGON:29,MULTIPOINT:30,MULTILINESTRING:31,MULTIPOLYGON:32,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"DOUBLE_TOK",14:"COMMA",17:"(",18:")",19:"POINT",20:"Z",21:"ZM",22:"M",23:"EMPTY",28:"LINESTRING",29:"POLYGON",30:"MULTIPOINT",31:"MULTILINESTRING",32:"MULTIPOLYGON"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[11,2],[11,3],[11,4],[13,3],[13,1],[15,3],[15,1],[16,3],[4,4],[4,5],[4,5],[4,5],[4,2],[24,1],[24,3],[25,3],[25,1],[26,3],[27,3],[27,1],[6,4],[6,5],[6,5],[6,5],[6,2],[7,4],[7,5],[7,5],[7,5],[7,2],[8,4],[8,5],[8,5],[8,5],[8,2],[9,4],[9,5],[9,5],[9,5],[9,2],[10,4],[10,5],[10,5],[10,5],[10,2]],performAction:function(t,e,r,i,u,c,l){var h=c.length-1;switch(u){case 1:case 2:case 3:case 4:case 5:case 6:return c[h-1];case 7:this.$=new n([Number(c[h-1]),Number(c[h])]);break;case 8:this.$=new n([Number(c[h-2]),Number(c[h-1]),Number(c[h])]);break;case 9:this.$=new n([Number(c[h-3]),Number(c[h-2]),Number(c[h-1]),Number(c[h])]);break;case 10:this.$=c[h-2].addPoint(c[h]);break;case 11:this.$=c[h];break;case 12:this.$=c[h-2].addRing(c[h]);break;case 13:this.$=new s(c[h]);break;case 14:this.$=new o(c[h-1]);break;case 15:this.$={type:"Point",coordinates:c[h-1].data[0]};break;case 16:this.$={type:"Point",coordinates:c[h-1].data[0],properties:{z:!0}};break;case 17:this.$={type:"Point",coordinates:c[h-1].data[0],properties:{z:!0,m:!0}};break;case 18:this.$={type:"Point",coordinates:c[h-1].data[0],properties:{m:!0}};break;case 19:this.$={type:"Point",coordinates:[]};break;case 20:this.$=c[h];break;case 21:this.$=c[h-1];break;case 22:this.$=c[h-2].addPolygon(c[h]);break;case 23:this.$=new a(c[h]);break;case 24:this.$=c[h-1];break;case 25:this.$=c[h-2].addPoint(c[h]);break;case 26:this.$=c[h];break;case 27:this.$={type:"LineString",coordinates:c[h-1].data};break;case 28:this.$={type:"LineString",coordinates:c[h-1].data,properties:{z:!0}};break;case 29:this.$={type:"LineString",coordinates:c[h-1].data,properties:{m:!0}};break;case 30:this.$={type:"LineString",coordinates:c[h-1].data,properties:{z:!0,m:!0}};break;case 31:this.$={type:"LineString",coordinates:[]};break;case 32:this.$={type:"Polygon",coordinates:c[h-1].toJSON()};break;case 33:this.$={type:"Polygon",coordinates:c[h-1].toJSON(),properties:{z:!0}};break;case 34:this.$={type:"Polygon",coordinates:c[h-1].toJSON(),properties:{m:!0}};break;case 35:this.$={type:"Polygon",coordinates:c[h-1].toJSON(),properties:{z:!0,m:!0}};break;case 36:this.$={type:"Polygon",coordinates:[]};break;case 37:this.$={type:"MultiPoint",coordinates:c[h-1].data};break;case 38:this.$={type:"MultiPoint",coordinates:c[h-1].data,properties:{z:!0}};break;case 39:this.$={type:"MultiPoint",coordinates:c[h-1].data,properties:{m:!0}};break;case 40:this.$={type:"MultiPoint",coordinates:c[h-1].data,properties:{z:!0,m:!0}};break;case 41:this.$={type:"MultiPoint",coordinates:[]};break;case 42:this.$={type:"MultiLineString",coordinates:c[h-1].toJSON()};break;case 43:this.$={type:"MultiLineString",coordinates:c[h-1].toJSON(),properties:{z:!0}};break;case 44:this.$={type:"MultiLineString",coordinates:c[h-1].toJSON(),properties:{m:!0}};break;case 45:this.$={type:"MultiLineString",coordinates:c[h-1].toJSON(),properties:{z:!0,m:!0}};break;case 46:this.$={type:"MultiLineString",coordinates:[]};break;case 47:this.$={type:"MultiPolygon",coordinates:c[h-1].toJSON()};break;case 48:this.$={type:"MultiPolygon",coordinates:c[h-1].toJSON(),properties:{z:!0}};break;case 49:this.$={type:"MultiPolygon",coordinates:c[h-1].toJSON(),properties:{m:!0}};break;case 50:this.$={type:"MultiPolygon",coordinates:c[h-1].toJSON(),properties:{z:!0,m:!0}};break;case 51:this.$={type:"MultiPolygon",coordinates:[]}}},table:[{3:1,4:2,6:3,7:4,8:5,9:6,10:7,19:[1,8],28:[1,9],29:[1,10],30:[1,11],31:[1,12],32:[1,13]},{1:[3]},{5:[1,14]},{5:[1,15]},{5:[1,16]},{5:[1,17]},{5:[1,18]},{5:[1,19]},{17:[1,20],20:[1,21],21:[1,22],22:[1,23],23:[1,24]},{17:[1,25],20:[1,26],21:[1,28],22:[1,27],23:[1,29]},{17:[1,30],20:[1,31],21:[1,33],22:[1,32],23:[1,34]},{17:[1,35],20:[1,36],21:[1,38],22:[1,37],23:[1,39]},{17:[1,40],20:[1,41],21:[1,43],22:[1,42],23:[1,44]},{17:[1,45],20:[1,46],21:[1,48],22:[1,47],23:[1,49]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{11:51,12:[1,52],13:50},{17:[1,53]},{17:[1,54]},{17:[1,55]},{5:[2,19]},{11:58,12:[1,52],17:[1,59],24:57,27:56},{17:[1,60]},{17:[1,61]},{17:[1,62]},{5:[2,31]},{15:63,16:64,17:[1,65]},{17:[1,66]},{17:[1,67]},{17:[1,68]},{5:[2,36]},{11:58,12:[1,52],17:[1,59],24:57,27:69},{17:[1,70]},{17:[1,71]},{17:[1,72]},{5:[2,41]},{15:73,16:64,17:[1,65]},{17:[1,74]},{17:[1,75]},{17:[1,76]},{5:[2,46]},{17:[1,79],25:77,26:78},{17:[1,80]},{17:[1,81]},{17:[1,82]},{5:[2,51]},{14:[1,84],18:[1,83]},{14:[2,11],18:[2,11]},{12:[1,85]},{11:51,12:[1,52],13:86},{11:51,12:[1,52],13:87},{11:51,12:[1,52],13:88},{14:[1,90],18:[1,89]},{14:[2,26],18:[2,26]},{14:[2,20],18:[2,20]},{11:91,12:[1,52]},{11:58,12:[1,52],17:[1,59],24:57,27:92},{11:58,12:[1,52],17:[1,59],24:57,27:93},{11:58,12:[1,52],17:[1,59],24:57,27:94},{14:[1,96],18:[1,95]},{14:[2,13],18:[2,13]},{11:51,12:[1,52],13:97},{15:98,16:64,17:[1,65]},{15:99,16:64,17:[1,65]},{15:100,16:64,17:[1,65]},{14:[1,90],18:[1,101]},{11:58,12:[1,52],17:[1,59],24:57,27:102},{11:58,12:[1,52],17:[1,59],24:57,27:103},{11:58,12:[1,52],17:[1,59],24:57,27:104},{14:[1,96],18:[1,105]},{15:106,16:64,17:[1,65]},{15:107,16:64,17:[1,65]},{15:108,16:64,17:[1,65]},{14:[1,110],18:[1,109]},{14:[2,23],18:[2,23]},{15:111,16:64,17:[1,65]},{17:[1,79],25:112,26:78},{17:[1,79],25:113,26:78},{17:[1,79],25:114,26:78},{5:[2,15]},{11:115,12:[1,52]},{12:[1,116],14:[2,7],18:[2,7]},{14:[1,84],18:[1,117]},{14:[1,84],18:[1,118]},{14:[1,84],18:[1,119]},{5:[2,27]},{11:58,12:[1,52],17:[1,59],24:120},{18:[1,121]},{14:[1,90],18:[1,122]},{14:[1,90],18:[1,123]},{14:[1,90],18:[1,124]},{5:[2,32]},{16:125,17:[1,65]},{14:[1,84],18:[1,126]},{14:[1,96],18:[1,127]},{14:[1,96],18:[1,128]},{14:[1,96],18:[1,129]},{5:[2,37]},{14:[1,90],18:[1,130]},{14:[1,90],18:[1,131]},{14:[1,90],18:[1,132]},{5:[2,42]},{14:[1,96],18:[1,133]},{14:[1,96],18:[1,134]},{14:[1,96],18:[1,135]},{5:[2,47]},{17:[1,79],26:136},{14:[1,96],18:[1,137]},{14:[1,110],18:[1,138]},{14:[1,110],18:[1,139]},{14:[1,110],18:[1,140]},{14:[2,10],18:[2,10]},{12:[1,141],14:[2,8],18:[2,8]},{5:[2,16]},{5:[2,17]},{5:[2,18]},{14:[2,25],18:[2,25]},{14:[2,21],18:[2,21]},{5:[2,28]},{5:[2,29]},{5:[2,30]},{14:[2,12],18:[2,12]},{14:[2,14],18:[2,14]},{5:[2,33]},{5:[2,34]},{5:[2,35]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,43]},{5:[2,44]},{5:[2,45]},{14:[2,22],18:[2,22]},{14:[2,24],18:[2,24]},{5:[2,48]},{5:[2,49]},{5:[2,50]},{14:[2,9],18:[2,9]}],defaultActions:{14:[2,1],15:[2,2],16:[2,3],17:[2,4],18:[2,5],19:[2,6],24:[2,19],29:[2,31],34:[2,36],39:[2,41],44:[2,46],49:[2,51],83:[2,15],89:[2,27],95:[2,32],101:[2,37],105:[2,42],109:[2,47],117:[2,16],118:[2,17],119:[2,18],122:[2,28],123:[2,29],124:[2,30],127:[2,33],128:[2,34],129:[2,35],130:[2,38],131:[2,39],132:[2,40],133:[2,43],134:[2,44],135:[2,45],138:[2,48],139:[2,49],140:[2,50]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,r=[0],n=[null],o=[],i=this.table,s="",a=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;o.push(l);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,d,g,m,y,v,N,E,w,b={};;){if(d=r[r.length-1],this.defaultActions[d]?g=this.defaultActions[d]:(null==p&&(w=void 0,"number"!=typeof(w=e.lexer.lex()||1)&&(w=e.symbols_[w]||w),p=w),g=i[d]&&i[d][p]),void 0===g||!g.length||!g[0]){var T="";if(!c){for(y in E=[],i[d])this.terminals_[y]&&y>2&&E.push("'"+this.terminals_[y]+"'");T=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(T,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:l,expected:E})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+p);switch(g[0]){case 1:r.push(p),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(g[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,l=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[g[1]][1],b.$=n[n.length-v],b._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},h&&(b._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(m=this.performAction.call(b,s,u,a,this.yy,g[1],n,o)))return m;v&&(r=r.slice(0,-1*v*2),n=n.slice(0,-1*v),o=o.slice(0,-1*v)),r.push(this.productions_[g[1]][0]),n.push(b.$),o.push(b._$),N=i[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;s<i.length&&(!(r=this._input.match(this.rules[i[s]]))||e&&!(r[0].length>e[0].length)||(e=r,n=s,this.options.flex));s++);return e?((o=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,i[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){switch(r){case 0:break;case 1:return 17;case 2:return 18;case 3:return 12;case 4:return 19;case 5:return 28;case 6:return 29;case 7:return 30;case 8:return 31;case 9:return 32;case 10:return 14;case 11:return 23;case 12:return 22;case 13:return 20;case 14:return 21;case 15:return 5;case 16:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:-?[0-9]+(\.[0-9]+)?([eE][\-\+]?[0-9]+)?)/,/^(?:POINT\b)/,/^(?:LINESTRING\b)/,/^(?:POLYGON\b)/,/^(?:MULTIPOINT\b)/,/^(?:MULTILINESTRING\b)/,/^(?:MULTIPOLYGON\b)/,/^(?:,)/,/^(?:EMPTY\b)/,/^(?:M\b)/,/^(?:Z\b)/,/^(?:ZM\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],inclusive:!0}}};return t}();function r(){this.yy={}}return t.lexer=e,r.prototype=t,t.Parser=r,new r}();function n(t){this.data=[t],this.type="PointArray"}function o(t){this.data=t,this.type="Ring"}function s(t){this.data=[t],this.type="RingList"}function a(t){this.data=[t],this.type="PolygonList"}function u(t){for(var e=[],r="",n=0;n<t.length;n++)e.push(t[n].join(" "));return r+="("+e.join(", ")+")"}return n.prototype.addPoint=function(t){return"PointArray"===t.type?this.data=this.data.concat(t.data):this.data.push(t),this},n.prototype.toJSON=function(){return this.data},o.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.data.length;e++)t.push(this.data.data[e]);return t},s.prototype.addRing=function(t){return this.data.push(t),this},s.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.length;e++)t.push(this.data[e].toJSON());return t.length,t},a.prototype.addPolygon=function(t){return this.data.push(t),this},a.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.length;e++)t=t.concat([this.data[e].toJSON()]);return t},e.parser=r,e.Parser=r.Parser,e.parse=function(e){var n;try{n=r.parse(e)}catch(o){throw Error("Unable to parse: "+o)}return t.Primitive(n)},e.convert=function t(e){switch(e.type){case"Point":return function(t){var e="POINT ";return void 0===t.coordinates||0===t.coordinates.length?e+="EMPTY":(3===t.coordinates.length?t.properties&&!0===t.properties.m?e+="M ":e+="Z ":4===t.coordinates.length&&(e+="ZM "),e+="("+t.coordinates.join(" ")+")")}(e);case"LineString":return function(t){var e="LINESTRING ";return void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length?e+="EMPTY":(3===t.coordinates[0].length?t.properties&&!0===t.properties.m?e+="M ":e+="Z ":4===t.coordinates[0].length&&(e+="ZM "),e+=u(t.coordinates))}(e);case"Polygon":return function(t){var e="POLYGON ";if(void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length)return e+="EMPTY";3===t.coordinates[0][0].length?t.properties&&!0===t.properties.m?e+="M ":e+="Z ":4===t.coordinates[0][0].length&&(e+="ZM "),e+="(";for(var r=[],n=0;n<t.coordinates.length;n++)r.push(u(t.coordinates[n]));return e+=r.join(", "),e+=")"}(e);case"MultiPoint":return function(t){var e="MULTIPOINT ";return void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length?e+="EMPTY":(3===t.coordinates[0].length?t.properties&&!0===t.properties.m?e+="M ":e+="Z ":4===t.coordinates[0].length&&(e+="ZM "),e+=u(t.coordinates))}(e);case"MultiLineString":return function(t){var e="MULTILINESTRING ";if(void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length)return e+="EMPTY";3===t.coordinates[0][0].length?t.properties&&!0===t.properties.m?e+="M ":e+="Z ":4===t.coordinates[0][0].length&&(e+="ZM "),e+="(";for(var r=[],n=0;n<t.coordinates.length;n++)r.push(u(t.coordinates[n]));return e+=r.join(", "),e+=")"}(e);case"MultiPolygon":return function(t){var e="MULTIPOLYGON ";if(void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length||0===t.coordinates[0][0].length)return e+="EMPTY";3===t.coordinates[0][0][0].length?t.properties&&!0===t.properties.m?e+="M ":e+="Z ":4===t.coordinates[0][0][0].length&&(e+="ZM "),e+="(";for(var r=[],n=0;n<t.coordinates.length;n++){for(var o="(",i=[],s=0;s<t.coordinates[n].length;s++)i.push(u(t.coordinates[n][s]));o+=i.join(", "),o+=")",r.push(o)}return e+=r.join(", "),e+=")"}(e);case"GeometryCollection":var r=[];for(i=0;i<e.geometries.length;i++)r.push(t(e.geometries[i]));return"GEOMETRYCOLLECTION("+r.join(", ")+")";default:throw Error("Unknown Type: "+e.type)}},e})},{terraformer:35}],35:[function(t,e,r){var o,i;o=this,i=function(){"use strict";var t={},e=6378137,r=57.29577951308232,o=.017453292519943,i={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}};function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function u(t){if(t.type)switch(t.type){case"Point":return[t.coordinates[0],t.coordinates[1],t.coordinates[0],t.coordinates[1]];case"MultiPoint":case"LineString":return l(t.coordinates);case"MultiLineString":case"Polygon":return c(t.coordinates);case"MultiPolygon":return function(t){for(var e=null,r=null,n=null,o=null,i=0;i<t.length;i++)for(var s=t[i],a=0;a<s.length;a++)for(var u=s[a],c=0;c<u.length;c++){var l=u[c],h=l[0],p=l[1];null===e?e=h:h<e&&(e=h),null===r?r=h:h>r&&(r=h),null===n?n=p:p<n&&(n=p),null===o?o=p:p>o&&(o=p)}return[e,n,r,o]}(t.coordinates);case"Feature":return t.geometry?u(t.geometry):null;case"FeatureCollection":return function(t){for(var e,r=[],n=t.features.length-1;n>=0;n--)e=u(t.features[n].geometry),r.push([e[0],e[1]]),r.push([e[2],e[3]]);return l(r)}(t);case"GeometryCollection":return function(t){for(var e,r=[],n=t.geometries.length-1;n>=0;n--)e=u(t.geometries[n]),r.push([e[0],e[1]]),r.push([e[2],e[3]]);return l(r)}(t);default:throw new Error("Unknown type: "+t.type)}return null}function c(t){for(var e=null,r=null,n=null,o=null,i=0;i<t.length;i++)for(var s=t[i],a=0;a<s.length;a++){var u=s[a],c=u[0],l=u[1];null===e?e=c:c<e&&(e=c),null===r?r=c:c>r&&(r=c),null===n?n=l:l<n&&(n=l),null===o?o=l:l>o&&(o=l)}return[e,n,r,o]}function l(t){for(var e=null,r=null,n=null,o=null,i=0;i<t.length;i++){var s=t[i],a=s[0],u=s[1];null===e?e=a:a<e&&(e=a),null===r?r=a:a>r&&(r=a),null===n?n=u:u<n&&(n=u),null===o?o=u:u>o&&(o=u)}return[e,n,r,o]}function h(t){var e=u(t);return{x:e[0],y:e[1],w:Math.abs(e[0]-e[2]),h:Math.abs(e[1]-e[3])}}function p(t){return t*r}function f(t){return t*o}function d(t){var r=t[0],n=t[1];return[p(r/e)-360*Math.floor((p(r/e)+180)/360),p(Math.PI/2-2*Math.atan(Math.exp(-1*n/e)))]}function g(t){var r=t[0],n=Math.max(Math.min(t[1],89.99999),-89.99999);return[f(r)*e,e/2*Math.log((1+Math.sin(f(n)))/(1-Math.sin(f(n))))]}function m(t,e,r){if("Point"===t.type)t.coordinates=e(t.coordinates);else if("Feature"===t.type)t.geometry=m(t.geometry,e,!0);else if("FeatureCollection"===t.type)for(var o=0;o<t.features.length;o++)t.features[o]=m(t.features[o],e,!0);else if("GeometryCollection"===t.type)for(var s=0;s<t.geometries.length;s++)t.geometries[s]=m(t.geometries[s],e,!0);else t.coordinates=function t(e,r){for(var o=0;o<e.length;o++)"number"==typeof e[o][0]&&(e[o]=r(e[o])),"object"===n(e[o])&&(e[o]=t(e[o],r));return e}(t.coordinates,e);return r||e===g&&(t.crs=i),e===d&&delete t.crs,t}function y(t){return m(t,g)}function v(t){return m(t,d)}function N(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0}function E(t,e,r){return(n=(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]))<(o=0)?-1:n>o?1:0;var n,o}function w(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function b(t,e){var r=e;for(var n in t){var o=E(e,r,t[n]);(-1===o||0===o&&w(e,t[n])>w(e,r))&&(r=t[n])}return r}function T(t){if(0===t.length)return[];if(1===t.length)return t;for(var e=[t.sort(N)[0]],r=0;r<e.length;r++){var n=b(t,e[r]);n!==e[0]&&e.push(n)}return e}function S(t,e){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n][1]<=e[1]&&e[1]<t[i][1]||t[i][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[i][0]-t[n][0])*(e[1]-t[n][1])/(t[i][1]-t[n][1])+t[n][0]&&(r=!r);return r}function A(t,e){if(t&&t.length){if(1===t.length)return S(t[0],e);if(S(t[0],e)){for(var r=1;r<t.length;r++)if(S(t[r],e))return!1;return!0}return!1}return!1}function x(t,e,r,n){var o=(n[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0]),i=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),s=(n[1]-r[1])*(e[0]-t[0])-(n[0]-r[0])*(e[1]-t[1]);if(0!==s){var a=o/s,u=i/s;if(0<=a&&a<=1&&0<=u&&u<=1)return!0}return!1}function O(t){return!isNaN(parseFloat(t))&&isFinite(t)}function R(t,e){if(O(t[0][0])){if(O(e[0][0])){for(var r=0;r<t.length-1;r++)for(var n=0;n<e.length-1;n++)if(x(t[r],t[r+1],e[n],e[n+1]))return!0}else for(var o=0;o<e.length;o++)if(R(t,e[o]))return!0}else for(var i=0;i<t.length;i++)if(R(t[i],e))return!0;return!1}function P(t){for(var e=[],r=0;r<t.length;r++){var n=t[r].slice();!1===C(n[0],n[n.length-1])&&n.push(n[0]),e.push(n)}return e}function C(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function I(t,e){if(t.length!==e.length)return!1;for(var r=t.slice().sort(N),n=e.slice().sort(N),o=0;o<r.length;o++){if(r[o].length!==n[o].length)return!1;for(var i=0;i<r.length;i++)if(r[o][i]!==n[o][i])return!1}return!0}var _=["length"];function L(t){if(t)switch(t.type){case"Point":return new D(t);case"MultiPoint":return new M(t);case"LineString":return new F(t);case"MultiLineString":return new U(t);case"Polygon":return new k(t);case"MultiPolygon":return new B(t);case"Feature":return new j(t);case"FeatureCollection":return new V(t);case"GeometryCollection":return new q(t);default:throw new Error("Unknown type: "+t.type)}}function D(t){var e=Array.prototype.slice.call(arguments);if(t&&"Point"===t.type&&t.coordinates)a(this,t);else if(t&&s(t))this.coordinates=t;else{if(!(e.length>=2))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=e}this.type="Point"}function M(t){if(t&&"MultiPoint"===t.type&&t.coordinates)a(this,t);else{if(!s(t))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=t}this.type="MultiPoint"}function F(t){if(t&&"LineString"===t.type&&t.coordinates)a(this,t);else{if(!s(t))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=t}this.type="LineString"}function U(t){if(t&&"MultiLineString"===t.type&&t.coordinates)a(this,t);else{if(!s(t))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=t}this.type="MultiLineString"}function k(t){if(t&&"Polygon"===t.type&&t.coordinates)a(this,t);else{if(!s(t))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=t}this.type="Polygon"}function B(t){if(t&&"MultiPolygon"===t.type&&t.coordinates)a(this,t);else{if(!s(t))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=t}this.type="MultiPolygon"}function j(t){if(t&&"Feature"===t.type)a(this,t);else{if(!(t&&t.type&&t.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=t}this.type="Feature"}function V(t){if(t&&"FeatureCollection"===t.type&&t.features)a(this,t);else{if(!s(t))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=t}this.type="FeatureCollection"}function q(t){if(t&&"GeometryCollection"===t.type&&t.geometries)a(this,t);else if(s(t))this.geometries=t;else{if(!t.coordinates||!t.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[t]}this.type="GeometryCollection"}function G(t,e,r){for(var n=g(t),o=r||64,i={type:"Polygon",coordinates:[[]]},s=1;s<=o;s++){var a=s*(360/o)*Math.PI/180;i.coordinates[0].push([n[0]+e*Math.cos(a),n[1]+e*Math.sin(a)])}return i.coordinates=P(i.coordinates),v(i)}function H(t,e,r){var n=r||64,o=e||250;if(!t||t.length<2||!o||!n)throw new Error("Terraformer: missing parameter for Terraformer.Circle");a(this,new j({type:"Feature",geometry:G(t,o,n),properties:{radius:o,center:t,steps:n}}))}return L.prototype.toMercator=function(){return y(this)},L.prototype.toGeographic=function(){return v(this)},L.prototype.envelope=function(){return h(this)},L.prototype.bbox=function(){return u(this)},L.prototype.convexHull=function(){var t,e,r=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&this.coordinates.length>=3))return null;r=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)r=r.concat(this.coordinates[t]);if(r.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)for(e=0;e<this.coordinates[t].length;e++)r=r.concat(this.coordinates[t][e]);if(r.length<3)return null}else if("Feature"===this.type){return new L(this.geometry).convexHull()}return new k({type:"Polygon",coordinates:P([T(r)])})},L.prototype.toJSON=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&-1===_.indexOf(e)&&(t[e]=this[e]);return t.bbox=u(this),t},L.prototype.contains=function(t){return new L(t).within(this)},L.prototype.within=function(t){var e,r,n;if("Feature"===t.type&&(t=t.geometry),"Point"===t.type&&"Point"===this.type)return C(this.coordinates,t.coordinates);if("MultiLineString"===t.type&&"Point"===this.type)for(e=0;e<t.coordinates.length;e++){var o={type:"LineString",coordinates:t.coordinates[e]};if(this.within(o))return!0}if(("LineString"===t.type||"MultiPoint"===t.type)&&"Point"===this.type)for(e=0;e<t.coordinates.length;e++){if(this.coordinates.length!==t.coordinates[e].length)return!1;if(C(this.coordinates,t.coordinates[e]))return!0}if("Polygon"===t.type){if("Polygon"===this.type){if(t.coordinates.length===this.coordinates.length)for(e=0;e<this.coordinates.length;e++)if(I(this.coordinates[e],t.coordinates[e]))return!0;return!(!this.coordinates.length||!A(t.coordinates,this.coordinates[0][0]))&&!R(P(this.coordinates),P(t.coordinates))}if("Point"===this.type)return A(t.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(e=0;e<this.coordinates.length;e++)if(!1===A(t.coordinates,this.coordinates[e]))return!1;return!0}if("MultiLineString"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new F(this.coordinates[e]).within(t))return n++,!1}return!0}if("MultiPolygon"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new L({type:"Polygon",coordinates:this.coordinates[e]}).within(t))return!1}return!0}}if("MultiPolygon"===t.type){if("Point"===this.type){if(t.coordinates.length)for(e=0;e<t.coordinates.length;e++)if(A(t.coordinates[e],this.coordinates)&&!1===R([this.coordinates],t.coordinates))return!0;return!1}if("Polygon"===this.type){for(e=0;e<this.coordinates.length;e++)if(t.coordinates[e].length===this.coordinates.length)for(r=0;r<this.coordinates.length;r++)if(I(this.coordinates[r],t.coordinates[e][r]))return!0;if(!1===R(this.coordinates,t.coordinates)&&t.coordinates.length){for(e=0;e<t.coordinates.length;e++)n=!1!==A(t.coordinates[e],this.coordinates[0][0]);return n}}else if("LineString"===this.type||"MultiPoint"===this.type)for(e=0;e<t.coordinates.length;e++){var i={type:"Polygon",coordinates:t.coordinates[e]};return!!this.within(i)}else{if("MultiLineString"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new F(this.coordinates[e]).within(t))return!1}return!0}if("MultiPolygon"===this.type){for(e=0;e<t.coordinates.length;e++){var s={type:"Polygon",coordinates:t.coordinates[e]};if(!1===this.within(s))return!1}return!0}}}return!1},L.prototype.intersects=function(t){"Feature"===t.type&&(t=t.geometry);var e=new L(t);return!(!this.within(t)&&!e.within(this))||("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==t.type&&"MultiPoint"!==t.type?R(this.coordinates,t.coordinates):"Feature"===this.type?new L(this.geometry).intersects(t):(function(){var t=Array.prototype.slice.apply(arguments);void 0!==("undefined"==typeof console?"undefined":n(console))&&console.warn&&console.warn.apply(console,t)}("Type "+this.type+" to "+t.type+" intersection is not supported by intersects"),!1))},D.prototype=new L,D.prototype.constructor=D,M.prototype=new L,M.prototype.constructor=M,M.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates]);return this},M.prototype.addPoint=function(t){return this.coordinates.push(t),this},M.prototype.insertPoint=function(t,e){return this.coordinates.splice(e,0,t),this},M.prototype.removePoint=function(t){return"number"==typeof t?this.coordinates.splice(t,1):this.coordinates.splice(this.coordinates.indexOf(t),1),this},M.prototype.get=function(t){return new D(this.coordinates[t])},F.prototype=new L,F.prototype.constructor=F,F.prototype.addVertex=function(t){return this.coordinates.push(t),this},F.prototype.insertVertex=function(t,e){return this.coordinates.splice(e,0,t),this},F.prototype.removeVertex=function(t){return this.coordinates.splice(t,1),this},U.prototype=new L,U.prototype.constructor=U,U.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},U.prototype.get=function(t){return new F(this.coordinates[t])},k.prototype=new L,k.prototype.constructor=k,k.prototype.addVertex=function(t){return this.insertVertex(t,this.coordinates[0].length-1),this},k.prototype.insertVertex=function(t,e){return this.coordinates[0].splice(e,0,t),this},k.prototype.removeVertex=function(t){return this.coordinates[0].splice(t,1),this},k.prototype.close=function(){this.coordinates=P(this.coordinates)},k.prototype.hasHoles=function(){return this.coordinates.length>1},k.prototype.holes=function(){var t=[];if(this.hasHoles())for(var e=1;e<this.coordinates.length;e++)t.push(new k([this.coordinates[e]]));return t},B.prototype=new L,B.prototype.constructor=B,B.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},B.prototype.get=function(t){return new k(this.coordinates[t])},B.prototype.close=function(){var t=[];return this.forEach(function(e){t.push(P(e))}),this.coordinates=t,this},j.prototype=new L,j.prototype.constructor=j,V.prototype=new L,V.prototype.constructor=V,V.prototype.forEach=function(t){for(var e=0;e<this.features.length;e++)t.apply(this,[this.features[e],e,this.features])},V.prototype.get=function(t){var e;return this.forEach(function(r){r.id===t&&(e=r)}),new j(e)},q.prototype=new L,q.prototype.constructor=q,q.prototype.forEach=function(t){for(var e=0;e<this.geometries.length;e++)t.apply(this,[this.geometries[e],e,this.geometries])},q.prototype.get=function(t){return new L(this.geometries[t])},H.prototype=new L,H.prototype.constructor=H,H.prototype.recalculate=function(){return this.geometry=G(this.properties.center,this.properties.radius,this.properties.steps),this},H.prototype.center=function(t){return t&&(this.properties.center=t,this.recalculate()),this.properties.center},H.prototype.radius=function(t){return t&&(this.properties.radius=t,this.recalculate()),this.properties.radius},H.prototype.steps=function(t){return t&&(this.properties.steps=t,this.recalculate()),this.properties.steps},H.prototype.toJSON=function(){return L.prototype.toJSON.call(this)},t.Primitive=L,t.Point=D,t.MultiPoint=M,t.LineString=F,t.MultiLineString=U,t.Polygon=k,t.MultiPolygon=B,t.Feature=j,t.FeatureCollection=V,t.GeometryCollection=q,t.Circle=H,t.toMercator=y,t.toGeographic=v,t.Tools={},t.Tools.positionToMercator=g,t.Tools.positionToGeographic=d,t.Tools.applyConverter=m,t.Tools.toMercator=y,t.Tools.toGeographic=v,t.Tools.createCircle=G,t.Tools.calculateBounds=u,t.Tools.calculateEnvelope=h,t.Tools.coordinatesContainPoint=S,t.Tools.polygonContainsPoint=A,t.Tools.arraysIntersectArrays=R,t.Tools.coordinatesContainPoint=S,t.Tools.coordinatesEqual=I,t.Tools.convexHull=T,t.Tools.isConvex=function(t){for(var e,r=0;r<t.length-3;r++){var n=t[r],o=t[r+1],i=t[r+2],s=[o[0]-n[0],o[1]-n[1]],a=i[0]*s[1]-i[1]*s[0]+s[0]*n[1]-s[1]*n[0];if(0===r)e=a<0;else if(e&&a>0||!e&&a<0)return!1}return!0},t.MercatorCRS=i,t.GeographicCRS={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},t},"object"===n(e)&&"object"===n(e.exports)&&(e.exports=i()),"object"===("undefined"==typeof window?"undefined":n(window))&&(o.Terraformer=i())},{}],36:[function(t,e,r){function n(t){this.options=t||{locator:{}}}function o(){this.cdata=!1}function i(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function s(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function a(t,e,r){return"string"==typeof t?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}function u(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}n.prototype.parseFromString=function(t,e){var r=this.options,n=new h,i=r.domBuilder||new o,a=r.errorHandler,u=r.locator,l=r.xmlns||{},p=/\/x?html?$/.test(e),f=p?c.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&i.setDocumentLocator(u),n.errorHandler=function(t,e,r){if(!t){if(e instanceof o)return e;t=e}var n={},i=t instanceof Function;function a(e){var o=t[e];!o&&i&&(o=2==t.length?function(r){t(e,r)}:t),n[e]=o&&function(t){o("[xmldom "+e+"]\t"+t+s(r))}||function(){}}return r=r||{},a("warning"),a("error"),a("fatalError"),n}(a,i,u),n.domBuilder=r.domBuilder||i,p&&(l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",t&&"string"==typeof t?n.parse(t,l,f):n.errorHandler.error("invalid doc source"),i.doc},o.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var o=this.doc,s=o.createElementNS(t,r||e),a=n.length;u(this,s),this.currentElement=s,this.locator&&i(this.locator,s);for(var c=0;c<a;c++){t=n.getURI(c);var l=n.getValue(c),h=(r=n.getQName(c),o.createAttributeNS(t,r));this.locator&&i(n.getLocator(c),h),h.value=h.nodeValue=l,s.setAttributeNode(h)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&i(this.locator,r),u(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=a.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(t);else n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&i(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=a.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&i(this.locator,n),u(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var o=n.createDocumentType(t,e,r);this.locator&&i(this.locator,o),u(this,o)}},warning:function(t){console.warn("[xmldom warning]\t"+t,s(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,s(this.locator))},fatalError:function(t){throw new p(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){o.prototype[t]=function(){return null}});var c=t("./entities"),l=t("./sax"),h=l.XMLReader,p=l.ParseError,f=r.DOMImplementation=t("./dom").DOMImplementation;r.XMLSerializer=t("./dom").XMLSerializer,r.DOMParser=n,r.__DOMHandler=o},{"./dom":37,"./entities":38,"./sax":39}],37:[function(t,e,r){function o(t,e){for(var r in t)e[r]=t[r]}function i(t,e){var r=t.prototype;if(!(r instanceof e)){function n(){}n.prototype=e.prototype,o(r,n=new n),t.prototype=r=n}r.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),r.constructor=t)}var s="http://www.w3.org/1999/xhtml",a={},u=a.ELEMENT_NODE=1,c=a.ATTRIBUTE_NODE=2,l=a.TEXT_NODE=3,h=a.CDATA_SECTION_NODE=4,p=a.ENTITY_REFERENCE_NODE=5,f=a.ENTITY_NODE=6,d=a.PROCESSING_INSTRUCTION_NODE=7,g=a.COMMENT_NODE=8,m=a.DOCUMENT_NODE=9,y=a.DOCUMENT_TYPE_NODE=10,v=a.DOCUMENT_FRAGMENT_NODE=11,N=a.NOTATION_NODE=12,E={},w={},b=(E.INDEX_SIZE_ERR=(w[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),T=(E.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),E.NOT_FOUND_ERR=(w[8]="Not found",8)),S=(E.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));E.INVALID_STATE_ERR=(w[11]="Invalid state",11),E.SYNTAX_ERR=(w[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),E.NAMESPACE_ERR=(w[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function A(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,w[t]),this.message=w[t],Error.captureStackTrace&&Error.captureStackTrace(this,A);return r.code=t,e&&(this.message=this.message+": "+e),r}function x(){}function O(t,e){this._node=t,this._refresh=e,R(this)}function R(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);ot(t,"length",r.length),o(r,t),t._inc=e}}function P(){}function C(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function I(t,e,r,n){if(n?e[C(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var o=t.ownerDocument;o&&(n&&k(o,t,n),function(t,e,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(e._nsMap[r.prefix?r.localName:""]=r.value)}(o,t,r))}}function _(t,e,r){var n=C(e,r);if(!(n>=0))throw A(T,new Error(t.tagName+"@"+r));for(var o=e.length-1;n<o;)e[n]=e[++n];if(e.length=o,t){var i=t.ownerDocument;i&&(k(i,t,r),r.ownerElement=null)}}function L(t){if(this._features={},t)for(var e in t)this._features=t[e]}function D(){}function M(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function F(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(F(t,e))return!0}while(t=t.nextSibling)}function U(){}function k(t,e,r,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete e._nsMap[r.prefix?r.localName:""]}function B(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var o=e.firstChild,i=0;o;)n[i++]=o,o=o.nextSibling;n.length=i}}}function j(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,B(t.ownerDocument,t),e}function V(t,e,r){var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===v){var o=e.firstChild;if(null==o)return e;var i=e.lastChild}else o=i=e;var s=r?r.previousSibling:t.lastChild;o.previousSibling=s,i.nextSibling=r,s?s.nextSibling=o:t.firstChild=o,null==r?t.lastChild=i:r.previousSibling=i;do{o.parentNode=t}while(o!==i&&(o=o.nextSibling));return B(t.ownerDocument||t,t),e.nodeType==v&&(e.firstChild=e.lastChild=null),e}function q(){this._nsMap={}}function G(){}function H(){}function $(){}function Y(){}function J(){}function W(){}function X(){}function Q(){}function z(){}function Z(){}function K(){}function tt(){}function et(t,e){var r=[],n=9==this.nodeType&&this.documentElement||this,o=n.prefix,i=n.namespaceURI;if(i&&null==o&&null==(o=n.lookupPrefix(i)))var s=[{namespace:i,prefix:null}];return nt(this,r,t,e,s),r.join("")}function rt(t,e,r){var n=t.prefix||"",o=t.namespaceURI;if(!n&&!o)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=r.length;i--;){var s=r[i];if(s.prefix==n)return s.namespace!=o}return!0}function nt(t,e,r,n,o){if(n){if(!(t=n(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case u:o||(o=[]);o.length;var i=t.attributes,a=i.length,f=t.firstChild,N=t.tagName;r=s===t.namespaceURI||r,e.push("<",N);for(var E=0;E<a;E++){"xmlns"==(w=i.item(E)).prefix?o.push({prefix:w.localName,namespace:w.value}):"xmlns"==w.nodeName&&o.push({prefix:"",namespace:w.value})}for(E=0;E<a;E++){var w;if(rt(w=i.item(E),0,o)){var b=w.prefix||"",T=w.namespaceURI,S=b?" xmlns:"+b:" xmlns";e.push(S,'="',T,'"'),o.push({prefix:b,namespace:T})}nt(w,e,r,n,o)}if(rt(t,0,o)){b=t.prefix||"",T=t.namespaceURI,S=b?" xmlns:"+b:" xmlns";e.push(S,'="',T,'"'),o.push({prefix:b,namespace:T})}if(f||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(N)){if(e.push(">"),r&&/^script$/i.test(N))for(;f;)f.data?e.push(f.data):nt(f,e,r,n,o),f=f.nextSibling;else for(;f;)nt(f,e,r,n,o),f=f.nextSibling;e.push("</",N,">")}else e.push("/>");return;case m:case v:for(f=t.firstChild;f;)nt(f,e,r,n,o),f=f.nextSibling;return;case c:return e.push(" ",t.name,'="',t.value.replace(/[&"]/g,M),'"');case l:return e.push(t.data.replace(/[<&]/g,M).replace(/]]>/g,"]]&gt;"));case h:return e.push("<![CDATA[",t.data,"]]>");case g:return e.push("\x3c!--",t.data,"--\x3e");case y:var A=t.publicId,x=t.systemId;if(e.push("<!DOCTYPE ",t.name),A)e.push(" PUBLIC ",A),x&&"."!=x&&e.push(" ",x),e.push(">");else if(x&&"."!=x)e.push(" SYSTEM ",x,">");else{var O=t.internalSubset;O&&e.push(" [",O,"]"),e.push(">")}return;case d:return e.push("<?",t.target," ",t.data,"?>");case p:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function ot(t,e,r){t[e]=r}A.prototype=Error.prototype,o(E,A),x.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)nt(this[n],r,t,e);return r.join("")}},O.prototype.item=function(t){return R(this),this[t]},i(O,x),P.prototype={length:0,item:x.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new A(S);var r=this.getNamedItem(t.nodeName);return I(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e,r=t.ownerElement;if(r&&r!=this._ownerElement)throw new A(S);return e=this.getNamedItemNS(t.namespaceURI,t.localName),I(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return _(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return _(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}},L.prototype={hasFeature:function(t,e){var r=this._features[t.toLowerCase()];return!(!r||e&&!(e in r))},createDocument:function(t,e,r){var n=new U;if(n.implementation=this,n.childNodes=new x,n.doctype=r,r&&n.appendChild(r),e){var o=n.createElementNS(t,e);n.appendChild(o)}return n},createDocumentType:function(t,e,r){var n=new W;return n.name=t,n.nodeName=t,n.publicId=e,n.systemId=r,n}},D.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return V(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return j(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,r,o){var i=new r.constructor;for(var s in r){var a=r[s];"object"!=n(a)&&a!=i[s]&&(i[s]=a)}r.childNodes&&(i.childNodes=new x);i.ownerDocument=e;switch(i.nodeType){case u:var l=r.attributes,h=i.attributes=new P,p=l.length;h._ownerElement=i;for(var f=0;f<p;f++)i.setAttributeNode(t(e,l.item(f),!0));break;case c:o=!0}if(o)for(var d=r.firstChild;d;)i.appendChild(t(e,d,o)),d=d.nextSibling;return i}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==l&&t.nodeType==l?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r)for(var n in r)if(r[n]==t)return n;e=e.nodeType==c?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r)return r[t];e=e.nodeType==c?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},o(a,D),o(a,D.prototype),U.prototype={nodeName:"#document",nodeType:m,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==v){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return null==this.documentElement&&t.nodeType==u&&(this.documentElement=t),V(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),j(this,t)},importNode:function(t,e){return function t(e,r,n){var o;switch(r.nodeType){case u:(o=r.cloneNode(!1)).ownerDocument=e;case v:break;case c:n=!0}o||(o=r.cloneNode(!1));o.ownerDocument=e;o.parentNode=null;if(n)for(var i=r.firstChild;i;)o.appendChild(t(e,i,n)),i=i.nextSibling;return o}(this,t,e)},getElementById:function(t){var e=null;return F(this.documentElement,function(r){if(r.nodeType==u&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=new RegExp("(^|\\s)"+t+"(\\s|$)");return new O(this,function(t){var r=[];return F(t.documentElement,function(n){n!==t&&n.nodeType==u&&e.test(n.getAttribute("class"))&&r.push(n)}),r})},createElement:function(t){var e=new q;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new x,(e.attributes=new P)._ownerElement=e,e},createDocumentFragment:function(){var t=new Z;return t.ownerDocument=this,t.childNodes=new x,t},createTextNode:function(t){var e=new $;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Y;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new J;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new K;return r.ownerDocument=this,r.tagName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new G;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new z;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new q,n=e.split(":"),o=r.attributes=new P;return r.childNodes=new x,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=e,o._ownerElement=r,r},createAttributeNS:function(t,e){var r=new G,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}},i(U,D),q.prototype={nodeType:u,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===v?this.insertBefore(t,null):function(t,e){var r=e.parentNode;if(r){var n=t.lastChild;r.removeChild(e),n=t.lastChild}return n=t.lastChild,e.parentNode=t,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:t.firstChild=e,t.lastChild=e,B(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new O(this,function(e){var r=[];return F(e,function(n){n===e||n.nodeType!=u||"*"!==t&&n.tagName!=t||r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new O(this,function(r){var n=[];return F(r,function(o){o===r||o.nodeType!==u||"*"!==t&&o.namespaceURI!==t||"*"!==e&&o.localName!=e||n.push(o)}),n})}},U.prototype.getElementsByTagName=q.prototype.getElementsByTagName,U.prototype.getElementsByTagNameNS=q.prototype.getElementsByTagNameNS,i(q,D),G.prototype.nodeType=c,i(G,D),H.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(w[b])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){r=this.data.substring(0,t)+r+this.data.substring(t+e),this.nodeValue=this.data=r,this.length=r.length}},i(H,D),$.prototype={nodeName:"#text",nodeType:l,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},i($,H),Y.prototype={nodeName:"#comment",nodeType:g},i(Y,H),J.prototype={nodeName:"#cdata-section",nodeType:h},i(J,H),W.prototype.nodeType=y,i(W,D),X.prototype.nodeType=N,i(X,D),Q.prototype.nodeType=f,i(Q,D),z.prototype.nodeType=p,i(z,D),Z.prototype.nodeName="#document-fragment",Z.prototype.nodeType=v,i(Z,D),K.prototype.nodeType=d,i(K,D),tt.prototype.serializeToString=function(t,e,r){return et.call(t,e,r)},D.prototype.toString=et;try{if(Object.defineProperty){Object.defineProperty(O.prototype,"length",{get:function(){return R(this),this.$$length}}),Object.defineProperty(D.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case u:case v:var r=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case u:case v:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),ot=function(t,e,r){t["$$"+e]=r}}}catch(it){}r.Node=D,r.DOMException=A,r.DOMImplementation=L,r.XMLSerializer=tt},{}],38:[function(t,e,r){r.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}},{}],39:[function(t,e,r){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+o.source+"*(?::"+n.source+o.source+"*)?$"),s=0,a=1,u=2,c=3,l=4,h=5,p=6,f=7;function d(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,d)}function g(){}function m(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function y(t,e,r,n,o,i){function d(t,e,n){t in r.attributeNames&&i.fatalError("Attribute "+t+" redefined"),r.addValue(t,e,n)}for(var g,m=++e,y=s;;){var v=t.charAt(m);switch(v){case"=":if(y===a)g=t.slice(e,m),y=c;else{if(y!==u)throw new Error("attribute equal must after attrName");y=c}break;case"'":case'"':if(y===c||y===a){if(y===a&&(i.warning('attribute value must after "="'),g=t.slice(e,m)),e=m+1,!((m=t.indexOf(v,e))>0))throw new Error("attribute value no end '"+v+"' match");d(g,N=t.slice(e,m).replace(/&#?\w+;/g,o),e-1),y=h}else{if(y!=l)throw new Error('attribute value must after "="');d(g,N=t.slice(e,m).replace(/&#?\w+;/g,o),e),i.warning('attribute "'+g+'" missed start quot('+v+")!!"),e=m+1,y=h}break;case"/":switch(y){case s:r.setTagName(t.slice(e,m));case h:case p:case f:y=f,r.closed=!0;case l:case a:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),y==s&&r.setTagName(t.slice(e,m)),m;case">":switch(y){case s:r.setTagName(t.slice(e,m));case h:case p:case f:break;case l:case a:"/"===(N=t.slice(e,m)).slice(-1)&&(r.closed=!0,N=N.slice(0,-1));case u:y===u&&(N=g),y==l?(i.warning('attribute "'+N+'" missed quot(")!'),d(g,N.replace(/&#?\w+;/g,o),e)):("http://www.w3.org/1999/xhtml"===n[""]&&N.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+N+'" missed value!! "'+N+'" instead!!'),d(N,N,e));break;case c:throw new Error("attribute value missed!!")}return m;case"":v=" ";default:if(v<=" ")switch(y){case s:r.setTagName(t.slice(e,m)),y=p;break;case a:g=t.slice(e,m),y=u;break;case l:var N=t.slice(e,m).replace(/&#?\w+;/g,o);i.warning('attribute "'+N+'" missed quot(")!!'),d(g,N,e);case h:y=p}else switch(y){case u:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&g.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),d(g,g,e),e=m,y=a;break;case h:i.warning('attribute space is required"'+g+'"!!');case p:y=a,e=m;break;case c:y=l,e=m;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function v(t,e,r){for(var n=t.tagName,o=null,i=t.length;i--;){var s=t[i],a=s.qName,u=s.value;if((p=a.indexOf(":"))>0)var c=s.prefix=a.slice(0,p),l=a.slice(p+1),h="xmlns"===c&&l;else l=a,c=null,h="xmlns"===a&&"";s.localName=l,!1!==h&&(null==o&&(o={},w(r,r={})),r[h]=o[h]=u,s.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(h,u))}for(i=t.length;i--;){(c=(s=t[i]).prefix)&&("xml"===c&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(s.uri=r[c||""]))}var p;(p=n.indexOf(":"))>0?(c=t.prefix=n.slice(0,p),l=t.localName=n.slice(p+1)):(c=null,l=t.localName=n);var f=t.uri=r[c||""];if(e.startElement(f,l,n,t),!t.closed)return t.currentNSMap=r,t.localNSMap=o,!0;if(e.endElement(f,l,n),o)for(c in o)e.endPrefixMapping(c)}function N(t,e,r,n,o){if(/^(?:script|textarea)$/i.test(r)){var i=t.indexOf("</"+r+">",e),s=t.substring(e+1,i);if(/[&<]/.test(s))return/^script$/i.test(r)?(o.characters(s,0,s.length),i):(s=s.replace(/&#?\w+;/g,n),o.characters(s,0,s.length),i)}return e+1}function E(t,e,r,n){var o=n[r];return null==o&&((o=t.lastIndexOf("</"+r+">"))<e&&(o=t.lastIndexOf("</"+r)),n[r]=o),o<e}function w(t,e){for(var r in t)e[r]=t[r]}function b(t,e,r,n){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(o=t.indexOf("--\x3e",e+4))>e?(r.comment(t,e+4,o-e-4),o+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var o=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,o-e-9),r.endCDATA(),o+3}var i=function(t,e){var r,n=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=e,o.exec(t);for(;r=o.exec(t);)if(n.push(r),r[1])return n}(t,e),s=i.length;if(s>1&&/!doctype/i.test(i[0][0])){var a=i[1][0],u=!1,c=!1;s>3&&(/^public$/i.test(i[2][0])?(u=i[3][0],c=s>4&&i[4][0]):/^system$/i.test(i[2][0])&&(c=i[3][0]));var l=i[s-1];return r.startDTD(a,u,c),r.endDTD(),l.index+l[0].length}}return-1}function T(t,e,r){var n=t.indexOf("?>",e);if(n){var o=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return r.processingInstruction(o[1],o[2]),n+2}return-1}return-1}function S(){this.attributeNames={}}d.prototype=new Error,d.prototype.name=d.name,g.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),w(e,e={}),function(t,e,r,n,o){function i(t){var e=t.slice(1,-1);return e in r?r[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),r=56320+(1023&t);return String.fromCharCode(e,r)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(o.error("entity not found:"+t),t)}function s(e){if(e>g){var r=t.substring(g,e).replace(/&#?\w+;/g,i);h&&a(g),n.characters(r,0,e-g),g=e}}function a(e,r){for(;e>=c&&(r=l.exec(t));)u=r.index,c=u+r[0].length,h.lineNumber++;h.columnNumber=e-u+1}var u=0,c=0,l=/.*(?:\r\n?|\n)|.*$/g,h=n.locator,p=[{currentNSMap:e}],f={},g=0;for(;;){try{var w=t.indexOf("<",g);if(w<0){if(!t.substr(g).match(/^\s*$/)){var A=n.doc,x=A.createTextNode(t.substr(g));A.appendChild(x),n.currentElement=x}return}switch(w>g&&s(w),t.charAt(w+1)){case"/":var O=t.indexOf(">",w+3),R=t.substring(w+2,O),P=p.pop();O<0?(R=t.substring(w+2).replace(/[\s<].*/,""),o.error("end tag name: "+R+" is not complete:"+P.tagName),O=w+1+R.length):R.match(/\s</)&&(R=R.replace(/[\s<].*/,""),o.error("end tag name: "+R+" maybe not complete"),O=w+1+R.length);var C=P.localNSMap,I=P.tagName==R,_=I||P.tagName&&P.tagName.toLowerCase()==R.toLowerCase();if(_){if(n.endElement(P.uri,P.localName,R),C)for(var L in C)n.endPrefixMapping(L);I||o.fatalError("end tag name: "+R+" is not match the current start tagName:"+P.tagName)}else p.push(P);O++;break;case"?":h&&a(w),O=T(t,w,n);break;case"!":h&&a(w),O=b(t,w,n,o);break;default:h&&a(w);var D=new S,M=p[p.length-1].currentNSMap,O=y(t,w,D,M,i,o),F=D.length;if(!D.closed&&E(t,O,D.tagName,f)&&(D.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),h&&F){for(var U=m(h,{}),k=0;k<F;k++){var B=D[k];a(B.offset),B.locator=m(h,{})}n.locator=U,v(D,n,M)&&p.push(D),n.locator=h}else v(D,n,M)&&p.push(D);"http://www.w3.org/1999/xhtml"!==D.uri||D.closed?O++:O=N(t,O,D.tagName,i,n)}}catch(j){if(j instanceof d)throw j;o.error("element parse error: "+j),O=-1}O>g?g=O:s(Math.max(w,g)+1)}}(t,e,r,n,this.errorHandler),n.endDocument()}},S.prototype={setTagName:function(t){if(!i.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!i.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},r.XMLReader=g,r.ParseError=d},{}],40:[function(t,e,r){!function(t){"use strict";var e=function(t,e){for(var r=0;r<e.length;r+=1)t(e[r],r,e)},r=function(t,r,n){var o=r;return e(function(e,r){o=t(o,e,r)},n),o},o=function(t,r){var n=new Array(r.length);return e(function(e,r){n[r]=t(e)},r),n};function i(t){return t.toString()}var s=function(t,e){return e.join(t)},a=function(t,e,r){return t+r+e},u=Array.prototype.concat,c=32767;function l(t,e){for(var r=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r}function h(){this.init()}function p(t){this.expression=t}function f(t,e,r){e in t||(t[e]=r)}function d(){}function g(t){arguments.length>0&&this.init(t)}function m(t){arguments.length>0&&this.init(t)}function y(t,e){arguments.length>0&&this.init(t,e)}function v(t,e){arguments.length>0&&this.init(t,e)}function N(t,e){arguments.length>0&&this.init(t,e)}function E(t,e){arguments.length>0&&this.init(t,e)}function w(t,e){arguments.length>0&&this.init(t,e)}function b(t,e){arguments.length>0&&this.init(t,e)}function T(t,e){arguments.length>0&&this.init(t,e)}function S(t,e){arguments.length>0&&this.init(t,e)}function A(t,e){arguments.length>0&&this.init(t,e)}function x(t,e){arguments.length>0&&this.init(t,e)}function O(t,e){arguments.length>0&&this.init(t,e)}function R(t,e){arguments.length>0&&this.init(t,e)}function P(t,e){arguments.length>0&&this.init(t,e)}function C(t,e){arguments.length>0&&this.init(t,e)}function I(t,e){arguments.length>0&&this.init(t,e)}function _(t,e,r){arguments.length>0&&this.init(t,e,r)}function L(t){for(;t&&t.parentNode;)t=t.parentNode;return t}function D(t,e,r){return function(t){for(var e=[],r=0;r<t.length;r+=c){var n=t.slice(r,r+c);e=u.apply(e,n)}return e}(o(function(t,e,r){return _.applyPredicates(t.predicates,e,_.applyStep(t,e,r))}.bind(null,r,t),e))}function M(t,e){arguments.length>0&&this.init(t,e)}function F(t,e,r){arguments.length>0&&this.init(t,e,r)}function U(t,e){arguments.length>0&&this.init(t,e)}function k(t){arguments.length>0&&this.init(t)}function B(t,e){arguments.length>0&&this.init(t,e)}h.prototype=new Object,h.prototype.constructor=h,h.superclass=Object.prototype,h.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(t){return new v(t[0],t[2])},this.reduceActions[5]=function(t){return new N(t[0],t[2])},this.reduceActions[7]=function(t){return new E(t[0],t[2])},this.reduceActions[8]=function(t){return new w(t[0],t[2])},this.reduceActions[10]=function(t){return new b(t[0],t[2])},this.reduceActions[11]=function(t){return new T(t[0],t[2])},this.reduceActions[12]=function(t){return new S(t[0],t[2])},this.reduceActions[13]=function(t){return new A(t[0],t[2])},this.reduceActions[15]=function(t){return new x(t[0],t[2])},this.reduceActions[16]=function(t){return new O(t[0],t[2])},this.reduceActions[18]=function(t){return new R(t[0],t[2])},this.reduceActions[19]=function(t){return new P(t[0],t[2])},this.reduceActions[20]=function(t){return new C(t[0],t[2])},this.reduceActions[22]=function(t){return new m(t[1])},this.reduceActions[24]=function(t){return new I(t[0],t[2])},this.reduceActions[25]=function(t){return new _(void 0,void 0,t[0])},this.reduceActions[27]=function(t){return t[0].locationPath=t[2],t[0]},this.reduceActions[28]=function(t){return t[0].locationPath=t[2],t[0].locationPath.steps.unshift(new F(F.DESCENDANTORSELF,U.nodeTest,[])),t[0]},this.reduceActions[29]=function(t){return new _(t[0],[],void 0)},this.reduceActions[30]=function(t){return et.instance_of(t[0],_)?(null==t[0].filterPredicates&&(t[0].filterPredicates=[]),t[0].filterPredicates.push(t[1]),t[0]):new _(t[0],[t[1]],void 0)},this.reduceActions[32]=function(t){return t[1]},this.reduceActions[33]=function(t){return new H(t[0])},this.reduceActions[34]=function(t){return new $(t[0])},this.reduceActions[36]=function(t){return new B(t[0],[])},this.reduceActions[37]=function(t){return new B(t[0],t[2])},this.reduceActions[38]=function(t){return[t[0]]},this.reduceActions[39]=function(t){return t[2].unshift(t[0]),t[2]},this.reduceActions[43]=function(t){return new M(!0,[])},this.reduceActions[44]=function(t){return t[1].absolute=!0,t[1]},this.reduceActions[46]=function(t){return new M(!1,[t[0]])},this.reduceActions[47]=function(t){return t[0].steps.push(t[2]),t[0]},this.reduceActions[49]=function(t){return new F(t[0],t[1],[])},this.reduceActions[50]=function(t){return new F(F.CHILD,t[0],[])},this.reduceActions[51]=function(t){return new F(t[0],t[1],t[2])},this.reduceActions[52]=function(t){return new F(F.CHILD,t[0],t[1])},this.reduceActions[54]=function(t){return[t[0]]},this.reduceActions[55]=function(t){return t[1].unshift(t[0]),t[1]},this.reduceActions[56]=function(t){return"ancestor"==t[0]?F.ANCESTOR:"ancestor-or-self"==t[0]?F.ANCESTORORSELF:"attribute"==t[0]?F.ATTRIBUTE:"child"==t[0]?F.CHILD:"descendant"==t[0]?F.DESCENDANT:"descendant-or-self"==t[0]?F.DESCENDANTORSELF:"following"==t[0]?F.FOLLOWING:"following-sibling"==t[0]?F.FOLLOWINGSIBLING:"namespace"==t[0]?F.NAMESPACE:"parent"==t[0]?F.PARENT:"preceding"==t[0]?F.PRECEDING:"preceding-sibling"==t[0]?F.PRECEDINGSIBLING:"self"==t[0]?F.SELF:-1},this.reduceActions[57]=function(t){return F.ATTRIBUTE},this.reduceActions[59]=function(t){return"comment"==t[0]?U.commentTest:"text"==t[0]?U.textTest:"processing-instruction"==t[0]?U.anyPiTest:"node"==t[0]?U.nodeTest:new U(-1,void 0)},this.reduceActions[60]=function(t){return new U.PITest(t[2])},this.reduceActions[61]=function(t){return t[1]},this.reduceActions[63]=function(t){return t[1].absolute=!0,t[1].steps.unshift(new F(F.DESCENDANTORSELF,U.nodeTest,[])),t[1]},this.reduceActions[64]=function(t){return t[0].steps.push(new F(F.DESCENDANTORSELF,U.nodeTest,[])),t[0].steps.push(t[2]),t[0]},this.reduceActions[65]=function(t){return new F(F.SELF,U.nodeTest,[])},this.reduceActions[66]=function(t){return new F(F.PARENT,U.nodeTest,[])},this.reduceActions[67]=function(t){return new k(t[1])},this.reduceActions[68]=function(t){return U.nameTestAny},this.reduceActions[69]=function(t){return new U.NameTestPrefixAny(t[0].split(":")[0])},this.reduceActions[70]=function(t){return new U.NameTestQName(t[0])}},h.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],h.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],h.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],h.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],h.DOUBLEDOT=2,h.DOUBLECOLON=3,h.DOUBLESLASH=4,h.NOTEQUAL=5,h.LESSTHANOREQUAL=6,h.GREATERTHANOREQUAL=7,h.AND=8,h.OR=9,h.MOD=10,h.DIV=11,h.MULTIPLYOPERATOR=12,h.FUNCTIONNAME=13,h.AXISNAME=14,h.LITERAL=15,h.NUMBER=16,h.ASTERISKNAMETEST=17,h.QNAME=18,h.NCNAMECOLONASTERISK=19,h.NODETYPE=20,h.PROCESSINGINSTRUCTIONWITHLITERAL=21,h.EQUALS=22,h.LESSTHAN=23,h.GREATERTHAN=24,h.PLUS=25,h.MINUS=26,h.BAR=27,h.SLASH=28,h.LEFTPARENTHESIS=29,h.RIGHTPARENTHESIS=30,h.COMMA=31,h.AT=32,h.LEFTBRACKET=33,h.RIGHTBRACKET=34,h.DOT=35,h.DOLLAR=36,h.prototype.tokenize=function(t){for(var e=[],r=[],n=t+"\0",o=0,i=n.charAt(o++);;){for(;" "==i||"\t"==i||"\r"==i||"\n"==i;)i=n.charAt(o++);if("\0"==i||o>=n.length)break;if("("!=i)if(")"!=i)if("["!=i)if("]"!=i)if("@"!=i)if(","!=i)if("|"!=i)if("+"!=i)if("-"!=i)if("="!=i)if("$"!=i)if("."!=i)if("'"!=i&&'"'!=i)if(i>="0"&&i<="9"){l=i;for(i=n.charAt(o++);i>="0"&&i<="9";)l+=i,i=n.charAt(o++);if("."==i&&n.charAt(o)>="0"&&n.charAt(o)<="9")for(l+=i,l+=n.charAt(o++),i=n.charAt(o++);i>="0"&&i<="9";)l+=i,i=n.charAt(o++);e.push(h.NUMBER),r.push(l)}else if("*"!=i)if(":"!=i||":"!=n.charAt(o))if("/"!=i)if("!"!=i||"="!=n.charAt(o))if("<"!=i)if(">"!=i){if("_"!=i&&!et.isLetter(i.charCodeAt(0)))throw new Error("Unexpected character "+i);var s=i;for(i=n.charAt(o++);et.isNCNameChar(i.charCodeAt(0));)s+=i,i=n.charAt(o++);if(e.length>0&&(a=e[e.length-1])!=h.AT&&a!=h.DOUBLECOLON&&a!=h.LEFTPARENTHESIS&&a!=h.LEFTBRACKET&&a!=h.AND&&a!=h.OR&&a!=h.MOD&&a!=h.DIV&&a!=h.MULTIPLYOPERATOR&&a!=h.SLASH&&a!=h.DOUBLESLASH&&a!=h.BAR&&a!=h.PLUS&&a!=h.MINUS&&a!=h.EQUALS&&a!=h.NOTEQUAL&&a!=h.LESSTHAN&&a!=h.LESSTHANOREQUAL&&a!=h.GREATERTHAN&&a!=h.GREATERTHANOREQUAL){if("and"==s){e.push(h.AND),r.push(s);continue}if("or"==s){e.push(h.OR),r.push(s);continue}if("mod"==s){e.push(h.MOD),r.push(s);continue}if("div"==s){e.push(h.DIV),r.push(s);continue}}if(":"==i){if("*"==n.charAt(o)){e.push(h.NCNAMECOLONASTERISK),r.push(s+":*"),o++,i=n.charAt(o++);continue}if("_"==n.charAt(o)||et.isLetter(n.charCodeAt(o))){for(s+=":",i=n.charAt(o++);et.isNCNameChar(i.charCodeAt(0));)s+=i,i=n.charAt(o++);if("("==i){e.push(h.FUNCTIONNAME),r.push(s);continue}e.push(h.QNAME),r.push(s);continue}if(":"==n.charAt(o)){e.push(h.AXISNAME),r.push(s);continue}}if("("==i){if("comment"==s||"text"==s||"node"==s){e.push(h.NODETYPE),r.push(s);continue}if("processing-instruction"==s){")"==n.charAt(o)?e.push(h.NODETYPE):e.push(h.PROCESSINGINSTRUCTIONWITHLITERAL),r.push(s);continue}e.push(h.FUNCTIONNAME),r.push(s);continue}e.push(h.QNAME),r.push(s)}else{if("="==n.charAt(o)){e.push(h.GREATERTHANOREQUAL),r.push(">="),o++,i=n.charAt(o++);continue}e.push(h.GREATERTHAN),r.push(">"),i=n.charAt(o++)}else{if("="==n.charAt(o)){e.push(h.LESSTHANOREQUAL),r.push("<="),o++,i=n.charAt(o++);continue}e.push(h.LESSTHAN),r.push("<"),i=n.charAt(o++)}else e.push(h.NOTEQUAL),r.push("!="),o++,i=n.charAt(o++);else{if("/"==(i=n.charAt(o++))){e.push(h.DOUBLESLASH),r.push("//"),i=n.charAt(o++);continue}e.push(h.SLASH),r.push("/")}else e.push(h.DOUBLECOLON),r.push("::"),o++,i=n.charAt(o++);else{var a;if(e.length>0&&(a=e[e.length-1])!=h.AT&&a!=h.DOUBLECOLON&&a!=h.LEFTPARENTHESIS&&a!=h.LEFTBRACKET&&a!=h.AND&&a!=h.OR&&a!=h.MOD&&a!=h.DIV&&a!=h.MULTIPLYOPERATOR&&a!=h.SLASH&&a!=h.DOUBLESLASH&&a!=h.BAR&&a!=h.PLUS&&a!=h.MINUS&&a!=h.EQUALS&&a!=h.NOTEQUAL&&a!=h.LESSTHAN&&a!=h.LESSTHANOREQUAL&&a!=h.GREATERTHAN&&a!=h.GREATERTHANOREQUAL){e.push(h.MULTIPLYOPERATOR),r.push(i),i=n.charAt(o++);continue}e.push(h.ASTERISKNAMETEST),r.push(i),i=n.charAt(o++)}else{for(var u=i,c="";o<n.length&&(i=n.charAt(o))!==u;)c+=i,o+=1;if(i!==u)throw rt.fromMessage("Unterminated string literal: "+u+c);o+=1,e.push(h.LITERAL),r.push(c),i=n.charAt(o++)}else{if("."==(i=n.charAt(o++))){e.push(h.DOUBLEDOT),r.push(".."),i=n.charAt(o++);continue}if(i>="0"&&i<="9"){var l="."+i;for(i=n.charAt(o++);i>="0"&&i<="9";)l+=i,i=n.charAt(o++);e.push(h.NUMBER),r.push(l);continue}e.push(h.DOT),r.push(".")}else e.push(h.DOLLAR),r.push(i),i=n.charAt(o++);else e.push(h.EQUALS),r.push(i),i=n.charAt(o++);else e.push(h.MINUS),r.push(i),i=n.charAt(o++);else e.push(h.PLUS),r.push(i),i=n.charAt(o++);else e.push(h.BAR),r.push(i),i=n.charAt(o++);else e.push(h.COMMA),r.push(i),i=n.charAt(o++);else e.push(h.AT),r.push(i),i=n.charAt(o++);else e.push(h.RIGHTBRACKET),r.push(i),i=n.charAt(o++);else e.push(h.LEFTBRACKET),r.push(i),i=n.charAt(o++);else e.push(h.RIGHTPARENTHESIS),r.push(i),i=n.charAt(o++);else e.push(h.LEFTPARENTHESIS),r.push(i),i=n.charAt(o++)}return e.push(1),r.push("[EOF]"),[e,r]},h.SHIFT="s",h.REDUCE="r",h.ACCEPT="a",h.prototype.parse=function(t){var e,r,n=this.tokenize(t);if(null!=n){e=n[0],r=n[1];var o,i,s=0,a=[],u=[],c=[];for(a.push(0),u.push(1),c.push("_S"),o=e[s],i=r[s++];;)switch(t=a[a.length-1],h.actionTable[t].charAt(o-1)){case h.SHIFT:u.push(-o),c.push(i),a.push(h.actionTableNumber[t].charCodeAt(o-1)-32),o=e[s],i=r[s++];break;case h.REDUCE:for(var l=h.productions[h.actionTableNumber[t].charCodeAt(o-1)-32][1],f=[],d=0;d<l;d++)u.pop(),f.unshift(c.pop()),a.pop();var g=a[a.length-1];u.push(h.productions[h.actionTableNumber[t].charCodeAt(o-1)-32][0]),null==this.reduceActions[h.actionTableNumber[t].charCodeAt(o-1)-32]?c.push(f[0]):c.push(this.reduceActions[h.actionTableNumber[t].charCodeAt(o-1)-32](f)),a.push(h.gotoTable[g].charCodeAt(h.productions[h.actionTableNumber[t].charCodeAt(o-1)-32][0]-2)-33);break;case h.ACCEPT:return new p(c.pop());default:throw new Error("XPath parse error")}}},p.prototype=new Object,p.prototype.constructor=p,p.superclass=Object.prototype,p.prototype.toString=function(){return this.expression.toString()},p.prototype.evaluate=function(t){return t.contextNode=t.expressionContextNode,t.contextSize=1,t.contextPosition=1,t.isHtml&&(f(t,"caseInsensitive",!0),f(t,"allowAnyNamespaceForNoPrefix",!0)),f(t,"caseInsensitive",!1),this.expression.evaluate(t)},p.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",p.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",d.prototype=new Object,d.prototype.constructor=d,d.superclass=Object.prototype,d.prototype.init=function(){},d.prototype.toString=function(){return"<Expression>"},d.prototype.evaluate=function(t){throw new Error("Could not evaluate expression.")},g.prototype=new d,g.prototype.constructor=g,g.superclass=d.prototype,g.prototype.init=function(t){this.rhs=t},m.prototype=new g,m.prototype.constructor=m,m.superclass=g.prototype,m.prototype.init=function(t){m.superclass.init.call(this,t)},m.prototype.evaluate=function(t){return this.rhs.evaluate(t).number().negate()},m.prototype.toString=function(){return"-"+this.rhs.toString()},y.prototype=new d,y.prototype.constructor=y,y.superclass=d.prototype,y.prototype.init=function(t,e){this.lhs=t,this.rhs=e},v.prototype=new y,v.prototype.constructor=v,v.superclass=y.prototype,v.prototype.init=function(t,e){v.superclass.init.call(this,t,e)},v.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},v.prototype.evaluate=function(t){var e=this.lhs.evaluate(t).bool();return e.booleanValue()?e:this.rhs.evaluate(t).bool()},N.prototype=new y,N.prototype.constructor=N,N.superclass=y.prototype,N.prototype.init=function(t,e){N.superclass.init.call(this,t,e)},N.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},N.prototype.evaluate=function(t){var e=this.lhs.evaluate(t).bool();return e.booleanValue()?this.rhs.evaluate(t).bool():e},E.prototype=new y,E.prototype.constructor=E,E.superclass=y.prototype,E.prototype.init=function(t,e){E.superclass.init.call(this,t,e)},E.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},E.prototype.evaluate=function(t){return this.lhs.evaluate(t).equals(this.rhs.evaluate(t))},w.prototype=new y,w.prototype.constructor=w,w.superclass=y.prototype,w.prototype.init=function(t,e){w.superclass.init.call(this,t,e)},w.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},w.prototype.evaluate=function(t){return this.lhs.evaluate(t).notequal(this.rhs.evaluate(t))},b.prototype=new y,b.prototype.constructor=b,b.superclass=y.prototype,b.prototype.init=function(t,e){b.superclass.init.call(this,t,e)},b.prototype.evaluate=function(t){return this.lhs.evaluate(t).lessthan(this.rhs.evaluate(t))},b.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},T.prototype=new y,T.prototype.constructor=T,T.superclass=y.prototype,T.prototype.init=function(t,e){T.superclass.init.call(this,t,e)},T.prototype.evaluate=function(t){return this.lhs.evaluate(t).greaterthan(this.rhs.evaluate(t))},T.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},S.prototype=new y,S.prototype.constructor=S,S.superclass=y.prototype,S.prototype.init=function(t,e){S.superclass.init.call(this,t,e)},S.prototype.evaluate=function(t){return this.lhs.evaluate(t).lessthanorequal(this.rhs.evaluate(t))},S.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},A.prototype=new y,A.prototype.constructor=A,A.superclass=y.prototype,A.prototype.init=function(t,e){A.superclass.init.call(this,t,e)},A.prototype.evaluate=function(t){return this.lhs.evaluate(t).greaterthanorequal(this.rhs.evaluate(t))},A.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},x.prototype=new y,x.prototype.constructor=x,x.superclass=y.prototype,x.prototype.init=function(t,e){x.superclass.init.call(this,t,e)},x.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().plus(this.rhs.evaluate(t).number())},x.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},O.prototype=new y,O.prototype.constructor=O,O.superclass=y.prototype,O.prototype.init=function(t,e){O.superclass.init.call(this,t,e)},O.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().minus(this.rhs.evaluate(t).number())},O.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},R.prototype=new y,R.prototype.constructor=R,R.superclass=y.prototype,R.prototype.init=function(t,e){R.superclass.init.call(this,t,e)},R.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().multiply(this.rhs.evaluate(t).number())},R.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},P.prototype=new y,P.prototype.constructor=P,P.superclass=y.prototype,P.prototype.init=function(t,e){P.superclass.init.call(this,t,e)},P.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().div(this.rhs.evaluate(t).number())},P.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},C.prototype=new y,C.prototype.constructor=C,C.superclass=y.prototype,C.prototype.init=function(t,e){C.superclass.init.call(this,t,e)},C.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().mod(this.rhs.evaluate(t).number())},C.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},I.prototype=new y,I.prototype.constructor=I,I.superclass=y.prototype,I.prototype.init=function(t,e){I.superclass.init.call(this,t,e)},I.prototype.evaluate=function(t){return this.lhs.evaluate(t).nodeset().union(this.rhs.evaluate(t).nodeset())},I.prototype.toString=function(){return o(i,[this.lhs,this.rhs]).join(" | ")},_.prototype=new d,_.prototype.constructor=_,_.superclass=d.prototype,_.prototype.init=function(t,e,r){_.superclass.init.call(this),this.filter=t,this.filterPredicates=e,this.locationPath=r},_.applyPredicates=function(t,n,o){if(0===t.length)return o;var i=n.extend({});return r(function(t,r){return i.contextSize=t.length,n=function(t,e){return i.contextNode=t,i.contextPosition=e+1,_.predicateMatches(r,i)},o=[],e(function(t,e){n(t,e)&&o.push(t)},t),o;var n,o},o,t)},_.getRoot=function(t,e){var r=e[0];if(9===r.nodeType)return r;if(t.virtualRoot)return t.virtualRoot;var n=r.ownerDocument;if(n)return n;for(var o=r;null!=o.parentNode;)o=o.parentNode;return o},_.applyStep=function(t,e,r){var n=[];switch(e.contextNode=r,t.axis){case F.ANCESTOR:if(e.contextNode===e.virtualRoot)break;for(o=2==e.contextNode.nodeType?_.getOwnerElement(e.contextNode):e.contextNode.parentNode;null!=o&&(t.nodeTest.matches(o,e)&&n.push(o),o!==e.virtualRoot);)o=o.parentNode;break;case F.ANCESTORORSELF:for(var o=e.contextNode;null!=o&&(t.nodeTest.matches(o,e)&&n.push(o),o!==e.virtualRoot);o=2==o.nodeType?_.getOwnerElement(o):o.parentNode);break;case F.ATTRIBUTE:var i=e.contextNode.attributes;if(null!=i)for(var s=0;s<i.length;s++){o=i.item(s);t.nodeTest.matches(o,e)&&n.push(o)}break;case F.CHILD:for(o=e.contextNode.firstChild;null!=o;o=o.nextSibling)t.nodeTest.matches(o,e)&&n.push(o);break;case F.DESCENDANT:for(var a=[e.contextNode.firstChild];a.length>0;)for(o=a.pop();null!=o;)t.nodeTest.matches(o,e)&&n.push(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling;break;case F.DESCENDANTORSELF:t.nodeTest.matches(e.contextNode,e)&&n.push(e.contextNode);for(a=[e.contextNode.firstChild];a.length>0;)for(o=a.pop();null!=o;)t.nodeTest.matches(o,e)&&n.push(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling;break;case F.FOLLOWING:if(e.contextNode===e.virtualRoot)break;a=[];null!=e.contextNode.firstChild?a.unshift(e.contextNode.firstChild):a.unshift(e.contextNode.nextSibling);for(o=e.contextNode.parentNode;null!=o&&9!=o.nodeType&&o!==e.virtualRoot;o=o.parentNode)a.unshift(o.nextSibling);do{for(o=a.pop();null!=o;)t.nodeTest.matches(o,e)&&n.push(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling}while(a.length>0);break;case F.FOLLOWINGSIBLING:if(e.contextNode===e.virtualRoot)break;for(o=e.contextNode.nextSibling;null!=o;o=o.nextSibling)t.nodeTest.matches(o,e)&&n.push(o);break;case F.NAMESPACE:var u={};if(1==e.contextNode.nodeType){u.xml=p.XML_NAMESPACE_URI,u.xmlns=p.XMLNS_NAMESPACE_URI;for(o=e.contextNode;null!=o&&1==o.nodeType;o=o.parentNode)for(s=0;s<o.attributes.length;s++){var c=o.attributes.item(s),l=String(c.name);if("xmlns"==l)null==u[""]&&(u[""]=c.value);else if(l.length>6&&"xmlns:"==l.substring(0,6)){null==u[h=l.substring(6,l.length)]&&(u[h]=c.value)}}for(var h in u){var f=new X(h,u[h],e.contextNode);t.nodeTest.matches(f,e)&&n.push(f)}}break;case F.PARENT:o=null,e.contextNode!==e.virtualRoot&&(o=2==e.contextNode.nodeType?_.getOwnerElement(e.contextNode):e.contextNode.parentNode),null!=o&&t.nodeTest.matches(o,e)&&n.push(o);break;case F.PRECEDING:a=null!=e.virtualRoot?[e.virtualRoot]:[L(e.contextNode)];t:for(;a.length>0;)for(o=a.pop();null!=o;){if(o==e.contextNode)break t;t.nodeTest.matches(o,e)&&n.unshift(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling}break;case F.PRECEDINGSIBLING:if(e.contextNode===e.virtualRoot)break;for(o=e.contextNode.previousSibling;null!=o;o=o.previousSibling)t.nodeTest.matches(o,e)&&n.push(o);break;case F.SELF:t.nodeTest.matches(e.contextNode,e)&&n.push(e.contextNode)}return n},_.applySteps=function(t,e,n){return r(D.bind(null,e),n,t)},_.prototype.applyFilter=function(t,e){if(!this.filter)return{nodes:[t.contextNode]};var r=this.filter.evaluate(t);if(!et.instance_of(r,W)){if(null!=this.filterPredicates&&this.filterPredicates.length>0||null!=this.locationPath)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:r}}return{nodes:_.applyPredicates(this.filterPredicates||[],e,r.toUnsortedArray())}},_.applyLocationPath=function(t,e,r){if(!t)return r;var n=t.absolute?[_.getRoot(e,r)]:r;return _.applySteps(t.steps,e,n)},_.prototype.evaluate=function(t){var e=l(new Q,t),r=this.applyFilter(t,e);if("nonNodes"in r)return r.nonNodes;var n=new W;return n.addArray(_.applyLocationPath(this.locationPath,e,r.nodes)),n},_.predicateMatches=function(t,e){var r=t.evaluate(e);return et.instance_of(r,$)?e.contextPosition===r.numberValue():r.booleanValue()},_.predicateString=function(t){return a("[","]",t.toString())},_.predicatesString=function(t){return s("",o(_.predicateString,t))},_.prototype.toString=function(){if(null!=this.filter){var t=i(this.filter);return et.instance_of(this.filter,H)?a("'","'",t):null!=this.filterPredicates&&this.filterPredicates.length?a("(",")",t)+_.predicatesString(this.filterPredicates):null!=this.locationPath?t+(this.locationPath.absolute?"":"/")+i(this.locationPath):t}return i(this.locationPath)},_.getOwnerElement=function(t){if(t.ownerElement)return t.ownerElement;try{if(t.selectSingleNode)return t.selectSingleNode("..")}catch(s){}for(var e=(9==t.nodeType?t:t.ownerDocument).getElementsByTagName("*"),r=0;r<e.length;r++)for(var n=e.item(r),o=n.attributes,i=0;i<o.length;i++){if(o.item(i)===t)return n}return null},M.prototype=new Object,M.prototype.constructor=M,M.superclass=Object.prototype,M.prototype.init=function(t,e){this.absolute=t,this.steps=e},M.prototype.toString=function(){return(this.absolute?"/":"")+o(i,this.steps).join("/")},F.prototype=new Object,F.prototype.constructor=F,F.superclass=Object.prototype,F.prototype.init=function(t,e,r){this.axis=t,this.nodeTest=e,this.predicates=r},F.prototype.toString=function(){return F.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+_.predicatesString(this.predicates)},F.ANCESTOR=0,F.ANCESTORORSELF=1,F.ATTRIBUTE=2,F.CHILD=3,F.DESCENDANT=4,F.DESCENDANTORSELF=5,F.FOLLOWING=6,F.FOLLOWINGSIBLING=7,F.NAMESPACE=8,F.PARENT=9,F.PRECEDING=10,F.PRECEDINGSIBLING=11,F.SELF=12,F.STEPNAMES=r(function(t,e){return t[e[0]]=e[1],t},{},[[F.ANCESTOR,"ancestor"],[F.ANCESTORORSELF,"ancestor-or-self"],[F.ATTRIBUTE,"attribute"],[F.CHILD,"child"],[F.DESCENDANT,"descendant"],[F.DESCENDANTORSELF,"descendant-or-self"],[F.FOLLOWING,"following"],[F.FOLLOWINGSIBLING,"following-sibling"],[F.NAMESPACE,"namespace"],[F.PARENT,"parent"],[F.PRECEDING,"preceding"],[F.PRECEDINGSIBLING,"preceding-sibling"],[F.SELF,"self"]]),U.prototype=new Object,U.prototype.constructor=U,U.superclass=Object.prototype,U.prototype.init=function(t,e){this.type=t,this.value=e},U.prototype.toString=function(){return"<unknown nodetest type>"},U.prototype.matches=function(t,e){console.warn("unknown node test type")},U.NAMETESTANY=0,U.NAMETESTPREFIXANY=1,U.NAMETESTQNAME=2,U.COMMENT=3,U.TEXT=4,U.PI=5,U.NODE=6,U.isNodeType=function(t){return function(e){return function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return!0;return!1}(t,e.nodeType)}},U.makeNodeTestType=function(t,e,r){var n=r||function(){};return n.prototype=new U(t),n.prototype.constructor=n,l(n.prototype,e),n},U.makeNodeTypeTest=function(t,e,r){return new(U.makeNodeTestType(t,{matches:U.isNodeType(e),toString:(n=r,function(){return n})}));var n},U.hasPrefix=function(t){return t.prefix||-1!==(t.nodeName||t.tagName).indexOf(":")},U.isElementOrAttribute=U.isNodeType([1,2]),U.nameSpaceMatches=function(t,e,r){var n=r.namespaceURI||"";if(!t)return!n||e.allowAnyNamespaceForNoPrefix&&!U.hasPrefix(r);var o=e.namespaceResolver.getNamespace(t,e.expressionContextNode);if(null==o)throw new Error("Cannot resolve QName "+t);return o===n},U.localNameMatches=function(t,e,r){var n=r.localName||r.nodeName;return e.caseInsensitive?t.toLowerCase()===n.toLowerCase():t===n},U.NameTestPrefixAny=U.makeNodeTestType(U.NAMETESTPREFIXANY,{matches:function(t,e){return U.isElementOrAttribute(t)&&U.nameSpaceMatches(this.prefix,e,t)},toString:function(){return this.prefix+":*"}},function(t){this.prefix=t}),U.NameTestQName=U.makeNodeTestType(U.NAMETESTQNAME,{matches:function(t,e){return U.isNodeType([1,2,X.XPATH_NAMESPACE_NODE])(t)&&U.nameSpaceMatches(this.prefix,e,t)&&U.localNameMatches(this.localName,e,t)},toString:function(){return this.name}},function(t){var e=t.split(":");this.name=t,this.prefix=e.length>1?e[0]:null,this.localName=e[e.length>1?1:0]}),U.PITest=U.makeNodeTestType(U.PI,{matches:function(t,e){return U.isNodeType([7])(t)&&(t.target||t.nodeName)===this.name},toString:function(){return a('processing-instruction("','")',this.name)}},function(t){this.name=t}),U.nameTestAny=U.makeNodeTypeTest(U.NAMETESTANY,[1,2,X.XPATH_NAMESPACE_NODE],"*"),U.textTest=U.makeNodeTypeTest(U.TEXT,[3,4],"text()"),U.commentTest=U.makeNodeTypeTest(U.COMMENT,[8],"comment()"),U.nodeTest=U.makeNodeTypeTest(U.NODE,[1,2,3,4,7,8,9],"node()"),U.anyPiTest=U.makeNodeTypeTest(U.PI,[7],"processing-instruction()"),k.prototype=new d,k.prototype.constructor=k,k.superclass=d.prototype,k.prototype.init=function(t){this.variable=t},k.prototype.toString=function(){return"$"+this.variable},k.prototype.evaluate=function(t){var e=et.resolveQName(this.variable,t.namespaceResolver,t.contextNode,!1);if(null==e[0])throw new Error("Cannot resolve QName "+fn);var r=t.variableResolver.getVariable(e[1],e[0]);if(!r)throw rt.fromMessage("Undeclared variable: "+this.toString());return r},B.prototype=new d,B.prototype.constructor=B,B.superclass=d.prototype,B.prototype.init=function(t,e){this.functionName=t,this.arguments=e},B.prototype.toString=function(){for(var t=this.functionName+"(",e=0;e<this.arguments.length;e++)e>0&&(t+=", "),t+=this.arguments[e].toString();return t+")"},B.prototype.evaluate=function(t){var e=Z.getFunctionFromContext(this.functionName,t);if(!e)throw new Error("Unknown function "+this.functionName);var r=[t].concat(this.arguments);return e.apply(t.functionResolver.thisArg,r)};var j,V,q,G=new Object;function H(t){arguments.length>0&&this.init(t)}function $(t){arguments.length>0&&this.init(t)}function Y(t){arguments.length>0&&this.init(t)}function J(t){this.init(t)}function W(){this.init()}function X(t,e,r){this.isXPathNamespace=!0,this.ownerDocument=r.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.namespaceURI=e,this.nodeValue=e,this.ownerElement=r,this.nodeType=X.XPATH_NAMESPACE_NODE}function Q(t,e,r){this.variableResolver=null!=t?t:new z,this.namespaceResolver=null!=e?e:new K,this.functionResolver=null!=r?r:new Z}function z(){}function Z(t){this.thisArg=null!=t?t:tt,this.functions=new Object,this.addStandardFunctions()}function K(){}G.equals=function(t,e){return t.equals(e)},G.notequal=function(t,e){return t.notequal(e)},G.lessthan=function(t,e){return t.lessthan(e)},G.greaterthan=function(t,e){return t.greaterthan(e)},G.lessthanorequal=function(t,e){return t.lessthanorequal(e)},G.greaterthanorequal=function(t,e){return t.greaterthanorequal(e)},H.prototype=new d,H.prototype.constructor=H,H.superclass=d.prototype,H.prototype.init=function(t){this.str=String(t)},H.prototype.toString=function(){return this.str},H.prototype.evaluate=function(t){return this},H.prototype.string=function(){return this},H.prototype.number=function(){return new $(this.str)},H.prototype.bool=function(){return new Y(this.str)},H.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},H.prototype.stringValue=function(){return this.str},H.prototype.numberValue=function(){return this.number().numberValue()},H.prototype.booleanValue=function(){return this.bool().booleanValue()},H.prototype.equals=function(t){return et.instance_of(t,Y)?this.bool().equals(t):et.instance_of(t,$)?this.number().equals(t):et.instance_of(t,W)?t.compareWithString(this,G.equals):new Y(this.str==t.str)},H.prototype.notequal=function(t){return et.instance_of(t,Y)?this.bool().notequal(t):et.instance_of(t,$)?this.number().notequal(t):et.instance_of(t,W)?t.compareWithString(this,G.notequal):new Y(this.str!=t.str)},H.prototype.lessthan=function(t){return this.number().lessthan(t)},H.prototype.greaterthan=function(t){return this.number().greaterthan(t)},H.prototype.lessthanorequal=function(t){return this.number().lessthanorequal(t)},H.prototype.greaterthanorequal=function(t){return this.number().greaterthanorequal(t)},$.prototype=new d,$.prototype.constructor=$,$.superclass=d.prototype,$.prototype.init=function(t){this.num="string"==typeof t?this.parse(t):Number(t)},$.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,$.prototype.parse=function(t){return this.numberFormat.test(t)?parseFloat(t):Number.NaN},$.prototype.toString=function(){var t=this.num.toString();return-1!==t.indexOf("e-")?function(t){for(var e=t.split("e-"),r=e[0].replace(".",""),n=Number(e[1]),o=0;o<n-1;o+=1)r="0"+r;return"0."+r}(t):-1!==t.indexOf("e")?function(t){for(var e=t.split("e"),r=e[0].replace(".",""),n=Number(e[1])+1-r.length,o=0;o<n;o+=1)r+="0";return r}(t):t},$.prototype.evaluate=function(t){return this},$.prototype.string=function(){return new H(this.toString())},$.prototype.number=function(){return this},$.prototype.bool=function(){return new Y(this.num)},$.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},$.prototype.stringValue=function(){return this.string().stringValue()},$.prototype.numberValue=function(){return this.num},$.prototype.booleanValue=function(){return this.bool().booleanValue()},$.prototype.negate=function(){return new $(-this.num)},$.prototype.equals=function(t){return et.instance_of(t,Y)?this.bool().equals(t):et.instance_of(t,H)?this.equals(t.number()):et.instance_of(t,W)?t.compareWithNumber(this,G.equals):new Y(this.num==t.num)},$.prototype.notequal=function(t){return et.instance_of(t,Y)?this.bool().notequal(t):et.instance_of(t,H)?this.notequal(t.number()):et.instance_of(t,W)?t.compareWithNumber(this,G.notequal):new Y(this.num!=t.num)},$.prototype.lessthan=function(t){return et.instance_of(t,W)?t.compareWithNumber(this,G.greaterthan):et.instance_of(t,Y)||et.instance_of(t,H)?this.lessthan(t.number()):new Y(this.num<t.num)},$.prototype.greaterthan=function(t){return et.instance_of(t,W)?t.compareWithNumber(this,G.lessthan):et.instance_of(t,Y)||et.instance_of(t,H)?this.greaterthan(t.number()):new Y(this.num>t.num)},$.prototype.lessthanorequal=function(t){return et.instance_of(t,W)?t.compareWithNumber(this,G.greaterthanorequal):et.instance_of(t,Y)||et.instance_of(t,H)?this.lessthanorequal(t.number()):new Y(this.num<=t.num)},$.prototype.greaterthanorequal=function(t){return et.instance_of(t,W)?t.compareWithNumber(this,G.lessthanorequal):et.instance_of(t,Y)||et.instance_of(t,H)?this.greaterthanorequal(t.number()):new Y(this.num>=t.num)},$.prototype.plus=function(t){return new $(this.num+t.num)},$.prototype.minus=function(t){return new $(this.num-t.num)},$.prototype.multiply=function(t){return new $(this.num*t.num)},$.prototype.div=function(t){return new $(this.num/t.num)},$.prototype.mod=function(t){return new $(this.num%t.num)},Y.prototype=new d,Y.prototype.constructor=Y,Y.superclass=d.prototype,Y.prototype.init=function(t){this.b=Boolean(t)},Y.prototype.toString=function(){return this.b.toString()},Y.prototype.evaluate=function(t){return this},Y.prototype.string=function(){return new H(this.b)},Y.prototype.number=function(){return new $(this.b)},Y.prototype.bool=function(){return this},Y.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},Y.prototype.stringValue=function(){return this.string().stringValue()},Y.prototype.numberValue=function(){return this.number().numberValue()},Y.prototype.booleanValue=function(){return this.b},Y.prototype.not=function(){return new Y(!this.b)},Y.prototype.equals=function(t){return et.instance_of(t,H)||et.instance_of(t,$)?this.equals(t.bool()):et.instance_of(t,W)?t.compareWithBoolean(this,G.equals):new Y(this.b==t.b)},Y.prototype.notequal=function(t){return et.instance_of(t,H)||et.instance_of(t,$)?this.notequal(t.bool()):et.instance_of(t,W)?t.compareWithBoolean(this,G.notequal):new Y(this.b!=t.b)},Y.prototype.lessthan=function(t){return this.number().lessthan(t)},Y.prototype.greaterthan=function(t){return this.number().greaterthan(t)},Y.prototype.lessthanorequal=function(t){return this.number().lessthanorequal(t)},Y.prototype.greaterthanorequal=function(t){return this.number().greaterthanorequal(t)},Y.true_=new Y(!0),Y.false_=new Y(!1),J.prototype=new Object,J.prototype.constructor=J,J.superclass=Object.prototype,J.prototype.init=function(t){this.left=null,this.right=null,this.node=t,this.depth=1},J.prototype.balance=function(){var t=null==this.left?0:this.left.depth,e=null==this.right?0:this.right.depth;if(t>e+1)(null==this.left.left?0:this.left.left.depth)<(null==this.left.right?0:this.left.right.depth)&&this.left.rotateRR(),this.rotateLL();else if(t+1<e){var r=null==this.right.right?0:this.right.right.depth;(null==this.right.left?0:this.right.left.depth)>r&&this.right.rotateLL(),this.rotateRR()}},J.prototype.rotateLL=function(){var t=this.node,e=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=e,this.right.node=t,this.right.updateInNewLocation(),this.updateInNewLocation()},J.prototype.rotateRR=function(){var t=this.node,e=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=e,this.left.node=t,this.left.updateInNewLocation(),this.updateInNewLocation()},J.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},J.prototype.getDepthFromChildren=function(){this.depth=null==this.node?0:1,null!=this.left&&(this.depth=this.left.depth+1),null!=this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)},J.prototype.add=function(t){if(t===this.node)return!1;var e=function(t,e){if(t===e)return 0;if(t.compareDocumentPosition){var r=t.compareDocumentPosition(e);return 1&r?1:10&r?1:20&r?-1:0}for(var n=0,o=0,i=t;null!=i;i=i.parentNode||i.ownerElement)n++;for(var s=e;null!=s;s=s.parentNode||s.ownerElement)o++;if(n>o){for(;n>o;)t=t.parentNode||t.ownerElement,n--;if(t===e)return 1}else if(o>n){for(;o>n;)e=e.parentNode||e.ownerElement,o--;if(t===e)return-1}for(var a=t.parentNode||t.ownerElement,u=e.parentNode||e.ownerElement;a!==u;)e=u,a=(t=a).parentNode||t.ownerElement,u=e.parentNode||e.ownerElement;var c=et.isAttribute(t),l=et.isAttribute(e);if(c&&!l)return-1;if(!c&&l)return 1;if(a)for(var h=c?a.attributes:a.childNodes,p=h.length,f=0;f<p;f+=1){var d=h[f];if(d===t)return-1;if(d===e)return 1}throw new Error("Unexpected: could not determine node order")}(t,this.node),r=!1;return-1==e?null==this.left?(this.left=new J(t),r=!0):(r=this.left.add(t))&&this.balance():1==e&&(null==this.right?(this.right=new J(t),r=!0):(r=this.right.add(t))&&this.balance()),r&&this.getDepthFromChildren(),r},W.prototype=new d,W.prototype.constructor=W,W.superclass=d.prototype,W.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},W.prototype.toString=function(){var t=this.first();return null==t?"":this.stringForNode(t)},W.prototype.evaluate=function(t){return this},W.prototype.string=function(){return new H(this.toString())},W.prototype.stringValue=function(){return this.toString()},W.prototype.number=function(){return new $(this.string())},W.prototype.numberValue=function(){return Number(this.string())},W.prototype.bool=function(){return new Y(this.booleanValue())},W.prototype.booleanValue=function(){return!!this.size},W.prototype.nodeset=function(){return this},W.prototype.stringForNode=function(t){return 9==t.nodeType||1==t.nodeType||11===t.nodeType?this.stringForContainerNode(t):2===t.nodeType?t.value||t.nodeValue:t.isNamespaceNode?t.namespace:t.nodeValue},W.prototype.stringForContainerNode=function(t){for(var e="",r=t.firstChild;null!=r;r=r.nextSibling){var n=r.nodeType;1!==n&&3!==n&&4!==n&&9!==n&&11!==n||(e+=this.stringForNode(r))}return e},W.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new J(this.nodes[0]);for(var t=1;t<this.nodes.length;t+=1)this.tree.add(this.nodes[t])}return this.tree},W.prototype.first=function(){var t=this.buildTree();if(null==t)return null;for(;null!=t.left;)t=t.left;return t.node},W.prototype.add=function(t){for(var e=0;e<this.nodes.length;e+=1)if(t===this.nodes[e])return;this.tree=null,this.nodes.push(t),this.size+=1},W.prototype.addArray=function(t){var r=this;e(function(t){r.add(t)},t)},W.prototype.toArray=function(){var t=[];return this.toArrayRec(this.buildTree(),t),t},W.prototype.toArrayRec=function(t,e){null!=t&&(this.toArrayRec(t.left,e),e.push(t.node),this.toArrayRec(t.right,e))},W.prototype.toUnsortedArray=function(){return this.nodes.slice()},W.prototype.compareWithString=function(t,e){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++){var o=r[n],i=e(new H(this.stringForNode(o)),t);if(i.booleanValue())return i}return new Y(!1)},W.prototype.compareWithNumber=function(t,e){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++){var o=r[n],i=e(new $(this.stringForNode(o)),t);if(i.booleanValue())return i}return new Y(!1)},W.prototype.compareWithBoolean=function(t,e){return e(this.bool(),t)},W.prototype.compareWithNodeSet=function(t,e){for(var r=this.toUnsortedArray(),n=function(t,r){return e(r,t)},o=0;o<r.length;o++){var i=new H(this.stringForNode(r[o])),s=t.compareWithString(i,n);if(s.booleanValue())return s}return new Y(!1)},W.compareWith=(j=function(t,e){return et.instance_of(e,H)?this.compareWithString(e,t):et.instance_of(e,$)?this.compareWithNumber(e,t):et.instance_of(e,Y)?this.compareWithBoolean(e,t):this.compareWithNodeSet(e,t)},V=Array.prototype.slice,q=j.length,function t(){var e=V.call(arguments);return e.length<q?function(t,e){return function(){return e.apply(this,t.concat(V.call(arguments)))}}(e,t):j.apply(this,V.apply(arguments,[0,q]))}),W.prototype.equals=W.compareWith(G.equals),W.prototype.notequal=W.compareWith(G.notequal),W.prototype.lessthan=W.compareWith(G.lessthan),W.prototype.greaterthan=W.compareWith(G.greaterthan),W.prototype.lessthanorequal=W.compareWith(G.lessthanorequal),W.prototype.greaterthanorequal=W.compareWith(G.greaterthanorequal),W.prototype.union=function(t){var e=new W;return e.addArray(this.toUnsortedArray()),e.addArray(t.toUnsortedArray()),e},X.prototype=new Object,X.prototype.constructor=X,X.superclass=Object.prototype,X.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},Q.prototype=new Object,Q.prototype.constructor=Q,Q.superclass=Object.prototype,Q.prototype.extend=function(t){return l(new Q,this,t)},z.prototype=new Object,z.prototype.constructor=z,z.superclass=Object.prototype,z.prototype.getVariable=function(t,e){return null},Z.prototype=new Object,Z.prototype.constructor=Z,Z.superclass=Object.prototype,Z.prototype.addStandardFunctions=function(){this.functions["{}last"]=tt.last,this.functions["{}position"]=tt.position,this.functions["{}count"]=tt.count,this.functions["{}id"]=tt.id,this.functions["{}local-name"]=tt.localName,this.functions["{}namespace-uri"]=tt.namespaceURI,this.functions["{}name"]=tt.name,this.functions["{}string"]=tt.string,this.functions["{}concat"]=tt.concat,this.functions["{}starts-with"]=tt.startsWith,this.functions["{}contains"]=tt.contains,this.functions["{}substring-before"]=tt.substringBefore,this.functions["{}substring-after"]=tt.substringAfter,this.functions["{}substring"]=tt.substring,this.functions["{}string-length"]=tt.stringLength,this.functions["{}normalize-space"]=tt.normalizeSpace,this.functions["{}translate"]=tt.translate,this.functions["{}boolean"]=tt.boolean_,this.functions["{}not"]=tt.not,this.functions["{}true"]=tt.true_,this.functions["{}false"]=tt.false_,this.functions["{}lang"]=tt.lang,this.functions["{}number"]=tt.number,this.functions["{}sum"]=tt.sum,this.functions["{}floor"]=tt.floor,this.functions["{}ceiling"]=tt.ceiling,this.functions["{}round"]=tt.round},Z.prototype.addFunction=function(t,e,r){this.functions["{"+t+"}"+e]=r},Z.getFunctionFromContext=function(t,e){var r=et.resolveQName(t,e.namespaceResolver,e.contextNode,!1);if(null===r[0])throw new Error("Cannot resolve QName "+name);return e.functionResolver.getFunction(r[1],r[0])},Z.prototype.getFunction=function(t,e){return this.functions["{"+e+"}"+t]},K.prototype=new Object,K.prototype.constructor=K,K.superclass=Object.prototype,K.prototype.getNamespace=function(t,e){if("xml"==t)return p.XML_NAMESPACE_URI;if("xmlns"==t)return p.XMLNS_NAMESPACE_URI;for(9==e.nodeType?e=e.documentElement:2==e.nodeType?e=_.getOwnerElement(e):1!=e.nodeType&&(e=e.parentNode);null!=e&&1==e.nodeType;){for(var r=e.attributes,n=0;n<r.length;n++){var o=r.item(n),i=o.name||o.nodeName;if("xmlns"===i&&""===t||i==="xmlns:"+t)return String(o.value||o.nodeValue)}e=e.parentNode}return null};var tt=new Object;tt.last=function(t){if(1!=arguments.length)throw new Error("Function last expects ()");return new $(t.contextSize)},tt.position=function(t){if(1!=arguments.length)throw new Error("Function position expects ()");return new $(t.contextPosition)},tt.count=function(){var t,e=arguments[0];if(2!=arguments.length||!et.instance_of(t=arguments[1].evaluate(e),W))throw new Error("Function count expects (node-set)");return new $(t.size)},tt.id=function(){var t,e=arguments[0];if(2!=arguments.length)throw new Error("Function id expects (object)");t=arguments[1].evaluate(e);for(var r=(t=et.instance_of(t,W)?t.toArray().join(" "):t.stringValue()).split(/[\x0d\x0a\x09\x20]+/),n=new W,o=9==e.contextNode.nodeType?e.contextNode:e.contextNode.ownerDocument,i=0;i<r.length;i++){var s;null!=(s=o.getElementById?o.getElementById(r[i]):et.getElementById(o,r[i]))&&(n.add(s),0)}return n},tt.localName=function(t,e){var r;if(1==arguments.length)r=t.contextNode;else{if(2!=arguments.length)throw new Error("Function local-name expects (node-set?)");r=e.evaluate(t).first()}return new H(null==r?"":r.localName||r.baseName||r.target||r.nodeName||"")},tt.namespaceURI=function(){var t,e=arguments[0];if(1==arguments.length)t=e.contextNode;else{if(2!=arguments.length)throw new Error("Function namespace-uri expects (node-set?)");t=arguments[1].evaluate(e).first()}return new H(null==t?"":t.namespaceURI)},tt.name=function(){var t,e=arguments[0];if(1==arguments.length)t=e.contextNode;else{if(2!=arguments.length)throw new Error("Function name expects (node-set?)");t=arguments[1].evaluate(e).first()}return null==t?new H(""):1==t.nodeType?new H(t.nodeName):2==t.nodeType?new H(t.name||t.nodeName):7===t.nodeType?new H(t.target||t.nodeName):null==t.localName?new H(""):new H(t.localName)},tt.string=function(){var t=arguments[0];if(1==arguments.length)return new H(W.prototype.stringForNode(t.contextNode));if(2==arguments.length)return arguments[1].evaluate(t).string();throw new Error("Function string expects (object?)")},tt.concat=function(t){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var e="",r=1;r<arguments.length;r++)e+=arguments[r].evaluate(t).stringValue();return new H(e)},tt.startsWith=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function startsWith expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),r=arguments[2].evaluate(t).stringValue();return new Y(e.substring(0,r.length)==r)},tt.contains=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function contains expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),r=arguments[2].evaluate(t).stringValue();return new Y(-1!==e.indexOf(r))},tt.substringBefore=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function substring-before expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),r=arguments[2].evaluate(t).stringValue();return new H(e.substring(0,e.indexOf(r)))},tt.substringAfter=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function substring-after expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),r=arguments[2].evaluate(t).stringValue();if(0==r.length)return new H(e);var n=e.indexOf(r);return new H(-1==n?"":e.substring(n+r.length))},tt.substring=function(){var t=arguments[0];if(3!=arguments.length&&4!=arguments.length)throw new Error("Function substring expects (string, number, number?)");var e=arguments[1].evaluate(t).stringValue(),r=Math.round(arguments[2].evaluate(t).numberValue())-1,n=4==arguments.length?r+Math.round(arguments[3].evaluate(t).numberValue()):void 0;return new H(e.substring(r,n))},tt.stringLength=function(){var t,e=arguments[0];if(1==arguments.length)t=W.prototype.stringForNode(e.contextNode);else{if(2!=arguments.length)throw new Error("Function string-length expects (string?)");t=arguments[1].evaluate(e).stringValue()}return new $(t.length)},tt.normalizeSpace=function(){var t,e=arguments[0];if(1==arguments.length)t=W.prototype.stringForNode(e.contextNode);else{if(2!=arguments.length)throw new Error("Function normalize-space expects (string?)");t=arguments[1].evaluate(e).stringValue()}for(var r=0,n=t.length-1;et.isSpace(t.charCodeAt(n));)n--;for(var o="";r<=n&&et.isSpace(t.charCodeAt(r));)r++;for(;r<=n;)if(et.isSpace(t.charCodeAt(r)))for(o+=" ";r<=n&&et.isSpace(t.charCodeAt(r));)r++;else o+=t.charAt(r),r++;return new H(o)},tt.translate=function(t,e,n,i){if(4!=arguments.length)throw new Error("Function translate expects (string, string, string)");var a=e.evaluate(t).stringValue(),u=n.evaluate(t).stringValue(),c=i.evaluate(t).stringValue(),l=r(function(t,e,r){return e in t||(t[e]=r>c.length?"":c[r]),t},{},u);return new H(s("",o(function(t){return t in l?l[t]:t},a)))},tt.boolean_=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(t).bool()},tt.not=function(t,e){if(2!=arguments.length)throw new Error("Function not expects (object)");return e.evaluate(t).bool().not()},tt.true_=function(){if(1!=arguments.length)throw new Error("Function true expects ()");return Y.true_},tt.false_=function(){if(1!=arguments.length)throw new Error("Function false expects ()");return Y.false_},tt.lang=function(){var t,e=arguments[0];if(2!=arguments.length)throw new Error("Function lang expects (string)");for(var r=e.contextNode;null!=r&&9!=r.nodeType;r=r.parentNode){var n=r.getAttributeNS(p.XML_NAMESPACE_URI,"lang");if(null!=n){t=String(n);break}}if(null==t)return Y.false_;var o=arguments[1].evaluate(e).stringValue();return new Y(t.substring(0,o.length)==o&&(t.length==o.length||"-"==t.charAt(o.length)))},tt.number=function(){var t=arguments[0];if(1!=arguments.length&&2!=arguments.length)throw new Error("Function number expects (object?)");return 1==arguments.length?new $(W.prototype.stringForNode(t.contextNode)):arguments[1].evaluate(t).number()},tt.sum=function(){var t,e=arguments[0];if(2!=arguments.length||!et.instance_of(t=arguments[1].evaluate(e),W))throw new Error("Function sum expects (node-set)");t=t.toUnsortedArray();for(var r=0,n=0;n<t.length;n++)r+=new $(W.prototype.stringForNode(t[n])).numberValue();return new $(r)},tt.floor=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function floor expects (number)");return new $(Math.floor(arguments[1].evaluate(t).numberValue()))},tt.ceiling=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function ceiling expects (number)");return new $(Math.ceil(arguments[1].evaluate(t).numberValue()))},tt.round=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function round expects (number)");return new $(Math.round(arguments[1].evaluate(t).numberValue()))};var et=new Object;et.isAttribute=function(t){return t&&(2===t.nodeType||t.ownerElement)},et.splitQName=function(t){var e=t.indexOf(":");return-1==e?[null,t]:[t.substring(0,e),t.substring(e+1)]},et.resolveQName=function(t,e,r,n){var o=et.splitQName(t);return null!=o[0]?o[0]=e.getNamespace(o[0],r):n?(o[0]=e.getNamespace("",r),null==o[0]&&(o[0]="")):o[0]="",o},et.isSpace=function(t){return 9==t||13==t||10==t||32==t},et.isLetter=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=255||t>=256&&t<=305||t>=308&&t<=318||t>=321&&t<=328||t>=330&&t<=382||t>=384&&t<=451||t>=461&&t<=496||t>=500&&t<=501||t>=506&&t<=535||t>=592&&t<=680||t>=699&&t<=705||902==t||t>=904&&t<=906||908==t||t>=910&&t<=929||t>=931&&t<=974||t>=976&&t<=982||986==t||988==t||990==t||992==t||t>=994&&t<=1011||t>=1025&&t<=1036||t>=1038&&t<=1103||t>=1105&&t<=1116||t>=1118&&t<=1153||t>=1168&&t<=1220||t>=1223&&t<=1224||t>=1227&&t<=1228||t>=1232&&t<=1259||t>=1262&&t<=1269||t>=1272&&t<=1273||t>=1329&&t<=1366||1369==t||t>=1377&&t<=1414||t>=1488&&t<=1514||t>=1520&&t<=1522||t>=1569&&t<=1594||t>=1601&&t<=1610||t>=1649&&t<=1719||t>=1722&&t<=1726||t>=1728&&t<=1742||t>=1744&&t<=1747||1749==t||t>=1765&&t<=1766||t>=2309&&t<=2361||2365==t||t>=2392&&t<=2401||t>=2437&&t<=2444||t>=2447&&t<=2448||t>=2451&&t<=2472||t>=2474&&t<=2480||2482==t||t>=2486&&t<=2489||t>=2524&&t<=2525||t>=2527&&t<=2529||t>=2544&&t<=2545||t>=2565&&t<=2570||t>=2575&&t<=2576||t>=2579&&t<=2600||t>=2602&&t<=2608||t>=2610&&t<=2611||t>=2613&&t<=2614||t>=2616&&t<=2617||t>=2649&&t<=2652||2654==t||t>=2674&&t<=2676||t>=2693&&t<=2699||2701==t||t>=2703&&t<=2705||t>=2707&&t<=2728||t>=2730&&t<=2736||t>=2738&&t<=2739||t>=2741&&t<=2745||2749==t||2784==t||t>=2821&&t<=2828||t>=2831&&t<=2832||t>=2835&&t<=2856||t>=2858&&t<=2864||t>=2866&&t<=2867||t>=2870&&t<=2873||2877==t||t>=2908&&t<=2909||t>=2911&&t<=2913||t>=2949&&t<=2954||t>=2958&&t<=2960||t>=2962&&t<=2965||t>=2969&&t<=2970||2972==t||t>=2974&&t<=2975||t>=2979&&t<=2980||t>=2984&&t<=2986||t>=2990&&t<=2997||t>=2999&&t<=3001||t>=3077&&t<=3084||t>=3086&&t<=3088||t>=3090&&t<=3112||t>=3114&&t<=3123||t>=3125&&t<=3129||t>=3168&&t<=3169||t>=3205&&t<=3212||t>=3214&&t<=3216||t>=3218&&t<=3240||t>=3242&&t<=3251||t>=3253&&t<=3257||3294==t||t>=3296&&t<=3297||t>=3333&&t<=3340||t>=3342&&t<=3344||t>=3346&&t<=3368||t>=3370&&t<=3385||t>=3424&&t<=3425||t>=3585&&t<=3630||3632==t||t>=3634&&t<=3635||t>=3648&&t<=3653||t>=3713&&t<=3714||3716==t||t>=3719&&t<=3720||3722==t||3725==t||t>=3732&&t<=3735||t>=3737&&t<=3743||t>=3745&&t<=3747||3749==t||3751==t||t>=3754&&t<=3755||t>=3757&&t<=3758||3760==t||t>=3762&&t<=3763||3773==t||t>=3776&&t<=3780||t>=3904&&t<=3911||t>=3913&&t<=3945||t>=4256&&t<=4293||t>=4304&&t<=4342||4352==t||t>=4354&&t<=4355||t>=4357&&t<=4359||4361==t||t>=4363&&t<=4364||t>=4366&&t<=4370||4412==t||4414==t||4416==t||4428==t||4430==t||4432==t||t>=4436&&t<=4437||4441==t||t>=4447&&t<=4449||4451==t||4453==t||4455==t||4457==t||t>=4461&&t<=4462||t>=4466&&t<=4467||4469==t||4510==t||4520==t||4523==t||t>=4526&&t<=4527||t>=4535&&t<=4536||4538==t||t>=4540&&t<=4546||4587==t||4592==t||4601==t||t>=7680&&t<=7835||t>=7840&&t<=7929||t>=7936&&t<=7957||t>=7960&&t<=7965||t>=7968&&t<=8005||t>=8008&&t<=8013||t>=8016&&t<=8023||8025==t||8027==t||8029==t||t>=8031&&t<=8061||t>=8064&&t<=8116||t>=8118&&t<=8124||8126==t||t>=8130&&t<=8132||t>=8134&&t<=8140||t>=8144&&t<=8147||t>=8150&&t<=8155||t>=8160&&t<=8172||t>=8178&&t<=8180||t>=8182&&t<=8188||8486==t||t>=8490&&t<=8491||8494==t||t>=8576&&t<=8578||t>=12353&&t<=12436||t>=12449&&t<=12538||t>=12549&&t<=12588||t>=44032&&t<=55203||t>=19968&&t<=40869||12295==t||t>=12321&&t<=12329},et.isNCNameChar=function(t){return t>=48&&t<=57||t>=1632&&t<=1641||t>=1776&&t<=1785||t>=2406&&t<=2415||t>=2534&&t<=2543||t>=2662&&t<=2671||t>=2790&&t<=2799||t>=2918&&t<=2927||t>=3047&&t<=3055||t>=3174&&t<=3183||t>=3302&&t<=3311||t>=3430&&t<=3439||t>=3664&&t<=3673||t>=3792&&t<=3801||t>=3872&&t<=3881||46==t||45==t||95==t||et.isLetter(t)||t>=768&&t<=837||t>=864&&t<=865||t>=1155&&t<=1158||t>=1425&&t<=1441||t>=1443&&t<=1465||t>=1467&&t<=1469||1471==t||t>=1473&&t<=1474||1476==t||t>=1611&&t<=1618||1648==t||t>=1750&&t<=1756||t>=1757&&t<=1759||t>=1760&&t<=1764||t>=1767&&t<=1768||t>=1770&&t<=1773||t>=2305&&t<=2307||2364==t||t>=2366&&t<=2380||2381==t||t>=2385&&t<=2388||t>=2402&&t<=2403||t>=2433&&t<=2435||2492==t||2494==t||2495==t||t>=2496&&t<=2500||t>=2503&&t<=2504||t>=2507&&t<=2509||2519==t||t>=2530&&t<=2531||2562==t||2620==t||2622==t||2623==t||t>=2624&&t<=2626||t>=2631&&t<=2632||t>=2635&&t<=2637||t>=2672&&t<=2673||t>=2689&&t<=2691||2748==t||t>=2750&&t<=2757||t>=2759&&t<=2761||t>=2763&&t<=2765||t>=2817&&t<=2819||2876==t||t>=2878&&t<=2883||t>=2887&&t<=2888||t>=2891&&t<=2893||t>=2902&&t<=2903||t>=2946&&t<=2947||t>=3006&&t<=3010||t>=3014&&t<=3016||t>=3018&&t<=3021||3031==t||t>=3073&&t<=3075||t>=3134&&t<=3140||t>=3142&&t<=3144||t>=3146&&t<=3149||t>=3157&&t<=3158||t>=3202&&t<=3203||t>=3262&&t<=3268||t>=3270&&t<=3272||t>=3274&&t<=3277||t>=3285&&t<=3286||t>=3330&&t<=3331||t>=3390&&t<=3395||t>=3398&&t<=3400||t>=3402&&t<=3405||3415==t||3633==t||t>=3636&&t<=3642||t>=3655&&t<=3662||3761==t||t>=3764&&t<=3769||t>=3771&&t<=3772||t>=3784&&t<=3789||t>=3864&&t<=3865||3893==t||3895==t||3897==t||3902==t||3903==t||t>=3953&&t<=3972||t>=3974&&t<=3979||t>=3984&&t<=3989||3991==t||t>=3993&&t<=4013||t>=4017&&t<=4023||4025==t||t>=8400&&t<=8412||8417==t||t>=12330&&t<=12335||12441==t||12442==t||183==t||720==t||721==t||903==t||1600==t||3654==t||3782==t||12293==t||t>=12337&&t<=12341||t>=12445&&t<=12446||t>=12540&&t<=12542},et.coalesceText=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(3==e.nodeType||4==e.nodeType){var r=e.nodeValue,n=e;for(e=e.nextSibling;null!=e&&(3==e.nodeType||4==e.nodeType);){r+=e.nodeValue;var o=e;e=e.nextSibling,o.parentNode.removeChild(o)}if(4==n.nodeType){var i=n.parentNode;if(null==n.nextSibling)i.removeChild(n),i.appendChild(i.ownerDocument.createTextNode(r));else{var s=n.nextSibling;i.removeChild(n),i.insertBefore(i.ownerDocument.createTextNode(r),s)}}else n.nodeValue=r;if(null==e)break}else 1==e.nodeType&&et.coalesceText(e)},et.instance_of=function(t,e){for(;null!=t;){if(t.constructor===e)return!0;if(t===Object)return!1;t=t.constructor.superclass}return!1},et.getElementById=function(t,e){if(1==t.nodeType&&(t.getAttribute("id")==e||t.getAttributeNS(null,"id")==e))return t;for(var r=t.firstChild;null!=r;r=r.nextSibling){var n=et.getElementById(r,e);if(null!=n)return n}return null};var rt=function(){function t(e,r,n){var o=Error.call(this,function(e,r){var n=r?": "+r.toString():"";switch(e){case t.INVALID_EXPRESSION_ERR:return"Invalid expression"+n;case t.TYPE_ERR:return"Type error"+n}return null}(e,r)||n);return o.code=e,o.exception=r,o}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.superclass=Error,t.prototype.toString=function(){return this.message},t.fromMessage=function(e,r){return new t(null,r,e)},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,t}();function nt(t,e,r){this.xpath=r.parse(t),this.context=new Q,this.context.namespaceResolver=new ot(e)}function ot(t){this.xpathNSResolver=t}function it(t){this.node=t,this.namespaceResolver=new K}function st(t,e){switch(e==st.ANY_TYPE&&(t.constructor===H?e=st.STRING_TYPE:t.constructor===$?e=st.NUMBER_TYPE:t.constructor===Y?e=st.BOOLEAN_TYPE:t.constructor===W&&(e=st.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=e,e){case st.NUMBER_TYPE:return void(this.numberValue=t.numberValue());case st.STRING_TYPE:return void(this.stringValue=t.stringValue());case st.BOOLEAN_TYPE:return void(this.booleanValue=t.booleanValue());case st.ANY_UNORDERED_NODE_TYPE:case st.FIRST_ORDERED_NODE_TYPE:if(t.constructor===W)return void(this.singleNodeValue=t.first());break;case st.UNORDERED_NODE_ITERATOR_TYPE:case st.ORDERED_NODE_ITERATOR_TYPE:if(t.constructor===W)return this.invalidIteratorState=!1,this.nodes=t.toArray(),void(this.iteratorIndex=0);break;case st.UNORDERED_NODE_SNAPSHOT_TYPE:case st.ORDERED_NODE_SNAPSHOT_TYPE:if(t.constructor===W)return this.nodes=t.toArray(),void(this.snapshotLength=this.nodes.length)}throw new rt(rt.TYPE_ERR)}function at(t,e){t.createExpression=function(t,r){try{return new nt(t,r,e)}catch(t){throw new rt(rt.INVALID_EXPRESSION_ERR,t)}},t.createNSResolver=function(t){return new it(t)},t.evaluate=function(r,n,o,i,s){if(i<0||i>9)throw{code:0,toString:function(){return"Request type not supported"}};return t.createExpression(r,o,e).evaluate(n,i,s)}}nt.prototype={},nt.prototype.constructor=nt,nt.superclass=Object.prototype,nt.getOwnerDocument=function(t){return 9===t.nodeType?t:t.ownerDocument},nt.detectHtmlDom=function(t){if(!t)return!1;var e=nt.getOwnerDocument(t);try{return e.implementation.hasFeature("HTML","2.0")}catch(r){return!0}},nt.prototype.evaluate=function(t,e,r){return this.context.expressionContextNode=t,this.context.caseInsensitive=nt.detectHtmlDom(t),new st(this.xpath.evaluate(this.context),e)},ot.prototype={},ot.prototype.constructor=ot,ot.superclass=Object.prototype,ot.prototype.getNamespace=function(t,e){return null==this.xpathNSResolver?null:this.xpathNSResolver.lookupNamespaceURI(t)},it.prototype={},it.prototype.constructor=it,it.superclass=Object.prototype,it.prototype.lookupNamespaceURI=function(t){return this.namespaceResolver.getNamespace(t,this.node)},st.prototype={},st.prototype.constructor=st,st.superclass=Object.prototype,st.prototype.iterateNext=function(){if(this.resultType!=st.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=st.ORDERED_NODE_ITERATOR_TYPE)throw new rt(rt.TYPE_ERR);return this.nodes[this.iteratorIndex++]},st.prototype.snapshotItem=function(t){if(this.resultType!=st.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=st.ORDERED_NODE_SNAPSHOT_TYPE)throw new rt(rt.TYPE_ERR);return this.nodes[t]},st.ANY_TYPE=0,st.NUMBER_TYPE=1,st.STRING_TYPE=2,st.BOOLEAN_TYPE=3,st.UNORDERED_NODE_ITERATOR_TYPE=4,st.ORDERED_NODE_ITERATOR_TYPE=5,st.UNORDERED_NODE_SNAPSHOT_TYPE=6,st.ORDERED_NODE_SNAPSHOT_TYPE=7,st.ANY_UNORDERED_NODE_TYPE=8,st.FIRST_ORDERED_NODE_TYPE=9;try{var ut=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(ut=!1)}catch(ct){}ut&&at(document,new h)}catch(ct){}at(t,new h),function(){var e=new h,r=new K,o=new Z,i=new z;function s(t){return{getNamespace:function(e,n){return t(e,n)||r.getNamespace(e,n)}}}function a(t){return t&&"function"==typeof t.getNamespace?s((e=t).getNamespace.bind(e)):"function"==typeof t?s(t):"object"===n(t)?(o=t,s(function(t){return o[t]})):r;var e,o}function u(t){if(null==t||t instanceof H||t instanceof Y||t instanceof $||t instanceof W)return t;switch(n(t)){case"string":return new H(t);case"boolean":return new Y(t);case"number":return new $(t)}var e=new W;return e.addArray([].concat(t)),e}function c(t){return{getFunction:function(e,r){var n=t(e,r);return n?function(t){return function(e){var r=Array.prototype.slice.call(arguments,1).map(function(t){return t.evaluate(e)});return u(t.apply(this,[].concat(e,r)))}}(n):o.getFunction(e,r)}}}function l(t){return t&&"function"==typeof t.getFunction?c((e=t).getFunction.bind(e)):"function"==typeof t?c(t):"object"===n(t)?(r=t,c(function(t){return r[t]})):o;var e,r}function p(t){return{getVariable:function(e,r){return u(t(e,r))}}}function f(t,e,r){t in r&&(e[t]=r[t])}function d(t){var e=new Q;return t?(e.namespaceResolver=a(t.namespaces),e.functionResolver=l(t.functions),e.variableResolver=function(t){if(t){if("function"==typeof t.getVariable)return p(t.getVariable.bind(t));if("function"==typeof t)return p(t);if("object"===n(t))return p(function(e){return t[e]})}return i}(t.variables),e.expressionContextNode=t.node,f("allowAnyNamespaceForNoPrefix",e,t),f("isHtml",e,t)):e.namespaceResolver=r,e}var g={evaluate:function(t){return function(t,e){var r=d(e);return t.evaluate(r)}(this.expression,t)},evaluateNumber:function(t){return this.evaluate(t).numberValue()},evaluateString:function(t){return this.evaluate(t).stringValue()},evaluateBoolean:function(t){return this.evaluate(t).booleanValue()},evaluateNodeSet:function(t){return this.evaluate(t).nodeset()},select:function(t){return this.evaluateNodeSet(t).toArray()},select1:function(t){return this.select(t)[0]}};t.parse=function(t){var r=e.parse(t);return Object.create(g,{expression:{value:r}})}}(),l(t,{XPath:p,XPathParser:h,XPathResult:st,Step:F,PathExpr:_,NodeTest:U,LocationPath:M,OrOperation:v,AndOperation:N,BarOperation:I,EqualsOperation:E,NotEqualOperation:w,LessThanOperation:b,GreaterThanOperation:T,LessThanOrEqualOperation:S,GreaterThanOrEqualOperation:A,PlusOperation:x,MinusOperation:O,MultiplyOperation:R,DivOperation:P,ModOperation:C,UnaryMinusOperation:m,FunctionCall:B,VariableReference:k,XPathContext:Q,XNodeSet:W,XBoolean:Y,XString:H,XNumber:$,NamespaceResolver:K,FunctionResolver:Z,VariableResolver:z,Utilities:et}),t.select=function(e,r,n){return t.selectWithResolver(e,r,null,n)},t.useNamespaces=function(e){var r={mappings:e||{},lookupNamespaceURI:function(t){return this.mappings[t]}};return function(e,n,o){return t.selectWithResolver(e,n,r,o)}},t.selectWithResolver=function(t,e,r,n){var o=new nt(t,r,new h),i=st.ANY_TYPE,s=o.evaluate(e,i,null);return s.resultType==st.STRING_TYPE?s=s.stringValue:s.resultType==st.NUMBER_TYPE?s=s.numberValue:s.resultType==st.BOOLEAN_TYPE?s=s.booleanValue:(s=s.nodes,n&&(s=s[0])),s},t.select1=function(e,r){return t.select(e,r,!0)}}(void 0===r?{}:r)},{}],41:[function(t,e,r){var n=t("./internal/httpClient"),o=t("./internal/getTypeNamesFromCapabilities"),i=t("./internal/cql_filter"),s=function(t){if(void 0===t.apiKey)throw new Error("Required param: apiKey");this.url=t.url||"https://wxs.ign.fr/{apiKey}/geoportail/wfs",this.apiKey=t.apiKey||null,this.headers=t.headers||{}};s.prototype.getUrl=function(){return this.url.replace("{apiKey}",this.apiKey)},s.prototype.getDefaultParams=function(){return{service:"WFS",version:"2.0.0"}},s.prototype.getDefaultHeaders=function(){return this.headers},s.prototype.getTypeNames=function(){var t=this.getDefaultParams();return t.request="GetCapabilities",n.get(this.getUrl(),{params:t,headers:this.getDefaultHeaders(),responseType:"text",transformResponse:function(t){return o(t)}}).then(function(t){return t.data})},s.prototype.getFeatures=function(t,e){e=e||{};var r=this.getDefaultHeaders();r.Accept="application/json";var o=this.getDefaultParams();o.request="GetFeature",o.typename=t,o.outputFormat="application/json",o.srsName="CRS:84",void 0!==e._limit&&(o.count=e._limit),void 0!==e._start&&(o.startIndex=e._start);var s=i(e),a=null!==s?"cql_filter="+encodeURI(s):"";return n.post(this.getUrl(),a,{params:o,headers:r,responseType:"text",transformResponse:function(t){try{return JSON.parse(t)}catch(e){throw{type:"error",message:t}}}}).then(function(t){return t.data})},e.exports=s},{"./internal/cql_filter":42,"./internal/getTypeNamesFromCapabilities":43,"./internal/httpClient":44}],42:[function(t,e,r){var o=t("terraformer-wkt-parser"),i=t("@turf/flip");e.exports=function(t){var e,r=[];for(var s in t)if("_"!==s.charAt(0))if("bbox"==s)r.push("BBOX(geometrie,"+(e=function(t){return"string"!=typeof t?t:t.replace(/'/g,"").split(",")}(e=t.bbox))[1]+","+e[0]+","+e[3]+","+e[2]+")");else if("geom"==s){var a=t[s];"object"!==n(a)&&(a=JSON.parse(a));var u=o.convert(i(a));r.push("INTERSECTS(geometrie,"+u+")")}else r.push(s+"='"+t[s]+"'");return 0===r.length?null:r.join(" and ")}},{"@turf/flip":3,"terraformer-wkt-parser":34}],43:[function(t,e,r){var n=t("xpath"),o=t("xmldom").DOMParser;e.exports=function(t){var e=(new o).parseFromString(t),r=n.useNamespaces({wfs:"http://www.opengis.net/wfs/2.0"})("//wfs:Name/text()",e),i=[];return r.forEach(function(t){i.push(t.toString())}),i}},{xmldom:36,xpath:40}],44:[function(t,e,r){(function(r){(function(){var r=t("axios"),n={};if("undefined"==typeof window){t("http-proxy-agent");void 0;t("https-proxy-agent");void 0,n.proxy=!1}var o=r.create(n);e.exports=o}).call(this)}).call(this,t("_process"))},{_process:33,axios:6,"http-proxy-agent":void 0,"https-proxy-agent":void 0}]},{},[1])(1)});
},{"process":"rH1J"}],"QVEW":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,u)}s((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VTController=void 0;var n=require("./VTThreeViewer2"),o=require("./OLViewer2"),i=require("./Utils"),a=require("./Constants"),u=r(require("proj4")),s=r(require("../lib/geoportal-wfs-client-master/dist/geoportal-wfs-client.js")),l=function(){function r(e,t,r,n,o,i,a,u,s,l,c){this.width=e,this.height=t,this.center=r,this.centerZ=n,this.olFactor=i,this.layers=a,this.styles=u,this.renderMode=s,this.backgroundColor=16777215,this.state={loading:0},this.features=new Map,this.loadTileFeatures=this.loadTileFeatures.bind(this),this.textures=new Map,this.buildingsColors=l,this.buildingsSource=c}return r.prototype.init=function(r,s){return e(this,void 0,void 0,function(){var e=this;return t(this,function(t){return[2,new Promise(function(t,l){e.threeViewer=new n.VTThreeViewer(e.width,e.height,e.backgroundColor,r,i.ZOOM_RES_L93[s]),e.olViewer=new o.OLViewer(e.width,e.height,r,s,e.styles,e.olFactor);var c=e.olViewer.map.getView().calculateExtent();e.threeViewer.createPlane(c[2]-c[0],c[3]-c[1],[0,0],e.centerZ),console.log(u.default(a.proj3857,a.proj4326,[c[0],c[1]])),console.log(u.default(a.proj3857,a.proj4326,[c[2],c[3]]));var h=e;e.olViewer.addEndBaseListener(function(t,r,n){e.textures.set(n,e.threeViewer.createTextureFromCanvas(t)),h.state.loading=0}),e.olViewer.addTexturesListener(function(t,r){e.textures.set(t,e.threeViewer.createTextureFromCanvas(r))}),e.olViewer.addEndAllListener(function(){h.buildingsSource==a.BUILDINGS_SOURCE.VECTOR_TILES?t():h.buildingsSource==a.BUILDINGS_SOURCE.WFS&&h.createWFSClient(c).then(function(){t()})}),e.olViewer.layer.getSource().on("tileloadstart",function(e){h.state.loading++}),h.buildingsSource==a.BUILDINGS_SOURCE.VECTOR_TILES&&e.olViewer.layer.getSource().on("tileloadend",e.loadTileFeatures)})]})})},r.prototype.createWFSClient=function(e){var t=this;return new Promise(function(r,n){for(var o=u.default(a.proj3857,a.proj4326,[e[0],e[1]]),l=u.default(a.proj3857,a.proj4326,[e[2],e[3]]),c=[o[0],o[1],l[0],l[1]],h=new s.default({apiKey:"essentiels"}),f={bbox:c},d=["BDTOPO_V3:batiment"],p=t,g=0,w=function(e){h.getFeatures(e,f).then(function(t){console.log(t),p.threeViewer.addFeatures(t.features,p.olViewer.map.getView().getCenter(),i.ZOOM_RES_L93[p.olViewer.map.getView().getZoom()],e,p.renderMode,function(e){var t=u.default(a.proj4326,a.proj3857,e);return[t[0]-p.center[0],t[1]-p.center[1]]},p.centerZ,p.buildingsColors,function(e){return e.geometry},function(e){return e.coordinates[0]},function(e){return e.properties}),++g==d.length&&r()}).catch(function(e){console.log("error!",e)})},V=0,y=d;V<y.length;V++){w(y[V])}})},r.prototype.loadTileFeatures=function(e){for(var t=this,r=(e.tile.getTileCoord()[0],e.tile.getFeatures()),n="",o=this,a=new Map,u=0,s=r;u<s.length;u++)for(var l=s[u],c=0,h=o.layers;c<h.length;c++){var f=h[c];l.getProperties().layer==f&&(n=l.getProperties().layer,o.features.has(n)||o.features.set(n,new Map),a.has(n)||a.set(n,[]),o.features.get(n).has(l.ol_uid)||l.getProperties().hauteur>0&&(o.features.get(n).set(l.ol_uid,l),a.get(n).push(l)))}a.forEach(function(e,r){o.threeViewer.addFeatures(e,o.olViewer.map.getView().getCenter(),i.ZOOM_RES_L93[o.olViewer.map.getView().getZoom()],r,o.renderMode,function(e){return[e[0]-t.center[0],e[1]-t.center[1]]},t.centerZ,o.buildingsColors,function(e){return e.getGeometry()},function(e){return e.getCoordinates()},function(e){return e.getProperties()})}),o.state.loading--},r.prototype.render=function(){this.threeViewer.animate()},r}();exports.VTController=l;
},{"./VTThreeViewer2":"xmXH","./OLViewer2":"huS9","./Utils":"r8Tc","./Constants":"Xnuv","proj4":"sW4w","../lib/geoportal-wfs-client-master/dist/geoportal-wfs-client.js":"lvw5"}],"QU7V":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,a){void 0===a&&(a=i),t[a]=e[i]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(null!=i)for(var s in i)"default"!==s&&Object.hasOwnProperty.call(i,s)&&t(a,i,s);return e(a,i),a};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlanarControls=exports.STATE=void 0;var a=i(require("three"));exports.STATE={NONE:-1,DRAG:0,PAN:1,ROTATE:2,TRAVEL:3,ORTHO_ZOOM:4};var s={LEFTCLICK:a.MOUSE.LEFT,MIDDLECLICK:a.MOUSE.MIDDLE,RIGHTCLICK:a.MOUSE.RIGHT},o=function(){function t(t,e,i){this.camera=t,this.renderer=e,this.objects=i,this.state=exports.STATE.NONE,this.floorPlane=new a.Plane(new a.Vector3(0,0,-1)),this.target=new a.Vector3,this.groundLevel=0,this.maxAltitude=1e3,this.zoomInFactor=2,this.zoomOutFactor=.5,this.zoomTravelTime=.2,this.autoTravelTimeMax=4,this.autoTravelTimeMin=1.5,this.autoTravelTimeDist=5e4,this.rotateSpeed=1,this.minZenithAngle=-1/0,this.maxZenithAngle=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI/2,this.instantTravel=!1,this.enableRotation=!0,this.enabled=!0,this.deltaMousePosition=new a.Vector2(0,0),this.lastMousePosition=new a.Vector2,this.mousePosition=new a.Vector2,this.dragStart=new a.Vector3,this.dragEnd=new a.Vector3,this.dragDelta=new a.Vector3(0,0,0),this.pointUnderCursor=new a.Vector3,this.centerPoint=new a.Vector3,this.phi=0,this.rotationVect=new a.Vector3,this.rotationQuat=new a.Quaternion,this.vectorZero=new a.Vector3,this.rotateStart=new a.Vector2,this.rotateEnd=new a.Vector2,this.rotateDelta=new a.Vector2,this.spherical=new a.Spherical,this.sphericalDelta=new a.Spherical,this.panStart=new a.Vector2,this.panDelta=new a.Vector2,this.panEnd=new a.Vector2,this.panSpeed=1,this.panOffset=new a.Vector3,this.travelParams={endPos:new a.Vector3,startPos:new a.Vector3,startRot:new a.Quaternion,endRot:new a.Quaternion,alpha:0,duration:0,useRotation:!1,useSmooth:!1},this.raycaster=new a.Raycaster,this._handlerOnMouseDown=this.onMouseDown.bind(this),this._handlerOnMouseUp=this.onMouseUp.bind(this),this._handlerOnMouseMove=this.onMouseMove.bind(this),this._handlerOnMouseWheel=this.onMouseWheel.bind(this),this._handlerContextMenu=this.onContextMenu.bind(this),this._handlerOnKeyDown=this.onKeyDown.bind(this),this.addInputListeners()}return t.prototype.updateMousePositionAndDelta=function(t){this.mousePosition=this.getScreenCords(t),this.deltaMousePosition.copy(this.mousePosition).sub(this.lastMousePosition),this.lastMousePosition.copy(this.mousePosition)},t.prototype.initiateDrag=function(t){this.state=exports.STATE.DRAG,this.dragStart.copy(this.getWorldPointAtScreenXY(this.mousePosition)),this.dragDelta.set(0,0,0),this.panStart.set(t.clientX,t.clientY)},t.prototype.initiateZoom=function(t){var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),this.pointUnderCursor.copy(this.getWorldPointAtScreenXY(this.mousePosition));var i=new a.Vector3;if(e>0||e<0&&this.maxAltitude>this.camera.position.z){var s=e>0?this.zoomInFactor:this.zoomOutFactor;i.lerpVectors(this.camera.position,this.pointUnderCursor,1-1/s),this.initiateTravel(i,this.zoomTravelTime,null,!1)}},t.prototype.initiateTravel=function(t,e,i,s){if(this.state=exports.STATE.TRAVEL,this.travelParams.alpha=0,this.travelParams.useRotation=this.enableRotation&&i&&(i.isQuaternion||i.isVector3),this.travelParams.useSmooth=s,this.travelParams.startPos.copy(this.camera.position),this.travelParams.startRot.copy(this.camera.quaternion),this.travelParams.useRotation&&(i.isQuaternion?this.travelParams.endRot.copy(i):i.isQuaternion&&(t==i?(this.camera.lookAt(i),this.travelParams.endRot.copy(this.camera.quaternion),this.camera.quaternion.copy(this.travelParams.startRot)):(this.camera.position.copy(t),this.camera.lookAt(i),this.travelParams.endRot.copy(this.camera.quaternion),this.camera.quaternion.copy(this.travelParams.startRot),this.camera.position.copy(this.travelParams.startPos)))),this.travelParams.endPos.copy(t),this.instantTravel)this.travelParams.duration=0;else if("auto"===e){var o=Math.min(1,t.distanceTo(this.camera.position)/this.autoTravelTimeDist);if(this.travelParams.duration=a.MathUtils.lerp(this.autoTravelTimeMin,this.autoTravelTimeMax,o),this.travelParams.useRotation){var r=.5-.5*this.travelParams.endRot.normalize().dot(this.camera.quaternion.normalize());this.travelParams.duration*=1+2*r,this.travelParams.duration=Math.min(this.travelParams.duration,this.autoTravelTimeMax)}}else this.travelParams.duration=e},t.prototype.initiateRotation=function(t){this.state=exports.STATE.ROTATE,this.centerPoint.copy(this.getWorldPointAtScreenXY(new a.Vector2(0,0)));var e=this.camera.position.distanceTo(this.centerPoint);this.phi=Math.acos((this.camera.position.z-this.centerPoint.z)/e),this.rotateStart.set(t.clientX,t.clientY)},t.prototype.handleTravel=function(t){this.travelParams.alpha=Math.min(this.travelParams.alpha+t/1e3/this.travelParams.duration,1);var e=this.travelParams.useSmooth?this.smooth(this.travelParams.alpha):this.travelParams.alpha;this.camera.position.lerpVectors(this.travelParams.startPos,this.travelParams.endPos,e),!0===this.travelParams.useRotation&&this.camera.quaternion.slerpQuaternions(this.travelParams.startRot,this.travelParams.endRot,e),this.testAnimationEnd()},t.prototype.testAnimationEnd=function(){1===this.travelParams.alpha&&(this.state=exports.STATE.NONE)},t.prototype.smooth=function(t){return Math.pow(Math.pow(t,2)*(3-2*t),1.2)},t.prototype.onMouseDown=function(t){this.enabled&&(console.log("mouse down"),t.preventDefault(),exports.STATE.NONE==this.state&&(this.currentPressedButton=t.button,this.updateMousePositionAndDelta(t),s.LEFTCLICK==t.button&&(t.ctrlKey?this.enableRotation&&this.initiateRotation(t):this.initiateDrag(t))))},t.prototype.onMouseUp=function(t){this.enabled&&(t.preventDefault(),exports.STATE.TRAVEL!==this.state&&exports.STATE.ORTHO_ZOOM!==this.state&&(this.state=exports.STATE.NONE))},t.prototype.onMouseMove=function(t){this.enabled&&(t.preventDefault(),this.updateMousePositionAndDelta(t),this.state==exports.STATE.ROTATE&&this.mouseMoveRotation(t),this.state==exports.STATE.DRAG&&this.mouseMovePan(t))},t.prototype.onMouseWheel=function(t){console.log("wheel planar!"),this.enabled&&(t.preventDefault(),t.stopPropagation(),exports.STATE.NONE==this.state&&this.initiateZoom(t))},t.prototype.onKeyDown=function(t){},t.prototype.addInputListeners=function(){window.addEventListener("keydown",this._handlerOnKeyDown,!1),this.renderer.domElement.addEventListener("mousedown",this._handlerOnMouseDown,!1),this.renderer.domElement.addEventListener("mouseup",this._handlerOnMouseUp,!1),this.renderer.domElement.addEventListener("mouseleave",this._handlerOnMouseUp,!1),this.renderer.domElement.addEventListener("mousemove",this._handlerOnMouseMove,!1),this.renderer.domElement.addEventListener("mousewheel",this._handlerOnMouseWheel,!1),this.renderer.domElement.addEventListener("contextmenu",this._handlerContextMenu,!1)},t.prototype.removeInputListeners=function(){window.removeEventListener("keydown",this._handlerOnKeyDown,!0),this.renderer.domElement.removeEventListener("mousedown",this._handlerOnMouseDown,!1),this.renderer.domElement.removeEventListener("mouseup",this._handlerOnMouseUp,!1),this.renderer.domElement.removeEventListener("mouseleave",this._handlerOnMouseUp,!1),this.renderer.domElement.removeEventListener("mousemove",this._handlerOnMouseMove,!1),this.renderer.domElement.removeEventListener("mousewheel",this._handlerOnMouseWheel,!1),this.renderer.domElement.removeEventListener("contextmenu",this._handlerContextMenu,!1),this.renderer.domElement.removeEventListener("MozMousePixelScroll",this._handlerOnMouseWheel,!1)},t.prototype.getScreenCords=function(t){var e=(t.clientX-this.renderer.domElement.offsetLeft)/this.renderer.domElement.clientWidth*2-1,i=-(t.clientY-this.renderer.domElement.offsetTop)/this.renderer.domElement.clientHeight*2+1;return new a.Vector2(e,i)},t.prototype.getWorldPointAtScreenXY=function(t){this.raycaster.setFromCamera(t,this.camera);var e=this.raycaster.intersectObjects(this.objects);return e.length>0?e[0].point:this.getWorldPointFromMathPlaneAtScreenXY(t,0)},t.prototype.getWorldPointFromMathPlaneAtScreenXY=function(t,e){this.raycaster.setFromCamera(t,this.camera);var i=new a.Vector3;return this.floorPlane.constant=e,this.raycaster.ray.intersectPlane(this.floorPlane,i),i},t.prototype.handleDragMovement=function(){this.dragEnd=this.getWorldPointFromMathPlaneAtScreenXY(this.mousePosition,this.dragStart.z),this.dragDelta.subVectors(this.dragStart,this.dragEnd),this.camera.position.add(this.dragDelta),this.dragDelta.set(0,0,0)},t.prototype.mouseMoveRotation=function(t){this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed),this.sphericalDelta.theta-=2*Math.PI*this.rotateDelta.x/this.renderer.domElement.clientHeight,this.sphericalDelta.phi-=2*Math.PI*this.rotateDelta.y/this.renderer.domElement.clientHeight,this.rotateStart.copy(this.rotateEnd)},t.prototype.mouseMovePan=function(t){this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed);var e=new a.Vector3,i=this.camera.position;e.copy(i).sub(this.target);var s=e.length();s*=Math.tan(this.camera.fov/2*Math.PI/180);var o=new a.Vector3;o.setFromMatrixColumn(this.camera.matrix,0),o.multiplyScalar(-2*this.panDelta.x*s/this.renderer.domElement.clientHeight),this.panOffset.add(o),o.setFromMatrixColumn(this.camera.matrix,1),o.multiplyScalar(2*this.panDelta.y*s/this.renderer.domElement.clientHeight),this.panOffset.add(o),this.panStart.copy(this.panEnd)},t.prototype.handleRotationOrbit=function(){var t=(new a.Quaternion).setFromUnitVectors(this.camera.up,new a.Vector3(0,1,0)),e=t.clone().invert(),i=(new a.Quaternion,2*Math.PI),s=new a.Vector3,o=this.camera.position;s.copy(o).sub(this.centerPoint),s.applyQuaternion(t),this.spherical.setFromVector3(s),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi;var r=this.minZenithAngle,n=this.maxZenithAngle;isFinite(r)&&isFinite(n)&&(r<-Math.PI?r+=i:r>Math.PI&&(r-=i),n<-Math.PI?n+=i:n>Math.PI&&(n-=i),this.spherical.theta=r<=n?Math.max(r,Math.min(n,this.spherical.theta)):this.spherical.theta>(r+n)/2?Math.max(r,this.spherical.theta):Math.min(n,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.target.add(this.panOffset),s.setFromSpherical(this.spherical),s.applyQuaternion(e),this.camera.position.copy(s),this.camera.lookAt(new a.Vector3(0,0,0)),this.camera.position.add(this.centerPoint),this.camera.updateMatrixWorld(),this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0)},t.prototype.update=function(t){switch(this.state){case exports.STATE.DRAG:this.handleDragMovement();break;case exports.STATE.TRAVEL:this.handleTravel(t);break;case exports.STATE.ROTATE:this.handleRotationOrbit()}},t.prototype.onContextMenu=function(t){t.preventDefault()},t}();exports.PlanarControls=o;
},{"three":"lKFo"}],"JMdq":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.hasOwnProperty.call(e,s)&&t(i,e,s);return r(i,e),i},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,n=o.length;a<n;a++,s++)i[s]=o[a];return i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VTThreeViewer=exports.RENDER_MODE=void 0;var o,a=i(require("three")),n=require("three/examples/jsm/utils/BufferGeometryUtils"),h=require("./OrbitCamera"),l=require("./controls/PlanarControlsLite"),p=i(require("./Utils"));!function(e){e[e.MERGED=0]="MERGED",e[e.SINGLE=1]="SINGLE"}(o=exports.RENDER_MODE||(exports.RENDER_MODE={}));var u=function(){function t(e,t,r,i,s){this.width=e,this.height=t,this.mapCenter=i,this.zoomFactor=s,this.planes=new a.Group,this.featuresAllGroup=[],this.featuresTexturedAllGroup=[],this.rayCaster=new a.Raycaster,this.featuresGroup=new Map,this.featuresTexturedGroup=new Map,this.clock=new a.Clock,this.animate=this.animate.bind(this),this.doubleClick=this.doubleClick.bind(this),this.getRealCoords=this.getRealCoords.bind(this),this.getWorldCoords=this.getWorldCoords.bind(this),this.initThree(r),this.addHemisphereLights2()}return t.prototype.initThree=function(e){this.renderer=new a.WebGLRenderer({logarithmicDepthBuffer:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.scene=new a.Scene,this.scene.background=new a.Color(e);var t=2*Math.tan(37.5*Math.PI/180),r=this.height/t;this.orthoCamera=new a.OrthographicCamera(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.orthoCamera.position.set(0,0,r),this.perspectiveCamera=new a.PerspectiveCamera(75,this.width/this.height,1,1500),this.perspectiveCamera.up.set(0,0,1),this.perspectiveCamera.position.set(0,0,400),this.orbitCamera=new h.OrbitCamera(this.perspectiveCamera),this.controls=new l.PlanarControls(this.perspectiveCamera,this.renderer,s(this.featuresAllGroup,this.planes.children)),this.scene.add(this.planes),this.currentCamera=this.perspectiveCamera,this.renderer.domElement.addEventListener("dblclick",this.doubleClick,!1)},t.prototype.setOrthoPointOfView=function(){var e=2*Math.tan(37.5*Math.PI/180),t=this.height/e;this.perspectiveCamera.position.set(0,0,t),this.controls.target=new a.Vector3(0,0,-10),this.controls.update()},t.prototype.animate=function(){this.controls.update(1e3*this.clock.getDelta()),this.renderer.render(this.scene,this.currentCamera)},t.prototype.enableOrbitControls=function(){this.controls.enabled=!0},t.prototype.disableOrbitControls=function(){this.controls.enabled=!1},t.prototype.createPlane=function(e,t,r,i){var s=new a.PlaneBufferGeometry(e,t,100),o=new a.MeshBasicMaterial({transparent:!0});o.depthWrite=!1;var n=new a.Mesh(s,o);n.position.set(r[0],r[1],0),this.currentCamera.position.setX(r[0]),this.currentCamera.position.setY(r[1]),this.controls.target.setX(r[0]),this.controls.target.setY(r[1]),this.planes.add(n)},t.prototype.getTextureFromCanvas=function(e){return new a.CanvasTexture(e)},t.prototype.setPlaneTexture=function(e){var t=new a.CanvasTexture(e),r=this.planes.children[0];r.material.map=t,r.material.map.anisotropy=0,r.material.map.magFilter=a.LinearFilter,r.material.map.minFilter=a.LinearFilter,r.material.needsUpdate=!0},t.prototype.addFeatures=function(e,t,r,i,s,h,l){this.mapCenter=t,this.zoomFactor=r;var p=new a.MeshStandardMaterial({color:15854811,flatShading:!0,side:a.DoubleSide}),u={steps:2,depth:1,bevelEnabled:!1,bevelThickness:1,bevelSize:0,bevelOffset:0,bevelSegments:1};if(this.featuresGroup.has(i)||(this.featuresGroup.set(i,new a.Group),this.scene.add(this.featuresGroup.get(i))),this.featuresTexturedGroup.has(i)||(this.featuresTexturedGroup.set(i,new a.Group),this.scene.add(this.featuresTexturedGroup.get(i))),s==o.MERGED){for(var c=[],d=0,m=e;d<m.length;d++){var f=m[d];c.push(this.createGeometryForMergedMesh(f,t,r,u,h))}var g=n.BufferGeometryUtils.mergeBufferGeometries(c,!1),v=new a.Mesh(g,p);null!=v&&this.featuresGroup.get(i).add(v),this.featuresAllGroup.push(v)}else if(s==o.SINGLE)for(var C=0,y=e;C<y.length;C++){f=y[C];this.addFeature(f,i,t,r,h,l)}},t.prototype.createGeometryForMergedMesh=function(t,r,i,s,o){for(var n=[],h=0,l=t.getGeometry().getCoordinates()[0];h<l.length;h++){var p=o(l[h]);n.push(new a.Vector2(p[0],p[1]))}for(var u=new a.Shape(n),c=1;c<t.getGeometry().getCoordinates().length;c++){for(var d=[],m=0,f=t.getGeometry().getCoordinates()[c];m<f.length;m++){p=o(f[m]);d.push(new a.Vector2(p[0],p[1]))}var g=new a.Shape(d);u.holes.push(g)}return new a.ExtrudeBufferGeometry(u,e(e({},s),{depth:null!=t.getProperties().hauteur?t.getProperties().hauteur/i:0}))},t.prototype.addFeature=function(e,t,r,i,s,o){var n=new a.MeshStandardMaterial({color:15854811,flatShading:!0,side:a.DoubleSide});n.transparent=!0,n.opacity=0;var h=e.getGeometry().getCoordinates()[0];Array.isArray(h[0][0])&&(h=h[0]);for(var l=[],p=0,u=h;p<u.length;p++){var c=s(u[p]);l.push(new a.Vector2(c[0],c[1]))}for(var d=new a.Shape(l),m=1;m<e.getGeometry().getCoordinates().length;m++){var f=[],g=e.getGeometry().getCoordinates()[m];Array.isArray(g[0][0])&&(g=g[0]);for(var v=0,C=g;v<C.length;v++){c=s(C[v]);f.push(new a.Vector2(c[0],c[1]))}var y=new a.Shape(f);d.holes.push(y)}var w=new a.ExtrudeBufferGeometry(d,{steps:2,depth:1,bevelEnabled:!1,bevelThickness:1,bevelSize:0,bevelOffset:0,bevelSegments:1});w.computeBoundingBox();var b=new a.Vector3;w.boundingBox.getCenter(b),w.center(),w.translate(0,0,.5),w.verticesNeedUpdate=!0;var G=new a.Mesh(w,n);G.position.copy(b),G.scale.set(1,1,0),G.renderOrder=2,G.userData.height=1.5*e.getProperties().hauteur,G.position.setZ(.1),this.featuresGroup.get(t).add(G),this.featuresAllGroup.push(G)},t.prototype.addHemisphereLights2=function(){var e=new a.HemisphereLight(15854811,7829384,1);e.position.set(5,7.5,10),this.scene.add(e);var t=new a.PlaneBufferGeometry(1e3,1e3,10,10),r=new a.MeshLambertMaterial({color:8421504});new a.Mesh(t,r).position.set(0,0,0)},t.prototype.doubleClick=function(e){var t=(e.clientX-this.renderer.domElement.offsetLeft)/this.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.renderer.domElement.offsetTop)/this.renderer.domElement.clientHeight*2+1;this.rayCaster.setFromCamera(new a.Vector2(t,r),this.currentCamera);var i=this.rayCaster.intersectObjects(this.planes.children);console.log(i),console.log("point",i[0].point.x*this.zoomFactor+this.mapCenter[0]," ",i[0].point.y*this.zoomFactor+this.mapCenter[1]),this.addTestCube(i[0].point,10,10,10)},t.prototype.addTestCube=function(e,t,r,i){var s=new a.BoxBufferGeometry(t,r,i),o=new a.MeshStandardMaterial({color:16729344}),n=new a.Mesh(s,o);return n.position.x=e.x,n.position.y=e.y,n.position.z=e.z,this.scene.add(n),n},t.prototype.getIntersectionPoint=function(e,t){this.rayCaster.setFromCamera(new a.Vector2(e,t),this.currentCamera);var r=this.rayCaster.intersectObjects(this.planes.children);return null!=r[0]?r[0].point:null},t.prototype.addImmersiveBackground=function(e){this.immsersiveBackground=e},t.prototype.restartFeatures=function(){for(var e=0,t=this.featuresAllGroup;e<t.length;e++){var r=t[e];r.material.opacity=0,r.scale.set(1,1,0)}},t.prototype.getWorldCoords=function(e){return[(e[0]-this.mapCenter[0])/this.zoomFactor,(e[1]-this.mapCenter[1])/this.zoomFactor]},t.prototype.getRealCoords=function(e){return[e[0]*this.zoomFactor+this.mapCenter[0],e[1]*this.zoomFactor+this.mapCenter[1]]},t.prototype.setCameraCoupled=function(e){console.log(e);for(var t=0,r=this.featuresAllGroup;t<r.length;t++){var i=r[t];i.material&&(e<=.2&&e>.11&&(i.scale.set(1,1,0),i.material.uniforms.opacity.value=p.interpolateFromTo(.11,.2,0,1,e)),e<=.11?(i.scale.set(1,1,0),i.material.uniforms.opacity.value=0):(i.scale.set(1,1,e*i.userData.height*1.5),i.material.uniforms.opacity.value=1))}this.currentCamera.position.z<100&&(this.planes.children[0].material.uniforms.t.value=p.interpolateFromTo(35,100,1,0,this.currentCamera.position.z),console.log("plane uniform ",this.planes.children[0].material.uniforms.t.value))},t}();exports.VTThreeViewer=u;
},{"three":"lKFo","three/examples/jsm/utils/BufferGeometryUtils":"HdUX","./OrbitCamera":"WECn","./controls/PlanarControlsLite":"QU7V","./Utils":"r8Tc"}],"HotB":[function(require,module,exports) {
"use strict";var t,e,o,n,i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.NumericalCondition=exports.Condition=exports.InterpolatedValue=exports.FixedValue=exports.Value=exports.Transition=exports.TRANSITION_TYPE=exports.VALUE_TYPE=exports.CONDITION_TYPE=exports.INTERPOLATION_TYPE=void 0,function(t){t[t.NONE=0]="NONE",t[t.LINEAR=1]="LINEAR"}(t=exports.INTERPOLATION_TYPE||(exports.INTERPOLATION_TYPE={})),function(t){t[t.CAMERA=0]="CAMERA",t[t.TIME=1]="TIME"}(e=exports.CONDITION_TYPE||(exports.CONDITION_TYPE={})),function(t){t[t.NUMBER=0]="NUMBER"}(o=exports.VALUE_TYPE||(exports.VALUE_TYPE={})),function(t){t.CONTROLS="controls",t.PLANE_TEXTURE_TEXTURE="plane_texture_texture",t.PLANE_TEXTURE_COLOR="plane_texture_color",t.BUILDING_HEIGHT="building_height",t.BUILDING_OPACITY="building_opacity",t.BUILDING_COLOR="building_color",t.CAMERA_POSITION="camera_position",t.CAMERA_ROTATION="camera_rotation",t.CAMERA_POSITION_TARGET="camera_position_target",t.STATE_EVENT="state_event"}(n=exports.TRANSITION_TYPE||(exports.TRANSITION_TYPE={}));var r=function(){function t(t,e){this.object=t,this.property=e,this.conditions=new Map,this.conditionTypes=new Map,this.conditionValues=new Map,this.valueListeners=[],this.onCreateListeners=[],this.changeListeners=[]}return t.prototype.addCondition=function(t,e){this.conditions.set(t,e),this.conditionTypes.has(t.type)&&this.conditionTypes.get(t.type)||this.conditionTypes.set(t.type,!0),this.conditionValues.set(t,!1)},t.prototype.handleChange=function(t,e){var o=this;this.conditions.forEach(function(t,e){var n=e.getCurrentValue();if(n){if(n!=o.conditionValues.get(e))for(var i=0,r=o.changeListeners;i<r.length;i++){(0,r[i])(t.getValue(e.getRatio()))}o.object[o.property]=t.getValue(e.getRatio()),o.conditionValues.set(e,n);for(var s=0,u=o.valueListeners;s<u.length;s++){(0,u[s])(t.getValue(e.getRatio()))}}else o.conditionValues.set(e,n)})},t.prototype.onValueChange=function(t){this.valueListeners.push(t)},t.prototype.onCreate=function(t){this.onCreateListeners.push(t)},t.prototype.onChange=function(t){this.changeListeners.push(t)},t.prototype.onChangeFirst=function(t){this.changeListeners.unshift(t)},t.prototype.start=function(){for(var t=0,e=this.onCreateListeners;t<e.length;t++){(0,e[t])()}},t}();exports.Transition=r;var s=function(){function t(){}return t.prototype.getValue=function(t){},t}();exports.Value=s;var u=function(t){function e(e){var o=t.call(this)||this;return o.value=e,o}return i(e,t),e.prototype.getValue=function(t){return this.value},e}(s);exports.FixedValue=u;var p=function(t){function e(e,o,n){var i=t.call(this)||this;return i.startValue=e,i.endValue=o,i.interpolationType=n,i}return i(e,t),e.prototype.getValue=function(t){return this.startValue*(1-t)+this.endValue*t},e}(s);exports.InterpolatedValue=p;var a=function(){function t(t,e,o,n){this.object=t,this.property=e,this.listeners=[],this.type=o,this.valueType=n}return t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.handleObjectChange=function(t){},t.prototype.getCurrentValue=function(){return this.value},t.prototype.setCustomValue=function(t){this.customValue=t},t}();exports.Condition=a;var c=function(t){function e(e,o,n,i,r,s){var u=t.call(this,e,o,n,i)||this;return u.lowerBound=r,u.upperBound=s,u}return i(e,t),e.prototype.getCurrentValue=function(){var t=null,e=null;return(e=this.customValue?this.customValue(this.object,this.property):this.object[this.property])>=this.lowerBound&&e<this.upperBound?t=!0:(e<this.lowerBound||e>=this.upperBound)&&(t=!1),t},e.prototype.getRatio=function(){return((this.customValue?this.customValue(this.object,this.property):this.object[this.property])-this.lowerBound)/(this.upperBound-this.lowerBound)},e}(a);exports.NumericalCondition=c;
},{}],"Auzc":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),n=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)"default"!==a&&Object.hasOwnProperty.call(t,a)&&e(r,t,a);return n(r,t),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBuildingTransition=exports.createPlaneTransition2=exports.createPlaneTransition=exports.createTransitionForControls=void 0;var r=require("./Transition"),a=require("./VTThreeViewer2"),i=require("./OLViewer2"),o=t(require("three"));function T(e){var n=e.threeViewer.currentCamera,t=e.threeViewer,i=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,10,Number.MAX_VALUE),o=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,0,10),T=new r.Transition(t,"currentControls");T.addCondition(i,new r.FixedValue(a.CONTROLS_TYPE.PLANAR)),T.addCondition(o,new r.FixedValue(a.CONTROLS_TYPE.STREET)),e.transitionController.addTransition(T);var l=new r.Transition(t.controlsMap.get(a.CONTROLS_TYPE.PLANAR),"enabled");l.addCondition(i,new r.FixedValue(!0)),l.addCondition(o,new r.FixedValue(!1)),l.onChange(function(e){e?t.controlsMap.get(a.CONTROLS_TYPE.PLANAR).addInputListeners():t.controlsMap.get(a.CONTROLS_TYPE.PLANAR).removeInputListeners()}),e.transitionController.addTransition(l);var E=new r.Transition(t.controlsMap.get(a.CONTROLS_TYPE.STREET),"enabled");E.addCondition(i,new r.FixedValue(!1)),E.addCondition(o,new r.FixedValue(!0)),E.onChange(function(e){e?(t.controlsMap.get(a.CONTROLS_TYPE.STREET).addInputListeners(),t.controlsMap.get(a.CONTROLS_TYPE.STREET).start()):t.controlsMap.get(a.CONTROLS_TYPE.STREET).removeInputListeners()}),e.transitionController.addTransition(E)}function l(e){var n=e.threeViewer.currentCamera,t=e.threeViewer,o=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,200,Number.MAX_VALUE),T=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,100,200),l=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,0,100),E=new r.Transition(t.graphicParams,"planeTexture");E.addCondition(o,new r.FixedValue(i.IGN_STYLES.PLAN)),E.addCondition(T,new r.FixedValue(i.IGN_STYLES.MUET)),E.onValueChange(function(n){t.graphicParams.planeMaterial!=t.materialsMap.get(a.MATERIAL_TYPE.TEXTURE)&&(t.graphicParams.planeMaterial=t.materialsMap.get(a.MATERIAL_TYPE.TEXTURE),t.setPlaneMaterialType(a.MATERIAL_TYPE.TEXTURE)),t.setPlaneTexture(e.textures.get(n))}),e.transitionController.addTransition(E);var s=new r.Transition(t.graphicParams,"planeColor");s.addCondition(l,new r.FixedValue(11119017)),s.onValueChange(function(e){t.graphicParams.planeMaterial!=t.materialsMap.get(a.MATERIAL_TYPE.COLOR)&&(t.graphicParams.planeMaterial=t.materialsMap.get(a.MATERIAL_TYPE.COLOR),t.setPlaneMaterialType(a.MATERIAL_TYPE.COLOR),t.setPlaneColor(e))}),e.transitionController.addTransition(s)}function E(e){var n=e.threeViewer.currentCamera,t=e.threeViewer,T=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,200,500),l=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,100,200),E=new r.NumericalCondition(n.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,0,100),s=new r.Transition(t.graphicParams,"planeMaterial");s.addCondition(T,new r.FixedValue(e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES))),s.addCondition(l,new r.FixedValue(e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES))),s.addCondition(l,new r.FixedValue(e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR))),s.onValueChange(function(n){e.threeViewer.setPlaneMaterial(n)}),s.onCreate(function(){e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).uniforms.fromTexture.value=e.textures.get(i.IGN_STYLES.PLAN),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).uniforms.toTexture.value=e.textures.get(i.IGN_STYLES.MUET),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).uniforms.tex.value=e.textures.get(i.IGN_STYLES.MUET),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).uniforms.color.value=new o.Vector4(.7,.7,.7,1),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).needsUpdate=!0,e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).needsUpdate=!0}),e.transitionController.addTransition(s);var d=new r.Transition(t.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).uniforms.t,"value");d.addCondition(E,new r.InterpolatedValue(1,0,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(d);var u=new r.Transition(t.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).uniforms.t,"value");u.addCondition(T,new r.FixedValue(0)),u.addCondition(l,new r.InterpolatedValue(1,0,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(u)}exports.createTransitionForControls=T,exports.createPlaneTransition=l,exports.createPlaneTransition2=E;var s=new o.Color;function d(e){var n=Math.PI+.01,t=Math.PI/2,a=e.threeViewer.currentCamera,i=new r.NumericalCondition(a.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,t,n);i.setCustomValue(function(n,t){var r=new o.Vector3;return e.threeViewer.currentCamera.getWorldDirection(r).angleTo(new o.Vector3(0,0,1))});var T=new r.Transition(e.threeViewer.graphicParams,"buildingsHeight");T.onValueChange(function(n){for(var t=0,r=e.threeViewer.featuresAllGroup;t<r.length;t++){var a=r[t];a.scale.set(1,1,a.userData.height*n)}}),T.addCondition(i,new r.InterpolatedValue(1,0,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(T);var l=new r.Transition(e.threeViewer.graphicParams,"buildingsOpacity");l.onValueChange(function(n){for(var t=0,r=e.threeViewer.featuresAllGroup;t<r.length;t++){r[t].material.opacity=n}}),l.addCondition(i,new r.InterpolatedValue(1,0,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(l);var E=new r.NumericalCondition(a.position,"z",r.CONDITION_TYPE.CAMERA,r.VALUE_TYPE.NUMBER,1.5,10),d=new r.Transition(e.threeViewer.graphicParams,"colorBuildings");d.onValueChange(function(n){for(var t=0,r=e.threeViewer.featuresAllGroup;t<r.length;t++){var a=r[t];s.setHex(a.userData.color),a.material.color.lerp(s,n)}}),d.addCondition(E,new r.InterpolatedValue(1,0,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(d)}exports.createBuildingTransition=d;
},{"./Transition":"HotB","./VTThreeViewer2":"xmXH","./OLViewer2":"huS9","three":"lKFo"}],"Ip1x":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var a in r)"default"!==a&&Object.hasOwnProperty.call(r,a)&&e(n,r,a);return t(n,r),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.addPlane=exports.addLine=exports.addBox=void 0;var n=r(require("three"));function a(e,t,r){var a=new n.BoxBufferGeometry(5,5,5),o=new n.MeshStandardMaterial({color:t}),i=new n.Mesh(a,o);return i.position.set(e.x,e.y,e.z),r.add(i),i}function o(e,t,r){for(var a=new n.LineBasicMaterial({color:t}),o=[],i=0,s=e;i<s.length;i++){var d=s[i];o.push(d)}var u=(new n.BufferGeometry).setFromPoints(o),l=new n.Line(u,a);return r.add(l),l}function i(e,t,r,a,o){var i=new n.PlaneGeometry(1,1);i.translate(.5,0,0);var s=new n.MeshBasicMaterial({color:a,side:n.DoubleSide}),d=new n.Mesh(i,s);return d.scale.set(t,r,1),d.position.set(e.x,e.y,e.z),o.add(d),d}exports.addBox=a,exports.addLine=o,exports.addPlane=i;
},{"three":"lKFo"}],"Ify0":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),t=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&t(o,e,n);return r(o,e),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProgressFeedback=exports.FromToLineMesh=exports.FromToFeedback=void 0;var n=o(require("./MeshFactory")),i=function(){return function(e){this.scene=e}}();exports.FromToFeedback=i;var s=function(t){function r(e,r){var o=t.call(this,r)||this;return o.fromMesh=n.addBox(e,16729344,r),o.lineMesh=n.addLine([e,e],16729344,r),o}return e(r,t),r.prototype.updateLine=function(e){var t=this.lineMesh.geometry.attributes.position.array;t[this.lineMesh.geometry.attributes.position.array.length-3]=e.x,t[this.lineMesh.geometry.attributes.position.array.length-2]=e.y,t[this.lineMesh.geometry.attributes.position.array.length-1]=e.z,this.lineMesh.geometry.attributes.position.needsUpdate=!0},r.prototype.setToMesh=function(e){null==this.toMesh?this.toMesh=n.addBox(e,3329330,this.scene):this.toMesh.position.set(e.x,e.y,e.z)},r.prototype.removeLine=function(){this.scene.remove(this.lineMesh)},r.prototype.removePoints=function(){this.scene.remove(this.fromMesh),this.scene.remove(this.toMesh)},r}(i);exports.FromToLineMesh=s;var a=function(t){function r(e,r,o){var i=t.call(this,e)||this;return i.planeMesh=n.addPlane(r,o.width,o.height,o.colorBg,e),i.planeMesh.material.transparent=!0,i.planeMesh.material.opacity=o.opacity,i.overlayPlaneMesh=n.addPlane(r,o.width,o.height,o.colorOverlay,e),i.planeMesh.material.transparent=!0,i}return e(r,t),r.prototype.setProgress=function(e){this.overlayPlaneMesh.scale.x=e},r.prototype.removeFeedback=function(){this.planeMesh.parent.remove(this.planeMesh),this.overlayPlaneMesh.parent.remove(this.overlayPlaneMesh)},r}(i);exports.ProgressFeedback=a;
},{"./MeshFactory":"Ip1x"}],"akpH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onlyCameraTime2=exports.onlyCameraTime=exports.dragAndGo2=exports.dragAndGo=exports.renderBuildings=exports.representationThenCamera=exports.cameraThenRepresentation2=exports.cameraThenRepresentation=void 0;var t=require("./VTThreeViewer2");exports.cameraThenRepresentation={stagesPlanesMaterial:[{startTime:-1,endTime:6,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0},{startTime:6,endTime:8,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:1},{startTime:8,endTime:10,material:t.MATERIAL_TYPE.MIX_TEXTURE_COLOR,startT:0,endT:1}],stagesBuildingsHeight:[{startTime:-1,endTime:8,startValue:0,endValue:0},{startTime:8,endTime:10,startValue:0,endValue:1}],stagesBuildingsOpacity:[{startTime:-1,endTime:8,startValue:0,endValue:0},{startTime:8,endTime:10,startValue:0,endValue:1}],stagesBuildinsColor:[{startTime:-1,endTime:8,startValue:0,endValue:0},{startTime:8,endTime:10,startValue:0,endValue:1}],cameraPositionStage:{startTime:0,endTime:2,type:"Camera Position",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}},cameraRotationStage:{startTime:2,endTime:4,type:"Camera Rotation",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},lookAtEnd:{x:"Target",y:"Target",z:"Start Target"}},cameraPositionTargetStage:{startTime:4,endTime:6,type:"Camera Position Target",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}}},exports.cameraThenRepresentation2={stagesPlanesMaterial:[{startTime:-1,endTime:6,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0},{startTime:6,endTime:8,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:1},{startTime:8,endTime:10,material:t.MATERIAL_TYPE.MIX_TEXTURE_COLOR,startT:0,endT:1}],stagesBuildingsHeight:[{startTime:-1,endTime:8,startValue:0,endValue:0},{startTime:8,endTime:10,startValue:0,endValue:1}],stagesBuildingsOpacity:[{startTime:-1,endTime:8,startValue:0,endValue:0},{startTime:8,endTime:10,startValue:0,endValue:1}],stagesBuildinsColor:[{startTime:-1,endTime:8,startValue:0,endValue:0},{startTime:8,endTime:10,startValue:0,endValue:1}],cameraPositionTargetStage:{startTime:2,endTime:4,type:"Camera Position Target",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}},cameraRotationStage:{startTime:0,endTime:2,type:"Camera Rotation",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},lookAtEnd:{x:"Target",y:"Target",z:"Start Target"}},cameraPositionStage:{startTime:0,endTime:2,type:"Camera Position",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}}},exports.representationThenCamera={stagesPlanesMaterial:[{startTime:-1,endTime:2,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0},{startTime:2,endTime:4,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:1},{startTime:4,endTime:6,material:t.MATERIAL_TYPE.MIX_TEXTURE_COLOR,startT:0,endT:1}],stagesBuildingsHeight:[{startTime:-1,endTime:4,startValue:0,endValue:0},{startTime:4,endTime:6,startValue:0,endValue:1}],stagesBuildingsOpacity:[{startTime:-1,endTime:4,startValue:0,endValue:0},{startTime:4,endTime:6,startValue:0,endValue:1}],stagesBuildinsColor:[{startTime:-1,endTime:6,startValue:0,endValue:0},{startTime:6,endTime:8,startValue:0,endValue:1}],cameraPositionStage:{startTime:8,endTime:10,type:"Camera Position",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}},cameraRotationStage:{startTime:10,endTime:12,type:"Camera Rotation",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},lookAtEnd:{x:"Target",y:"Target",z:"Start Target"}},cameraPositionTargetStage:{startTime:12,endTime:14,type:"Camera Position Target",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}}},exports.renderBuildings={stagesPlanesMaterial:[{startTime:-1,endTime:2,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0}],stagesBuildingsHeight:[{startTime:-1,endTime:4,startValue:1,endValue:1}],stagesBuildingsOpacity:[{startTime:-1,endTime:4,startValue:.5,endValue:.5}],stagesBuildinsColor:[{startTime:-1,endTime:6,startValue:0,endValue:0}],cameraPositionStage:{startTime:8,endTime:10,type:"Camera Position",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}},cameraRotationStage:{startTime:10,endTime:12,type:"Camera Rotation",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},lookAtEnd:{x:"Target",y:"Target",z:"Start Target"}},cameraPositionTargetStage:{startTime:12,endTime:14,type:"Camera Position Target",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}}},exports.dragAndGo={stagesPlanesMaterial:[{startTime:-1,endTime:2,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0}],stagesBuildingsHeight:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildingsOpacity:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildinsColor:[{startTime:-1,endTime:6,startValue:0,endValue:0}],cameraPositionStage:{startTime:.2,endTime:.4,type:"Camera Position",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}},cameraRotationStage:{startTime:.2,endTime:.4,type:"Camera Rotation",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},lookAtEnd:{x:"Target",y:"Target",z:"Start Target"}},cameraPositionTargetStage:{startTime:.4,endTime:1,type:"Camera Position Target",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}}},exports.dragAndGo2={stagesPlanesMaterial:[{startTime:-1,endTime:2,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0}],stagesBuildingsHeight:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildingsOpacity:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildinsColor:[{startTime:-1,endTime:6,startValue:0,endValue:0}],cameraPositionTargetStage:{startTime:.2,endTime:2,type:"Camera Position Target",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Start Target",y:"Start Target",z:"Start Target"}}},exports.onlyCameraTime={stagesPlanesMaterial:[{startTime:-1,endTime:4,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0}],stagesBuildingsHeight:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildingsOpacity:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildinsColor:[{startTime:-1,endTime:4,startValue:0,endValue:0}],cameraPositionTargetStage:{startTime:2,endTime:4,type:"Camera Position Target",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}},cameraRotationStage:{startTime:0,endTime:2,type:"Camera Rotation",startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},lookAtEnd:{x:"Target",y:"Target",z:"Start Target"}},cameraPositionStage:{startTime:0,endTime:2,type:"Camera Position",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}}},exports.onlyCameraTime2={stagesPlanesMaterial:[{startTime:-1,endTime:4,material:t.MATERIAL_TYPE.MIX_TWO_TEXTURES,startT:0,endT:0}],stagesBuildingsHeight:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildingsOpacity:[{startTime:-1,endTime:4,startValue:0,endValue:0}],stagesBuildinsColor:[{startTime:-1,endTime:4,startValue:0,endValue:0}],cameraPositionTargetStage:{startTime:0,endTime:4,type:"Camera Position Target",startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Start Target",y:"Start Target",z:"Start Target"}}};
},{"./VTThreeViewer2":"xmXH"}],"Ep6A":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var a in r)"default"!==a&&Object.hasOwnProperty.call(r,a)&&e(i,r,a);return t(i,r),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCoordsFromKeyPoints=exports.CameraPositionTargetTransition=void 0;var i=r(require("three")),a=require("./Transition"),o=require("lodash"),n=require("./AnimationStage"),s=function(){function e(e,t,r,o,s){var l=this;this.stage=t;var h=u(t.startPosition,s,n.KEY_POINTS),d=u(t.endPosition,s,n.KEY_POINTS),g=u(t.startTarget,s,n.KEY_POINTS),T=u(t.endTarget,s,n.KEY_POINTS);this.startPosition=h,this.endPosition=d,this.startTarget=g,this.endTarget=T,this.interpolationValue={value:0},Math.abs(h.x-g.x)<.001&&Math.abs(h.y-g.y)<.001&&(e.threeViewer.orbitCamera.rotateUp(.01),e.threeViewer.orbitCamera.position=new i.Vector3(h.x,h.y,h.z),e.threeViewer.orbitCamera.target=new i.Vector3(g.x,g.y,g.z),e.threeViewer.orbitCamera.update(),h.x=e.threeViewer.orbitCamera.camera.position.x,h.y=e.threeViewer.orbitCamera.camera.position.y,h.z=e.threeViewer.orbitCamera.camera.position.z),console.log("key points before",s),this.transition=new a.Transition(this.interpolationValue,"value");var c=new a.NumericalCondition(r,o,a.CONDITION_TYPE.TIME,a.VALUE_TYPE.NUMBER,t.startTime,t.endTime);this.transition.onChange(function(){console.log("key points after",s);var r=u(t.startPosition,s,n.KEY_POINTS),a=u(t.endPosition,s,n.KEY_POINTS),o=u(t.startTarget,s,n.KEY_POINTS),h=u(t.endTarget,s,n.KEY_POINTS);l.startPosition=r,l.endPosition=a,l.startTarget=o,l.endTarget=h,Math.abs(r.x-o.x)<.001&&Math.abs(r.y-o.y)<.001&&(e.threeViewer.orbitCamera.rotateUp(.01),e.threeViewer.orbitCamera.position=new i.Vector3(r.x,r.y,r.z),e.threeViewer.orbitCamera.target=new i.Vector3(o.x,o.y,o.z),e.threeViewer.orbitCamera.update(),r.x=e.threeViewer.orbitCamera.camera.position.x,r.y=e.threeViewer.orbitCamera.camera.position.y,r.z=e.threeViewer.orbitCamera.camera.position.z)}),this.transition.onValueChange(function(t){e.threeViewer.orbitCamera.position.set(l.startPosition.x*(1-l.interpolationValue.value)+l.endPosition.x*l.interpolationValue.value,l.startPosition.y*(1-l.interpolationValue.value)+l.endPosition.y*l.interpolationValue.value,l.startPosition.z*(1-l.interpolationValue.value)+l.endPosition.z*l.interpolationValue.value),console.log("update target");var r=l.interpolationValue.value;e.threeViewer.orbitCamera.target.set(l.startTarget.x*(1-r)+l.endTarget.x*r,l.startTarget.y*(1-r)+l.endTarget.y*r,l.startTarget.z*(1-r)+l.endTarget.z*r),e.threeViewer.orbitCamera.update()}),this.transition.addCondition(c,new a.InterpolatedValue(0,1,a.INTERPOLATION_TYPE.LINEAR))}return e.prototype.updateEndTarget=function(e){this.endTarget=u(this.stage.endTarget,e,n.KEY_POINTS)},e}();function u(e,t,r){var i={x:null,y:null,z:null};if(o.isObject(e))for(var a in e)for(var n=0,s=Object.values(r);n<s.length;n++){var u=s[n];e[a]==u&&(i[a]=t.get(u)[a])}else for(var l=0,h=Object.values(r);l<h.length;l++){e==(u=h[l])&&(i.x=t.get(u).x,i.y=t.get(u).y,i.z=t.get(u).z)}return i}exports.CameraPositionTargetTransition=s,exports.getCoordsFromKeyPoints=u;
},{"three":"lKFo","./Transition":"HotB","lodash":"hKJs","./AnimationStage":"ftNt"}],"UZ4Q":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var r={};if(null!=n)for(var a in n)"default"!==a&&Object.hasOwnProperty.call(n,a)&&e(r,n,a);return t(r,n),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCameraRotationTransitionGeneric2=exports.createCameraPositionTargetTransitionGeneric=exports.createCameraPositionTargetTransitionDrag=exports.createCameraPositionTargetTransition=exports.createCameraRotationTransitionGeneric=exports.createCameraRotationTransitionDrag=exports.createCameraRotationTransition=exports.createCameraPositionTransitionGeneric=exports.createCameraPositionTransitionDrag=exports.createCameraPositionTransition=exports.createBuildingTransition=exports.createPlaneTransition2=exports.createPlaneTransition=void 0;var r=require("./Transition"),a=require("./VTThreeViewer2"),i=require("./OLViewer2"),o=n(require("three")),s=require("./AnimationStage"),T=require("./AnimationTransitions"),l=require("./AnimatedTransition"),u=T.dragAndGo2;function c(e){var t=[{startTime:-1,endTime:6,value:i.IGN_STYLES.PLAN},{startTime:6,endTime:8,value:i.IGN_STYLES.MUET}],n=(e.threeViewer.currentCamera,e.threeViewer),o=new r.Transition(n.graphicParams,"planeTexture");o.onValueChange(function(t){n.graphicParams.planeMaterial!=n.materialsMap.get(a.MATERIAL_TYPE.TEXTURE)&&(n.graphicParams.planeMaterial=n.materialsMap.get(a.MATERIAL_TYPE.TEXTURE),n.setPlaneMaterialType(a.MATERIAL_TYPE.TEXTURE)),n.setPlaneTexture(e.textures.get(t))});for(var s=0,T=t;s<T.length;s++){var l=T[s],u=new r.NumericalCondition(n.animationClock,"elapsedTime",r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,l.startTime,l.endTime);o.addCondition(u,new r.FixedValue(l.value))}e.transitionController.addTransition(o)}function E(e){var t=e.threeViewer,n=u.stagesPlanesMaterial,s=new r.Transition(t.graphicParams,"planeMaterial");s.onCreate(function(){e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).uniforms.fromTexture.value=e.textures.get(i.IGN_STYLES.PLAN),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).uniforms.toTexture.value=e.textures.get(i.IGN_STYLES.MUET),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).uniforms.tex.value=e.textures.get(i.IGN_STYLES.MUET),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).uniforms.color.value=new o.Vector4(.7,.7,.7,1),e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).needsUpdate=!0,e.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).needsUpdate=!0}),s.onChange(function(t){e.threeViewer.setPlaneMaterialType(t)});var T=[],l=new Map;l.set(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR,new r.Transition(t.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR).uniforms.t,"value")),l.set(a.MATERIAL_TYPE.MIX_TWO_TEXTURES,new r.Transition(t.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES).uniforms.t,"value"));for(var c=0,E=n;c<E.length;c++){var d=E[c],m=new r.NumericalCondition(t.animationClock,"elapsedTime",r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,d.startTime,d.endTime);T.push(m),s.addCondition(m,new r.FixedValue(d.material)),l.get(d.material).addCondition(m,new r.InterpolatedValue(d.startT,d.endT,r.INTERPOLATION_TYPE.LINEAR))}e.transitionController.addTransition(s),l.forEach(function(t){e.transitionController.addTransition(t)})}exports.createPlaneTransition=c,exports.createPlaneTransition2=E;var d=new o.Color;function m(e){for(var t=e.threeViewer,n=u.stagesBuildingsHeight,a=u.stagesBuildingsOpacity,i=u.stagesBuildinsColor,o=new r.Transition(e.threeViewer.graphicParams,"buildingsHeight"),s=0,T=n;s<T.length;s++){var l=T[s],c=new r.NumericalCondition(t.animationClock,"elapsedTime",r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,l.startTime,l.endTime);o.addCondition(c,new r.InterpolatedValue(l.startValue,l.endValue,r.INTERPOLATION_TYPE.LINEAR))}o.onValueChange(function(t){for(var n=0,r=e.threeViewer.featuresAllGroup;n<r.length;n++){var a=r[n];a.scale.set(1,1,a.userData.height*t)}}),e.transitionController.addTransition(o);for(var E=new r.Transition(e.threeViewer.graphicParams,"buildingsOpacity"),m=0,P=a;m<P.length;m++){l=P[m],c=new r.NumericalCondition(t.animationClock,"elapsedTime",r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,l.startTime,l.endTime);E.addCondition(c,new r.InterpolatedValue(l.startValue,l.endValue,r.INTERPOLATION_TYPE.LINEAR))}E.onValueChange(function(t){for(var n=0,r=e.threeViewer.featuresAllGroup;n<r.length;n++){r[n].material.opacity=t}}),e.transitionController.addTransition(E);for(var p=new r.Transition(e.threeViewer.graphicParams,"colorBuildings"),C=0,g=i;C<g.length;C++){l=g[C],c=new r.NumericalCondition(t.animationClock,"elapsedTime",r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,l.startTime,l.endTime);p.addCondition(c,new r.InterpolatedValue(l.startValue,l.endValue,r.INTERPOLATION_TYPE.LINEAR))}p.onValueChange(function(t){for(var n=0,r=e.threeViewer.featuresAllGroup;n<r.length;n++){var a=r[n];d.setHex(a.userData.color),a.material.color.lerp(d,t)}}),e.transitionController.addTransition(p)}function P(e,t){return this.createCameraPositionTransitionGeneric(e,t,e.threeViewer.animationClock,"elapsedTime")}function p(e,t){return this.createCameraPositionTransitionGeneric(e,t,t,"progress")}function C(e,t,n,a){var i=e.threeViewer,o=u.cameraPositionStage,T=l.getCoordsFromKeyPoints(o.startPosition,t.keyPointsMap,s.KEY_POINTS),c=l.getCoordsFromKeyPoints(o.endPosition,t.keyPointsMap,s.KEY_POINTS),E=new r.Transition({value:0},"value"),d=new r.NumericalCondition(n,a,r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,o.startTime,o.endTime);return E.onValueChange(function(e){i.currentCamera.position.set(T.x*e+c.x*(1-e),T.y*e+(1-e)*c.y,T.z*e+(1-e)*c.z)}),E.addCondition(d,new r.InterpolatedValue(1,0,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(E),E}function g(e,t){return this.createCameraRotationTransitionGeneric(e,t,e.threeViewer.animationClock,"elapsedTime")}function I(e,t){return this.createCameraRotationTransitionGeneric(e,t,t,"progress")}function _(e,t,n,a){var i=u.cameraRotationStage;console.log("keypoints before",t.keyPointsMap);var T=new o.Camera;T.up=new o.Vector3(0,0,1);var c=new o.Quaternion,E=new o.Quaternion,d=new r.Transition({value:0},"value"),m=new r.NumericalCondition(n,a,r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,i.startTime,i.endTime);return d.onChange(function(){console.log("rotation!"),console.log("key points on change",t.keyPointsMap);var n=l.getCoordsFromKeyPoints(i.startPosition,t.keyPointsMap,s.KEY_POINTS),r=l.getCoordsFromKeyPoints(i.lookAtEnd,t.keyPointsMap,s.KEY_POINTS);T.position.copy(new o.Vector3(n.x,n.y,n.z)),T.lookAt(r.x,r.y,r.z),c.copy(e.threeViewer.currentCamera.quaternion),E.copy(T.quaternion)}),d.onValueChange(function(t){e.threeViewer.currentCamera.quaternion.slerpQuaternions(c,E,t)}),d.addCondition(m,new r.InterpolatedValue(0,1,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(d),d}function h(e,t){return this.createCameraPositionTargetTransitionGeneric(e,t,e.threeViewer.animationClock,"elapsedTime")}function M(e,t){return this.createCameraPositionTargetTransitionGeneric(e,t,t,"progress")}function w(e,t,n,r){var a=u.cameraPositionTargetStage,i=new l.CameraPositionTargetTransition(e,a,n,r,t.keyPointsMap);return e.transitionController.addTransition(i.transition),i}function N(e,t,n,a){var i=this,T=u.cameraRotationStage,c=new r.Transition({value:0},"value"),E=new r.NumericalCondition(n,a,r.CONDITION_TYPE.TIME,r.VALUE_TYPE.NUMBER,T.startTime,T.endTime),d=e.threeViewer.currentCamera;return c.onChange(function(){console.log("rotation!"),console.log("key points on change",t.keyPointsMap);l.getCoordsFromKeyPoints(T.startPosition,t.keyPointsMap,s.KEY_POINTS),l.getCoordsFromKeyPoints(T.lookAtEnd,t.keyPointsMap,s.KEY_POINTS)}),c.onValueChange(function(e){console.log("rotation value",e);(new o.Quaternion).setFromUnitVectors(d.up,new o.Vector3(0,1,0)).clone().invert(),Math.PI;var t=new o.Vector3,n=d.position;t.copy(n).sub(i.centerPoint)}),c.addCondition(E,new r.InterpolatedValue(0,1,r.INTERPOLATION_TYPE.LINEAR)),e.transitionController.addTransition(c),c}exports.createBuildingTransition=m,exports.createCameraPositionTransition=P,exports.createCameraPositionTransitionDrag=p,exports.createCameraPositionTransitionGeneric=C,exports.createCameraRotationTransition=g,exports.createCameraRotationTransitionDrag=I,exports.createCameraRotationTransitionGeneric=_,exports.createCameraPositionTargetTransition=h,exports.createCameraPositionTargetTransitionDrag=M,exports.createCameraPositionTargetTransitionGeneric=w,exports.createCameraRotationTransitionGeneric2=N;
},{"./Transition":"HotB","./VTThreeViewer2":"xmXH","./OLViewer2":"huS9","three":"lKFo","./AnimationStage":"ftNt","./AnimationTransitions":"akpH","./AnimatedTransition":"Ep6A"}],"oNKL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__read=o,exports.__rest=e,exports.__spreadArray=n,exports.__values=t,exports.__assign=void 0;var r=function(){return exports.__assign=r=Object.assign||function(r){for(var e,t=1,o=arguments.length;t<o;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},r.apply(this,arguments)};function e(r,e){var t={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(r);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(r,o[n])&&(t[o[n]]=r[o[n]])}return t}function t(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],o=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var o,n,l=t.call(r),a=[];try{for(;(void 0===e||e-- >0)&&!(o=l.next()).done;)a.push(o.value)}catch(i){n={error:i}}finally{try{o&&!o.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return a}function n(r,e){for(var t=0,o=e.length,n=r.length;t<o;t++,n++)r[n]=e[t];return r}exports.__assign=r;
},{}],"vn3q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TARGETLESS_KEY=exports.STATE_DELIMITER=exports.EMPTY_ACTIVITY_MAP=exports.DEFAULT_GUARD_TYPE=void 0;var T=".";exports.STATE_DELIMITER=T;var e={};exports.EMPTY_ACTIVITY_MAP=e;var E="xstate.guard";exports.DEFAULT_GUARD_TYPE=E;var r="";exports.TARGETLESS_KEY=r;
},{}],"u8t4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_PRODUCTION=void 0;var e=!0;exports.IS_PRODUCTION=e;
},{}],"nKRi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.evaluateGuard=F,exports.flatten=x,exports.getEventType=a,exports.isActor=C,exports.isArray=A,exports.isBehavior=m,exports.isBuiltInEvent=b,exports.isFunction=j,exports.isMachine=U,exports.isObservable=P,exports.isPromiseLike=g,exports.isStateLike=u,exports.isString=k,exports.keys=n,exports.mapContext=h,exports.mapFilterValues=p,exports.mapValues=f,exports.matchesState=o,exports.nestedPath=v,exports.normalizeTarget=$,exports.partition=E,exports.pathToStateValue=c,exports.reportUnhandledExceptionOnInvocation=q,exports.toArray=_,exports.toArrayStrict=d,exports.toEventObject=R,exports.toGuard=I,exports.toInvokeSource=V,exports.toObserver=Y,exports.toSCXMLEvent=G,exports.toStatePath=i,exports.toStatePaths=y,exports.toStateValue=s,exports.toTransitionConfigArray=M,exports.updateContext=O,exports.updateHistoryStates=S,exports.updateHistoryValue=w,exports.warn=exports.uniqueId=exports.symbolObservable=exports.path=void 0;var t=require("./_virtual/_tslib.js"),r=require("./constants.js"),e=require("./environment.js");function n(t){return Object.keys(t)}function o(t,e,a){void 0===a&&(a=r.STATE_DELIMITER);var i=s(t,a),u=s(e,a);return k(u)?!!k(i)&&u===i:k(i)?i in u:n(i).every(function(t){return t in u&&o(i[t],u[t])})}function a(t){try{return k(t)||"number"==typeof t?""+t:t.type}catch(r){throw new Error("Events must be strings or objects with a string event.type property.")}}function i(t,r){try{return A(t)?t:t.toString().split(r)}catch(e){throw new Error("'"+t+"' is not a valid state path.")}}function u(t){return"object"==typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function s(t,r){return u(t)?t.value:A(t)?c(t):"string"!=typeof t?t:c(i(t,r))}function c(t){if(1===t.length)return t[0];for(var r={},e=r,n=0;n<t.length-1;n++)n===t.length-2?e[t[n]]=t[n+1]:(e[t[n]]={},e=e[t[n]]);return r}function f(t,r){for(var e={},o=n(t),a=0;a<o.length;a++){var i=o[a];e[i]=r(t[i],i,t,a)}return e}function p(r,e,o){var a,i,u={};try{for(var s=(0,t.__values)(n(r)),c=s.next();!c.done;c=s.next()){var f=c.value,p=r[f];o(p)&&(u[f]=e(p,f,r))}}catch(l){a={error:l}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return u}var l=function(r){return function(e){var n,o,a=e;try{for(var i=(0,t.__values)(r),u=i.next();!u.done;u=i.next()){a=a[u.value]}}catch(s){n={error:s}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a}};function v(r,e){return function(n){var o,a,i=n;try{for(var u=(0,t.__values)(r),s=u.next();!s.done;s=u.next()){var c=s.value;i=i[e][c]}}catch(f){o={error:f}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return i}}function y(t){return t?k(t)?[[t]]:x(n(t).map(function(r){var e=t[r];return"string"==typeof e||e&&Object.keys(e).length?y(t[r]).map(function(t){return[r].concat(t)}):[[r]]})):[[]]}function x(r){var e;return(e=[]).concat.apply(e,(0,t.__spreadArray)([],(0,t.__read)(r)))}function d(t){return A(t)?t:[t]}function _(t){return void 0===t?[]:d(t)}function h(r,e,n){var o,a;if(j(r))return r(e,n.data);var i={};try{for(var u=(0,t.__values)(Object.keys(r)),s=u.next();!s.done;s=u.next()){var c=s.value,f=r[c];j(f)?i[c]=f(e,n.data):i[c]=f}}catch(p){o={error:p}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return i}function b(t){return/^(done|error)\./.test(t)}function g(t){return t instanceof Promise||!(null===t||!j(t)&&"object"!=typeof t||!j(t.then))}function m(t){return null!==t&&"object"==typeof t&&"transition"in t&&"function"==typeof t.transition}function E(r,e){var n,o,a=(0,t.__read)([[],[]],2),i=a[0],u=a[1];try{for(var s=(0,t.__values)(r),c=s.next();!c.done;c=s.next()){var f=c.value;e(f)?i.push(f):u.push(f)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return[i,u]}function S(t,r){return f(t.states,function(t,e){if(t){var n=(k(r)?void 0:r[e])||(t?t.current:void 0);if(n)return{current:n,states:S(t,n)}}})}function w(t,r){return{current:r,states:S(t,r)}}function O(r,o,a,i){return e.IS_PRODUCTION||T(!!r,"Attempting to update undefined context"),r?a.reduce(function(r,e){var a,u,s=e.assignment,c={state:i,action:e,_event:o},f={};if(j(s))f=s(r,o.data,c);else try{for(var p=(0,t.__values)(n(s)),l=p.next();!l.done;l=p.next()){var v=l.value,y=s[v];f[v]=j(y)?y(r,o.data,c):y}}catch(x){a={error:x}}finally{try{l&&!l.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}return Object.assign({},r,f)},r):r}exports.path=l;var T=function(){};function A(t){return Array.isArray(t)}function j(t){return"function"==typeof t}function k(t){return"string"==typeof t}function I(t,e){if(t)return k(t)?{type:r.DEFAULT_GUARD_TYPE,name:t,predicate:e?e[t]:void 0}:j(t)?{type:r.DEFAULT_GUARD_TYPE,name:t.name,predicate:t}:t}function P(t){try{return"subscribe"in t&&j(t.subscribe)}catch(r){return!1}}exports.warn=T,e.IS_PRODUCTION||(exports.warn=T=function(t,r){var e=t instanceof Error?t:void 0;if((e||!t)&&void 0!==console){var n=["Warning: "+r];e&&n.push(e),console.warn.apply(console,n)}});var D=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function U(t){try{return"__xstatenode"in t}catch(r){return!1}}function C(t){return!!t&&"function"==typeof t.send}exports.symbolObservable=D;var L=function(){var t=0;return function(){return(++t).toString(16)}}();function R(r,e){return k(r)||"number"==typeof r?(0,t.__assign)({type:r},e):r}function G(r,e){if(!k(r)&&"$$type"in r&&"scxml"===r.$$type)return r;var n=R(r);return(0,t.__assign)({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function M(r,e){return d(e).map(function(e){return void 0===e||"string"==typeof e||U(e)?{target:e,event:r}:(0,t.__assign)((0,t.__assign)({},e),{event:r})})}function $(t){if(void 0!==t&&t!==r.TARGETLESS_KEY)return _(t)}function q(t,r,n){if(!e.IS_PRODUCTION){var o=t.stack?" Stacktrace was '"+t.stack+"'":"";if(t===r)console.error("Missing onError handler for invocation '"+n+"', error was '"+t+"'."+o);else{var a=r.stack?" Stacktrace was '"+r.stack+"'":"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '"+n+"'. Original error: '"+t+"'. "+o+" Current error is '"+r+"'."+a)}}}function F(t,e,n,o,a){var i=t.options.guards,u={state:a,cond:e,_event:o};if(e.type===r.DEFAULT_GUARD_TYPE)return e.predicate(n,o.data,u);var s=i[e.type];if(!s)throw new Error("Guard '"+e.type+"' is not implemented on machine '"+t.id+"'.");return s(n,o.data,u)}function V(t){return"string"==typeof t?{type:t}:t}function Y(t,r,e){if("object"==typeof t)return t;var n=function(){};return{next:t,error:r||n,complete:e||n}}exports.uniqueId=L;
},{"./_virtual/_tslib.js":"oNKL","./constants.js":"vn3q","./environment.js":"u8t4"}],"tBiE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapState=t;var e=require("./_virtual/_tslib.js"),r=require("./utils.js");function t(t,a){var l,n,s;try{for(var u=(0,e.__values)((0,r.keys)(t)),i=u.next();!i.done;i=u.next()){var o=i.value;(0,r.matchesState)(o,a)&&(!s||a.length>s.length)&&(s=o)}}catch(v){l={error:v}}finally{try{i&&!i.done&&(n=u.return)&&n.call(u)}finally{if(l)throw l.error}}return t[s]}
},{"./_virtual/_tslib.js":"oNKL","./utils.js":"nKRi"}],"p2fj":[function(require,module,exports) {
"use strict";var t,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpecialTargets=exports.ActionTypes=void 0,exports.ActionTypes=t,function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(t||(exports.ActionTypes=t={})),exports.SpecialTargets=e,function(t){t.Parent="#_parent",t.Internal="#_internal"}(e||(exports.SpecialTargets=e={}));
},{}],"fEun":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.update=exports.stop=exports.start=exports.send=exports.raise=exports.pure=exports.nullEvent=exports.log=exports.invoke=exports.init=exports.errorPlatform=exports.errorExecution=exports.error=exports.doneState=exports.choose=exports.cancel=exports.assign=exports.after=void 0;var e=require("./types.js"),r=e.ActionTypes.Start;exports.start=r;var t=e.ActionTypes.Stop;exports.stop=t;var o=e.ActionTypes.Raise;exports.raise=o;var s=e.ActionTypes.Send;exports.send=s;var p=e.ActionTypes.Cancel;exports.cancel=p;var n=e.ActionTypes.NullEvent;exports.nullEvent=n;var a=e.ActionTypes.Assign;exports.assign=a;var x=e.ActionTypes.After;exports.after=x;var i=e.ActionTypes.DoneState;exports.doneState=i;var c=e.ActionTypes.Log;exports.log=c;var v=e.ActionTypes.Init;exports.init=v;var y=e.ActionTypes.Invoke;exports.invoke=y;var A=e.ActionTypes.ErrorExecution;exports.errorExecution=A;var T=e.ActionTypes.ErrorPlatform;exports.errorPlatform=T;var l=e.ActionTypes.ErrorCustom;exports.error=l;var u=e.ActionTypes.Update;exports.update=u;var d=e.ActionTypes.Choose;exports.choose=d;var E=e.ActionTypes.Pure;exports.pure=E;
},{"./types.js":"p2fj"}],"aiPo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.after=j,exports.choose=q,exports.done=m,exports.doneInvoke=E,exports.error=O,exports.escalate=I,exports.forwardTo=C,exports.getActionFunction=s,exports.log=x,exports.pure=P,exports.raise=p,exports.resolveActions=L,exports.resolveRaise=v,exports.resolveSend=y,exports.resolveStop=F,exports.respond=_,exports.send=d,exports.sendParent=f,exports.sendUpdate=l,exports.start=T,exports.stop=b,exports.toActionObject=a,exports.toActivityDefinition=c,exports.toActionObjects=exports.resolveLog=exports.initEvent=exports.cancel=exports.assign=void 0;var t=require("./_virtual/_tslib.js"),e=require("./environment.js"),n=require("./utils.js"),r=require("./types.js"),i=require("./actionTypes.js"),o=(0,n.toSCXMLEvent)({type:i.init});function s(t,e){return e&&e[t]||void 0}function a(e,r){var i;if((0,n.isString)(e)||"number"==typeof e){var o=s(e,r);i=(0,n.isFunction)(o)?{type:e,exec:o}:o||{type:e,exec:void 0}}else if((0,n.isFunction)(e))i={type:e.name||e.toString(),exec:e};else{o=s(e.type,r);if((0,n.isFunction)(o))i=(0,t.__assign)((0,t.__assign)({},e),{exec:o});else if(o){var a=o.type||e.type;i=(0,t.__assign)((0,t.__assign)((0,t.__assign)({},o),e),{type:a})}else i=e}return Object.defineProperty(i,"toString",{value:function(){return i.type},enumerable:!1,configurable:!0}),i}exports.initEvent=o;var u=function(t,e){return t?((0,n.isArray)(t)?t:[t]).map(function(t){return a(t,e)}):[]};function c(e){var r=a(e);return(0,t.__assign)((0,t.__assign)({id:(0,n.isString)(e)?e:r.id},r),{type:r.type})}function p(t){return(0,n.isString)(t)?{type:i.raise,event:t}:d(t,{to:r.SpecialTargets.Internal})}function v(t){return{type:i.raise,_event:(0,n.toSCXMLEvent)(t.event)}}function d(t,e){return{to:e?e.to:void 0,type:i.send,event:(0,n.isFunction)(t)?t:(0,n.toEventObject)(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:(0,n.isFunction)(t)?t.name:(0,n.getEventType)(t)}}function y(e,r,i,o){var s,a={_event:i},u=(0,n.toSCXMLEvent)((0,n.isFunction)(e.event)?e.event(r,i.data,a):e.event);if((0,n.isString)(e.delay)){var c=o&&o[e.delay];s=(0,n.isFunction)(c)?c(r,i.data,a):c}else s=(0,n.isFunction)(e.delay)?e.delay(r,i.data,a):e.delay;var p=(0,n.isFunction)(e.to)?e.to(r,i.data,a):e.to;return(0,t.__assign)((0,t.__assign)({},e),{to:p,_event:u,event:u.data,delay:s})}function f(e,n){return d(e,(0,t.__assign)((0,t.__assign)({},n),{to:r.SpecialTargets.Parent}))}function l(){return f(i.update)}function _(e,n){return d(e,(0,t.__assign)((0,t.__assign)({},n),{to:function(t,e,n){return n._event.origin}}))}exports.toActionObjects=u;var g=function(t,e){return{context:t,event:e}};function x(t,e){return void 0===t&&(t=g),{type:i.log,label:e,expr:t}}var S=function(e,r,i){return(0,t.__assign)((0,t.__assign)({},e),{value:(0,n.isString)(e.expr)?e.expr:e.expr(r,i.data,{_event:i})})};exports.resolveLog=S;var A=function(t){return{type:i.cancel,sendId:t}};function T(t){var e=c(t);return{type:r.ActionTypes.Start,activity:e,exec:void 0}}function b(t){var e=(0,n.isFunction)(t)?t:c(t);return{type:r.ActionTypes.Stop,activity:e,exec:void 0}}function F(t,e,i){var o=(0,n.isFunction)(t.activity)?t.activity(e,i.data):t.activity,s="string"==typeof o?{id:o}:o;return{type:r.ActionTypes.Stop,activity:s}}exports.cancel=A;var h=function(t){return{type:i.assign,assignment:t}};function j(t,e){var n=e?"#"+e:"";return r.ActionTypes.After+"("+t+")"+n}function m(t,e){var n=r.ActionTypes.DoneState+"."+t,i={type:n,data:e,toString:function(){return n}};return i}function E(t,e){var n=r.ActionTypes.DoneInvoke+"."+t,i={type:n,data:e,toString:function(){return n}};return i}function O(t,e){var n=r.ActionTypes.ErrorPlatform+"."+t,i={type:n,data:e,toString:function(){return n}};return i}function P(t){return{type:r.ActionTypes.Pure,get:t}}function C(e,n){return d(function(t,e){return e},(0,t.__assign)((0,t.__assign)({},n),{to:e}))}function I(e,o){return f(function(t,r,o){return{type:i.error,data:(0,n.isFunction)(e)?e(t,r,o):e}},(0,t.__assign)((0,t.__assign)({},o),{to:r.SpecialTargets.Parent}))}function q(t){return{type:r.ActionTypes.Choose,conds:t}}function L(r,o,s,c,p,d){void 0===d&&(d=!1);var f=(0,t.__read)(d?[[],p]:(0,n.partition)(p,function(t){return t.type===i.assign}),2),l=f[0],_=f[1],g=l.length?(0,n.updateContext)(s,c,l,o):s,x=d?[s]:void 0;return[(0,n.flatten)(_.map(function(s){var p;switch(s.type){case i.raise:return v(s);case i.send:var f=y(s,g,c,r.options.delays);return e.IS_PRODUCTION||(0,n.warn)(!(0,n.isString)(s.delay)||"number"==typeof f.delay,"No delay reference for delay expression '"+s.delay+"' was found on machine '"+r.id+"'"),f;case i.log:return S(s,g,c);case i.choose:if(!(T=null===(p=s.conds.find(function(t){var e=(0,n.toGuard)(t.cond,r.options.guards);return!e||(0,n.evaluateGuard)(r,e,g,c,o)}))||void 0===p?void 0:p.actions))return[];var l=(0,t.__read)(L(r,o,g,c,u((0,n.toArray)(T),r.options.actions),d),2),_=l[0],A=l[1];return g=A,null==x||x.push(g),_;case i.pure:var T;if(!(T=s.get(g,c.data)))return[];var b=(0,t.__read)(L(r,o,g,c,u((0,n.toArray)(T),r.options.actions),d),2),h=b[0],j=b[1];return g=j,null==x||x.push(g),h;case i.stop:return F(s,g,c);case i.assign:g=(0,n.updateContext)(g,c,[s],o),null==x||x.push(g);break;default:var m=a(s,r.options.actions),E=m.exec;if(E&&x){var O=x.length-1;m.exec=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];null==E||E.apply(void 0,(0,t.__spreadArray)([x[O]],(0,t.__read)(n)))}}return m}}).filter(function(t){return!!t})),g]}exports.assign=h;
},{"./_virtual/_tslib.js":"oNKL","./environment.js":"u8t4","./utils.js":"nKRi","./types.js":"p2fj","./actionTypes.js":"fEun"}],"Po3J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAdjList=u,exports.getAllStateNodes=a,exports.getChildren=n,exports.getConfiguration=o,exports.getMeta=d,exports.getValue=f,exports.has=l,exports.isInFinalState=c,exports.nextEvents=s,exports.isLeafNode=void 0;var r=require("./_virtual/_tslib.js"),e=require("./utils.js"),t=function(r){return"atomic"===r.type||"final"===r.type};function n(r){return(0,e.keys)(r.states).map(function(e){return r.states[e]})}function a(r){var o=[r];return t(r)?o:o.concat((0,e.flatten)(n(r).map(a)))}function o(e,t){var a,o,i,f,l,s,c,d,p=u(new Set(e)),y=new Set(t);try{for(var v=(0,r.__values)(y),h=v.next();!h.done;h=v.next())for(var x=(j=h.value).parent;x&&!y.has(x);)y.add(x),x=x.parent}catch(k){a={error:k}}finally{try{h&&!h.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}var _=u(y);try{for(var g=(0,r.__values)(y),m=g.next();!m.done;m=g.next()){if("compound"!==(j=m.value).type||_.get(j)&&_.get(j).length){if("parallel"===j.type)try{for(var w=(l=void 0,(0,r.__values)(n(j))),S=w.next();!S.done;S=w.next()){var E=S.value;"history"!==E.type&&(y.has(E)||(y.add(E),p.get(E)?p.get(E).forEach(function(r){return y.add(r)}):E.initialStateNodes.forEach(function(r){return y.add(r)})))}}catch(L){l={error:L}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(l)throw l.error}}}else p.get(j)?p.get(j).forEach(function(r){return y.add(r)}):j.initialStateNodes.forEach(function(r){return y.add(r)})}}catch(M){i={error:M}}finally{try{m&&!m.done&&(f=g.return)&&f.call(g)}finally{if(i)throw i.error}}try{for(var A=(0,r.__values)(y),N=A.next();!N.done;N=A.next()){var j;for(x=(j=N.value).parent;x&&!y.has(x);)y.add(x),x=x.parent}}catch(b){c={error:b}}finally{try{N&&!N.done&&(d=A.return)&&d.call(A)}finally{if(c)throw c.error}}return y}function i(r,e){var n=e.get(r);if(!n)return{};if("compound"===r.type){var a=n[0];if(!a)return{};if(t(a))return a.key}var o={};return n.forEach(function(r){o[r.key]=i(r,e)}),o}function u(e){var t,n,a=new Map;try{for(var o=(0,r.__values)(e),i=o.next();!i.done;i=o.next()){var u=i.value;a.has(u)||a.set(u,[]),u.parent&&(a.has(u.parent)||a.set(u.parent,[]),a.get(u.parent).push(u))}}catch(f){t={error:f}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a}function f(r,e){return i(r,u(o([r],e)))}function l(r,e){return Array.isArray(r)?r.some(function(r){return r===e}):r instanceof Set&&r.has(e)}function s(t){return(0,r.__spreadArray)([],(0,r.__read)(new Set((0,e.flatten)((0,r.__spreadArray)([],(0,r.__read)(t.map(function(r){return r.ownEvents})))))))}function c(r,e){return"compound"===e.type?n(e).some(function(e){return"final"===e.type&&l(r,e)}):"parallel"===e.type&&n(e).every(function(e){return c(r,e)})}function d(r){return void 0===r&&(r=[]),r.reduce(function(r,e){return void 0!==e.meta&&(r[e.id]=e.meta),r},{})}exports.isLeafNode=t;
},{"./_virtual/_tslib.js":"oNKL","./utils.js":"nKRi"}],"ZYmb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindActionToState=a,exports.isState=o,exports.stateValuesEqual=r,exports.State=void 0;var t=require("./_virtual/_tslib.js"),i=require("./constants.js"),e=require("./utils.js"),n=require("./stateUtils.js"),s=require("./actions.js");function r(t,i){if(t===i)return!0;if(void 0===t||void 0===i)return!1;if((0,e.isString)(t)||(0,e.isString)(i))return t===i;var n=(0,e.keys)(t),s=(0,e.keys)(i);return n.length===s.length&&n.every(function(e){return r(t[e],i[e])})}function o(t){return!(0,e.isString)(t)&&("value"in t&&"history"in t)}function a(i,e){var n=i.exec;return(0,t.__assign)((0,t.__assign)({},i),{exec:void 0!==n?function(){return n(e.context,e.event,{action:i,state:e,_event:e._event})}:void 0})}var u=function(){function r(t){var e,s=this;this.actions=[],this.activities=i.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||i.EMPTY_ACTIVITY_MAP,this.meta=(0,n.getMeta)(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=t.tags)&&void 0!==e?e:new Set,Object.defineProperty(this,"nextEvents",{get:function(){return(0,n.nextEvents)(s.configuration)}})}return r.from=function(t,i){return t instanceof r?t.context!==i?new r({value:t.value,context:i,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new r({value:t,context:i,_event:s.initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},r.create=function(t){return new r(t)},r.inert=function(t,i){if(t instanceof r){if(!t.actions.length)return t;var e=s.initEvent;return new r({value:t.value,context:i,_event:e,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return r.from(t,i)},r.prototype.toStrings=function(i,n){var s=this;if(void 0===i&&(i=this.value),void 0===n&&(n="."),(0,e.isString)(i))return[i];var r=(0,e.keys)(i);return r.concat.apply(r,(0,t.__spreadArray)([],(0,t.__read)(r.map(function(t){return s.toStrings(i[t],n).map(function(i){return t+n+i})}))))},r.prototype.toJSON=function(){this.configuration,this.transitions;var i=this.tags,e=(0,t.__rest)(this,["configuration","transitions","tags"]);return(0,t.__assign)((0,t.__assign)({},e),{tags:Array.from(i)})},r.prototype.matches=function(t){return(0,e.matchesState)(t,this.value)},r.prototype.hasTag=function(t){return this.tags.has(t)},r}();exports.State=u;
},{"./_virtual/_tslib.js":"oNKL","./constants.js":"vn3q","./utils.js":"nKRi","./stateUtils.js":"Po3J","./actions.js":"aiPo"}],"Yl0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.provide=exports.consume=void 0;var e=[],r=function(r,o){e.push(r);var t=o(r);return e.pop(),t};exports.provide=r;var o=function(r){return r(e[e.length-1])};exports.consume=o;
},{}],"Obbk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeferredActor=o,exports.createInvocableActor=i,exports.createNullActor=r,exports.isActor=u,exports.isSpawnedActor=c,exports.toActorRef=s;var t=require("./_virtual/_tslib.js"),e=require("./utils.js"),n=require("./serviceScope.js");function r(t){return{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}}}function i(t,n,i,u){var c,s=(0,e.toInvokeSource)(t.src),a=null===(c=null==n?void 0:n.options.services)||void 0===c?void 0:c[s.type],f=t.data?(0,e.mapContext)(t.data,i,u):void 0,d=a?o(a,t.id,f):r(t.id);return d.meta=t,d}function o(t,i,o){var u=r(i);if(u.deferred=!0,(0,e.isMachine)(t)){var c=u.state=(0,n.provide)(void 0,function(){return(o?t.withContext(o):t).initialState});u.getSnapshot=function(){return c}}return u}function u(t){try{return"function"==typeof t.send}catch(e){return!1}}function c(t){return u(t)&&"id"in t}function s(e){return(0,t.__assign)({subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e)}
},{"./_virtual/_tslib.js":"oNKL","./utils.js":"nKRi","./serviceScope.js":"Yl0I"}],"es12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toInvokeDefinition=t,exports.toInvokeSource=n;var r=require("./_virtual/_tslib.js");require("./environment.js"),require("./utils.js"),require("./types.js");var e=require("./actionTypes.js");function n(r){if("string"==typeof r){var e={type:r,toString:function(){return r}};return e}return r}function t(t){return(0,r.__assign)((0,r.__assign)({type:e.invoke},t),{toJSON:function(){t.onDone,t.onError;var o=(0,r.__rest)(t,["onDone","onError"]);return(0,r.__assign)((0,r.__assign)({},o),{type:e.invoke,src:n(t.src)})}})}
},{"./_virtual/_tslib.js":"oNKL","./environment.js":"u8t4","./utils.js":"nKRi","./types.js":"p2fj","./actionTypes.js":"fEun"}],"QhAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StateNode=void 0;var t=require("./_virtual/_tslib.js"),e=require("./constants.js"),i=require("./environment.js"),n=require("./utils.js"),r=require("./types.js"),a=require("./stateUtils.js"),o=require("./actionTypes.js"),s=require("./actions.js"),h=require("./State.js"),c=require("./Actor.js"),u=require("./invokeUtils.js"),l="",f="#",d="*",p={},v=function(t){return t[0]===f},y=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},g=function(t,e,i){var r=i.slice(0,-1).some(function(t){return!("cond"in t)&&!("in"in t)&&((0,n.isString)(t.target)||(0,n.isMachine)(t.target))}),a=e===l?"the transient event":"event '"+e+"'";(0,n.warn)(!r,"One or more transitions for "+a+" on state '"+t.id+"' are unreachable. Make sure that the default transition is the last one defined.")},_=function(){function _(r,o,h){var c,f=this;void 0===h&&(h=r.context),this.config=r,this._context=h,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(y(),o),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:e.STATE_DELIMITER),this.id=this.config.id||(0,t.__spreadArray)([this.machine.key],(0,t.__read)(this.path)).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&(0,n.keys)(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(c=this.config.schema)&&void 0!==c?c:{},i.IS_PRODUCTION||(0,n.warn)(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '+(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=this.config.initial,this.states=this.config.states?(0,n.mapValues)(this.config.states,function(e,i){var n,r=new _(e,{_parent:f,_key:i});return Object.assign(f.idMap,(0,t.__assign)(((n={})[r.id]=r,n),r.idMap)),r}):p;var d=0;!function e(i){var n,r;i.order=d++;try{for(var o=(0,t.__values)((0,a.getChildren)(i)),s=o.next();!s.done;s=o.next())e(s.value)}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some(function(t){return t.event===l}):l in this.config.on),this.strict=!!this.config.strict,this.onEntry=(0,n.toArray)(this.config.entry||this.config.onEntry).map(function(t){return(0,s.toActionObject)(t)}),this.onExit=(0,n.toArray)(this.config.exit||this.config.onExit).map(function(t){return(0,s.toActionObject)(t)}),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=(0,n.toArray)(this.config.invoke).map(function(e,i){var r,a;if((0,n.isMachine)(e))return f.machine.options.services=(0,t.__assign)(((r={})[e.id]=e,r),f.machine.options.services),(0,u.toInvokeDefinition)({src:e.id,id:e.id});if((0,n.isString)(e.src))return(0,u.toInvokeDefinition)((0,t.__assign)((0,t.__assign)({},e),{id:e.id||e.src,src:e.src}));if((0,n.isMachine)(e.src)||(0,n.isFunction)(e.src)){var o=f.id+":invocation["+i+"]";return f.machine.options.services=(0,t.__assign)(((a={})[o]=e.src,a),f.machine.options.services),(0,u.toInvokeDefinition)((0,t.__assign)((0,t.__assign)({id:o},e),{src:o}))}var s=e.src;return(0,u.toInvokeDefinition)((0,t.__assign)((0,t.__assign)({id:s.type},e),{src:s}))}),this.activities=(0,n.toArray)(this.config.activities).concat(this.invoke).map(function(t){return(0,s.toActivityDefinition)(t)}),this.transition=this.transition.bind(this),this.tags=(0,n.toArray)(this.config.tags)}return _.prototype._init=function(){this.__cache.transitions||(0,a.getAllStateNodes)(this).forEach(function(t){return t.on})},_.prototype.withConfig=function(e,i){var n=this.options,r=n.actions,a=n.activities,o=n.guards,s=n.services,h=n.delays;return new _(this.config,{actions:(0,t.__assign)((0,t.__assign)({},r),e.actions),activities:(0,t.__assign)((0,t.__assign)({},a),e.activities),guards:(0,t.__assign)((0,t.__assign)({},o),e.guards),services:(0,t.__assign)((0,t.__assign)({},s),e.services),delays:(0,t.__assign)((0,t.__assign)({},h),e.delays)},null!=i?i:this.context)},_.prototype.withContext=function(t){return new _(this.config,this.options,t)},Object.defineProperty(_.prototype,"context",{get:function(){return(0,n.isFunction)(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:(0,n.mapValues)(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke}},enumerable:!1,configurable:!0}),_.prototype.toJSON=function(){return this.definition},Object.defineProperty(_.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),_.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===l,i=this.transitions.filter(function(i){var n=i.eventType===t;return e?n:n||i.eventType===d});return this.__cache.candidates[t]=i,i},_.prototype.getDelayedTransitions=function(){var e=this,i=this.config.after;if(!i)return[];var r=function(t,i){var r=(0,n.isFunction)(t)?e.id+":delay["+i+"]":t,a=(0,s.after)(r,e.id);return e.onEntry.push((0,s.send)(a,{delay:t})),e.onExit.push((0,s.cancel)(a)),a};return((0,n.isArray)(i)?i.map(function(e,i){var n=r(e.delay,i);return(0,t.__assign)((0,t.__assign)({},e),{event:n})}):(0,n.flatten)((0,n.keys)(i).map(function(e,a){var o=i[e],s=(0,n.isString)(o)?{target:o}:o,h=isNaN(+e)?e:+e,c=r(h,a);return(0,n.toArray)(s).map(function(e){return(0,t.__assign)((0,t.__assign)({},e),{event:c,delay:h})})}))).map(function(i){var n=i.delay;return(0,t.__assign)((0,t.__assign)({},e.formatTransition(i)),{delay:n})})},_.prototype.getStateNodes=function(t){var e,i=this;if(!t)return[];var r=t instanceof h.State?t.value:(0,n.toStateValue)(t,this.delimiter);if((0,n.isString)(r)){var a=this.getStateNode(r).initial;return void 0!==a?this.getStateNodes(((e={})[r]=a,e)):[this,this.states[r]]}var o=(0,n.keys)(r),s=o.map(function(t){return i.getStateNode(t)});return s.push(this),s.concat(o.reduce(function(t,e){var n=i.getStateNode(e).getStateNodes(r[e]);return t.concat(n)},[]))},_.prototype.handles=function(t){var e=(0,n.getEventType)(t);return this.events.includes(e)},_.prototype.resolveState=function(e){var i=Array.from((0,a.getConfiguration)([],this.getStateNodes(e.value)));return new h.State((0,t.__assign)((0,t.__assign)({},e),{value:this.resolve(e.value),configuration:i,done:(0,a.isInFinalState)(i,this)}))},_.prototype.transitionLeafNode=function(t,e,i){var n=this.getStateNode(t).next(e,i);return n&&n.transitions.length?n:this.next(e,i)},_.prototype.transitionCompoundNode=function(t,e,i){var r=(0,n.keys)(t),a=this.getStateNode(r[0])._transition(t[r[0]],e,i);return a&&a.transitions.length?a:this.next(e,i)},_.prototype.transitionParallelNode=function(e,i,r){var a,o,s={};try{for(var h=(0,t.__values)((0,n.keys)(e)),c=h.next();!c.done;c=h.next()){var u=c.value,l=e[u];if(l){var f=this.getStateNode(u)._transition(l,i,r);f&&(s[u]=f)}}}catch(g){a={error:g}}finally{try{c&&!c.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}var d=(0,n.keys)(s).map(function(t){return s[t]}),p=(0,n.flatten)(d.map(function(t){return t.transitions}));if(!d.some(function(t){return t.transitions.length>0}))return this.next(i,r);var v=(0,n.flatten)(d.map(function(t){return t.entrySet})),y=(0,n.flatten)((0,n.keys)(s).map(function(t){return s[t].configuration}));return{transitions:p,entrySet:v,exitSet:(0,n.flatten)(d.map(function(t){return t.exitSet})),configuration:y,source:i,actions:(0,n.flatten)((0,n.keys)(s).map(function(t){return s[t].actions}))}},_.prototype._transition=function(t,e,i){return(0,n.isString)(t)?this.transitionLeafNode(t,e,i):1===(0,n.keys)(t).length?this.transitionCompoundNode(t,e,i):this.transitionParallelNode(t,e,i)},_.prototype.next=function(e,i){var r,a,o,s=this,h=i.name,c=[],u=[];try{for(var l=(0,t.__values)(this.getCandidates(h)),f=l.next();!f.done;f=l.next()){var d=f.value,p=d.cond,y=d.in,g=e.context,_=!y||((0,n.isString)(y)&&v(y)?e.matches((0,n.toStateValue)(this.getStateNodeById(y).path,this.delimiter)):(0,n.matchesState)((0,n.toStateValue)(y,this.delimiter),(0,n.path)(this.path.slice(0,-2))(e.value))),m=!1;try{m=!p||(0,n.evaluateGuard)(this.machine,p,g,i,e)}catch(w){throw new Error("Unable to evaluate guard '"+(p.name||p.type)+"' in transition for event '"+h+"' in state node '"+this.id+"':\n"+w.message)}if(m&&_){void 0!==d.target&&(u=d.target),c.push.apply(c,(0,t.__spreadArray)([],(0,t.__read)(d.actions))),o=d;break}}}catch(b){r={error:b}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}if(o){if(!u.length)return{transitions:[o],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var S=(0,n.flatten)(u.map(function(t){return s.getRelativeStateNodes(t,e.historyValue)})),x=!!o.internal;return{transitions:[o],entrySet:x?[]:(0,n.flatten)(S.map(function(t){return s.nodesFromChild(t)})),exitSet:x?[]:[this],configuration:S,source:e,actions:c}}},_.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],i=t;i&&i!==this;)e.push(i),i=i.parent;return e.push(this),e},_.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},_.prototype.getActions=function(e,i,r,o){var h,c,u,l,f=(0,a.getConfiguration)([],o?this.getStateNodes(o.value):[this]),d=e.configuration.length?(0,a.getConfiguration)(f,e.configuration):f;try{for(var p=(0,t.__values)(d),v=p.next();!v.done;v=p.next()){var y=v.value;(0,a.has)(f,y)||e.entrySet.push(y)}}catch(A){h={error:A}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(h)throw h.error}}try{for(var g=(0,t.__values)(f),_=g.next();!_.done;_=g.next()){y=_.value;(0,a.has)(d,y)&&!(0,a.has)(e.exitSet,y.parent)||e.exitSet.push(y)}}catch(T){u={error:T}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(u)throw u.error}}e.source||(e.exitSet=[],e.entrySet.push(this));var m=(0,n.flatten)(e.entrySet.map(function(t){var o=[];if("final"!==t.type)return o;var h=t.parent;if(!h.parent)return o;o.push((0,s.done)(t.id,t.doneData),(0,s.done)(h.id,t.doneData?(0,n.mapContext)(t.doneData,i,r):void 0));var c=h.parent;return"parallel"===c.type&&(0,a.getChildren)(c).every(function(t){return(0,a.isInFinalState)(e.configuration,t)})&&o.push((0,s.done)(c.id)),o}));e.exitSet.sort(function(t,e){return e.order-t.order}),e.entrySet.sort(function(t,e){return t.order-e.order});var S=new Set(e.entrySet),x=new Set(e.exitSet),w=(0,t.__read)([(0,n.flatten)(Array.from(S).map(function(e){return(0,t.__spreadArray)((0,t.__spreadArray)([],(0,t.__read)(e.activities.map(function(t){return(0,s.start)(t)}))),(0,t.__read)(e.onEntry))})).concat(m.map(s.raise)),(0,n.flatten)(Array.from(x).map(function(e){return(0,t.__spreadArray)((0,t.__spreadArray)([],(0,t.__read)(e.onExit)),(0,t.__read)(e.activities.map(function(t){return(0,s.stop)(t)})))}))],2),b=w[0],N=w[1];return(0,s.toActionObjects)(N.concat(e.actions).concat(b),this.machine.options.actions)},_.prototype.transition=function(e,r,o){void 0===e&&(e=this.initialState);var s,c=(0,n.toSCXMLEvent)(r);if(e instanceof h.State)s=void 0===o?e:this.resolveState(h.State.from(e,o));else{var u=(0,n.isString)(e)?this.resolve((0,n.pathToStateValue)(this.getResolvedPath(e))):this.resolve(e),l=null!=o?o:this.machine.context;s=this.resolveState(h.State.from(u,l))}if(!i.IS_PRODUCTION&&c.name===d)throw new Error("An event cannot have the wildcard type ('"+d+"')");if(this.strict&&!this.events.includes(c.name)&&!(0,n.isBuiltInEvent)(c.name))throw new Error("Machine '"+this.id+"' does not accept event '"+c.name+"'");var f=this._transition(s.value,s,c)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},p=(0,a.getConfiguration)([],this.getStateNodes(s.value)),v=f.configuration.length?(0,a.getConfiguration)(p,f.configuration):p;return f.configuration=(0,t.__spreadArray)([],(0,t.__read)(v)),this.resolveTransition(f,s,c)},_.prototype.resolveRaisedTransition=function(e,i,n){var r,a=e.actions;return(e=this.transition(e,i))._event=n,e.event=n.data,(r=e.actions).unshift.apply(r,(0,t.__spreadArray)([],(0,t.__read)(a))),e},_.prototype.resolveTransition=function(e,i,u,f){var d,p,v=this;void 0===u&&(u=s.initEvent),void 0===f&&(f=this.machine.context);var y=e.configuration,g=!i||e.transitions.length>0,_=g?(0,a.getValue)(this.machine,y):void 0,m=i?i.historyValue?i.historyValue:e.source?this.machine.historyValue(i.value):void 0:void 0,S=i?i.context:f,x=this.getActions(e,S,u,i),w=i?(0,t.__assign)({},i.activities):{};try{for(var b=(0,t.__values)(x),N=b.next();!N.done;N=b.next()){var A=N.value;A.type===o.start?w[A.activity.id||A.activity.type]=A:A.type===o.stop&&(w[A.activity.id||A.activity.type]=!1)}}catch(L){d={error:L}}finally{try{N&&!N.done&&(p=b.return)&&p.call(b)}finally{if(d)throw d.error}}var T=(0,t.__read)((0,s.resolveActions)(this,i,S,u,x,this.machine.config.preserveActionOrder),2),k=T[0],P=T[1],V=(0,t.__read)((0,n.partition)(k,function(t){return t.type===o.raise||t.type===o.send&&t.to===r.SpecialTargets.Internal}),2),E=V[0],I=V[1],C=k.filter(function(t){var e;return t.type===o.start&&(null===(e=t.activity)||void 0===e?void 0:e.type)===o.invoke}).reduce(function(t,e){return t[e.activity.id]=(0,c.createInvocableActor)(e.activity,v.machine,P,u),t},i?(0,t.__assign)({},i.children):{}),O=_?e.configuration:i?i.configuration:[],j=(0,a.isInFinalState)(O,this),D=new h.State({value:_||i.value,context:P,_event:u,_sessionid:i?i._sessionid:null,historyValue:_?m?(0,n.updateHistoryValue)(m,_):void 0:i?i.historyValue:void 0,history:!_||e.source?i:void 0,actions:_?I:[],activities:_?w:i?i.activities:{},events:[],configuration:O,transitions:e.transitions,children:C,done:j,tags:null==i?void 0:i.tags}),R=S!==P;D.changed=u.name===o.update||R;var F=D.history;F&&delete F.history;var M=!j&&(this._transient||y.some(function(t){return t._transient}));if(!(g||M&&u.name!==l))return D;var q=D;if(!j)for(M&&(q=this.resolveRaisedTransition(q,{type:o.nullEvent},u));E.length;){var U=E.shift();q=this.resolveRaisedTransition(q,U._event,u)}var B=q.changed||(F?!!q.actions.length||R||typeof F.value!=typeof q.value||!(0,h.stateValuesEqual)(q.value,F.value):void 0);return q.changed=B,q.history=F,q.tags=new Set((0,n.flatten)(q.configuration.map(function(t){return t.tags}))),q},_.prototype.getStateNode=function(t){if(v(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},_.prototype.getStateNodeById=function(t){var e=v(t)?t.slice(f.length):t;if(e===this.id)return this;var i=this.machine.idMap[e];if(!i)throw new Error("Child state node '#"+e+"' does not exist on machine '"+this.id+"'");return i},_.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&v(t))try{return this.getStateNodeById(t.slice(1))}catch(a){}for(var e=(0,n.toStatePath)(t,this.delimiter).slice(),i=this;e.length;){var r=e.shift();if(!r.length)break;i=i.getStateNode(r)}return i},_.prototype.resolve=function(t){var e,i=this;if(!t)return this.initialStateValue||p;switch(this.type){case"parallel":return(0,n.mapValues)(this.initialStateValue,function(e,n){return e?i.getStateNode(n).resolve(t[n]||e):p});case"compound":if((0,n.isString)(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return(0,n.keys)(t).length?(0,n.mapValues)(t,function(t,e){return t?i.getStateNode(e).resolve(t):p}):this.initialStateValue||{};default:return t||p}},_.prototype.getResolvedPath=function(t){if(v(t)){var e=this.machine.idMap[t.slice(f.length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return(0,n.toStatePath)(t,this.delimiter)},Object.defineProperty(_.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=(0,n.mapFilterValues)(this.states,function(t){return t.initialStateValue||p},function(t){return!("history"===t.type)});else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+this.key+"'");e=(0,a.isLeafNode)(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),_.prototype.getInitialState=function(t,e){var i=this.getStateNodes(t);return this.resolveTransition({configuration:i,entrySet:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,e)},Object.defineProperty(_.prototype,"initialState",{get:function(){this._init();var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=(0,n.isString)(e.target)&&v(e.target)?(0,n.pathToStateValue)(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),_.prototype.getRelativeStateNodes=function(t,e,i){return void 0===i&&(i=!0),i?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(_.prototype,"initialStateNodes",{get:function(){var t=this;if((0,a.isLeafNode)(this))return[this];if("compound"===this.type&&!this.initial)return i.IS_PRODUCTION||(0,n.warn)(!1,"Compound state node '"+this.id+"' has no initial state."),[this];var e=(0,n.toStatePaths)(this.initialStateValue);return(0,n.flatten)(e.map(function(e){return t.getFromRelativePath(e)}))},enumerable:!1,configurable:!0}),_.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var i=(0,t.__read)(e),n=i[0],r=i.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+n+"' from node with no states");var a=this.getStateNode(n);if("history"===a.type)return a.resolveHistory();if(!this.states[n])throw new Error("Child state '"+n+"' does not exist on '"+this.id+"'");return this.states[n].getFromRelativePath(r)},_.prototype.historyValue=function(t){if((0,n.keys)(this.states).length)return{current:t||this.initialStateValue,states:(0,n.mapFilterValues)(this.states,function(e,i){if(!t)return e.historyValue();var r=(0,n.isString)(t)?void 0:t[i];return e.historyValue(r||e.initialStateValue)},function(t){return!t.history})}},_.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var i=this.parent;if(!t){var r=this.target;return r?(0,n.flatten)((0,n.toStatePaths)(r).map(function(t){return i.getFromRelativePath(t)})):i.initialStateNodes}var a=(0,n.nestedPath)(i.path,"states")(t).current;return(0,n.isString)(a)?[i.getStateNode(a)]:(0,n.flatten)((0,n.toStatePaths)(a).map(function(t){return"deep"===e.history?i.getFromRelativePath(t):[i.states[t[0]]]}))},Object.defineProperty(_.prototype,"stateIds",{get:function(){var t=this,e=(0,n.flatten)((0,n.keys)(this.states).map(function(e){return t.states[e].stateIds}));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"events",{get:function(){var e,i,r,a;if(this.__cache.events)return this.__cache.events;var o=this.states,s=new Set(this.ownEvents);if(o)try{for(var h=(0,t.__values)((0,n.keys)(o)),c=h.next();!c.done;c=h.next()){var u=o[c.value];if(u.states)try{for(var l=(r=void 0,(0,t.__values)(u.events)),f=l.next();!f.done;f=l.next()){var d=f.value;s.add(""+d)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}}}catch(v){e={error:v}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(s)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(t){return!(!t.target&&!t.actions.length&&t.internal)}).map(function(t){return t.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),_.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map(function(t){if(!(0,n.isString)(t))return t;var i=t[0]===e.delimiter;if(i&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=i?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{return e.parent.getStateNodeByPath(r)}catch(a){throw new Error("Invalid transition definition for state node '"+e.id+"':\n"+a.message)}})},_.prototype.formatTransition=function(e){var i=this,r=(0,n.normalizeTarget)(e.target),a="internal"in e?e.internal:!r||r.some(function(t){return(0,n.isString)(t)&&t[0]===i.delimiter}),o=this.machine.options.guards,h=this.resolveTarget(r),c=(0,t.__assign)((0,t.__assign)({},e),{actions:(0,s.toActionObjects)((0,n.toArray)(e.actions)),cond:(0,n.toGuard)(e.cond,o),target:h,source:this,internal:a,eventType:e.event,toJSON:function(){return(0,t.__assign)((0,t.__assign)({},c),{target:c.target?c.target.map(function(t){return"#"+t.id}):void 0,source:"#"+i.id})}});return c},_.prototype.formatTransitions=function(){var e,r,a,o=this;if(this.config.on)if(Array.isArray(this.config.on))a=this.config.on;else{var h=this.config.on,c=d,u=h[c],f=void 0===u?[]:u,p=(0,t.__rest)(h,["symbol"==typeof c?c:c+""]);a=(0,n.flatten)((0,n.keys)(p).map(function(t){i.IS_PRODUCTION||t!==l||(0,n.warn)(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. Please check the `on` configuration for \"#"+o.id+'".');var e=(0,n.toTransitionConfigArray)(t,p[t]);return i.IS_PRODUCTION||g(o,t,e),e}).concat((0,n.toTransitionConfigArray)(d,f)))}else a=[];var v=this.config.always?(0,n.toTransitionConfigArray)("",this.config.always):[],y=this.config.onDone?(0,n.toTransitionConfigArray)(String((0,s.done)(this.id)),this.config.onDone):[];i.IS_PRODUCTION||(0,n.warn)(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'+this.id+'".');var _=(0,n.flatten)(this.invoke.map(function(e){var i=[];return e.onDone&&i.push.apply(i,(0,t.__spreadArray)([],(0,t.__read)((0,n.toTransitionConfigArray)(String((0,s.doneInvoke)(e.id)),e.onDone)))),e.onError&&i.push.apply(i,(0,t.__spreadArray)([],(0,t.__read)((0,n.toTransitionConfigArray)(String((0,s.error)(e.id)),e.onError)))),i})),m=this.after,S=(0,n.flatten)((0,t.__spreadArray)((0,t.__spreadArray)((0,t.__spreadArray)((0,t.__spreadArray)([],(0,t.__read)(y)),(0,t.__read)(_)),(0,t.__read)(a)),(0,t.__read)(v)).map(function(t){return(0,n.toArray)(t).map(function(t){return o.formatTransition(t)})}));try{for(var x=(0,t.__values)(m),w=x.next();!w.done;w=x.next()){var b=w.value;S.push(b)}}catch(N){e={error:N}}finally{try{w&&!w.done&&(r=x.return)&&r.call(x)}finally{if(e)throw e.error}}return S},_}();exports.StateNode=_;
},{"./_virtual/_tslib.js":"oNKL","./constants.js":"vn3q","./environment.js":"u8t4","./utils.js":"nKRi","./types.js":"p2fj","./stateUtils.js":"Po3J","./actionTypes.js":"fEun","./actions.js":"aiPo","./State.js":"ZYmb","./Actor.js":"Obbk","./invokeUtils.js":"es12"}],"yMGA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Machine=t,exports.createMachine=r;var e=require("./StateNode.js");function t(t,r,n){return void 0===n&&(n=t.context),new e.StateNode(t,r,n)}function r(t,r){return new e.StateNode(t,r)}
},{"./StateNode.js":"QhAI"}],"zUgC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scheduler=void 0;var e=require("./_virtual/_tslib.js"),t={deferEvents:!1},s=function(){function s(s){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=(0,e.__assign)((0,e.__assign)({},t),s)}return s.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},s.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},s.prototype.clear=function(){this.queue=[]},s.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},s.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},s}();exports.Scheduler=s;
},{"./_virtual/_tslib.js":"oNKL"}],"TY7e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registry=void 0;var e=new Map,t=0,r={bookId:function(){return"x:"+t++},register:function(t,r){return e.set(t,r),t},get:function(t){return e.get(t)},free:function(t){e.delete(t)}};exports.registry=r;
},{}],"l5eE":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function t(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0}function r(){var e=t();if(e&&"__xstate__"in e)return e.__xstate__}function n(e){if(t()){var n=r();n&&n.register(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobal=t,exports.registerService=n;
},{}],"MhrW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spawnBehavior=t,require("./environment.js");var e=require("./utils.js");require("./types.js"),require("./actionTypes.js");var r=require("./Actor.js");function t(t,n){void 0===n&&(n={});var i=t.initialState,s=new Set,o=[],u=!1,a=(0,r.toActorRef)({id:n.id,send:function(e){o.push(e),function(){if(!u){for(u=!0;o.length>0;){var e=o.shift();i=t.transition(i,e,c),s.forEach(function(e){return e.next(i)})}u=!1}}()},getSnapshot:function(){return i},subscribe:function(r,t,n){var o=(0,e.toObserver)(r,t,n);return s.add(o),o.next(i),{unsubscribe:function(){s.delete(o)}}}}),c={parent:n.parent,self:a,id:n.id||"anonymous",observers:s};return i=t.start?t.start(c):i,a}
},{"./environment.js":"u8t4","./utils.js":"nKRi","./types.js":"p2fj","./actionTypes.js":"fEun","./Actor.js":"Obbk"}],"IicD":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpret=g,exports.spawn=S,exports.InterpreterStatus=exports.Interpreter=void 0;var e,n=require("./_virtual/_tslib.js"),i=require("./environment.js"),r=require("./utils.js"),s=require("./types.js"),o=require("./stateUtils.js"),a=require("./actionTypes.js"),c=require("./actions.js"),d=require("./State.js"),u=require("./serviceScope.js"),h=require("./Actor.js"),l=require("./scheduler.js"),f=require("./registry.js"),v=require("./devTools.js"),p=require("./behaviors.js"),y={sync:!1,autoForward:!1};exports.InterpreterStatus=e,function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(e||(exports.InterpreterStatus=e={}));var _=function(){function _(t,o){var d=this;void 0===o&&(o=_.defaultOptions),this.machine=t,this.scheduler=new l.Scheduler,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=e.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,n){if((0,r.isArray)(t))return d.batch(t),d.state;var s=(0,r.toSCXMLEvent)((0,r.toEventObject)(t,n));if(d.status===e.Stopped)return i.IS_PRODUCTION||(0,r.warn)(!1,'Event "'+s.name+'" was sent to stopped service "'+d.machine.id+'". This service has already reached its final state, and will not transition.\nEvent: '+JSON.stringify(s.data)),d.state;if(d.status!==e.Running&&!d.options.deferEvents)throw new Error('Event "'+s.name+'" was sent to uninitialized service "'+d.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(s.data));return d.scheduler.schedule(function(){d.forward(s);var t=d.nextState(s);d.update(t,s)}),d._state},this.sendTo=function(t,e){var o=d.parent&&(e===s.SpecialTargets.Parent||d.parent.id===e),u=o?d.parent:(0,r.isString)(e)?d.children.get(e)||f.registry.get(e):(0,r.isActor)(e)?e:void 0;if(u)"machine"in u?u.send((0,n.__assign)((0,n.__assign)({},t),{name:t.name===a.error?""+(0,c.error)(d.id):t.name,origin:d.sessionId})):u.send(t.data);else{if(!o)throw new Error("Unable to send event to child '"+e+"' from service '"+d.id+"'.");i.IS_PRODUCTION||(0,r.warn)(!1,"Service '"+d.id+"' has no parent: unable to send event "+t.type)}};var u=(0,n.__assign)((0,n.__assign)({},_.defaultOptions),o),h=u.clock,v=u.logger,p=u.parent,y=u.id,w=void 0!==y?y:t.id;this.id=w,this.logger=v,this.clock=h,this.parent=p,this.options=u,this.scheduler=new l.Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=f.registry.bookId()}return Object.defineProperty(_.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:(0,u.provide)(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"state",{get:function(){return i.IS_PRODUCTION||(0,r.warn)(this.status!==e.NotStarted,"Attempted to read state from uninitialized service '"+this.id+"'. Make sure the service is started first."),this._state},enumerable:!1,configurable:!0}),_.prototype.execute=function(t,e){var i,r;try{for(var s=(0,n.__values)(t.actions),o=s.next();!o.done;o=s.next()){var a=o.value;this.exec(a,t,e)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},_.prototype.update=function(t,e){var i,s,a,d,u,h,l,f,v=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach(function(t){v.state.children[t.id]=t}),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var p=(0,n.__values)(this.eventListeners),y=p.next();!y.done;y=p.next()){(0,y.value)(t.event)}}catch(T){i={error:T}}finally{try{y&&!y.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}try{for(var _=(0,n.__values)(this.listeners),w=_.next();!w.done;w=_.next()){(0,w.value)(t,t.event)}}catch(I){a={error:I}}finally{try{w&&!w.done&&(d=_.return)&&d.call(_)}finally{if(a)throw a.error}}try{for(var S=(0,n.__values)(this.contextListeners),g=S.next();!g.done;g=S.next()){(0,g.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(L){u={error:L}}finally{try{g&&!g.done&&(h=S.return)&&h.call(S)}finally{if(u)throw u.error}}var m=(0,o.isInFinalState)(t.configuration||[],this.machine);if(this.state.configuration&&m){var x=t.configuration.find(function(t){return"final"===t.type&&t.parent===v.machine}),b=x&&x.doneData?(0,r.mapContext)(x.doneData,t.context,e):void 0;try{for(var E=(0,n.__values)(this.doneListeners),O=E.next();!O.done;O=E.next()){(0,O.value)((0,c.doneInvoke)(this.id,b))}}catch(C){l={error:C}}finally{try{O&&!O.done&&(f=E.return)&&f.call(E)}finally{if(l)throw l.error}}this.stop()}},_.prototype.onTransition=function(t){return this.listeners.add(t),this.status===e.Running&&t(this.state,this.state.event),this},_.prototype.subscribe=function(t,n,i){var r,s=this;if(!t)return{unsubscribe:function(){}};var o=i;return"function"==typeof t?r=t:(r=t.next.bind(t),o=t.complete.bind(t)),this.listeners.add(r),this.status===e.Running&&r(this.state),o&&this.onDone(o),{unsubscribe:function(){r&&s.listeners.delete(r),o&&s.doneListeners.delete(o)}}},_.prototype.onEvent=function(t){return this.eventListeners.add(t),this},_.prototype.onSend=function(t){return this.sendListeners.add(t),this},_.prototype.onChange=function(t){return this.contextListeners.add(t),this},_.prototype.onStop=function(t){return this.stopListeners.add(t),this},_.prototype.onDone=function(t){return this.doneListeners.add(t),this},_.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},_.prototype.start=function(t){var n=this;if(this.status===e.Running)return this;f.registry.register(this.sessionId,this),this.initialized=!0,this.status=e.Running;var i=void 0===t?this.initialState:(0,u.provide)(this,function(){return(0,d.isState)(t)?n.machine.resolveState(t):n.machine.resolveState(d.State.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,c.initEvent)}),this},_.prototype.stop=function(){var t,i,s,o,a,c,d,u,h,l,v=this;try{for(var p=(0,n.__values)(this.listeners),y=p.next();!y.done;y=p.next()){var _=y.value;this.listeners.delete(_)}}catch(I){t={error:I}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(t)throw t.error}}try{for(var w=(0,n.__values)(this.stopListeners),S=w.next();!S.done;S=w.next()){(_=S.value)(),this.stopListeners.delete(_)}}catch(L){s={error:L}}finally{try{S&&!S.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}try{for(var g=(0,n.__values)(this.contextListeners),m=g.next();!m.done;m=g.next()){_=m.value;this.contextListeners.delete(_)}}catch(C){a={error:C}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(a)throw a.error}}try{for(var x=(0,n.__values)(this.doneListeners),b=x.next();!b.done;b=x.next()){_=b.value;this.doneListeners.delete(_)}}catch(N){d={error:N}}finally{try{b&&!b.done&&(u=x.return)&&u.call(x)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.state.configuration.forEach(function(t){var e,i;try{for(var r=(0,n.__values)(t.definition.exit),s=r.next();!s.done;s=r.next()){var o=s.value;v.exec(o,v.state)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}}),this.children.forEach(function(t){(0,r.isFunction)(t.stop)&&t.stop()});try{for(var E=(0,n.__values)((0,r.keys)(this.delayedEventsMap)),O=E.next();!O.done;O=E.next()){var T=O.value;this.clock.clearTimeout(this.delayedEventsMap[T])}}catch(M){h={error:M}}finally{try{O&&!O.done&&(l=E.return)&&l.call(E)}finally{if(h)throw h.error}}return this.scheduler.clear(),this.initialized=!1,this.status=e.Stopped,f.registry.free(this.sessionId),this},_.prototype.batch=function(t){var s=this;if(this.status===e.NotStarted&&this.options.deferEvents)i.IS_PRODUCTION||(0,r.warn)(!1,t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'" and are deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(event));else if(this.status!==e.Running)throw new Error(t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule(function(){var e,i,o=s.state,a=!1,c=[],h=function(t){var e=(0,r.toSCXMLEvent)(t);s.forward(e),o=(0,u.provide)(s,function(){return s.machine.transition(o,e)}),c.push.apply(c,(0,n.__spreadArray)([],(0,n.__read)(o.actions.map(function(t){return(0,d.bindActionToState)(t,o)})))),a=a||!!o.changed};try{for(var l=(0,n.__values)(t),f=l.next();!f.done;f=l.next()){h(f.value)}}catch(v){e={error:v}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}o.changed=a,o.actions=c,s.update(o,(0,r.toSCXMLEvent)(t[t.length-1]))})},_.prototype.sender=function(t){return this.send.bind(this,t)},_.prototype.nextState=function(t){var e=this,n=(0,r.toSCXMLEvent)(t);if(0===n.name.indexOf(a.errorPlatform)&&!this.state.nextEvents.some(function(t){return 0===t.indexOf(a.errorPlatform)}))throw n.data.data;return(0,u.provide)(this,function(){return e.machine.transition(e.state,n)})},_.prototype.forward=function(t){var e,i;try{for(var r=(0,n.__values)(this.forwardTo),s=r.next();!s.done;s=r.next()){var o=s.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '"+t+"' from interpreter '"+this.id+"' to nonexistant child '"+o+"'.");a.send(t)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}},_.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)},t.delay)},_.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},_.prototype.exec=function(t,e,n){void 0===n&&(n=this.machine.options.actions);var o=e.context,d=e._event,u=t.exec||(0,c.getActionFunction)(t.type,n),h=(0,r.isFunction)(u)?u:u?u.exec:t.exec;if(h)try{return h(o,d.data,{action:t,state:this.state,_event:d})}catch(E){throw this.parent&&this.parent.send({type:"xstate.error",data:E}),E}switch(t.type){case a.send:var l=t;if("number"==typeof l.delay)return void this.defer(l);l.to?this.sendTo(l._event,l.to):this.send(l._event);break;case a.cancel:this.cancel(t.sendId);break;case a.start:var f=t.activity;if(!this.state.activities[f.id||f.type])break;if(f.type===s.ActionTypes.Invoke){var v=(0,r.toInvokeSource)(f.src),p=this.machine.options.services?this.machine.options.services[v.type]:void 0,y=f.id,_=f.data;i.IS_PRODUCTION||(0,r.warn)(!("forward"in f),"`forward` property is deprecated (found in invocation of '"+f.src+"' in in machine '"+this.machine.id+"'). Please use `autoForward` instead.");var w="autoForward"in f?f.autoForward:!!f.forward;if(!p)return void(i.IS_PRODUCTION||(0,r.warn)(!1,"No service found for invocation '"+f.src+"' in machine '"+this.machine.id+"'."));var S=_?(0,r.mapContext)(_,o,d):void 0;if("string"==typeof p)return;var g=(0,r.isFunction)(p)?p(o,d.data,{data:S,src:v}):p;if(!g)return;var m=void 0;(0,r.isMachine)(g)&&(g=S?g.withContext(S):g,m={autoForward:w}),this.spawn(g,y,m)}else this.spawnActivity(f);break;case a.stop:this.stopChild(t.activity.id);break;case a.log:var x=t.label,b=t.value;x?this.logger(x,b):this.logger(b);break;default:i.IS_PRODUCTION||(0,r.warn)(!1,"No implementation found for action type '"+t.type+"'")}},_.prototype.removeChild=function(t){this.children.delete(t),this.forwardTo.delete(t),delete this.state.children[t]},_.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),(0,r.isFunction)(e.stop)&&e.stop())},_.prototype.spawn=function(t,e,i){if((0,r.isPromiseLike)(t))return this.spawnPromise(Promise.resolve(t),e);if((0,r.isFunction)(t))return this.spawnCallback(t,e);if((0,h.isSpawnedActor)(t))return this.spawnActor(t,e);if((0,r.isObservable)(t))return this.spawnObservable(t,e);if((0,r.isMachine)(t))return this.spawnMachine(t,(0,n.__assign)((0,n.__assign)({},i),{id:e}));if((0,r.isBehavior)(t))return this.spawnBehavior(t,e);throw new Error('Unable to spawn entity "'+e+'" of type "'+typeof t+'".')},_.prototype.spawnMachine=function(t,e){var i=this;void 0===e&&(e={});var s=new _(t,(0,n.__assign)((0,n.__assign)({},this.options),{parent:this,id:e.id||t.id})),o=(0,n.__assign)((0,n.__assign)({},y),e);o.sync&&s.onTransition(function(t){i.send(a.update,{state:t,id:s.id})});var c=s;return this.children.set(s.id,c),o.autoForward&&this.forwardTo.add(s.id),s.onDone(function(t){i.removeChild(s.id),i.send((0,r.toSCXMLEvent)(t,{origin:s.id}))}).start(),c},_.prototype.spawnBehavior=function(t,e){var n=(0,p.spawnBehavior)(t,{id:e,parent:this});return this.children.set(e,n),n},_.prototype.spawnPromise=function(t,e){var n,i=this,s=!1;t.then(function(t){s||(n=t,i.removeChild(e),i.send((0,r.toSCXMLEvent)((0,c.doneInvoke)(e,t),{origin:e})))},function(t){if(!s){i.removeChild(e);var n=(0,c.error)(e,t);try{i.send((0,r.toSCXMLEvent)(n,{origin:e}))}catch(o){(0,r.reportUnhandledExceptionOnInvocation)(t,o,e),i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}});var o={id:e,send:function(){},subscribe:function(e,n,i){var s=(0,r.toObserver)(e,n,i),o=!1;return t.then(function(t){o||(s.next(t),o||s.complete())},function(t){o||s.error(t)}),{unsubscribe:function(){return o=!0}}},stop:function(){s=!0},toJSON:function(){return{id:e}},getSnapshot:function(){return n}};return this.children.set(e,o),o},_.prototype.spawnCallback=function(t,e){var n,i,s=this,o=!1,a=new Set,d=new Set;try{i=t(function(t){n=t,d.forEach(function(e){return e(t)}),o||s.send((0,r.toSCXMLEvent)(t,{origin:e}))},function(t){a.add(t)})}catch(h){this.send((0,c.error)(e,h))}if((0,r.isPromiseLike)(i))return this.spawnPromise(i,e);var u={id:e,send:function(t){return a.forEach(function(e){return e(t)})},subscribe:function(t){return d.add(t),{unsubscribe:function(){d.delete(t)}}},stop:function(){o=!0,(0,r.isFunction)(i)&&i()},toJSON:function(){return{id:e}},getSnapshot:function(){return n}};return this.children.set(e,u),u},_.prototype.spawnObservable=function(t,e){var n,i=this,s=t.subscribe(function(t){n=t,i.send((0,r.toSCXMLEvent)(t,{origin:e}))},function(t){i.removeChild(e),i.send((0,r.toSCXMLEvent)((0,c.error)(e,t),{origin:e}))},function(){i.removeChild(e),i.send((0,r.toSCXMLEvent)((0,c.doneInvoke)(e),{origin:e}))}),o={id:e,send:function(){},subscribe:function(e,n,i){return t.subscribe(e,n,i)},stop:function(){return s.unsubscribe()},getSnapshot:function(){return n},toJSON:function(){return{id:e}}};return this.children.set(e,o),o},_.prototype.spawnActor=function(t,e){return this.children.set(e,t),t},_.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else i.IS_PRODUCTION||(0,r.warn)(!1,"No implementation found for activity '"+t.type+"'")},_.prototype.spawnEffect=function(t,e){this.children.set(t,{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}})},_.prototype.attachDev=function(){var t=(0,v.getGlobal)();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var e="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect((0,n.__assign)((0,n.__assign)({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},e),{features:(0,n.__assign)({jump:!1,skip:!1},e?e.features:void 0)}),this.machine),this.devTools.init(this.state)}(0,v.registerService)(this)}},_.prototype.toJSON=function(){return{id:this.id}},_.prototype[r.symbolObservable]=function(){return this},_.prototype.getSnapshot=function(){return this.status===e.NotStarted?this.initialState:this._state},_.defaultOptions=function(t){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(t,e){return setTimeout(t,e)},clearTimeout:function(t){return clearTimeout(t)}},logger:t.console.log.bind(console),devTools:!1}}("undefined"!=typeof self?self:t),_.interpret=g,_}();exports.Interpreter=_;var w=function(t){return(0,r.isString)(t)?(0,n.__assign)((0,n.__assign)({},y),{name:t}):(0,n.__assign)((0,n.__assign)((0,n.__assign)({},y),{name:(0,r.uniqueId)()}),t)};function S(t,e){var n=w(e);return(0,u.consume)(function(e){if(!i.IS_PRODUCTION){var s=(0,r.isMachine)(t)||(0,r.isFunction)(t);(0,r.warn)(!!e||s,'Attempted to spawn an Actor (ID: "'+((0,r.isMachine)(t)?t.id:"undefined")+'") outside of a service. This will have no effect.')}return e?e.spawn(t,n.name,n):(0,h.createDeferredActor)(t,n.name)})}function g(t,e){return new _(t,e)}
},{"./_virtual/_tslib.js":"oNKL","./environment.js":"u8t4","./utils.js":"nKRi","./types.js":"p2fj","./stateUtils.js":"Po3J","./actionTypes.js":"fEun","./actions.js":"aiPo","./State.js":"ZYmb","./serviceScope.js":"Yl0I","./Actor.js":"Obbk","./scheduler.js":"zUgC","./registry.js":"TY7e","./devTools.js":"l5eE","./behaviors.js":"MhrW"}],"Pdyp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchState=t;var e=require("./_virtual/_tslib.js"),r=require("./State.js");function t(t,a,n){var o,i,l=r.State.from(t,t instanceof r.State?t.context:void 0);try{for(var u=(0,e.__values)(a),s=u.next();!s.done;s=u.next()){var c=(0,e.__read)(s.value,2),f=c[0],v=c[1];if(l.matches(f))return v(l)}}catch(_){o={error:_}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return n(l)}
},{"./_virtual/_tslib.js":"oNKL","./State.js":"ZYmb"}],"nWP9":[function(require,module,exports) {
"use strict";function e(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSchema=e;
},{}],"exuu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"matchesState",{enumerable:!0,get:function(){return e.matchesState}}),Object.defineProperty(exports,"mapState",{enumerable:!0,get:function(){return t.mapState}}),Object.defineProperty(exports,"ActionTypes",{enumerable:!0,get:function(){return r.ActionTypes}}),Object.defineProperty(exports,"SpecialTargets",{enumerable:!0,get:function(){return r.SpecialTargets}}),Object.defineProperty(exports,"assign",{enumerable:!0,get:function(){return n.assign}}),Object.defineProperty(exports,"doneInvoke",{enumerable:!0,get:function(){return n.doneInvoke}}),Object.defineProperty(exports,"forwardTo",{enumerable:!0,get:function(){return n.forwardTo}}),Object.defineProperty(exports,"send",{enumerable:!0,get:function(){return n.send}}),Object.defineProperty(exports,"sendParent",{enumerable:!0,get:function(){return n.sendParent}}),Object.defineProperty(exports,"sendUpdate",{enumerable:!0,get:function(){return n.sendUpdate}}),Object.defineProperty(exports,"State",{enumerable:!0,get:function(){return o.State}}),Object.defineProperty(exports,"StateNode",{enumerable:!0,get:function(){return a.StateNode}}),Object.defineProperty(exports,"Machine",{enumerable:!0,get:function(){return s.Machine}}),Object.defineProperty(exports,"createMachine",{enumerable:!0,get:function(){return s.createMachine}}),Object.defineProperty(exports,"Interpreter",{enumerable:!0,get:function(){return u.Interpreter}}),Object.defineProperty(exports,"InterpreterStatus",{enumerable:!0,get:function(){return u.InterpreterStatus}}),Object.defineProperty(exports,"interpret",{enumerable:!0,get:function(){return u.interpret}}),Object.defineProperty(exports,"spawn",{enumerable:!0,get:function(){return u.spawn}}),Object.defineProperty(exports,"matchState",{enumerable:!0,get:function(){return i.matchState}}),Object.defineProperty(exports,"createSchema",{enumerable:!0,get:function(){return c.createSchema}}),exports.actions=void 0;var e=require("./utils.js"),t=require("./mapState.js"),r=require("./types.js"),n=require("./actions.js"),o=require("./State.js"),a=require("./StateNode.js"),s=require("./Machine.js"),u=require("./interpreter.js"),i=require("./match.js"),c=require("./schema.js"),p={raise:n.raise,send:n.send,sendParent:n.sendParent,sendUpdate:n.sendUpdate,log:n.log,cancel:n.cancel,start:n.start,stop:n.stop,assign:n.assign,after:n.after,done:n.done,respond:n.respond,forwardTo:n.forwardTo,escalate:n.escalate,choose:n.choose,pure:n.pure};exports.actions=p;
},{"./utils.js":"nKRi","./mapState.js":"tBiE","./types.js":"p2fj","./actions.js":"aiPo","./State.js":"ZYmb","./StateNode.js":"QhAI","./Machine.js":"yMGA","./interpreter.js":"IicD","./match.js":"Pdyp","./schema.js":"nWP9"}],"qPyu":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&t(n,e,o);return r(n,e),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GoToInteractionHandler=void 0;var o=require("./AnimationStage"),i=n(require("three")),s=require("./FromToFeedback"),c=require("./VTThreeViewer2"),a=n(require("./TransitionFactoryAnimation")),l=require("xstate"),h=require("./controls/StreetControlsXState"),m=function(){function e(e){this.controller=e,this.viewHeight=2,this.keyPointsMap=new Map,this.variableTime=!0,this.minDistance=10,this.keyPointsMap.set(o.KEY_POINTS.START_POS,new i.Vector3),this.keyPointsMap.set(o.KEY_POINTS.END_POS,new i.Vector3),this.keyPointsMap.set(o.KEY_POINTS.START_TARGET,new i.Vector3),this.keyPointsMap.set(o.KEY_POINTS.TARGET_LOOK,new i.Vector3),this.startMousePx=new i.Vector2,this.timeFactor=1,this.reverse=!1,this.stateMachine=w(this.controller,this)}return e.prototype.setService=function(e){this.service=e},e.prototype.startDraw=function(e){this.startTransitionQuaternion=this.controller.threeViewer.currentCamera.quaternion.clone();var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1,n=this.controller.threeViewer.getIntersectionPoint(t,r);this.lastIntersectionPoint=n.clone(),this.startMousePx.set(e.clientX,e.clientY),this.keyPointsMap.set(o.KEY_POINTS.START_POS,this.controller.threeViewer.currentCamera.position.clone()),this.keyPointsMap.set(o.KEY_POINTS.END_POS,new i.Vector3(n.x-2,n.y-2,this.viewHeight));this.controller.threeViewer.controlsMap.get(this.controller.threeViewer.currentControls);var c=new i.Vector3;this.controller.threeViewer.currentCamera.getWorldDirection(c),this.keyPointsMap.set(o.KEY_POINTS.START_TARGET,new i.Vector3(0,0,0)),this.fromToFeedback=new s.FromToLineMesh(n,this.controller.threeViewer.scene)},e.prototype.mouseMoveFromTo=function(e){var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1,n=this.controller.threeViewer.getIntersectionPoint(t,r);this.fromToFeedback.updateLine(n)},e.prototype.endDraw=function(e){var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1,n=this.controller.threeViewer.getIntersectionPoint(t,r);this.keyPointsMap.set(o.KEY_POINTS.TARGET_LOOK,new i.Vector3(n.x,n.y,this.viewHeight));var s=this.startMousePx.distanceTo(new i.Vector2(e.clientX,e.clientY));this.timeFactor=s<this.minDistance?1:s/this.minDistance,this.fromToFeedback.removeLine(),this.fromToFeedback.setToMesh(n)},e.prototype.mouseup=function(e){var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1,n=this.controller.threeViewer.getIntersectionPoint(t,r);this.keyPointsMap.set(o.KEY_POINTS.TARGET_LOOK,new i.Vector3(n.x,n.y,this.viewHeight)),new i.Vector3(0,0,0).subVectors(this.keyPointsMap.get(o.KEY_POINTS.TARGET_LOOK),this.keyPointsMap.get(o.KEY_POINTS.END_POS)),this.fromToFeedback.removeLine(),this.fromToFeedback.setToMesh(n),a.createCameraPositionTargetTransition(this.controller,this),this.controller.threeViewer.animationClock.start()},e}();exports.GoToInteractionHandler=m;var d="idle_state",u="drawing_state",T="animating_state",f="street_state";function w(t,r){var n,o=h.createStates(t.threeViewer.controlsMap.get(c.CONTROLS_TYPE.STREET));return l.createMachine({id:"goToMachineExpe",initial:d,context:{controller:t},states:(n={},n[d]={entry:["enterIdle"],on:{mousedown:{target:u}}},n[u]={entry:["enterDraw"],on:{mousemove:{actions:["moveDraw"]},mouseup:{actions:["endDraw"],target:T}}},n[T]={entry:["enterAnimating"],on:{ANIMATION_END:[{actions:["endAnimating"],target:f,cond:function(e,t){return!r.reverse}},{actions:["endAnimating"],target:d}]}},n[f]={entry:function(e,r){console.log("enter street state!"),t.threeViewer.controlsMap.get(c.CONTROLS_TYPE.STREET).start()},on:{mousedown:{actions:["startReverse"],target:T}}},n)},{actions:e({enterIdle:function(e,t){r.reverse=!1},enterDraw:function(e,t){r.startDraw(t)},moveDraw:function(e,t){r.mouseMoveFromTo(t)},endDraw:function(e,t){r.endDraw(t)},enterAnimating:function(e,r){t.threeViewer.animationClock.start()},endAnimating:function(e,t){r.fromToFeedback.removePoints()},startReverse:function(e,t){console.log("start reverse!"),r.reverse=!0}},o.actions)})}
},{"./AnimationStage":"ftNt","three":"lKFo","./FromToFeedback":"Ify0","./VTThreeViewer2":"xmXH","./TransitionFactoryAnimation":"UZ4Q","xstate":"exuu","./controls/StreetControlsXState":"jvJt"}],"JO2s":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&t(o,e,n);return r(o,e),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragGoInteractionHandler=void 0;var n=require("./FromToFeedback"),i=require("./AnimationStage"),s=o(require("three")),a=require("xstate"),c=require("./controls/PlanarControlsLiteXState"),l=require("./controls/StreetControlsXState"),h=require("./VTThreeViewer2"),d=function(){function e(e){this.controller=e,this.createTransitionListeners=[],this.progressDraw=0,this.progressTransition=0,this.viewHeight=2,this.keyPointsMap=new Map;var t=10*Math.tan(this.controller.threeViewer.currentCamera.fov/2*Math.PI/180),r=Math.abs(-100*t/this.controller.threeViewer.renderer.domElement.clientHeight),o=Math.abs(-20*t/this.controller.threeViewer.renderer.domElement.clientHeight);this.progressFeedbackParams={pxWidth:50,pxHeight:10,width:r,height:o,opacity:.6,colorBg:15007744,colorOverlay:10027008},this.keyPointsMap.set(i.KEY_POINTS.START_POS,new s.Vector3),this.keyPointsMap.set(i.KEY_POINTS.END_POS,new s.Vector3),this.keyPointsMap.set(i.KEY_POINTS.START_TARGET,new s.Vector3),this.keyPointsMap.set(i.KEY_POINTS.TARGET_LOOK,new s.Vector3),this.lastMouseCoords=new s.Vector2,this.startMousePoint=new s.Vector2,this.startMousePx=new s.Vector2,this.delta=new s.Vector2,this.cameraPlane=new s.Plane(new s.Vector3(0,0,-1),-10),this.dummyCamera=e.threeViewer.currentCamera.clone(),this.dummyRaycaster=new s.Raycaster,this.stateMachine=g(this.controller,this)}return e.prototype.addCreateTransitionListener=function(e){this.createTransitionListeners.push(e)},e.prototype.setService=function(e){this.service=e},e.prototype.addListeners=function(){this.controller.threeViewer.renderer.domElement.addEventListener("mousedown",this.mouseDown,!1)},e.prototype.startDraw=function(e){this.startTransitionQuaternion=this.controller.threeViewer.currentCamera.quaternion.clone();var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1;console.log("clientx, clienty",e.clientX,e.clientY),console.log("x,y",t,r);var o=this.controller.threeViewer.getIntersectionPoint(t,r);this.lastIntersectionPoint=o.clone(),this.lastMouseCoords.set(t,r),this.startMousePoint.set(t,r),this.startMousePx.set(e.clientX,e.clientY),this.keyPointsMap.set(i.KEY_POINTS.START_POS,this.controller.threeViewer.currentCamera.position.clone()),this.keyPointsMap.set(i.KEY_POINTS.END_POS,new s.Vector3(o.x-2,o.y-2,this.viewHeight)),this.keyPointsMap.set(i.KEY_POINTS.START_TARGET,new s.Vector3(0,0,0)),this.fromToFeedback=new n.FromToLineMesh(o,this.controller.threeViewer.scene)},e.prototype.startTransition2=function(){this.keyPointsMap.set(i.KEY_POINTS.TARGET_LOOK,new s.Vector3(this.lastIntersectionPoint.x,this.lastIntersectionPoint.y,this.viewHeight));var e=this.controller.threeViewer.currentCamera.quaternion.clone(),t=new s.Vector3(0,0,-1);t.applyQuaternion(e);var r=new s.Vector3(0,0,390);r.applyQuaternion(e),this.cameraPlane.setFromNormalAndCoplanarPoint(t,r);var o=this.controller.threeViewer.getIntersectionPointPlane(this.lastMouseCoords.x,this.lastMouseCoords.y,this.cameraPlane);this.transitionProgressFeedback=new n.ProgressFeedback(this.controller.threeViewer.scene,this.lastIntersectionPoint,this.progressFeedbackParams),this.transitionProgressFeedback.planeMesh.position.set(o.x,o.y,o.z),this.transitionProgressFeedback.overlayPlaneMesh.position.set(o.x,o.y,o.z),this.controller.threeViewer.currentCamera.attach(this.transitionProgressFeedback.planeMesh),this.controller.threeViewer.currentCamera.attach(this.transitionProgressFeedback.overlayPlaneMesh),this.transitionProgressFeedback.setProgress(0)},e.prototype.mouseMoveFromTo=function(e){var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1;this.lastIntersectionPoint=this.controller.threeViewer.getIntersectionPoint(t,r),this.fromToFeedback.updateLine(this.lastIntersectionPoint),this.fromToFeedback.setToMesh(this.lastIntersectionPoint);var o=new s.Vector2(t,r);this.delta.subVectors(this.startMousePx,new s.Vector2(e.clientX,e.clientY)),this.lastMouseCoords.set(o.x,o.y),this.progressDraw=this.delta.length()*this.progressFeedbackParams.width/this.progressFeedbackParams.pxWidth},e.prototype.mouseMoveTransition=function(e){var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1;this.lastIntersectionPoint=this.controller.threeViewer.getIntersectionPoint(t,r);var o=new s.Vector2(t,r);this.delta.subVectors(new s.Vector2(this.startMousePx.x,0),new s.Vector2(e.clientX,0)),this.lastMouseCoords.set(o.x,o.y),this.progressTransition=this.delta.length()/this.progressFeedbackParams.pxWidth,this.transitionProgressFeedback.setProgress(this.progressTransition*this.progressFeedbackParams.width)},e.prototype.mouseup=function(e){var t=(e.clientX-this.controller.threeViewer.renderer.domElement.offsetLeft)/this.controller.threeViewer.renderer.domElement.clientWidth*2-1,r=-(e.clientY-this.controller.threeViewer.renderer.domElement.offsetTop)/this.controller.threeViewer.renderer.domElement.clientHeight*2+1;this.controller.threeViewer.getIntersectionPoint(t,r)},e}();exports.DragGoInteractionHandler=d;var u="planar_state",m="street_state",T="drawing_state",w="moving_camera_state",P="idle_state";function p(t){var r;console.log(e({},c.createStates(t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.PLANAR)).states));var o=c.createStates(t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.PLANAR)),n=l.createStates(t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.STREET));return a.createMachine({id:"dragGoMachine",initial:u,context:{controller:t,planarControls:t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.PLANAR),streetControls:t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.STREET)},states:(r={},r[u]=e(e({},c.createStates(t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.PLANAR)).states),{on:{STREET:{target:m}}}),r[m]=e(e({entry:function(e,r){t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.STREET).start()}},n.states),{on:{PLANAR:{target:u}}}),r.DRAWING_STATE={},r.MOVING_CAMERA_STATE={},r)},{actions:e(e({},o.actions),n.actions)})}function g(t,r){var o,n=l.createStates(t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.STREET));return a.createMachine({id:"dragGoMachineExpe",initial:P,context:{controller:t},states:(o={},o[P]={on:{mousedown:{target:T}}},o[T]={entry:["enterDraw"],on:{mousemove:{actions:["moveDraw"]},mouseup:{target:P},TRANSITION:{target:w}}},o[w]={entry:["enterTransition"],exit:["exitTransition"],on:{mouseup:{target:P},mousemove:{actions:["moveTransition"]},STREET:{target:m},IDLE:{target:P}}},o[m]=e({entry:function(e,r){t.threeViewer.controlsMap.get(h.CONTROLS_TYPE.STREET).start()}},n.states),o)},{actions:e({moveDraw:function(e,t){r.mouseMoveFromTo(t)},moveTransition:function(e,t){r.mouseMoveTransition(t)},enterDraw:function(e,t){r.startDraw(t)},enterTransition:function(e,t){r.startTransition2()},exitTransition:function(e,t){r.fromToFeedback.removeLine(),r.fromToFeedback.removePoints(),r.transitionProgressFeedback.removeFeedback()}},n.actions)})}
},{"./FromToFeedback":"Ify0","./AnimationStage":"ftNt","three":"lKFo","xstate":"exuu","./controls/PlanarControlsLiteXState":"mwtM","./controls/StreetControlsXState":"jvJt","./VTThreeViewer2":"xmXH"}],"DMco":[function(require,module,exports) {
"use strict";function e(e,n){var t=function(n){e.send(n)};window.addEventListener("keydown",function(e){console.log("keeey!"),t(e)},!1),n.domElement.addEventListener("mousedown",t,!1),n.domElement.addEventListener("mouseup",t,!1),n.domElement.addEventListener("mouseleave",t,!1),n.domElement.addEventListener("mouseenter",t,!1),n.domElement.addEventListener("mousemove",t,!1),n.domElement.addEventListener("wheel",function(n){n.preventDefault(),n.stopPropagation(),e.send(n)},!1),n.domElement.addEventListener("contextmenu",function(n){e.send("contextmenu",{contextMenuEvent:n})},!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addDOMListeners=void 0,exports.addDOMListeners=e;
},{}],"pv16":[function(require,module,exports) {
"use strict";var t,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transition=exports.OBJECT_PROPERTY_TYPE=exports.TRANSITION_TYPE=void 0,function(t){t.CONTROLS="controls",t.PLANE_TEXTURE_TEXTURE="plane_texture_texture",t.PLANE_TEXTURE_COLOR="plane_texture_color",t.BUILDING_HEIGHT="building_height",t.BUILDING_OPACITY="building_opacity",t.BUILDING_COLOR="building_color",t.CAMERA_POSITION="camera_position",t.CAMERA_ROTATION="camera_rotation",t.CAMERA_POSITION_TARGET="camera_position_target",t.STATE_EVENT="state_event"}(t=exports.TRANSITION_TYPE||(exports.TRANSITION_TYPE={})),function(t){t.CAMERA_HEIGHT="camera_height"}(e=exports.OBJECT_PROPERTY_TYPE||(exports.OBJECT_PROPERTY_TYPE={}));var i=function(){function t(){this.conditions=[],this.conditionTypes=new Map,this.conditionValues=new Map,this.valueListeners=[],this.onCreateListeners=[],this.changeListeners=[],this.exitListeners=[]}return t.prototype.addCondition=function(t){this.conditions.push(t),this.conditionTypes.has(t.type)&&this.conditionTypes.get(t.type)||this.conditionTypes.set(t.type,!0),this.conditionValues.set(t,!1)},t.prototype.handleChange=function(){for(var t=0,e=this.conditions;t<e.length;t++){var i=e[t],n=i.getCurrentValue(),o=n.value;if(o){if(o!=this.conditionValues.get(i))for(var s=0,r=this.changeListeners;s<r.length;s++){(0,r[s])(i.data,i.getRatio())}this.conditionValues.set(i,o);for(var a=0,h=this.valueListeners;a<h.length;a++){(0,h[a])(i.data,i.getRatio())}}else{if(o!=this.conditionValues.get(i))for(var p=0,T=this.exitListeners;p<T.length;p++){(0,T[p])(i.data,n.bound,n.type)}this.conditionValues.set(i,o)}}},t.prototype.onValueChange=function(t){this.valueListeners.push(t)},t.prototype.onCreate=function(t){this.onCreateListeners.push(t)},t.prototype.onChange=function(t){this.changeListeners.push(t)},t.prototype.onChangeFirst=function(t){this.changeListeners.unshift(t)},t.prototype.onExit=function(t){this.exitListeners.push(t)},t.prototype.start=function(){for(var t=0,e=this.onCreateListeners;t<e.length;t++){(0,e[t])()}},t}();exports.Transition=i;
},{}],"V2pc":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var n in r)"default"!==n&&Object.hasOwnProperty.call(r,n)&&e(o,r,n);return t(o,r),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.transitions=void 0;var o=require("./Transition"),n=require("../Transition"),u=require("../OLViewer2"),T=r(require("three")),a=require("../VTThreeViewer2"),s=1.5,p=200,d=100,E=20,i=Number.MAX_VALUE,P=new T.Vector4(.7,.7,.7,1),N=Math.PI+.01,l=Math.PI/2,I=new T.Vector3,S=function(e){return e.threeViewer.currentCamera},O=function(e,t){return t},_=function(e){return e.progressDraw},A=function(e){return e.progressTransition},y="z",c=function(e){return e.position.z},R=function(e){return e.getWorldDirection(I).angleTo(new T.Vector3(0,0,1))},g={type:o.TRANSITION_TYPE.PLANE_TEXTURE_TEXTURE,object:O,property:A,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0,startTexture:u.IGN_STYLES.PLAN,endTexture:u.IGN_STYLES.PLAN,type:n.CONDITION_TYPE.CAMERA},{lowerBound:.8,upperBound:.9,startValue:1,endValue:0,startTexture:u.IGN_STYLES.PLAN,endTexture:u.IGN_STYLES.MUET,type:n.CONDITION_TYPE.CAMERA}]},B={type:o.TRANSITION_TYPE.PLANE_TEXTURE_COLOR,object:O,property:A,stages:[{lowerBound:.9,upperBound:1,startValue:0,endValue:1,startTexture:u.IGN_STYLES.MUET,endColor:P,type:n.CONDITION_TYPE.CAMERA}]},V={type:o.TRANSITION_TYPE.BUILDING_HEIGHT,object:O,property:A,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0},{lowerBound:.8,upperBound:1,startValue:0,endValue:1}]},L={type:o.TRANSITION_TYPE.BUILDING_OPACITY,object:O,property:A,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0},{lowerBound:.8,upperBound:1,startValue:0,endValue:1}]},w={type:o.TRANSITION_TYPE.BUILDING_COLOR,object:O,property:A,stages:[{lowerBound:.8,upperBound:1,startValue:0,endValue:1}]},Y={type:o.TRANSITION_TYPE.CONTROLS,object:S,property:c,stages:[{lowerBound:E,upperBound:i,startValue:a.CONTROLS_TYPE.PLANAR,endValue:a.CONTROLS_TYPE.PLANAR},{lowerBound:s,upperBound:E,startValue:a.CONTROLS_TYPE.STREET,endValue:a.CONTROLS_TYPE.STREET}]},f={type:o.TRANSITION_TYPE.STATE_EVENT,object:O,property:_,stages:[{lowerBound:0,upperBound:.4,enterValue:"DRAW",outUpperValue:"TRANSITION",outLowerValue:"IDLE"}]},b={type:o.TRANSITION_TYPE.STATE_EVENT,object:O,property:A,stages:[{lowerBound:.001,upperBound:1,enterValue:"TRANSITION",outUpperValue:"STREET",outLowerValue:"IDLE"}]},x={type:o.TRANSITION_TYPE.CAMERA_POSITION,object:O,property:A,stages:[{lowerBound:1e-4,upperBound:.3,startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}}]},C={type:o.TRANSITION_TYPE.CAMERA_ROTATION,object:O,property:A,stages:[{lowerBound:1e-4,upperBound:.3,startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endTarget:{x:"Target",y:"Target",z:"Start Target"}}]},j={type:o.TRANSITION_TYPE.CAMERA_POSITION_TARGET,object:O,property:A,stages:[{lowerBound:.3,upperBound:.7,startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}}]},M={type:o.TRANSITION_TYPE.CAMERA_POSITION_TARGET,object:O,property:A,stages:[{lowerBound:1e-4,upperBound:1,startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},startTarget:{x:"Start Target",y:"Start Target",z:"Start Target"},endTarget:{x:"Target",y:"Target",z:"Target"}}]};exports.transitions=[B,g,V,L,w,f,b,x,C,j];
},{"./Transition":"pv16","../Transition":"HotB","../OLViewer2":"huS9","three":"lKFo","../VTThreeViewer2":"xmXH"}],"Sl0y":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var n in r)"default"!==n&&Object.hasOwnProperty.call(r,n)&&e(o,r,n);return t(o,r),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.transitions=void 0;var o=require("./Transition"),n=require("../Transition"),T=require("../OLViewer2"),a=r(require("three")),u=require("../VTThreeViewer2"),s=0,d=200,p=100,i=20,E=Number.MAX_VALUE,I=new a.Vector4(.7,.7,.7,1),P=Math.PI+.01,l=Math.PI/2,N=new a.Vector3,O=2,_=function(e,t){return e.threeViewer.currentCamera},c=function(e){return e},y=function(e,t){return{clock:e.threeViewer.animationClock,handler:t}},S=function(e){return e.handler.reverse?1-e.clock.elapsedTime/e.handler.timeFactor:e.clock.elapsedTime/e.handler.timeFactor},A="z",g=function(e){return e.position.z},B=function(e){return e.getWorldDirection(N).angleTo(new a.Vector3(0,0,1))},R={type:o.TRANSITION_TYPE.PLANE_TEXTURE_TEXTURE,object:y,property:S,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0,startTexture:T.IGN_STYLES.PLAN,endTexture:T.IGN_STYLES.PLAN,type:n.CONDITION_TYPE.CAMERA},{lowerBound:.8,upperBound:.9,startValue:1,endValue:0,startTexture:T.IGN_STYLES.PLAN,endTexture:T.IGN_STYLES.MUET,type:n.CONDITION_TYPE.TIME}]},V={type:o.TRANSITION_TYPE.PLANE_TEXTURE_COLOR,object:y,property:S,stages:[{lowerBound:.9,upperBound:1,startValue:0,endValue:1,startTexture:T.IGN_STYLES.MUET,endColor:I,type:n.CONDITION_TYPE.TIME}]},Y={type:o.TRANSITION_TYPE.BUILDING_HEIGHT,object:y,property:S,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0,type:n.CONDITION_TYPE.TIME},{lowerBound:.8,upperBound:1,startValue:0,endValue:1,type:n.CONDITION_TYPE.TIME}]},C={type:o.TRANSITION_TYPE.BUILDING_OPACITY,object:y,property:S,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0},{lowerBound:.8,upperBound:1,startValue:0,endValue:1}]},L={type:o.TRANSITION_TYPE.BUILDING_COLOR,object:y,property:S,stages:[{lowerBound:0,upperBound:.8,startValue:0,endValue:0},{lowerBound:.8,upperBound:1,startValue:0,endValue:1}]},w={type:o.TRANSITION_TYPE.CONTROLS,object:_,property:g,stages:[{lowerBound:i,upperBound:E,startValue:u.CONTROLS_TYPE.PLANAR,endValue:u.CONTROLS_TYPE.PLANAR},{lowerBound:s,upperBound:i,startValue:u.CONTROLS_TYPE.STREET,endValue:u.CONTROLS_TYPE.STREET}]},f={type:o.TRANSITION_TYPE.CAMERA_POSITION,object:y,property:S,stages:[{type:n.CONDITION_TYPE.TIME,lowerBound:1e-7,upperBound:.3,startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"}}]},M={type:o.TRANSITION_TYPE.CAMERA_ROTATION,object:y,property:S,stages:[{type:n.CONDITION_TYPE.TIME,lowerBound:1e-7,upperBound:.3,startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endTarget:{x:"Target",y:"Target",z:"Start Target"}}]},x={type:o.TRANSITION_TYPE.CAMERA_POSITION_TARGET,object:y,property:S,stages:[{type:n.CONDITION_TYPE.TIME,lowerBound:.3,upperBound:.7,startPosition:{x:"End Pos",y:"End Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},endTarget:{x:"Target",y:"Target",z:"Target"},startTarget:{x:"Target",y:"Target",z:"Start Target"}}]},b={type:o.TRANSITION_TYPE.CAMERA_POSITION_TARGET,object:y,property:S,stages:[{type:n.CONDITION_TYPE.TIME,lowerBound:1e-4,upperBound:1,startPosition:{x:"Start Pos",y:"Start Pos",z:"Start Pos"},endPosition:{x:"End Pos",y:"End Pos",z:"End Pos"},startTarget:{x:"Start Target",y:"Start Target",z:"Start Target"},endTarget:{x:"Target",y:"Target",z:"Target"}}]};exports.transitions=[V,R,Y,C,L,w,f,M,x];
},{"./Transition":"pv16","../Transition":"HotB","../OLViewer2":"huS9","three":"lKFo","../VTThreeViewer2":"xmXH"}],"sz2q":[function(require,module,exports) {
"use strict";var t,o,e=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.NumericalCondition=exports.Condition=exports.BOUND_TYPE=exports.VALUE_TYPE=void 0,function(t){t[t.NUMBER=0]="NUMBER"}(t=exports.VALUE_TYPE||(exports.VALUE_TYPE={})),function(t){t[t.LOWER=0]="LOWER",t[t.UPPER=1]="UPPER"}(o=exports.BOUND_TYPE||(exports.BOUND_TYPE={}));var n=function(){function t(t,o,e,n,r){this.object=t,this.property=o,this.type=e,this.listeners=[],this.valueType=n,this.data=r}return t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.handleObjectChange=function(t){},t.prototype.getCurrentValue=function(){return{value:this.value,bound:null,type:null}},t.prototype.setCustomValue=function(t){this.customValue=t},t}();exports.Condition=n;var r=function(t){function n(o,e,n,r,u,i,s){var p=t.call(this,o,e,n,r,s)||this;return p.lowerBound=u,p.upperBound=i,p}return e(n,t),n.prototype.getCurrentValue=function(){var t=null,e=null,n=null,r=null;return(e=this.customValue?this.customValue(this.object,this.property):this.property(this.object))>=this.lowerBound&&e<this.upperBound?t=!0:e<this.lowerBound?(t=!1,n=this.lowerBound,r=o.LOWER):e>=this.upperBound&&(t=!1,n=this.upperBound,r=o.UPPER),{value:t,bound:n,type:r}},n.prototype.getRatio=function(){return((this.customValue?this.customValue(this.object,this.property):this.property(this.object))-this.lowerBound)/(this.upperBound-this.lowerBound)},n}(n);exports.NumericalCondition=r;
},{}],"Lrda":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var o in r)"default"!==o&&Object.hasOwnProperty.call(r,o)&&e(n,r,o);return t(n,r),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCameraPositionTargetTransition=exports.createCameraRotationTransition=exports.createCameraPositionTransition=exports.createEventTransition2=exports.createEventTransition=exports.createControlsTransition=exports.createBuildingsColorTransition=exports.createBuildingsOpacityTransition=exports.createBuildingsHeightTransition=exports.createPlaneTextureColorTransition=exports.createPlaneTextureTextureTransition=exports.functionsMap=void 0;var n=require("./Condition"),o=require("./Transition"),a=require("../VTThreeViewer2"),i=r(require("../Utils")),s=r(require("three")),u=require("../AnimationStage");function l(e,t,r,i){for(var s=new o.Transition,u=t.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TWO_TEXTURES),l=e.object(t,i),T=e.property,p=0,d=e.stages;p<d.length;p++){var c=d[p],E=new n.NumericalCondition(l,T,c.type,n.VALUE_TYPE.NUMBER,c.lowerBound,c.upperBound,{startValue:c.startValue,endValue:c.endValue,startTexture:c.startTexture,endTexture:c.endTexture});s.addCondition(E)}return s.onChange(function(e,r){t.threeViewer.setPlaneMaterialType(a.MATERIAL_TYPE.MIX_TWO_TEXTURES),u.uniforms.fromTexture.value=t.textures.get(e.startTexture),u.uniforms.toTexture.value=t.textures.get(e.endTexture),u.needsUpdate=!0}),s.onValueChange(function(e,t){u.uniforms.t.value=e.startValue*(1-t)+e.endValue*t}),s.onExit(function(e,t,r){var o=0;r==n.BOUND_TYPE.UPPER&&(o=1),u.uniforms.t.value=e.startValue*(1-o)+e.endValue*o}),s}function T(e,t,r,i){for(var s=new o.Transition,u=t.threeViewer.materialsMap.get(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR),l=e.object(t,i),T=e.property,p=0,d=e.stages;p<d.length;p++){var c=d[p],E=new n.NumericalCondition(l,T,c.type,n.VALUE_TYPE.NUMBER,c.lowerBound,c.upperBound,{startValue:c.startValue,endValue:c.endValue,startTexture:c.startTexture,endColor:c.endColor});s.addCondition(E)}return s.onChange(function(e,r){t.threeViewer.setPlaneMaterialType(a.MATERIAL_TYPE.MIX_TEXTURE_COLOR),u.uniforms.tex.value=t.textures.get(e.startTexture),u.uniforms.color.value=e.endColor,u.needsUpdate=!0}),s.onValueChange(function(e,t){u.uniforms.t.value=e.startValue*(1-t)+e.endValue*t}),s.onExit(function(e,t,r){var o=0;r==n.BOUND_TYPE.UPPER&&(o=1),u.uniforms.t.value=e.startValue*(1-o)+e.endValue*o}),s}function p(e,t,r,a){for(var s=new o.Transition,u=e.object(t,a),l=e.property,T=0,p=e.stages;T<p.length;T++){var d=p[T],c=new n.NumericalCondition(u,l,d.type,n.VALUE_TYPE.NUMBER,d.lowerBound,d.upperBound,{startValue:d.startValue,endValue:d.endValue});s.addCondition(c)}return s.onValueChange(function(e,r){for(var n=0,o=t.threeViewer.featuresAllGroup;n<o.length;n++){var a=o[n];a.scale.set(1,1,a.userData.height*i.interpolateValue01(e.startValue,e.endValue,r))}}),s.onExit(function(e,r,o){var a=0;o==n.BOUND_TYPE.UPPER&&(a=1);for(var s=0,u=t.threeViewer.featuresAllGroup;s<u.length;s++){var l=u[s];l.scale.set(1,1,l.userData.height*i.interpolateValue01(e.startValue,e.endValue,a))}}),s}function d(e,t,r,a){for(var s=new o.Transition,u=e.object(t,a),l=e.property,T=0,p=e.stages;T<p.length;T++){var d=p[T],c=new n.NumericalCondition(u,l,d.type,n.VALUE_TYPE.NUMBER,d.lowerBound,d.upperBound,{startValue:d.startValue,endValue:d.endValue});s.addCondition(c)}return s.onValueChange(function(e,r){for(var n=0,o=t.threeViewer.featuresAllGroup;n<o.length;n++){o[n].material.opacity=i.interpolateValue01(e.startValue,e.endValue,r)}}),s.onExit(function(e,r,o){var a=0;o==n.BOUND_TYPE.UPPER&&(a=1);for(var s=0,u=t.threeViewer.featuresAllGroup;s<u.length;s++){u[s].material.opacity=i.interpolateValue01(e.startValue,e.endValue,a)}}),s}exports.functionsMap=new Map,exports.functionsMap.set(o.TRANSITION_TYPE.PLANE_TEXTURE_TEXTURE,l),exports.functionsMap.set(o.TRANSITION_TYPE.PLANE_TEXTURE_COLOR,T),exports.functionsMap.set(o.TRANSITION_TYPE.BUILDING_HEIGHT,p),exports.functionsMap.set(o.TRANSITION_TYPE.BUILDING_OPACITY,d),exports.functionsMap.set(o.TRANSITION_TYPE.BUILDING_COLOR,E),exports.functionsMap.set(o.TRANSITION_TYPE.STATE_EVENT,x),exports.functionsMap.set(o.TRANSITION_TYPE.CONTROLS,V),exports.functionsMap.set(o.TRANSITION_TYPE.CAMERA_POSITION,f),exports.functionsMap.set(o.TRANSITION_TYPE.CAMERA_ROTATION,g),exports.functionsMap.set(o.TRANSITION_TYPE.CAMERA_POSITION_TARGET,C),exports.createPlaneTextureTextureTransition=l,exports.createPlaneTextureColorTransition=T,exports.createBuildingsHeightTransition=p,exports.createBuildingsOpacityTransition=d;var c=new s.Color;function E(e,t,r,a){for(var s=new o.Transition,u=e.object(t,a),l=e.property,T=0,p=e.stages;T<p.length;T++){var d=p[T],E=new n.NumericalCondition(u,l,d.type,n.VALUE_TYPE.NUMBER,d.lowerBound,d.upperBound,{startValue:d.startValue,endValue:d.endValue});s.addCondition(E)}return s.onValueChange(function(e,r){for(var n=0,o=t.threeViewer.featuresAllGroup;n<o.length;n++){var a=o[n];c.setHex(a.userData.color),a.material.color.lerp(c,i.interpolateValue01(e.startValue,e.endValue,r))}}),s.onExit(function(e,r,o){var a=0;o==n.BOUND_TYPE.UPPER&&(a=1);for(var s=0,u=t.threeViewer.featuresAllGroup;s<u.length;s++){var l=u[s];c.setHex(l.userData.color),l.material.color.lerp(c,i.interpolateValue01(e.startValue,e.endValue,a))}}),s}function V(e,t,r){for(var i=new o.Transition,s=e.object(t),u=e.property,l=0,T=e.stages;l<T.length;l++){var p=T[l],d=new n.NumericalCondition(s,u,p.type,n.VALUE_TYPE.NUMBER,p.lowerBound,p.upperBound,{startValue:p.startValue,endValue:p.endValue});i.addCondition(d)}return i.onChange(function(e,t){console.log("controls",e),e.startValue==a.CONTROLS_TYPE.PLANAR?r.send("PLANAR"):e.startValue==a.CONTROLS_TYPE.STREET&&r.send("STREET")}),i}function P(e,t,r,a){for(var i=new o.Transition,s=e.object(t,a),u=e.property,l=0,T=e.stages;l<T.length;l++){var p=T[l],d=new n.NumericalCondition(s,u,p.type,n.VALUE_TYPE.NUMBER,p.lowerBound,p.upperBound,{startValue:p.startValue,endValue:p.endValue});i.addCondition(d)}return i.onChange(function(e,t){r.send(e.startValue)}),i}function x(e,t,r,a){for(var i=new o.Transition,s=e.object(t,a),u=e.property,l=0,T=e.stages;l<T.length;l++){var p=T[l],d=new n.NumericalCondition(s,u,p.type,n.VALUE_TYPE.NUMBER,p.lowerBound,p.upperBound,{enterValue:p.enterValue,outLowerValue:p.outLowerValue,outUpperValue:p.outUpperValue});i.addCondition(d)}return i.onChange(function(e,t){console.log("state transition",e.enterValue),r.send(e.enterValue)}),i.onExit(function(e,t,o){o==n.BOUND_TYPE.LOWER?(r.send(e.outLowerValue),console.log("lower!",e)):o==n.BOUND_TYPE.UPPER&&(r.send(e.outUpperValue),console.log("upper!",e))}),i}function f(e,t,r,a){for(var s=new o.Transition,l=e.object(t,a),T=e.property,p=0,d=e.stages;p<d.length;p++){var c=d[p],E=new n.NumericalCondition(l,T,c.type,n.VALUE_TYPE.NUMBER,c.lowerBound,c.upperBound,{startPosition:c.startPosition,endPosition:c.endPosition});s.addCondition(E)}var V={x:0,y:0,z:0},P={x:0,y:0,z:0};return s.onChangeFirst(function(e,t){V=i.getCoordsFromKeyPoints(e.startPosition,a.keyPointsMap,u.KEY_POINTS),P=i.getCoordsFromKeyPoints(e.endPosition,a.keyPointsMap,u.KEY_POINTS)}),s.onValueChange(function(e,r){t.threeViewer.currentCamera.position.set(V.x*(1-r)+P.x*r,V.y*(1-r)+r*P.y,V.z*(1-r)+r*P.z)}),s.onExit(function(e,r,o){console.log("on exit camera transition position!");var a=0;o==n.BOUND_TYPE.UPPER&&(a=1),t.threeViewer.currentCamera.position.set(V.x*(1-a)+P.x*a,V.y*(1-a)+P.y*a,V.z*(1-a)+P.z*a)}),s}function g(e,t,r,a){var l=new o.Transition,T=e.object(t,a),p=e.property,d=new s.Camera;d.up=new s.Vector3(0,0,1);for(var c=new s.Quaternion,E=new s.Quaternion,V={x:0,y:0,z:0},P={x:0,y:0,z:0},x=0,f=e.stages;x<f.length;x++){var g=f[x],C=new n.NumericalCondition(T,p,g.type,n.VALUE_TYPE.NUMBER,g.lowerBound,g.upperBound,{startPosition:g.startPosition,endTarget:g.endTarget});l.addCondition(C)}return l.onChangeFirst(function(e,t){V=i.getCoordsFromKeyPoints(e.startPosition,a.keyPointsMap,u.KEY_POINTS),P=i.getCoordsFromKeyPoints(e.endTarget,a.keyPointsMap,u.KEY_POINTS),d.position.copy(new s.Vector3(V.x,V.y,V.z)),d.lookAt(P.x,P.y,P.z),console.log("data on change",V,P),c.copy(a.startTransitionQuaternion),E.copy(d.quaternion),console.log("start quaternion",c)}),l.onValueChange(function(e,r){t.threeViewer.currentCamera.quaternion.slerpQuaternions(c,E,r)}),l.onExit(function(e,r,o){console.log("on exit camera transition rotation!",r,e);var a=0;o==n.BOUND_TYPE.UPPER&&(a=1),t.threeViewer.currentCamera.quaternion.slerpQuaternions(c,E,a)}),l}function C(e,t,r,a){for(var l=new o.Transition,T=e.object(t,a),p=e.property,d={x:0,y:0,z:0},c={x:0,y:0,z:0},E={x:0,y:0,z:0},V={x:0,y:0,z:0},P=0,x=e.stages;P<x.length;P++){var f=x[P],g=new n.NumericalCondition(T,p,f.type,n.VALUE_TYPE.NUMBER,f.lowerBound,f.upperBound,{startPosition:f.startPosition,endPosition:f.endPosition,startTarget:f.startTarget,endTarget:f.endTarget});l.addCondition(g)}return l.onChangeFirst(function(e,r){d=i.getCoordsFromKeyPoints(e.startPosition,a.keyPointsMap,u.KEY_POINTS),c=i.getCoordsFromKeyPoints(e.endPosition,a.keyPointsMap,u.KEY_POINTS),E=i.getCoordsFromKeyPoints(e.startTarget,a.keyPointsMap,u.KEY_POINTS),V=i.getCoordsFromKeyPoints(e.endTarget,a.keyPointsMap,u.KEY_POINTS),Math.abs(d.x-E.x)<.001&&Math.abs(d.y-E.y)<.001&&(t.threeViewer.orbitCamera.rotateUp(.01),t.threeViewer.orbitCamera.position=new s.Vector3(d.x,d.y,d.z),t.threeViewer.orbitCamera.target=new s.Vector3(E.x,E.y,E.z),t.threeViewer.orbitCamera.update(),d.x=t.threeViewer.orbitCamera.camera.position.x,d.y=t.threeViewer.orbitCamera.camera.position.y,d.z=t.threeViewer.orbitCamera.camera.position.z)}),l.onValueChange(function(e,r){t.threeViewer.orbitCamera.position.set(d.x*(1-r)+c.x*r,d.y*(1-r)+c.y*r,d.z*(1-r)+c.z*r),t.threeViewer.orbitCamera.target.set(E.x*(1-r)+V.x*r,E.y*(1-r)+V.y*r,E.z*(1-r)+V.z*r),t.threeViewer.orbitCamera.update()}),l.onExit(function(e,r,o){console.log("on exit camera transition target position!");var a=0;o==n.BOUND_TYPE.UPPER&&(a=1),t.threeViewer.orbitCamera.position.set(d.x*(1-a)+c.x*a,d.y*(1-a)+c.y*a,d.z*(1-a)+c.z*a),t.threeViewer.orbitCamera.target.set(E.x*(1-a)+V.x*a,E.y*(1-a)+V.y*a,E.z*(1-a)+V.z*a),t.threeViewer.orbitCamera.update()}),l}exports.createBuildingsColorTransition=E,exports.createControlsTransition=V,exports.createEventTransition=P,exports.createEventTransition2=x,exports.createCameraPositionTransition=f,exports.createCameraRotationTransition=g,exports.createCameraPositionTargetTransition=C;
},{"./Condition":"sz2q","./Transition":"pv16","../VTThreeViewer2":"xmXH","../Utils":"r8Tc","three":"lKFo","../AnimationStage":"ftNt"}],"UQMr":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var i in r)"default"!==i&&Object.hasOwnProperty.call(r,i)&&t(n,r,i);return e(n,r),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTransition=void 0;var n=r(require("./TransitionFactory"));function i(t,e,r,i,a){for(var o=[],u=0,c=t;u<c.length;u++){var s=c[u];o.push(n.functionsMap.get(s.type)(s,e,r,i))}return null!=i.variableTime&&i.variableTime?a.totalduration=function(t){return t*i.timeFactor}:a.totalduration=function(t){return t},a.setTransitions(o),o}exports.createTransition=i;
},{"./TransitionFactory":"Lrda"}],"OiAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransitionController=void 0;var n=require("../Transition"),t=function(){function t(){this.transitions=[],this.animationEndedListeners=[],this.totalduration=-Number.MAX_VALUE}return t.prototype.addTransition=function(t){this.transitions.push(t);var i=this.totalduration;if(t.conditionTypes.has(n.CONDITION_TYPE.TIME))for(var o=0,e=t.conditions;o<e.length;o++){var r=e[o];r.type==n.CONDITION_TYPE.TIME&&null!=r.upperBound&&r.upperBound>i&&(i=r.upperBound)}this.maxTime=i;for(var s=0,a=t.onCreateListeners;s<a.length;s++){(0,a[s])()}},t.prototype.handleChange=function(n,t){for(var i=t.getElapsedTime(),o=0,e=this.transitions;o<e.length;o++){e[o].handleChange()}if(i>this.totalduration(this.maxTime)&&t.running)for(var r=0,s=this.animationEndedListeners;r<s.length;r++){(0,s[r])()}},t.prototype.onAnimationEnded=function(n){this.animationEndedListeners.push(n)},t.prototype.setTransitions=function(t){for(var i=-Number.MAX_VALUE,o=0,e=t;o<e.length;o++){var r=e[o];if(r.conditionTypes.has(n.CONDITION_TYPE.TIME))for(var s=0,a=r.conditions;s<a.length;s++){var u=a[s];u.type==n.CONDITION_TYPE.TIME&&null!=u.upperBound&&u.upperBound>i&&(i=u.upperBound)}}this.transitions=t,this.maxTime=i},t}();exports.TransitionController=t;
},{"../Transition":"HotB"}],"PDYr":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),r=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./VTController"),i=require("./OLViewer2"),a=require("./VTThreeViewer"),o=t(require("./TransitionFactory")),s=require("./Constants"),u=require("./GoToInteractionHandlerXState"),l=require("./DragGoInteractionHandlerXState"),c=require("xstate"),d=require("./xStateUtils"),T=require("./transitions/DragAndGoCR"),O=require("./transitions/GoToTransitionCR"),_=require("./transitions/TransitionCreator"),f=require("./transitions/TransitionController"),E=760,C=480,I=17,h=1,D=[259909,6249540],N=0,M=s.INTERACTION_MODE.GO_TO,q=T.transitions,G=O.transitions,A=[5850934,10915707,14271408,5837314,15921906,15919068],S="onlyCamera",v=new n.VTController(E,C,D,N,I,h,["bati_surf"],[i.IGN_STYLES.PLAN,i.IGN_STYLES.MUET],a.RENDER_MODE.SINGLE,A,s.BUILDINGS_SOURCE.WFS),w=null,R=null,L=new f.TransitionController;function b(){v.render(),null!=w&&w.send("update",{t:1e3*v.threeViewer.clock.getDelta()}),requestAnimationFrame(b)}v.init(D,I).then(function(){v.threeViewer.addCameraListener(function(e,r){L.handleChange(e,r)}),M==s.INTERACTION_MODE.CAMERA_COUPLED?(o.createTransitionForControls(v),o.createPlaneTransition2(v),o.createBuildingTransition(v)):M==s.INTERACTION_MODE.GO_TO?(R=new u.GoToInteractionHandler(v),w=c.interpret(R.stateMachine,{devTools:!0}),_.createTransition(G,v,w,R,L),d.addDOMListeners(w,v.threeViewer.renderer),L.onAnimationEnded(function(){w.send("ANIMATION_END")}),w.start()):M==s.INTERACTION_MODE.DRAG_GO&&(R=new l.DragGoInteractionHandler(v),w=c.interpret(R.stateMachine,{devTools:!0}),R.setService(w),_.createTransition(q,v,w,R,L),w.onTransition(function(e){e.changed}),d.addDOMListeners(w,v.threeViewer.renderer),w.start()),b()});
},{"./VTController":"QVEW","./OLViewer2":"huS9","./VTThreeViewer":"JMdq","./TransitionFactory":"Auzc","./Constants":"Xnuv","./GoToInteractionHandlerXState":"qPyu","./DragGoInteractionHandlerXState":"JO2s","xstate":"exuu","./xStateUtils":"DMco","./transitions/DragAndGoCR":"V2pc","./transitions/GoToTransitionCR":"Sl0y","./transitions/TransitionCreator":"UQMr","./transitions/TransitionController":"OiAd"}]},{},["PDYr"], null)
//# sourceMappingURL=index_expe_abstract.175b55de.js.map